<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- $Header: 00001_sqld360_323688_3hwq5m5h3gkaq_index v192 (2019-03-23) mauro.pagano $ -->
<!-- Copyright (c) 2015, All rights reserved. -->
<!-- Author: mauro.pagano@gmail.com -->

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link rel="icon" href="SQLd360_favicon.ico">
<title>Triggers</title>

<style type="text/css">
body             {font:10pt Arial,Helvetica,Geneva,sans-serif; color:black; background:white;}
h1               {font-size:16pt; font-weight:bold; color:#336699; border-bottom:1px solid #336699; margin-top:0pt; margin-bottom:0pt; padding:0px 0px 0px 0px;}
h2               {font-size:14pt; font-weight:bold; color:#336699; margin-top:4pt; margin-bottom:0pt;}
h3               {font-size:12pt; font-weight:bold; color:#336699; margin-top:4pt; margin-bottom:0pt;}
pre              {font:8pt monospace,Monaco,"Courier New",Courier;}
a                {color:#663300;}
table            {font-size:8pt; border-collapse:collapse; empty-cells:show; white-space:nowrap; border:1px solid #336699;}
li               {font-size:8pt; color:black; padding-left:4px; padding-right:4px; padding-bottom:2px;}
th               {font-weight:bold; color:white; background:#0066CC; padding-left:4px; padding-right:4px; padding-bottom:2px;}
tr               {color:black; background:#ffffff;}
tr.main          {color:black; background:#ffffff;}
tr.main:hover    {color:black; background:#ffffff;}
td               {vertical-align:top; border:1px solid #336699;}
td.c             {text-align:center;}
tr:hover         {background:#0066CC; color:white;}
font.n           {font-size:8pt; font-style:italic; color:#336699;}
font.f           {font-size:8pt; color:#999999; border-top:1px solid #336699; margin-top:30pt;}
div.google-chart {width:809px; height:500px;}
</style>

<script src="sorttable.js"></script>

<!-- 02029_sqld360_323688_3hwq5m5h3gkaq_3a_88_triggers.html $ -->
</head>
<body>
<h1> <a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank"><img src="SQLd360_img.jpg" alt="SQLd360" height="33" width="52"></a> 3a.88. Triggers <em>(DBA_TRIGGERS)</em>  </h1>

<br>



<p>
<table class=sortable>
<tr>
<th scope="col">
#
</th>
<th scope="col">
OWNER
</th>
<th scope="col">
TRIGGER_NAME
</th>
<th scope="col">
TRIGGER_TYPE
</th>
<th scope="col">
TRIGGERING_EVENT
</th>
<th scope="col">
TABLE_OWNER
</th>
<th scope="col">
BASE_OBJECT_TYPE
</th>
<th scope="col">
TABLE_NAME
</th>
<th scope="col">
COLUMN_NAME
</th>
<th scope="col">
REFERENCING_NAMES
</th>
<th scope="col">
WHEN_CLAUSE
</th>
<th scope="col">
STATUS
</th>
<th scope="col">
DESCRIPTION
</th>
<th scope="col">
ACTION_TYPE
</th>
<th scope="col">
TRIGGER_BODY
</th>
<th scope="col">
CROSSED
</th>
<th scope="col">
BEF
</th>
<th scope="col">
BEF
</th>
<th scope="col">
AFT
</th>
<th scope="col">
AFT
</th>
<th scope="col">
INS
</th>
<th scope="col">
FIR
</th>
<th scope="col">
APP
</th>
</tr>
<tr>
<td>
1
</td>
<td>
THH_C4C
</td>
<td>
TRG_CLAIM_REVIEW_AUDIT_DELETE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
CLAIM_REVIEW
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_claim_review_audit_delete before delete on claim_review for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
  last_audit_id number;
  curr_date     date;

begin

  curr_date := current_date;

  begin
    select
      audit_id into last_audit_id
    from
      claim_review_audit
    where
      claim_review_id = :old.claim_review_id
      and
      next_audit_id is null
      and
      valid_to is null
    for update;
    exception
      when no_data_found then
        last_audit_id := null;
  end;

  update
    claim_review_audit
  set
    valid_to = curr_date
  where
    audit_id = last_audit_id;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
2
</td>
<td>
THH_C4C
</td>
<td>
TRG_CLAIM_REVIEW_AUDIT_INSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
CLAIM_REVIEW
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_claim_review_audit_insert before insert or update on claim_review for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
  last_audit_id number;
  curr_date     date;

begin

  curr_date := current_date;

  if :new.creation_date is null then
    :new.creation_date := curr_date;
  end if;

  begin
    select
      audit_id into last_audit_id
    from
      claim_review_audit
    where
      claim_review_id = :old.claim_review_id
      and
      next_audit_id is null
    for update;
    exception
      when no_data_found then
        last_audit_id := null;
  end;

  insert into claim_review_audit (
    claim_review_id,
    creation_date,
    object_state,
    enable_claim_review,
    claim_service_start_date,
    claim_service_end_date,
    claim_receipt_start_date,
    claim_receipt_end_date,
    claim_type,
    requesting_user,
    review_reason_description,
    claim_review_reason,
    provider_id,
    valid_from,
    valid_to,
    audit_id,
    previous_audit_id,
    next_audit_id
  ) values (
    :new.claim_review_id,
    :new.creation_date,
    :new.object_state,
    :new.enable_claim_review,
    :new.claim_service_start_date,
    :new.claim_service_end_date,
    :new.claim_receipt_start_date,
    :new.claim_receipt_end_date,
    :new.claim_type,
    :new.requesting_user,
    :new.review_reason_description,
    :new.claim_review_reason,
    :new.provider_id,
    sysdate,
    null,
    claim_review_audit_seq.nextval,
		last_audit_id,
		null
	);

  update
    claim_review_audit
  set
    valid_to = curr_date,
    next_audit_id = claim_review_audit_seq.currval
  where
    audit_id = last_audit_id;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
3
</td>
<td>
THH_C4C
</td>
<td>
TRG_TELEPHONE_AUDIT_DELETE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
TELEPHONE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_telephone_audit_delete before delete on telephone for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
  last_audit_id number;
  curr_date     date;

begin

  curr_date := current_date;

  begin
    select
      audit_id into last_audit_id
    from
      telephone_audit
    where
      telephone_id = :old.telephone_id
      and
      next_audit_id is null
      and
      valid_to is null
    for update;
    exception
      when no_data_found then
        last_audit_id := null;
  end;

  update
    telephone_audit
  set
    valid_to = curr_date
  where
    audit_id = last_audit_id;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
4
</td>
<td>
THH_C4C
</td>
<td>
TRG_TELEPHONE_AUDIT_INSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
TELEPHONE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_telephone_audit_insert before insert or update on telephone for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
  last_audit_id number;
  curr_date     date;

begin

  curr_date := current_date;

  if :new.creation_date is null then
    :new.creation_date := curr_date;
  end if;

  begin
    select
      audit_id into last_audit_id
    from
      telephone_audit
    where
      telephone_id = :old.telephone_id
      and
      next_audit_id is null
    for update;
    exception
      when no_data_found then
        last_audit_id := null;
  end;

  insert into telephone_audit (
    telephone_id,
    creation_date,
    object_state,
    country_code,
    area_code,
    phone_number,
    extension,
    phone_type,
    provider_id,
    valid_from,
    valid_to,
    audit_id,
    previous_audit_id,
    next_audit_id
  ) values (
    :new.telephone_id,
    :new.creation_date,
    :new.object_state,
    :new.country_code,
    :new.area_code,
    :new.phone_number,
    :new.extension,
    :new.phone_type,
    :new.provider_id,
    sysdate,
    null,
    telephone_audit_seq.nextval,
	last_audit_id,
	null
	);

  update
    telephone_audit
  set
    valid_to = curr_date,
    next_audit_id = telephone_audit_seq.currval
  where
    audit_id = last_audit_id;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
5
</td>
<td>
THH_C4C
</td>
<td>
TRG_ALRT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ALRT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_ALRT_AUDITINSERT&quot; BEFORE INSERT ON T_ALRT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.alrt_crtd IS NULL THEN 
    :new.alrt_crtd := curr_date; 
  END IF; 

  IF :new.alrt_las_act_tim IS NULL THEN 
    :new.alrt_las_act_tim := curr_date; 
  END IF; 

  IF :new.alrt_las_act IS NULL THEN 
    :new.alrt_las_act := 1; 
  END IF; 

  IF :new.alrt_obj_stt IS NULL THEN 
    :new.alrt_obj_stt := 1; 
  END IF; 

  IF :new.alrt_vers IS NULL THEN 
    :new.alrt_vers := 0; 
  END IF; 

  IF :new.alrt_vsbt IS NULL THEN 
    :new.alrt_vsbt := 1001; 
  END IF; 

  IF :new.alrt_las_act_by IS NULL THEN 
    :new.alrt_las_act_by := 1; 
  END IF; 

  IF :new.alrt_origcrtr IS NULL THEN 
    :new.alrt_origcrtr := 1; 
  END IF; 

  IF :new.alrt_origcrtrlogdin IS NULL THEN 
    :new.alrt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.alrt_las_act_by_logdin IS NULL THEN 
    :new.alrt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_alrt 
  ( 
   alrt_typ, 
   alrt_rspdtxt, 
   alrt_wkfwistcid, 
   alrt_cnv_id, 
   alrt_ownrchndflag, 
   alrt_ownrchndcnt, 
   alrt_sentat, 
   alrt_ack_at, 
   alrt_rsldat, 
   alrt_src__src_typ, 
   alrt_rfrdobj_id, 
   alrt_rfrdobj_typ, 
   alrt_rfngwkfwtsk, 
   alrt_prvsrfngtsk, 
   alrt_prvsrfngtsk_prmn, 
   alrt_ownr, 
   alrt_prvsownr, 
   alrt_prvssndr, 
   alrt_prvsownrprmn, 
   alrt_tnfr, 
   alrt_prvstnfr, 
   alrt_affn_um_evntreqt, 
   alrt_affn_um_extn, 
   alrt_affn_pvdr, 
   alrt_affn_cm, 
   alrt_affn_memb, 
   alrt_affn_um_evnt, 
   alrt_src__asmtcarecalc, 
   alrt_src__pat_id_qry, 
   alrt_sentby, 
   alrt_rcpt, 
   alrt_cfrdmsg, 
   alrt_otcm, 
   classtype, 
   alrt_c4c_id, 
   alrt_crtd, 
   alrt_las_act, 
   alrt_las_act_actrtyp, 
   alrt_obj_stt, 
   alrt_vers, 
   alrt_vsbt, 
   alrt_dltddt, 
   alrt_las_act_by, 
   alrt_origcrtr, 
   alrt_origcrtrlogdin, 
   alrt_las_act_by_logdin, 
   alrt_univid, 
   alrt_txt, 
   alrt_id, 
   valid_from, 
   valid_to , 
   alrt_audid, 
   alrt_prev_audid, 
   alrt_next_audid
  ) 
  VAL
UES 
  ( 
   :new.alrt_typ,
   :new.alrt_rspdtxt,
   :new.alrt_wkfwistcid,
   :new.alrt_cnv_id,
   :new.alrt_ownrchndflag,
   :new.alrt_ownrchndcnt,
   :new.alrt_sentat,
   :new.alrt_ack_at,
   :new.alrt_rsldat,
   :new.alrt_src__src_typ,
   :new.alrt_rfrdobj_id,
   :new.alrt_rfrdobj_typ,
   :new.alrt_rfngwkfwtsk,
   :new.alrt_prvsrfngtsk,
   :new.alrt_prvsrfngtsk_prmn,
   :new.alrt_ownr,
   :new.alrt_prvsownr,
   :new.alrt_prvssndr,
   :new.alrt_prvsownrprmn,
   :new.alrt_tnfr,
   :new.alrt_prvstnfr,
   :new.alrt_affn_um_evntreqt,
   :new.alrt_affn_um_extn,
   :new.alrt_affn_pvdr,
   :new.alrt_affn_cm,
   :new.alrt_affn_memb,
   :new.alrt_affn_um_evnt,
   :new.alrt_src__asmtcarecalc,
   :new.alrt_src__pat_id_qry,
   :new.alrt_sentby,
   :new.alrt_rcpt,
   :new.alrt_cfrdmsg,
   :new.alrt_otcm,
   :new.classtype,
   :new.alrt_c4c_id,
   :new.alrt_crtd,
   :new.alrt_las_act,
   :new.alrt_las_act_actrtyp,
   :new.alrt_obj_stt,
   :new.alrt_vers,
   :new.alrt_vsbt,
   :new.alrt_dltddt,
   :new.alrt_las_act_by,
   :new.alrt_origcrtr,
   :new.alrt_origcrtrlogdin,
   :new.alrt_las_act_by_logdin,
   :new.alrt_univid,
   :new.alrt_txt, 
   :new.alrt_id, 
   :new.alrt_las_act_tim, 
   NULL, 
   u_alrt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
6
</td>
<td>
THH_C4C
</td>
<td>
TRG_ALRT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ALRT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_alrt_auditupdate BEFORE
  UPDATE
    ON T_ALRT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        alrt_audid
      INTO
        last_audid
      FROM
        a_alrt
      WHERE
        alrt_id            = :old.alrt_id
      AND alrt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.alrt_las_act_tim = :new.alrt_las_act_tim THEN
      UPDATE
        a_alrt
      SET
        alrt_txt               = :new.alrt_txt,
        alrt_typ               = :new.alrt_typ,
        alrt_rspdtxt           = :new.alrt_rspdtxt,
        alrt_wkfwistcid        = :new.alrt_wkfwistcid,
        alrt_cnv_id            = :new.alrt_cnv_id,
        alrt_ownrchndflag      = :new.alrt_ownrchndflag,
        alrt_ownrchndcnt       = :new.alrt_ownrchndcnt,
        alrt_sentat            = :new.alrt_sentat,
        alrt_ack_at            = :new.alrt_ack_at,
        alrt_rsldat            = :new.alrt_rsldat,
        alrt_src__src_typ      = :new.alrt_src__src_typ,
        alrt_rfrdobj_id        = :new.alrt_rfrdobj_id,
        alrt_rfrdobj_typ       = :new.alrt_rfrdobj_typ,
        alrt_rfngwkfwtsk       = :new.alrt_rfngwkfwtsk,
        alrt_prvsrfngtsk       = :new.alrt_prvsrfngtsk,
        alrt_prvsrfngtsk_prmn  = :new.alrt_prvsrfngtsk_prmn,
        alrt_ownr              = :new.alrt_ownr,
        alrt_prvsownr          = :new.alrt_prvsownr,
        alrt_prvssndr          = :new.alrt_prvssndr,
        alrt_prvsownrprmn      = :new.alrt_prvsownrprmn,
        alrt_tnfr              = :new.alrt_tnfr,
        alrt_prvstnfr          = :new.alrt_prvstnfr,
        alrt_affn_um_evntreqt  = :new.alrt_affn_um_evntreqt,
        alrt_affn_um_extn      = :new.alrt_affn_um_extn,
        alrt_affn_pvdr         = :new.alrt_affn_pvdr,
        alrt_affn_cm           = :new.alrt_affn_cm,
        alrt_affn_mem
b         = :new.alrt_affn_memb,
        alrt_affn_um_evnt      = :new.alrt_affn_um_evnt,
        alrt_src__asmtcarecalc = :new.alrt_src__asmtcarecalc,
        alrt_src__pat_id_qry   = :new.alrt_src__pat_id_qry,
        alrt_sentby            = :new.alrt_sentby,
        alrt_rcpt              = :new.alrt_rcpt,
        alrt_cfrdmsg           = :new.alrt_cfrdmsg,
        alrt_otcm              = :new.alrt_otcm,
        classtype              = :new.classtype,
        alrt_c4c_id            = :new.alrt_c4c_id,
        alrt_crtd              = :new.alrt_crtd,
        alrt_las_act           = :new.alrt_las_act,
        alrt_las_act_actrtyp   = :new.alrt_las_act_actrtyp,
        alrt_obj_stt           = :new.alrt_obj_stt,
        alrt_vers              = :new.alrt_vers,
        alrt_vsbt              = :new.alrt_vsbt,
        alrt_dltddt            = :new.alrt_dltddt,
        alrt_las_act_by        = :new.alrt_las_act_by,
        alrt_origcrtr          = :new.alrt_origcrtr,
        alrt_origcrtrlogdin    = :new.alrt_origcrtrlogdin,
        alrt_las_act_by_logdin = :new.alrt_las_act_by_logdin,
        alrt_univid            = :new.alrt_univid
      WHERE
        alrt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_alrt
        (
          alrt_txt,
          alrt_typ,
          alrt_rspdtxt,
          alrt_wkfwistcid,
          alrt_cnv_id,
          alrt_ownrchndflag,
          alrt_ownrchndcnt,
          alrt_sentat,
          alrt_ack_at,
          alrt_rsldat,
          alrt_src__src_typ,
          alrt_rfrdobj_id,
          alrt_rfrdobj_typ,
          alrt_rfngwkfwtsk,
          alrt_prvsrfngtsk,
          alrt_prvsrfngtsk_prmn,
          alrt_ownr,
          alrt_prvsownr,
          alrt_prvssndr,
          alrt_prvsownrprmn,
          alrt_tnfr,
          alrt_prvstnfr,
          alrt_affn_um_evntreqt,
          alrt_affn_um_ex
tn,
          alrt_affn_pvdr,
          alrt_affn_cm,
          alrt_affn_memb,
          alrt_affn_um_evnt,
          alrt_src__asmtcarecalc,
          alrt_src__pat_id_qry,
          alrt_sentby,
          alrt_rcpt,
          alrt_cfrdmsg,
          alrt_otcm,
          classtype,
          alrt_c4c_id,
          alrt_crtd,
          alrt_las_act,
          alrt_las_act_actrtyp,
          alrt_obj_stt,
          alrt_vers,
          alrt_vsbt,
          alrt_dltddt,
          alrt_las_act_by,
          alrt_origcrtr,
          alrt_origcrtrlogdin,
          alrt_las_act_by_logdin,
          alrt_univid,
          alrt_id,
          valid_from,
          valid_to,
          alrt_audid,
          alrt_prev_audid,
          alrt_next_audid
        )
        VALUES
        (
          :new.alrt_txt,
          :new.alrt_typ,
          :new.alrt_rspdtxt,
          :new.alrt_wkfwistcid,
          :new.alrt_cnv_id,
          :new.alrt_ownrchndflag,
          :new.alrt_ownrchndcnt,
          :new.alrt_sentat,
          :new.alrt_ack_at,
          :new.alrt_rsldat,
          :new.alrt_src__src_typ,
          :new.alrt_rfrdobj_id,
          :new.alrt_rfrdobj_typ,
          :new.alrt_rfngwkfwtsk,
          :new.alrt_prvsrfngtsk,
          :new.alrt_prvsrfngtsk_prmn,
          :new.alrt_ownr,
          :new.alrt_prvsownr,
          :new.alrt_prvssndr,
          :new.alrt_prvsownrprmn,
          :new.alrt_tnfr,
          :new.alrt_prvstnfr,
          :new.alrt_affn_um_evntreqt,
          :new.alrt_affn_um_extn,
          :new.alrt_affn_pvdr,
          :new.alrt_affn_cm,
          :new.alrt_affn_memb,
          :new.alrt_affn_um_evnt,
          :new.alrt_src__asmtcarecalc,
          :new.alrt_src__pat_id_qry,
          :new.alrt_sentby,
          :new.alrt_rcpt,
          :new.alrt_cfrdmsg,
          :new.alrt_otcm,
          :new.classtype,
          :new.alrt_c4c_id,
          :new.alrt_crtd,
          :new.alrt_las_act,
          :new.alrt_las_act_actrtyp,
          :new.alr
t_obj_stt,
          :new.alrt_vers,
          :new.alrt_vsbt,
          :new.alrt_dltddt,
          :new.alrt_las_act_by,
          :new.alrt_origcrtr,
          :new.alrt_origcrtrlogdin,
          :new.alrt_las_act_by_logdin,
          :new.alrt_univid,
          :new.alrt_id,
          :new.alrt_las_act_tim,
          NULL,
          u_alrt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_alrt
      SET
        valid_to        = :new.alrt_las_act_tim,
        alrt_next_audid = u_alrt.CURRVAL
      WHERE
        alrt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
7
</td>
<td>
THH_C4C
</td>
<td>
TRG_APBL
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APBL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_apbl before insert or update on t_apbl
for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
    v_auth_id number(19,0);
  begin
    if :new.apbl_umevent is null then
      if :new.msrv_srvcdgis is not null then
        select umds_dgisum_evnt into v_auth_id
        from t_membdgisbase
        where
          t_membdgisbase.mbdb_id = :new.msrv_srvcdgis;
        if v_auth_id is not null then
          :new.apbl_umevent := v_auth_id;
        end if;
      end if;
    end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
8
</td>
<td>
THH_C4C
</td>
<td>
TRG_APBL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APBL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_apbl_auditinsert before insert on t_apbl

  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    -- save current date
    curr_date date;

  begin
    curr_date := current_date;
    if :new.apbl_crtd is null then
      :new.apbl_crtd := curr_date;
    end if;
    if :new.apbl_las_act_tim is null then
      :new.apbl_las_act_tim := curr_date;
    end if;
    if :new.apbl_las_act is null then
      :new.apbl_las_act := 1;
    end if;
    if :new.apbl_obj_stt is null then
      :new.apbl_obj_stt := 1;
    end if;
    if :new.apbl_vers is null then
      :new.apbl_vers := 0;
    end if;
    if :new.apbl_vsbt is null then
      :new.apbl_vsbt := 1001;
    end if;
    if :new.apbl_las_act_by is null then
      :new.apbl_las_act_by := 1;
    end if;
    if :new.apbl_origcrtr is null then
      :new.apbl_origcrtr := 1;
    end if;
    if :new.apbl_origcrtrlogdin is null then
      :new.apbl_origcrtrlogdin := 1;
    end if;
    if :new.apbl_las_act_by_logdin is null then
      :new.apbl_las_act_by_logdin := 1;
    end if;
    insert into a_apbl (
      apbl_origcrtr,
      apbl_origcrtrlogdin,
      apbl_las_act_by_logdin,
      apbl_univid,
      apbl_rqtddt_from,
      apbl_rqtddt_to,
      apbl_rqtdqnty,
      apbl_aprddt_from,
      apbl_aprddt_to,
      apbl_aprdqnty,
      apbl_actldt_from,
      apbl_actldt_to,
      apbl_actlqnty,
      apbl_authid,
      apbl_seq,
      apbl_cmmt,
      apbl_dtmn,
      apbl_is_err,
      apbl_err_txt,
      msrv_fees_vrfd,
      msrv_cntrct_id,
      msrv_last_fill_date,
      msrv_date_written,
      msrv_refills,
      msrv_substitution,
      umxt_wkfwistcid,
      umxt_cnv_id,
      umxt_ownrchndflag,
      umxt_ownrchndcnt,
      umxt_mnlydrmdat,
      umxt_id,
      msrv_cumeaprddt_from,
      msrv_cumeaprdqnty,
      msrv_cumeaprddt_to,
      msrv_wkfwistcid,
      msrv_cnv_id,
      msrv_ownrchndflag,
      msrv_ownrchndcnt,
      msrv_mnlydrmdat,
      msrv_id,
      umxt_rfngwkfwtsk,
      umxt_prvsrfngtsk,
      umxt_prvsrfngtsk_prmn,
      umxt_ownr,
      umxt_prvsownr,
      umxt_prvssndr,
      umxt_
prvsownrprmn,
      umxt_tnfr,
      umxt_prvstnfr,
      umxt_mnlydrmdby,
      msrv_rfngwkfwtsk,
      msrv_prvsrfngtsk,
      msrv_prvsrfngtsk_prmn,
      msrv_ownr,
      msrv_prvsownr,
      msrv_prvssndr,
      msrv_prvsownrprmn,
      msrv_tnfr,
      msrv_prvstnfr,
      msrv_mnlydrmdby,
      msrv_cstmflds,
      msrv_mdclsrvctyp,
      msrv_plceof_srvctyp,
      msrv_bed_typ,
      umxt_prntevnt,
      apbl_denlresn,
      umxt_dclyxtdd,
      apbl_actlunts,
      apbl_aprdunts,
      apbl_rqtdunts,
      umxt_xtdd,
      msrv_srvcdgis,
      msrv_las_extn,
      msrv_pvdrastn,
      msrv_snp,
      apbl_dec_prty,
      apbl_srv_cde_mod,
      apbl_ref_cat,
      apbl_ref_cat_mod,
      apbl_det_rsn,
      msrv_srvc_agrmnt,
      msrv_pay_at_max,
      msrv_cvr_thr_discharge,
      msrv_in_network,
      msrv_extend_limit,
      msrv_rmbrsmnt_mthd,
      msrv_rmbrsmnt_amount,
      msrv_flat_fee_type,
      msrv_pct_billed,
      classtype,
      apbl_c4c_id,
      apbl_crtd,
      apbl_las_act,
      apbl_las_act_actrtyp,
      apbl_obj_stt,
      apbl_vers,
      apbl_vsbt,
      apbl_dltddt,
      apbl_las_act_by,
      apbl_id,
      valid_from,
      valid_to,
      apbl_audid,
      apbl_prev_audid,
      apbl_next_audid,
      transaction_id,
      apbl_umevent,
	  MSRV_LEVEL_OF_SERV,
	  MSRV_EXP_REQUESTOR,
	  MSRV_PROCESS_AS,
	  MSRV_HEALTH_PLAN_RCVD,
	  MSRV_DEPT_RCVD,
	  DSCE_ACTUAL_ADMIT,
	  DSCE_ACTUAL_DISCHARGE,
	  DSCE_DISPOSITION,
	  MSRV_SRVC_LMAN_TERMS,
    denial_service_category,
    denial_service_reason,
    action_type,
      APBL_DENIED_QTY,
	  APBL_DENIED_DATE_FROM,
	  APBL_DENIED_DATE_TO,
	  APBL_DENIED_UNITS,
	  CLINICALDATAENTRY_ID
    ) values (
      :new.apbl_origcrtr,
      :new.apbl_origcrtrlogdin,
      :new.apbl_las_act_by_logdin,
      :new.apbl_univid,
      :new.apbl_rqtddt_from,
      :new.apbl_rqtddt_to,
      :new.apbl_rqtdqnty,
      :new.apbl_aprddt_from,
      :new.apbl_aprddt_to,
      :new.apbl_aprdqnty,
      :
new.apbl_actldt_from,
      :new.apbl_actldt_to,
      :new.apbl_actlqnty,
      :new.apbl_authid,
      :new.apbl_seq,
      :new.apbl_cmmt,
      :new.apbl_dtmn,
      :new.apbl_is_err,
      :new.apbl_err_txt,
      :new.msrv_fees_vrfd,
      :new.msrv_cntrct_id,
      :new.msrv_last_fill_date,
      :new.msrv_date_written,
      :new.msrv_refills,
      :new.msrv_substitution,
      :new.umxt_wkfwistcid,
      :new.umxt_cnv_id,
      :new.umxt_ownrchndflag,
      :new.umxt_ownrchndcnt,
      :new.umxt_mnlydrmdat,
      :new.umxt_id,
      :new.msrv_cumeaprddt_from,
      :new.msrv_cumeaprdqnty,
      :new.msrv_cumeaprddt_to,
      :new.msrv_wkfwistcid,
      :new.msrv_cnv_id,
      :new.msrv_ownrchndflag,
      :new.msrv_ownrchndcnt,
      :new.msrv_mnlydrmdat,
      :new.msrv_id,
      :new.umxt_rfngwkfwtsk,
      :new.umxt_prvsrfngtsk,
      :new.umxt_prvsrfngtsk_prmn,
      :new.umxt_ownr,
      :new.umxt_prvsownr,
      :new.umxt_prvssndr,
      :new.umxt_prvsownrprmn,
      :new.umxt_tnfr,
      :new.umxt_prvstnfr,
      :new.umxt_mnlydrmdby,
      :new.msrv_rfngwkfwtsk,
      :new.msrv_prvsrfngtsk,
      :new.msrv_prvsrfngtsk_prmn,
      :new.msrv_ownr,
      :new.msrv_prvsownr,
      :new.msrv_prvssndr,
      :new.msrv_prvsownrprmn,
      :new.msrv_tnfr,
      :new.msrv_prvstnfr,
      :new.msrv_mnlydrmdby,
      :new.msrv_cstmflds,
      :new.msrv_mdclsrvctyp,
      :new.msrv_plceof_srvctyp,
      :new.msrv_bed_typ,
      :new.umxt_prntevnt,
      :new.apbl_denlresn,
      :new.umxt_dclyxtdd,
      :new.apbl_actlunts,
      :new.apbl_aprdunts,
      :new.apbl_rqtdunts,
      :new.umxt_xtdd,
      :new.msrv_srvcdgis,
      :new.msrv_las_extn,
      :new.msrv_pvdrastn,
      :new.msrv_snp,
      :new.apbl_dec_prty,
      :new.apbl_srv_cde_mod,
      :new.apbl_ref_cat,
      :new.apbl_ref_cat_mod,
      :new.apbl_det_rsn,
      :new.msrv_srvc_agrmnt,
      :new.msrv_pay_at_max,
      :new.msrv_cvr_thr_discharge,
      :new.msrv_in_network,
      :new.msrv_e
xtend_limit,
      :new.msrv_rmbrsmnt_mthd,
      :new.msrv_rmbrsmnt_amount,
      :new.msrv_flat_fee_type,
      :new.msrv_pct_billed,
      :new.classtype,
      :new.apbl_c4c_id,
      :new.apbl_crtd,
      :new.apbl_las_act,
      :new.apbl_las_act_actrtyp,
      :new.apbl_obj_stt,
      :new.apbl_vers,
      :new.apbl_vsbt,
      :new.apbl_dltddt,
      :new.apbl_las_act_by,
      :new.apbl_id,
      :new.apbl_las_act_tim,
      null,
      u_apbl.nextval,
      null,
      null,
      dbms_transaction.local_transaction_id,
      :new.apbl_umevent,
      :new.MSRV_LEVEL_OF_SERV,
      :new.MSRV_EXP_REQUESTOR,
      :new.MSRV_PROCESS_AS,
      :new.MSRV_HEALTH_PLAN_RCVD,
      :new.MSRV_DEPT_RCVD,
      :new.DSCE_ACTUAL_ADMIT,
      :new.DSCE_ACTUAL_DISCHARGE,
      :new.DSCE_DISPOSITION,
      :new.MSRV_SRVC_LMAN_TERMS,
      :new.denial_service_category,
      :new.denial_service_reason,
      :new.action_type,
	  :new.APBL_DENIED_QTY,
	  :new.APBL_DENIED_DATE_FROM,
	  :new.APBL_DENIED_DATE_TO,
	  :new.APBL_DENIED_UNITS,
	  :new.CLINICALDATAENTRY_ID
    );
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
9
</td>
<td>
THH_C4C
</td>
<td>
TRG_APBL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APBL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_apbl_auditupdate before update on t_apbl

  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    -- last audit id of record
    last_audid number;

  begin
    begin
      select
        apbl_audid
      into
        last_audid
      from
        a_apbl
      where
        apbl_id = :old.apbl_id
        and
        apbl_next_audid is null
        and
        rownum &lt; 2 for update;
    exception
      when no_data_found then
        last_audid := null;
    end;

    -- last action time has not changed, no new transaction
    if :old.apbl_las_act_tim = :new.apbl_las_act_tim then
      update
        a_apbl
      set
        apbl_origcrtr          = :new.apbl_origcrtr,
        apbl_origcrtrlogdin    = :new.apbl_origcrtrlogdin,
        apbl_las_act_by_logdin = :new.apbl_las_act_by_logdin,
        apbl_univid            = :new.apbl_univid,
        apbl_rqtddt_from       = :new.apbl_rqtddt_from,
        apbl_rqtddt_to         = :new.apbl_rqtddt_to,
        apbl_rqtdqnty          = :new.apbl_rqtdqnty,
        apbl_aprddt_from       = :new.apbl_aprddt_from,
        apbl_aprddt_to         = :new.apbl_aprddt_to,
        apbl_aprdqnty          = :new.apbl_aprdqnty,
        apbl_actldt_from       = :new.apbl_actldt_from,
        apbl_actldt_to         = :new.apbl_actldt_to,
        apbl_actlqnty          = :new.apbl_actlqnty,
        apbl_authid            = :new.apbl_authid,
        apbl_seq               = :new.apbl_seq,
        apbl_cmmt              = :new.apbl_cmmt,
        apbl_dtmn              = :new.apbl_dtmn,
        apbl_is_err            = :new.apbl_is_err,
        apbl_err_txt           = :new.apbl_err_txt,
        msrv_fees_vrfd         = :new.msrv_fees_vrfd,
        msrv_cntrct_id         = :new.msrv_cntrct_id,
        msrv_last_fill_date    = :new.msrv_last_fill_date,
        msrv_date_written      = :new.msrv_date_written,
        msrv_refills           = :new.msrv_refills,
        msrv_substitution      = :new.msrv_substitution,
        umxt_wkfwistcid        = :new.umxt_wkfwistcid,
        umxt_cnv_id            = :new.umxt_cnv_id,
        um
xt_ownrchndflag      = :new.umxt_ownrchndflag,
        umxt_ownrchndcnt       = :new.umxt_ownrchndcnt,
        umxt_mnlydrmdat        = :new.umxt_mnlydrmdat,
        umxt_id                = :new.umxt_id,
        msrv_cumeaprddt_from   = :new.msrv_cumeaprddt_from,
        msrv_cumeaprdqnty      = :new.msrv_cumeaprdqnty,
        msrv_cumeaprddt_to     = :new.msrv_cumeaprddt_to,
        msrv_wkfwistcid        = :new.msrv_wkfwistcid,
        msrv_cnv_id            = :new.msrv_cnv_id,
        msrv_ownrchndflag      = :new.msrv_ownrchndflag,
        msrv_ownrchndcnt       = :new.msrv_ownrchndcnt,
        msrv_mnlydrmdat        = :new.msrv_mnlydrmdat,
        msrv_id                = :new.msrv_id,
        umxt_rfngwkfwtsk       = :new.umxt_rfngwkfwtsk,
        umxt_prvsrfngtsk       = :new.umxt_prvsrfngtsk,
        umxt_prvsrfngtsk_prmn  = :new.umxt_prvsrfngtsk_prmn,
        umxt_ownr              = :new.umxt_ownr,
        umxt_prvsownr          = :new.umxt_prvsownr,
        umxt_prvssndr          = :new.umxt_prvssndr,
        umxt_prvsownrprmn      = :new.umxt_prvsownrprmn,
        umxt_tnfr              = :new.umxt_tnfr,
        umxt_prvstnfr          = :new.umxt_prvstnfr,
        umxt_mnlydrmdby        = :new.umxt_mnlydrmdby,
        msrv_rfngwkfwtsk       = :new.msrv_rfngwkfwtsk,
        msrv_prvsrfngtsk       = :new.msrv_prvsrfngtsk,
        msrv_prvsrfngtsk_prmn  = :new.msrv_prvsrfngtsk_prmn,
        msrv_ownr              = :new.msrv_ownr,
        msrv_prvsownr          = :new.msrv_prvsownr,
        msrv_prvssndr          = :new.msrv_prvssndr,
        msrv_prvsownrprmn      = :new.msrv_prvsownrprmn,
        msrv_tnfr              = :new.msrv_tnfr,
        msrv_prvstnfr          = :new.msrv_prvstnfr,
        msrv_mnlydrmdby        = :new.msrv_mnlydrmdby,
        msrv_cstmflds          = :new.msrv_cstmflds,
        msrv_mdclsrvctyp       = :new.msrv_mdclsrvctyp,
        msrv_plceof_srvctyp    = :new.msrv_plceof_srvctyp,
        msrv_bed_typ           = :new.msrv_bed_
typ,
        umxt_prntevnt          = :new.umxt_prntevnt,
        apbl_denlresn          = :new.apbl_denlresn,
        umxt_dclyxtdd          = :new.umxt_dclyxtdd,
        apbl_actlunts          = :new.apbl_actlunts,
        apbl_aprdunts          = :new.apbl_aprdunts,
        apbl_rqtdunts          = :new.apbl_rqtdunts,
        umxt_xtdd              = :new.umxt_xtdd,
        msrv_srvcdgis          = :new.msrv_srvcdgis,
        msrv_las_extn          = :new.msrv_las_extn,
        msrv_pvdrastn          = :new.msrv_pvdrastn,
        msrv_snp               = :new.msrv_snp,
        apbl_dec_prty          = :new.apbl_dec_prty,
        apbl_srv_cde_mod       = :new.apbl_srv_cde_mod,
        apbl_ref_cat           = :new.apbl_ref_cat,
        apbl_ref_cat_mod       = :new.apbl_ref_cat_mod,
        apbl_det_rsn           = :new.apbl_det_rsn,
        msrv_srvc_agrmnt       = :new.msrv_srvc_agrmnt,
        msrv_pay_at_max        = :new.msrv_pay_at_max,
        msrv_cvr_thr_discharge = :new.msrv_cvr_thr_discharge,
        msrv_in_network        = :new.msrv_in_network,
        msrv_extend_limit      = :new.msrv_extend_limit,
        msrv_rmbrsmnt_mthd     = :new.msrv_rmbrsmnt_mthd,
        msrv_rmbrsmnt_amount   = :new.msrv_rmbrsmnt_amount,
        msrv_flat_fee_type     = :new.msrv_flat_fee_type,
        msrv_pct_billed        = :new.msrv_pct_billed,
        classtype              = :new.classtype,
        apbl_c4c_id            = :new.apbl_c4c_id,
        apbl_crtd              = :new.apbl_crtd,
        apbl_las_act           = :new.apbl_las_act,
        apbl_las_act_actrtyp   = :new.apbl_las_act_actrtyp,
        apbl_obj_stt           = :new.apbl_obj_stt,
        apbl_vers              = :new.apbl_vers,
        apbl_vsbt              = :new.apbl_vsbt,
        apbl_dltddt            = :new.apbl_dltddt,
        apbl_las_act_by        = :new.apbl_las_act_by,
        umxt_rsn               = :new.umxt_rsn,
        apbl_dtmn_due          = :new.apbl_dtmn_due,
        apbl_umeve
nt           = :new.apbl_umevent,
		MSRV_LEVEL_OF_SERV     = :new.MSRV_LEVEL_OF_SERV,
		MSRV_EXP_REQUESTOR     = :new.MSRV_EXP_REQUESTOR,
		MSRV_PROCESS_AS        = :new.MSRV_PROCESS_AS,
		MSRV_HEALTH_PLAN_RCVD  = :new.MSRV_HEALTH_PLAN_RCVD,
	    MSRV_DEPT_RCVD         = :new.MSRV_DEPT_RCVD,
		DSCE_ACTUAL_ADMIT      = :new.DSCE_ACTUAL_ADMIT,
		DSCE_ACTUAL_DISCHARGE  = :new.DSCE_ACTUAL_DISCHARGE,
		DSCE_DISPOSITION       = :new.DSCE_DISPOSITION,
		MSRV_SRVC_LMAN_TERMS   = :new.MSRV_SRVC_LMAN_TERMS,
        denial_service_category = :new.denial_service_category,
        denial_service_reason   = :new.denial_service_reason,
        action_type             =:new.action_type,
		APBL_DENIED_QTY        = :new.APBL_DENIED_QTY,
		APBL_DENIED_DATE_FROM  = :new.APBL_DENIED_DATE_FROM,
		APBL_DENIED_DATE_TO    = :new.APBL_DENIED_DATE_TO,
		APBL_DENIED_UNITS      = :new.APBL_DENIED_UNITS,
		CLINICALDATAENTRY_ID   = :new.CLINICALDATAENTRY_ID
      where
        apbl_audid = last_audid;
    -- last action time has changed, new transaction
    else
      -- insert new values introduced by new transaction
      insert into a_apbl (
        apbl_origcrtr,
        apbl_origcrtrlogdin,
        apbl_las_act_by_logdin,
        apbl_univid,
        apbl_rqtddt_from,
        apbl_rqtddt_to,
        apbl_rqtdqnty,
        apbl_aprddt_from,
        apbl_aprddt_to,
        apbl_aprdqnty,
        apbl_actldt_from,
        apbl_actldt_to,
        apbl_actlqnty,
        apbl_authid,
        apbl_seq,
        apbl_cmmt,
        apbl_dtmn,
        apbl_is_err,
        apbl_err_txt,
        msrv_fees_vrfd,
        msrv_cntrct_id,
        msrv_last_fill_date,
        msrv_date_written,
        msrv_refills,
        msrv_substitution,
        umxt_wkfwistcid,
        umxt_cnv_id,
        umxt_ownrchndflag,
        umxt_ownrchndcnt,
        umxt_mnlydrmdat,
        umxt_id,
        msrv_cumeaprddt_from,
        msrv_cumeaprdqnty,
        msrv_cumeaprddt_to,
        msrv_wkfwistcid,
        msrv_cnv_id,

        msrv_ownrchndflag,
        msrv_ownrchndcnt,
        msrv_mnlydrmdat,
        msrv_id,
        umxt_rfngwkfwtsk,
        umxt_prvsrfngtsk,
        umxt_prvsrfngtsk_prmn,
        umxt_ownr,
        umxt_prvsownr,
        umxt_prvssndr,
        umxt_prvsownrprmn,
        umxt_tnfr,
        umxt_prvstnfr,
        umxt_mnlydrmdby,
        msrv_rfngwkfwtsk,
        msrv_prvsrfngtsk,
        msrv_prvsrfngtsk_prmn,
        msrv_ownr,
        msrv_prvsownr,
        msrv_prvssndr,
        msrv_prvsownrprmn,
        msrv_tnfr,
        msrv_prvstnfr,
        msrv_mnlydrmdby,
        msrv_cstmflds,
        msrv_mdclsrvctyp,
        msrv_plceof_srvctyp,
        msrv_bed_typ,
        umxt_prntevnt,
        apbl_denlresn,
        umxt_dclyxtdd,
        apbl_actlunts,
        apbl_aprdunts,
        apbl_rqtdunts,
        umxt_xtdd,
        msrv_srvcdgis,
        msrv_las_extn,
        msrv_pvdrastn,
        msrv_snp,
        apbl_dec_prty,
        apbl_srv_cde_mod,
        apbl_ref_cat,
        apbl_ref_cat_mod,
        apbl_det_rsn,
        msrv_srvc_agrmnt,
        msrv_pay_at_max,
        msrv_cvr_thr_discharge,
        msrv_in_network,
        msrv_extend_limit,
        msrv_rmbrsmnt_mthd,
        msrv_rmbrsmnt_amount,
        msrv_flat_fee_type,
        msrv_pct_billed,
        classtype,
        apbl_c4c_id,
        apbl_crtd,
        apbl_las_act,
        apbl_las_act_actrtyp,
        apbl_obj_stt,
        apbl_vers,
        apbl_vsbt,
        apbl_dltddt,
        apbl_las_act_by,
        apbl_id,
        valid_from,
        valid_to,
        apbl_audid,
        apbl_prev_audid,
        apbl_next_audid,
        transaction_id,
        umxt_rsn,
        apbl_dtmn_due,
        apbl_umevent,
		MSRV_LEVEL_OF_SERV,
		MSRV_EXP_REQUESTOR,
		MSRV_PROCESS_AS,
		MSRV_HEALTH_PLAN_RCVD,
	    MSRV_DEPT_RCVD,
		DSCE_ACTUAL_ADMIT,
		DSCE_ACTUAL_DISCHARGE,
		DSCE_DISPOSITION,
		MSRV_SRVC_LMAN_TERMS,
        denial_service_category,
        denial_service_reason,
        action_type
,
		APBL_DENIED_QTY,
		APBL_DENIED_DATE_FROM,
		APBL_DENIED_DATE_TO,
		APBL_DENIED_UNITS,
		CLINICALDATAENTRY_ID
      ) values (
        :new.apbl_origcrtr,
        :new.apbl_origcrtrlogdin,
        :new.apbl_las_act_by_logdin,
        :new.apbl_univid,
        :new.apbl_rqtddt_from,
        :new.apbl_rqtddt_to,
        :new.apbl_rqtdqnty,
        :new.apbl_aprddt_from,
        :new.apbl_aprddt_to,
        :new.apbl_aprdqnty,
        :new.apbl_actldt_from,
        :new.apbl_actldt_to,
        :new.apbl_actlqnty,
        :new.apbl_authid,
        :new.apbl_seq,
        :new.apbl_cmmt,
        :new.apbl_dtmn,
        :new.apbl_is_err,
        :new.apbl_err_txt,
        :new.msrv_fees_vrfd,
        :new.msrv_cntrct_id,
        :new.msrv_last_fill_date,
        :new.msrv_date_written,
        :new.msrv_refills,
        :new.msrv_substitution,
        :new.umxt_wkfwistcid,
        :new.umxt_cnv_id,
        :new.umxt_ownrchndflag,
        :new.umxt_ownrchndcnt,
        :new.umxt_mnlydrmdat,
        :new.umxt_id,
        :new.msrv_cumeaprddt_from,
        :new.msrv_cumeaprdqnty,
        :new.msrv_cumeaprddt_to,
        :new.msrv_wkfwistcid,
        :new.msrv_cnv_id,
        :new.msrv_ownrchndflag,
        :new.msrv_ownrchndcnt,
        :new.msrv_mnlydrmdat,
        :new.msrv_id,
        :new.umxt_rfngwkfwtsk,
        :new.umxt_prvsrfngtsk,
        :new.umxt_prvsrfngtsk_prmn,
        :new.umxt_ownr,
        :new.umxt_prvsownr,
        :new.umxt_prvssndr,
        :new.umxt_prvsownrprmn,
        :new.umxt_tnfr,
        :new.umxt_prvstnfr,
        :new.umxt_mnlydrmdby,
        :new.msrv_rfngwkfwtsk,
        :new.msrv_prvsrfngtsk,
        :new.msrv_prvsrfngtsk_prmn,
        :new.msrv_ownr,
        :new.msrv_prvsownr,
        :new.msrv_prvssndr,
        :new.msrv_prvsownrprmn,
        :new.msrv_tnfr,
        :new.msrv_prvstnfr,
        :new.msrv_mnlydrmdby,
        :new.msrv_cstmflds,
        :new.msrv_mdclsrvctyp,
        :new.msrv_plceof_srvctyp,
        :new.msrv_bed_typ,

      :new.umxt_prntevnt,
        :new.apbl_denlresn,
        :new.umxt_dclyxtdd,
        :new.apbl_actlunts,
        :new.apbl_aprdunts,
        :new.apbl_rqtdunts,
        :new.umxt_xtdd,
        :new.msrv_srvcdgis,
        :new.msrv_las_extn,
        :new.msrv_pvdrastn,
        :new.msrv_snp,
        :new.apbl_dec_prty,
        :new.apbl_srv_cde_mod,
        :new.apbl_ref_cat,
        :new.apbl_ref_cat_mod,
        :new.apbl_det_rsn,
        :new.msrv_srvc_agrmnt,
        :new.msrv_pay_at_max,
        :new.msrv_cvr_thr_discharge,
        :new.msrv_in_network,
        :new.msrv_extend_limit,
        :new.msrv_rmbrsmnt_mthd,
        :new.msrv_rmbrsmnt_amount,
        :new.msrv_flat_fee_type,
        :new.msrv_pct_billed,
        :new.classtype,
        :new.apbl_c4c_id,
        :new.apbl_crtd,
        :new.apbl_las_act,
        :new.apbl_las_act_actrtyp,
        :new.apbl_obj_stt,
        :new.apbl_vers,
        :new.apbl_vsbt,
        :new.apbl_dltddt,
        :new.apbl_las_act_by,
        :new.apbl_id,
        :new.apbl_las_act_tim,
        null,
        u_apbl.nextval,
        last_audid,
        null,
        dbms_transaction.local_transaction_id,
        :new.umxt_rsn,
        :new.apbl_dtmn_due,
        :new.apbl_umevent,
		:new.MSRV_LEVEL_OF_SERV,
		:new.MSRV_EXP_REQUESTOR,
		:new.MSRV_PROCESS_AS,
		:new.MSRV_HEALTH_PLAN_RCVD,
	    :new.MSRV_DEPT_RCVD,
		:new.DSCE_ACTUAL_ADMIT,
	    :new.DSCE_ACTUAL_DISCHARGE,
	    :new.DSCE_DISPOSITION,
		:new.MSRV_SRVC_LMAN_TERMS,
        :new.denial_service_category,
        :new.denial_service_reason,
        :new.action_type,
		:new.APBL_DENIED_QTY,
		:new.APBL_DENIED_DATE_FROM,
		:new.APBL_DENIED_DATE_TO,
		:new.APBL_DENIED_UNITS,
		:new.CLINICALDATAENTRY_ID
      );
      /* update last audit records valid_to to new LastActionTime
      and next audit ID to newly inserted records sequence number
      */
      update
        a_apbl
      set
        valid_to = :new.apbl_las_act_tim,
        apbl_next_audid = u_apbl.cu
rrval
      where
        apbl_audid = last_audid;
    end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
10
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_APBL
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APBL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_APBL
AFTER INSERT OR UPDATE ON T_APBL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
 VAR1 VARCHAR2(4000);
 BEGIN
   -- event (service-diagnosis-event)
    var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
               '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
               '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE UMDS_ID = :2))';
    EXECUTE IMMEDIATE var1 USING 'P',:new.msrv_srvcdgis;
 END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
11
</td>
<td>
THH_C4C
</td>
<td>
TRG_APPL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_APPL_AUDITINSERT
  BEFORE INSERT ON T_APL
	FOR EACH ROW
	
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
		  curr_date DATE; /* save current date */
	  BEGIN
		curr_date := current_date;

		  IF :new.appl_crtd IS NULL THEN
		    :new.appl_crtd := curr_date;
		  END IF;

		  IF :new.appl_las_act_tim IS NULL THEN
		    :new.appl_las_act_tim := curr_date;
		  END IF;

		  IF :new.appl_las_act IS NULL THEN
		    :new.appl_las_act := 1;
		  END IF;

		  IF :new.appl_obj_stt IS NULL THEN
		    :new.appl_obj_stt := 1;
		  END IF;

		  IF :new.appl_vers IS NULL THEN
		    :new.appl_vers := 0;
		  END IF;

		  IF :new.appl_vsbt IS NULL THEN
		    :new.appl_vsbt := 1001;
		  END IF;

		  IF :new.appl_las_act_by IS NULL THEN
		    :new.appl_las_act_by := 1;
		  END IF;

		  IF :new.appl_origcrtr IS NULL THEN
		    :new.appl_origcrtr := 1;
		  END IF;

		  IF :new.appl_origcrtrlogdin IS NULL THEN
		    :new.appl_origcrtrlogdin := 1;
		  END IF;

		  IF :new.appl_las_act_by_logdin IS NULL THEN
		    :new.appl_las_act_by_logdin := 1;
		  END IF;

		  INSERT INTO a_apl
		  (
		   appl_tnfr,
		   appl_prvstnfr,
		   appl_las_rtedto,
		   appl_apld,
		   appl_rtngrcpt,
		   appl_apl_typ,
		   appl_apl_resn,
		   classtype,
		   appl_c4c_id,
		   appl_crtd,
		   appl_las_act,
		   appl_las_act_actrtyp,
		   appl_obj_stt,
		   appl_vers,
		   appl_vsbt,
		   appl_dltddt,
		   appl_las_act_by,
		   appl_origcrtr,
		   appl_origcrtrlogdin,
		   appl_las_act_by_logdin,
		   appl_univid,
		   appl_aprddt_fromaft_apl,
		   appl_aprddt_to_aft_apl,
		   appl_aprdqntyaft_apl,
		   appl_aprddt_frombfr_apl,
		   appl_aprddt_to_bfr_apl,
		   appl_aprdqntybfr_apl,
		   appl_cmmt,
		   appl_dtmn,
		   appl_wkfwistcid,
		   appl_cnv_id,
		   appl_ownrchndflag,
		   appl_ownrchndcnt,
		   appl_las_rted,
		   appl_rfngwkfwtsk,
		   appl_prvsrfngtsk,
		   appl_prvsrfngtsk_prmn,
		   appl_ownr,
		   appl_prvsownr,
		   appl_prvssndr,
		   appl_prvsownrprmn,
		   appl_id,
		   valid_from,
		   valid_to ,
		   appl_audid,
		   appl_prev_audid,
		   appl_next_audid,
		   appl_dtrm_ownr,
		   appl_dtr
m_resn,
		   appl_dtrm_cmmt,
		   appl_rcpt_ddt,
		   appl_dsn_ddt,
		   appl_prty,
		   appl_rqt_by,
           -- prh 12 NOV 2015 - CAREMGR-13883 Add new fields for Appeals
           appl_rqstr,
		   appl_rqstr_tbl,
	 	   appl_cat,
		   appl_rec_ag,
		   appl_rec_rte,
		   appl_ack,
		   appl_clm_nbr,
		   appl_bpkg,
		   appl_level_of_serv,
		   appl_exp_requester,
		   appl_process_as,
		   appl_next_review_date,
		   appl_classtype,
		   appl_review_type,
		   appl_entity_name,
		   appl_sent_via,
		   appl_tracking_num,
		   appl_tracking_link,
		   appl_sent_to_entity,
		   appl_entity_recvd,
		   appl_recvd_from_entity,
		   appl_entity_outcome,
		   appl_rtng
		  )
		  VALUES
		  (
		   :new.appl_tnfr,
		   :new.appl_prvstnfr,
		   :new.appl_las_rtedto,
		   :new.appl_apld,
		   :new.appl_rtngrcpt,
		   :new.appl_apl_typ,
		   :new.appl_apl_resn,
		   :new.classtype,
		   :new.appl_c4c_id,
		   :new.appl_crtd,
		   :new.appl_las_act,
		   :new.appl_las_act_actrtyp,
		   :new.appl_obj_stt,
		   :new.appl_vers,
		   :new.appl_vsbt,
		   :new.appl_dltddt,
		   :new.appl_las_act_by,
		   :new.appl_origcrtr,
		   :new.appl_origcrtrlogdin,
		   :new.appl_las_act_by_logdin,
		   :new.appl_univid,
		   :new.appl_aprddt_fromaft_apl,
		   :new.appl_aprddt_to_aft_apl,
		   :new.appl_aprdqntyaft_apl,
		   :new.appl_aprddt_frombfr_apl,
		   :new.appl_aprddt_to_bfr_apl,
		   :new.appl_aprdqntybfr_apl,
		   :new.appl_cmmt,
		   :new.appl_dtmn,
		   :new.appl_wkfwistcid,
		   :new.appl_cnv_id,
		   :new.appl_ownrchndflag,
		   :new.appl_ownrchndcnt,
		   :new.appl_las_rted,
		   :new.appl_rfngwkfwtsk,
		   :new.appl_prvsrfngtsk,
		   :new.appl_prvsrfngtsk_prmn,
		   :new.appl_ownr,
		   :new.appl_prvsownr,
		   :new.appl_prvssndr,
		   :new.appl_prvsownrprmn,
		   :new.appl_id,
		   :new.appl_las_act_tim,
		   NULL,
		   u_apl.NEXTVAL,
		   NULL,
		   NULL,
		   :new.appl_dtrm_ownr,
		   :new.appl_dtrm_resn,
		   :new.appl_dtrm_cmmt,
		   :new.appl_rcpt_ddt,
		   :new.app
l_dsn_ddt,
		   :new.appl_prty,
		   :new.appl_rqt_by,
           -- prh 12 NOV 2015 - CAREMGR-13883 Add new fields for Appeals
		   :new.appl_rqstr,
		   :new.appl_rqstr_tbl,
	  	   :new.appl_cat,
		   :new.appl_rec_ag,
		   :new.appl_rec_rte,
		   :new.appl_ack,
		   :new.appl_clm_nbr,
		   :new.appl_bpkg,
		   :new.appl_level_of_serv,
		   :new.appl_exp_requester,
		   :new.appl_process_as,
		   :new.appl_next_review_date,
		   :new.appl_classtype,
		   :new.appl_review_type,
		   :new.appl_entity_name,
		   :new.appl_sent_via,
		   :new.appl_tracking_num,
		   :new.appl_tracking_link,
		   :new.appl_sent_to_entity,
		   :new.appl_entity_recvd,
		   :new.appl_recvd_from_entity,
		   :new.appl_entity_outcome,
		   :new.appl_rtng
		  );
	  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
12
</td>
<td>
THH_C4C
</td>
<td>
TRG_APPL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_appl_auditupdate BEFORE
  UPDATE
    ON T_APL FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        appl_audid
      INTO
        last_audid
      FROM
        a_apl
      WHERE
        appl_id            = :old.appl_id
      AND appl_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.appl_las_act_tim = :new.appl_las_act_tim THEN
      UPDATE
        a_apl
      SET
        classtype               = :new.classtype,
        appl_c4c_id             = :new.appl_c4c_id,
        appl_crtd               = :new.appl_crtd,
        appl_las_act            = :new.appl_las_act,
        appl_las_act_actrtyp    = :new.appl_las_act_actrtyp,
        appl_obj_stt            = :new.appl_obj_stt,
        appl_vers               = :new.appl_vers,
        appl_vsbt               = :new.appl_vsbt,
        appl_dltddt             = :new.appl_dltddt,
        appl_las_act_by         = :new.appl_las_act_by,
        appl_origcrtr           = :new.appl_origcrtr,
        appl_origcrtrlogdin     = :new.appl_origcrtrlogdin,
        appl_las_act_by_logdin  = :new.appl_las_act_by_logdin,
        appl_univid             = :new.appl_univid,
        appl_aprddt_fromaft_apl = :new.appl_aprddt_fromaft_apl,
        appl_aprddt_to_aft_apl  = :new.appl_aprddt_to_aft_apl,
        appl_aprdqntyaft_apl    = :new.appl_aprdqntyaft_apl,
        appl_aprddt_frombfr_apl = :new.appl_aprddt_frombfr_apl,
        appl_aprddt_to_bfr_apl  = :new.appl_aprddt_to_bfr_apl,
        appl_aprdqntybfr_apl    = :new.appl_aprdqntybfr_apl,
        appl_cmmt               = :new.appl_cmmt,
        appl_dtmn               = :new.appl_dtmn,
        appl_dtmn_due           = :new.appl_dtmn_due,
        appl_wkfwistcid         = :new.appl_wkfwistcid,
        appl_cnv_id             = :new.appl_cnv_id,
        appl_ownrchndflag
    = :new.appl_ownrchndflag,
        appl_ownrchndcnt        = :new.appl_ownrchndcnt,
        appl_las_rted           = :new.appl_las_rted,
        appl_rfngwkfwtsk        = :new.appl_rfngwkfwtsk,
        appl_prvsrfngtsk        = :new.appl_prvsrfngtsk,
        appl_prvsrfngtsk_prmn   = :new.appl_prvsrfngtsk_prmn,
        appl_ownr               = :new.appl_ownr,
        appl_prvsownr           = :new.appl_prvsownr,
        appl_prvssndr           = :new.appl_prvssndr,
        appl_prvsownrprmn       = :new.appl_prvsownrprmn,
        appl_tnfr               = :new.appl_tnfr,
        appl_prvstnfr           = :new.appl_prvstnfr,
        appl_las_rtedto         = :new.appl_las_rtedto,
        appl_apld               = :new.appl_apld,
        appl_rtngrcpt           = :new.appl_rtngrcpt,
        appl_apl_typ            = :new.appl_apl_typ,
        appl_apl_resn           = :new.appl_apl_resn,
        appl_dtrm_ownr          = :new.appl_dtrm_ownr,
        appl_dtrm_resn          = :new.appl_dtrm_resn,
        appl_dtrm_cmmt          = :new.appl_dtrm_cmmt,
        appl_rcpt_ddt           = :new.appl_rcpt_ddt,
        appl_dsn_ddt            = :new.appl_dsn_ddt,
        appl_prty               = :new.appl_prty,
        appl_rqt_by             = :new.appl_rqt_by,
        -- prh 03 DEC 2015 - CAREMGR-13883 Add new fields for Appeals
        appl_rqstr              = :new.appl_rqstr,
        appl_rqstr_tbl          = :new.appl_rqstr_tbl,
        appl_cat                = :new.appl_cat,
        appl_rec_ag             = :new.appl_rec_ag,
        appl_rec_rte            = :new.appl_rec_rte,
        appl_ack                = :new.appl_ack,
        appl_clm_nbr            = :new.appl_clm_nbr,
        appl_bpkg               = :new.appl_bpkg,
		appl_level_of_serv		= :new.appl_level_of_serv,
		appl_exp_requester		= :new.appl_exp_requester,
		appl_process_as			= :new.appl_process_as,
		appl_next_review_date	= :new.appl_next_review_date,
		appl_classtype			= :new.appl_classtype,
		
appl_review_type		= :new.appl_review_type,
		appl_entity_name		= :new.appl_entity_name,
		appl_sent_via			= :new.appl_sent_via,
		appl_tracking_num		= :new.appl_tracking_num,
		appl_tracking_link		= :new.appl_tracking_link,
		appl_sent_to_entity		= :new.appl_sent_to_entity,
		appl_entity_recvd		= :new.appl_entity_recvd,
		appl_recvd_from_entity	= :new.appl_recvd_from_entity,
		appl_entity_outcome		= :new.appl_entity_outcome,
		appl_rtng               = :new.appl_rtng
      WHERE
        appl_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_apl
        (
          classtype,
          appl_c4c_id,
          appl_crtd,
          appl_las_act,
          appl_las_act_actrtyp,
          appl_obj_stt,
          appl_vers,
          appl_vsbt,
          appl_dltddt,
          appl_las_act_by,
          appl_origcrtr,
          appl_origcrtrlogdin,
          appl_las_act_by_logdin,
          appl_univid,
          appl_aprddt_fromaft_apl,
          appl_aprddt_to_aft_apl,
          appl_aprdqntyaft_apl,
          appl_aprddt_frombfr_apl,
          appl_aprddt_to_bfr_apl,
          appl_aprdqntybfr_apl,
          appl_cmmt,
          appl_dtmn,
          appl_dtmn_due,
          appl_wkfwistcid,
          appl_cnv_id,
          appl_ownrchndflag,
          appl_ownrchndcnt,
          appl_las_rted,
          appl_rfngwkfwtsk,
          appl_prvsrfngtsk,
          appl_prvsrfngtsk_prmn,
          appl_ownr,
          appl_prvsownr,
          appl_prvssndr,
          appl_prvsownrprmn,
          appl_tnfr,
          appl_prvstnfr,
          appl_las_rtedto,
          appl_apld,
          appl_rtngrcpt,
          appl_apl_typ,
          appl_apl_resn,
          appl_id,
          valid_from,
          valid_to,
          appl_audid,
          appl_prev_audid,
          appl_next_audid,
          appl_dtrm_ownr,
          appl_dtrm_resn,

       appl_dtrm_cmmt,
          appl_rcpt_ddt,
          appl_dsn_ddt,
          appl_prty,
          appl_rqt_by,
          -- prh 03 DEC 2015 - CAREMGR-13883 Add new fields for Appeals
          appl_rqstr,
          appl_rqstr_tbl,
          appl_cat,
          appl_rec_ag,
          appl_rec_rte,
          appl_ack,
          appl_clm_nbr,
          appl_bpkg,
		  appl_level_of_serv,
		  appl_exp_requester,
		  appl_process_as,
		  appl_next_review_date,
		  appl_classtype,
		  appl_review_type,
		  appl_entity_name,
		  appl_sent_via,
		  appl_tracking_num,
		  appl_tracking_link,
		  appl_sent_to_entity,
		  appl_entity_recvd,
		  appl_recvd_from_entity,
		  appl_entity_outcome,
		  appl_rtng
        )
        VALUES
        (
          :new.classtype,
          :new.appl_c4c_id,
          :new.appl_crtd,
          :new.appl_las_act,
          :new.appl_las_act_actrtyp,
          :new.appl_obj_stt,
          :new.appl_vers,
          :new.appl_vsbt,
          :new.appl_dltddt,
          :new.appl_las_act_by,
          :new.appl_origcrtr,
          :new.appl_origcrtrlogdin,
          :new.appl_las_act_by_logdin,
          :new.appl_univid,
          :new.appl_aprddt_fromaft_apl,
          :new.appl_aprddt_to_aft_apl,
          :new.appl_aprdqntyaft_apl,
          :new.appl_aprddt_frombfr_apl,
          :new.appl_aprddt_to_bfr_apl,
          :new.appl_aprdqntybfr_apl,
          :new.appl_cmmt,
          :new.appl_dtmn,
          :new.appl_dtmn_due,
          :new.appl_wkfwistcid,
          :new.appl_cnv_id,
          :new.appl_ownrchndflag,
          :new.appl_ownrchndcnt,
          :new.appl_las_rted,
          :new.appl_rfngwkfwtsk,
          :new.appl_prvsrfngtsk,
          :new.appl_prvsrfngtsk_prmn,
          :new.appl_ownr,
          :new.appl_prvsownr,
          :new.appl_prvssndr,
          :new.appl_prvsownrprmn,
          :new.appl_tnfr,
          :new.appl_prvstnfr,
          :new.appl_las_rtedto,
          :new.appl_apld,
          :new.appl_rtngrcp
t,
          :new.appl_apl_typ,
          :new.appl_apl_resn,
          :new.appl_id,
          :new.appl_las_act_tim,
          NULL,
          u_apl.NEXTVAL,
          last_audid,
          NULL,
          :new.appl_dtrm_ownr,
          :new.appl_dtrm_resn,
          :new.appl_dtrm_cmmt,
          :new.appl_rcpt_ddt,
          :new.appl_dsn_ddt,
          :new.appl_prty,
          :new.appl_rqt_by,
          -- prh 03 DEC 2015 - CAREMGR-13883 Add new fields for Appeals
          :new.appl_rqstr,
          :new.appl_rqstr_tbl,
          :new.appl_cat,
          :new.appl_rec_ag,
          :new.appl_rec_rte,
          :new.appl_ack,
          :new.appl_clm_nbr,
          :new.appl_bpkg,
		  :new.appl_level_of_serv,
		  :new.appl_exp_requester,
		  :new.appl_process_as,
		  :new.appl_next_review_date,
		  :new.appl_classtype,
		  :new.appl_review_type,
		  :new.appl_entity_name,
		  :new.appl_sent_via,
		  :new.appl_tracking_num,
		  :new.appl_tracking_link,
		  :new.appl_sent_to_entity,
		  :new.appl_entity_recvd,
		  :new.appl_recvd_from_entity,
		  :new.appl_entity_outcome,
		  :new.appl_rtng
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_apl
      SET
        valid_to        = :new.appl_las_act_tim,
        appl_next_audid = u_apl.CURRVAL
      WHERE
        appl_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
13
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_APL
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_APL
AFTER INSERT OR UPDATE ON T_APL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  VAR1 VARCHAR2(4000);
BEGIN
  -- event (service-diagnosis-event)
  var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
          '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
          '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE UMDS_ID ' ||
          'IN (select msrv_srvcdgis from t_apbl where apbl_id = :2)))';
  EXECUTE IMMEDIATE var1 USING 'P',:new.appl_apld;
END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
14
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_APL_C4C
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_APL_C4C
BEFORE INSERT OR UPDATE ON T_APL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
BEGIN
  IF :new.APPL_UNIVID is NULL
    THEN :new.APPL_UNIVID := nvl(:new.APPL_C4C_ID,:new.APPL_ID);
  END IF;
END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
15
</td>
<td>
THH_C4C
</td>
<td>
TRG_APHD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLHEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_APHD_AUDITINSERT&quot; BEFORE INSERT ON T_APVLHEAD FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.aphd_crtd IS NULL THEN 
    :new.aphd_crtd := curr_date; 
  END IF; 

  IF :new.aphd_las_act_tim IS NULL THEN 
    :new.aphd_las_act_tim := curr_date; 
  END IF; 

  IF :new.aphd_las_act IS NULL THEN 
    :new.aphd_las_act := 1; 
  END IF; 

  IF :new.aphd_obj_stt IS NULL THEN 
    :new.aphd_obj_stt := 1; 
  END IF; 

  IF :new.aphd_vers IS NULL THEN 
    :new.aphd_vers := 0; 
  END IF; 

  IF :new.aphd_vsbt IS NULL THEN 
    :new.aphd_vsbt := 1001; 
  END IF; 

  IF :new.aphd_las_act_by IS NULL THEN 
    :new.aphd_las_act_by := 1; 
  END IF; 

  IF :new.aphd_origcrtr IS NULL THEN 
    :new.aphd_origcrtr := 1; 
  END IF; 

  IF :new.aphd_origcrtrlogdin IS NULL THEN 
    :new.aphd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.aphd_las_act_by_logdin IS NULL THEN 
    :new.aphd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_apvlhead 
  ( 
   classtype, 
   aphd_c4c_id, 
   aphd_crtd, 
   aphd_las_act, 
   aphd_las_act_actrtyp, 
   aphd_obj_stt, 
   aphd_vers, 
   aphd_vsbt, 
   aphd_dltddt, 
   aphd_las_act_by, 
   aphd_origcrtr, 
   aphd_origcrtrlogdin, 
   aphd_las_act_by_logdin, 
   aphd_univid, 
   aphd_cmpd, 
   aphd_otcm, 
   aphd_ddln, 
   aphd_ddlnact, 
   aphd_ratnapvl, 
   aphd_rfrdobj_id, 
   aphd_rfrdobj_typ, 
   aphd_wkfwistcid, 
   aphd_cnv_id, 
   aphd_ogtr, 
   aphd_sndr, 
   aphd_ret_to, 
   aphd_frtropnnfor, 
   aphd_id, 
   valid_from, 
   valid_to , 
   aphd_audid, 
   aphd_prev_audid, 
   aphd_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.aphd_c4c_id,
   :new.aphd_crtd,
   :new.aphd_las_act,
   :new.aphd_las_act_actrtyp,
   :new.aphd_obj_stt,
   :new.aphd_vers,
   :new.aphd_vsbt,
   :new.aphd_dltddt,
   :new.aphd_las_act_by,
   :new.aphd_origcrtr,
   :new.aphd_origcrtrlogdin,
   :new.aphd_las_act_by_logdin,
   :new.aphd_univid,
   :new.aphd_cmpd,
   :new.aphd_otcm,
   :new.aphd_ddln,
   :new.aphd_ddlnact,
   :new.aphd_ratnapvl,
   :new
.aphd_rfrdobj_id,
   :new.aphd_rfrdobj_typ,
   :new.aphd_wkfwistcid,
   :new.aphd_cnv_id,
   :new.aphd_ogtr,
   :new.aphd_sndr,
   :new.aphd_ret_to,
   :new.aphd_frtropnnfor, 
   :new.aphd_id, 
   :new.aphd_las_act_tim, 
   NULL, 
   u_apvlhead.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
16
</td>
<td>
THH_C4C
</td>
<td>
TRG_APHD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLHEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_aphd_auditupdate BEFORE
  UPDATE
    ON T_APVLHEAD FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        aphd_audid
      INTO
        last_audid
      FROM
        a_apvlhead
      WHERE
        aphd_id            = :old.aphd_id
      AND aphd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.aphd_las_act_tim = :new.aphd_las_act_tim THEN
      UPDATE
        a_apvlhead
      SET
        classtype              = :new.classtype,
        aphd_c4c_id            = :new.aphd_c4c_id,
        aphd_crtd              = :new.aphd_crtd,
        aphd_las_act           = :new.aphd_las_act,
        aphd_las_act_actrtyp   = :new.aphd_las_act_actrtyp,
        aphd_obj_stt           = :new.aphd_obj_stt,
        aphd_vers              = :new.aphd_vers,
        aphd_vsbt              = :new.aphd_vsbt,
        aphd_dltddt            = :new.aphd_dltddt,
        aphd_las_act_by        = :new.aphd_las_act_by,
        aphd_origcrtr          = :new.aphd_origcrtr,
        aphd_origcrtrlogdin    = :new.aphd_origcrtrlogdin,
        aphd_las_act_by_logdin = :new.aphd_las_act_by_logdin,
        aphd_univid            = :new.aphd_univid,
        aphd_cmpd              = :new.aphd_cmpd,
        aphd_otcm              = :new.aphd_otcm,
        aphd_ddln              = :new.aphd_ddln,
        aphd_ddlnact           = :new.aphd_ddlnact,
        aphd_ratnapvl          = :new.aphd_ratnapvl,
        aphd_rfrdobj_id        = :new.aphd_rfrdobj_id,
        aphd_rfrdobj_typ       = :new.aphd_rfrdobj_typ,
        aphd_wkfwistcid        = :new.aphd_wkfwistcid,
        aphd_cnv_id            = :new.aphd_cnv_id,
        aphd_ogtr              = :new.aphd_ogtr,
        aphd_sndr              = :new.aphd_sndr,
        aphd_ret_to            = :new.aphd_ret_to,
        aphd_frtropnnfor       = :new.aphd_frtropnnf
or
      WHERE
        aphd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_apvlhead
        (
          classtype,
          aphd_c4c_id,
          aphd_crtd,
          aphd_las_act,
          aphd_las_act_actrtyp,
          aphd_obj_stt,
          aphd_vers,
          aphd_vsbt,
          aphd_dltddt,
          aphd_las_act_by,
          aphd_origcrtr,
          aphd_origcrtrlogdin,
          aphd_las_act_by_logdin,
          aphd_univid,
          aphd_cmpd,
          aphd_otcm,
          aphd_ddln,
          aphd_ddlnact,
          aphd_ratnapvl,
          aphd_rfrdobj_id,
          aphd_rfrdobj_typ,
          aphd_wkfwistcid,
          aphd_cnv_id,
          aphd_ogtr,
          aphd_sndr,
          aphd_ret_to,
          aphd_frtropnnfor,
          aphd_id,
          valid_from,
          valid_to,
          aphd_audid,
          aphd_prev_audid,
          aphd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.aphd_c4c_id,
          :new.aphd_crtd,
          :new.aphd_las_act,
          :new.aphd_las_act_actrtyp,
          :new.aphd_obj_stt,
          :new.aphd_vers,
          :new.aphd_vsbt,
          :new.aphd_dltddt,
          :new.aphd_las_act_by,
          :new.aphd_origcrtr,
          :new.aphd_origcrtrlogdin,
          :new.aphd_las_act_by_logdin,
          :new.aphd_univid,
          :new.aphd_cmpd,
          :new.aphd_otcm,
          :new.aphd_ddln,
          :new.aphd_ddlnact,
          :new.aphd_ratnapvl,
          :new.aphd_rfrdobj_id,
          :new.aphd_rfrdobj_typ,
          :new.aphd_wkfwistcid,
          :new.aphd_cnv_id,
          :new.aphd_ogtr,
          :new.aphd_sndr,
          :new.aphd_ret_to,
          :new.aphd_frtropnnfor,
          :new.aphd_id,
          :new.aphd_las_act_tim,
          NULL,
          u_apvlhead.NEXTVAL,
          last_audid,
          NUL
L
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_apvlhead
      SET
        valid_to        = :new.aphd_las_act_tim,
        aphd_next_audid = u_apvlhead.CURRVAL
      WHERE
        aphd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
17
</td>
<td>
THH_C4C
</td>
<td>
TRG_APRC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_APRC_AUDITINSERT&quot; BEFORE INSERT ON T_APVLREC FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.aprc_crtd IS NULL THEN 
    :new.aprc_crtd := curr_date; 
  END IF; 

  IF :new.aprc_las_act_tim IS NULL THEN 
    :new.aprc_las_act_tim := curr_date; 
  END IF; 

  IF :new.aprc_las_act IS NULL THEN 
    :new.aprc_las_act := 1; 
  END IF; 

  IF :new.aprc_obj_stt IS NULL THEN 
    :new.aprc_obj_stt := 1; 
  END IF; 

  IF :new.aprc_vers IS NULL THEN 
    :new.aprc_vers := 0; 
  END IF; 

  IF :new.aprc_vsbt IS NULL THEN 
    :new.aprc_vsbt := 1001; 
  END IF; 

  IF :new.aprc_las_act_by IS NULL THEN 
    :new.aprc_las_act_by := 1; 
  END IF; 

  IF :new.aprc_origcrtr IS NULL THEN 
    :new.aprc_origcrtr := 1; 
  END IF; 

  IF :new.aprc_origcrtrlogdin IS NULL THEN 
    :new.aprc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.aprc_las_act_by_logdin IS NULL THEN 
    :new.aprc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_apvlrec 
  ( 
   aprc_rjtncmmt, 
   aprc_rfrdobj_id, 
   aprc_rfrdobj_typ, 
   aprc_wkfwistcid, 
   aprc_cnv_id, 
   aprc_ownrchndflag, 
   aprc_ownrchndcnt, 
   aprc_rfngwkfwtsk, 
   aprc_prvsrfngtsk, 
   aprc_prvsrfngtsk_prmn, 
   aprc_ownr, 
   aprc_prvsownr, 
   aprc_prvssndr, 
   aprc_prvsownrprmn, 
   aprc_tnfr, 
   aprc_prvstnfr, 
   aprc_head, 
   aprc_rjtnresn, 
   classtype, 
   aprc_c4c_id, 
   aprc_crtd, 
   aprc_las_act, 
   aprc_las_act_actrtyp, 
   aprc_obj_stt, 
   aprc_vers, 
   aprc_vsbt, 
   aprc_dltddt, 
   aprc_las_act_by, 
   aprc_origcrtr, 
   aprc_origcrtrlogdin, 
   aprc_las_act_by_logdin, 
   aprc_univid, 
   aprc_cmpd, 
   aprc_otcm, 
   aprc_cmmt, 
   aprc_rcvd, 
   aprc_id, 
   valid_from, 
   valid_to , 
   aprc_audid, 
   aprc_prev_audid, 
   aprc_next_audid
  ) 
  VALUES 
  ( 
   :new.aprc_rjtncmmt,
   :new.aprc_rfrdobj_id,
   :new.aprc_rfrdobj_typ,
   :new.aprc_wkfwistcid,
   :new.aprc_cnv_id,
   :new.aprc_ownrchndflag,
   :new.aprc_ownrchndcnt,
   :new.aprc_rfngwkfwtsk,
   :new.aprc_prvsrfngtsk,
   :new.aprc_prvsrf
ngtsk_prmn,
   :new.aprc_ownr,
   :new.aprc_prvsownr,
   :new.aprc_prvssndr,
   :new.aprc_prvsownrprmn,
   :new.aprc_tnfr,
   :new.aprc_prvstnfr,
   :new.aprc_head,
   :new.aprc_rjtnresn,
   :new.classtype,
   :new.aprc_c4c_id,
   :new.aprc_crtd,
   :new.aprc_las_act,
   :new.aprc_las_act_actrtyp,
   :new.aprc_obj_stt,
   :new.aprc_vers,
   :new.aprc_vsbt,
   :new.aprc_dltddt,
   :new.aprc_las_act_by,
   :new.aprc_origcrtr,
   :new.aprc_origcrtrlogdin,
   :new.aprc_las_act_by_logdin,
   :new.aprc_univid,
   :new.aprc_cmpd,
   :new.aprc_otcm,
   :new.aprc_cmmt,
   :new.aprc_rcvd, 
   :new.aprc_id, 
   :new.aprc_las_act_tim, 
   NULL, 
   u_apvlrec.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
18
</td>
<td>
THH_C4C
</td>
<td>
TRG_APRC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_aprc_auditupdate BEFORE
  UPDATE
    ON T_APVLREC FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        aprc_audid
      INTO
        last_audid
      FROM
        a_apvlrec
      WHERE
        aprc_id            = :old.aprc_id
      AND aprc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.aprc_las_act_tim = :new.aprc_las_act_tim THEN
      UPDATE
        a_apvlrec
      SET
        aprc_rfrdobj_typ       = :new.aprc_rfrdobj_typ,
        aprc_wkfwistcid        = :new.aprc_wkfwistcid,
        aprc_cnv_id            = :new.aprc_cnv_id,
        aprc_ownrchndflag      = :new.aprc_ownrchndflag,
        aprc_ownrchndcnt       = :new.aprc_ownrchndcnt,
        aprc_rfngwkfwtsk       = :new.aprc_rfngwkfwtsk,
        aprc_prvsrfngtsk       = :new.aprc_prvsrfngtsk,
        aprc_prvsrfngtsk_prmn  = :new.aprc_prvsrfngtsk_prmn,
        aprc_ownr              = :new.aprc_ownr,
        aprc_prvsownr          = :new.aprc_prvsownr,
        aprc_prvssndr          = :new.aprc_prvssndr,
        aprc_prvsownrprmn      = :new.aprc_prvsownrprmn,
        aprc_tnfr              = :new.aprc_tnfr,
        aprc_prvstnfr          = :new.aprc_prvstnfr,
        aprc_head              = :new.aprc_head,
        aprc_rjtnresn          = :new.aprc_rjtnresn,
        classtype              = :new.classtype,
        aprc_c4c_id            = :new.aprc_c4c_id,
        aprc_crtd              = :new.aprc_crtd,
        aprc_las_act           = :new.aprc_las_act,
        aprc_las_act_actrtyp   = :new.aprc_las_act_actrtyp,
        aprc_obj_stt           = :new.aprc_obj_stt,
        aprc_vers              = :new.aprc_vers,
        aprc_vsbt              = :new.aprc_vsbt,
        aprc_dltddt            = :new.aprc_dltddt,
        aprc_las_act_by        = :new.aprc_las_act_by,
        aprc_origcrtr          =
:new.aprc_origcrtr,
        aprc_origcrtrlogdin    = :new.aprc_origcrtrlogdin,
        aprc_las_act_by_logdin = :new.aprc_las_act_by_logdin,
        aprc_univid            = :new.aprc_univid,
        aprc_cmpd              = :new.aprc_cmpd,
        aprc_otcm              = :new.aprc_otcm,
        aprc_cmmt              = :new.aprc_cmmt,
        aprc_rcvd              = :new.aprc_rcvd,
        aprc_rjtncmmt          = :new.aprc_rjtncmmt,
        aprc_rfrdobj_id        = :new.aprc_rfrdobj_id
      WHERE
        aprc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_apvlrec
        (
          aprc_rfrdobj_typ,
          aprc_wkfwistcid,
          aprc_cnv_id,
          aprc_ownrchndflag,
          aprc_ownrchndcnt,
          aprc_rfngwkfwtsk,
          aprc_prvsrfngtsk,
          aprc_prvsrfngtsk_prmn,
          aprc_ownr,
          aprc_prvsownr,
          aprc_prvssndr,
          aprc_prvsownrprmn,
          aprc_tnfr,
          aprc_prvstnfr,
          aprc_head,
          aprc_rjtnresn,
          classtype,
          aprc_c4c_id,
          aprc_crtd,
          aprc_las_act,
          aprc_las_act_actrtyp,
          aprc_obj_stt,
          aprc_vers,
          aprc_vsbt,
          aprc_dltddt,
          aprc_las_act_by,
          aprc_origcrtr,
          aprc_origcrtrlogdin,
          aprc_las_act_by_logdin,
          aprc_univid,
          aprc_cmpd,
          aprc_otcm,
          aprc_cmmt,
          aprc_rcvd,
          aprc_rjtncmmt,
          aprc_rfrdobj_id,
          aprc_id,
          valid_from,
          valid_to,
          aprc_audid,
          aprc_prev_audid,
          aprc_next_audid
        )
        VALUES
        (
          :new.aprc_rfrdobj_typ,
          :new.aprc_wkfwistcid,
          :new.aprc_cnv_id,
          :new.aprc_ownrchndflag,
          :new.aprc_ownrchndcnt,
          :new.aprc_rfngwkfwtsk,

   :new.aprc_prvsrfngtsk,
          :new.aprc_prvsrfngtsk_prmn,
          :new.aprc_ownr,
          :new.aprc_prvsownr,
          :new.aprc_prvssndr,
          :new.aprc_prvsownrprmn,
          :new.aprc_tnfr,
          :new.aprc_prvstnfr,
          :new.aprc_head,
          :new.aprc_rjtnresn,
          :new.classtype,
          :new.aprc_c4c_id,
          :new.aprc_crtd,
          :new.aprc_las_act,
          :new.aprc_las_act_actrtyp,
          :new.aprc_obj_stt,
          :new.aprc_vers,
          :new.aprc_vsbt,
          :new.aprc_dltddt,
          :new.aprc_las_act_by,
          :new.aprc_origcrtr,
          :new.aprc_origcrtrlogdin,
          :new.aprc_las_act_by_logdin,
          :new.aprc_univid,
          :new.aprc_cmpd,
          :new.aprc_otcm,
          :new.aprc_cmmt,
          :new.aprc_rcvd,
          :new.aprc_rjtncmmt,
          :new.aprc_rfrdobj_id,
          :new.aprc_id,
          :new.aprc_las_act_tim,
          NULL,
          u_apvlrec.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_apvlrec
      SET
        valid_to        = :new.aprc_las_act_tim,
        aprc_next_audid = u_apvlrec.CURRVAL
      WHERE
        aprc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
19
</td>
<td>
THH_C4C
</td>
<td>
TRG_APTD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLTRKGDEND
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_APTD_AUDITINSERT&quot; BEFORE INSERT ON T_APVLTRKGDEND FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.aptd_crtd IS NULL THEN 
    :new.aptd_crtd := curr_date; 
  END IF; 

  IF :new.aptd_las_act_tim IS NULL THEN 
    :new.aptd_las_act_tim := curr_date; 
  END IF; 

  IF :new.aptd_las_act IS NULL THEN 
    :new.aptd_las_act := 1; 
  END IF; 

  IF :new.aptd_obj_stt IS NULL THEN 
    :new.aptd_obj_stt := 1; 
  END IF; 

  IF :new.aptd_vers IS NULL THEN 
    :new.aptd_vers := 0; 
  END IF; 

  IF :new.aptd_vsbt IS NULL THEN 
    :new.aptd_vsbt := 1001; 
  END IF; 

  IF :new.aptd_las_act_by IS NULL THEN 
    :new.aptd_las_act_by := 1; 
  END IF; 

  IF :new.aptd_origcrtr IS NULL THEN 
    :new.aptd_origcrtr := 1; 
  END IF; 

  IF :new.aptd_origcrtrlogdin IS NULL THEN 
    :new.aptd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.aptd_las_act_by_logdin IS NULL THEN 
    :new.aptd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_apvltrkgdend 
  ( 
   classtype, 
   aptd_c4c_id, 
   aptd_crtd, 
   aptd_las_act, 
   aptd_las_act_actrtyp, 
   aptd_obj_stt, 
   aptd_vers, 
   aptd_vsbt, 
   aptd_dltddt, 
   aptd_las_act_by, 
   aptd_origcrtr, 
   aptd_origcrtrlogdin, 
   aptd_las_act_by_logdin, 
   aptd_univid, 
   aptd_trkgfor_dend, 
   aptd_dnngrcts, 
   aptd_id, 
   valid_from, 
   valid_to , 
   aptd_audid, 
   aptd_prev_audid, 
   aptd_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.aptd_c4c_id,
   :new.aptd_crtd,
   :new.aptd_las_act,
   :new.aptd_las_act_actrtyp,
   :new.aptd_obj_stt,
   :new.aptd_vers,
   :new.aptd_vsbt,
   :new.aptd_dltddt,
   :new.aptd_las_act_by,
   :new.aptd_origcrtr,
   :new.aptd_origcrtrlogdin,
   :new.aptd_las_act_by_logdin,
   :new.aptd_univid,
   :new.aptd_trkgfor_dend,
   :new.aptd_dnngrcts, 
   :new.aptd_id, 
   :new.aptd_las_act_tim, 
   NULL, 
   u_apvltrkgdend.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
20
</td>
<td>
THH_C4C
</td>
<td>
TRG_APTD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_APVLTRKGDEND
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_aptd_auditupdate BEFORE
  UPDATE
    ON T_APVLTRKGDEND FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        aptd_audid
      INTO
        last_audid
      FROM
        a_apvltrkgdend
      WHERE
        aptd_id            = :old.aptd_id
      AND aptd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.aptd_las_act_tim = :new.aptd_las_act_tim THEN
      UPDATE
        a_apvltrkgdend
      SET
        classtype              = :new.classtype,
        aptd_c4c_id            = :new.aptd_c4c_id,
        aptd_crtd              = :new.aptd_crtd,
        aptd_las_act           = :new.aptd_las_act,
        aptd_las_act_actrtyp   = :new.aptd_las_act_actrtyp,
        aptd_obj_stt           = :new.aptd_obj_stt,
        aptd_vers              = :new.aptd_vers,
        aptd_vsbt              = :new.aptd_vsbt,
        aptd_dltddt            = :new.aptd_dltddt,
        aptd_las_act_by        = :new.aptd_las_act_by,
        aptd_origcrtr          = :new.aptd_origcrtr,
        aptd_origcrtrlogdin    = :new.aptd_origcrtrlogdin,
        aptd_las_act_by_logdin = :new.aptd_las_act_by_logdin,
        aptd_univid            = :new.aptd_univid,
        aptd_trkgfor_dend      = :new.aptd_trkgfor_dend,
        aptd_dnngrcts          = :new.aptd_dnngrcts
      WHERE
        aptd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_apvltrkgdend
        (
          classtype,
          aptd_c4c_id,
          aptd_crtd,
          aptd_las_act,
          aptd_las_act_actrtyp,
          aptd_obj_stt,
          aptd_vers,
          aptd_vsbt,
          aptd_dltddt,
          aptd_las_act_by,
          aptd_origcrtr,
          aptd_origcrtrlogdin,
          aptd_las_act_
by_logdin,
          aptd_univid,
          aptd_trkgfor_dend,
          aptd_dnngrcts,
          aptd_id,
          valid_from,
          valid_to,
          aptd_audid,
          aptd_prev_audid,
          aptd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.aptd_c4c_id,
          :new.aptd_crtd,
          :new.aptd_las_act,
          :new.aptd_las_act_actrtyp,
          :new.aptd_obj_stt,
          :new.aptd_vers,
          :new.aptd_vsbt,
          :new.aptd_dltddt,
          :new.aptd_las_act_by,
          :new.aptd_origcrtr,
          :new.aptd_origcrtrlogdin,
          :new.aptd_las_act_by_logdin,
          :new.aptd_univid,
          :new.aptd_trkgfor_dend,
          :new.aptd_dnngrcts,
          :new.aptd_id,
          :new.aptd_las_act_tim,
          NULL,
          u_apvltrkgdend.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_apvltrkgdend
      SET
        valid_to        = :new.aptd_las_act_tim,
        aptd_next_audid = u_apvltrkgdend.CURRVAL
      WHERE
        aptd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
21
</td>
<td>
THH_C4C
</td>
<td>
TRG_ACCB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ASMTCC_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_accb_auditinsert BEFORE INSERT ON T_ASMTCC_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;
  IF :new.accb_crtd IS NULL THEN
    :new.accb_crtd := curr_date;
  END IF;
  IF :new.accb_las_act_tim IS NULL THEN
    :new.accb_las_act_tim := curr_date;
  END IF;
  IF :new.accb_las_act IS NULL THEN
    :new.accb_las_act := 1;
  END IF;
  IF :new.accb_obj_stt IS NULL THEN
    :new.accb_obj_stt := 1;
  END IF;
  IF :new.accb_vers IS NULL THEN
    :new.accb_vers := 0;
  END IF;
  IF :new.accb_vsbt IS NULL THEN
    :new.accb_vsbt := 1001;
  END IF;
  IF :new.accb_las_act_by IS NULL THEN
    :new.accb_las_act_by := 1;
  END IF;
  IF :new.accb_origcrtr IS NULL THEN
    :new.accb_origcrtr := 1;
  END IF;
  IF :new.accb_origcrtrlogdin IS NULL THEN
    :new.accb_origcrtrlogdin := 1;
  END IF;
  IF :new.accb_las_act_by_logdin IS NULL THEN
    :new.accb_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_asmtcc_base
  (
   classtype,
   accb_c4c_id,
   accb_crtd,
   accb_las_act,
   accb_las_act_actrtyp,
   accb_obj_stt,
   accb_vers,
   accb_vsbt,
   accb_dltddt,
   accb_las_act_by,
   accb_origcrtr,
   accb_origcrtrlogdin,
   accb_las_act_by_logdin,
   accb_univid,
   accb_nam,
   accb_prus,
   accb_dscm,
   accb_ldngmsg,
   accb_frstatvd,
   accb_las_atvd,
   accb_las_dctd,
   accb_frstsbtdat,
   accb_las_sbtdat,
   accb_wkfwistcid,
   accb_cnv_id,
   accb_ownrchndflag,
   accb_ownrchndcnt,
   accb_dvtndt,
   accb_cmmt,
   cclc_id,
   asmt_id,
   accb_las_dctdby,
   accb_frstatvdby,
   accb_las_atvdby,
   accb_ratnapvl,
   accb_apvl,
   accb_rcpttrkg,
   accb_las_sbtdby,
   accb_frstsbtdby,
   accb_rfngwkfwtsk,
   accb_prvsrfngtsk,
   accb_prvsrfngtsk_prmn,
   accb_ownr,
   accb_prvsownr,
   accb_prvssndr,
   accb_prvsownrprmn,
   accb_tnfr,
   accb_prvstnfr,
   accb_dgesfrma,
   accb_carebeanfrma,
   accb_sttsfrma,
   accb_totlscor,
   accb_rep_frma,
   accb_tsk_frma,
   accb_cstmflds,
   cclc_typ_sbty,
   asmt_typ_sbty,
   accb_origblr_plt,
   accb_alrtfrma,
   accb_prblmfrma,
   accb
_id,
   valid_from,
   valid_to ,
   accb_audid,
   accb_prev_audid,
   accb_next_audid
  )
  VALUES
  (
   :new.classtype,
   :new.accb_c4c_id,
   :new.accb_crtd,
   :new.accb_las_act,
   :new.accb_las_act_actrtyp,
   :new.accb_obj_stt,
   :new.accb_vers,
   :new.accb_vsbt,
   :new.accb_dltddt,
   :new.accb_las_act_by,
   :new.accb_origcrtr,
   :new.accb_origcrtrlogdin,
   :new.accb_las_act_by_logdin,
   :new.accb_univid,
   :new.accb_nam,
   :new.accb_prus,
   :new.accb_dscm,
   :new.accb_ldngmsg,
   :new.accb_frstatvd,
   :new.accb_las_atvd,
   :new.accb_las_dctd,
   :new.accb_frstsbtdat,
   :new.accb_las_sbtdat,
   :new.accb_wkfwistcid,
   :new.accb_cnv_id,
   :new.accb_ownrchndflag,
   :new.accb_ownrchndcnt,
   :new.accb_dvtndt,
   :new.accb_cmmt,
   :new.cclc_id,
   :new.asmt_id,
   :new.accb_las_dctdby,
   :new.accb_frstatvdby,
   :new.accb_las_atvdby,
   :new.accb_ratnapvl,
   :new.accb_apvl,
   :new.accb_rcpttrkg,
   :new.accb_las_sbtdby,
   :new.accb_frstsbtdby,
   :new.accb_rfngwkfwtsk,
   :new.accb_prvsrfngtsk,
   :new.accb_prvsrfngtsk_prmn,
   :new.accb_ownr,
   :new.accb_prvsownr,
   :new.accb_prvssndr,
   :new.accb_prvsownrprmn,
   :new.accb_tnfr,
   :new.accb_prvstnfr,
   :new.accb_dgesfrma,
   :new.accb_carebeanfrma,
   :new.accb_sttsfrma,
   :new.accb_totlscor,
   :new.accb_rep_frma,
   :new.accb_tsk_frma,
   :new.accb_cstmflds,
   :new.cclc_typ_sbty,
   :new.asmt_typ_sbty,
   :new.accb_origblr_plt,
   :new.accb_alrtfrma,
   :new.accb_prblmfrma,
   :new.accb_id,
   :new.accb_las_act_tim,
   NULL,
   u_asmtcc_base.NEXTVAL,
   NULL,
   NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
22
</td>
<td>
THH_C4C
</td>
<td>
TRG_ACCB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ASMTCC_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_accb_auditupdate BEFORE
  UPDATE
    ON T_ASMTCC_BASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        accb_audid
      INTO
        last_audid
      FROM
        a_asmtcc_base
      WHERE
        accb_id            = :old.accb_id
      AND accb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.accb_las_act_tim = :new.accb_las_act_tim THEN
      UPDATE
        a_asmtcc_base
      SET
        classtype              = :new.classtype,
        accb_c4c_id            = :new.accb_c4c_id,
        accb_crtd              = :new.accb_crtd,
        accb_las_act           = :new.accb_las_act,
        accb_las_act_actrtyp   = :new.accb_las_act_actrtyp,
        accb_obj_stt           = :new.accb_obj_stt,
        accb_vers              = :new.accb_vers,
        accb_vsbt              = :new.accb_vsbt,
        accb_dltddt            = :new.accb_dltddt,
        accb_las_act_by        = :new.accb_las_act_by,
        accb_origcrtr          = :new.accb_origcrtr,
        accb_origcrtrlogdin    = :new.accb_origcrtrlogdin,
        accb_las_act_by_logdin = :new.accb_las_act_by_logdin,
        accb_univid            = :new.accb_univid,
        accb_nam               = :new.accb_nam,
        accb_prus              = :new.accb_prus,
        accb_dscm              = :new.accb_dscm,
        accb_ldngmsg           = :new.accb_ldngmsg,
        accb_frstatvd          = :new.accb_frstatvd,
        accb_las_atvd          = :new.accb_las_atvd,
        accb_las_dctd          = :new.accb_las_dctd,
        accb_frstsbtdat        = :new.accb_frstsbtdat,
        accb_las_sbtdat        = :new.accb_las_sbtdat,
        accb_wkfwistcid        = :new.accb_wkfwistcid,
        accb_cnv_id            = :new.accb_cnv_id,
        accb_ownrchndflag      = :new.accb_ownrchndflag,
        accb_ownrchndcnt       = :
new.accb_ownrchndcnt,
        accb_dvtndt            = :new.accb_dvtndt,
        accb_cmmt              = :new.accb_cmmt,
        cclc_id                = :new.cclc_id,
        asmt_id                = :new.asmt_id,
        accb_las_dctdby        = :new.accb_las_dctdby,
        accb_frstatvdby        = :new.accb_frstatvdby,
        accb_las_atvdby        = :new.accb_las_atvdby,
        accb_ratnapvl          = :new.accb_ratnapvl,
        accb_apvl              = :new.accb_apvl,
        accb_rcpttrkg          = :new.accb_rcpttrkg,
        accb_las_sbtdby        = :new.accb_las_sbtdby,
        accb_frstsbtdby        = :new.accb_frstsbtdby,
        accb_rfngwkfwtsk       = :new.accb_rfngwkfwtsk,
        accb_prvsrfngtsk       = :new.accb_prvsrfngtsk,
        accb_prvsrfngtsk_prmn  = :new.accb_prvsrfngtsk_prmn,
        accb_ownr              = :new.accb_ownr,
        accb_prvsownr          = :new.accb_prvsownr,
        accb_prvssndr          = :new.accb_prvssndr,
        accb_prvsownrprmn      = :new.accb_prvsownrprmn,
        accb_tnfr              = :new.accb_tnfr,
        accb_prvstnfr          = :new.accb_prvstnfr,
        accb_dgesfrma          = :new.accb_dgesfrma,
        accb_carebeanfrma      = :new.accb_carebeanfrma,
        accb_sttsfrma          = :new.accb_sttsfrma,
        accb_totlscor          = :new.accb_totlscor,
        accb_rep_frma          = :new.accb_rep_frma,
        accb_tsk_frma          = :new.accb_tsk_frma,
        accb_cstmflds          = :new.accb_cstmflds,
        cclc_typ_sbty          = :new.cclc_typ_sbty,
        asmt_typ_sbty          = :new.asmt_typ_sbty,
        accb_origblr_plt       = :new.accb_origblr_plt,
        accb_alrtfrma          = :new.accb_alrtfrma,
        accb_prblmfrma         = :new.accb_prblmfrma
      WHERE
        accb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_asmtcc_bas
e
        (
          classtype,
          accb_c4c_id,
          accb_crtd,
          accb_las_act,
          accb_las_act_actrtyp,
          accb_obj_stt,
          accb_vers,
          accb_vsbt,
          accb_dltddt,
          accb_las_act_by,
          accb_origcrtr,
          accb_origcrtrlogdin,
          accb_las_act_by_logdin,
          accb_univid,
          accb_nam,
          accb_prus,
          accb_dscm,
          accb_ldngmsg,
          accb_frstatvd,
          accb_las_atvd,
          accb_las_dctd,
          accb_frstsbtdat,
          accb_las_sbtdat,
          accb_wkfwistcid,
          accb_cnv_id,
          accb_ownrchndflag,
          accb_ownrchndcnt,
          accb_dvtndt,
          accb_cmmt,
          cclc_id,
          asmt_id,
          accb_las_dctdby,
          accb_frstatvdby,
          accb_las_atvdby,
          accb_ratnapvl,
          accb_apvl,
          accb_rcpttrkg,
          accb_las_sbtdby,
          accb_frstsbtdby,
          accb_rfngwkfwtsk,
          accb_prvsrfngtsk,
          accb_prvsrfngtsk_prmn,
          accb_ownr,
          accb_prvsownr,
          accb_prvssndr,
          accb_prvsownrprmn,
          accb_tnfr,
          accb_prvstnfr,
          accb_dgesfrma,
          accb_carebeanfrma,
          accb_sttsfrma,
          accb_totlscor,
          accb_rep_frma,
          accb_tsk_frma,
          accb_cstmflds,
          cclc_typ_sbty,
          asmt_typ_sbty,
          accb_origblr_plt,
          accb_alrtfrma,
          accb_prblmfrma,
          accb_id,
          valid_from,
          valid_to,
          accb_audid,
          accb_prev_audid,
          accb_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.accb_c4c_id,
          :new.accb_crtd,
          :new.accb_las_act,
          :new.accb_las_act_actrtyp,
          :new.accb_obj_stt,
          :new.accb_vers,
          :new.accb_vsbt,
          :new.accb_dltddt,
          :new.accb_las_act_by,
          :new.accb_origcrt
r,
          :new.accb_origcrtrlogdin,
          :new.accb_las_act_by_logdin,
          :new.accb_univid,
          :new.accb_nam,
          :new.accb_prus,
          :new.accb_dscm,
          :new.accb_ldngmsg,
          :new.accb_frstatvd,
          :new.accb_las_atvd,
          :new.accb_las_dctd,
          :new.accb_frstsbtdat,
          :new.accb_las_sbtdat,
          :new.accb_wkfwistcid,
          :new.accb_cnv_id,
          :new.accb_ownrchndflag,
          :new.accb_ownrchndcnt,
          :new.accb_dvtndt,
          :new.accb_cmmt,
          :new.cclc_id,
          :new.asmt_id,
          :new.accb_las_dctdby,
          :new.accb_frstatvdby,
          :new.accb_las_atvdby,
          :new.accb_ratnapvl,
          :new.accb_apvl,
          :new.accb_rcpttrkg,
          :new.accb_las_sbtdby,
          :new.accb_frstsbtdby,
          :new.accb_rfngwkfwtsk,
          :new.accb_prvsrfngtsk,
          :new.accb_prvsrfngtsk_prmn,
          :new.accb_ownr,
          :new.accb_prvsownr,
          :new.accb_prvssndr,
          :new.accb_prvsownrprmn,
          :new.accb_tnfr,
          :new.accb_prvstnfr,
          :new.accb_dgesfrma,
          :new.accb_carebeanfrma,
          :new.accb_sttsfrma,
          :new.accb_totlscor,
          :new.accb_rep_frma,
          :new.accb_tsk_frma,
          :new.accb_cstmflds,
          :new.cclc_typ_sbty,
          :new.asmt_typ_sbty,
          :new.accb_origblr_plt,
          :new.accb_alrtfrma,
          :new.accb_prblmfrma,
          :new.accb_id,
          :new.accb_las_act_tim,
          NULL,
          u_asmtcc_base.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_asmtcc_base
      SET
        valid_to        = :new.accb_las_act_tim,
        accb_next_audid = u_asmtcc_base.CURRVAL
      WHERE
        accb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
23
</td>
<td>
THH_C4C
</td>
<td>
TRG_BARRIER
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_BARRIER
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_barrier BEFORE INSERT OR UPDATE ON T_barrier FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN
  curr_date := current_date;
IF INSERTING THEN
  IF :new.barrier_crtd IS NULL THEN
    :new.barrier_crtd := curr_date;
  END IF;
  IF :new.barrier_las_act_tim IS NULL THEN
    :new.barrier_las_act_tim := curr_date;
  END IF;
  IF :new.barrier_obj_stt IS NULL THEN
    :new.barrier_obj_stt := 1;
  END IF;
  IF :new.barrier_vers IS NULL THEN
    :new.barrier_vers := 0;
  END IF;
  IF :new.barrier_vsbt IS NULL THEN
    :new.barrier_vsbt := 1001;
  END IF;
  IF :new.barrier_origcrtr IS NULL THEN
    :new.barrier_origcrtr := 1;
  END IF;
  IF :new.barrier_origcrtrlogdin IS NULL THEN
    :new.barrier_origcrtrlogdin := 1;
  END IF;
  IF :new.barrier_las_act_by_logdin IS NULL THEN
    :new.barrier_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_barrier
  ( barrier_ID,
   CLASSTYPE,
   barrier_C4C_ID,
   barrier_CRTD,
   barrier_LAS_ACT_TIM,
   barrier_OBJ_STT,
   barrier_VERS,
   barrier_VSBT,
   barrier_DLTDT,
   barrier_LAS_ACT_BY,
   barrier_ORIGCRTR,
   barrier_ORIGCRTRLOGDIN,
   barrier_LAS_ACT_BY_LOGDIN,
   barrier_UNIVID,
   barrier_TEMPLATE,
   barrier_NAME,
   barrier_DESC,
   barrier_START,
   barrier_END,
   barrier_COMMENTS,
   T_OUTCOME_OUTCOME_ID,
   valid_from,
   valid_to ,
   barrier_audid,
   barrier_prev_audid,
   barrier_next_audid )
  VALUES
  (:new.barrier_ID,
   :new.CLASSTYPE,
   :new.barrier_C4C_ID,
   :new.barrier_CRTD,
   :new.barrier_LAS_ACT_TIM,
   :new.barrier_OBJ_STT,
   :new.barrier_VERS,
   :new.barrier_VSBT,
   :new.barrier_DLTDT,
   :new.barrier_LAS_ACT_BY,
   :new.barrier_ORIGCRTR,
   :new.barrier_ORIGCRTRLOGDIN,
   :new.barrier_LAS_ACT_BY_LOGDIN,
   :new.barrier_UNIVID,
   :new.barrier_TEMPLATE,
   :new.barrier_NAME,
   :new.barrier_DESC,
   :new.barrier_START,
   :new.barrier_END,
   :new.barrier_COMMENTS,
   :new.T_OUTCOME_OUTCOME_ID,
   :new.barrier_las_act_tim,
   NULL,
   u_barrier.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN

    SELECT barrier_audid INTO last_audid FROM a_barrier
      WHERE barrier_id =  :old.barrier_id AND barrier_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.barrier_las_act_tim = :new.barrier_las_act_tim THEN
    UPDATE a_barrier
     SET barrier_id                         = :new.barrier_id,
         classtype                       = :new.classtype,
         barrier_c4c_id                     = :new.barrier_c4c_id,
         barrier_crtd                       = :new.barrier_crtd,
         barrier_las_act_tim		 = :new.barrier_las_act_tim,
         barrier_obj_stt                    = :new.barrier_obj_stt,
         barrier_vers                       = :new.barrier_vers,
         barrier_vsbt                       = :new.barrier_vsbt,
         barrier_dltdt                      = :new.barrier_dltdt,
         barrier_LAS_ACT_BY                = :new.barrier_LAS_ACT_BY,
         barrier_origcrtr                   = :new.barrier_origcrtr,
         barrier_origcrtrlogdin             = :new.barrier_origcrtrlogdin,
         barrier_las_act_by_logdin          = :new.barrier_las_act_by_logdin,
         barrier_UNIVID                     = :new.barrier_univid,
         barrier_TEMPLATE                   = :new.barrier_template,
         barrier_NAME                       = :new.barrier_name,
         barrier_DESC                       = :new.barrier_desc,
         barrier_START                      = :new.barrier_start,
         barrier_END                        = :new.barrier_end,
         barrier_COMMENTS                   = :new.barrier_comments,
         T_OUTCOME_OUTCOME_ID		 = :new.T_OUTCOME_OUTCOME_ID
      WHERE barrier_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_barrier
  ( barrier_ID,
   CLASSTYPE,
   barrier_C4C_ID,
   barrier_CRTD
,
   barrier_LAS_ACT_TIM,
   barrier_OBJ_STT,
   barrier_VERS,
   barrier_VSBT,
   barrier_DLTDT,
   barrier_LAS_ACT_BY,
   barrier_ORIGCRTR,
   barrier_ORIGCRTRLOGDIN,
   barrier_LAS_ACT_BY_LOGDIN,
   barrier_UNIVID,
   barrier_TEMPLATE,
   barrier_NAME,
   barrier_DESC,
   barrier_START,
   barrier_END,
   barrier_COMMENTS,
   T_OUTCOME_OUTCOME_ID,
   valid_from,
   valid_to ,
   barrier_audid,
   barrier_prev_audid,
   barrier_next_audid )
  VALUES
  (:new.barrier_ID,
   :new.CLASSTYPE,
   :new.barrier_C4C_ID,
   :new.barrier_CRTD,
   :new.barrier_LAS_ACT_TIM,
   :new.barrier_OBJ_STT,
   :new.barrier_VERS,
   :new.barrier_VSBT,
   :new.barrier_DLTDT,
   :new.barrier_LAS_ACT_BY,
   :new.barrier_ORIGCRTR,
   :new.barrier_ORIGCRTRLOGDIN,
   :new.barrier_LAS_ACT_BY_LOGDIN,
   :new.barrier_UNIVID,
   :new.barrier_TEMPLATE,
   :new.barrier_NAME,
   :new.barrier_DESC,
   :new.barrier_START,
   :new.barrier_END,
   :new.barrier_COMMENTS,
   :new.T_OUTCOME_OUTCOME_ID,
   :new.barrier_las_act_tim,
   NULL,
   u_barrier.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_barrier
      SET
        valid_to = :new.barrier_las_act_tim,
        barrier_next_audid = u_barrier.CURRVAL
      WHERE barrier_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
24
</td>
<td>
THH_C4C
</td>
<td>
TRG_BARRIER_TEMPLATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_BARRIER_TEMPLATE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_barrier_TEMPLATE BEFORE INSERT OR UPDATE ON T_barrier_TEMPLATE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.barrier_crtd IS NULL THEN
    :new.barrier_crtd := curr_date;
  END IF;
  IF :new.barrier_las_act_tim IS NULL THEN
    :new.barrier_las_act_tim := curr_date;
  END IF;
  IF :new.barrier_obj_stt IS NULL THEN
    :new.barrier_obj_stt := 1;
  END IF;
  IF :new.barrier_vers IS NULL THEN
    :new.barrier_vers := 0;
  END IF;
  IF :new.barrier_vsbt IS NULL THEN
    :new.barrier_vsbt := 1001;
  END IF;
  IF :new.barrier_origcrtr IS NULL THEN
    :new.barrier_origcrtr := 1;
  END IF;
  IF :new.barrier_origcrtrlogdin IS NULL THEN
    :new.barrier_origcrtrlogdin := 1;
  END IF;
  IF :new.barrier_las_act_by_logdin IS NULL THEN
    :new.barrier_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_barrier_template
  ( BARRIER_ID,
   CLASSTYPE,
   BARRIER_C4C_ID,
   BARRIER_CRTD,
   BARRIER_LAS_ACT_TIM,
   BARRIER_OBJ_STT,
   BARRIER_VERS,
   BARRIER_VSBT,
   BARRIER_DLTDT,
   BARRIER_LAS_ACT_BY,
   BARRIER_ORIGCRTR,
   BARRIER_ORIGCRTRLOGDIN,
   BARRIER_LAS_ACT_BY_LOGDIN,
   BARRIER_UNIVID,
   BARRIER_NAME,
   BARRIER_DESC,
   BARRIER_COMMENTS,
   valid_from,
   valid_to ,
   barrier_audid,
   barrier_prev_audid,
   barrier_next_audid )
  VALUES
  (:new.BARRIER_ID,
   :new.CLASSTYPE,
   :new.BARRIER_C4C_ID,
   :new.BARRIER_CRTD,
   :new.BARRIER_LAS_ACT_TIM,
   :new.BARRIER_OBJ_STT,
   :new.BARRIER_VERS,
   :new.BARRIER_VSBT,
   :new.BARRIER_DLTDT,
   :new.BARRIER_LAS_ACT_BY,
   :new.BARRIER_ORIGCRTR,
   :new.BARRIER_ORIGCRTRLOGDIN,
   :new.BARRIER_LAS_ACT_BY_LOGDIN,
   :new.BARRIER_UNIVID,
   :new.BARRIER_NAME,
   :new.BARRIER_DESC,
   :new.BARRIER_COMMENTS,
   :new.barrier_las_act_tim,
   NULL,
   u_barrier_template.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT barrier_audid INTO last_audid FROM a_barrier_template
      WHERE barrier_id =  :old.barrier_id AND barrier_next_audid IS NULL  FOR UPDATE;
  EXCEPTI
ON WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.barrier_las_act_tim = :new.barrier_las_act_tim THEN
    UPDATE a_barrier_template
     SET barrier_id                         = :new.barrier_id,
         classtype                       = :new.classtype,
         barrier_c4c_id                     = :new.barrier_c4c_id,
         barrier_crtd                       = :new.barrier_crtd,
         barrier_las_act_tim		 = :new.barrier_las_act_tim,
         barrier_obj_stt                    = :new.barrier_obj_stt,
         barrier_vers                       = :new.barrier_vers,
         barrier_vsbt                       = :new.barrier_vsbt,
         barrier_dltdt                      = :new.barrier_dltdt,
         barrier_LAS_ACT_BY                = :new.barrier_LAS_ACT_BY,
         barrier_origcrtr                   = :new.barrier_origcrtr,
         barrier_origcrtrlogdin             = :new.barrier_origcrtrlogdin,
         barrier_las_act_by_logdin          = :new.barrier_las_act_by_logdin,
         BARRIER_UNIVID                     = :new.barrier_univid,
         BARRIER_NAME                       = :new.barrier_name,
         BARRIER_DESC                       = :new.barrier_desc,
         BARRIER_COMMENTS                   = :new.barrier_comments
      WHERE barrier_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_barrier_template
  ( BARRIER_ID,
   CLASSTYPE,
   BARRIER_C4C_ID,
   BARRIER_CRTD,
   BARRIER_LAS_ACT_TIM,
   BARRIER_OBJ_STT,
   BARRIER_VERS,
   BARRIER_VSBT,
   BARRIER_DLTDT,
   BARRIER_LAS_ACT_BY,
   BARRIER_ORIGCRTR,
   BARRIER_ORIGCRTRLOGDIN,
   BARRIER_LAS_ACT_BY_LOGDIN,
   BARRIER_UNIVID,
   BARRIER_NAME,
   BARRIER_DESC,
   BARRIER_COMMENTS,
   valid_from,
   valid_to ,
   barrier_audid,
   barrier_prev_audid,
   barrier_next_audid )
  VALUES
  (:new.BARRIER_ID
,
   :new.CLASSTYPE,
   :new.BARRIER_C4C_ID,
   :new.BARRIER_CRTD,
   :new.BARRIER_LAS_ACT_TIM,
   :new.BARRIER_OBJ_STT,
   :new.BARRIER_VERS,
   :new.BARRIER_VSBT,
   :new.BARRIER_DLTDT,
   :new.BARRIER_LAS_ACT_BY,
   :new.BARRIER_ORIGCRTR,
   :new.BARRIER_ORIGCRTRLOGDIN,
   :new.BARRIER_LAS_ACT_BY_LOGDIN,
   :new.BARRIER_UNIVID,
   :new.BARRIER_NAME,
   :new.BARRIER_DESC,
   :new.BARRIER_COMMENTS,
   :new.barrier_las_act_tim,
   NULL,
   u_barrier_template.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_barrier_template
      SET
        valid_to = :new.barrier_las_act_tim,
        barrier_next_audid = u_barrier_template.CURRVAL
      WHERE barrier_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
25
</td>
<td>
THH_C4C
</td>
<td>
TRG_BP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_BLR_PLT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_BP_AUDITINSERT&quot; BEFORE INSERT ON T_BLR_PLT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.bp_crtd IS NULL THEN 
    :new.bp_crtd := curr_date; 
  END IF; 

  IF :new.bp_las_act_tim IS NULL THEN 
    :new.bp_las_act_tim := curr_date; 
  END IF; 

  IF :new.bp_las_act IS NULL THEN 
    :new.bp_las_act := 1; 
  END IF; 

  IF :new.bp_obj_stt IS NULL THEN 
    :new.bp_obj_stt := 1; 
  END IF; 

  IF :new.bp_vers IS NULL THEN 
    :new.bp_vers := 0; 
  END IF; 

  IF :new.bp_vsbt IS NULL THEN 
    :new.bp_vsbt := 1001; 
  END IF; 

  IF :new.bp_las_act_by IS NULL THEN 
    :new.bp_las_act_by := 1; 
  END IF; 

  IF :new.bp_origcrtr IS NULL THEN 
    :new.bp_origcrtr := 1; 
  END IF; 

  IF :new.bp_origcrtrlogdin IS NULL THEN 
    :new.bp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.bp_las_act_by_logdin IS NULL THEN 
    :new.bp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_blr_plt 
  ( 
   bp_las_sbtdat, 
   bp_wkfwistcid, 
   bp_cnv_id, 
   bp_ownrchndflag, 
   bp_ownrchndcnt, 
   bp_dvtndt, 
   bp_cmmt, 
   abpt_id, 
   bp_las_dctdby, 
   bp_frstatvdby, 
   bp_las_atvdby, 
   bp_ratnapvl, 
   bp_apvl, 
   bp_rcpttrkg, 
   bp_las_sbtdby, 
   bp_frstsbtdby, 
   bp_rfngwkfwtsk, 
   bp_prvsrfngtsk, 
   bp_prvsrfngtsk_prmn, 
   bp_ownr, 
   bp_prvsownr, 
   bp_prvssndr, 
   bp_prvsownrprmn, 
   bp_tnfr, 
   bp_prvstnfr, 
   bp_typ_sbty, 
   classtype, 
   bp_c4c_id, 
   bp_crtd, 
   bp_las_act, 
   bp_las_act_actrtyp, 
   bp_obj_stt, 
   bp_vers, 
   bp_vsbt, 
   bp_dltddt, 
   bp_las_act_by, 
   bp_origcrtr, 
   bp_origcrtrlogdin, 
   bp_las_act_by_logdin, 
   bp_univid, 
   bp_nam, 
   bp_prus, 
   bp_txt, 
   bp_frstatvd, 
   bp_las_atvd, 
   bp_las_dctd, 
   bp_frstsbtdat, 
   bp_id, 
   valid_from, 
   valid_to , 
   bp_audid, 
   bp_prev_audid, 
   bp_next_audid
  ) 
  VALUES 
  ( 
   :new.bp_las_sbtdat,
   :new.bp_wkfwistcid,
   :new.bp_cnv_id,
   :new.bp_ownrchndflag,
   :new.bp_ownrchndcnt,
   :new.bp_dvtndt,
   :new.bp_cmmt,
   :new.abpt_id,
   :new
.bp_las_dctdby,
   :new.bp_frstatvdby,
   :new.bp_las_atvdby,
   :new.bp_ratnapvl,
   :new.bp_apvl,
   :new.bp_rcpttrkg,
   :new.bp_las_sbtdby,
   :new.bp_frstsbtdby,
   :new.bp_rfngwkfwtsk,
   :new.bp_prvsrfngtsk,
   :new.bp_prvsrfngtsk_prmn,
   :new.bp_ownr,
   :new.bp_prvsownr,
   :new.bp_prvssndr,
   :new.bp_prvsownrprmn,
   :new.bp_tnfr,
   :new.bp_prvstnfr,
   :new.bp_typ_sbty,
   :new.classtype,
   :new.bp_c4c_id,
   :new.bp_crtd,
   :new.bp_las_act,
   :new.bp_las_act_actrtyp,
   :new.bp_obj_stt,
   :new.bp_vers,
   :new.bp_vsbt,
   :new.bp_dltddt,
   :new.bp_las_act_by,
   :new.bp_origcrtr,
   :new.bp_origcrtrlogdin,
   :new.bp_las_act_by_logdin,
   :new.bp_univid,
   :new.bp_nam,
   :new.bp_prus,
   :new.bp_txt,
   :new.bp_frstatvd,
   :new.bp_las_atvd,
   :new.bp_las_dctd,
   :new.bp_frstsbtdat, 
   :new.bp_id, 
   :new.bp_las_act_tim, 
   NULL, 
   u_blr_plt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
26
</td>
<td>
THH_C4C
</td>
<td>
TRG_BP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_BLR_PLT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_bp_auditupdate BEFORE
  UPDATE
    ON T_BLR_PLT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        bp_audid
      INTO
        last_audid
      FROM
        a_blr_plt
      WHERE
        bp_id            = :old.bp_id
      AND bp_next_audid IS NULL
      AND rownum         &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.bp_las_act_tim = :new.bp_las_act_tim THEN
      UPDATE
        a_blr_plt
      SET
        classtype            = :new.classtype,
        bp_c4c_id            = :new.bp_c4c_id,
        bp_crtd              = :new.bp_crtd,
        bp_las_act           = :new.bp_las_act,
        bp_las_act_actrtyp   = :new.bp_las_act_actrtyp,
        bp_obj_stt           = :new.bp_obj_stt,
        bp_vers              = :new.bp_vers,
        bp_vsbt              = :new.bp_vsbt,
        bp_dltddt            = :new.bp_dltddt,
        bp_las_act_by        = :new.bp_las_act_by,
        bp_origcrtr          = :new.bp_origcrtr,
        bp_origcrtrlogdin    = :new.bp_origcrtrlogdin,
        bp_las_act_by_logdin = :new.bp_las_act_by_logdin,
        bp_univid            = :new.bp_univid,
        bp_nam               = :new.bp_nam,
        bp_prus              = :new.bp_prus,
        bp_txt               = :new.bp_txt,
        bp_frstatvd          = :new.bp_frstatvd,
        bp_las_atvd          = :new.bp_las_atvd,
        bp_las_dctd          = :new.bp_las_dctd,
        bp_frstsbtdat        = :new.bp_frstsbtdat,
        bp_las_sbtdat        = :new.bp_las_sbtdat,
        bp_wkfwistcid        = :new.bp_wkfwistcid,
        bp_cnv_id            = :new.bp_cnv_id,
        bp_ownrchndflag      = :new.bp_ownrchndflag,
        bp_ownrchndcnt       = :new.bp_ownrchndcnt,
        bp_dvtndt            = :new.bp_dvtndt,
        bp_cmmt              = :new.bp_cmmt,
        abpt_id              = :new.abpt_id,
        bp_las_dct
dby        = :new.bp_las_dctdby,
        bp_frstatvdby        = :new.bp_frstatvdby,
        bp_las_atvdby        = :new.bp_las_atvdby,
        bp_ratnapvl          = :new.bp_ratnapvl,
        bp_apvl              = :new.bp_apvl,
        bp_rcpttrkg          = :new.bp_rcpttrkg,
        bp_las_sbtdby        = :new.bp_las_sbtdby,
        bp_frstsbtdby        = :new.bp_frstsbtdby,
        bp_rfngwkfwtsk       = :new.bp_rfngwkfwtsk,
        bp_prvsrfngtsk       = :new.bp_prvsrfngtsk,
        bp_prvsrfngtsk_prmn  = :new.bp_prvsrfngtsk_prmn,
        bp_ownr              = :new.bp_ownr,
        bp_prvsownr          = :new.bp_prvsownr,
        bp_prvssndr          = :new.bp_prvssndr,
        bp_prvsownrprmn      = :new.bp_prvsownrprmn,
        bp_tnfr              = :new.bp_tnfr,
        bp_prvstnfr          = :new.bp_prvstnfr,
        bp_typ_sbty          = :new.bp_typ_sbty
      WHERE
        bp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_blr_plt
        (
          classtype,
          bp_c4c_id,
          bp_crtd,
          bp_las_act,
          bp_las_act_actrtyp,
          bp_obj_stt,
          bp_vers,
          bp_vsbt,
          bp_dltddt,
          bp_las_act_by,
          bp_origcrtr,
          bp_origcrtrlogdin,
          bp_las_act_by_logdin,
          bp_univid,
          bp_nam,
          bp_prus,
          bp_txt,
          bp_frstatvd,
          bp_las_atvd,
          bp_las_dctd,
          bp_frstsbtdat,
          bp_las_sbtdat,
          bp_wkfwistcid,
          bp_cnv_id,
          bp_ownrchndflag,
          bp_ownrchndcnt,
          bp_dvtndt,
          bp_cmmt,
          abpt_id,
          bp_las_dctdby,
          bp_frstatvdby,
          bp_las_atvdby,
          bp_ratnapvl,
          bp_apvl,
          bp_rcpttrkg,
          bp_las_sbtdby,
          bp_frstsbtdby,
          bp_rfngwkfwtsk,
          bp_prvsrf
ngtsk,
          bp_prvsrfngtsk_prmn,
          bp_ownr,
          bp_prvsownr,
          bp_prvssndr,
          bp_prvsownrprmn,
          bp_tnfr,
          bp_prvstnfr,
          bp_typ_sbty,
          bp_id,
          valid_from,
          valid_to,
          bp_audid,
          bp_prev_audid,
          bp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.bp_c4c_id,
          :new.bp_crtd,
          :new.bp_las_act,
          :new.bp_las_act_actrtyp,
          :new.bp_obj_stt,
          :new.bp_vers,
          :new.bp_vsbt,
          :new.bp_dltddt,
          :new.bp_las_act_by,
          :new.bp_origcrtr,
          :new.bp_origcrtrlogdin,
          :new.bp_las_act_by_logdin,
          :new.bp_univid,
          :new.bp_nam,
          :new.bp_prus,
          :new.bp_txt,
          :new.bp_frstatvd,
          :new.bp_las_atvd,
          :new.bp_las_dctd,
          :new.bp_frstsbtdat,
          :new.bp_las_sbtdat,
          :new.bp_wkfwistcid,
          :new.bp_cnv_id,
          :new.bp_ownrchndflag,
          :new.bp_ownrchndcnt,
          :new.bp_dvtndt,
          :new.bp_cmmt,
          :new.abpt_id,
          :new.bp_las_dctdby,
          :new.bp_frstatvdby,
          :new.bp_las_atvdby,
          :new.bp_ratnapvl,
          :new.bp_apvl,
          :new.bp_rcpttrkg,
          :new.bp_las_sbtdby,
          :new.bp_frstsbtdby,
          :new.bp_rfngwkfwtsk,
          :new.bp_prvsrfngtsk,
          :new.bp_prvsrfngtsk_prmn,
          :new.bp_ownr,
          :new.bp_prvsownr,
          :new.bp_prvssndr,
          :new.bp_prvsownrprmn,
          :new.bp_tnfr,
          :new.bp_prvstnfr,
          :new.bp_typ_sbty,
          :new.bp_id,
          :new.bp_las_act_tim,
          NULL,
          u_blr_plt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_blr_plt

     SET
        valid_to      = :new.bp_las_act_tim,
        bp_next_audid = u_blr_plt.CURRVAL
      WHERE
        bp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
27
</td>
<td>
THH_C4C
</td>
<td>
TRG_CBBS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CAREBEANBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CBBS_AUDITINSERT&quot; BEFORE INSERT ON T_CAREBEANBASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.cbbs_crtd IS NULL THEN 
    :new.cbbs_crtd := curr_date; 
  END IF; 

  IF :new.cbbs_las_act_tim IS NULL THEN 
    :new.cbbs_las_act_tim := curr_date; 
  END IF; 

  IF :new.cbbs_las_act IS NULL THEN 
    :new.cbbs_las_act := 1; 
  END IF; 

  IF :new.cbbs_obj_stt IS NULL THEN 
    :new.cbbs_obj_stt := 1; 
  END IF; 

  IF :new.cbbs_vers IS NULL THEN 
    :new.cbbs_vers := 0; 
  END IF; 

  IF :new.cbbs_vsbt IS NULL THEN 
    :new.cbbs_vsbt := 1001; 
  END IF; 

  IF :new.cbbs_las_act_by IS NULL THEN 
    :new.cbbs_las_act_by := 1; 
  END IF; 

  IF :new.cbbs_origcrtr IS NULL THEN 
    :new.cbbs_origcrtr := 1; 
  END IF; 

  IF :new.cbbs_origcrtrlogdin IS NULL THEN 
    :new.cbbs_origcrtrlogdin := 1; 
  END IF; 

  IF :new.cbbs_las_act_by_logdin IS NULL THEN 
    :new.cbbs_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_carebeanbase 
  ( 
   ccbn_the_brncact, 
   ccbn_amtn, 
   cbbs_typ_sbty, 
   cbbs_cstmflds, 
   ccbn_sentasmt, 
   ccbn_orig, 
   classtype, 
   cbbs_c4c_id, 
   cbbs_crtd, 
   cbbs_las_act, 
   cbbs_las_act_actrtyp, 
   cbbs_obj_stt, 
   cbbs_vers, 
   cbbs_vsbt, 
   cbbs_dltddt, 
   cbbs_las_act_by, 
   cbbs_origcrtr, 
   cbbs_origcrtrlogdin, 
   cbbs_las_act_by_logdin, 
   cbbs_univid, 
   cbbs_nam, 
   cbbs_prus, 
   cbbs_pvntif_dpctin__amnt, 
   cbbs_pvntif_dpctin__unit, 
   cbbs_pvntif_pdctin__amnt, 
   cbbs_pvntif_pdctin__unit, 
   cbbs_wlcmtxt, 
   cbbs_strtdt, 
   cbbs_vlty, 
   cbbs_strtdt_typ, 
   ccbn_ddlnblck_amnt, 
   ccbn_ddlnblck_unit, 
   ccbn_ddlnact, 
   ccbn_amtntyp, 
   ccbn_id, 
   cbte_frstatvd, 
   cbte_las_atvd, 
   cbte_las_dctd, 
   cbte_frstsbtdat, 
   cbte_las_sbtdat, 
   cbte_wkfwistcid, 
   cbte_cnv_id, 
   cbte_ownrchndflag, 
   cbte_ownrchndcnt, 
   cbte_dvtndt, 
   cbte_cmmt, 
   cbte_id, 
   cbte_las_dctdby, 
   cbte_frstatvdby, 
   cbte_las_atvdby, 
   cbte_ratnapvl, 
   cbte_apvl, 
   cbte_rcpttrkg, 
   cbte_la
s_sbtdby, 
   cbte_frstsbtdby, 
   cbte_rfngwkfwtsk, 
   cbte_prvsrfngtsk, 
   cbte_prvsrfngtsk_prmn, 
   cbte_ownr, 
   cbte_prvsownr, 
   cbte_prvssndr, 
   cbte_prvsownrprmn, 
   cbte_tnfr, 
   cbte_prvstnfr, 
   ccbn_carebeanfrma, 
   cbbs_id, 
   valid_from, 
   valid_to , 
   cbbs_audid, 
   cbbs_prev_audid, 
   cbbs_next_audid
  ) 
  VALUES 
  ( 
   :new.ccbn_the_brncact,
   :new.ccbn_amtn,
   :new.cbbs_typ_sbty,
   :new.cbbs_cstmflds,
   :new.ccbn_sentasmt,
   :new.ccbn_orig,
   :new.classtype,
   :new.cbbs_c4c_id,
   :new.cbbs_crtd,
   :new.cbbs_las_act,
   :new.cbbs_las_act_actrtyp,
   :new.cbbs_obj_stt,
   :new.cbbs_vers,
   :new.cbbs_vsbt,
   :new.cbbs_dltddt,
   :new.cbbs_las_act_by,
   :new.cbbs_origcrtr,
   :new.cbbs_origcrtrlogdin,
   :new.cbbs_las_act_by_logdin,
   :new.cbbs_univid,
   :new.cbbs_nam,
   :new.cbbs_prus,
   :new.cbbs_pvntif_dpctin__amnt,
   :new.cbbs_pvntif_dpctin__unit,
   :new.cbbs_pvntif_pdctin__amnt,
   :new.cbbs_pvntif_pdctin__unit,
   :new.cbbs_wlcmtxt,
   :new.cbbs_strtdt,
   :new.cbbs_vlty,
   :new.cbbs_strtdt_typ,
   :new.ccbn_ddlnblck_amnt,
   :new.ccbn_ddlnblck_unit,
   :new.ccbn_ddlnact,
   :new.ccbn_amtntyp,
   :new.ccbn_id,
   :new.cbte_frstatvd,
   :new.cbte_las_atvd,
   :new.cbte_las_dctd,
   :new.cbte_frstsbtdat,
   :new.cbte_las_sbtdat,
   :new.cbte_wkfwistcid,
   :new.cbte_cnv_id,
   :new.cbte_ownrchndflag,
   :new.cbte_ownrchndcnt,
   :new.cbte_dvtndt,
   :new.cbte_cmmt,
   :new.cbte_id,
   :new.cbte_las_dctdby,
   :new.cbte_frstatvdby,
   :new.cbte_las_atvdby,
   :new.cbte_ratnapvl,
   :new.cbte_apvl,
   :new.cbte_rcpttrkg,
   :new.cbte_las_sbtdby,
   :new.cbte_frstsbtdby,
   :new.cbte_rfngwkfwtsk,
   :new.cbte_prvsrfngtsk,
   :new.cbte_prvsrfngtsk_prmn,
   :new.cbte_ownr,
   :new.cbte_prvsownr,
   :new.cbte_prvssndr,
   :new.cbte_prvsownrprmn,
   :new.cbte_tnfr,
   :new.cbte_prvstnfr,
   :new.ccbn_carebeanfrma, 
   :new.cbbs_id, 
   :new.cbbs_las_act_tim, 
   NULL, 
   u_carebeanbase.NEXTVAL, 
   NULL, 
   NULL

 );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
28
</td>
<td>
THH_C4C
</td>
<td>
TRG_CBBS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CAREBEANBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cbbs_auditupdate BEFORE
  UPDATE
    ON T_CAREBEANBASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cbbs_audid
      INTO
        last_audid
      FROM
        a_carebeanbase
      WHERE
        cbbs_id            = :old.cbbs_id
      AND cbbs_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cbbs_las_act_tim = :new.cbbs_las_act_tim THEN
      UPDATE
        a_carebeanbase
      SET
        cbbs_typ_sbty            = :new.cbbs_typ_sbty,
        cbbs_cstmflds            = :new.cbbs_cstmflds,
        ccbn_sentasmt            = :new.ccbn_sentasmt,
        ccbn_orig                = :new.ccbn_orig,
        classtype                = :new.classtype,
        cbbs_c4c_id              = :new.cbbs_c4c_id,
        cbbs_crtd                = :new.cbbs_crtd,
        cbbs_las_act             = :new.cbbs_las_act,
        cbbs_las_act_actrtyp     = :new.cbbs_las_act_actrtyp,
        cbbs_obj_stt             = :new.cbbs_obj_stt,
        cbbs_vers                = :new.cbbs_vers,
        cbbs_vsbt                = :new.cbbs_vsbt,
        cbbs_dltddt              = :new.cbbs_dltddt,
        cbbs_las_act_by          = :new.cbbs_las_act_by,
        cbbs_origcrtr            = :new.cbbs_origcrtr,
        cbbs_origcrtrlogdin      = :new.cbbs_origcrtrlogdin,
        cbbs_las_act_by_logdin   = :new.cbbs_las_act_by_logdin,
        cbbs_univid              = :new.cbbs_univid,
        cbbs_nam                 = :new.cbbs_nam,
        cbbs_prus                = :new.cbbs_prus,
        cbbs_pvntif_dpctin__amnt = :new.cbbs_pvntif_dpctin__amnt,
        cbbs_pvntif_dpctin__unit = :new.cbbs_pvntif_dpctin__unit,
        cbbs_pvntif_pdctin__amnt = :new.cbbs_pvntif_pdctin__amnt,
        cbbs_pvntif_pdctin__unit = :new.cbbs_pvntif_pdctin__unit,
        cbbs_wlcmtxt             = :new.cbbs_wlcmtxt,

        cbbs_strtdt              = :new.cbbs_strtdt,
        cbbs_vlty                = :new.cbbs_vlty,
        cbbs_strtdt_typ          = :new.cbbs_strtdt_typ,
        ccbn_ddlnblck_amnt       = :new.ccbn_ddlnblck_amnt,
        ccbn_ddlnblck_unit       = :new.ccbn_ddlnblck_unit,
        ccbn_ddlnact             = :new.ccbn_ddlnact,
        ccbn_amtntyp             = :new.ccbn_amtntyp,
        ccbn_id                  = :new.ccbn_id,
        cbte_frstatvd            = :new.cbte_frstatvd,
        cbte_las_atvd            = :new.cbte_las_atvd,
        cbte_las_dctd            = :new.cbte_las_dctd,
        cbte_frstsbtdat          = :new.cbte_frstsbtdat,
        cbte_las_sbtdat          = :new.cbte_las_sbtdat,
        cbte_wkfwistcid          = :new.cbte_wkfwistcid,
        cbte_cnv_id              = :new.cbte_cnv_id,
        cbte_ownrchndflag        = :new.cbte_ownrchndflag,
        cbte_ownrchndcnt         = :new.cbte_ownrchndcnt,
        cbte_dvtndt              = :new.cbte_dvtndt,
        cbte_cmmt                = :new.cbte_cmmt,
        cbte_id                  = :new.cbte_id,
        cbte_las_dctdby          = :new.cbte_las_dctdby,
        cbte_frstatvdby          = :new.cbte_frstatvdby,
        cbte_las_atvdby          = :new.cbte_las_atvdby,
        cbte_ratnapvl            = :new.cbte_ratnapvl,
        cbte_apvl                = :new.cbte_apvl,
        cbte_rcpttrkg            = :new.cbte_rcpttrkg,
        cbte_las_sbtdby          = :new.cbte_las_sbtdby,
        cbte_frstsbtdby          = :new.cbte_frstsbtdby,
        cbte_rfngwkfwtsk         = :new.cbte_rfngwkfwtsk,
        cbte_prvsrfngtsk         = :new.cbte_prvsrfngtsk,
        cbte_prvsrfngtsk_prmn    = :new.cbte_prvsrfngtsk_prmn,
        cbte_ownr                = :new.cbte_ownr,
        cbte_prvsownr            = :new.cbte_prvsownr,
        cbte_prvssndr            = :new.cbte_prvssndr,
        cbte_prvsownrprmn        = :new.cbte_prvsownrprmn,
        cbte_tnfr                = :new.cbte_tnfr,

  cbte_prvstnfr            = :new.cbte_prvstnfr,
        ccbn_carebeanfrma        = :new.ccbn_carebeanfrma,
        ccbn_the_brncact         = :new.ccbn_the_brncact,
        ccbn_amtn                = :new.ccbn_amtn
      WHERE
        cbbs_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_carebeanbase
        (
          cbbs_typ_sbty,
          cbbs_cstmflds,
          ccbn_sentasmt,
          ccbn_orig,
          classtype,
          cbbs_c4c_id,
          cbbs_crtd,
          cbbs_las_act,
          cbbs_las_act_actrtyp,
          cbbs_obj_stt,
          cbbs_vers,
          cbbs_vsbt,
          cbbs_dltddt,
          cbbs_las_act_by,
          cbbs_origcrtr,
          cbbs_origcrtrlogdin,
          cbbs_las_act_by_logdin,
          cbbs_univid,
          cbbs_nam,
          cbbs_prus,
          cbbs_pvntif_dpctin__amnt,
          cbbs_pvntif_dpctin__unit,
          cbbs_pvntif_pdctin__amnt,
          cbbs_pvntif_pdctin__unit,
          cbbs_wlcmtxt,
          cbbs_strtdt,
          cbbs_vlty,
          cbbs_strtdt_typ,
          ccbn_ddlnblck_amnt,
          ccbn_ddlnblck_unit,
          ccbn_ddlnact,
          ccbn_amtntyp,
          ccbn_id,
          cbte_frstatvd,
          cbte_las_atvd,
          cbte_las_dctd,
          cbte_frstsbtdat,
          cbte_las_sbtdat,
          cbte_wkfwistcid,
          cbte_cnv_id,
          cbte_ownrchndflag,
          cbte_ownrchndcnt,
          cbte_dvtndt,
          cbte_cmmt,
          cbte_id,
          cbte_las_dctdby,
          cbte_frstatvdby,
          cbte_las_atvdby,
          cbte_ratnapvl,
          cbte_apvl,
          cbte_rcpttrkg,
          cbte_las_sbtdby,
          cbte_frstsbtdby,
          cbte_rfngwkfwtsk,
          cbte_prvsrfngtsk,
          cbte_prvsrfngtsk_prmn,
          cbte_ownr,
          cbte_prvsownr,
          cbte_prvssndr,
          cbte_prvsownrprmn,

          cbte_tnfr,
          cbte_prvstnfr,
          ccbn_carebeanfrma,
          ccbn_the_brncact,
          ccbn_amtn,
          cbbs_id,
          valid_from,
          valid_to,
          cbbs_audid,
          cbbs_prev_audid,
          cbbs_next_audid
        )
        VALUES
        (
          :new.cbbs_typ_sbty,
          :new.cbbs_cstmflds,
          :new.ccbn_sentasmt,
          :new.ccbn_orig,
          :new.classtype,
          :new.cbbs_c4c_id,
          :new.cbbs_crtd,
          :new.cbbs_las_act,
          :new.cbbs_las_act_actrtyp,
          :new.cbbs_obj_stt,
          :new.cbbs_vers,
          :new.cbbs_vsbt,
          :new.cbbs_dltddt,
          :new.cbbs_las_act_by,
          :new.cbbs_origcrtr,
          :new.cbbs_origcrtrlogdin,
          :new.cbbs_las_act_by_logdin,
          :new.cbbs_univid,
          :new.cbbs_nam,
          :new.cbbs_prus,
          :new.cbbs_pvntif_dpctin__amnt,
          :new.cbbs_pvntif_dpctin__unit,
          :new.cbbs_pvntif_pdctin__amnt,
          :new.cbbs_pvntif_pdctin__unit,
          :new.cbbs_wlcmtxt,
          :new.cbbs_strtdt,
          :new.cbbs_vlty,
          :new.cbbs_strtdt_typ,
          :new.ccbn_ddlnblck_amnt,
          :new.ccbn_ddlnblck_unit,
          :new.ccbn_ddlnact,
          :new.ccbn_amtntyp,
          :new.ccbn_id,
          :new.cbte_frstatvd,
          :new.cbte_las_atvd,
          :new.cbte_las_dctd,
          :new.cbte_frstsbtdat,
          :new.cbte_las_sbtdat,
          :new.cbte_wkfwistcid,
          :new.cbte_cnv_id,
          :new.cbte_ownrchndflag,
          :new.cbte_ownrchndcnt,
          :new.cbte_dvtndt,
          :new.cbte_cmmt,
          :new.cbte_id,
          :new.cbte_las_dctdby,
          :new.cbte_frstatvdby,
          :new.cbte_las_atvdby,
          :new.cbte_ratnapvl,
          :new.cbte_apvl,
          :new.cbte_rcpttrkg,
          :new.cbte_las_sbtdby,
          :new.cbte_frstsbtdby,
          :new.cbte_rfngwkfwtsk,
          :new.cbte_prvsrfngtsk,
          :new.c
bte_prvsrfngtsk_prmn,
          :new.cbte_ownr,
          :new.cbte_prvsownr,
          :new.cbte_prvssndr,
          :new.cbte_prvsownrprmn,
          :new.cbte_tnfr,
          :new.cbte_prvstnfr,
          :new.ccbn_carebeanfrma,
          :new.ccbn_the_brncact,
          :new.ccbn_amtn,
          :new.cbbs_id,
          :new.cbbs_las_act_tim,
          NULL,
          u_carebeanbase.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_carebeanbase
      SET
        valid_to        = :new.cbbs_las_act_tim,
        cbbs_next_audid = u_carebeanbase.CURRVAL
      WHERE
        cbbs_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
29
</td>
<td>
THH_C4C
</td>
<td>
TRG_CBRC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CAREBEANRCTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CBRC_AUDITINSERT&quot; BEFORE INSERT ON T_CAREBEANRCTN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.cbrc_crtd IS NULL THEN 
    :new.cbrc_crtd := curr_date; 
  END IF; 

  IF :new.cbrc_las_act_tim IS NULL THEN 
    :new.cbrc_las_act_tim := curr_date; 
  END IF; 

  IF :new.cbrc_las_act IS NULL THEN 
    :new.cbrc_las_act := 1; 
  END IF; 

  IF :new.cbrc_obj_stt IS NULL THEN 
    :new.cbrc_obj_stt := 1; 
  END IF; 

  IF :new.cbrc_vers IS NULL THEN 
    :new.cbrc_vers := 0; 
  END IF; 

  IF :new.cbrc_vsbt IS NULL THEN 
    :new.cbrc_vsbt := 1001; 
  END IF; 

  IF :new.cbrc_las_act_by IS NULL THEN 
    :new.cbrc_las_act_by := 1; 
  END IF; 

  IF :new.cbrc_origcrtr IS NULL THEN 
    :new.cbrc_origcrtr := 1; 
  END IF; 

  IF :new.cbrc_origcrtrlogdin IS NULL THEN 
    :new.cbrc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.cbrc_las_act_by_logdin IS NULL THEN 
    :new.cbrc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_carebeanrctn 
  ( 
   classtype, 
   cbrc_c4c_id, 
   cbrc_crtd, 
   cbrc_las_act, 
   cbrc_las_act_actrtyp, 
   cbrc_obj_stt, 
   cbrc_vers, 
   cbrc_vsbt, 
   cbrc_dltddt, 
   cbrc_las_act_by, 
   cbrc_origcrtr, 
   cbrc_origcrtrlogdin, 
   cbrc_las_act_by_logdin, 
   cbrc_univid, 
   cbrc_carebean, 
   cbrc_memb, 
   cbrc_id, 
   valid_from, 
   valid_to , 
   cbrc_audid, 
   cbrc_prev_audid, 
   cbrc_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.cbrc_c4c_id,
   :new.cbrc_crtd,
   :new.cbrc_las_act,
   :new.cbrc_las_act_actrtyp,
   :new.cbrc_obj_stt,
   :new.cbrc_vers,
   :new.cbrc_vsbt,
   :new.cbrc_dltddt,
   :new.cbrc_las_act_by,
   :new.cbrc_origcrtr,
   :new.cbrc_origcrtrlogdin,
   :new.cbrc_las_act_by_logdin,
   :new.cbrc_univid,
   :new.cbrc_carebean,
   :new.cbrc_memb, 
   :new.cbrc_id, 
   :new.cbrc_las_act_tim, 
   NULL, 
   u_carebeanrctn.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
30
</td>
<td>
THH_C4C
</td>
<td>
TRG_CBRC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CAREBEANRCTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cbrc_auditupdate BEFORE
  UPDATE
    ON T_CAREBEANRCTN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cbrc_audid
      INTO
        last_audid
      FROM
        a_carebeanrctn
      WHERE
        cbrc_id            = :old.cbrc_id
      AND cbrc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cbrc_las_act_tim = :new.cbrc_las_act_tim THEN
      UPDATE
        a_carebeanrctn
      SET
        classtype              = :new.classtype,
        cbrc_c4c_id            = :new.cbrc_c4c_id,
        cbrc_crtd              = :new.cbrc_crtd,
        cbrc_las_act           = :new.cbrc_las_act,
        cbrc_las_act_actrtyp   = :new.cbrc_las_act_actrtyp,
        cbrc_obj_stt           = :new.cbrc_obj_stt,
        cbrc_vers              = :new.cbrc_vers,
        cbrc_vsbt              = :new.cbrc_vsbt,
        cbrc_dltddt            = :new.cbrc_dltddt,
        cbrc_las_act_by        = :new.cbrc_las_act_by,
        cbrc_origcrtr          = :new.cbrc_origcrtr,
        cbrc_origcrtrlogdin    = :new.cbrc_origcrtrlogdin,
        cbrc_las_act_by_logdin = :new.cbrc_las_act_by_logdin,
        cbrc_univid            = :new.cbrc_univid,
        cbrc_carebean          = :new.cbrc_carebean,
        cbrc_memb              = :new.cbrc_memb
      WHERE
        cbrc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_carebeanrctn
        (
          classtype,
          cbrc_c4c_id,
          cbrc_crtd,
          cbrc_las_act,
          cbrc_las_act_actrtyp,
          cbrc_obj_stt,
          cbrc_vers,
          cbrc_vsbt,
          cbrc_dltddt,
          cbrc_las_act_by,
          cbrc_origcrtr,
          cbrc_origcrtrlogdin,
          cbrc_las_act_by_logdi
n,
          cbrc_univid,
          cbrc_carebean,
          cbrc_memb,
          cbrc_id,
          valid_from,
          valid_to,
          cbrc_audid,
          cbrc_prev_audid,
          cbrc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.cbrc_c4c_id,
          :new.cbrc_crtd,
          :new.cbrc_las_act,
          :new.cbrc_las_act_actrtyp,
          :new.cbrc_obj_stt,
          :new.cbrc_vers,
          :new.cbrc_vsbt,
          :new.cbrc_dltddt,
          :new.cbrc_las_act_by,
          :new.cbrc_origcrtr,
          :new.cbrc_origcrtrlogdin,
          :new.cbrc_las_act_by_logdin,
          :new.cbrc_univid,
          :new.cbrc_carebean,
          :new.cbrc_memb,
          :new.cbrc_id,
          :new.cbrc_las_act_tim,
          NULL,
          u_carebeanrctn.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_carebeanrctn
      SET
        valid_to        = :new.cbrc_las_act_tim,
        cbrc_next_audid = u_carebeanrctn.CURRVAL
      WHERE
        cbrc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
31
</td>
<td>
THH_C4C
</td>
<td>
TRG_CAREPLAN
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CAREPLAN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_careplan BEFORE INSERT OR UPDATE ON T_CAREPLAN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.cp_crtd IS NULL THEN
    :new.cp_crtd := curr_date;
  END IF;
  IF :new.cp_las_act_tim IS NULL THEN
    :new.cp_las_act_tim := curr_date;
  END IF;
  IF :new.cp_obj_stt IS NULL THEN
    :new.cp_obj_stt := 1;
  END IF;
  IF :new.cp_vers IS NULL THEN
    :new.cp_vers := 0;
  END IF;
  IF :new.cp_vsbt IS NULL THEN
    :new.cp_vsbt := 1001;
  END IF;
  IF :new.cp_origcrtr IS NULL THEN
    :new.cp_origcrtr := 1;
  END IF;
  IF :new.cp_origcrtrlogdin IS NULL THEN
    :new.cp_origcrtrlogdin := 1;
  END IF;
  IF :new.cp_las_act_by_logdin IS NULL THEN
    :new.cp_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_careplan
  ( cp_ID,
   CLASSTYPE,
   cp_C4C_ID,
   cp_CRTD,
   cp_LAS_ACT_TIM,
   cp_OBJ_STT,
   cp_VERS,
   cp_VSBT,
   cp_DLTDT,
   cp_LAS_ACT_BY,
   cp_ORIGCRTR,
   cp_ORIGCRTRLOGDIN,
   cp_LAS_ACT_BY_LOGDIN,
   cp_UNIVID,
   CP_STATUS,
   CP_NAME,
   CP_START,
	CP_END,
	T_CM_BASEBASE_CMBB_ID,
   valid_from,
   valid_to ,
   cp_audid,
   cp_prev_audid,
   cp_next_audid )
  VALUES
  (:new.cp_ID,
   :new.CLASSTYPE,
   :new.cp_C4C_ID,
   :new.cp_CRTD,
   :new.cp_LAS_ACT_TIM,
   :new.cp_OBJ_STT,
   :new.cp_VERS,
   :new.cp_VSBT,
   :new.cp_DLTDT,
   :new.cp_LAS_ACT_BY,
   :new.cp_ORIGCRTR,
   :new.cp_ORIGCRTRLOGDIN,
   :new.cp_LAS_ACT_BY_LOGDIN,
   :new.cp_UNIVID,
   :new.CP_STATUS,
   :new.CP_NAME,
   :new.CP_START,
	:new.CP_END,
	:new.T_CM_BASEBASE_CMBB_ID,
   :new.cp_las_act_tim,
   NULL,
   u_careplan.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT cp_audid INTO last_audid FROM a_careplan
      WHERE cp_id =  :old.cp_id AND cp_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.cp_las_act_tim = :new.cp_las_act_tim THEN
    UPDATE a_careplan
     SET cp_id                 = :new.cp_
id,
         classtype             = :new.classtype,
         cp_c4c_id             = :new.cp_c4c_id,
         cp_crtd               = :new.cp_crtd,
         cp_las_act_tim		    = :new.cp_las_act_tim,
         cp_obj_stt            = :new.cp_obj_stt,
         cp_vers               = :new.cp_vers,
         cp_vsbt               = :new.cp_vsbt,
         cp_dltdt              = :new.cp_dltdt,
         cp_LAS_ACT_BY         = :new.cp_LAS_ACT_BY,
         cp_origcrtr           = :new.cp_origcrtr,
         cp_origcrtrlogdin     = :new.cp_origcrtrlogdin,
         cp_las_act_by_logdin  = :new.cp_las_act_by_logdin,
         cp_UNIVID             = :new.cp_univid,
         cp_STATUS             = :new.CP_STATUS,
         CP_NAME               = :new.CP_NAME,
         CP_START              = :new.CP_START,
			CP_END                = :new.CP_END,
			T_CM_BASEBASE_CMBB_ID = :new.T_CM_BASEBASE_CMBB_ID

      WHERE cp_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_careplan
  ( cp_ID,
   CLASSTYPE,
   cp_C4C_ID,
   cp_CRTD,
   cp_LAS_ACT_TIM,
   cp_OBJ_STT,
   cp_VERS,
   cp_VSBT,
   cp_DLTDT,
   cp_LAS_ACT_BY,
   cp_ORIGCRTR,
   cp_ORIGCRTRLOGDIN,
   cp_LAS_ACT_BY_LOGDIN,
   cp_UNIVID,
   CP_STATUS,
   CP_NAME,
   CP_START,
	CP_END,
	T_CM_BASEBASE_CMBB_ID,
   valid_from,
   valid_to ,
   cp_audid,
   cp_prev_audid,
   cp_next_audid )
  VALUES
  (:new.cp_ID,
   :new.CLASSTYPE,
   :new.cp_C4C_ID,
   :new.cp_CRTD,
   :new.cp_LAS_ACT_TIM,
   :new.cp_OBJ_STT,
   :new.cp_VERS,
   :new.cp_VSBT,
   :new.cp_DLTDT,
   :new.cp_LAS_ACT_BY,
   :new.cp_ORIGCRTR,
   :new.cp_ORIGCRTRLOGDIN,
   :new.cp_LAS_ACT_BY_LOGDIN,
   :new.cp_UNIVID,
   :new.CP_STATUS,
   :new.CP_NAME,
   :new.CP_START,
	:new.CP_END,
	:new.T_CM_BASEBASE_CMBB_ID,
   :new.cp_las_act_tim,
   NULL,
   u_careplan.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime

    and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_careplan
      SET
        valid_to = :new.cp_las_act_tim,
        cp_next_audid = u_careplan.CURRVAL
      WHERE cp_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
32
</td>
<td>
THH_C4C
</td>
<td>
TRG_CFGR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CFRDREVW
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CFGR_AUDITINSERT&quot; BEFORE INSERT ON T_CFRDREVW FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.cfgr_crtd IS NULL THEN 
    :new.cfgr_crtd := curr_date; 
  END IF; 

  IF :new.cfgr_las_act_tim IS NULL THEN 
    :new.cfgr_las_act_tim := curr_date; 
  END IF; 

  IF :new.cfgr_las_act IS NULL THEN 
    :new.cfgr_las_act := 1; 
  END IF; 

  IF :new.cfgr_obj_stt IS NULL THEN 
    :new.cfgr_obj_stt := 1; 
  END IF; 

  IF :new.cfgr_vers IS NULL THEN 
    :new.cfgr_vers := 0; 
  END IF; 

  IF :new.cfgr_vsbt IS NULL THEN 
    :new.cfgr_vsbt := 1001; 
  END IF; 

  IF :new.cfgr_las_act_by IS NULL THEN 
    :new.cfgr_las_act_by := 1; 
  END IF; 

  IF :new.cfgr_origcrtr IS NULL THEN 
    :new.cfgr_origcrtr := 1; 
  END IF; 

  IF :new.cfgr_origcrtrlogdin IS NULL THEN 
    :new.cfgr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.cfgr_las_act_by_logdin IS NULL THEN 
    :new.cfgr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cfrdrevw 
  ( 
   classtype, 
   cfgr_c4c_id, 
   cfgr_crtd, 
   cfgr_las_act, 
   cfgr_las_act_actrtyp, 
   cfgr_obj_stt, 
   cfgr_vers, 
   cfgr_vsbt, 
   cfgr_dltddt, 
   cfgr_las_act_by, 
   cfgr_origcrtr, 
   cfgr_origcrtrlogdin, 
   cfgr_las_act_by_logdin, 
   cfgr_univid, 
   cfgr_ddlnin_unts, 
   cfgr_ddlnunit, 
   cfgr_ddlndt, 
   cfgr_rtng, 
   cfgr_cmmt, 
   cfgr_rcpt, 
   cfgr_resn, 
   cfgr_amtn, 
   cfgr_id, 
   valid_from, 
   valid_to , 
   cfgr_audid, 
   cfgr_prev_audid, 
   cfgr_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.cfgr_c4c_id,
   :new.cfgr_crtd,
   :new.cfgr_las_act,
   :new.cfgr_las_act_actrtyp,
   :new.cfgr_obj_stt,
   :new.cfgr_vers,
   :new.cfgr_vsbt,
   :new.cfgr_dltddt,
   :new.cfgr_las_act_by,
   :new.cfgr_origcrtr,
   :new.cfgr_origcrtrlogdin,
   :new.cfgr_las_act_by_logdin,
   :new.cfgr_univid,
   :new.cfgr_ddlnin_unts,
   :new.cfgr_ddlnunit,
   :new.cfgr_ddlndt,
   :new.cfgr_rtng,
   :new.cfgr_cmmt,
   :new.cfgr_rcpt,
   :new.cfgr_resn,
   :new.cfgr_amtn, 
   :new.cfgr_id, 
   :new.cfgr_las_act_tim
, 
   NULL, 
   u_cfrdrevw.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
33
</td>
<td>
THH_C4C
</td>
<td>
TRG_CFGR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CFRDREVW
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cfgr_auditupdate BEFORE
  UPDATE
    ON T_CFRDREVW FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cfgr_audid
      INTO
        last_audid
      FROM
        a_cfrdrevw
      WHERE
        cfgr_id            = :old.cfgr_id
      AND cfgr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cfgr_las_act_tim = :new.cfgr_las_act_tim THEN
      UPDATE
        a_cfrdrevw
      SET
        cfgr_rtng              = :new.cfgr_rtng,
        cfgr_cmmt              = :new.cfgr_cmmt,
        cfgr_rcpt              = :new.cfgr_rcpt,
        cfgr_resn              = :new.cfgr_resn,
        cfgr_amtn              = :new.cfgr_amtn,
        classtype              = :new.classtype,
        cfgr_c4c_id            = :new.cfgr_c4c_id,
        cfgr_crtd              = :new.cfgr_crtd,
        cfgr_las_act           = :new.cfgr_las_act,
        cfgr_las_act_actrtyp   = :new.cfgr_las_act_actrtyp,
        cfgr_obj_stt           = :new.cfgr_obj_stt,
        cfgr_vers              = :new.cfgr_vers,
        cfgr_vsbt              = :new.cfgr_vsbt,
        cfgr_dltddt            = :new.cfgr_dltddt,
        cfgr_las_act_by        = :new.cfgr_las_act_by,
        cfgr_origcrtr          = :new.cfgr_origcrtr,
        cfgr_origcrtrlogdin    = :new.cfgr_origcrtrlogdin,
        cfgr_las_act_by_logdin = :new.cfgr_las_act_by_logdin,
        cfgr_univid            = :new.cfgr_univid,
        cfgr_ddlnin_unts       = :new.cfgr_ddlnin_unts,
        cfgr_ddlnunit          = :new.cfgr_ddlnunit,
        cfgr_ddlndt            = :new.cfgr_ddlndt
      WHERE
        cfgr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cfrdrevw
        (
          cfgr_rtng,
          cf
gr_cmmt,
          cfgr_rcpt,
          cfgr_resn,
          cfgr_amtn,
          classtype,
          cfgr_c4c_id,
          cfgr_crtd,
          cfgr_las_act,
          cfgr_las_act_actrtyp,
          cfgr_obj_stt,
          cfgr_vers,
          cfgr_vsbt,
          cfgr_dltddt,
          cfgr_las_act_by,
          cfgr_origcrtr,
          cfgr_origcrtrlogdin,
          cfgr_las_act_by_logdin,
          cfgr_univid,
          cfgr_ddlnin_unts,
          cfgr_ddlnunit,
          cfgr_ddlndt,
          cfgr_id,
          valid_from,
          valid_to,
          cfgr_audid,
          cfgr_prev_audid,
          cfgr_next_audid
        )
        VALUES
        (
          :new.cfgr_rtng,
          :new.cfgr_cmmt,
          :new.cfgr_rcpt,
          :new.cfgr_resn,
          :new.cfgr_amtn,
          :new.classtype,
          :new.cfgr_c4c_id,
          :new.cfgr_crtd,
          :new.cfgr_las_act,
          :new.cfgr_las_act_actrtyp,
          :new.cfgr_obj_stt,
          :new.cfgr_vers,
          :new.cfgr_vsbt,
          :new.cfgr_dltddt,
          :new.cfgr_las_act_by,
          :new.cfgr_origcrtr,
          :new.cfgr_origcrtrlogdin,
          :new.cfgr_las_act_by_logdin,
          :new.cfgr_univid,
          :new.cfgr_ddlnin_unts,
          :new.cfgr_ddlnunit,
          :new.cfgr_ddlndt,
          :new.cfgr_id,
          :new.cfgr_las_act_tim,
          NULL,
          u_cfrdrevw.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cfrdrevw
      SET
        valid_to        = :new.cfgr_las_act_tim,
        cfgr_next_audid = u_cfrdrevw.CURRVAL
      WHERE
        cfgr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
34
</td>
<td>
THH_C4C
</td>
<td>
TRG_CRTS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CFTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CRTS_AUDITINSERT&quot; BEFORE INSERT ON T_CFTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.crts_crtd IS NULL THEN 
    :new.crts_crtd := curr_date; 
  END IF; 

  IF :new.crts_las_act_tim IS NULL THEN 
    :new.crts_las_act_tim := curr_date; 
  END IF; 

  IF :new.crts_las_act IS NULL THEN 
    :new.crts_las_act := 1; 
  END IF; 

  IF :new.crts_obj_stt IS NULL THEN 
    :new.crts_obj_stt := 1; 
  END IF; 

  IF :new.crts_vers IS NULL THEN 
    :new.crts_vers := 0; 
  END IF; 

  IF :new.crts_vsbt IS NULL THEN 
    :new.crts_vsbt := 1001; 
  END IF; 

  IF :new.crts_las_act_by IS NULL THEN 
    :new.crts_las_act_by := 1; 
  END IF; 

  IF :new.crts_origcrtr IS NULL THEN 
    :new.crts_origcrtr := 1; 
  END IF; 

  IF :new.crts_origcrtrlogdin IS NULL THEN 
    :new.crts_origcrtrlogdin := 1; 
  END IF; 

  IF :new.crts_las_act_by_logdin IS NULL THEN 
    :new.crts_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cfts 
  ( 
   classtype, 
   crts_c4c_id, 
   crts_crtd, 
   crts_las_act, 
   crts_las_act_actrtyp, 
   crts_obj_stt, 
   crts_vers, 
   crts_vsbt, 
   crts_dltddt, 
   crts_las_act_by, 
   crts_origcrtr, 
   crts_origcrtrlogdin, 
   crts_las_act_by_logdin, 
   crts_univid, 
   crts_dscn, 
   crts_payr, 
   crts_pvdr, 
   crts_id, 
   valid_from, 
   valid_to , 
   crts_audid, 
   crts_prev_audid, 
   crts_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.crts_c4c_id,
   :new.crts_crtd,
   :new.crts_las_act,
   :new.crts_las_act_actrtyp,
   :new.crts_obj_stt,
   :new.crts_vers,
   :new.crts_vsbt,
   :new.crts_dltddt,
   :new.crts_las_act_by,
   :new.crts_origcrtr,
   :new.crts_origcrtrlogdin,
   :new.crts_las_act_by_logdin,
   :new.crts_univid,
   :new.crts_dscn,
   :new.crts_payr,
   :new.crts_pvdr, 
   :new.crts_id, 
   :new.crts_las_act_tim, 
   NULL, 
   u_cfts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
35
</td>
<td>
THH_C4C
</td>
<td>
TRG_CRTS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CFTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_crts_auditupdate BEFORE
  UPDATE
    ON T_CFTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        crts_audid
      INTO
        last_audid
      FROM
        a_cfts
      WHERE
        crts_id            = :old.crts_id
      AND crts_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.crts_las_act_tim = :new.crts_las_act_tim THEN
      UPDATE
        a_cfts
      SET
        classtype              = :new.classtype,
        crts_c4c_id            = :new.crts_c4c_id,
        crts_crtd              = :new.crts_crtd,
        crts_las_act           = :new.crts_las_act,
        crts_las_act_actrtyp   = :new.crts_las_act_actrtyp,
        crts_obj_stt           = :new.crts_obj_stt,
        crts_vers              = :new.crts_vers,
        crts_vsbt              = :new.crts_vsbt,
        crts_dltddt            = :new.crts_dltddt,
        crts_las_act_by        = :new.crts_las_act_by,
        crts_origcrtr          = :new.crts_origcrtr,
        crts_origcrtrlogdin    = :new.crts_origcrtrlogdin,
        crts_las_act_by_logdin = :new.crts_las_act_by_logdin,
        crts_univid            = :new.crts_univid,
        crts_dscn              = :new.crts_dscn,
        crts_payr              = :new.crts_payr,
        crts_pvdr              = :new.crts_pvdr
      WHERE
        crts_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cfts
        (
          classtype,
          crts_c4c_id,
          crts_crtd,
          crts_las_act,
          crts_las_act_actrtyp,
          crts_obj_stt,
          crts_vers,
          crts_vsbt,
          crts_dltddt,
          crts_las_act_by,
          crts_origcrtr,
          crts_origcrtrlogdin,

crts_las_act_by_logdin,
          crts_univid,
          crts_dscn,
          crts_payr,
          crts_pvdr,
          crts_id,
          valid_from,
          valid_to,
          crts_audid,
          crts_prev_audid,
          crts_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.crts_c4c_id,
          :new.crts_crtd,
          :new.crts_las_act,
          :new.crts_las_act_actrtyp,
          :new.crts_obj_stt,
          :new.crts_vers,
          :new.crts_vsbt,
          :new.crts_dltddt,
          :new.crts_las_act_by,
          :new.crts_origcrtr,
          :new.crts_origcrtrlogdin,
          :new.crts_las_act_by_logdin,
          :new.crts_univid,
          :new.crts_dscn,
          :new.crts_payr,
          :new.crts_pvdr,
          :new.crts_id,
          :new.crts_las_act_tim,
          NULL,
          u_cfts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cfts
      SET
        valid_to        = :new.crts_las_act_tim,
        crts_next_audid = u_cfts.CURRVAL
      WHERE
        crts_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
36
</td>
<td>
THH_C4C
</td>
<td>
TRG_CMBB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_BASEBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cmbb_auditinsert BEFORE INSERT ON T_CM_BASEBASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;
  IF :new.cmbb_crtd IS NULL THEN
    :new.cmbb_crtd := curr_date;
  END IF;
  IF :new.cmbb_las_act_tim IS NULL THEN
    :new.cmbb_las_act_tim := curr_date;
  END IF;
  IF :new.cmbb_las_act IS NULL THEN
    :new.cmbb_las_act := 1;
  END IF;
  IF :new.cmbb_obj_stt IS NULL THEN
    :new.cmbb_obj_stt := 1;
  END IF;
  IF :new.cmbb_vers IS NULL THEN
    :new.cmbb_vers := 0;
  END IF;
  IF :new.cmbb_vsbt IS NULL THEN
    :new.cmbb_vsbt := 1001;
  END IF;
  IF :new.cmbb_las_act_by IS NULL THEN
    :new.cmbb_las_act_by := 1;
  END IF;
  IF :new.cmbb_origcrtr IS NULL THEN
    :new.cmbb_origcrtr := 1;
  END IF;
  IF :new.cmbb_origcrtrlogdin IS NULL THEN
    :new.cmbb_origcrtrlogdin := 1;
  END IF;
  IF :new.cmbb_las_act_by_logdin IS NULL THEN
    :new.cmbb_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_cm_basebase
  (
   cmpq_ddlndt__dt,
   cmpq_ddlndt__tim_in_dy,
   cmpq_ddlntim_blck,
   cmpq_ddlntim_blckunittyp,
   cmpq_is_ok_aft_ddln,
   cmpq_id,
   cmpr_clngcmmt,
   cmpr_reoncmmt,
   cmpr_ackgddln_dt,
   cmpr_ackgddln_tim_in_dy,
   cmpr_las_clsd,
   cmpr_las_rpnd,
   cmpr_wkfwistcid,
   cmpr_cnv_id,
   cmpr_ownrchndflag,
   cmpr_ownrchndcnt,
   cmpr_frstopnd,
   cmpr_id,
   cmtb_tmpttyp,
   cmtb_id,
   crqb_ddlntyp,
   crqb_ddlndt__dt,
   crqb_ddlndt__tim_in_dy,
   crqb_ddlntim_blck,
   crqb_ddlntim_blckunittyp,
   crqb_is_ok_aft_ddln,
   crqb_id,
   crtb_id,
   csrq_denlresn,
   csrq_las_sbtdby,
   csrq_frstsbtdby,
   csrq_rfngwkfwtsk,
   csrq_prvsrfngtsk,
   csrq_prvsrfngtsk_prmn,
   csrq_ownr,
   csrq_prvsownr,
   csrq_prvssndr,
   csrq_prvsownrprmn,
   csrq_tnfr,
   csrq_prvstnfr,
   csrq_rcpttrkg,
   csrq_las_revw,
   csrq_las_rtedto,
   csrq_rtngrcpt,
   csrq_rjtnresn,
   case_clsrresn,
   case_prj_otcm,
   case_las_clsdby,
   case_las_rpndby,
   case_rfngwkfwtsk,
   case_prvsrfngtsk,
   case_prvsrfngtsk_prmn,
   case_ownr,
   case_prvsownr,
   case_prvssndr,
   case_prvsownrpr
mn,
   case_tnfr,
   case_prvstnfr,
   case_rcpttrkg,
   case_las_revw,
   case_frstopndby,
   case_reonresn,
   cmpq_denlresn,
   cmpq_las_sbtdby,
   cmpq_frstsbtdby,
   cmpq_rfngwkfwtsk,
   cmpq_prvsrfngtsk,
   cmpq_prvsrfngtsk_prmn,
   cmpq_ownr,
   cmpq_prvsownr,
   cmpq_prvssndr,
   cmpq_prvsownrprmn,
   cmpq_tnfr,
   cmpq_prvstnfr,
   cmpq_rcpttrkg,
   cmpq_las_revw,
   cmpq_las_rtedto,
   cmpq_rtngrcpt,
   cmpq_rjtnresn,
   cmpr_clsrresn,
   cmpr_prj_otcm,
   cmpr_las_clsdby,
   cmpr_las_rpndby,
   cmpr_rfngwkfwtsk,
   cmpr_prvsrfngtsk,
   cmpr_prvsrfngtsk_prmn,
   cmpr_ownr,
   cmpr_prvsownr,
   cmpr_prvssndr,
   cmpr_prvsownrprmn,
   cmpr_tnfr,
   cmpr_prvstnfr,
   cmpr_rcpttrkg,
   cmpr_las_revw,
   cmpr_frstopndby,
   cmpr_reonresn,
   cmbb_src,
   cmbb_typ,
   cmbb_resn,
   cmbb_pity,
   cmbb_svty,
   cmbb_ownrobst,
   cmbb_pmrypvdr,
   cmbb_rtngrcpt,
   cmbb_cstmflds,
   cmbs_memb,
   cmbs_tmpt,
   cmbs_pat_id_qry,
   cmbs_qry_stts,
   csrq_rtngpeer,
   case_reqt,
   cmpq_rtngpeer,
   cmpr_reqt,
   cmtb_amtn,
   classtype,
   cmbb_c4c_id,
   cmbb_crtd,
   cmbb_las_act,
   cmbb_las_act_actrtyp,
   cmbb_obj_stt,
   cmbb_vers,
   cmbb_vsbt,
   cmbb_dltddt,
   cmbb_las_act_by,
   cmbb_origcrtr,
   cmbb_origcrtrlogdin,
   cmbb_las_act_by_logdin,
   cmbb_univid,
   cmbb_rtngstng,
   cmbs_ini_cnctdt_tim__dt,
   cmbs_ini_cnctdt_tim__tim_in_dy,
   cmbs_denlcmmt,
   cmbs_id,
   cbs_id,
   csrq_rjtncmmt,
   csrq_frstsbtdat,
   csrq_las_sbtdat,
   csrq_wkfwistcid,
   csrq_cnv_id,
   csrq_ownrchndflag,
   csrq_ownrchndcnt,
   csrq_las_rtedat,
   csrq_ddlntyp,
   csrq_ddlndt__dt,
   csrq_ddlndt__tim_in_dy,
   csrq_ddlntim_blck,
   csrq_ddlntim_blckunittyp,
   csrq_is_ok_aft_ddln,
   csrq_id,
   case_clngcmmt,
   case_reoncmmt,
   case_ackgddln_dt,
   case_ackgddln_tim_in_dy,
   case_las_clsd,
   case_las_rpnd,
   case_wkfwistcid,
   case_cnv_id,
   case_ownrchndflag,
   case_ownrchndcnt,
   case_frstopnd,
   case_id,
   cmpb_id,
   cmpq_rjtncmmt,
   cmpq_frstsbtdat,

   cmpq_las_sbtdat,
   cmpq_wkfwistcid,
   cmpq_cnv_id,
   cmpq_ownrchndflag,
   cmpq_ownrchndcnt,
   cmpq_las_rtedat,
   cmpq_ddlntyp,
   cmbb_id,
   valid_from,
   valid_to ,
   cmbb_audid,
   cmbb_prev_audid,
   cmbb_next_audid,
   next_review_date,
   participation,
   requestor,
   stage,
   tgt_intervention,
   participationstatus,
   duedate,
   timing

  )
  VALUES
  (
   :new.cmpq_ddlndt__dt,
   :new.cmpq_ddlndt__tim_in_dy,
   :new.cmpq_ddlntim_blck,
   :new.cmpq_ddlntim_blckunittyp,
   :new.cmpq_is_ok_aft_ddln,
   :new.cmpq_id,
   :new.cmpr_clngcmmt,
   :new.cmpr_reoncmmt,
   :new.cmpr_ackgddln_dt,
   :new.cmpr_ackgddln_tim_in_dy,
   :new.cmpr_las_clsd,
   :new.cmpr_las_rpnd,
   :new.cmpr_wkfwistcid,
   :new.cmpr_cnv_id,
   :new.cmpr_ownrchndflag,
   :new.cmpr_ownrchndcnt,
   :new.cmpr_frstopnd,
   :new.cmpr_id,
   :new.cmtb_tmpttyp,
   :new.cmtb_id,
   :new.crqb_ddlntyp,
   :new.crqb_ddlndt__dt,
   :new.crqb_ddlndt__tim_in_dy,
   :new.crqb_ddlntim_blck,
   :new.crqb_ddlntim_blckunittyp,
   :new.crqb_is_ok_aft_ddln,
   :new.crqb_id,
   :new.crtb_id,
   :new.csrq_denlresn,
   :new.csrq_las_sbtdby,
   :new.csrq_frstsbtdby,
   :new.csrq_rfngwkfwtsk,
   :new.csrq_prvsrfngtsk,
   :new.csrq_prvsrfngtsk_prmn,
   :new.csrq_ownr,
   :new.csrq_prvsownr,
   :new.csrq_prvssndr,
   :new.csrq_prvsownrprmn,
   :new.csrq_tnfr,
   :new.csrq_prvstnfr,
   :new.csrq_rcpttrkg,
   :new.csrq_las_revw,
   :new.csrq_las_rtedto,
   :new.csrq_rtngrcpt,
   :new.csrq_rjtnresn,
   :new.case_clsrresn,
   :new.case_prj_otcm,
   :new.case_las_clsdby,
   :new.case_las_rpndby,
   :new.case_rfngwkfwtsk,
   :new.case_prvsrfngtsk,
   :new.case_prvsrfngtsk_prmn,
   :new.case_ownr,
   :new.case_prvsownr,
   :new.case_prvssndr,
   :new.case_prvsownrprmn,
   :new.case_tnfr,
   :new.case_prvstnfr,
   :new.case_rcpttrkg,
   :new.case_las_revw,
   :new.case_frstopndby,
   :new.case_reonresn,
   :new.cmpq_denlresn,
   :new.cmpq_las_sbtdby,
   :new.cmpq_frstsbtdby,
   :new.cmpq_rfngwkfwtsk,
   :new.cmp
q_prvsrfngtsk,
   :new.cmpq_prvsrfngtsk_prmn,
   :new.cmpq_ownr,
   :new.cmpq_prvsownr,
   :new.cmpq_prvssndr,
   :new.cmpq_prvsownrprmn,
   :new.cmpq_tnfr,
   :new.cmpq_prvstnfr,
   :new.cmpq_rcpttrkg,
   :new.cmpq_las_revw,
   :new.cmpq_las_rtedto,
   :new.cmpq_rtngrcpt,
   :new.cmpq_rjtnresn,
   :new.cmpr_clsrresn,
   :new.cmpr_prj_otcm,
   :new.cmpr_las_clsdby,
   :new.cmpr_las_rpndby,
   :new.cmpr_rfngwkfwtsk,
   :new.cmpr_prvsrfngtsk,
   :new.cmpr_prvsrfngtsk_prmn,
   :new.cmpr_ownr,
   :new.cmpr_prvsownr,
   :new.cmpr_prvssndr,
   :new.cmpr_prvsownrprmn,
   :new.cmpr_tnfr,
   :new.cmpr_prvstnfr,
   :new.cmpr_rcpttrkg,
   :new.cmpr_las_revw,
   :new.cmpr_frstopndby,
   :new.cmpr_reonresn,
   :new.cmbb_src,
   :new.cmbb_typ,
   :new.cmbb_resn,
   :new.cmbb_pity,
   :new.cmbb_svty,
   :new.cmbb_ownrobst,
   :new.cmbb_pmrypvdr,
   :new.cmbb_rtngrcpt,
   :new.cmbb_cstmflds,
   :new.cmbs_memb,
   :new.cmbs_tmpt,
   :new.cmbs_pat_id_qry,
   :new.cmbs_qry_stts,
   :new.csrq_rtngpeer,
   :new.case_reqt,
   :new.cmpq_rtngpeer,
   :new.cmpr_reqt,
   :new.cmtb_amtn,
   :new.classtype,
   :new.cmbb_c4c_id,
   :new.cmbb_crtd,
   :new.cmbb_las_act,
   :new.cmbb_las_act_actrtyp,
   :new.cmbb_obj_stt,
   :new.cmbb_vers,
   :new.cmbb_vsbt,
   :new.cmbb_dltddt,
   :new.cmbb_las_act_by,
   :new.cmbb_origcrtr,
   :new.cmbb_origcrtrlogdin,
   :new.cmbb_las_act_by_logdin,
   :new.cmbb_univid,
   :new.cmbb_rtngstng,
   :new.cmbs_ini_cnctdt_tim__dt,
   :new.cmbs_ini_cnctdt_tim__tim_in_dy,
   :new.cmbs_denlcmmt,
   :new.cmbs_id,
   :new.cbs_id,
   :new.csrq_rjtncmmt,
   :new.csrq_frstsbtdat,
   :new.csrq_las_sbtdat,
   :new.csrq_wkfwistcid,
   :new.csrq_cnv_id,
   :new.csrq_ownrchndflag,
   :new.csrq_ownrchndcnt,
   :new.csrq_las_rtedat,
   :new.csrq_ddlntyp,
   :new.csrq_ddlndt__dt,
   :new.csrq_ddlndt__tim_in_dy,
   :new.csrq_ddlntim_blck,
   :new.csrq_ddlntim_blckunittyp,
   :new.csrq_is_ok_aft_ddln,
   :new.csrq_id,
   :new.case_clngcmmt,
   :new.case_reoncmmt,
   :new.case_ackgdd
ln_dt,
   :new.case_ackgddln_tim_in_dy,
   :new.case_las_clsd,
   :new.case_las_rpnd,
   :new.case_wkfwistcid,
   :new.case_cnv_id,
   :new.case_ownrchndflag,
   :new.case_ownrchndcnt,
   :new.case_frstopnd,
   :new.case_id,
   :new.cmpb_id,
   :new.cmpq_rjtncmmt,
   :new.cmpq_frstsbtdat,
   :new.cmpq_las_sbtdat,
   :new.cmpq_wkfwistcid,
   :new.cmpq_cnv_id,
   :new.cmpq_ownrchndflag,
   :new.cmpq_ownrchndcnt,
   :new.cmpq_las_rtedat,
   :new.cmpq_ddlntyp,
   :new.cmbb_id,
   :new.cmbb_las_act_tim,
   NULL,
   u_cm_basebase.NEXTVAL,
   NULL,
   NULL,
   :new.next_review_date,
   :new.participation,
   :new.requestor,
   :new.stage,
   :new.tgt_intervention,
   :new.participationstatus,
   :new.duedate,
   :new.timing
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
37
</td>
<td>
THH_C4C
</td>
<td>
TRG_CMBB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_BASEBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cmbb_auditupdate BEFORE
  UPDATE
    ON T_CM_BASEBASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cmbb_audid
      INTO
        last_audid
      FROM
        a_cm_basebase
      WHERE
        cmbb_id            = :old.cmbb_id
      AND cmbb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cmbb_las_act_tim = :new.cmbb_las_act_tim THEN
      UPDATE
        a_cm_basebase
      SET
        cmpq_ddlndt__dt                = :new.cmpq_ddlndt__dt,
        cmpq_ddlndt__tim_in_dy         = :new.cmpq_ddlndt__tim_in_dy,
        cmpq_ddlntim_blck              = :new.cmpq_ddlntim_blck,
        cmpq_ddlntim_blckunittyp       = :new.cmpq_ddlntim_blckunittyp,
        cmpq_is_ok_aft_ddln            = :new.cmpq_is_ok_aft_ddln,
        cmpq_id                        = :new.cmpq_id,
        cmpr_clngcmmt                  = :new.cmpr_clngcmmt,
        cmpr_reoncmmt                  = :new.cmpr_reoncmmt,
        cmpr_ackgddln_dt               = :new.cmpr_ackgddln_dt,
        cmpr_ackgddln_tim_in_dy        = :new.cmpr_ackgddln_tim_in_dy,
        cmpr_las_clsd                  = :new.cmpr_las_clsd,
        cmpr_las_rpnd                  = :new.cmpr_las_rpnd,
        cmpr_wkfwistcid                = :new.cmpr_wkfwistcid,
        cmpr_cnv_id                    = :new.cmpr_cnv_id,
        cmpr_ownrchndflag              = :new.cmpr_ownrchndflag,
        cmpr_ownrchndcnt               = :new.cmpr_ownrchndcnt,
        cmpr_frstopnd                  = :new.cmpr_frstopnd,
        cmpr_id                        = :new.cmpr_id,
        cmtb_tmpttyp                   = :new.cmtb_tmpttyp,
        cmtb_id                        = :new.cmtb_id,
        crqb_ddlntyp                   = :new.crqb_ddlntyp,
        crqb_ddlndt__dt                = :new.crqb_ddlndt__dt,
        crqb_ddlndt__tim_in_dy
         = :new.crqb_ddlndt__tim_in_dy,
        crqb_ddlntim_blck              = :new.crqb_ddlntim_blck,
        crqb_ddlntim_blckunittyp       = :new.crqb_ddlntim_blckunittyp,
        crqb_is_ok_aft_ddln            = :new.crqb_is_ok_aft_ddln,
        crqb_id                        = :new.crqb_id,
        crtb_id                        = :new.crtb_id,
        csrq_denlresn                  = :new.csrq_denlresn,
        csrq_las_sbtdby                = :new.csrq_las_sbtdby,
        csrq_frstsbtdby                = :new.csrq_frstsbtdby,
        csrq_rfngwkfwtsk               = :new.csrq_rfngwkfwtsk,
        csrq_prvsrfngtsk               = :new.csrq_prvsrfngtsk,
        csrq_prvsrfngtsk_prmn          = :new.csrq_prvsrfngtsk_prmn,
        csrq_ownr                      = :new.csrq_ownr,
        csrq_prvsownr                  = :new.csrq_prvsownr,
        csrq_prvssndr                  = :new.csrq_prvssndr,
        csrq_prvsownrprmn              = :new.csrq_prvsownrprmn,
        csrq_tnfr                      = :new.csrq_tnfr,
        csrq_prvstnfr                  = :new.csrq_prvstnfr,
        csrq_rcpttrkg                  = :new.csrq_rcpttrkg,
        csrq_las_revw                  = :new.csrq_las_revw,
        csrq_las_rtedto                = :new.csrq_las_rtedto,
        csrq_rtngrcpt                  = :new.csrq_rtngrcpt,
        csrq_rjtnresn                  = :new.csrq_rjtnresn,
        case_clsrresn                  = :new.case_clsrresn,
        case_prj_otcm                  = :new.case_prj_otcm,
        case_las_clsdby                = :new.case_las_clsdby,
        case_las_rpndby                = :new.case_las_rpndby,
        case_rfngwkfwtsk               = :new.case_rfngwkfwtsk,
        case_prvsrfngtsk               = :new.case_prvsrfngtsk,
        case_prvsrfngtsk_prmn          = :new.case_prvsrfngtsk_prmn,
        case_ownr                      = :new.case_ownr,
        case_prvsownr                  = :new.case_prvsownr,
        case_prvssndr
         = :new.case_prvssndr,
        case_prvsownrprmn              = :new.case_prvsownrprmn,
        case_tnfr                      = :new.case_tnfr,
        case_prvstnfr                  = :new.case_prvstnfr,
        case_rcpttrkg                  = :new.case_rcpttrkg,
        case_las_revw                  = :new.case_las_revw,
        case_frstopndby                = :new.case_frstopndby,
        case_reonresn                  = :new.case_reonresn,
        cmpq_denlresn                  = :new.cmpq_denlresn,
        cmpq_las_sbtdby                = :new.cmpq_las_sbtdby,
        cmpq_frstsbtdby                = :new.cmpq_frstsbtdby,
        cmpq_rfngwkfwtsk               = :new.cmpq_rfngwkfwtsk,
        cmpq_prvsrfngtsk               = :new.cmpq_prvsrfngtsk,
        cmpq_prvsrfngtsk_prmn          = :new.cmpq_prvsrfngtsk_prmn,
        cmpq_ownr                      = :new.cmpq_ownr,
        cmpq_prvsownr                  = :new.cmpq_prvsownr,
        cmpq_prvssndr                  = :new.cmpq_prvssndr,
        cmpq_prvsownrprmn              = :new.cmpq_prvsownrprmn,
        cmpq_tnfr                      = :new.cmpq_tnfr,
        cmpq_prvstnfr                  = :new.cmpq_prvstnfr,
        cmpq_rcpttrkg                  = :new.cmpq_rcpttrkg,
        cmpq_las_revw                  = :new.cmpq_las_revw,
        cmpq_las_rtedto                = :new.cmpq_las_rtedto,
        cmpq_rtngrcpt                  = :new.cmpq_rtngrcpt,
        cmpq_rjtnresn                  = :new.cmpq_rjtnresn,
        cmpr_clsrresn                  = :new.cmpr_clsrresn,
        cmpr_prj_otcm                  = :new.cmpr_prj_otcm,
        cmpr_las_clsdby                = :new.cmpr_las_clsdby,
        cmpr_las_rpndby                = :new.cmpr_las_rpndby,
        cmpr_rfngwkfwtsk               = :new.cmpr_rfngwkfwtsk,
        cmpr_prvsrfngtsk               = :new.cmpr_prvsrfngtsk,
        cmpr_prvsrfngtsk_prmn          = :new.cmpr_prvsrfngtsk_prmn,
        cmpr_ownr                      = :
new.cmpr_ownr,
        cmpr_prvsownr                  = :new.cmpr_prvsownr,
        cmpr_prvssndr                  = :new.cmpr_prvssndr,
        cmpr_prvsownrprmn              = :new.cmpr_prvsownrprmn,
        cmpr_tnfr                      = :new.cmpr_tnfr,
        cmpr_prvstnfr                  = :new.cmpr_prvstnfr,
        cmpr_rcpttrkg                  = :new.cmpr_rcpttrkg,
        cmpr_las_revw                  = :new.cmpr_las_revw,
        cmpr_frstopndby                = :new.cmpr_frstopndby,
        cmpr_reonresn                  = :new.cmpr_reonresn,
        cmbb_src                       = :new.cmbb_src,
        cmbb_typ                       = :new.cmbb_typ,
        cmbb_resn                      = :new.cmbb_resn,
        cmbb_pity                      = :new.cmbb_pity,
        cmbb_svty                      = :new.cmbb_svty,
        cmbb_ownrobst                  = :new.cmbb_ownrobst,
        cmbb_pmrypvdr                  = :new.cmbb_pmrypvdr,
        cmbb_rtngrcpt                  = :new.cmbb_rtngrcpt,
        cmbb_cstmflds                  = :new.cmbb_cstmflds,
        cmbs_memb                      = :new.cmbs_memb,
        cmbs_tmpt                      = :new.cmbs_tmpt,
        cmbs_pat_id_qry                = :new.cmbs_pat_id_qry,
        cmbs_qry_stts                  = :new.cmbs_qry_stts,
        csrq_rtngpeer                  = :new.csrq_rtngpeer,
        case_reqt                      = :new.case_reqt,
        cmpq_rtngpeer                  = :new.cmpq_rtngpeer,
        cmpr_reqt                      = :new.cmpr_reqt,
        cmtb_amtn                      = :new.cmtb_amtn,
        classtype                      = :new.classtype,
        cmbb_c4c_id                    = :new.cmbb_c4c_id,
        cmbb_crtd                      = :new.cmbb_crtd,
        cmbb_las_act                   = :new.cmbb_las_act,
        cmbb_las_act_actrtyp           = :new.cmbb_las_act_actrtyp,
        cmbb_obj_stt                   = :new.cmbb_obj_stt,
        cmbb_ve
rs                      = :new.cmbb_vers,
        cmbb_vsbt                      = :new.cmbb_vsbt,
        cmbb_dltddt                    = :new.cmbb_dltddt,
        cmbb_las_act_by                = :new.cmbb_las_act_by,
        cmbb_origcrtr                  = :new.cmbb_origcrtr,
        cmbb_origcrtrlogdin            = :new.cmbb_origcrtrlogdin,
        cmbb_las_act_by_logdin         = :new.cmbb_las_act_by_logdin,
        cmbb_univid                    = :new.cmbb_univid,
        cmbb_rtngstng                  = :new.cmbb_rtngstng,
        cmbs_ini_cnctdt_tim__dt        = :new.cmbs_ini_cnctdt_tim__dt,
        cmbs_ini_cnctdt_tim__tim_in_dy = :new.cmbs_ini_cnctdt_tim__tim_in_dy,
        cmbs_denlcmmt                  = :new.cmbs_denlcmmt,
        cmbs_id                        = :new.cmbs_id,
        cbs_id                         = :new.cbs_id,
        csrq_rjtncmmt                  = :new.csrq_rjtncmmt,
        csrq_frstsbtdat                = :new.csrq_frstsbtdat,
        csrq_las_sbtdat                = :new.csrq_las_sbtdat,
        csrq_wkfwistcid                = :new.csrq_wkfwistcid,
        csrq_cnv_id                    = :new.csrq_cnv_id,
        csrq_ownrchndflag              = :new.csrq_ownrchndflag,
        csrq_ownrchndcnt               = :new.csrq_ownrchndcnt,
        csrq_las_rtedat                = :new.csrq_las_rtedat,
        csrq_ddlntyp                   = :new.csrq_ddlntyp,
        csrq_ddlndt__dt                = :new.csrq_ddlndt__dt,
        csrq_ddlndt__tim_in_dy         = :new.csrq_ddlndt__tim_in_dy,
        csrq_ddlntim_blck              = :new.csrq_ddlntim_blck,
        csrq_ddlntim_blckunittyp       = :new.csrq_ddlntim_blckunittyp,
        csrq_is_ok_aft_ddln            = :new.csrq_is_ok_aft_ddln,
        csrq_id                        = :new.csrq_id,
        case_clngcmmt                  = :new.case_clngcmmt,
        case_reoncmmt                  = :new.case_reoncmmt,
        case_ackgddln_dt               = :new.case_ackgddln_dt,

     case_ackgddln_tim_in_dy        = :new.case_ackgddln_tim_in_dy,
        case_las_clsd                  = :new.case_las_clsd,
        case_las_rpnd                  = :new.case_las_rpnd,
        case_wkfwistcid                = :new.case_wkfwistcid,
        case_cnv_id                    = :new.case_cnv_id,
        case_ownrchndflag              = :new.case_ownrchndflag,
        case_ownrchndcnt               = :new.case_ownrchndcnt,
        case_frstopnd                  = :new.case_frstopnd,
        case_id                        = :new.case_id,
        cmpb_id                        = :new.cmpb_id,
        cmpq_rjtncmmt                  = :new.cmpq_rjtncmmt,
        cmpq_frstsbtdat                = :new.cmpq_frstsbtdat,
        cmpq_las_sbtdat                = :new.cmpq_las_sbtdat,
        cmpq_wkfwistcid                = :new.cmpq_wkfwistcid,
        cmpq_cnv_id                    = :new.cmpq_cnv_id,
        cmpq_ownrchndflag              = :new.cmpq_ownrchndflag,
        cmpq_ownrchndcnt               = :new.cmpq_ownrchndcnt,
        cmpq_las_rtedat                = :new.cmpq_las_rtedat,
        cmpq_ddlntyp                   = :new.cmpq_ddlntyp,
        next_review_date               = :new.next_review_date,
        participation                  = :new.participation,
        requestor                      = :new.requestor,
        stage                          = :new.stage,
        tgt_intervention               = :new.tgt_intervention,
        participationstatus            = :new.participationstatus,
        duedate                        = :new.duedate,
        timing                         = :new.timing
      WHERE
        cmbb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cm_basebase
        (
          cmpq_ddlndt__dt,
          cmpq_ddlndt__tim_in_dy,
          cmpq_ddlntim_blck,
          cmpq_ddlntim_blck
unittyp,
          cmpq_is_ok_aft_ddln,
          cmpq_id,
          cmpr_clngcmmt,
          cmpr_reoncmmt,
          cmpr_ackgddln_dt,
          cmpr_ackgddln_tim_in_dy,
          cmpr_las_clsd,
          cmpr_las_rpnd,
          cmpr_wkfwistcid,
          cmpr_cnv_id,
          cmpr_ownrchndflag,
          cmpr_ownrchndcnt,
          cmpr_frstopnd,
          cmpr_id,
          cmtb_tmpttyp,
          cmtb_id,
          crqb_ddlntyp,
          crqb_ddlndt__dt,
          crqb_ddlndt__tim_in_dy,
          crqb_ddlntim_blck,
          crqb_ddlntim_blckunittyp,
          crqb_is_ok_aft_ddln,
          crqb_id,
          crtb_id,
          csrq_denlresn,
          csrq_las_sbtdby,
          csrq_frstsbtdby,
          csrq_rfngwkfwtsk,
          csrq_prvsrfngtsk,
          csrq_prvsrfngtsk_prmn,
          csrq_ownr,
          csrq_prvsownr,
          csrq_prvssndr,
          csrq_prvsownrprmn,
          csrq_tnfr,
          csrq_prvstnfr,
          csrq_rcpttrkg,
          csrq_las_revw,
          csrq_las_rtedto,
          csrq_rtngrcpt,
          csrq_rjtnresn,
          case_clsrresn,
          case_prj_otcm,
          case_las_clsdby,
          case_las_rpndby,
          case_rfngwkfwtsk,
          case_prvsrfngtsk,
          case_prvsrfngtsk_prmn,
          case_ownr,
          case_prvsownr,
          case_prvssndr,
          case_prvsownrprmn,
          case_tnfr,
          case_prvstnfr,
          case_rcpttrkg,
          case_las_revw,
          case_frstopndby,
          case_reonresn,
          cmpq_denlresn,
          cmpq_las_sbtdby,
          cmpq_frstsbtdby,
          cmpq_rfngwkfwtsk,
          cmpq_prvsrfngtsk,
          cmpq_prvsrfngtsk_prmn,
          cmpq_ownr,
          cmpq_prvsownr,
          cmpq_prvssndr,
          cmpq_prvsownrprmn,
          cmpq_tnfr,
          cmpq_prvstnfr,
          cmpq_rcpttrkg,
          cmpq_las_revw,
          cmpq_las_rtedto,
          cmpq_rtngrcpt,
          cmpq_rjtnresn,
          cmpr_clsrresn,
          cmpr_pr
j_otcm,
          cmpr_las_clsdby,
          cmpr_las_rpndby,
          cmpr_rfngwkfwtsk,
          cmpr_prvsrfngtsk,
          cmpr_prvsrfngtsk_prmn,
          cmpr_ownr,
          cmpr_prvsownr,
          cmpr_prvssndr,
          cmpr_prvsownrprmn,
          cmpr_tnfr,
          cmpr_prvstnfr,
          cmpr_rcpttrkg,
          cmpr_las_revw,
          cmpr_frstopndby,
          cmpr_reonresn,
          cmbb_src,
          cmbb_typ,
          cmbb_resn,
          cmbb_pity,
          cmbb_svty,
          cmbb_ownrobst,
          cmbb_pmrypvdr,
          cmbb_rtngrcpt,
          cmbb_cstmflds,
          cmbs_memb,
          cmbs_tmpt,
          cmbs_pat_id_qry,
          cmbs_qry_stts,
          csrq_rtngpeer,
          case_reqt,
          cmpq_rtngpeer,
          cmpr_reqt,
          cmtb_amtn,
          classtype,
          cmbb_c4c_id,
          cmbb_crtd,
          cmbb_las_act,
          cmbb_las_act_actrtyp,
          cmbb_obj_stt,
          cmbb_vers,
          cmbb_vsbt,
          cmbb_dltddt,
          cmbb_las_act_by,
          cmbb_origcrtr,
          cmbb_origcrtrlogdin,
          cmbb_las_act_by_logdin,
          cmbb_univid,
          cmbb_rtngstng,
          cmbs_ini_cnctdt_tim__dt,
          cmbs_ini_cnctdt_tim__tim_in_dy,
          cmbs_denlcmmt,
          cmbs_id,
          cbs_id,
          csrq_rjtncmmt,
          csrq_frstsbtdat,
          csrq_las_sbtdat,
          csrq_wkfwistcid,
          csrq_cnv_id,
          csrq_ownrchndflag,
          csrq_ownrchndcnt,
          csrq_las_rtedat,
          csrq_ddlntyp,
          csrq_ddlndt__dt,
          csrq_ddlndt__tim_in_dy,
          csrq_ddlntim_blck,
          csrq_ddlntim_blckunittyp,
          csrq_is_ok_aft_ddln,
          csrq_id,
          case_clngcmmt,
          case_reoncmmt,
          case_ackgddln_dt,
          case_ackgddln_tim_in_dy,
          case_las_clsd,
          case_las_rpnd,
          case_wkfwistcid,
          case_cnv_id,
          case_ownrchndflag,
          case_ownrchn
dcnt,
          case_frstopnd,
          case_id,
          cmpb_id,
          cmpq_rjtncmmt,
          cmpq_frstsbtdat,
          cmpq_las_sbtdat,
          cmpq_wkfwistcid,
          cmpq_cnv_id,
          cmpq_ownrchndflag,
          cmpq_ownrchndcnt,
          cmpq_las_rtedat,
          cmpq_ddlntyp,
          cmbb_id,
          valid_from,
          valid_to,
          cmbb_audid,
          cmbb_prev_audid,
          cmbb_next_audid,
          next_review_date,
          participation,
          requestor,
          stage,
          tgt_intervention,
          participationstatus,
          duedate,
          timing
        )
        VALUES
        (
          :new.cmpq_ddlndt__dt,
          :new.cmpq_ddlndt__tim_in_dy,
          :new.cmpq_ddlntim_blck,
          :new.cmpq_ddlntim_blckunittyp,
          :new.cmpq_is_ok_aft_ddln,
          :new.cmpq_id,
          :new.cmpr_clngcmmt,
          :new.cmpr_reoncmmt,
          :new.cmpr_ackgddln_dt,
          :new.cmpr_ackgddln_tim_in_dy,
          :new.cmpr_las_clsd,
          :new.cmpr_las_rpnd,
          :new.cmpr_wkfwistcid,
          :new.cmpr_cnv_id,
          :new.cmpr_ownrchndflag,
          :new.cmpr_ownrchndcnt,
          :new.cmpr_frstopnd,
          :new.cmpr_id,
          :new.cmtb_tmpttyp,
          :new.cmtb_id,
          :new.crqb_ddlntyp,
          :new.crqb_ddlndt__dt,
          :new.crqb_ddlndt__tim_in_dy,
          :new.crqb_ddlntim_blck,
          :new.crqb_ddlntim_blckunittyp,
          :new.crqb_is_ok_aft_ddln,
          :new.crqb_id,
          :new.crtb_id,
          :new.csrq_denlresn,
          :new.csrq_las_sbtdby,
          :new.csrq_frstsbtdby,
          :new.csrq_rfngwkfwtsk,
          :new.csrq_prvsrfngtsk,
          :new.csrq_prvsrfngtsk_prmn,
          :new.csrq_ownr,
          :new.csrq_prvsownr,
          :new.csrq_prvssndr,
          :new.csrq_prvsownrprmn,
          :new.csrq_tnfr,
          :new.csrq_prvstnfr,
          :new.csrq_rcpttrkg,
          :new.csrq_las_revw,

:new.csrq_las_rtedto,
          :new.csrq_rtngrcpt,
          :new.csrq_rjtnresn,
          :new.case_clsrresn,
          :new.case_prj_otcm,
          :new.case_las_clsdby,
          :new.case_las_rpndby,
          :new.case_rfngwkfwtsk,
          :new.case_prvsrfngtsk,
          :new.case_prvsrfngtsk_prmn,
          :new.case_ownr,
          :new.case_prvsownr,
          :new.case_prvssndr,
          :new.case_prvsownrprmn,
          :new.case_tnfr,
          :new.case_prvstnfr,
          :new.case_rcpttrkg,
          :new.case_las_revw,
          :new.case_frstopndby,
          :new.case_reonresn,
          :new.cmpq_denlresn,
          :new.cmpq_las_sbtdby,
          :new.cmpq_frstsbtdby,
          :new.cmpq_rfngwkfwtsk,
          :new.cmpq_prvsrfngtsk,
          :new.cmpq_prvsrfngtsk_prmn,
          :new.cmpq_ownr,
          :new.cmpq_prvsownr,
          :new.cmpq_prvssndr,
          :new.cmpq_prvsownrprmn,
          :new.cmpq_tnfr,
          :new.cmpq_prvstnfr,
          :new.cmpq_rcpttrkg,
          :new.cmpq_las_revw,
          :new.cmpq_las_rtedto,
          :new.cmpq_rtngrcpt,
          :new.cmpq_rjtnresn,
          :new.cmpr_clsrresn,
          :new.cmpr_prj_otcm,
          :new.cmpr_las_clsdby,
          :new.cmpr_las_rpndby,
          :new.cmpr_rfngwkfwtsk,
          :new.cmpr_prvsrfngtsk,
          :new.cmpr_prvsrfngtsk_prmn,
          :new.cmpr_ownr,
          :new.cmpr_prvsownr,
          :new.cmpr_prvssndr,
          :new.cmpr_prvsownrprmn,
          :new.cmpr_tnfr,
          :new.cmpr_prvstnfr,
          :new.cmpr_rcpttrkg,
          :new.cmpr_las_revw,
          :new.cmpr_frstopndby,
          :new.cmpr_reonresn,
          :new.cmbb_src,
          :new.cmbb_typ,
          :new.cmbb_resn,
          :new.cmbb_pity,
          :new.cmbb_svty,
          :new.cmbb_ownrobst,
          :new.cmbb_pmrypvdr,
          :new.cmbb_rtngrcpt,
          :new.cmbb_cstmflds,
          :new.cmbs_memb,
          :new.cmbs_tmpt,
          :new.cmbs_pat_id_qry,

  :new.cmbs_qry_stts,
          :new.csrq_rtngpeer,
          :new.case_reqt,
          :new.cmpq_rtngpeer,
          :new.cmpr_reqt,
          :new.cmtb_amtn,
          :new.classtype,
          :new.cmbb_c4c_id,
          :new.cmbb_crtd,
          :new.cmbb_las_act,
          :new.cmbb_las_act_actrtyp,
          :new.cmbb_obj_stt,
          :new.cmbb_vers,
          :new.cmbb_vsbt,
          :new.cmbb_dltddt,
          :new.cmbb_las_act_by,
          :new.cmbb_origcrtr,
          :new.cmbb_origcrtrlogdin,
          :new.cmbb_las_act_by_logdin,
          :new.cmbb_univid,
          :new.cmbb_rtngstng,
          :new.cmbs_ini_cnctdt_tim__dt,
          :new.cmbs_ini_cnctdt_tim__tim_in_dy,
          :new.cmbs_denlcmmt,
          :new.cmbs_id,
          :new.cbs_id,
          :new.csrq_rjtncmmt,
          :new.csrq_frstsbtdat,
          :new.csrq_las_sbtdat,
          :new.csrq_wkfwistcid,
          :new.csrq_cnv_id,
          :new.csrq_ownrchndflag,
          :new.csrq_ownrchndcnt,
          :new.csrq_las_rtedat,
          :new.csrq_ddlntyp,
          :new.csrq_ddlndt__dt,
          :new.csrq_ddlndt__tim_in_dy,
          :new.csrq_ddlntim_blck,
          :new.csrq_ddlntim_blckunittyp,
          :new.csrq_is_ok_aft_ddln,
          :new.csrq_id,
          :new.case_clngcmmt,
          :new.case_reoncmmt,
          :new.case_ackgddln_dt,
          :new.case_ackgddln_tim_in_dy,
          :new.case_las_clsd,
          :new.case_las_rpnd,
          :new.case_wkfwistcid,
          :new.case_cnv_id,
          :new.case_ownrchndflag,
          :new.case_ownrchndcnt,
          :new.case_frstopnd,
          :new.case_id,
          :new.cmpb_id,
          :new.cmpq_rjtncmmt,
          :new.cmpq_frstsbtdat,
          :new.cmpq_las_sbtdat,
          :new.cmpq_wkfwistcid,
          :new.cmpq_cnv_id,
          :new.cmpq_ownrchndflag,
          :new.cmpq_ownrchndcnt,
          :new.cmpq_las_rtedat,
          :new.cmpq_ddlntyp,
          :new.cmbb_id,
          :new.cmbb_las_act_tim,

         NULL,
          u_cm_basebase.NEXTVAL,
          last_audid,
          NULL,
          :new.next_review_date,
          :new.participation,
          :new.requestor,
          :new.stage,
          :new.tgt_intervention,
          :new.participationstatus,
          :new.duedate,
          :new.timing
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cm_basebase
      SET
        valid_to        = :new.cmbb_las_act_tim,
        cmbb_next_audid = u_cm_basebase.CURRVAL
      WHERE
        cmbb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
38
</td>
<td>
THH_C4C
</td>
<td>
TRG_CM_ACL_INVALIDATE
</td>
<td>
AFTER EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_BASEBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_CM_ACL_INVALIDATE AFTER
   UPDATE ON T_CM_BASEBASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  BEGIN
    BEGIN
       DELETE FROM umv_dac_cm_acl
       where CMBS_ID=:old.cmbs_id;
    END;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
39
</td>
<td>
THH_C4C
</td>
<td>
TRG_CM_DACMEMBER
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_BASEBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
(nvl(new.cmbb_OBJ_STT,-1) &lt;&gt; nvl(old.cmbb_OBJ_STT,-1) and (new.cmbb_OBJ_STT =2 or old.cmbb_OBJ_STT=2) ) or
      nvl(new.cmbs_memb,-1) &lt;&gt;  nvl(old.cmbs_memb,-1)
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CM_DACMEMBER&quot; 
   AFTER INSERT OR DELETE OR UPDATE OF cmbb_OBJ_STT,cmbs_memb
   ON t_cm_basebase
   FOR EACH ROW


</td>
<td>
PL/SQL
</td>
<td>
declare
    t_cm_basebase_NEW_rec t_cm_basebase%rowtype;
    t_cm_basebase_OLD_rec t_cm_basebase%rowtype;
   begin
    t_cm_basebase_NEW_rec.&quot;CMPQ_LAS_REVW&quot; := :new.&quot;CMPQ_LAS_REVW&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_LAS_RTEDTO&quot; := :new.&quot;CMPQ_LAS_RTEDTO&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RTNGRCPT&quot; := :new.&quot;CMPQ_RTNGRCPT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RJTNRESN&quot; := :new.&quot;CMPQ_RJTNRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_CLSRRESN&quot; := :new.&quot;CMPR_CLSRRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRJ_OTCM&quot; := :new.&quot;CMPR_PRJ_OTCM&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_LAS_CLSDBY&quot; := :new.&quot;CMPR_LAS_CLSDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_LAS_RPNDBY&quot; := :new.&quot;CMPR_LAS_RPNDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_RFNGWKFWTSK&quot; := :new.&quot;CMPR_RFNGWKFWTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSRFNGTSK&quot; := :new.&quot;CMPR_PRVSRFNGTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSRFNGTSK_PRMN&quot; := :new.&quot;CMPR_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_OWNR&quot; := :new.&quot;CMPR_OWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSOWNR&quot; := :new.&quot;CMPR_PRVSOWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSSNDR&quot; := :new.&quot;CMPR_PRVSSNDR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSOWNRPRMN&quot; := :new.&quot;CMPR_PRVSOWNRPRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_TNFR&quot; := :new.&quot;CMPR_TNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_PRVSTNFR&quot; := :new.&quot;CMPR_PRVSTNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_RCPTTRKG&quot; := :new.&quot;CMPR_RCPTTRKG&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_LAS_REVW&quot; := :new.&quot;CMPR_LAS_REVW&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_FRSTOPNDBY&quot; := :new.&quot;CMPR_FRSTOPNDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_REONRESN&quot; := :new.&quot;CMPR_REONRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_SRC&quot; := :new.&quot;CMBB_SRC&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_TYP&quot; := :new.&quot;CMBB_TYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_RESN&quot; := :new.&quot;CMBB_RESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_PITY&quot; := :new.&quot;CMBB_PITY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_SVTY&quot; := :new.&quot;CMBB_SVTY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_OWNROBST&quot; := :new.&quot;CMBB_OWNROBST&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_PMRYPVDR&quot; := :new.&quot;CMBB_PMRYPVDR&quot;;
    t_cm_basebase
_NEW_rec.&quot;CMBB_RTNGRCPT&quot; := :new.&quot;CMBB_RTNGRCPT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_MEMB&quot; := :new.&quot;CMBS_MEMB&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_TMPT&quot; := :new.&quot;CMBS_TMPT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_PAT_ID_QRY&quot; := :new.&quot;CMBS_PAT_ID_QRY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_QRY_STTS&quot; := :new.&quot;CMBS_QRY_STTS&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RTNGPEER&quot; := :new.&quot;CSRQ_RTNGPEER&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_REQT&quot; := :new.&quot;CASE_REQT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RTNGPEER&quot; := :new.&quot;CMPQ_RTNGPEER&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_REQT&quot; := :new.&quot;CMPR_REQT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMTB_AMTN&quot; := :new.&quot;CMTB_AMTN&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RJTNCMMT&quot; := :new.&quot;CSRQ_RJTNCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_FRSTSBTDAT&quot; := :new.&quot;CSRQ_FRSTSBTDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_LAS_SBTDAT&quot; := :new.&quot;CSRQ_LAS_SBTDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_WKFWISTCID&quot; := :new.&quot;CSRQ_WKFWISTCID&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_CNV_ID&quot; := :new.&quot;CSRQ_CNV_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_OWNRCHNDFLAG&quot; := :new.&quot;CSRQ_OWNRCHNDFLAG&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_OWNRCHNDCNT&quot; := :new.&quot;CSRQ_OWNRCHNDCNT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_LAS_RTEDAT&quot; := :new.&quot;CSRQ_LAS_RTEDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DDLNTYP&quot; := :new.&quot;CSRQ_DDLNTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DDLNDT__DT&quot; := :new.&quot;CSRQ_DDLNDT__DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DDLNDT__TIM_IN_DY&quot; := :new.&quot;CSRQ_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DDLNTIM_BLCK&quot; := :new.&quot;CSRQ_DDLNTIM_BLCK&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DDLNTIM_BLCKUNITTYP&quot; := :new.&quot;CSRQ_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_IS_OK_AFT_DDLN&quot; := :new.&quot;CSRQ_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_ID&quot; := :new.&quot;CSRQ_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_CLNGCMMT&quot; := :new.&quot;CASE_CLNGCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_REONCMMT&quot; := :new.&quot;CASE_REONCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_ACKGDDLN_DT&quot; := :new.&quot;CASE_ACKGDDLN_DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_ACKGDDLN_TIM_IN_DY&quot; := :new.&quot;CASE_ACKGDDLN_TIM_IN_DY&quot;;
    t_cm
_basebase_NEW_rec.&quot;CASE_LAS_CLSD&quot; := :new.&quot;CASE_LAS_CLSD&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_LAS_RPND&quot; := :new.&quot;CASE_LAS_RPND&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_WKFWISTCID&quot; := :new.&quot;CASE_WKFWISTCID&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_CNV_ID&quot; := :new.&quot;CASE_CNV_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_OWNRCHNDFLAG&quot; := :new.&quot;CASE_OWNRCHNDFLAG&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_OWNRCHNDCNT&quot; := :new.&quot;CASE_OWNRCHNDCNT&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_FRSTOPND&quot; := :new.&quot;CASE_FRSTOPND&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_ID&quot; := :new.&quot;CASE_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPB_ID&quot; := :new.&quot;CMPB_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RJTNCMMT&quot; := :new.&quot;CMPQ_RJTNCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_FRSTSBTDAT&quot; := :new.&quot;CMPQ_FRSTSBTDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_LAS_SBTDAT&quot; := :new.&quot;CMPQ_LAS_SBTDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_WKFWISTCID&quot; := :new.&quot;CMPQ_WKFWISTCID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_CNV_ID&quot; := :new.&quot;CMPQ_CNV_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_OWNRCHNDFLAG&quot; := :new.&quot;CMPQ_OWNRCHNDFLAG&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_OWNRCHNDCNT&quot; := :new.&quot;CMPQ_OWNRCHNDCNT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_LAS_RTEDAT&quot; := :new.&quot;CMPQ_LAS_RTEDAT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DDLNTYP&quot; := :new.&quot;CMPQ_DDLNTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DDLNDT__DT&quot; := :new.&quot;CMPQ_DDLNDT__DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DDLNDT__TIM_IN_DY&quot; := :new.&quot;CMPQ_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DDLNTIM_BLCK&quot; := :new.&quot;CMPQ_DDLNTIM_BLCK&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DDLNTIM_BLCKUNITTYP&quot; := :new.&quot;CMPQ_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_IS_OK_AFT_DDLN&quot; := :new.&quot;CMPQ_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_ID&quot; := :new.&quot;CMPQ_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_CLNGCMMT&quot; := :new.&quot;CMPR_CLNGCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_REONCMMT&quot; := :new.&quot;CMPR_REONCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_ACKGDDLN_DT&quot; := :new.&quot;CMPR_ACKGDDLN_DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_ACKGDDLN_TIM_IN_DY&quot; := :new.&quot;CMPR_ACKGDDLN_TIM_IN_DY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_LAS_CLSD
&quot; := :new.&quot;CMPR_LAS_CLSD&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_LAS_RPND&quot; := :new.&quot;CMPR_LAS_RPND&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_WKFWISTCID&quot; := :new.&quot;CMPR_WKFWISTCID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_CNV_ID&quot; := :new.&quot;CMPR_CNV_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_OWNRCHNDFLAG&quot; := :new.&quot;CMPR_OWNRCHNDFLAG&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_OWNRCHNDCNT&quot; := :new.&quot;CMPR_OWNRCHNDCNT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_FRSTOPND&quot; := :new.&quot;CMPR_FRSTOPND&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPR_ID&quot; := :new.&quot;CMPR_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMTB_TMPTTYP&quot; := :new.&quot;CMTB_TMPTTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CMTB_ID&quot; := :new.&quot;CMTB_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_DDLNTYP&quot; := :new.&quot;CRQB_DDLNTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_DDLNDT__DT&quot; := :new.&quot;CRQB_DDLNDT__DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_DDLNDT__TIM_IN_DY&quot; := :new.&quot;CRQB_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_DDLNTIM_BLCK&quot; := :new.&quot;CRQB_DDLNTIM_BLCK&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_DDLNTIM_BLCKUNITTYP&quot; := :new.&quot;CRQB_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_IS_OK_AFT_DDLN&quot; := :new.&quot;CRQB_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_NEW_rec.&quot;CRQB_ID&quot; := :new.&quot;CRQB_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CRTB_ID&quot; := :new.&quot;CRTB_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_DENLRESN&quot; := :new.&quot;CSRQ_DENLRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_LAS_SBTDBY&quot; := :new.&quot;CSRQ_LAS_SBTDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_FRSTSBTDBY&quot; := :new.&quot;CSRQ_FRSTSBTDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RFNGWKFWTSK&quot; := :new.&quot;CSRQ_RFNGWKFWTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSRFNGTSK&quot; := :new.&quot;CSRQ_PRVSRFNGTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSRFNGTSK_PRMN&quot; := :new.&quot;CSRQ_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_OWNR&quot; := :new.&quot;CSRQ_OWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSOWNR&quot; := :new.&quot;CSRQ_PRVSOWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSSNDR&quot; := :new.&quot;CSRQ_PRVSSNDR&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSOWNRPRMN&quot; := :new.&quot;CSRQ_PRVSOWNRPRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_TNFR&quot; := :new.&quot;CSRQ_TNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_PRVSTNFR&quot; :
= :new.&quot;CSRQ_PRVSTNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RCPTTRKG&quot; := :new.&quot;CSRQ_RCPTTRKG&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_LAS_REVW&quot; := :new.&quot;CSRQ_LAS_REVW&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_LAS_RTEDTO&quot; := :new.&quot;CSRQ_LAS_RTEDTO&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RTNGRCPT&quot; := :new.&quot;CSRQ_RTNGRCPT&quot;;
    t_cm_basebase_NEW_rec.&quot;CSRQ_RJTNRESN&quot; := :new.&quot;CSRQ_RJTNRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_CLSRRESN&quot; := :new.&quot;CASE_CLSRRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRJ_OTCM&quot; := :new.&quot;CASE_PRJ_OTCM&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_LAS_CLSDBY&quot; := :new.&quot;CASE_LAS_CLSDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_LAS_RPNDBY&quot; := :new.&quot;CASE_LAS_RPNDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_RFNGWKFWTSK&quot; := :new.&quot;CASE_RFNGWKFWTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSRFNGTSK&quot; := :new.&quot;CASE_PRVSRFNGTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSRFNGTSK_PRMN&quot; := :new.&quot;CASE_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_OWNR&quot; := :new.&quot;CASE_OWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSOWNR&quot; := :new.&quot;CASE_PRVSOWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSSNDR&quot; := :new.&quot;CASE_PRVSSNDR&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSOWNRPRMN&quot; := :new.&quot;CASE_PRVSOWNRPRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_TNFR&quot; := :new.&quot;CASE_TNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_PRVSTNFR&quot; := :new.&quot;CASE_PRVSTNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_RCPTTRKG&quot; := :new.&quot;CASE_RCPTTRKG&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_LAS_REVW&quot; := :new.&quot;CASE_LAS_REVW&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_FRSTOPNDBY&quot; := :new.&quot;CASE_FRSTOPNDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CASE_REONRESN&quot; := :new.&quot;CASE_REONRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_DENLRESN&quot; := :new.&quot;CMPQ_DENLRESN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_LAS_SBTDBY&quot; := :new.&quot;CMPQ_LAS_SBTDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_FRSTSBTDBY&quot; := :new.&quot;CMPQ_FRSTSBTDBY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RFNGWKFWTSK&quot; := :new.&quot;CMPQ_RFNGWKFWTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSRFNGTSK&quot; := :new.&quot;CMPQ_PRVSRFNGTSK&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSRFNGTSK_PRMN&quot; := :new.&quot;CMPQ_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;C
MPQ_OWNR&quot; := :new.&quot;CMPQ_OWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSOWNR&quot; := :new.&quot;CMPQ_PRVSOWNR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSSNDR&quot; := :new.&quot;CMPQ_PRVSSNDR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSOWNRPRMN&quot; := :new.&quot;CMPQ_PRVSOWNRPRMN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_TNFR&quot; := :new.&quot;CMPQ_TNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_PRVSTNFR&quot; := :new.&quot;CMPQ_PRVSTNFR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMPQ_RCPTTRKG&quot; := :new.&quot;CMPQ_RCPTTRKG&quot;;
    t_cm_basebase_NEW_rec.&quot;CLASSTYPE&quot; := :new.&quot;CLASSTYPE&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_C4C_ID&quot; := :new.&quot;CMBB_C4C_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_CRTD&quot; := :new.&quot;CMBB_CRTD&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_LAS_ACT&quot; := :new.&quot;CMBB_LAS_ACT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_LAS_ACT_ACTRTYP&quot; := :new.&quot;CMBB_LAS_ACT_ACTRTYP&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_LAS_ACT_TIM&quot; := :new.&quot;CMBB_LAS_ACT_TIM&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_OBJ_STT&quot; := :new.&quot;CMBB_OBJ_STT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_VERS&quot; := :new.&quot;CMBB_VERS&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_VSBT&quot; := :new.&quot;CMBB_VSBT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_DLTDDT&quot; := :new.&quot;CMBB_DLTDDT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_LAS_ACT_BY&quot; := :new.&quot;CMBB_LAS_ACT_BY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_ORIGCRTR&quot; := :new.&quot;CMBB_ORIGCRTR&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_ORIGCRTRLOGDIN&quot; := :new.&quot;CMBB_ORIGCRTRLOGDIN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_LAS_ACT_BY_LOGDIN&quot; := :new.&quot;CMBB_LAS_ACT_BY_LOGDIN&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_UNIVID&quot; := :new.&quot;CMBB_UNIVID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_RTNGSTNG&quot; := :new.&quot;CMBB_RTNGSTNG&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBB_ID&quot; := :new.&quot;CMBB_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_INI_CNCTDT_TIM__DT&quot; := :new.&quot;CMBS_INI_CNCTDT_TIM__DT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot; := :new.&quot;CMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_DENLCMMT&quot; := :new.&quot;CMBS_DENLCMMT&quot;;
    t_cm_basebase_NEW_rec.&quot;CMBS_ID&quot; := :new.&quot;CMBS_ID&quot;;
    t_cm_basebase_NEW_rec.&quot;CBS_ID&quot; := :new.&quot;CBS_ID&quot;;

    t_cm_basebase_OLD_rec.&quot;CMPQ_LAS_REVW&quot; := :old.&quot;CMPQ_LAS_REVW&quot;;

 t_cm_basebase_OLD_rec.&quot;CMPQ_LAS_RTEDTO&quot; := :old.&quot;CMPQ_LAS_RTEDTO&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RTNGRCPT&quot; := :old.&quot;CMPQ_RTNGRCPT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RJTNRESN&quot; := :old.&quot;CMPQ_RJTNRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_CLSRRESN&quot; := :old.&quot;CMPR_CLSRRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRJ_OTCM&quot; := :old.&quot;CMPR_PRJ_OTCM&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_LAS_CLSDBY&quot; := :old.&quot;CMPR_LAS_CLSDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_LAS_RPNDBY&quot; := :old.&quot;CMPR_LAS_RPNDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_RFNGWKFWTSK&quot; := :old.&quot;CMPR_RFNGWKFWTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSRFNGTSK&quot; := :old.&quot;CMPR_PRVSRFNGTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSRFNGTSK_PRMN&quot; := :old.&quot;CMPR_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_OWNR&quot; := :old.&quot;CMPR_OWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSOWNR&quot; := :old.&quot;CMPR_PRVSOWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSSNDR&quot; := :old.&quot;CMPR_PRVSSNDR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSOWNRPRMN&quot; := :old.&quot;CMPR_PRVSOWNRPRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_TNFR&quot; := :old.&quot;CMPR_TNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_PRVSTNFR&quot; := :old.&quot;CMPR_PRVSTNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_RCPTTRKG&quot; := :old.&quot;CMPR_RCPTTRKG&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_LAS_REVW&quot; := :old.&quot;CMPR_LAS_REVW&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_FRSTOPNDBY&quot; := :old.&quot;CMPR_FRSTOPNDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_REONRESN&quot; := :old.&quot;CMPR_REONRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_SRC&quot; := :old.&quot;CMBB_SRC&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_TYP&quot; := :old.&quot;CMBB_TYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_RESN&quot; := :old.&quot;CMBB_RESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_PITY&quot; := :old.&quot;CMBB_PITY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_SVTY&quot; := :old.&quot;CMBB_SVTY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_OWNROBST&quot; := :old.&quot;CMBB_OWNROBST&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_PMRYPVDR&quot; := :old.&quot;CMBB_PMRYPVDR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_RTNGRCPT&quot; := :old.&quot;CMBB_RTNGRCPT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_MEMB&quot; := :old.&quot;CMBS_MEMB&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_TMPT&quot; := :old.&quot;CMBS_TMPT&quot;;
    t_cm_basebase
_OLD_rec.&quot;CMBS_PAT_ID_QRY&quot; := :old.&quot;CMBS_PAT_ID_QRY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_QRY_STTS&quot; := :old.&quot;CMBS_QRY_STTS&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RTNGPEER&quot; := :old.&quot;CSRQ_RTNGPEER&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_REQT&quot; := :old.&quot;CASE_REQT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RTNGPEER&quot; := :old.&quot;CMPQ_RTNGPEER&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_REQT&quot; := :old.&quot;CMPR_REQT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMTB_AMTN&quot; := :old.&quot;CMTB_AMTN&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RJTNCMMT&quot; := :old.&quot;CSRQ_RJTNCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_FRSTSBTDAT&quot; := :old.&quot;CSRQ_FRSTSBTDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_LAS_SBTDAT&quot; := :old.&quot;CSRQ_LAS_SBTDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_WKFWISTCID&quot; := :old.&quot;CSRQ_WKFWISTCID&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_CNV_ID&quot; := :old.&quot;CSRQ_CNV_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_OWNRCHNDFLAG&quot; := :old.&quot;CSRQ_OWNRCHNDFLAG&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_OWNRCHNDCNT&quot; := :old.&quot;CSRQ_OWNRCHNDCNT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_LAS_RTEDAT&quot; := :old.&quot;CSRQ_LAS_RTEDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DDLNTYP&quot; := :old.&quot;CSRQ_DDLNTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DDLNDT__DT&quot; := :old.&quot;CSRQ_DDLNDT__DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DDLNDT__TIM_IN_DY&quot; := :old.&quot;CSRQ_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DDLNTIM_BLCK&quot; := :old.&quot;CSRQ_DDLNTIM_BLCK&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DDLNTIM_BLCKUNITTYP&quot; := :old.&quot;CSRQ_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_IS_OK_AFT_DDLN&quot; := :old.&quot;CSRQ_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_ID&quot; := :old.&quot;CSRQ_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_CLNGCMMT&quot; := :old.&quot;CASE_CLNGCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_REONCMMT&quot; := :old.&quot;CASE_REONCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_ACKGDDLN_DT&quot; := :old.&quot;CASE_ACKGDDLN_DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_ACKGDDLN_TIM_IN_DY&quot; := :old.&quot;CASE_ACKGDDLN_TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_LAS_CLSD&quot; := :old.&quot;CASE_LAS_CLSD&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_LAS_RPND&quot; := :old.&quot;CASE_LAS_RPND&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_WKFWISTCID&quot; := :old.&quot;CASE_W
KFWISTCID&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_CNV_ID&quot; := :old.&quot;CASE_CNV_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_OWNRCHNDFLAG&quot; := :old.&quot;CASE_OWNRCHNDFLAG&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_OWNRCHNDCNT&quot; := :old.&quot;CASE_OWNRCHNDCNT&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_FRSTOPND&quot; := :old.&quot;CASE_FRSTOPND&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_ID&quot; := :old.&quot;CASE_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPB_ID&quot; := :old.&quot;CMPB_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RJTNCMMT&quot; := :old.&quot;CMPQ_RJTNCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_FRSTSBTDAT&quot; := :old.&quot;CMPQ_FRSTSBTDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_LAS_SBTDAT&quot; := :old.&quot;CMPQ_LAS_SBTDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_WKFWISTCID&quot; := :old.&quot;CMPQ_WKFWISTCID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_CNV_ID&quot; := :old.&quot;CMPQ_CNV_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_OWNRCHNDFLAG&quot; := :old.&quot;CMPQ_OWNRCHNDFLAG&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_OWNRCHNDCNT&quot; := :old.&quot;CMPQ_OWNRCHNDCNT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_LAS_RTEDAT&quot; := :old.&quot;CMPQ_LAS_RTEDAT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DDLNTYP&quot; := :old.&quot;CMPQ_DDLNTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DDLNDT__DT&quot; := :old.&quot;CMPQ_DDLNDT__DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DDLNDT__TIM_IN_DY&quot; := :old.&quot;CMPQ_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DDLNTIM_BLCK&quot; := :old.&quot;CMPQ_DDLNTIM_BLCK&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DDLNTIM_BLCKUNITTYP&quot; := :old.&quot;CMPQ_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_IS_OK_AFT_DDLN&quot; := :old.&quot;CMPQ_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_ID&quot; := :old.&quot;CMPQ_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_CLNGCMMT&quot; := :old.&quot;CMPR_CLNGCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_REONCMMT&quot; := :old.&quot;CMPR_REONCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_ACKGDDLN_DT&quot; := :old.&quot;CMPR_ACKGDDLN_DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_ACKGDDLN_TIM_IN_DY&quot; := :old.&quot;CMPR_ACKGDDLN_TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_LAS_CLSD&quot; := :old.&quot;CMPR_LAS_CLSD&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_LAS_RPND&quot; := :old.&quot;CMPR_LAS_RPND&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_WKFWISTCID&quot; := :old.&quot;CMPR_WKFWISTCID&quot;;
    t_cm_basebase_OL
D_rec.&quot;CMPR_CNV_ID&quot; := :old.&quot;CMPR_CNV_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_OWNRCHNDFLAG&quot; := :old.&quot;CMPR_OWNRCHNDFLAG&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_OWNRCHNDCNT&quot; := :old.&quot;CMPR_OWNRCHNDCNT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_FRSTOPND&quot; := :old.&quot;CMPR_FRSTOPND&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPR_ID&quot; := :old.&quot;CMPR_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMTB_TMPTTYP&quot; := :old.&quot;CMTB_TMPTTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CMTB_ID&quot; := :old.&quot;CMTB_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_DDLNTYP&quot; := :old.&quot;CRQB_DDLNTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_DDLNDT__DT&quot; := :old.&quot;CRQB_DDLNDT__DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_DDLNDT__TIM_IN_DY&quot; := :old.&quot;CRQB_DDLNDT__TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_DDLNTIM_BLCK&quot; := :old.&quot;CRQB_DDLNTIM_BLCK&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_DDLNTIM_BLCKUNITTYP&quot; := :old.&quot;CRQB_DDLNTIM_BLCKUNITTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_IS_OK_AFT_DDLN&quot; := :old.&quot;CRQB_IS_OK_AFT_DDLN&quot;;
    t_cm_basebase_OLD_rec.&quot;CRQB_ID&quot; := :old.&quot;CRQB_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CRTB_ID&quot; := :old.&quot;CRTB_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_DENLRESN&quot; := :old.&quot;CSRQ_DENLRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_LAS_SBTDBY&quot; := :old.&quot;CSRQ_LAS_SBTDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_FRSTSBTDBY&quot; := :old.&quot;CSRQ_FRSTSBTDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RFNGWKFWTSK&quot; := :old.&quot;CSRQ_RFNGWKFWTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSRFNGTSK&quot; := :old.&quot;CSRQ_PRVSRFNGTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSRFNGTSK_PRMN&quot; := :old.&quot;CSRQ_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_OWNR&quot; := :old.&quot;CSRQ_OWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSOWNR&quot; := :old.&quot;CSRQ_PRVSOWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSSNDR&quot; := :old.&quot;CSRQ_PRVSSNDR&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSOWNRPRMN&quot; := :old.&quot;CSRQ_PRVSOWNRPRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_TNFR&quot; := :old.&quot;CSRQ_TNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_PRVSTNFR&quot; := :old.&quot;CSRQ_PRVSTNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RCPTTRKG&quot; := :old.&quot;CSRQ_RCPTTRKG&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_LAS_REVW&quot; := :old.&quot;CSRQ_LAS_REVW&quot;;
    t_cm_basebase_OLD_rec.&quot;
CSRQ_LAS_RTEDTO&quot; := :old.&quot;CSRQ_LAS_RTEDTO&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RTNGRCPT&quot; := :old.&quot;CSRQ_RTNGRCPT&quot;;
    t_cm_basebase_OLD_rec.&quot;CSRQ_RJTNRESN&quot; := :old.&quot;CSRQ_RJTNRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_CLSRRESN&quot; := :old.&quot;CASE_CLSRRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRJ_OTCM&quot; := :old.&quot;CASE_PRJ_OTCM&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_LAS_CLSDBY&quot; := :old.&quot;CASE_LAS_CLSDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_LAS_RPNDBY&quot; := :old.&quot;CASE_LAS_RPNDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_RFNGWKFWTSK&quot; := :old.&quot;CASE_RFNGWKFWTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSRFNGTSK&quot; := :old.&quot;CASE_PRVSRFNGTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSRFNGTSK_PRMN&quot; := :old.&quot;CASE_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_OWNR&quot; := :old.&quot;CASE_OWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSOWNR&quot; := :old.&quot;CASE_PRVSOWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSSNDR&quot; := :old.&quot;CASE_PRVSSNDR&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSOWNRPRMN&quot; := :old.&quot;CASE_PRVSOWNRPRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_TNFR&quot; := :old.&quot;CASE_TNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_PRVSTNFR&quot; := :old.&quot;CASE_PRVSTNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_RCPTTRKG&quot; := :old.&quot;CASE_RCPTTRKG&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_LAS_REVW&quot; := :old.&quot;CASE_LAS_REVW&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_FRSTOPNDBY&quot; := :old.&quot;CASE_FRSTOPNDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CASE_REONRESN&quot; := :old.&quot;CASE_REONRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_DENLRESN&quot; := :old.&quot;CMPQ_DENLRESN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_LAS_SBTDBY&quot; := :old.&quot;CMPQ_LAS_SBTDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_FRSTSBTDBY&quot; := :old.&quot;CMPQ_FRSTSBTDBY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RFNGWKFWTSK&quot; := :old.&quot;CMPQ_RFNGWKFWTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_PRVSRFNGTSK&quot; := :old.&quot;CMPQ_PRVSRFNGTSK&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_PRVSRFNGTSK_PRMN&quot; := :old.&quot;CMPQ_PRVSRFNGTSK_PRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_OWNR&quot; := :old.&quot;CMPQ_OWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_PRVSOWNR&quot; := :old.&quot;CMPQ_PRVSOWNR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_PRVSSNDR&quot; := :old.&quot;CMPQ_PRVSSNDR&quot;;
    t_cm_basebase_OL
D_rec.&quot;CMPQ_PRVSOWNRPRMN&quot; := :old.&quot;CMPQ_PRVSOWNRPRMN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_TNFR&quot; := :old.&quot;CMPQ_TNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_PRVSTNFR&quot; := :old.&quot;CMPQ_PRVSTNFR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMPQ_RCPTTRKG&quot; := :old.&quot;CMPQ_RCPTTRKG&quot;;
    t_cm_basebase_OLD_rec.&quot;CLASSTYPE&quot; := :old.&quot;CLASSTYPE&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_C4C_ID&quot; := :old.&quot;CMBB_C4C_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_CRTD&quot; := :old.&quot;CMBB_CRTD&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_LAS_ACT&quot; := :old.&quot;CMBB_LAS_ACT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_LAS_ACT_ACTRTYP&quot; := :old.&quot;CMBB_LAS_ACT_ACTRTYP&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_LAS_ACT_TIM&quot; := :old.&quot;CMBB_LAS_ACT_TIM&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_OBJ_STT&quot; := :old.&quot;CMBB_OBJ_STT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_VERS&quot; := :old.&quot;CMBB_VERS&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_VSBT&quot; := :old.&quot;CMBB_VSBT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_DLTDDT&quot; := :old.&quot;CMBB_DLTDDT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_LAS_ACT_BY&quot; := :old.&quot;CMBB_LAS_ACT_BY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_ORIGCRTR&quot; := :old.&quot;CMBB_ORIGCRTR&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_ORIGCRTRLOGDIN&quot; := :old.&quot;CMBB_ORIGCRTRLOGDIN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_LAS_ACT_BY_LOGDIN&quot; := :old.&quot;CMBB_LAS_ACT_BY_LOGDIN&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_UNIVID&quot; := :old.&quot;CMBB_UNIVID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_RTNGSTNG&quot; := :old.&quot;CMBB_RTNGSTNG&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBB_ID&quot; := :old.&quot;CMBB_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_INI_CNCTDT_TIM__DT&quot; := :old.&quot;CMBS_INI_CNCTDT_TIM__DT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot; := :old.&quot;CMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_DENLCMMT&quot; := :old.&quot;CMBS_DENLCMMT&quot;;
    t_cm_basebase_OLD_rec.&quot;CMBS_ID&quot; := :old.&quot;CMBS_ID&quot;;
    t_cm_basebase_OLD_rec.&quot;CBS_ID&quot; := :old.&quot;CBS_ID&quot;;

    pkg_dac_aggr.RowProcessForDIAG_CM(t_cm_basebase_OLD_rec,t_cm_basebase_NEW_rec);
  end;









</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
40
</td>
<td>
THH_C4C
</td>
<td>
TRG_CCPR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_CSFNPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CCPR_AUDITINSERT&quot; BEFORE INSERT ON T_CM_CSFNPVRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ccpr_crtd IS NULL THEN 
    :new.ccpr_crtd := curr_date; 
  END IF; 

  IF :new.ccpr_las_act_tim IS NULL THEN 
    :new.ccpr_las_act_tim := curr_date; 
  END IF; 

  IF :new.ccpr_las_act IS NULL THEN 
    :new.ccpr_las_act := 1; 
  END IF; 

  IF :new.ccpr_obj_stt IS NULL THEN 
    :new.ccpr_obj_stt := 1; 
  END IF; 

  IF :new.ccpr_vers IS NULL THEN 
    :new.ccpr_vers := 0; 
  END IF; 

  IF :new.ccpr_vsbt IS NULL THEN 
    :new.ccpr_vsbt := 1001; 
  END IF; 

  IF :new.ccpr_las_act_by IS NULL THEN 
    :new.ccpr_las_act_by := 1; 
  END IF; 

  IF :new.ccpr_origcrtr IS NULL THEN 
    :new.ccpr_origcrtr := 1; 
  END IF; 

  IF :new.ccpr_origcrtrlogdin IS NULL THEN 
    :new.ccpr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ccpr_las_act_by_logdin IS NULL THEN 
    :new.ccpr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cm_csfnpvrs 
  ( 
   classtype, 
   ccpr_c4c_id, 
   ccpr_crtd, 
   ccpr_las_act, 
   ccpr_las_act_actrtyp, 
   ccpr_obj_stt, 
   ccpr_vers, 
   ccpr_vsbt, 
   ccpr_dltddt, 
   ccpr_las_act_by, 
   ccpr_origcrtr, 
   ccpr_origcrtrlogdin, 
   ccpr_las_act_by_logdin, 
   ccpr_univid, 
   ccpr_csfn, 
   ccpr_pvrs, 
   ccpr_id, 
   valid_from, 
   valid_to , 
   ccpr_audid, 
   ccpr_prev_audid, 
   ccpr_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ccpr_c4c_id,
   :new.ccpr_crtd,
   :new.ccpr_las_act,
   :new.ccpr_las_act_actrtyp,
   :new.ccpr_obj_stt,
   :new.ccpr_vers,
   :new.ccpr_vsbt,
   :new.ccpr_dltddt,
   :new.ccpr_las_act_by,
   :new.ccpr_origcrtr,
   :new.ccpr_origcrtrlogdin,
   :new.ccpr_las_act_by_logdin,
   :new.ccpr_univid,
   :new.ccpr_csfn,
   :new.ccpr_pvrs, 
   :new.ccpr_id, 
   :new.ccpr_las_act_tim, 
   NULL, 
   u_cm_csfnpvrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
41
</td>
<td>
THH_C4C
</td>
<td>
TRG_CCPR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_CSFNPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ccpr_auditupdate BEFORE
  UPDATE
    ON T_CM_CSFNPVRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ccpr_audid
      INTO
        last_audid
      FROM
        a_cm_csfnpvrs
      WHERE
        ccpr_id            = :old.ccpr_id
      AND ccpr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ccpr_las_act_tim = :new.ccpr_las_act_tim THEN
      UPDATE
        a_cm_csfnpvrs
      SET
        classtype              = :new.classtype,
        ccpr_c4c_id            = :new.ccpr_c4c_id,
        ccpr_crtd              = :new.ccpr_crtd,
        ccpr_las_act           = :new.ccpr_las_act,
        ccpr_las_act_actrtyp   = :new.ccpr_las_act_actrtyp,
        ccpr_obj_stt           = :new.ccpr_obj_stt,
        ccpr_vers              = :new.ccpr_vers,
        ccpr_vsbt              = :new.ccpr_vsbt,
        ccpr_dltddt            = :new.ccpr_dltddt,
        ccpr_las_act_by        = :new.ccpr_las_act_by,
        ccpr_origcrtr          = :new.ccpr_origcrtr,
        ccpr_origcrtrlogdin    = :new.ccpr_origcrtrlogdin,
        ccpr_las_act_by_logdin = :new.ccpr_las_act_by_logdin,
        ccpr_univid            = :new.ccpr_univid,
        ccpr_csfn              = :new.ccpr_csfn,
        ccpr_pvrs              = :new.ccpr_pvrs
      WHERE
        ccpr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cm_csfnpvrs
        (
          classtype,
          ccpr_c4c_id,
          ccpr_crtd,
          ccpr_las_act,
          ccpr_las_act_actrtyp,
          ccpr_obj_stt,
          ccpr_vers,
          ccpr_vsbt,
          ccpr_dltddt,
          ccpr_las_act_by,
          ccpr_origcrtr,
          ccpr_origcrtrlogdin,
          ccpr_las_act_by_logdin,

      ccpr_univid,
          ccpr_csfn,
          ccpr_pvrs,
          ccpr_id,
          valid_from,
          valid_to,
          ccpr_audid,
          ccpr_prev_audid,
          ccpr_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ccpr_c4c_id,
          :new.ccpr_crtd,
          :new.ccpr_las_act,
          :new.ccpr_las_act_actrtyp,
          :new.ccpr_obj_stt,
          :new.ccpr_vers,
          :new.ccpr_vsbt,
          :new.ccpr_dltddt,
          :new.ccpr_las_act_by,
          :new.ccpr_origcrtr,
          :new.ccpr_origcrtrlogdin,
          :new.ccpr_las_act_by_logdin,
          :new.ccpr_univid,
          :new.ccpr_csfn,
          :new.ccpr_pvrs,
          :new.ccpr_id,
          :new.ccpr_las_act_tim,
          NULL,
          u_cm_csfnpvrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cm_csfnpvrs
      SET
        valid_to        = :new.ccpr_las_act_tim,
        ccpr_next_audid = u_cm_csfnpvrs.CURRVAL
      WHERE
        ccpr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
42
</td>
<td>
THH_C4C
</td>
<td>
TRG_CMNR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_NTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CMNR_AUDITINSERT&quot; BEFORE INSERT ON T_CM_NTCERCTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.cmnr_crtd IS NULL THEN 
    :new.cmnr_crtd := curr_date; 
  END IF; 

  IF :new.cmnr_las_act_tim IS NULL THEN 
    :new.cmnr_las_act_tim := curr_date; 
  END IF; 

  IF :new.cmnr_las_act IS NULL THEN 
    :new.cmnr_las_act := 1; 
  END IF; 

  IF :new.cmnr_obj_stt IS NULL THEN 
    :new.cmnr_obj_stt := 1; 
  END IF; 

  IF :new.cmnr_vers IS NULL THEN 
    :new.cmnr_vers := 0; 
  END IF; 

  IF :new.cmnr_vsbt IS NULL THEN 
    :new.cmnr_vsbt := 1001; 
  END IF; 

  IF :new.cmnr_las_act_by IS NULL THEN 
    :new.cmnr_las_act_by := 1; 
  END IF; 

  IF :new.cmnr_origcrtr IS NULL THEN 
    :new.cmnr_origcrtr := 1; 
  END IF; 

  IF :new.cmnr_origcrtrlogdin IS NULL THEN 
    :new.cmnr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.cmnr_las_act_by_logdin IS NULL THEN 
    :new.cmnr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cm_ntcercts 
  ( 
   classtype, 
   cmnr_c4c_id, 
   cmnr_crtd, 
   cmnr_las_act, 
   cmnr_las_act_actrtyp, 
   cmnr_obj_stt, 
   cmnr_vers, 
   cmnr_vsbt, 
   cmnr_dltddt, 
   cmnr_las_act_by, 
   cmnr_origcrtr, 
   cmnr_origcrtrlogdin, 
   cmnr_las_act_by_logdin, 
   cmnr_univid, 
   cmnr_cm_rec, 
   cmnr_ntcercts, 
   cmnr_id, 
   valid_from, 
   valid_to , 
   cmnr_audid, 
   cmnr_prev_audid, 
   cmnr_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.cmnr_c4c_id,
   :new.cmnr_crtd,
   :new.cmnr_las_act,
   :new.cmnr_las_act_actrtyp,
   :new.cmnr_obj_stt,
   :new.cmnr_vers,
   :new.cmnr_vsbt,
   :new.cmnr_dltddt,
   :new.cmnr_las_act_by,
   :new.cmnr_origcrtr,
   :new.cmnr_origcrtrlogdin,
   :new.cmnr_las_act_by_logdin,
   :new.cmnr_univid,
   :new.cmnr_cm_rec,
   :new.cmnr_ntcercts, 
   :new.cmnr_id, 
   :new.cmnr_las_act_tim, 
   NULL, 
   u_cm_ntcercts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
43
</td>
<td>
THH_C4C
</td>
<td>
TRG_CMNR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CM_NTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cmnr_auditupdate BEFORE
  UPDATE
    ON T_CM_NTCERCTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cmnr_audid
      INTO
        last_audid
      FROM
        a_cm_ntcercts
      WHERE
        cmnr_id            = :old.cmnr_id
      AND cmnr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cmnr_las_act_tim = :new.cmnr_las_act_tim THEN
      UPDATE
        a_cm_ntcercts
      SET
        classtype              = :new.classtype,
        cmnr_c4c_id            = :new.cmnr_c4c_id,
        cmnr_crtd              = :new.cmnr_crtd,
        cmnr_las_act           = :new.cmnr_las_act,
        cmnr_las_act_actrtyp   = :new.cmnr_las_act_actrtyp,
        cmnr_obj_stt           = :new.cmnr_obj_stt,
        cmnr_vers              = :new.cmnr_vers,
        cmnr_vsbt              = :new.cmnr_vsbt,
        cmnr_dltddt            = :new.cmnr_dltddt,
        cmnr_las_act_by        = :new.cmnr_las_act_by,
        cmnr_origcrtr          = :new.cmnr_origcrtr,
        cmnr_origcrtrlogdin    = :new.cmnr_origcrtrlogdin,
        cmnr_las_act_by_logdin = :new.cmnr_las_act_by_logdin,
        cmnr_univid            = :new.cmnr_univid,
        cmnr_cm_rec            = :new.cmnr_cm_rec,
        cmnr_ntcercts          = :new.cmnr_ntcercts
      WHERE
        cmnr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cm_ntcercts
        (
          classtype,
          cmnr_c4c_id,
          cmnr_crtd,
          cmnr_las_act,
          cmnr_las_act_actrtyp,
          cmnr_obj_stt,
          cmnr_vers,
          cmnr_vsbt,
          cmnr_dltddt,
          cmnr_las_act_by,
          cmnr_origcrtr,
          cmnr_origcrtrlogdin,
          cmnr_las_act_by_logdin
,
          cmnr_univid,
          cmnr_cm_rec,
          cmnr_ntcercts,
          cmnr_id,
          valid_from,
          valid_to,
          cmnr_audid,
          cmnr_prev_audid,
          cmnr_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.cmnr_c4c_id,
          :new.cmnr_crtd,
          :new.cmnr_las_act,
          :new.cmnr_las_act_actrtyp,
          :new.cmnr_obj_stt,
          :new.cmnr_vers,
          :new.cmnr_vsbt,
          :new.cmnr_dltddt,
          :new.cmnr_las_act_by,
          :new.cmnr_origcrtr,
          :new.cmnr_origcrtrlogdin,
          :new.cmnr_las_act_by_logdin,
          :new.cmnr_univid,
          :new.cmnr_cm_rec,
          :new.cmnr_ntcercts,
          :new.cmnr_id,
          :new.cmnr_las_act_tim,
          NULL,
          u_cm_ntcercts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cm_ntcercts
      SET
        valid_to        = :new.cmnr_las_act_tim,
        cmnr_next_audid = u_cm_ntcercts.CURRVAL
      WHERE
        cmnr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
44
</td>
<td>
THH_C4C
</td>
<td>
TRG_COAT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNCT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_coat_auditinsert before insert on t_cnct
-- CAREMGR-18303: Add Contact Relationship
  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    curr_date date;
  begin
    curr_date := current_date;
    if :new.coat_crtd is null then
      :new.coat_crtd := curr_date;
    end if;
    if :new.coat_las_act_tim is null then
      :new.coat_las_act_tim := curr_date;
    end if;
    if :new.coat_las_act is null then
      :new.coat_las_act := 1;
    end if;
    if :new.coat_obj_stt is null then
      :new.coat_obj_stt := 1;
    end if;
    if :new.coat_vers is null then
      :new.coat_vers := 0;
    end if;
    if :new.coat_vsbt is null then
      :new.coat_vsbt := 1001;
    end if;
    if :new.coat_las_act_by is null then
      :new.coat_las_act_by := 1;
    end if;
    if :new.coat_origcrtr is null then
      :new.coat_origcrtr := 1;
    end if;
    if :new.coat_origcrtrlogdin is null then
      :new.coat_origcrtrlogdin := 1;
    end if;
    if :new.coat_las_act_by_logdin is null then
      :new.coat_las_act_by_logdin := 1;
    end if;
    insert into a_cnct (
      classtype,
      coat_c4c_id,
      coat_crtd,
      coat_las_act,
      coat_las_act_actrtyp,
      coat_obj_stt,
      coat_vers,
      coat_vsbt,
      coat_dltddt,
      coat_las_act_by,
      coat_origcrtr,
      coat_origcrtrlogdin,
      coat_las_act_by_logdin,
      coat_univid,
      scnt_id,
      rlct_id,
      coat_dtls,
      coat_cncttyp,
      rlct_usr,
      coat_id,
      valid_from,
      valid_to ,
      coat_audid,
      coat_prev_audid,
      coat_next_audid,
      coat_contact_relationship,
	  coat_ctp
    ) values (
      :new.classtype,
      :new.coat_c4c_id,
      :new.coat_crtd,
      :new.coat_las_act,
      :new.coat_las_act_actrtyp,
      :new.coat_obj_stt,
      :new.coat_vers,
      :new.coat_vsbt,
      :new.coat_dltddt,
      :new.coat_las_act_by,
      :new.coat_origcrtr,
      :new.coat_origcrtrlogdin,
      :new.coat_las_act_by_logdin,
      :new.coat_univid,
      :new.scnt_id,
      :new.rlct_id,
      :new.coat_dtls,
      :new.coat_cncttyp,
      :new.rlct_usr,
      :new.coat_id,
      :new.coa
t_las_act_tim,
      null,
      u_cnct.nextval,
      null,
      null,
      :new.coat_contact_relationship,
	  :new.coat_ctp
    );
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
45
</td>
<td>
THH_C4C
</td>
<td>
TRG_COAT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNCT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_coat_auditupdate before update on t_cnct
-- CAREMGR-18303: Add Contact Relationship
  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    last_audid number;
  begin
    begin
      select coat_audid into last_audid
      from a_cnct
      where
        coat_id = :old.coat_id
        and
        coat_next_audid is null
        and
        rownum &lt; 2 for update;
    exception
      when no_data_found then
        last_audid := null;
    end;
    -- LastActionTime has not changed - no new transaction
    if :old.coat_las_act_tim = :new.coat_las_act_tim then
      update a_cnct set
        classtype                 = :new.classtype,
        coat_c4c_id               = :new.coat_c4c_id,
        coat_crtd                 = :new.coat_crtd,
        coat_las_act              = :new.coat_las_act,
        coat_las_act_actrtyp      = :new.coat_las_act_actrtyp,
        coat_obj_stt              = :new.coat_obj_stt,
        coat_vers                 = :new.coat_vers,
        coat_vsbt                 = :new.coat_vsbt,
        coat_dltddt               = :new.coat_dltddt,
        coat_las_act_by           = :new.coat_las_act_by,
        coat_origcrtr             = :new.coat_origcrtr,
        coat_origcrtrlogdin       = :new.coat_origcrtrlogdin,
        coat_las_act_by_logdin    = :new.coat_las_act_by_logdin,
        coat_univid               = :new.coat_univid,
        scnt_id                   = :new.scnt_id,
        rlct_id                   = :new.rlct_id,
        coat_dtls                 = :new.coat_dtls,
        coat_cncttyp              = :new.coat_cncttyp,
        rlct_usr                  = :new.rlct_usr,
        coat_contact_relationship  = :new.coat_contact_relationship,
		coat_ctp				  =  :new.coat_ctp
      where
        coat_audid = last_audid;
      -- LastActionTime has changed - new transaction in place
    else
      -- insert new values introduced by new transaction
      insert into a_cnct (
        classtype,
        coat_c4c_id,
        coat_crtd,
        coat_las_act,
        coat_las_act_actrtyp,
        coat_obj_stt,
        coat_vers,
        coat_vsbt,
        coat_dltddt,

    coat_las_act_by,
        coat_origcrtr,
        coat_origcrtrlogdin,
        coat_las_act_by_logdin,
        coat_univid,
        scnt_id,
        rlct_id,
        coat_dtls,
        coat_cncttyp,
        rlct_usr,
        coat_id,
        valid_from,
        valid_to,
        coat_audid,
        coat_prev_audid,
        coat_next_audid,
        coat_contact_relationship,
		coat_ctp
      ) values (
        :new.classtype,
        :new.coat_c4c_id,
        :new.coat_crtd,
        :new.coat_las_act,
        :new.coat_las_act_actrtyp,
        :new.coat_obj_stt,
        :new.coat_vers,
        :new.coat_vsbt,
        :new.coat_dltddt,
        :new.coat_las_act_by,
        :new.coat_origcrtr,
        :new.coat_origcrtrlogdin,
        :new.coat_las_act_by_logdin,
        :new.coat_univid,
        :new.scnt_id,
        :new.rlct_id,
        :new.coat_dtls,
        :new.coat_cncttyp,
        :new.rlct_usr,
        :new.coat_id,
        :new.coat_las_act_tim,
        null,
        u_cnct.nextval,
        last_audid,
        null,
        :new.coat_contact_relationship,
		:new.coat_ctp
      );
      -- update last audit record's valid_to to new LastActionTime and next audit ID to newly inserted record's sequence number
      update a_cnct
        set
          valid_to = :new.coat_las_act_tim,
          coat_next_audid = u_cnct.currval
        where
          coat_audid = last_audid;
    end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
46
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSFE_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNRTSRVCFEES
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CSFE_AUDITINSERT&quot; BEFORE INSERT ON T_CNRTSRVCFEES FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.csfe_crtd IS NULL THEN 
    :new.csfe_crtd := curr_date; 
  END IF; 

  IF :new.csfe_las_act_tim IS NULL THEN 
    :new.csfe_las_act_tim := curr_date; 
  END IF; 

  IF :new.csfe_las_act IS NULL THEN 
    :new.csfe_las_act := 1; 
  END IF; 

  IF :new.csfe_obj_stt IS NULL THEN 
    :new.csfe_obj_stt := 1; 
  END IF; 

  IF :new.csfe_vers IS NULL THEN 
    :new.csfe_vers := 0; 
  END IF; 

  IF :new.csfe_vsbt IS NULL THEN 
    :new.csfe_vsbt := 1001; 
  END IF; 

  IF :new.csfe_las_act_by IS NULL THEN 
    :new.csfe_las_act_by := 1; 
  END IF; 

  IF :new.csfe_origcrtr IS NULL THEN 
    :new.csfe_origcrtr := 1; 
  END IF; 

  IF :new.csfe_origcrtrlogdin IS NULL THEN 
    :new.csfe_origcrtrlogdin := 1; 
  END IF; 

  IF :new.csfe_las_act_by_logdin IS NULL THEN 
    :new.csfe_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cnrtsrvcfees 
  ( 
   classtype, 
   csfe_c4c_id, 
   csfe_crtd, 
   csfe_las_act, 
   csfe_las_act_actrtyp, 
   csfe_obj_stt, 
   csfe_vers, 
   csfe_vsbt, 
   csfe_dltddt, 
   csfe_las_act_by, 
   csfe_origcrtr, 
   csfe_origcrtrlogdin, 
   csfe_las_act_by_logdin, 
   csfe_univid, 
   csfe_cost, 
   csfe_srvc, 
   csfe_pvdr, 
   csfe_id, 
   valid_from, 
   valid_to , 
   csfe_audid, 
   csfe_prev_audid, 
   csfe_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.csfe_c4c_id,
   :new.csfe_crtd,
   :new.csfe_las_act,
   :new.csfe_las_act_actrtyp,
   :new.csfe_obj_stt,
   :new.csfe_vers,
   :new.csfe_vsbt,
   :new.csfe_dltddt,
   :new.csfe_las_act_by,
   :new.csfe_origcrtr,
   :new.csfe_origcrtrlogdin,
   :new.csfe_las_act_by_logdin,
   :new.csfe_univid,
   :new.csfe_cost,
   :new.csfe_srvc,
   :new.csfe_pvdr, 
   :new.csfe_id, 
   :new.csfe_las_act_tim, 
   NULL, 
   u_cnrtsrvcfees.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
47
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSFE_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNRTSRVCFEES
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_csfe_auditupdate BEFORE
  UPDATE
    ON T_CNRTSRVCFEES FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        csfe_audid
      INTO
        last_audid
      FROM
        a_cnrtsrvcfees
      WHERE
        csfe_id            = :old.csfe_id
      AND csfe_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.csfe_las_act_tim = :new.csfe_las_act_tim THEN
      UPDATE
        a_cnrtsrvcfees
      SET
        classtype              = :new.classtype,
        csfe_c4c_id            = :new.csfe_c4c_id,
        csfe_crtd              = :new.csfe_crtd,
        csfe_las_act           = :new.csfe_las_act,
        csfe_las_act_actrtyp   = :new.csfe_las_act_actrtyp,
        csfe_obj_stt           = :new.csfe_obj_stt,
        csfe_vers              = :new.csfe_vers,
        csfe_vsbt              = :new.csfe_vsbt,
        csfe_dltddt            = :new.csfe_dltddt,
        csfe_las_act_by        = :new.csfe_las_act_by,
        csfe_origcrtr          = :new.csfe_origcrtr,
        csfe_origcrtrlogdin    = :new.csfe_origcrtrlogdin,
        csfe_las_act_by_logdin = :new.csfe_las_act_by_logdin,
        csfe_univid            = :new.csfe_univid,
        csfe_cost              = :new.csfe_cost,
        csfe_srvc              = :new.csfe_srvc,
        csfe_pvdr              = :new.csfe_pvdr
      WHERE
        csfe_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cnrtsrvcfees
        (
          classtype,
          csfe_c4c_id,
          csfe_crtd,
          csfe_las_act,
          csfe_las_act_actrtyp,
          csfe_obj_stt,
          csfe_vers,
          csfe_vsbt,
          csfe_dltddt,
          csfe_las_act_by,
          csfe_origcrtr,
          csfe_or
igcrtrlogdin,
          csfe_las_act_by_logdin,
          csfe_univid,
          csfe_cost,
          csfe_srvc,
          csfe_pvdr,
          csfe_id,
          valid_from,
          valid_to,
          csfe_audid,
          csfe_prev_audid,
          csfe_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.csfe_c4c_id,
          :new.csfe_crtd,
          :new.csfe_las_act,
          :new.csfe_las_act_actrtyp,
          :new.csfe_obj_stt,
          :new.csfe_vers,
          :new.csfe_vsbt,
          :new.csfe_dltddt,
          :new.csfe_las_act_by,
          :new.csfe_origcrtr,
          :new.csfe_origcrtrlogdin,
          :new.csfe_las_act_by_logdin,
          :new.csfe_univid,
          :new.csfe_cost,
          :new.csfe_srvc,
          :new.csfe_pvdr,
          :new.csfe_id,
          :new.csfe_las_act_tim,
          NULL,
          u_cnrtsrvcfees.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cnrtsrvcfees
      SET
        valid_to        = :new.csfe_las_act_tim,
        csfe_next_audid = u_cnrtsrvcfees.CURRVAL
      WHERE
        csfe_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
48
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSFH_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNRTSRVCFEE_HNTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CSFH_AUDITINSERT&quot; BEFORE INSERT ON T_CNRTSRVCFEE_HNTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.csfh_crtd IS NULL THEN 
    :new.csfh_crtd := curr_date; 
  END IF; 

  IF :new.csfh_las_act_tim IS NULL THEN 
    :new.csfh_las_act_tim := curr_date; 
  END IF; 

  IF :new.csfh_las_act IS NULL THEN 
    :new.csfh_las_act := 1; 
  END IF; 

  IF :new.csfh_obj_stt IS NULL THEN 
    :new.csfh_obj_stt := 1; 
  END IF; 

  IF :new.csfh_vers IS NULL THEN 
    :new.csfh_vers := 0; 
  END IF; 

  IF :new.csfh_vsbt IS NULL THEN 
    :new.csfh_vsbt := 1001; 
  END IF; 

  IF :new.csfh_las_act_by IS NULL THEN 
    :new.csfh_las_act_by := 1; 
  END IF; 

  IF :new.csfh_origcrtr IS NULL THEN 
    :new.csfh_origcrtr := 1; 
  END IF; 

  IF :new.csfh_origcrtrlogdin IS NULL THEN 
    :new.csfh_origcrtrlogdin := 1; 
  END IF; 

  IF :new.csfh_las_act_by_logdin IS NULL THEN 
    :new.csfh_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cnrtsrvcfee_hnts 
  ( 
   classtype, 
   csfh_c4c_id, 
   csfh_crtd, 
   csfh_las_act, 
   csfh_las_act_actrtyp, 
   csfh_obj_stt, 
   csfh_vers, 
   csfh_vsbt, 
   csfh_dltddt, 
   csfh_las_act_by, 
   csfh_origcrtr, 
   csfh_origcrtrlogdin, 
   csfh_las_act_by_logdin, 
   csfh_univid, 
   csfh_cost, 
   csfh_srvc, 
   csfh_pvdr, 
   csfh_id, 
   valid_from, 
   valid_to , 
   csfh_audid, 
   csfh_prev_audid, 
   csfh_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.csfh_c4c_id,
   :new.csfh_crtd,
   :new.csfh_las_act,
   :new.csfh_las_act_actrtyp,
   :new.csfh_obj_stt,
   :new.csfh_vers,
   :new.csfh_vsbt,
   :new.csfh_dltddt,
   :new.csfh_las_act_by,
   :new.csfh_origcrtr,
   :new.csfh_origcrtrlogdin,
   :new.csfh_las_act_by_logdin,
   :new.csfh_univid,
   :new.csfh_cost,
   :new.csfh_srvc,
   :new.csfh_pvdr, 
   :new.csfh_id, 
   :new.csfh_las_act_tim, 
   NULL, 
   u_cnrtsrvcfee_hnts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
49
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSFH_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CNRTSRVCFEE_HNTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_csfh_auditupdate BEFORE
  UPDATE
    ON T_CNRTSRVCFEE_HNTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        csfh_audid
      INTO
        last_audid
      FROM
        a_cnrtsrvcfee_hnts
      WHERE
        csfh_id            = :old.csfh_id
      AND csfh_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.csfh_las_act_tim = :new.csfh_las_act_tim THEN
      UPDATE
        a_cnrtsrvcfee_hnts
      SET
        classtype              = :new.classtype,
        csfh_c4c_id            = :new.csfh_c4c_id,
        csfh_crtd              = :new.csfh_crtd,
        csfh_las_act           = :new.csfh_las_act,
        csfh_las_act_actrtyp   = :new.csfh_las_act_actrtyp,
        csfh_obj_stt           = :new.csfh_obj_stt,
        csfh_vers              = :new.csfh_vers,
        csfh_vsbt              = :new.csfh_vsbt,
        csfh_dltddt            = :new.csfh_dltddt,
        csfh_las_act_by        = :new.csfh_las_act_by,
        csfh_origcrtr          = :new.csfh_origcrtr,
        csfh_origcrtrlogdin    = :new.csfh_origcrtrlogdin,
        csfh_las_act_by_logdin = :new.csfh_las_act_by_logdin,
        csfh_univid            = :new.csfh_univid,
        csfh_cost              = :new.csfh_cost,
        csfh_srvc              = :new.csfh_srvc,
        csfh_pvdr              = :new.csfh_pvdr
      WHERE
        csfh_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cnrtsrvcfee_hnts
        (
          classtype,
          csfh_c4c_id,
          csfh_crtd,
          csfh_las_act,
          csfh_las_act_actrtyp,
          csfh_obj_stt,
          csfh_vers,
          csfh_vsbt,
          csfh_dltddt,
          csfh_las_act_by,
          csfh_origcrtr,

     csfh_origcrtrlogdin,
          csfh_las_act_by_logdin,
          csfh_univid,
          csfh_cost,
          csfh_srvc,
          csfh_pvdr,
          csfh_id,
          valid_from,
          valid_to,
          csfh_audid,
          csfh_prev_audid,
          csfh_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.csfh_c4c_id,
          :new.csfh_crtd,
          :new.csfh_las_act,
          :new.csfh_las_act_actrtyp,
          :new.csfh_obj_stt,
          :new.csfh_vers,
          :new.csfh_vsbt,
          :new.csfh_dltddt,
          :new.csfh_las_act_by,
          :new.csfh_origcrtr,
          :new.csfh_origcrtrlogdin,
          :new.csfh_las_act_by_logdin,
          :new.csfh_univid,
          :new.csfh_cost,
          :new.csfh_srvc,
          :new.csfh_pvdr,
          :new.csfh_id,
          :new.csfh_las_act_tim,
          NULL,
          u_cnrtsrvcfee_hnts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cnrtsrvcfee_hnts
      SET
        valid_to        = :new.csfh_las_act_tim,
        csfh_next_audid = u_cnrtsrvcfee_hnts.CURRVAL
      WHERE
        csfh_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
50
</td>
<td>
THH_C4C
</td>
<td>
TRG_COB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_COORDINATION_OF_BENEFITS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cob_auditinsert before insert on t_coordination_of_benefits

	for each row
		
</td>
<td>
PL/SQL
</td>
<td>
declare
			curr_date date := sysdate;

	begin

		if :new.cob_crtd is null then
			:new.cob_crtd := curr_date;
		end if;

		if :new.cob_las_act_tim is null then
			:new.cob_las_act_tim := curr_date;
		end if;

		if :new.cob_las_act is null then
			:new.cob_las_act := 1;
		end if;

		if :new.cob_obj_stt is null then
			:new.cob_obj_stt := 1;
		end if;

		if :new.cob_vers is null then
			:new.cob_vers := 0;
		end if;

		if :new.cob_vsbt is null then
			:new.cob_vsbt := 1001;
		end if;

		if :new.cob_las_act_by is null then
			:new.cob_las_act_by := 1;
		end if;

		if :new.cob_origcrtr is null then
			:new.cob_origcrtr := 1;
		end if;

		if :new.cob_origcrtrlogdin is null then
			:new.cob_origcrtrlogdin := 1;
		end if;

		if :new.cob_las_act_by_logdin is null then
			:new.cob_las_act_by_logdin := 1;
		end if;

		insert into a_coordination_of_benefits (
			classtype,
			cob_id,
			cob_c4c_id,
			cob_univid,
			cob_crtd,
			cob_obj_stt,
			cob_vers,
			cob_member,
			cob_carrier,
			cob_insurance_id,
			cob_effective_date,
			cob_termination_date,
			cob_carrier_rank,
			cob_vsbt,
			cob_dltddt,
			cob_origcrtr,
			cob_origcrtrlogdin,
			cob_las_act,
			cob_las_act_by,
			cob_las_act_by_logdin,
			cob_las_act_actrtyp,
			cob_las_act_tim,
			cob_valid_from,
			cob_valid_to,
			cob_audid,
			cob_prev_audid,
			cob_next_audid
		) values (
			:new.classtype,
			:new.cob_id,
			:new.cob_c4c_id,
			:new.cob_univid,
			:new.cob_crtd,
			:new.cob_obj_stt,
			:new.cob_vers,
			:new.cob_member,
			:new.cob_carrier,
			:new.cob_insurance_id,
			:new.cob_effective_date,
			:new.cob_termination_date,
			:new.cob_carrier_rank,
			:new.cob_vsbt,
			:new.cob_dltddt,
			:new.cob_origcrtr,
			:new.cob_origcrtrlogdin,
			:new.cob_las_act,
			:new.cob_las_act_by,
			:new.cob_las_act_by_logdin,
			:new.cob_las_act_actrtyp,
			:new.cob_las_act_tim,
			:new.cob_las_act_tim,
			null,
			u_coordination_of_benefits.nextval,
			null,
			null
		);
	end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
51
</td>
<td>
THH_C4C
</td>
<td>
TRG_COB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_COORDINATION_OF_BENEFITS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cob_auditupdate before update on t_coordination_of_benefits

	for each row
		
</td>
<td>
PL/SQL
</td>
<td>
declare last_audid number;

		begin
			begin
				select cob_audid into last_audid
				from a_coordination_of_benefits
				where cob_id = :old.cob_id
				and
				cob_next_audid is null
				and
				rownum &lt; 2
				for update;
			exception
				when no_data_found then
					last_audid := null;
			end;

			begin
				if :old.cob_las_act_tim = :new.cob_las_act_tim then
					update a_coordination_of_benefits
					set
						classtype	= :new.classtype,
						cob_id = :new.cob_id,
						cob_c4c_id = :new.cob_c4c_id,
						cob_univid = :new.cob_c4c_id,
						cob_crtd = :new.cob_crtd,
						cob_obj_stt = :new.cob_obj_stt,
						cob_vers = :new.cob_vers,
						cob_member = :new.cob_member,
						cob_carrier = :new.cob_carrier,
						cob_insurance_id = :new.cob_insurance_id,
						cob_effective_date = :new.cob_effective_date,
						cob_termination_date = :new.cob_termination_date,
						cob_carrier_rank = :new.cob_carrier_rank,
						cob_vsbt = :new.cob_vsbt,
						cob_dltddt = :new.cob_dltddt,
						cob_origcrtr = :new.cob_origcrtr,
						cob_origcrtrlogdin = :new.cob_origcrtrlogdin,
						cob_las_act = :new.cob_las_act,
						cob_las_act_by = :new.cob_las_act_by,
						cob_las_act_by_logdin = :new.cob_las_act_by_logdin,
						cob_las_act_actrtyp = :new.cob_las_act_actrtyp,
						cob_las_act_tim = :new.cob_las_act_tim
					where
						cob_audid = last_audid;
				else
					insert into a_coordination_of_benefits (
						classtype,
						cob_id,
						cob_c4c_id,
						cob_univid,
						cob_crtd,
						cob_obj_stt,
						cob_vers,
						cob_member,
						cob_carrier,
						cob_insurance_id,
						cob_effective_date,
						cob_termination_date,
						cob_carrier_rank,
						cob_vsbt,
						cob_dltddt,
						cob_origcrtr,
						cob_origcrtrlogdin,
						cob_las_act,
						cob_las_act_by,
						cob_las_act_by_logdin,
						cob_las_act_actrtyp,
						cob_las_act_tim,
						cob_valid_from,
						cob_valid_to,
						cob_audid,
						cob_prev_audid,
						cob_next_audid
					) values (
					
	:new.classtype,
						:new.cob_id,
						:new.cob_c4c_id,
						:new.cob_univid,
						:new.cob_crtd,
						:new.cob_obj_stt,
						:new.cob_vers,
						:new.cob_member,
						:new.cob_carrier,
						:new.cob_insurance_id,
						:new.cob_effective_date,
						:new.cob_termination_date,
						:new.cob_carrier_rank,
						:new.cob_vsbt,
						:new.cob_dltddt,
						:new.cob_origcrtr,
						:new.cob_origcrtrlogdin,
						:new.cob_las_act,
						:new.cob_las_act_by,
						:new.cob_las_act_by_logdin,
						:new.cob_las_act_actrtyp,
						:new.cob_las_act_tim,
						:new.cob_las_act_tim,
						null,
						u_coordination_of_benefits.nextval,
						last_audid,
						null
					);

					update a_coordination_of_benefits
						set
							cob_valid_to = :new.cob_las_act_tim,
							cob_next_audid = u_coordination_of_benefits.currval
						where
							cob_audid = last_audid;
				end if;
			end;
		end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
52
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSMF_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CSTMFLDS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_csmf_auditinsert BEFORE INSERT ON T_CSTMFLDS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.csmf_crtd IS NULL THEN
    :new.csmf_crtd := curr_date;
  END IF;

  IF :new.csmf_las_act_tim IS NULL THEN
    :new.csmf_las_act_tim := curr_date;
  END IF;

  IF :new.csmf_las_act IS NULL THEN
    :new.csmf_las_act := 1;
  END IF;

  IF :new.csmf_obj_stt IS NULL THEN
    :new.csmf_obj_stt := 1;
  END IF;

  IF :new.csmf_vers IS NULL THEN
    :new.csmf_vers := 0;
  END IF;

  IF :new.csmf_vsbt IS NULL THEN
    :new.csmf_vsbt := 1001;
  END IF;

  IF :new.csmf_las_act_by IS NULL THEN
    :new.csmf_las_act_by := 1;
  END IF;

  IF :new.csmf_origcrtr IS NULL THEN
    :new.csmf_origcrtr := 1;
  END IF;

  IF :new.csmf_origcrtrlogdin IS NULL THEN
    :new.csmf_origcrtrlogdin := 1;
  END IF;

  IF :new.csmf_las_act_by_logdin IS NULL THEN
    :new.csmf_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_cstmflds
  (
   csmf_rf10,
   csmf_rf11,
   csmf_rf12,
   csmf_rf13,
   csmf_rf14,
   csmf_rf15,
   csmf_rf16,
   csmf_rf17,
   csmf_rf18,
   csmf_rf19,
   csmf_rf20,
   csmf_rf21,
   csmf_rf22,
   csmf_rf23,
   csmf_rf24,
   csmf_rf25,
   csmf_rf26,
   csmf_rf27,
   csmf_rf28,
   csmf_rf29,
   csmf_rf30,
   csmf_rf31,
   csmf_rf32,
   csmf_rf33,
   csmf_rf34,
   csmf_rf35,
   csmf_rf36,
   csmf_rf37,
   csmf_rf38,
   csmf_rf39,
   csmf_rf40,
   classtype,
   csmf_c4c_id,
   csmf_crtd,
   csmf_las_act,
   csmf_las_act_actrtyp,
   csmf_obj_stt,
   csmf_vers,
   csmf_vsbt,
   csmf_dltddt,
   csmf_las_act_by,
   csmf_origcrtr,
   csmf_origcrtrlogdin,
   csmf_las_act_by_logdin,
   csmf_univid,
   csmf_dt1,
   csmf_dt2,
   csmf_dt3,
   csmf_dt4,
   csmf_itg1,
   csmf_itg2,
   csmf_itg3,
   csmf_itg4,
   csmf_itg5,
   csmf_itg6,
   csmf_str1,
   csmf_str2,
   csmf_str3,
   csmf_str4,
   csmf_str5,
   csmf_str6,
   csmf_de5,
   csmf_de6,
   csmf_de7,
   csmf_de8,
   csmf_de9,
   csmf_de10,
   csmf_de11,
   csmf_de12,
   csmf_de13,
   csmf_de14,
   csmf_de15,
   csmf_de16,
   csmf_de17,

   csmf_de18,
   csmf_de19,
   csmf_de20,
   csmf_ir7,
   csmf_ir8,
   csmf_ir9,
   csmf_ir10,
   csmf_ir11,
   csmf_ir12,
   csmf_ir13,
   csmf_ir14,
   csmf_ir15,
   csmf_ir16,
   csmf_ir17,
   csmf_ir18,
   csmf_ir19,
   csmf_ir20,
   csmf_ir21,
   csmf_ir22,
   csmf_ir23,
   csmf_ir24,
   csmf_ir25,
   csmf_ir26,
   csmf_ir27,
   csmf_ir28,
   csmf_ir29,
   csmf_ir30,
   csmf_sg7,
   csmf_sg8,
   csmf_sg9,
   csmf_sg10,
   csmf_sg11,
   csmf_sg12,
   csmf_sg13,
   csmf_sg14,
   csmf_sg15,
   csmf_sg16,
   csmf_sg17,
   csmf_sg18,
   csmf_sg19,
   csmf_sg20,
   csmf_sg21,
   csmf_sg22,
   csmf_sg23,
   csmf_sg24,
   csmf_sg25,
   csmf_sg26,
   csmf_sg27,
   csmf_sg28,
   csmf_sg29,
   csmf_sg30,
   csmf_ref4,
   csmf_ref1,
   csmf_ref3,
   csmf_ref2,
   csmf_rf5,
   csmf_rf6,
   csmf_rf7,
   csmf_rf8,
   csmf_rf9,
   csmf_id,
   valid_from,
   valid_to ,
   csmf_audid,
   csmf_prev_audid,
   csmf_next_audid,
   transaction_id
  )
  VALUES
  (
   :new.csmf_rf10,
   :new.csmf_rf11,
   :new.csmf_rf12,
   :new.csmf_rf13,
   :new.csmf_rf14,
   :new.csmf_rf15,
   :new.csmf_rf16,
   :new.csmf_rf17,
   :new.csmf_rf18,
   :new.csmf_rf19,
   :new.csmf_rf20,
   :new.csmf_rf21,
   :new.csmf_rf22,
   :new.csmf_rf23,
   :new.csmf_rf24,
   :new.csmf_rf25,
   :new.csmf_rf26,
   :new.csmf_rf27,
   :new.csmf_rf28,
   :new.csmf_rf29,
   :new.csmf_rf30,
   :new.csmf_rf31,
   :new.csmf_rf32,
   :new.csmf_rf33,
   :new.csmf_rf34,
   :new.csmf_rf35,
   :new.csmf_rf36,
   :new.csmf_rf37,
   :new.csmf_rf38,
   :new.csmf_rf39,
   :new.csmf_rf40,
   :new.classtype,
   :new.csmf_c4c_id,
   :new.csmf_crtd,
   :new.csmf_las_act,
   :new.csmf_las_act_actrtyp,
   :new.csmf_obj_stt,
   :new.csmf_vers,
   :new.csmf_vsbt,
   :new.csmf_dltddt,
   :new.csmf_las_act_by,
   :new.csmf_origcrtr,
   :new.csmf_origcrtrlogdin,
   :new.csmf_las_act_by_logdin,
   :new.csmf_univid,
   :new.csmf_dt1,
   :new.csmf_dt2,
   :new.csmf_dt3,
   :new.csmf_dt4,
   :new.csmf_itg1,
   :new.csmf_itg2,
   :new.csmf_itg3,

   :new.csmf_itg4,
   :new.csmf_itg5,
   :new.csmf_itg6,
   :new.csmf_str1,
   :new.csmf_str2,
   :new.csmf_str3,
   :new.csmf_str4,
   :new.csmf_str5,
   :new.csmf_str6,
   :new.csmf_de5,
   :new.csmf_de6,
   :new.csmf_de7,
   :new.csmf_de8,
   :new.csmf_de9,
   :new.csmf_de10,
   :new.csmf_de11,
   :new.csmf_de12,
   :new.csmf_de13,
   :new.csmf_de14,
   :new.csmf_de15,
   :new.csmf_de16,
   :new.csmf_de17,
   :new.csmf_de18,
   :new.csmf_de19,
   :new.csmf_de20,
   :new.csmf_ir7,
   :new.csmf_ir8,
   :new.csmf_ir9,
   :new.csmf_ir10,
   :new.csmf_ir11,
   :new.csmf_ir12,
   :new.csmf_ir13,
   :new.csmf_ir14,
   :new.csmf_ir15,
   :new.csmf_ir16,
   :new.csmf_ir17,
   :new.csmf_ir18,
   :new.csmf_ir19,
   :new.csmf_ir20,
   :new.csmf_ir21,
   :new.csmf_ir22,
   :new.csmf_ir23,
   :new.csmf_ir24,
   :new.csmf_ir25,
   :new.csmf_ir26,
   :new.csmf_ir27,
   :new.csmf_ir28,
   :new.csmf_ir29,
   :new.csmf_ir30,
   :new.csmf_sg7,
   :new.csmf_sg8,
   :new.csmf_sg9,
   :new.csmf_sg10,
   :new.csmf_sg11,
   :new.csmf_sg12,
   :new.csmf_sg13,
   :new.csmf_sg14,
   :new.csmf_sg15,
   :new.csmf_sg16,
   :new.csmf_sg17,
   :new.csmf_sg18,
   :new.csmf_sg19,
   :new.csmf_sg20,
   :new.csmf_sg21,
   :new.csmf_sg22,
   :new.csmf_sg23,
   :new.csmf_sg24,
   :new.csmf_sg25,
   :new.csmf_sg26,
   :new.csmf_sg27,
   :new.csmf_sg28,
   :new.csmf_sg29,
   :new.csmf_sg30,
   :new.csmf_ref4,
   :new.csmf_ref1,
   :new.csmf_ref3,
   :new.csmf_ref2,
   :new.csmf_rf5,
   :new.csmf_rf6,
   :new.csmf_rf7,
   :new.csmf_rf8,
   :new.csmf_rf9,
   :new.csmf_id,
   :new.csmf_las_act_tim,
   NULL,
   u_cstmflds.NEXTVAL,
   NULL,
   NULL,
   dbms_transaction.local_transaction_id
  );
END;

</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
53
</td>
<td>
THH_C4C
</td>
<td>
TRG_CSMF_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CSTMFLDS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_csmf_auditupdate BEFORE UPDATE ON T_CSTMFLDS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN
  /* retrieve last audit ID of record */
  BEGIN
    SELECT
        csmf_audid
      INTO
        last_audid
      FROM
        a_cstmflds
      WHERE
        csmf_id =  :old.csmf_id AND csmf_next_audid IS NULL AND rownum &lt; 2
      FOR UPDATE;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.csmf_las_act_tim = :new.csmf_las_act_tim THEN
    UPDATE a_cstmflds
    SET
     csmf_rf15                                  = :new.csmf_rf15,
     csmf_rf16                                  = :new.csmf_rf16,
     csmf_rf17                                  = :new.csmf_rf17,
     csmf_rf18                                  = :new.csmf_rf18,
     csmf_rf19                                  = :new.csmf_rf19,
     csmf_rf20                                  = :new.csmf_rf20,
     csmf_rf21                                  = :new.csmf_rf21,
     csmf_rf22                                  = :new.csmf_rf22,
     csmf_rf23                                  = :new.csmf_rf23,
     csmf_rf24                                  = :new.csmf_rf24,
     csmf_rf25                                  = :new.csmf_rf25,
     csmf_rf26                                  = :new.csmf_rf26,
     csmf_rf27                                  = :new.csmf_rf27,
     csmf_rf28                                  = :new.csmf_rf28,
     csmf_rf29                                  = :new.csmf_rf29,
     csmf_rf30                                  = :new.csmf_rf30,
     csmf_rf31                                  = :new.csmf_rf31,
     csmf_rf32                                  = :new.csmf_rf32,
     csmf_rf33                                  = :new.csmf_rf33,
     csmf_rf34                                  = :new.csmf_rf34,
     csmf_rf35                                  = :new.csmf_rf35,
     csmf_rf36                                  = :new.csmf_rf36,
     csmf_rf37
                               = :new.csmf_rf37,
     csmf_rf38                                  = :new.csmf_rf38,
     csmf_rf39                                  = :new.csmf_rf39,
     csmf_rf40                                  = :new.csmf_rf40,
     classtype                                  = :new.classtype,
     csmf_c4c_id                                = :new.csmf_c4c_id,
     csmf_crtd                                  = :new.csmf_crtd,
     csmf_las_act                               = :new.csmf_las_act,
     csmf_las_act_actrtyp               = :new.csmf_las_act_actrtyp,
     csmf_obj_stt                               = :new.csmf_obj_stt,
     csmf_vers                                  = :new.csmf_vers,
     csmf_vsbt                                  = :new.csmf_vsbt,
     csmf_dltddt                                = :new.csmf_dltddt,
     csmf_las_act_by                    = :new.csmf_las_act_by,
     csmf_origcrtr                              = :new.csmf_origcrtr,
     csmf_origcrtrlogdin                = :new.csmf_origcrtrlogdin,
     csmf_las_act_by_logdin             = :new.csmf_las_act_by_logdin,
     csmf_univid                                = :new.csmf_univid,
     csmf_dt1                                   = :new.csmf_dt1,
     csmf_dt2                                   = :new.csmf_dt2,
     csmf_dt3                                   = :new.csmf_dt3,
     csmf_dt4                                   = :new.csmf_dt4,
     csmf_itg1                                  = :new.csmf_itg1,
     csmf_itg2                                  = :new.csmf_itg2,
     csmf_itg3                                  = :new.csmf_itg3,
     csmf_itg4                                  = :new.csmf_itg4,
     csmf_itg5                                  = :new.csmf_itg5,
     csmf_itg6                                  = :new.csmf_itg6,
     csmf_str1                                  = :new.csmf_str1,
     csmf_str2                                  = :new.csmf_str2,
     csmf_str3
                               = :new.csmf_str3,
     csmf_str4                                  = :new.csmf_str4,
     csmf_str5                                  = :new.csmf_str5,
     csmf_str6                                  = :new.csmf_str6,
     csmf_de5                                   = :new.csmf_de5,
     csmf_de6                                   = :new.csmf_de6,
     csmf_de7                                   = :new.csmf_de7,
     csmf_de8                                   = :new.csmf_de8,
     csmf_de9                                   = :new.csmf_de9,
     csmf_de10                                  = :new.csmf_de10,
     csmf_de11                                  = :new.csmf_de11,
     csmf_de12                                  = :new.csmf_de12,
     csmf_de13                                  = :new.csmf_de13,
     csmf_de14                                  = :new.csmf_de14,
     csmf_de15                                  = :new.csmf_de15,
     csmf_de16                                  = :new.csmf_de16,
     csmf_de17                                  = :new.csmf_de17,
     csmf_de18                                  = :new.csmf_de18,
     csmf_de19                                  = :new.csmf_de19,
     csmf_de20                                  = :new.csmf_de20,
     csmf_ir7                                   = :new.csmf_ir7,
     csmf_ir8                                   = :new.csmf_ir8,
     csmf_ir9                                   = :new.csmf_ir9,
     csmf_ir10                                  = :new.csmf_ir10,
     csmf_ir11                                  = :new.csmf_ir11,
     csmf_ir12                                  = :new.csmf_ir12,
     csmf_ir13                                  = :new.csmf_ir13,
     csmf_ir14                                  = :new.csmf_ir14,
     csmf_ir15                                  = :new.csmf_ir15,
     csmf_ir16                                  = :new.csmf_ir16,
     csmf_ir17
   = :new.csmf_ir17,
     csmf_ir18                                  = :new.csmf_ir18,
     csmf_ir19                                  = :new.csmf_ir19,
     csmf_ir20                                  = :new.csmf_ir20,
     csmf_ir21                                  = :new.csmf_ir21,
     csmf_ir22                                  = :new.csmf_ir22,
     csmf_ir23                                  = :new.csmf_ir23,
     csmf_ir24                                  = :new.csmf_ir24,
     csmf_ir25                                  = :new.csmf_ir25,
     csmf_ir26                                  = :new.csmf_ir26,
     csmf_ir27                                  = :new.csmf_ir27,
     csmf_ir28                                  = :new.csmf_ir28,
     csmf_ir29                                  = :new.csmf_ir29,
     csmf_ir30                                  = :new.csmf_ir30,
     csmf_sg7                                   = :new.csmf_sg7,
     csmf_sg8                                   = :new.csmf_sg8,
     csmf_sg9                                   = :new.csmf_sg9,
     csmf_sg10                                  = :new.csmf_sg10,
     csmf_sg11                                  = :new.csmf_sg11,
     csmf_sg12                                  = :new.csmf_sg12,
     csmf_sg13                                  = :new.csmf_sg13,
     csmf_sg14                                  = :new.csmf_sg14,
     csmf_sg15                                  = :new.csmf_sg15,
     csmf_sg16                                  = :new.csmf_sg16,
     csmf_sg17                                  = :new.csmf_sg17,
     csmf_sg18                                  = :new.csmf_sg18,
     csmf_sg19                                  = :new.csmf_sg19,
     csmf_sg20                                  = :new.csmf_sg20,
     csmf_sg21                                  = :new.csmf_sg21,
     csmf_sg22                                  = :new.csmf_sg22,
     csmf_sg23                                  = :new.csmf_sg23,

   csmf_sg24                                  = :new.csmf_sg24,
     csmf_sg25                                  = :new.csmf_sg25,
     csmf_sg26                                  = :new.csmf_sg26,
     csmf_sg27                                  = :new.csmf_sg27,
     csmf_sg28                                  = :new.csmf_sg28,
     csmf_sg29                                  = :new.csmf_sg29,
     csmf_sg30                                  = :new.csmf_sg30,
     csmf_ref4                                  = :new.csmf_ref4,
     csmf_ref1                                  = :new.csmf_ref1,
     csmf_ref3                                  = :new.csmf_ref3,
     csmf_ref2                                  = :new.csmf_ref2,
     csmf_rf5                                   = :new.csmf_rf5,
     csmf_rf6                                   = :new.csmf_rf6,
     csmf_rf7                                   = :new.csmf_rf7,
     csmf_rf8                                   = :new.csmf_rf8,
     csmf_rf9                                   = :new.csmf_rf9,
     csmf_rf10                                  = :new.csmf_rf10,
     csmf_rf11                                  = :new.csmf_rf11,
     csmf_rf12                                  = :new.csmf_rf12,
     csmf_rf13                                  = :new.csmf_rf13,
     csmf_rf14                                  = :new.csmf_rf14,
     csmf_id                                    = :new.csmf_id

         WHERE csmf_audid = last_audid;
         /* LastActionTime has changed - new transaction in place */
        ELSE
        /* insert new values introduced by new transaction */
    INSERT INTO a_cstmflds
    (
     csmf_rf15,
     csmf_rf16,
     csmf_rf17,
     csmf_rf18,
     csmf_rf19,
     csmf_rf20,
     csmf_rf21,
     csmf_rf22,
     csmf_rf23,
     csmf_rf24,
     csmf_rf25,
     csmf_rf26,
     csmf_rf27,
     csmf_rf28,
     csmf_rf29,
     csmf_rf30,
     csmf_rf31,
     csmf_rf32,
     csmf_rf33,
     csmf_rf34,
     csmf_rf35,

 csmf_rf36,
     csmf_rf37,
     csmf_rf38,
     csmf_rf39,
     csmf_rf40,
     classtype,
     csmf_c4c_id,
     csmf_crtd,
     csmf_las_act,
     csmf_las_act_actrtyp,
     csmf_obj_stt,
     csmf_vers,
     csmf_vsbt,
     csmf_dltddt,
     csmf_las_act_by,
     csmf_origcrtr,
     csmf_origcrtrlogdin,
     csmf_las_act_by_logdin,
     csmf_univid,
     csmf_dt1,
     csmf_dt2,
     csmf_dt3,
     csmf_dt4,
     csmf_itg1,
     csmf_itg2,
     csmf_itg3,
     csmf_itg4,
     csmf_itg5,
     csmf_itg6,
     csmf_str1,
     csmf_str2,
     csmf_str3,
     csmf_str4,
     csmf_str5,
     csmf_str6,
     csmf_de5,
     csmf_de6,
     csmf_de7,
     csmf_de8,
     csmf_de9,
     csmf_de10,
     csmf_de11,
     csmf_de12,
     csmf_de13,
     csmf_de14,
     csmf_de15,
     csmf_de16,
     csmf_de17,
     csmf_de18,
     csmf_de19,
     csmf_de20,
     csmf_ir7,
     csmf_ir8,
     csmf_ir9,
     csmf_ir10,
     csmf_ir11,
     csmf_ir12,
     csmf_ir13,
     csmf_ir14,
     csmf_ir15,
     csmf_ir16,
     csmf_ir17,
     csmf_ir18,
     csmf_ir19,
     csmf_ir20,
     csmf_ir21,
     csmf_ir22,
     csmf_ir23,
     csmf_ir24,
     csmf_ir25,
     csmf_ir26,
     csmf_ir27,
     csmf_ir28,
     csmf_ir29,
     csmf_ir30,
     csmf_sg7,
     csmf_sg8,
     csmf_sg9,
     csmf_sg10,
     csmf_sg11,
     csmf_sg12,
     csmf_sg13,
     csmf_sg14,
     csmf_sg15,
     csmf_sg16,
     csmf_sg17,
     csmf_sg18,
     csmf_sg19,
     csmf_sg20,
     csmf_sg21,
     csmf_sg22,
     csmf_sg23,
     csmf_sg24,
     csmf_sg25,
     csmf_sg26,
     csmf_sg27,
     csmf_sg28,
     csmf_sg29,
     csmf_sg30,
     csmf_ref4,
     csmf_ref1,
     csmf_ref3,
     csmf_ref2,
     csmf_rf5,
     csmf_rf6,
     csmf_rf7,
     csmf_rf8,
     csmf_rf9,
     csmf_rf10,
     csmf_rf11,
     csmf_rf12,
     csmf_rf13,
     csmf_rf14,
     csmf_id,
     valid_from,
     valid_to,
     csmf_audid,
     csmf_prev_audid,
     csmf_next_audid,
     transaction_id
    )
    VALUES
    (
     :new.
csmf_rf15,
     :new.csmf_rf16,
     :new.csmf_rf17,
     :new.csmf_rf18,
     :new.csmf_rf19,
     :new.csmf_rf20,
     :new.csmf_rf21,
     :new.csmf_rf22,
     :new.csmf_rf23,
     :new.csmf_rf24,
     :new.csmf_rf25,
     :new.csmf_rf26,
     :new.csmf_rf27,
     :new.csmf_rf28,
     :new.csmf_rf29,
     :new.csmf_rf30,
     :new.csmf_rf31,
     :new.csmf_rf32,
     :new.csmf_rf33,
     :new.csmf_rf34,
     :new.csmf_rf35,
     :new.csmf_rf36,
     :new.csmf_rf37,
     :new.csmf_rf38,
     :new.csmf_rf39,
     :new.csmf_rf40,
     :new.classtype,
     :new.csmf_c4c_id,
     :new.csmf_crtd,
     :new.csmf_las_act,
     :new.csmf_las_act_actrtyp,
     :new.csmf_obj_stt,
     :new.csmf_vers,
     :new.csmf_vsbt,
     :new.csmf_dltddt,
     :new.csmf_las_act_by,
     :new.csmf_origcrtr,
     :new.csmf_origcrtrlogdin,
     :new.csmf_las_act_by_logdin,
     :new.csmf_univid,
     :new.csmf_dt1,
     :new.csmf_dt2,
     :new.csmf_dt3,
     :new.csmf_dt4,
     :new.csmf_itg1,
     :new.csmf_itg2,
     :new.csmf_itg3,
     :new.csmf_itg4,
     :new.csmf_itg5,
     :new.csmf_itg6,
     :new.csmf_str1,
     :new.csmf_str2,
     :new.csmf_str3,
     :new.csmf_str4,
     :new.csmf_str5,
     :new.csmf_str6,
     :new.csmf_de5,
     :new.csmf_de6,
     :new.csmf_de7,
     :new.csmf_de8,
     :new.csmf_de9,
     :new.csmf_de10,
     :new.csmf_de11,
     :new.csmf_de12,
     :new.csmf_de13,
     :new.csmf_de14,
     :new.csmf_de15,
     :new.csmf_de16,
     :new.csmf_de17,
     :new.csmf_de18,
     :new.csmf_de19,
     :new.csmf_de20,
     :new.csmf_ir7,
     :new.csmf_ir8,
     :new.csmf_ir9,
     :new.csmf_ir10,
     :new.csmf_ir11,
     :new.csmf_ir12,
     :new.csmf_ir13,
     :new.csmf_ir14,
     :new.csmf_ir15,
     :new.csmf_ir16,
     :new.csmf_ir17,
     :new.csmf_ir18,
     :new.csmf_ir19,
     :new.csmf_ir20,
     :new.csmf_ir21,
     :new.csmf_ir22,
     :new.csmf_ir23,
     :new.csmf_ir24,
     :new.csmf_ir25,
     :new.csmf_ir26,
     :new.csmf_ir27,
     :new.csm
f_ir28,
     :new.csmf_ir29,
     :new.csmf_ir30,
     :new.csmf_sg7,
     :new.csmf_sg8,
     :new.csmf_sg9,
     :new.csmf_sg10,
     :new.csmf_sg11,
     :new.csmf_sg12,
     :new.csmf_sg13,
     :new.csmf_sg14,
     :new.csmf_sg15,
     :new.csmf_sg16,
     :new.csmf_sg17,
     :new.csmf_sg18,
     :new.csmf_sg19,
     :new.csmf_sg20,
     :new.csmf_sg21,
     :new.csmf_sg22,
     :new.csmf_sg23,
     :new.csmf_sg24,
     :new.csmf_sg25,
     :new.csmf_sg26,
     :new.csmf_sg27,
     :new.csmf_sg28,
     :new.csmf_sg29,
     :new.csmf_sg30,
     :new.csmf_ref4,
     :new.csmf_ref1,
     :new.csmf_ref3,
     :new.csmf_ref2,
     :new.csmf_rf5,
     :new.csmf_rf6,
     :new.csmf_rf7,
     :new.csmf_rf8,
     :new.csmf_rf9,
     :new.csmf_rf10,
     :new.csmf_rf11,
     :new.csmf_rf12,
     :new.csmf_rf13,
     :new.csmf_rf14,
     :new.csmf_id,
     :new.csmf_las_act_tim,
     NULL,
     u_cstmflds.NEXTVAL,
     last_audid,
     NULL,
     dbms_transaction.local_transaction_id
    );

    /* update last audit records valid_to to new LastActionTime
       and next audit ID to newly inserted records sequence number
     */
    UPDATE a_cstmflds
      SET
        valid_to = :new.csmf_las_act_tim,
        csmf_next_audid = u_cstmflds.CURRVAL
      WHERE
        csmf_audid = last_audid;
        END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
54
</td>
<td>
THH_C4C
</td>
<td>
TRG_CWLM_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CSTMWKLDLMIT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_CWLM_AUDITINSERT&quot; BEFORE INSERT ON T_CSTMWKLDLMIT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.cwlm_crtd IS NULL THEN 
    :new.cwlm_crtd := curr_date; 
  END IF; 

  IF :new.cwlm_las_act_tim IS NULL THEN 
    :new.cwlm_las_act_tim := curr_date; 
  END IF; 

  IF :new.cwlm_las_act IS NULL THEN 
    :new.cwlm_las_act := 1; 
  END IF; 

  IF :new.cwlm_obj_stt IS NULL THEN 
    :new.cwlm_obj_stt := 1; 
  END IF; 

  IF :new.cwlm_vers IS NULL THEN 
    :new.cwlm_vers := 0; 
  END IF; 

  IF :new.cwlm_vsbt IS NULL THEN 
    :new.cwlm_vsbt := 1001; 
  END IF; 

  IF :new.cwlm_las_act_by IS NULL THEN 
    :new.cwlm_las_act_by := 1; 
  END IF; 

  IF :new.cwlm_origcrtr IS NULL THEN 
    :new.cwlm_origcrtr := 1; 
  END IF; 

  IF :new.cwlm_origcrtrlogdin IS NULL THEN 
    :new.cwlm_origcrtrlogdin := 1; 
  END IF; 

  IF :new.cwlm_las_act_by_logdin IS NULL THEN 
    :new.cwlm_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_cstmwkldlmit 
  ( 
   classtype, 
   cwlm_c4c_id, 
   cwlm_crtd, 
   cwlm_las_act, 
   cwlm_las_act_actrtyp, 
   cwlm_obj_stt, 
   cwlm_vers, 
   cwlm_vsbt, 
   cwlm_dltddt, 
   cwlm_las_act_by, 
   cwlm_origcrtr, 
   cwlm_origcrtrlogdin, 
   cwlm_las_act_by_logdin, 
   cwlm_univid, 
   cwlm_maxmsvtyidx, 
   cwlm_maxmtotlwkld, 
   cwlm_maxmum_rqts, 
   cwlm_maxmcaserqts, 
   cwlm_maxmcm_prj_rqts, 
   cwlm_maxmum_evts, 
   cwlm_maxmcass, 
   cwlm_maxmcm_prjs, 
   cwlm_maxmrevwplusapvlrqts, 
   cwlm_is_lmit, 
   cwlm_id, 
   valid_from, 
   valid_to , 
   cwlm_audid, 
   cwlm_prev_audid, 
   cwlm_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.cwlm_c4c_id,
   :new.cwlm_crtd,
   :new.cwlm_las_act,
   :new.cwlm_las_act_actrtyp,
   :new.cwlm_obj_stt,
   :new.cwlm_vers,
   :new.cwlm_vsbt,
   :new.cwlm_dltddt,
   :new.cwlm_las_act_by,
   :new.cwlm_origcrtr,
   :new.cwlm_origcrtrlogdin,
   :new.cwlm_las_act_by_logdin,
   :new.cwlm_univid,
   :new.cwlm_maxmsvtyidx,
   :new.cwlm_maxmtotlwkld,
   :new.cwlm_maxmum_rqts,
   :new.cwlm_maxmcaserqts,

:new.cwlm_maxmcm_prj_rqts,
   :new.cwlm_maxmum_evts,
   :new.cwlm_maxmcass,
   :new.cwlm_maxmcm_prjs,
   :new.cwlm_maxmrevwplusapvlrqts,
   :new.cwlm_is_lmit, 
   :new.cwlm_id, 
   :new.cwlm_las_act_tim, 
   NULL, 
   u_cstmwkldlmit.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
55
</td>
<td>
THH_C4C
</td>
<td>
TRG_CWLM_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_CSTMWKLDLMIT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_cwlm_auditupdate BEFORE
  UPDATE
    ON T_CSTMWKLDLMIT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        cwlm_audid
      INTO
        last_audid
      FROM
        a_cstmwkldlmit
      WHERE
        cwlm_id            = :old.cwlm_id
      AND cwlm_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.cwlm_las_act_tim = :new.cwlm_las_act_tim THEN
      UPDATE
        a_cstmwkldlmit
      SET
        cwlm_dltddt               = :new.cwlm_dltddt,
        cwlm_las_act_by           = :new.cwlm_las_act_by,
        cwlm_origcrtr             = :new.cwlm_origcrtr,
        cwlm_origcrtrlogdin       = :new.cwlm_origcrtrlogdin,
        cwlm_las_act_by_logdin    = :new.cwlm_las_act_by_logdin,
        cwlm_univid               = :new.cwlm_univid,
        cwlm_maxmsvtyidx          = :new.cwlm_maxmsvtyidx,
        cwlm_maxmtotlwkld         = :new.cwlm_maxmtotlwkld,
        cwlm_maxmum_rqts          = :new.cwlm_maxmum_rqts,
        cwlm_maxmcaserqts         = :new.cwlm_maxmcaserqts,
        cwlm_maxmcm_prj_rqts      = :new.cwlm_maxmcm_prj_rqts,
        cwlm_maxmum_evts          = :new.cwlm_maxmum_evts,
        cwlm_maxmcass             = :new.cwlm_maxmcass,
        cwlm_maxmcm_prjs          = :new.cwlm_maxmcm_prjs,
        cwlm_maxmrevwplusapvlrqts = :new.cwlm_maxmrevwplusapvlrqts,
        cwlm_is_lmit              = :new.cwlm_is_lmit,
        classtype                 = :new.classtype,
        cwlm_c4c_id               = :new.cwlm_c4c_id,
        cwlm_crtd                 = :new.cwlm_crtd,
        cwlm_las_act              = :new.cwlm_las_act,
        cwlm_las_act_actrtyp      = :new.cwlm_las_act_actrtyp,
        cwlm_obj_stt              = :new.cwlm_obj_stt,
        cwlm_vers                 = :new.cwlm_vers,
        cwlm_vsbt                 = :new.cwlm_vsbt
      WHERE
        cwl
m_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_cstmwkldlmit
        (
          cwlm_dltddt,
          cwlm_las_act_by,
          cwlm_origcrtr,
          cwlm_origcrtrlogdin,
          cwlm_las_act_by_logdin,
          cwlm_univid,
          cwlm_maxmsvtyidx,
          cwlm_maxmtotlwkld,
          cwlm_maxmum_rqts,
          cwlm_maxmcaserqts,
          cwlm_maxmcm_prj_rqts,
          cwlm_maxmum_evts,
          cwlm_maxmcass,
          cwlm_maxmcm_prjs,
          cwlm_maxmrevwplusapvlrqts,
          cwlm_is_lmit,
          classtype,
          cwlm_c4c_id,
          cwlm_crtd,
          cwlm_las_act,
          cwlm_las_act_actrtyp,
          cwlm_obj_stt,
          cwlm_vers,
          cwlm_vsbt,
          cwlm_id,
          valid_from,
          valid_to,
          cwlm_audid,
          cwlm_prev_audid,
          cwlm_next_audid
        )
        VALUES
        (
          :new.cwlm_dltddt,
          :new.cwlm_las_act_by,
          :new.cwlm_origcrtr,
          :new.cwlm_origcrtrlogdin,
          :new.cwlm_las_act_by_logdin,
          :new.cwlm_univid,
          :new.cwlm_maxmsvtyidx,
          :new.cwlm_maxmtotlwkld,
          :new.cwlm_maxmum_rqts,
          :new.cwlm_maxmcaserqts,
          :new.cwlm_maxmcm_prj_rqts,
          :new.cwlm_maxmum_evts,
          :new.cwlm_maxmcass,
          :new.cwlm_maxmcm_prjs,
          :new.cwlm_maxmrevwplusapvlrqts,
          :new.cwlm_is_lmit,
          :new.classtype,
          :new.cwlm_c4c_id,
          :new.cwlm_crtd,
          :new.cwlm_las_act,
          :new.cwlm_las_act_actrtyp,
          :new.cwlm_obj_stt,
          :new.cwlm_vers,
          :new.cwlm_vsbt,
          :new.cwlm_id,
          :new.cwlm_las_act_tim,
          NULL,
          u_cstmwkldlmit.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTi
me
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_cstmwkldlmit
      SET
        valid_to        = :new.cwlm_las_act_tim,
        cwlm_next_audid = u_cstmwkldlmit.CURRVAL
      WHERE
        cwlm_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
56
</td>
<td>
THH_C4C
</td>
<td>
TRG_DACR_AR
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DAT_ACC_RTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DACR_AR&quot; 
AFTER INSERT OR UPDATE OR DELETE
ON t_dat_acc_rtn
FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  old_row t_dat_acc_rtn%ROWTYPE;
  new_row t_dat_acc_rtn%ROWTYPE;
BEGIN
  IF
    (:old.classtype IS NULL AND :new.classtype IS NOT NULL) OR (:old.classtype IS NOT NULL AND :new.classtype IS NULL) OR :old.classtype != :new.classtype OR
    (:old.dacr_c4c_id IS NULL AND :new.dacr_c4c_id IS NOT NULL) OR (:old.dacr_c4c_id IS NOT NULL AND :new.dacr_c4c_id IS NULL) OR :old.dacr_c4c_id != :new.dacr_c4c_id OR
    (:old.dacr_crtd IS NULL AND :new.dacr_crtd IS NOT NULL) OR (:old.dacr_crtd IS NOT NULL AND :new.dacr_crtd IS NULL) OR :old.dacr_crtd != :new.dacr_crtd OR
    (:old.dacr_las_act IS NULL AND :new.dacr_las_act IS NOT NULL) OR (:old.dacr_las_act IS NOT NULL AND :new.dacr_las_act IS NULL) OR :old.dacr_las_act != :new.dacr_las_act OR
    (:old.dacr_las_act_actrtyp IS NULL AND :new.dacr_las_act_actrtyp IS NOT NULL) OR (:old.dacr_las_act_actrtyp IS NOT NULL AND :new.dacr_las_act_actrtyp IS NULL) OR :old.dacr_las_act_actrtyp != :new.dacr_las_act_actrtyp OR
    (:old.dacr_las_act_tim IS NULL AND :new.dacr_las_act_tim IS NOT NULL) OR (:old.dacr_las_act_tim IS NOT NULL AND :new.dacr_las_act_tim IS NULL) OR :old.dacr_las_act_tim != :new.dacr_las_act_tim OR
    (:old.dacr_obj_stt IS NULL AND :new.dacr_obj_stt IS NOT NULL) OR (:old.dacr_obj_stt IS NOT NULL AND :new.dacr_obj_stt IS NULL) OR :old.dacr_obj_stt != :new.dacr_obj_stt OR
    (:old.dacr_vers IS NULL AND :new.dacr_vers IS NOT NULL) OR (:old.dacr_vers IS NOT NULL AND :new.dacr_vers IS NULL) OR :old.dacr_vers != :new.dacr_vers OR
    (:old.dacr_vsbt IS NULL AND :new.dacr_vsbt IS NOT NULL) OR (:old.dacr_vsbt IS NOT NULL AND :new.dacr_vsbt IS NULL) OR :old.dacr_vsbt != :new.dacr_vsbt OR
    (:old.dacr_dltddt IS NULL AND :new.dacr_dltddt IS NOT NULL) OR (:old.dacr_dltddt IS NOT NULL AND :new.dacr_dltddt IS NULL) OR :old.dacr_dltddt != :new.dacr_dltddt OR
    (:old.dacr_las_act_by IS NULL AND :new.dacr_las_act_by IS NOT NULL) OR (:old.dacr_las_act_by IS NOT NULL AND :new.dacr_las_act_by IS NULL) OR :old.dacr_las_act_by
!= :new.dacr_las_act_by OR
    (:old.dacr_origcrtr IS NULL AND :new.dacr_origcrtr IS NOT NULL) OR (:old.dacr_origcrtr IS NOT NULL AND :new.dacr_origcrtr IS NULL) OR :old.dacr_origcrtr != :new.dacr_origcrtr OR
    (:old.dacr_origcrtrlogdin IS NULL AND :new.dacr_origcrtrlogdin IS NOT NULL) OR (:old.dacr_origcrtrlogdin IS NOT NULL AND :new.dacr_origcrtrlogdin IS NULL) OR :old.dacr_origcrtrlogdin != :new.dacr_origcrtrlogdin OR
    (:old.dacr_las_act_by_logdin IS NULL AND :new.dacr_las_act_by_logdin IS NOT NULL) OR (:old.dacr_las_act_by_logdin IS NOT NULL AND :new.dacr_las_act_by_logdin IS NULL) OR :old.dacr_las_act_by_logdin != :new.dacr_las_act_by_logdin OR
    (:old.dacr_univid IS NULL AND :new.dacr_univid IS NOT NULL) OR (:old.dacr_univid IS NOT NULL AND :new.dacr_univid IS NULL) OR :old.dacr_univid != :new.dacr_univid OR
    (:old.dacr_enbd IS NULL AND :new.dacr_enbd IS NOT NULL) OR (:old.dacr_enbd IS NOT NULL AND :new.dacr_enbd IS NULL) OR :old.dacr_enbd != :new.dacr_enbd OR
    (:old.dacr_id IS NULL AND :new.dacr_id IS NOT NULL) OR (:old.dacr_id IS NOT NULL AND :new.dacr_id IS NULL) OR :old.dacr_id != :new.dacr_id OR
    (:old.dirn_id IS NULL AND :new.dirn_id IS NOT NULL) OR (:old.dirn_id IS NOT NULL AND :new.dirn_id IS NULL) OR :old.dirn_id != :new.dirn_id OR
    (:old.pcrt_id IS NULL AND :new.pcrt_id IS NOT NULL) OR (:old.pcrt_id IS NOT NULL AND :new.pcrt_id IS NULL) OR :old.pcrt_id != :new.pcrt_id OR
    (:old.dlir_id IS NULL AND :new.dlir_id IS NOT NULL) OR (:old.dlir_id IS NOT NULL AND :new.dlir_id IS NULL) OR :old.dlir_id != :new.dlir_id OR
    (:old.blrn_val IS NULL AND :new.blrn_val IS NOT NULL) OR (:old.blrn_val IS NOT NULL AND :new.blrn_val IS NULL) OR :old.blrn_val != :new.blrn_val OR
    (:old.blrn_id IS NULL AND :new.blrn_id IS NOT NULL) OR (:old.blrn_id IS NOT NULL AND :new.blrn_id IS NULL) OR :old.blrn_id != :new.blrn_id OR
    (:old.prrn_id IS NULL AND :new.prrn_id IS NOT NULL) OR (:old.prrn_id IS NOT NULL AND :new.prrn_id IS NULL) OR :old.prrn_id
!= :new.prrn_id OR
    (:old.ipgr_id IS NULL AND :new.ipgr_id IS NOT NULL) OR (:old.ipgr_id IS NOT NULL AND :new.ipgr_id IS NULL) OR :old.ipgr_id != :new.ipgr_id OR
    (:old.rnrn_rngefrom IS NULL AND :new.rnrn_rngefrom IS NOT NULL) OR (:old.rnrn_rngefrom IS NOT NULL AND :new.rnrn_rngefrom IS NULL) OR :old.rnrn_rngefrom != :new.rnrn_rngefrom OR
    (:old.rnrn_rngeto IS NULL AND :new.rnrn_rngeto IS NOT NULL) OR (:old.rnrn_rngeto IS NOT NULL AND :new.rnrn_rngeto IS NULL) OR :old.rnrn_rngeto != :new.rnrn_rngeto OR
    (:old.rnrn_id IS NULL AND :new.rnrn_id IS NOT NULL) OR (:old.rnrn_id IS NOT NULL AND :new.rnrn_id IS NULL) OR :old.rnrn_id != :new.rnrn_id OR
    (:old.adrn_id IS NULL AND :new.adrn_id IS NOT NULL) OR (:old.adrn_id IS NOT NULL AND :new.adrn_id IS NULL) OR :old.adrn_id != :new.adrn_id OR
    (:old.cdrn_id IS NULL AND :new.cdrn_id IS NOT NULL) OR (:old.cdrn_id IS NOT NULL AND :new.cdrn_id IS NULL) OR :old.cdrn_id != :new.cdrn_id OR
    (:old.ctrn_longval IS NULL AND :new.ctrn_longval IS NOT NULL) OR (:old.ctrn_longval IS NOT NULL AND :new.ctrn_longval IS NULL) OR :old.ctrn_longval != :new.ctrn_longval OR
    (:old.ctrn_id IS NULL AND :new.ctrn_id IS NOT NULL) OR (:old.ctrn_id IS NOT NULL AND :new.ctrn_id IS NULL) OR :old.ctrn_id != :new.ctrn_id OR
    (:old.dirn_dgis IS NULL AND :new.dirn_dgis IS NOT NULL) OR (:old.dirn_dgis IS NOT NULL AND :new.dirn_dgis IS NULL) OR :old.dirn_dgis != :new.dirn_dgis OR
    (:old.dacr_dat_acc_prof IS NULL AND :new.dacr_dat_acc_prof IS NOT NULL) OR (:old.dacr_dat_acc_prof IS NOT NULL AND :new.dacr_dat_acc_prof IS NULL) OR :old.dacr_dat_acc_prof != :new.dacr_dat_acc_prof OR
    (:old.dacr_dat_dmn IS NULL AND :new.dacr_dat_dmn IS NOT NULL) OR (:old.dacr_dat_dmn IS NOT NULL AND :new.dacr_dat_dmn IS NULL) OR :old.dacr_dat_dmn != :new.dacr_dat_dmn OR
    (:old.adrn_cnry IS NULL AND :new.adrn_cnry IS NOT NULL) OR (:old.adrn_cnry IS NOT NULL AND :new.adrn_cnry IS NULL) OR :old.adrn_cnry != :new.adrn_cnry OR
    (:old.adrn_stt_or_rgn
 IS NULL AND :new.adrn_stt_or_rgn IS NOT NULL) OR (:old.adrn_stt_or_rgn IS NOT NULL AND :new.adrn_stt_or_rgn IS NULL) OR :old.adrn_stt_or_rgn != :new.adrn_stt_or_rgn OR
    (:old.adrn_cnty IS NULL AND :new.adrn_cnty IS NOT NULL) OR (:old.adrn_cnty IS NOT NULL AND :new.adrn_cnty IS NULL) OR :old.adrn_cnty != :new.adrn_cnty OR
    (:old.adrn_cityor_town IS NULL AND :new.adrn_cityor_town IS NOT NULL) OR (:old.adrn_cityor_town IS NOT NULL AND :new.adrn_cityor_town IS NULL) OR :old.adrn_cityor_town != :new.adrn_cityor_town OR
    (:old.cdrn_srvc IS NULL AND :new.cdrn_srvc IS NOT NULL) OR (:old.cdrn_srvc IS NOT NULL AND :new.cdrn_srvc IS NULL) OR :old.cdrn_srvc != :new.cdrn_srvc OR
    (:old.dlir_ddl_item IS NULL AND :new.dlir_ddl_item IS NOT NULL) OR (:old.dlir_ddl_item IS NOT NULL AND :new.dlir_ddl_item IS NULL) OR :old.dlir_ddl_item != :new.dlir_ddl_item OR
    (:old.prrn_pvdr IS NULL AND :new.prrn_pvdr IS NOT NULL) OR (:old.prrn_pvdr IS NOT NULL AND :new.prrn_pvdr IS NULL) OR :old.prrn_pvdr != :new.prrn_pvdr OR
    (:old.ipgr_inscprsrgrp IS NULL AND :new.ipgr_inscprsrgrp IS NOT NULL) OR (:old.ipgr_inscprsrgrp IS NOT NULL AND :new.ipgr_inscprsrgrp IS NULL) OR :old.ipgr_inscprsrgrp != :new.ipgr_inscprsrgrp OR
    (:old.pcrt_prodcat IS NULL AND :new.pcrt_prodcat IS NOT NULL) OR (:old.pcrt_prodcat IS NOT NULL AND :new.pcrt_prodcat IS NULL) OR :old.pcrt_prodcat != :new.pcrt_prodcat
  THEN
    old_row.classtype := :old.classtype;
    new_row.classtype := :new.classtype;
    old_row.dacr_c4c_id := :old.dacr_c4c_id;
    new_row.dacr_c4c_id := :new.dacr_c4c_id;
    old_row.dacr_crtd := :old.dacr_crtd;
    new_row.dacr_crtd := :new.dacr_crtd;
    old_row.dacr_las_act := :old.dacr_las_act;
    new_row.dacr_las_act := :new.dacr_las_act;
    old_row.dacr_las_act_actrtyp := :old.dacr_las_act_actrtyp;
    new_row.dacr_las_act_actrtyp := :new.dacr_las_act_actrtyp;
    old_row.dacr_las_act_tim := :old.dacr_las_act_tim;
    new_row.dacr_las_act_tim := :new.dacr_las_act_tim;
    old_row
.dacr_obj_stt := :old.dacr_obj_stt;
    new_row.dacr_obj_stt := :new.dacr_obj_stt;
    old_row.dacr_vers := :old.dacr_vers;
    new_row.dacr_vers := :new.dacr_vers;
    old_row.dacr_vsbt := :old.dacr_vsbt;
    new_row.dacr_vsbt := :new.dacr_vsbt;
    old_row.dacr_dltddt := :old.dacr_dltddt;
    new_row.dacr_dltddt := :new.dacr_dltddt;
    old_row.dacr_las_act_by := :old.dacr_las_act_by;
    new_row.dacr_las_act_by := :new.dacr_las_act_by;
    old_row.dacr_origcrtr := :old.dacr_origcrtr;
    new_row.dacr_origcrtr := :new.dacr_origcrtr;
    old_row.dacr_origcrtrlogdin := :old.dacr_origcrtrlogdin;
    new_row.dacr_origcrtrlogdin := :new.dacr_origcrtrlogdin;
    old_row.dacr_las_act_by_logdin := :old.dacr_las_act_by_logdin;
    new_row.dacr_las_act_by_logdin := :new.dacr_las_act_by_logdin;
    old_row.dacr_univid := :old.dacr_univid;
    new_row.dacr_univid := :new.dacr_univid;
    old_row.dacr_enbd := :old.dacr_enbd;
    new_row.dacr_enbd := :new.dacr_enbd;
    old_row.dacr_id := :old.dacr_id;
    new_row.dacr_id := :new.dacr_id;
    old_row.dirn_id := :old.dirn_id;
    new_row.dirn_id := :new.dirn_id;
    old_row.pcrt_id := :old.pcrt_id;
    new_row.pcrt_id := :new.pcrt_id;
    old_row.dlir_id := :old.dlir_id;
    new_row.dlir_id := :new.dlir_id;
    old_row.blrn_val := :old.blrn_val;
    new_row.blrn_val := :new.blrn_val;
    old_row.blrn_id := :old.blrn_id;
    new_row.blrn_id := :new.blrn_id;
    old_row.prrn_id := :old.prrn_id;
    new_row.prrn_id := :new.prrn_id;
    old_row.ipgr_id := :old.ipgr_id;
    new_row.ipgr_id := :new.ipgr_id;
    old_row.rnrn_rngefrom := :old.rnrn_rngefrom;
    new_row.rnrn_rngefrom := :new.rnrn_rngefrom;
    old_row.rnrn_rngeto := :old.rnrn_rngeto;
    new_row.rnrn_rngeto := :new.rnrn_rngeto;
    old_row.rnrn_id := :old.rnrn_id;
    new_row.rnrn_id := :new.rnrn_id;
    old_row.adrn_id := :old.adrn_id;
    new_row.adrn_id := :new.adrn_id;
    old_row.cdrn_id := :old.cdrn_id;
    new_row.cdrn_id := :new.cdrn_id;
    old_row.ctrn_longval
:= :old.ctrn_longval;
    new_row.ctrn_longval := :new.ctrn_longval;
    old_row.ctrn_id := :old.ctrn_id;
    new_row.ctrn_id := :new.ctrn_id;
    old_row.dirn_dgis := :old.dirn_dgis;
    new_row.dirn_dgis := :new.dirn_dgis;
    old_row.dacr_dat_acc_prof := :old.dacr_dat_acc_prof;
    new_row.dacr_dat_acc_prof := :new.dacr_dat_acc_prof;
    old_row.dacr_dat_dmn := :old.dacr_dat_dmn;
    new_row.dacr_dat_dmn := :new.dacr_dat_dmn;
    old_row.adrn_cnry := :old.adrn_cnry;
    new_row.adrn_cnry := :new.adrn_cnry;
    old_row.adrn_stt_or_rgn := :old.adrn_stt_or_rgn;
    new_row.adrn_stt_or_rgn := :new.adrn_stt_or_rgn;
    old_row.adrn_cnty := :old.adrn_cnty;
    new_row.adrn_cnty := :new.adrn_cnty;
    old_row.adrn_cityor_town := :old.adrn_cityor_town;
    new_row.adrn_cityor_town := :new.adrn_cityor_town;
    old_row.cdrn_srvc := :old.cdrn_srvc;
    new_row.cdrn_srvc := :new.cdrn_srvc;
    old_row.dlir_ddl_item := :old.dlir_ddl_item;
    new_row.dlir_ddl_item := :new.dlir_ddl_item;
    old_row.prrn_pvdr := :old.prrn_pvdr;
    new_row.prrn_pvdr := :new.prrn_pvdr;
    old_row.ipgr_inscprsrgrp := :old.ipgr_inscprsrgrp;
    new_row.ipgr_inscprsrgrp := :new.ipgr_inscprsrgrp;
    old_row.pcrt_prodcat := :old.pcrt_prodcat;
    new_row.pcrt_prodcat := :new.pcrt_prodcat;

    trgproc_dacr_ar(old_row, new_row, inserting, updating, deleting);
  END IF;
END trg_dacr_ar;









</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
57
</td>
<td>
THH_C4C
</td>
<td>
TRG_DACR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DAT_ACC_RTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DACR_AUDITINSERT&quot; BEFORE INSERT ON T_DAT_ACC_RTN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.dacr_crtd IS NULL THEN 
    :new.dacr_crtd := curr_date; 
  END IF; 

  IF :new.dacr_las_act_tim IS NULL THEN 
    :new.dacr_las_act_tim := curr_date; 
  END IF; 

  IF :new.dacr_las_act IS NULL THEN 
    :new.dacr_las_act := 1; 
  END IF; 

  IF :new.dacr_obj_stt IS NULL THEN 
    :new.dacr_obj_stt := 1; 
  END IF; 

  IF :new.dacr_vers IS NULL THEN 
    :new.dacr_vers := 0; 
  END IF; 

  IF :new.dacr_vsbt IS NULL THEN 
    :new.dacr_vsbt := 1001; 
  END IF; 

  IF :new.dacr_las_act_by IS NULL THEN 
    :new.dacr_las_act_by := 1; 
  END IF; 

  IF :new.dacr_origcrtr IS NULL THEN 
    :new.dacr_origcrtr := 1; 
  END IF; 

  IF :new.dacr_origcrtrlogdin IS NULL THEN 
    :new.dacr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.dacr_las_act_by_logdin IS NULL THEN 
    :new.dacr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_dat_acc_rtn 
  ( 
   dlir_id, 
   blrn_val, 
   blrn_id, 
   prrn_id, 
   ipgr_id, 
   rnrn_rngefrom, 
   rnrn_rngeto, 
   rnrn_id, 
   adrn_id, 
   cdrn_id, 
   ctrn_longval, 
   ctrn_id, 
   dirn_dgis, 
   dacr_dat_acc_prof, 
   dacr_dat_dmn, 
   adrn_cnry, 
   adrn_stt_or_rgn, 
   adrn_cnty, 
   adrn_cityor_town, 
   cdrn_srvc, 
   dlir_ddl_item, 
   prrn_pvdr, 
   ipgr_inscprsrgrp, 
   pcrt_prodcat, 
   classtype, 
   dacr_c4c_id, 
   dacr_crtd, 
   dacr_las_act, 
   dacr_las_act_actrtyp, 
   dacr_obj_stt, 
   dacr_vers, 
   dacr_vsbt, 
   dacr_dltddt, 
   dacr_las_act_by, 
   dacr_origcrtr, 
   dacr_origcrtrlogdin, 
   dacr_las_act_by_logdin, 
   dacr_univid, 
   dacr_enbd, 
   dirn_id, 
   pcrt_id, 
   dacr_id, 
   valid_from, 
   valid_to , 
   dacr_audid, 
   dacr_prev_audid, 
   dacr_next_audid
  ) 
  VALUES 
  ( 
   :new.dlir_id,
   :new.blrn_val,
   :new.blrn_id,
   :new.prrn_id,
   :new.ipgr_id,
   :new.rnrn_rngefrom,
   :new.rnrn_rngeto,
   :new.rnrn_id,
   :new.adrn_id,
   :new.cdrn_id,
   :new.ctrn_longval,
   :new.ctrn_id,
   :new.d
irn_dgis,
   :new.dacr_dat_acc_prof,
   :new.dacr_dat_dmn,
   :new.adrn_cnry,
   :new.adrn_stt_or_rgn,
   :new.adrn_cnty,
   :new.adrn_cityor_town,
   :new.cdrn_srvc,
   :new.dlir_ddl_item,
   :new.prrn_pvdr,
   :new.ipgr_inscprsrgrp,
   :new.pcrt_prodcat,
   :new.classtype,
   :new.dacr_c4c_id,
   :new.dacr_crtd,
   :new.dacr_las_act,
   :new.dacr_las_act_actrtyp,
   :new.dacr_obj_stt,
   :new.dacr_vers,
   :new.dacr_vsbt,
   :new.dacr_dltddt,
   :new.dacr_las_act_by,
   :new.dacr_origcrtr,
   :new.dacr_origcrtrlogdin,
   :new.dacr_las_act_by_logdin,
   :new.dacr_univid,
   :new.dacr_enbd,
   :new.dirn_id,
   :new.pcrt_id, 
   :new.dacr_id, 
   :new.dacr_las_act_tim, 
   NULL, 
   u_dat_acc_rtn.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
58
</td>
<td>
THH_C4C
</td>
<td>
TRG_DACR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DAT_ACC_RTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_dacr_auditupdate BEFORE
  UPDATE
    ON T_DAT_ACC_RTN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        dacr_audid
      INTO
        last_audid
      FROM
        a_dat_acc_rtn
      WHERE
        dacr_id            = :old.dacr_id
      AND dacr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.dacr_las_act_tim = :new.dacr_las_act_tim THEN
      UPDATE
        a_dat_acc_rtn
      SET
        classtype              = :new.classtype,
        dacr_c4c_id            = :new.dacr_c4c_id,
        dacr_crtd              = :new.dacr_crtd,
        dacr_las_act           = :new.dacr_las_act,
        dacr_las_act_actrtyp   = :new.dacr_las_act_actrtyp,
        dacr_obj_stt           = :new.dacr_obj_stt,
        dacr_vers              = :new.dacr_vers,
        dacr_vsbt              = :new.dacr_vsbt,
        dacr_dltddt            = :new.dacr_dltddt,
        dacr_las_act_by        = :new.dacr_las_act_by,
        dacr_origcrtr          = :new.dacr_origcrtr,
        dacr_origcrtrlogdin    = :new.dacr_origcrtrlogdin,
        dacr_las_act_by_logdin = :new.dacr_las_act_by_logdin,
        dacr_univid            = :new.dacr_univid,
        dacr_enbd              = :new.dacr_enbd,
        dirn_id                = :new.dirn_id,
        pcrt_id                = :new.pcrt_id,
        dlir_id                = :new.dlir_id,
        blrn_val               = :new.blrn_val,
        blrn_id                = :new.blrn_id,
        prrn_id                = :new.prrn_id,
        ipgr_id                = :new.ipgr_id,
        rnrn_rngefrom          = :new.rnrn_rngefrom,
        rnrn_rngeto            = :new.rnrn_rngeto,
        rnrn_id                = :new.rnrn_id,
        adrn_id                = :new.adrn_id,
        cdrn_id                = :new.cdrn_id,
        ctrn_longval           = :new.ct
rn_longval,
        ctrn_id                = :new.ctrn_id,
        dirn_dgis              = :new.dirn_dgis,
        dacr_dat_acc_prof      = :new.dacr_dat_acc_prof,
        dacr_dat_dmn           = :new.dacr_dat_dmn,
        adrn_cnry              = :new.adrn_cnry,
        adrn_stt_or_rgn        = :new.adrn_stt_or_rgn,
        adrn_cnty              = :new.adrn_cnty,
        adrn_cityor_town       = :new.adrn_cityor_town,
        cdrn_srvc              = :new.cdrn_srvc,
        dlir_ddl_item          = :new.dlir_ddl_item,
        prrn_pvdr              = :new.prrn_pvdr,
        ipgr_inscprsrgrp       = :new.ipgr_inscprsrgrp,
        pcrt_prodcat           = :new.pcrt_prodcat
      WHERE
        dacr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_dat_acc_rtn
        (
          classtype,
          dacr_c4c_id,
          dacr_crtd,
          dacr_las_act,
          dacr_las_act_actrtyp,
          dacr_obj_stt,
          dacr_vers,
          dacr_vsbt,
          dacr_dltddt,
          dacr_las_act_by,
          dacr_origcrtr,
          dacr_origcrtrlogdin,
          dacr_las_act_by_logdin,
          dacr_univid,
          dacr_enbd,
          dirn_id,
          pcrt_id,
          dlir_id,
          blrn_val,
          blrn_id,
          prrn_id,
          ipgr_id,
          rnrn_rngefrom,
          rnrn_rngeto,
          rnrn_id,
          adrn_id,
          cdrn_id,
          ctrn_longval,
          ctrn_id,
          dirn_dgis,
          dacr_dat_acc_prof,
          dacr_dat_dmn,
          adrn_cnry,
          adrn_stt_or_rgn,
          adrn_cnty,
          adrn_cityor_town,
          cdrn_srvc,
          dlir_ddl_item,
          prrn_pvdr,
          ipgr_inscprsrgrp,
          pcrt_prodcat,
          dacr_id,
          valid_from,
          valid_to,
          dacr_audid,
          dacr_prev_audid,
          dacr_next_audid

       )
        VALUES
        (
          :new.classtype,
          :new.dacr_c4c_id,
          :new.dacr_crtd,
          :new.dacr_las_act,
          :new.dacr_las_act_actrtyp,
          :new.dacr_obj_stt,
          :new.dacr_vers,
          :new.dacr_vsbt,
          :new.dacr_dltddt,
          :new.dacr_las_act_by,
          :new.dacr_origcrtr,
          :new.dacr_origcrtrlogdin,
          :new.dacr_las_act_by_logdin,
          :new.dacr_univid,
          :new.dacr_enbd,
          :new.dirn_id,
          :new.pcrt_id,
          :new.dlir_id,
          :new.blrn_val,
          :new.blrn_id,
          :new.prrn_id,
          :new.ipgr_id,
          :new.rnrn_rngefrom,
          :new.rnrn_rngeto,
          :new.rnrn_id,
          :new.adrn_id,
          :new.cdrn_id,
          :new.ctrn_longval,
          :new.ctrn_id,
          :new.dirn_dgis,
          :new.dacr_dat_acc_prof,
          :new.dacr_dat_dmn,
          :new.adrn_cnry,
          :new.adrn_stt_or_rgn,
          :new.adrn_cnty,
          :new.adrn_cityor_town,
          :new.cdrn_srvc,
          :new.dlir_ddl_item,
          :new.prrn_pvdr,
          :new.ipgr_inscprsrgrp,
          :new.pcrt_prodcat,
          :new.dacr_id,
          :new.dacr_las_act_tim,
          NULL,
          u_dat_acc_rtn.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_dat_acc_rtn
      SET
        valid_to        = :new.dacr_las_act_tim,
        dacr_next_audid = u_dat_acc_rtn.CURRVAL
      WHERE
        dacr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
59
</td>
<td>
THH_C4C
</td>
<td>
TRG_DOAL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DAYSOFF_AWNC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DOAL_AUDITINSERT&quot; BEFORE INSERT ON T_DAYSOFF_AWNC FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.doal_crtd IS NULL THEN 
    :new.doal_crtd := curr_date; 
  END IF; 

  IF :new.doal_las_act_tim IS NULL THEN 
    :new.doal_las_act_tim := curr_date; 
  END IF; 

  IF :new.doal_las_act IS NULL THEN 
    :new.doal_las_act := 1; 
  END IF; 

  IF :new.doal_obj_stt IS NULL THEN 
    :new.doal_obj_stt := 1; 
  END IF; 

  IF :new.doal_vers IS NULL THEN 
    :new.doal_vers := 0; 
  END IF; 

  IF :new.doal_vsbt IS NULL THEN 
    :new.doal_vsbt := 1001; 
  END IF; 

  IF :new.doal_las_act_by IS NULL THEN 
    :new.doal_las_act_by := 1; 
  END IF; 

  IF :new.doal_origcrtr IS NULL THEN 
    :new.doal_origcrtr := 1; 
  END IF; 

  IF :new.doal_origcrtrlogdin IS NULL THEN 
    :new.doal_origcrtrlogdin := 1; 
  END IF; 

  IF :new.doal_las_act_by_logdin IS NULL THEN 
    :new.doal_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_daysoff_awnc 
  ( 
   doal_dltddt, 
   doal_las_act_by, 
   doal_origcrtr, 
   doal_origcrtrlogdin, 
   doal_las_act_by_logdin, 
   doal_univid, 
   doal_nmbrof_days, 
   doal_yr, 
   doal_payr, 
   classtype, 
   doal_c4c_id, 
   doal_crtd, 
   doal_las_act, 
   doal_las_act_actrtyp, 
   doal_obj_stt, 
   doal_vers, 
   doal_vsbt, 
   doal_id, 
   valid_from, 
   valid_to , 
   doal_audid, 
   doal_prev_audid, 
   doal_next_audid
  ) 
  VALUES 
  ( 
   :new.doal_dltddt,
   :new.doal_las_act_by,
   :new.doal_origcrtr,
   :new.doal_origcrtrlogdin,
   :new.doal_las_act_by_logdin,
   :new.doal_univid,
   :new.doal_nmbrof_days,
   :new.doal_yr,
   :new.doal_payr,
   :new.classtype,
   :new.doal_c4c_id,
   :new.doal_crtd,
   :new.doal_las_act,
   :new.doal_las_act_actrtyp,
   :new.doal_obj_stt,
   :new.doal_vers,
   :new.doal_vsbt, 
   :new.doal_id, 
   :new.doal_las_act_tim, 
   NULL, 
   u_daysoff_awnc.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
60
</td>
<td>
THH_C4C
</td>
<td>
TRG_DOAL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DAYSOFF_AWNC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_doal_auditupdate BEFORE
  UPDATE
    ON T_DAYSOFF_AWNC FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        doal_audid
      INTO
        last_audid
      FROM
        a_daysoff_awnc
      WHERE
        doal_id            = :old.doal_id
      AND doal_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.doal_las_act_tim = :new.doal_las_act_tim THEN
      UPDATE
        a_daysoff_awnc
      SET
        classtype              = :new.classtype,
        doal_c4c_id            = :new.doal_c4c_id,
        doal_crtd              = :new.doal_crtd,
        doal_las_act           = :new.doal_las_act,
        doal_las_act_actrtyp   = :new.doal_las_act_actrtyp,
        doal_obj_stt           = :new.doal_obj_stt,
        doal_vers              = :new.doal_vers,
        doal_vsbt              = :new.doal_vsbt,
        doal_dltddt            = :new.doal_dltddt,
        doal_las_act_by        = :new.doal_las_act_by,
        doal_origcrtr          = :new.doal_origcrtr,
        doal_origcrtrlogdin    = :new.doal_origcrtrlogdin,
        doal_las_act_by_logdin = :new.doal_las_act_by_logdin,
        doal_univid            = :new.doal_univid,
        doal_nmbrof_days       = :new.doal_nmbrof_days,
        doal_yr                = :new.doal_yr,
        doal_payr              = :new.doal_payr
      WHERE
        doal_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_daysoff_awnc
        (
          classtype,
          doal_c4c_id,
          doal_crtd,
          doal_las_act,
          doal_las_act_actrtyp,
          doal_obj_stt,
          doal_vers,
          doal_vsbt,
          doal_dltddt,
          doal_las_act_by,
          doal_origcrtr,
          do
al_origcrtrlogdin,
          doal_las_act_by_logdin,
          doal_univid,
          doal_nmbrof_days,
          doal_yr,
          doal_payr,
          doal_id,
          valid_from,
          valid_to,
          doal_audid,
          doal_prev_audid,
          doal_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.doal_c4c_id,
          :new.doal_crtd,
          :new.doal_las_act,
          :new.doal_las_act_actrtyp,
          :new.doal_obj_stt,
          :new.doal_vers,
          :new.doal_vsbt,
          :new.doal_dltddt,
          :new.doal_las_act_by,
          :new.doal_origcrtr,
          :new.doal_origcrtrlogdin,
          :new.doal_las_act_by_logdin,
          :new.doal_univid,
          :new.doal_nmbrof_days,
          :new.doal_yr,
          :new.doal_payr,
          :new.doal_id,
          :new.doal_las_act_tim,
          NULL,
          u_daysoff_awnc.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_daysoff_awnc
      SET
        valid_to        = :new.doal_las_act_tim,
        doal_next_audid = u_daysoff_awnc.CURRVAL
      WHERE
        doal_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
61
</td>
<td>
THH_C4C
</td>
<td>
TRG_DDLI_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ddli_auditinsert BEFORE
	INSERT
		ON T_DDL_ITEM FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.ddli_crtd IS NULL THEN
    :new.ddli_crtd := curr_date;
  END IF;

  IF :new.ddli_las_act_tim IS NULL THEN
    :new.ddli_las_act_tim := curr_date;
  END IF;

  IF :new.ddli_las_act IS NULL THEN
    :new.ddli_las_act := 1;
  END IF;

  IF :new.ddli_obj_stt IS NULL THEN
    :new.ddli_obj_stt := 1;
  END IF;

  IF :new.ddli_vers IS NULL THEN
    :new.ddli_vers := 0;
  END IF;

  IF :new.ddli_vsbt IS NULL THEN
    :new.ddli_vsbt := 1001;
  END IF;

  IF :new.ddli_las_act_by IS NULL THEN
    :new.ddli_las_act_by := 1;
  END IF;

  IF :new.ddli_origcrtr IS NULL THEN
    :new.ddli_origcrtr := 1;
  END IF;

  IF :new.ddli_origcrtrlogdin IS NULL THEN
    :new.ddli_origcrtrlogdin := 1;
  END IF;

  IF :new.ddli_las_act_by_logdin IS NULL THEN
    :new.ddli_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_ddl_item
  (
   ddli_las_atvd,
   ddli_las_dctd,
   ddli_wkfwistcid,
   ddli_cnv_id,
   ddli_ownrchndflag,
   ddli_ownrchndcnt,
   umty_id,
   cpny_id,
   plns_id,
   mmgy_id,
   qtyp_id,
   pttp_prj_pvtncase,
   pttp_prj_pvtncasereqt,
   pttp_prj_pvtncm_prj,
   pttp_prj_pvtncm_prj_reqt,
   pttp_id,
   bmty_id,
   ncty_id,
   ueny_id,
   cntp_id,
   mnty_id,
   ctyb_mndtapvl,
   ctyb_id,
   imdy_id,
   tity_id,
   tskt_rcpttyp,
   tskt_id,
   piqt_id,
   lltp_id,
   lttp_mntygkprrevw,
   lttp_id,
   cbty_id,
   lhtp_id,
   cdtp_id,
   fctp_id,
   rpty_id,
   bptp_id,
   cctp_id,
   attp_id,
   eucy_id,
   ettp_id,
   prny_id,
   ddli_las_dctdby,
   ddli_frstatvdby,
   ddli_las_atvdby,
   ddli_ratnapvl,
   ddli_rfngwkfwtsk,
   ddli_prvsrfngtsk,
   ddli_prvsrfngtsk_prmn,
   ddli_ownr,
   ddli_prvsownr,
   ddli_prvssndr,
   ddli_prvsownrprmn,
   ddli_tnfr,
   ddli_prvstnfr,
   attp_dscm,
   cctp_dfltldngmsg,
   tskt_icon,
   ddli_prnt,
   attp_dfltltr_head,
   ddli_ddl,
   classtype,
   ddli_c4c_id,
   ddli_crtd,
   ddli_las_act,
   ddli_las_act_actrtyp,
   ddli_obj_stt,
   ddli_ve
rs,
   ddli_vsbt,
   ddli_dltddt,
   ddli_las_act_by,
   ddli_origcrtr,
   ddli_origcrtrlogdin,
   ddli_las_act_by_logdin,
   ddli_univid,
   ddli_lbl,
   ddli_cmmt,
   ddli_val,
   ddli_sytm,
   ddli_ddl_itemconsid,
   ddli_frstatvd,
   ddli_id,
   valid_from,
   valid_to ,
   ddli_audid,
   ddli_prev_audid,
   ddli_next_audid,
   stnt_id,
   careplan_note_id,
   ddli_code_value,
   ddli_reference
  )
  VALUES
  (
   :new.ddli_las_atvd,
   :new.ddli_las_dctd,
   :new.ddli_wkfwistcid,
   :new.ddli_cnv_id,
   :new.ddli_ownrchndflag,
   :new.ddli_ownrchndcnt,
   :new.umty_id,
   :new.cpny_id,
   :new.plns_id,
   :new.mmgy_id,
   :new.qtyp_id,
   :new.pttp_prj_pvtncase,
   :new.pttp_prj_pvtncasereqt,
   :new.pttp_prj_pvtncm_prj,
   :new.pttp_prj_pvtncm_prj_reqt,
   :new.pttp_id,
   :new.bmty_id,
   :new.ncty_id,
   :new.ueny_id,
   :new.cntp_id,
   :new.mnty_id,
   :new.ctyb_mndtapvl,
   :new.ctyb_id,
   :new.imdy_id,
   :new.tity_id,
   :new.tskt_rcpttyp,
   :new.tskt_id,
   :new.piqt_id,
   :new.lltp_id,
   :new.lttp_mntygkprrevw,
   :new.lttp_id,
   :new.cbty_id,
   :new.lhtp_id,
   :new.cdtp_id,
   :new.fctp_id,
   :new.rpty_id,
   :new.bptp_id,
   :new.cctp_id,
   :new.attp_id,
   :new.eucy_id,
   :new.ettp_id,
   :new.prny_id,
   :new.ddli_las_dctdby,
   :new.ddli_frstatvdby,
   :new.ddli_las_atvdby,
   :new.ddli_ratnapvl,
   :new.ddli_rfngwkfwtsk,
   :new.ddli_prvsrfngtsk,
   :new.ddli_prvsrfngtsk_prmn,
   :new.ddli_ownr,
   :new.ddli_prvsownr,
   :new.ddli_prvssndr,
   :new.ddli_prvsownrprmn,
   :new.ddli_tnfr,
   :new.ddli_prvstnfr,
   :new.attp_dscm,
   :new.cctp_dfltldngmsg,
   :new.tskt_icon,
   :new.ddli_prnt,
   :new.attp_dfltltr_head,
   :new.ddli_ddl,
   :new.classtype,
   :new.ddli_c4c_id,
   :new.ddli_crtd,
   :new.ddli_las_act,
   :new.ddli_las_act_actrtyp,
   :new.ddli_obj_stt,
   :new.ddli_vers,
   :new.ddli_vsbt,
   :new.ddli_dltddt,
   :new.ddli_las_act_by,
   :new.ddli_origcrtr,
   :new.ddli_origcrtrlogdin,
   :new.ddli_las_act_by_logdin,
   :ne
w.ddli_univid,
   :new.ddli_lbl,
   :new.ddli_cmmt,
   :new.ddli_val,
   :new.ddli_sytm,
   :new.ddli_ddl_itemconsid,
   :new.ddli_frstatvd,
   :new.ddli_id,
   :new.ddli_las_act_tim,
   NULL,
   u_ddl_item.NEXTVAL,
   NULL,
   NULL,
   :new.stnt_id,
   :new.careplan_note_id,
   :new.ddli_code_value,
   :new.ddli_reference
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
62
</td>
<td>
THH_C4C
</td>
<td>
TRG_DDLI_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ddli_auditupdate BEFORE
  UPDATE
    ON T_DDL_ITEM FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ddli_audid
      INTO
        last_audid
      FROM
        a_ddl_item
      WHERE
        ddli_id            = :old.ddli_id
      AND ddli_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ddli_las_act_tim = :new.ddli_las_act_tim THEN
      UPDATE
        a_ddl_item
      SET
        ddli_las_act_by_logdin   = :new.ddli_las_act_by_logdin,
        ddli_univid              = :new.ddli_univid,
        ddli_lbl                 = :new.ddli_lbl,
        ddli_cmmt                = :new.ddli_cmmt,
        ddli_val                 = :new.ddli_val,
        ddli_sytm                = :new.ddli_sytm,
        ddli_ddl_itemconsid      = :new.ddli_ddl_itemconsid,
        ddli_frstatvd            = :new.ddli_frstatvd,
        ddli_las_atvd            = :new.ddli_las_atvd,
        ddli_las_dctd            = :new.ddli_las_dctd,
        ddli_wkfwistcid          = :new.ddli_wkfwistcid,
        ddli_cnv_id              = :new.ddli_cnv_id,
        ddli_ownrchndflag        = :new.ddli_ownrchndflag,
        ddli_ownrchndcnt         = :new.ddli_ownrchndcnt,
        umty_id                  = :new.umty_id,
        cpny_id                  = :new.cpny_id,
        plns_id                  = :new.plns_id,
        mmgy_id                  = :new.mmgy_id,
        qtyp_id                  = :new.qtyp_id,
        pttp_prj_pvtncase        = :new.pttp_prj_pvtncase,
        pttp_prj_pvtncasereqt    = :new.pttp_prj_pvtncasereqt,
        pttp_prj_pvtncm_prj      = :new.pttp_prj_pvtncm_prj,
        pttp_prj_pvtncm_prj_reqt = :new.pttp_prj_pvtncm_prj_reqt,
        pttp_id                  = :new.pttp_id,
        bmty_id                  = :new.bmty_id,
        ncty_id                  = :new.ncty_id,

        ueny_id                  = :new.ueny_id,
        cntp_id                  = :new.cntp_id,
        mnty_id                  = :new.mnty_id,
        ctyb_mndtapvl            = :new.ctyb_mndtapvl,
        ctyb_id                  = :new.ctyb_id,
        imdy_id                  = :new.imdy_id,
        tity_id                  = :new.tity_id,
        tskt_rcpttyp             = :new.tskt_rcpttyp,
        tskt_id                  = :new.tskt_id,
        piqt_id                  = :new.piqt_id,
        lltp_id                  = :new.lltp_id,
        lttp_mntygkprrevw        = :new.lttp_mntygkprrevw,
        lttp_id                  = :new.lttp_id,
        cbty_id                  = :new.cbty_id,
        lhtp_id                  = :new.lhtp_id,
        cdtp_id                  = :new.cdtp_id,
        fctp_id                  = :new.fctp_id,
        rpty_id                  = :new.rpty_id,
        bptp_id                  = :new.bptp_id,
        cctp_id                  = :new.cctp_id,
        attp_id                  = :new.attp_id,
        eucy_id                  = :new.eucy_id,
        ettp_id                  = :new.ettp_id,
        prny_id                  = :new.prny_id,
        ddli_las_dctdby          = :new.ddli_las_dctdby,
        ddli_frstatvdby          = :new.ddli_frstatvdby,
        ddli_las_atvdby          = :new.ddli_las_atvdby,
        ddli_ratnapvl            = :new.ddli_ratnapvl,
        ddli_rfngwkfwtsk         = :new.ddli_rfngwkfwtsk,
        ddli_prvsrfngtsk         = :new.ddli_prvsrfngtsk,
        ddli_prvsrfngtsk_prmn    = :new.ddli_prvsrfngtsk_prmn,
        ddli_ownr                = :new.ddli_ownr,
        ddli_prvsownr            = :new.ddli_prvsownr,
        ddli_prvssndr            = :new.ddli_prvssndr,
        ddli_prvsownrprmn        = :new.ddli_prvsownrprmn,
        ddli_tnfr                = :new.ddli_tnfr,
        ddli_prvstnfr            = :new.ddli_prvstnfr,
        attp_dscm                = :new.attp_dscm,
        cctp_dfltldn
gmsg         = :new.cctp_dfltldngmsg,
        tskt_icon                = :new.tskt_icon,
        ddli_prnt                = :new.ddli_prnt,
        attp_dfltltr_head        = :new.attp_dfltltr_head,
        ddli_ddl                 = :new.ddli_ddl,
        classtype                = :new.classtype,
        ddli_c4c_id              = :new.ddli_c4c_id,
        ddli_crtd                = :new.ddli_crtd,
        ddli_las_act             = :new.ddli_las_act,
        ddli_las_act_actrtyp     = :new.ddli_las_act_actrtyp,
        ddli_obj_stt             = :new.ddli_obj_stt,
        ddli_vers                = :new.ddli_vers,
        ddli_vsbt                = :new.ddli_vsbt,
        ddli_dltddt              = :new.ddli_dltddt,
        ddli_las_act_by          = :new.ddli_las_act_by,
        ddli_origcrtr            = :new.ddli_origcrtr,
        ddli_origcrtrlogdin      = :new.ddli_origcrtrlogdin,
        stnt_id                  = :new.stnt_id,
        careplan_note_id		 = :new.careplan_note_id,
        ddli_code_value			 = :new.ddli_code_value,
        ddli_reference			 = :new.ddli_reference
      WHERE
        ddli_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ddl_item
        (
          ddli_las_act_by_logdin,
          ddli_univid,
          ddli_lbl,
          ddli_cmmt,
          ddli_val,
          ddli_sytm,
          ddli_ddl_itemconsid,
          ddli_frstatvd,
          ddli_las_atvd,
          ddli_las_dctd,
          ddli_wkfwistcid,
          ddli_cnv_id,
          ddli_ownrchndflag,
          ddli_ownrchndcnt,
          umty_id,
          cpny_id,
          plns_id,
          mmgy_id,
          qtyp_id,
          pttp_prj_pvtncase,
          pttp_prj_pvtncasereqt,
          pttp_prj_pvtncm_prj,
          pttp_prj_pvtncm_prj_reqt,
          pttp_id,
          bmty_id,
          ncty_id,
          ueny_id,
          cnt
p_id,
          mnty_id,
          ctyb_mndtapvl,
          ctyb_id,
          imdy_id,
          tity_id,
          tskt_rcpttyp,
          tskt_id,
          piqt_id,
          lltp_id,
          lttp_mntygkprrevw,
          lttp_id,
          cbty_id,
          lhtp_id,
          cdtp_id,
          fctp_id,
          rpty_id,
          bptp_id,
          cctp_id,
          attp_id,
          eucy_id,
          ettp_id,
          prny_id,
          ddli_las_dctdby,
          ddli_frstatvdby,
          ddli_las_atvdby,
          ddli_ratnapvl,
          ddli_rfngwkfwtsk,
          ddli_prvsrfngtsk,
          ddli_prvsrfngtsk_prmn,
          ddli_ownr,
          ddli_prvsownr,
          ddli_prvssndr,
          ddli_prvsownrprmn,
          ddli_tnfr,
          ddli_prvstnfr,
          attp_dscm,
          cctp_dfltldngmsg,
          tskt_icon,
          ddli_prnt,
          attp_dfltltr_head,
          ddli_ddl,
          classtype,
          ddli_c4c_id,
          ddli_crtd,
          ddli_las_act,
          ddli_las_act_actrtyp,
          ddli_obj_stt,
          ddli_vers,
          ddli_vsbt,
          ddli_dltddt,
          ddli_las_act_by,
          ddli_origcrtr,
          ddli_origcrtrlogdin,
          ddli_id,
          valid_from,
          valid_to,
          ddli_audid,
          ddli_prev_audid,
          ddli_next_audid,
          stnt_id,
          careplan_note_id,
          ddli_code_value,
          ddli_reference
        )
        VALUES
        (
          :new.ddli_las_act_by_logdin,
          :new.ddli_univid,
          :new.ddli_lbl,
          :new.ddli_cmmt,
          :new.ddli_val,
          :new.ddli_sytm,
          :new.ddli_ddl_itemconsid,
          :new.ddli_frstatvd,
          :new.ddli_las_atvd,
          :new.ddli_las_dctd,
          :new.ddli_wkfwistcid,
          :new.ddli_cnv_id,
          :new.ddli_ownrchndflag,
          :new.ddli_ownrchndcnt,
          :new.umty_id,
          :new.cpny_id,
          :new.plns_id,
          :new.m
mgy_id,
          :new.qtyp_id,
          :new.pttp_prj_pvtncase,
          :new.pttp_prj_pvtncasereqt,
          :new.pttp_prj_pvtncm_prj,
          :new.pttp_prj_pvtncm_prj_reqt,
          :new.pttp_id,
          :new.bmty_id,
          :new.ncty_id,
          :new.ueny_id,
          :new.cntp_id,
          :new.mnty_id,
          :new.ctyb_mndtapvl,
          :new.ctyb_id,
          :new.imdy_id,
          :new.tity_id,
          :new.tskt_rcpttyp,
          :new.tskt_id,
          :new.piqt_id,
          :new.lltp_id,
          :new.lttp_mntygkprrevw,
          :new.lttp_id,
          :new.cbty_id,
          :new.lhtp_id,
          :new.cdtp_id,
          :new.fctp_id,
          :new.rpty_id,
          :new.bptp_id,
          :new.cctp_id,
          :new.attp_id,
          :new.eucy_id,
          :new.ettp_id,
          :new.prny_id,
          :new.ddli_las_dctdby,
          :new.ddli_frstatvdby,
          :new.ddli_las_atvdby,
          :new.ddli_ratnapvl,
          :new.ddli_rfngwkfwtsk,
          :new.ddli_prvsrfngtsk,
          :new.ddli_prvsrfngtsk_prmn,
          :new.ddli_ownr,
          :new.ddli_prvsownr,
          :new.ddli_prvssndr,
          :new.ddli_prvsownrprmn,
          :new.ddli_tnfr,
          :new.ddli_prvstnfr,
          :new.attp_dscm,
          :new.cctp_dfltldngmsg,
          :new.tskt_icon,
          :new.ddli_prnt,
          :new.attp_dfltltr_head,
          :new.ddli_ddl,
          :new.classtype,
          :new.ddli_c4c_id,
          :new.ddli_crtd,
          :new.ddli_las_act,
          :new.ddli_las_act_actrtyp,
          :new.ddli_obj_stt,
          :new.ddli_vers,
          :new.ddli_vsbt,
          :new.ddli_dltddt,
          :new.ddli_las_act_by,
          :new.ddli_origcrtr,
          :new.ddli_origcrtrlogdin,
          :new.ddli_id,
          :new.ddli_las_act_tim,
          NULL,
          u_ddl_item.NEXTVAL,
          last_audid,
          NULL,
          :new.stnt_id,
          :new.careplan_note_id,
          :new.ddli_cod
e_value,
          :new.ddli_reference
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ddl_item
      SET
        valid_to        = :new.ddli_las_act_tim,
        ddli_next_audid = u_ddl_item.CURRVAL
      WHERE
        ddli_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
63
</td>
<td>
THH_C4C
</td>
<td>
TRG_DLIS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEMPVDRSLTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DLIS_AUDITINSERT&quot; BEFORE INSERT ON T_DDL_ITEMPVDRSLTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.dlis_crtd IS NULL THEN 
    :new.dlis_crtd := curr_date; 
  END IF; 

  IF :new.dlis_las_act_tim IS NULL THEN 
    :new.dlis_las_act_tim := curr_date; 
  END IF; 

  IF :new.dlis_las_act IS NULL THEN 
    :new.dlis_las_act := 1; 
  END IF; 

  IF :new.dlis_obj_stt IS NULL THEN 
    :new.dlis_obj_stt := 1; 
  END IF; 

  IF :new.dlis_vers IS NULL THEN 
    :new.dlis_vers := 0; 
  END IF; 

  IF :new.dlis_vsbt IS NULL THEN 
    :new.dlis_vsbt := 1001; 
  END IF; 

  IF :new.dlis_las_act_by IS NULL THEN 
    :new.dlis_las_act_by := 1; 
  END IF; 

  IF :new.dlis_origcrtr IS NULL THEN 
    :new.dlis_origcrtr := 1; 
  END IF; 

  IF :new.dlis_origcrtrlogdin IS NULL THEN 
    :new.dlis_origcrtrlogdin := 1; 
  END IF; 

  IF :new.dlis_las_act_by_logdin IS NULL THEN 
    :new.dlis_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ddl_itempvdrslts 
  ( 
   classtype, 
   dlis_c4c_id, 
   dlis_crtd, 
   dlis_las_act, 
   dlis_las_act_actrtyp, 
   dlis_obj_stt, 
   dlis_vers, 
   dlis_vsbt, 
   dlis_dltddt, 
   dlis_las_act_by, 
   dlis_origcrtr, 
   dlis_origcrtrlogdin, 
   dlis_las_act_by_logdin, 
   dlis_univid, 
   dlis_pvdrslts, 
   dlis_slts, 
   dlis_id, 
   valid_from, 
   valid_to , 
   dlis_audid, 
   dlis_prev_audid, 
   dlis_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.dlis_c4c_id,
   :new.dlis_crtd,
   :new.dlis_las_act,
   :new.dlis_las_act_actrtyp,
   :new.dlis_obj_stt,
   :new.dlis_vers,
   :new.dlis_vsbt,
   :new.dlis_dltddt,
   :new.dlis_las_act_by,
   :new.dlis_origcrtr,
   :new.dlis_origcrtrlogdin,
   :new.dlis_las_act_by_logdin,
   :new.dlis_univid,
   :new.dlis_pvdrslts,
   :new.dlis_slts, 
   :new.dlis_id, 
   :new.dlis_las_act_tim, 
   NULL, 
   u_ddl_itempvdrslts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
64
</td>
<td>
THH_C4C
</td>
<td>
TRG_DLIS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEMPVDRSLTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_dlis_auditupdate BEFORE
  UPDATE
    ON T_DDL_ITEMPVDRSLTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        dlis_audid
      INTO
        last_audid
      FROM
        a_ddl_itempvdrslts
      WHERE
        dlis_id            = :old.dlis_id
      AND dlis_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.dlis_las_act_tim = :new.dlis_las_act_tim THEN
      UPDATE
        a_ddl_itempvdrslts
      SET
        classtype              = :new.classtype,
        dlis_c4c_id            = :new.dlis_c4c_id,
        dlis_crtd              = :new.dlis_crtd,
        dlis_las_act           = :new.dlis_las_act,
        dlis_las_act_actrtyp   = :new.dlis_las_act_actrtyp,
        dlis_obj_stt           = :new.dlis_obj_stt,
        dlis_vers              = :new.dlis_vers,
        dlis_vsbt              = :new.dlis_vsbt,
        dlis_dltddt            = :new.dlis_dltddt,
        dlis_las_act_by        = :new.dlis_las_act_by,
        dlis_origcrtr          = :new.dlis_origcrtr,
        dlis_origcrtrlogdin    = :new.dlis_origcrtrlogdin,
        dlis_las_act_by_logdin = :new.dlis_las_act_by_logdin,
        dlis_univid            = :new.dlis_univid,
        dlis_pvdrslts          = :new.dlis_pvdrslts,
        dlis_slts              = :new.dlis_slts
      WHERE
        dlis_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ddl_itempvdrslts
        (
          classtype,
          dlis_c4c_id,
          dlis_crtd,
          dlis_las_act,
          dlis_las_act_actrtyp,
          dlis_obj_stt,
          dlis_vers,
          dlis_vsbt,
          dlis_dltddt,
          dlis_las_act_by,
          dlis_origcrtr,
          dlis_origcrtrlogdin,
          dlis_las_
act_by_logdin,
          dlis_univid,
          dlis_pvdrslts,
          dlis_slts,
          dlis_id,
          valid_from,
          valid_to,
          dlis_audid,
          dlis_prev_audid,
          dlis_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.dlis_c4c_id,
          :new.dlis_crtd,
          :new.dlis_las_act,
          :new.dlis_las_act_actrtyp,
          :new.dlis_obj_stt,
          :new.dlis_vers,
          :new.dlis_vsbt,
          :new.dlis_dltddt,
          :new.dlis_las_act_by,
          :new.dlis_origcrtr,
          :new.dlis_origcrtrlogdin,
          :new.dlis_las_act_by_logdin,
          :new.dlis_univid,
          :new.dlis_pvdrslts,
          :new.dlis_slts,
          :new.dlis_id,
          :new.dlis_las_act_tim,
          NULL,
          u_ddl_itempvdrslts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ddl_itempvdrslts
      SET
        valid_to        = :new.dlis_las_act_tim,
        dlis_next_audid = u_ddl_itempvdrslts.CURRVAL
      WHERE
        dlis_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
65
</td>
<td>
THH_C4C
</td>
<td>
TRG_DDPS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEMPVDRSSPS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DDPS_AUDITINSERT&quot; BEFORE INSERT ON T_DDL_ITEMPVDRSSPS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ddps_crtd IS NULL THEN 
    :new.ddps_crtd := curr_date; 
  END IF; 

  IF :new.ddps_las_act_tim IS NULL THEN 
    :new.ddps_las_act_tim := curr_date; 
  END IF; 

  IF :new.ddps_las_act IS NULL THEN 
    :new.ddps_las_act := 1; 
  END IF; 

  IF :new.ddps_obj_stt IS NULL THEN 
    :new.ddps_obj_stt := 1; 
  END IF; 

  IF :new.ddps_vers IS NULL THEN 
    :new.ddps_vers := 0; 
  END IF; 

  IF :new.ddps_vsbt IS NULL THEN 
    :new.ddps_vsbt := 1001; 
  END IF; 

  IF :new.ddps_las_act_by IS NULL THEN 
    :new.ddps_las_act_by := 1; 
  END IF; 

  IF :new.ddps_origcrtr IS NULL THEN 
    :new.ddps_origcrtr := 1; 
  END IF; 

  IF :new.ddps_origcrtrlogdin IS NULL THEN 
    :new.ddps_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ddps_las_act_by_logdin IS NULL THEN 
    :new.ddps_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ddl_itempvdrssps 
  ( 
   classtype, 
   ddps_c4c_id, 
   ddps_crtd, 
   ddps_las_act, 
   ddps_las_act_actrtyp, 
   ddps_obj_stt, 
   ddps_vers, 
   ddps_vsbt, 
   ddps_dltddt, 
   ddps_las_act_by, 
   ddps_origcrtr, 
   ddps_origcrtrlogdin, 
   ddps_las_act_by_logdin, 
   ddps_univid, 
   ddps_pvdrssps, 
   ddps_sub_slts, 
   ddps_id, 
   valid_from, 
   valid_to , 
   ddps_audid, 
   ddps_prev_audid, 
   ddps_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ddps_c4c_id,
   :new.ddps_crtd,
   :new.ddps_las_act,
   :new.ddps_las_act_actrtyp,
   :new.ddps_obj_stt,
   :new.ddps_vers,
   :new.ddps_vsbt,
   :new.ddps_dltddt,
   :new.ddps_las_act_by,
   :new.ddps_origcrtr,
   :new.ddps_origcrtrlogdin,
   :new.ddps_las_act_by_logdin,
   :new.ddps_univid,
   :new.ddps_pvdrssps,
   :new.ddps_sub_slts, 
   :new.ddps_id, 
   :new.ddps_las_act_tim, 
   NULL, 
   u_ddl_itempvdrssps.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
66
</td>
<td>
THH_C4C
</td>
<td>
TRG_DDPS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DDL_ITEMPVDRSSPS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ddps_auditupdate BEFORE
  UPDATE
    ON T_DDL_ITEMPVDRSSPS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ddps_audid
      INTO
        last_audid
      FROM
        a_ddl_itempvdrssps
      WHERE
        ddps_id            = :old.ddps_id
      AND ddps_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ddps_las_act_tim = :new.ddps_las_act_tim THEN
      UPDATE
        a_ddl_itempvdrssps
      SET
        classtype              = :new.classtype,
        ddps_c4c_id            = :new.ddps_c4c_id,
        ddps_crtd              = :new.ddps_crtd,
        ddps_las_act           = :new.ddps_las_act,
        ddps_las_act_actrtyp   = :new.ddps_las_act_actrtyp,
        ddps_obj_stt           = :new.ddps_obj_stt,
        ddps_vers              = :new.ddps_vers,
        ddps_vsbt              = :new.ddps_vsbt,
        ddps_dltddt            = :new.ddps_dltddt,
        ddps_las_act_by        = :new.ddps_las_act_by,
        ddps_origcrtr          = :new.ddps_origcrtr,
        ddps_origcrtrlogdin    = :new.ddps_origcrtrlogdin,
        ddps_las_act_by_logdin = :new.ddps_las_act_by_logdin,
        ddps_univid            = :new.ddps_univid,
        ddps_pvdrssps          = :new.ddps_pvdrssps,
        ddps_sub_slts          = :new.ddps_sub_slts
      WHERE
        ddps_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ddl_itempvdrssps
        (
          classtype,
          ddps_c4c_id,
          ddps_crtd,
          ddps_las_act,
          ddps_las_act_actrtyp,
          ddps_obj_stt,
          ddps_vers,
          ddps_vsbt,
          ddps_dltddt,
          ddps_las_act_by,
          ddps_origcrtr,
          ddps_origcrtrlogdin,
          ddps_
las_act_by_logdin,
          ddps_univid,
          ddps_pvdrssps,
          ddps_sub_slts,
          ddps_id,
          valid_from,
          valid_to,
          ddps_audid,
          ddps_prev_audid,
          ddps_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ddps_c4c_id,
          :new.ddps_crtd,
          :new.ddps_las_act,
          :new.ddps_las_act_actrtyp,
          :new.ddps_obj_stt,
          :new.ddps_vers,
          :new.ddps_vsbt,
          :new.ddps_dltddt,
          :new.ddps_las_act_by,
          :new.ddps_origcrtr,
          :new.ddps_origcrtrlogdin,
          :new.ddps_las_act_by_logdin,
          :new.ddps_univid,
          :new.ddps_pvdrssps,
          :new.ddps_sub_slts,
          :new.ddps_id,
          :new.ddps_las_act_tim,
          NULL,
          u_ddl_itempvdrssps.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ddl_itempvdrssps
      SET
        valid_to        = :new.ddps_las_act_tim,
        ddps_next_audid = u_ddl_itempvdrssps.CURRVAL
      WHERE
        ddps_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
67
</td>
<td>
THH_C4C
</td>
<td>
TRG_DSS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DGIS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_DSS_AUDITINSERT
BEFORE INSERT
ON T_DGIS
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.dss_crtd IS NULL THEN
    :new.dss_crtd := curr_date;
  END IF;

  IF :new.dss_las_act_tim IS NULL THEN
    :new.dss_las_act_tim := curr_date;
  END IF;

  IF :new.dss_las_act IS NULL THEN
    :new.dss_las_act := 1;
  END IF;

  IF :new.dss_obj_stt IS NULL THEN
    :new.dss_obj_stt := 1;
  END IF;

  IF :new.dss_vers IS NULL THEN
    :new.dss_vers := 0;
  END IF;

  IF :new.dss_vsbt IS NULL THEN
    :new.dss_vsbt := 1001;
  END IF;

  IF :new.dss_las_act_by IS NULL THEN
    :new.dss_las_act_by := 1;
  END IF;

  IF :new.dss_origcrtr IS NULL THEN
    :new.dss_origcrtr := 1;
  END IF;

  IF :new.dss_origcrtrlogdin IS NULL THEN
    :new.dss_origcrtrlogdin := 1;
  END IF;

  IF :new.dss_las_act_by_logdin IS NULL THEN
    :new.dss_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_dgis
  (
   classtype,
   dss_c4c_id,
   dss_crtd,
   dss_las_act,
   dss_las_act_actrtyp,
   dss_obj_stt,
   dss_vers,
   dss_vsbt,
   dss_dltddt,
   dss_las_act_by,
   dss_origcrtr,
   dss_origcrtrlogdin,
   dss_las_act_by_logdin,
   dss_univid,
   dss_reqsflwp,
   dss_snsv,
   tmds_rulenam,
   tmds_ruledscndtld,
   tmds_code,
   tmds_id,
   cdss_nam,
   cdss_rtng,
   cdss_frstatvd,
   cdss_las_atvd,
   cdss_las_dctd,
   cdss_frstsbtdat,
   cdss_las_sbtdat,
   cdss_wkfwistcid,
   cdss_cnv_id,
   cdss_ownrchndflag,
   cdss_ownrchndcnt,
   cdss_dvtndt,
   cdss_cmmt,
   cdss_id,
   ic9d_icd9dgescode,
   ic9d_specflag,
   ic9d_shrtdscn,
   ic9d_longdscn,
   ic9d_eftvdt,
   ic9d_exp_dt,
   ic9d_id,
   cdss_las_dctdby,
   cdss_frstatvdby,
   cdss_las_atvdby,
   cdss_ratnapvl,
   cdss_las_sbtdby,
   cdss_frstsbtdby,
   cdss_apvl,
   cdss_rcpttrkg,
   cdss_rfngwkfwtsk,
   cdss_prvsrfngtsk,
   cdss_prvsrfngtsk_prmn,
   cdss_ownr,
   cdss_prvsownr,
   cdss_prvssndr,
   cdss_prvsownrprmn,
   cdss_tnfr,
   cdss_prvstnfr,
   tmds_cat,
   cdss_typ_sbty,
   cdss_crtr,
   PDSS_PRBL_DESCRIPTION,
   PDSS_PRBL_NAME
,
   PDSS_PRBL_COMMENT,
   PDSS_PRBLMFRMA,
   ic10d_icd10dgescode,
   ic10d_specflag,
   ic10d_shrtdscn,
   ic10d_longdscn,
   ic10d_eftvdt,
   ic10d_exp_dt,
   ic10d_id,
   dss_id,
   valid_from,
   valid_to ,
   dss_audid,
   dss_prev_audid,
   dss_next_audid
  )
  VALUES
  (
   :new.classtype,
   :new.dss_c4c_id,
   :new.dss_crtd,
   :new.dss_las_act,
   :new.dss_las_act_actrtyp,
   :new.dss_obj_stt,
   :new.dss_vers,
   :new.dss_vsbt,
   :new.dss_dltddt,
   :new.dss_las_act_by,
   :new.dss_origcrtr,
   :new.dss_origcrtrlogdin,
   :new.dss_las_act_by_logdin,
   :new.dss_univid,
   :new.dss_reqsflwp,
   :new.dss_snsv,
   :new.tmds_rulenam,
   :new.tmds_ruledscndtld,
   :new.tmds_code,
   :new.tmds_id,
   :new.cdss_nam,
   :new.cdss_rtng,
   :new.cdss_frstatvd,
   :new.cdss_las_atvd,
   :new.cdss_las_dctd,
   :new.cdss_frstsbtdat,
   :new.cdss_las_sbtdat,
   :new.cdss_wkfwistcid,
   :new.cdss_cnv_id,
   :new.cdss_ownrchndflag,
   :new.cdss_ownrchndcnt,
   :new.cdss_dvtndt,
   :new.cdss_cmmt,
   :new.cdss_id,
   :new.ic9d_icd9dgescode,
   :new.ic9d_specflag,
   :new.ic9d_shrtdscn,
   :new.ic9d_longdscn,
   :new.ic9d_eftvdt,
   :new.ic9d_exp_dt,
   :new.ic9d_id,
   :new.cdss_las_dctdby,
   :new.cdss_frstatvdby,
   :new.cdss_las_atvdby,
   :new.cdss_ratnapvl,
   :new.cdss_las_sbtdby,
   :new.cdss_frstsbtdby,
   :new.cdss_apvl,
   :new.cdss_rcpttrkg,
   :new.cdss_rfngwkfwtsk,
   :new.cdss_prvsrfngtsk,
   :new.cdss_prvsrfngtsk_prmn,
   :new.cdss_ownr,
   :new.cdss_prvsownr,
   :new.cdss_prvssndr,
   :new.cdss_prvsownrprmn,
   :new.cdss_tnfr,
   :new.cdss_prvstnfr,
   :new.tmds_cat,
   :new.cdss_typ_sbty,
   :new.cdss_crtr,
   :new.PDSS_PRBL_DESCRIPTION,
   :new.PDSS_PRBL_NAME,
   :new.PDSS_PRBL_COMMENT,
   :new.PDSS_PRBLMFRMA,
   :new.ic10d_icd10dgescode,
   :new.ic10d_specflag,
   :new.ic10d_shrtdscn,
   :new.ic10d_longdscn,
   :new.ic10d_eftvdt,
   :new.ic10d_exp_dt,
   :new.ic10d_id,
   :new.dss_id,
   :new.dss_las_act_tim,
   NULL,
   u_dgis.NEXTVAL,
   NULL,
   NUL
L
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
68
</td>
<td>
THH_C4C
</td>
<td>
TRG_DSS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DGIS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_DSS_AUDITUPDATE BEFORE
  UPDATE
    ON T_DGIS REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        dss_audid
      INTO
        last_audid
      FROM
        a_dgis
      WHERE
        dss_id            = :old.dss_id
      AND dss_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.dss_las_act_tim = :new.dss_las_act_tim THEN
      UPDATE
        a_dgis
      SET
        dss_c4c_id            = :new.dss_c4c_id,
        dss_crtd              = :new.dss_crtd,
        dss_las_act           = :new.dss_las_act,
        dss_las_act_actrtyp   = :new.dss_las_act_actrtyp,
        dss_obj_stt           = :new.dss_obj_stt,
        dss_vers              = :new.dss_vers,
        dss_vsbt              = :new.dss_vsbt,
        dss_dltddt            = :new.dss_dltddt,
        dss_las_act_by        = :new.dss_las_act_by,
        dss_origcrtr          = :new.dss_origcrtr,
        dss_origcrtrlogdin    = :new.dss_origcrtrlogdin,
        dss_las_act_by_logdin = :new.dss_las_act_by_logdin,
        dss_univid            = :new.dss_univid,
        dss_reqsflwp          = :new.dss_reqsflwp,
        dss_snsv              = :new.dss_snsv,
        tmds_rulenam          = :new.tmds_rulenam,
        tmds_ruledscndtld     = :new.tmds_ruledscndtld,
        tmds_code             = :new.tmds_code,
        tmds_id               = :new.tmds_id,
        cdss_nam              = :new.cdss_nam,
        cdss_rtng             = :new.cdss_rtng,
        cdss_frstatvd         = :new.cdss_frstatvd,
        cdss_las_atvd         = :new.cdss_las_atvd,
        cdss_las_dctd         = :new.cdss_las_dctd,
        cdss_frstsbtdat       = :new.cdss_frstsbtdat,
        cdss_las_sbtdat       = :new.cdss_las_sbtdat,
        cdss_wkfwistcid       = :new.cdss_wkfwistcid,
        cdss_cnv_id           = :new.cdss_cnv_id
,
        cdss_ownrchndflag     = :new.cdss_ownrchndflag,
        cdss_ownrchndcnt      = :new.cdss_ownrchndcnt,
        cdss_dvtndt           = :new.cdss_dvtndt,
        cdss_cmmt             = :new.cdss_cmmt,
        cdss_id               = :new.cdss_id,
        ic9d_icd9dgescode     = :new.ic9d_icd9dgescode,
        ic9d_specflag         = :new.ic9d_specflag,
        ic9d_shrtdscn         = :new.ic9d_shrtdscn,
        ic9d_longdscn         = :new.ic9d_longdscn,
        ic9d_eftvdt           = :new.ic9d_eftvdt,
        ic9d_exp_dt           = :new.ic9d_exp_dt,
        ic9d_id               = :new.ic9d_id,
        cdss_las_dctdby       = :new.cdss_las_dctdby,
        cdss_frstatvdby       = :new.cdss_frstatvdby,
        cdss_las_atvdby       = :new.cdss_las_atvdby,
        cdss_ratnapvl         = :new.cdss_ratnapvl,
        cdss_las_sbtdby       = :new.cdss_las_sbtdby,
        cdss_frstsbtdby       = :new.cdss_frstsbtdby,
        cdss_apvl             = :new.cdss_apvl,
        cdss_rcpttrkg         = :new.cdss_rcpttrkg,
        cdss_rfngwkfwtsk      = :new.cdss_rfngwkfwtsk,
        cdss_prvsrfngtsk      = :new.cdss_prvsrfngtsk,
        cdss_prvsrfngtsk_prmn = :new.cdss_prvsrfngtsk_prmn,
        cdss_ownr             = :new.cdss_ownr,
        cdss_prvsownr         = :new.cdss_prvsownr,
        cdss_prvssndr         = :new.cdss_prvssndr,
        cdss_prvsownrprmn     = :new.cdss_prvsownrprmn,
        cdss_tnfr             = :new.cdss_tnfr,
        cdss_prvstnfr         = :new.cdss_prvstnfr,
        tmds_cat              = :new.tmds_cat,
        cdss_typ_sbty         = :new.cdss_typ_sbty,
        cdss_crtr             = :new.cdss_crtr,
        classtype             = :new.classtype,
        PDSS_PRBL_DESCRIPTION = :new.PDSS_PRBL_DESCRIPTION,
        PDSS_PRBL_NAME        = :new.PDSS_PRBL_NAME,
        PDSS_PRBL_COMMENT     = :new.PDSS_PRBL_COMMENT,
        PDSS_PRBLMFRMA        = :new.PDSS_PRBLMFRMA,
        ic10d_icd10dgescode   = :new.ic10d_icd10dgescode,
        ic
10d_specflag        = :new.ic10d_specflag,
        ic10d_shrtdscn        = :new.ic10d_shrtdscn,
        ic10d_longdscn        = :new.ic10d_longdscn,
        ic10d_eftvdt          = :new.ic10d_eftvdt,
        ic10d_exp_dt          = :new.ic10d_exp_dt,
        ic10d_id              = :new.ic10d_id
      WHERE
        dss_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_dgis
        (
          dss_c4c_id,
          dss_crtd,
          dss_las_act,
          dss_las_act_actrtyp,
          dss_obj_stt,
          dss_vers,
          dss_vsbt,
          dss_dltddt,
          dss_las_act_by,
          dss_origcrtr,
          dss_origcrtrlogdin,
          dss_las_act_by_logdin,
          dss_univid,
          dss_reqsflwp,
          dss_snsv,
          tmds_rulenam,
          tmds_ruledscndtld,
          tmds_code,
          tmds_id,
          cdss_nam,
          cdss_rtng,
          cdss_frstatvd,
          cdss_las_atvd,
          cdss_las_dctd,
          cdss_frstsbtdat,
          cdss_las_sbtdat,
          cdss_wkfwistcid,
          cdss_cnv_id,
          cdss_ownrchndflag,
          cdss_ownrchndcnt,
          cdss_dvtndt,
          cdss_cmmt,
          cdss_id,
          ic9d_icd9dgescode,
          ic9d_specflag,
          ic9d_shrtdscn,
          ic9d_longdscn,
          ic9d_eftvdt,
          ic9d_exp_dt,
          ic9d_id,
          cdss_las_dctdby,
          cdss_frstatvdby,
          cdss_las_atvdby,
          cdss_ratnapvl,
          cdss_las_sbtdby,
          cdss_frstsbtdby,
          cdss_apvl,
          cdss_rcpttrkg,
          cdss_rfngwkfwtsk,
          cdss_prvsrfngtsk,
          cdss_prvsrfngtsk_prmn,
          cdss_ownr,
          cdss_prvsownr,
          cdss_prvssndr,
          cdss_prvsownrprmn,
          cdss_tnfr,
          cdss_prvstnfr,
          tmds_cat,
          cdss_typ_sbty,
          cdss_crtr,

    classtype,
          PDSS_PRBL_DESCRIPTION,
          PDSS_PRBL_NAME,
          PDSS_PRBL_COMMENT,
          PDSS_PRBLMFRMA ,
          ic10d_icd10dgescode,
          ic10d_specflag,
          ic10d_shrtdscn,
          ic10d_longdscn,
          ic10d_eftvdt,
          ic10d_exp_dt,
          ic10d_id,
          dss_id,
          valid_from,
          valid_to,
          dss_audid,
          dss_prev_audid,
          dss_next_audid
        )
        VALUES
        (
          :new.dss_c4c_id,
          :new.dss_crtd,
          :new.dss_las_act,
          :new.dss_las_act_actrtyp,
          :new.dss_obj_stt,
          :new.dss_vers,
          :new.dss_vsbt,
          :new.dss_dltddt,
          :new.dss_las_act_by,
          :new.dss_origcrtr,
          :new.dss_origcrtrlogdin,
          :new.dss_las_act_by_logdin,
          :new.dss_univid,
          :new.dss_reqsflwp,
          :new.dss_snsv,
          :new.tmds_rulenam,
          :new.tmds_ruledscndtld,
          :new.tmds_code,
          :new.tmds_id,
          :new.cdss_nam,
          :new.cdss_rtng,
          :new.cdss_frstatvd,
          :new.cdss_las_atvd,
          :new.cdss_las_dctd,
          :new.cdss_frstsbtdat,
          :new.cdss_las_sbtdat,
          :new.cdss_wkfwistcid,
          :new.cdss_cnv_id,
          :new.cdss_ownrchndflag,
          :new.cdss_ownrchndcnt,
          :new.cdss_dvtndt,
          :new.cdss_cmmt,
          :new.cdss_id,
          :new.ic9d_icd9dgescode,
          :new.ic9d_specflag,
          :new.ic9d_shrtdscn,
          :new.ic9d_longdscn,
          :new.ic9d_eftvdt,
          :new.ic9d_exp_dt,
          :new.ic9d_id,
          :new.cdss_las_dctdby,
          :new.cdss_frstatvdby,
          :new.cdss_las_atvdby,
          :new.cdss_ratnapvl,
          :new.cdss_las_sbtdby,
          :new.cdss_frstsbtdby,
          :new.cdss_apvl,
          :new.cdss_rcpttrkg,
          :new.cdss_rfngwkfwtsk,
          :new.cdss_prvsrfngtsk,
          :new.cdss_prvsrfngtsk_prmn,
          :new
.cdss_ownr,
          :new.cdss_prvsownr,
          :new.cdss_prvssndr,
          :new.cdss_prvsownrprmn,
          :new.cdss_tnfr,
          :new.cdss_prvstnfr,
          :new.tmds_cat,
          :new.cdss_typ_sbty,
          :new.cdss_crtr,
          :new.classtype,
          :new.PDSS_PRBL_DESCRIPTION,
          :new.PDSS_PRBL_NAME,
          :new.PDSS_PRBL_COMMENT,
          :new.PDSS_PRBLMFRMA,
          :new.ic10d_icd10dgescode,
          :new.ic10d_specflag,
          :new.ic10d_shrtdscn,
          :new.ic10d_longdscn,
          :new.ic10d_eftvdt,
          :new.ic10d_exp_dt,
          :new.ic10d_id,
          :new.dss_id,
          :new.dss_las_act_tim,
          NULL,
          u_dgis.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_dgis
      SET
        valid_to       = :new.dss_las_act_tim,
        dss_next_audid = u_dgis.CURRVAL
      WHERE
        dss_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
69
</td>
<td>
THH_C4C
</td>
<td>
TRG_DEGS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DGRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_DEGS_AUDITINSERT&quot; BEFORE INSERT ON T_DGRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.degs_crtd IS NULL THEN 
    :new.degs_crtd := curr_date; 
  END IF; 

  IF :new.degs_las_act_tim IS NULL THEN 
    :new.degs_las_act_tim := curr_date; 
  END IF; 

  IF :new.degs_las_act IS NULL THEN 
    :new.degs_las_act := 1; 
  END IF; 

  IF :new.degs_obj_stt IS NULL THEN 
    :new.degs_obj_stt := 1; 
  END IF; 

  IF :new.degs_vers IS NULL THEN 
    :new.degs_vers := 0; 
  END IF; 

  IF :new.degs_vsbt IS NULL THEN 
    :new.degs_vsbt := 1001; 
  END IF; 

  IF :new.degs_las_act_by IS NULL THEN 
    :new.degs_las_act_by := 1; 
  END IF; 

  IF :new.degs_origcrtr IS NULL THEN 
    :new.degs_origcrtr := 1; 
  END IF; 

  IF :new.degs_origcrtrlogdin IS NULL THEN 
    :new.degs_origcrtrlogdin := 1; 
  END IF; 

  IF :new.degs_las_act_by_logdin IS NULL THEN 
    :new.degs_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_dgrs 
  ( 
   classtype, 
   degs_c4c_id, 
   degs_crtd, 
   degs_las_act, 
   degs_las_act_actrtyp, 
   degs_obj_stt, 
   degs_vers, 
   degs_vsbt, 
   degs_dltddt, 
   degs_las_act_by, 
   degs_origcrtr, 
   degs_origcrtrlogdin, 
   degs_las_act_by_logdin, 
   degs_univid, 
   degs_dgre, 
   degs_mjr1, 
   degs_mjr2, 
   degs_payr, 
   degs_pvdr, 
   degs_id, 
   valid_from, 
   valid_to , 
   degs_audid, 
   degs_prev_audid, 
   degs_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.degs_c4c_id,
   :new.degs_crtd,
   :new.degs_las_act,
   :new.degs_las_act_actrtyp,
   :new.degs_obj_stt,
   :new.degs_vers,
   :new.degs_vsbt,
   :new.degs_dltddt,
   :new.degs_las_act_by,
   :new.degs_origcrtr,
   :new.degs_origcrtrlogdin,
   :new.degs_las_act_by_logdin,
   :new.degs_univid,
   :new.degs_dgre,
   :new.degs_mjr1,
   :new.degs_mjr2,
   :new.degs_payr,
   :new.degs_pvdr, 
   :new.degs_id, 
   :new.degs_las_act_tim, 
   NULL, 
   u_dgrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
70
</td>
<td>
THH_C4C
</td>
<td>
TRG_DEGS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DGRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_degs_auditupdate BEFORE
  UPDATE
    ON T_DGRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        degs_audid
      INTO
        last_audid
      FROM
        a_dgrs
      WHERE
        degs_id            = :old.degs_id
      AND degs_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.degs_las_act_tim = :new.degs_las_act_tim THEN
      UPDATE
        a_dgrs
      SET
        classtype              = :new.classtype,
        degs_c4c_id            = :new.degs_c4c_id,
        degs_crtd              = :new.degs_crtd,
        degs_las_act           = :new.degs_las_act,
        degs_las_act_actrtyp   = :new.degs_las_act_actrtyp,
        degs_obj_stt           = :new.degs_obj_stt,
        degs_vers              = :new.degs_vers,
        degs_vsbt              = :new.degs_vsbt,
        degs_dltddt            = :new.degs_dltddt,
        degs_las_act_by        = :new.degs_las_act_by,
        degs_origcrtr          = :new.degs_origcrtr,
        degs_origcrtrlogdin    = :new.degs_origcrtrlogdin,
        degs_las_act_by_logdin = :new.degs_las_act_by_logdin,
        degs_univid            = :new.degs_univid,
        degs_dgre              = :new.degs_dgre,
        degs_mjr1              = :new.degs_mjr1,
        degs_mjr2              = :new.degs_mjr2,
        degs_payr              = :new.degs_payr,
        degs_pvdr              = :new.degs_pvdr
      WHERE
        degs_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_dgrs
        (
          classtype,
          degs_c4c_id,
          degs_crtd,
          degs_las_act,
          degs_las_act_actrtyp,
          degs_obj_stt,
          degs_vers,
          degs_vsbt,
          degs_dlt
ddt,
          degs_las_act_by,
          degs_origcrtr,
          degs_origcrtrlogdin,
          degs_las_act_by_logdin,
          degs_univid,
          degs_dgre,
          degs_mjr1,
          degs_mjr2,
          degs_payr,
          degs_pvdr,
          degs_id,
          valid_from,
          valid_to,
          degs_audid,
          degs_prev_audid,
          degs_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.degs_c4c_id,
          :new.degs_crtd,
          :new.degs_las_act,
          :new.degs_las_act_actrtyp,
          :new.degs_obj_stt,
          :new.degs_vers,
          :new.degs_vsbt,
          :new.degs_dltddt,
          :new.degs_las_act_by,
          :new.degs_origcrtr,
          :new.degs_origcrtrlogdin,
          :new.degs_las_act_by_logdin,
          :new.degs_univid,
          :new.degs_dgre,
          :new.degs_mjr1,
          :new.degs_mjr2,
          :new.degs_payr,
          :new.degs_pvdr,
          :new.degs_id,
          :new.degs_las_act_tim,
          NULL,
          u_dgrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_dgrs
      SET
        valid_to        = :new.degs_las_act_tim,
        degs_next_audid = u_dgrs.CURRVAL
      WHERE
        degs_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
71
</td>
<td>
THH_C4C
</td>
<td>
TRG_DRUGCLM_INSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DRUGCLM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_DRUGCLM_INSERT before insert on T_DRUGCLM for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date DATE;
begin
  curr_date := current_date;

  if :new.DCLM_CRTD is null then
    :new.DCLM_CRTD := curr_date;
  end if;

  if :new.DCLM_LAS_ACT_TIM is null then
    :new.DCLM_LAS_ACT_TIM := curr_date;
  end if;

  if :new.DCLM_LAS_ACT_BY is null then
    :new.DCLM_LAS_ACT_BY := 1;
  end if;

  if :new.DCLM_OBJ_STT is null then
    :new.DCLM_OBJ_STT := 1;
  end if;

  if :new.DCLM_VERS is null then
    :new.DCLM_VERS := 0;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
72
</td>
<td>
THH_C4C
</td>
<td>
TRG_DRUGCLM_UPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_DRUGCLM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_DRUGCLM_UPDATE before update on T_DRUGCLM for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date DATE;
begin
  curr_date := current_date;

  if :new.DCLM_LAS_ACT_TIM is null then
    :new.DCLM_LAS_ACT_TIM := curr_date;
  end if;

  if :new.DCLM_LAS_ACT_BY is null then
    :new.DCLM_LAS_ACT_BY := 1;
  end if;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
73
</td>
<td>
THH_C4C
</td>
<td>
TRG_ECNT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_EDNLCNTT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_ECNT_AUDITINSERT&quot; BEFORE INSERT ON T_EDNLCNTT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ecnt_crtd IS NULL THEN 
    :new.ecnt_crtd := curr_date; 
  END IF; 

  IF :new.ecnt_las_act_tim IS NULL THEN 
    :new.ecnt_las_act_tim := curr_date; 
  END IF; 

  IF :new.ecnt_las_act IS NULL THEN 
    :new.ecnt_las_act := 1; 
  END IF; 

  IF :new.ecnt_obj_stt IS NULL THEN 
    :new.ecnt_obj_stt := 1; 
  END IF; 

  IF :new.ecnt_vers IS NULL THEN 
    :new.ecnt_vers := 0; 
  END IF; 

  IF :new.ecnt_vsbt IS NULL THEN 
    :new.ecnt_vsbt := 1001; 
  END IF; 

  IF :new.ecnt_las_act_by IS NULL THEN 
    :new.ecnt_las_act_by := 1; 
  END IF; 

  IF :new.ecnt_origcrtr IS NULL THEN 
    :new.ecnt_origcrtr := 1; 
  END IF; 

  IF :new.ecnt_origcrtrlogdin IS NULL THEN 
    :new.ecnt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ecnt_las_act_by_logdin IS NULL THEN 
    :new.ecnt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ednlcntt 
  ( 
   classtype, 
   ecnt_c4c_id, 
   ecnt_crtd, 
   ecnt_las_act, 
   ecnt_las_act_actrtyp, 
   ecnt_obj_stt, 
   ecnt_vers, 
   ecnt_vsbt, 
   ecnt_dltddt, 
   ecnt_las_act_by, 
   ecnt_origcrtr, 
   ecnt_origcrtrlogdin, 
   ecnt_las_act_by_logdin, 
   ecnt_univid, 
   ecnt_nam, 
   ecnt_src_dir, 
   ecnt_fil_nam, 
   ecnt_rel_path, 
   ecnt_kwds, 
   ecnt_has_imgs, 
   ecnt_has_anms, 
   ecnt_src, 
   ecnt_pubndt, 
   ecnt_fil_typ, 
   ecnt_fil_siz, 
   ecnt_frstsbtdat, 
   ecnt_las_sbtdat, 
   ecnt_frstatvd, 
   ecnt_las_atvd, 
   ecnt_las_dctd, 
   ecnt_wkfwistcid, 
   ecnt_cnv_id, 
   ecnt_ownrchndflag, 
   ecnt_ownrchndcnt, 
   ecnt_dvtndt, 
   ecnt_cmmt, 
   ecnt_apvl, 
   ecnt_rcpttrkg, 
   ecnt_las_sbtdby, 
   ecnt_frstsbtdby, 
   ecnt_las_dctdby, 
   ecnt_frstatvdby, 
   ecnt_las_atvdby, 
   ecnt_ratnapvl, 
   ecnt_rfngwkfwtsk, 
   ecnt_prvsrfngtsk, 
   ecnt_prvsrfngtsk_prmn, 
   ecnt_ownr, 
   ecnt_prvsownr, 
   ecnt_prvssndr, 
   ecnt_prvsownrprmn, 
   ecnt_tnfr, 
   ecnt_prvstnfr, 
   ecnt_typ, 
   ecnt_upldtckt, 
   ecnt_
cntt, 
   ecnt_id, 
   valid_from, 
   valid_to , 
   ecnt_audid, 
   ecnt_prev_audid, 
   ecnt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ecnt_c4c_id,
   :new.ecnt_crtd,
   :new.ecnt_las_act,
   :new.ecnt_las_act_actrtyp,
   :new.ecnt_obj_stt,
   :new.ecnt_vers,
   :new.ecnt_vsbt,
   :new.ecnt_dltddt,
   :new.ecnt_las_act_by,
   :new.ecnt_origcrtr,
   :new.ecnt_origcrtrlogdin,
   :new.ecnt_las_act_by_logdin,
   :new.ecnt_univid,
   :new.ecnt_nam,
   :new.ecnt_src_dir,
   :new.ecnt_fil_nam,
   :new.ecnt_rel_path,
   :new.ecnt_kwds,
   :new.ecnt_has_imgs,
   :new.ecnt_has_anms,
   :new.ecnt_src,
   :new.ecnt_pubndt,
   :new.ecnt_fil_typ,
   :new.ecnt_fil_siz,
   :new.ecnt_frstsbtdat,
   :new.ecnt_las_sbtdat,
   :new.ecnt_frstatvd,
   :new.ecnt_las_atvd,
   :new.ecnt_las_dctd,
   :new.ecnt_wkfwistcid,
   :new.ecnt_cnv_id,
   :new.ecnt_ownrchndflag,
   :new.ecnt_ownrchndcnt,
   :new.ecnt_dvtndt,
   :new.ecnt_cmmt,
   :new.ecnt_apvl,
   :new.ecnt_rcpttrkg,
   :new.ecnt_las_sbtdby,
   :new.ecnt_frstsbtdby,
   :new.ecnt_las_dctdby,
   :new.ecnt_frstatvdby,
   :new.ecnt_las_atvdby,
   :new.ecnt_ratnapvl,
   :new.ecnt_rfngwkfwtsk,
   :new.ecnt_prvsrfngtsk,
   :new.ecnt_prvsrfngtsk_prmn,
   :new.ecnt_ownr,
   :new.ecnt_prvsownr,
   :new.ecnt_prvssndr,
   :new.ecnt_prvsownrprmn,
   :new.ecnt_tnfr,
   :new.ecnt_prvstnfr,
   :new.ecnt_typ,
   :new.ecnt_upldtckt,
   :new.ecnt_cntt, 
   :new.ecnt_id, 
   :new.ecnt_las_act_tim, 
   NULL, 
   u_ednlcntt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
74
</td>
<td>
THH_C4C
</td>
<td>
TRG_ECNT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_EDNLCNTT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ecnt_auditupdate BEFORE
  UPDATE
    ON T_EDNLCNTT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ecnt_audid
      INTO
        last_audid
      FROM
        a_ednlcntt
      WHERE
        ecnt_id            = :old.ecnt_id
      AND ecnt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ecnt_las_act_tim = :new.ecnt_las_act_tim THEN
      UPDATE
        a_ednlcntt
      SET
        ecnt_las_dctdby        = :new.ecnt_las_dctdby,
        ecnt_frstatvdby        = :new.ecnt_frstatvdby,
        ecnt_las_atvdby        = :new.ecnt_las_atvdby,
        ecnt_ratnapvl          = :new.ecnt_ratnapvl,
        ecnt_rfngwkfwtsk       = :new.ecnt_rfngwkfwtsk,
        ecnt_prvsrfngtsk       = :new.ecnt_prvsrfngtsk,
        ecnt_prvsrfngtsk_prmn  = :new.ecnt_prvsrfngtsk_prmn,
        ecnt_ownr              = :new.ecnt_ownr,
        ecnt_prvsownr          = :new.ecnt_prvsownr,
        ecnt_prvssndr          = :new.ecnt_prvssndr,
        ecnt_prvsownrprmn      = :new.ecnt_prvsownrprmn,
        ecnt_tnfr              = :new.ecnt_tnfr,
        ecnt_prvstnfr          = :new.ecnt_prvstnfr,
        ecnt_typ               = :new.ecnt_typ,
        ecnt_upldtckt          = :new.ecnt_upldtckt,
        ecnt_cntt              = :new.ecnt_cntt,
        classtype              = :new.classtype,
        ecnt_c4c_id            = :new.ecnt_c4c_id,
        ecnt_crtd              = :new.ecnt_crtd,
        ecnt_las_act           = :new.ecnt_las_act,
        ecnt_las_act_actrtyp   = :new.ecnt_las_act_actrtyp,
        ecnt_obj_stt           = :new.ecnt_obj_stt,
        ecnt_vers              = :new.ecnt_vers,
        ecnt_vsbt              = :new.ecnt_vsbt,
        ecnt_dltddt            = :new.ecnt_dltddt,
        ecnt_las_act_by        = :new.ecnt_las_act_by,
        ecnt_origcrtr          = :new.ec
nt_origcrtr,
        ecnt_origcrtrlogdin    = :new.ecnt_origcrtrlogdin,
        ecnt_las_act_by_logdin = :new.ecnt_las_act_by_logdin,
        ecnt_univid            = :new.ecnt_univid,
        ecnt_nam               = :new.ecnt_nam,
        ecnt_src_dir           = :new.ecnt_src_dir,
        ecnt_fil_nam           = :new.ecnt_fil_nam,
        ecnt_rel_path          = :new.ecnt_rel_path,
        ecnt_kwds              = :new.ecnt_kwds,
        ecnt_has_imgs          = :new.ecnt_has_imgs,
        ecnt_has_anms          = :new.ecnt_has_anms,
        ecnt_src               = :new.ecnt_src,
        ecnt_pubndt            = :new.ecnt_pubndt,
        ecnt_fil_typ           = :new.ecnt_fil_typ,
        ecnt_fil_siz           = :new.ecnt_fil_siz,
        ecnt_frstsbtdat        = :new.ecnt_frstsbtdat,
        ecnt_las_sbtdat        = :new.ecnt_las_sbtdat,
        ecnt_frstatvd          = :new.ecnt_frstatvd,
        ecnt_las_atvd          = :new.ecnt_las_atvd,
        ecnt_las_dctd          = :new.ecnt_las_dctd,
        ecnt_wkfwistcid        = :new.ecnt_wkfwistcid,
        ecnt_cnv_id            = :new.ecnt_cnv_id,
        ecnt_ownrchndflag      = :new.ecnt_ownrchndflag,
        ecnt_ownrchndcnt       = :new.ecnt_ownrchndcnt,
        ecnt_dvtndt            = :new.ecnt_dvtndt,
        ecnt_cmmt              = :new.ecnt_cmmt,
        ecnt_apvl              = :new.ecnt_apvl,
        ecnt_rcpttrkg          = :new.ecnt_rcpttrkg,
        ecnt_las_sbtdby        = :new.ecnt_las_sbtdby,
        ecnt_frstsbtdby        = :new.ecnt_frstsbtdby
      WHERE
        ecnt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ednlcntt
        (
          ecnt_las_dctdby,
          ecnt_frstatvdby,
          ecnt_las_atvdby,
          ecnt_ratnapvl,
          ecnt_rfngwkfwtsk,
          ecnt_prvsrfngtsk,
          ecnt_prvsrfngtsk_prmn,
          ecnt_ownr,

      ecnt_prvsownr,
          ecnt_prvssndr,
          ecnt_prvsownrprmn,
          ecnt_tnfr,
          ecnt_prvstnfr,
          ecnt_typ,
          ecnt_upldtckt,
          ecnt_cntt,
          classtype,
          ecnt_c4c_id,
          ecnt_crtd,
          ecnt_las_act,
          ecnt_las_act_actrtyp,
          ecnt_obj_stt,
          ecnt_vers,
          ecnt_vsbt,
          ecnt_dltddt,
          ecnt_las_act_by,
          ecnt_origcrtr,
          ecnt_origcrtrlogdin,
          ecnt_las_act_by_logdin,
          ecnt_univid,
          ecnt_nam,
          ecnt_src_dir,
          ecnt_fil_nam,
          ecnt_rel_path,
          ecnt_kwds,
          ecnt_has_imgs,
          ecnt_has_anms,
          ecnt_src,
          ecnt_pubndt,
          ecnt_fil_typ,
          ecnt_fil_siz,
          ecnt_frstsbtdat,
          ecnt_las_sbtdat,
          ecnt_frstatvd,
          ecnt_las_atvd,
          ecnt_las_dctd,
          ecnt_wkfwistcid,
          ecnt_cnv_id,
          ecnt_ownrchndflag,
          ecnt_ownrchndcnt,
          ecnt_dvtndt,
          ecnt_cmmt,
          ecnt_apvl,
          ecnt_rcpttrkg,
          ecnt_las_sbtdby,
          ecnt_frstsbtdby,
          ecnt_id,
          valid_from,
          valid_to,
          ecnt_audid,
          ecnt_prev_audid,
          ecnt_next_audid
        )
        VALUES
        (
          :new.ecnt_las_dctdby,
          :new.ecnt_frstatvdby,
          :new.ecnt_las_atvdby,
          :new.ecnt_ratnapvl,
          :new.ecnt_rfngwkfwtsk,
          :new.ecnt_prvsrfngtsk,
          :new.ecnt_prvsrfngtsk_prmn,
          :new.ecnt_ownr,
          :new.ecnt_prvsownr,
          :new.ecnt_prvssndr,
          :new.ecnt_prvsownrprmn,
          :new.ecnt_tnfr,
          :new.ecnt_prvstnfr,
          :new.ecnt_typ,
          :new.ecnt_upldtckt,
          :new.ecnt_cntt,
          :new.classtype,
          :new.ecnt_c4c_id,
          :new.ecnt_crtd,
          :new.ecnt_las_act,
          :new.ecnt_las_act_actrtyp,
          :new.ecnt_obj_
stt,
          :new.ecnt_vers,
          :new.ecnt_vsbt,
          :new.ecnt_dltddt,
          :new.ecnt_las_act_by,
          :new.ecnt_origcrtr,
          :new.ecnt_origcrtrlogdin,
          :new.ecnt_las_act_by_logdin,
          :new.ecnt_univid,
          :new.ecnt_nam,
          :new.ecnt_src_dir,
          :new.ecnt_fil_nam,
          :new.ecnt_rel_path,
          :new.ecnt_kwds,
          :new.ecnt_has_imgs,
          :new.ecnt_has_anms,
          :new.ecnt_src,
          :new.ecnt_pubndt,
          :new.ecnt_fil_typ,
          :new.ecnt_fil_siz,
          :new.ecnt_frstsbtdat,
          :new.ecnt_las_sbtdat,
          :new.ecnt_frstatvd,
          :new.ecnt_las_atvd,
          :new.ecnt_las_dctd,
          :new.ecnt_wkfwistcid,
          :new.ecnt_cnv_id,
          :new.ecnt_ownrchndflag,
          :new.ecnt_ownrchndcnt,
          :new.ecnt_dvtndt,
          :new.ecnt_cmmt,
          :new.ecnt_apvl,
          :new.ecnt_rcpttrkg,
          :new.ecnt_las_sbtdby,
          :new.ecnt_frstsbtdby,
          :new.ecnt_id,
          :new.ecnt_las_act_tim,
          NULL,
          u_ednlcntt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ednlcntt
      SET
        valid_to        = :new.ecnt_las_act_tim,
        ecnt_next_audid = u_ednlcntt.CURRVAL
      WHERE
        ecnt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
75
</td>
<td>
THH_C4C
</td>
<td>
TRG_ELNS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ENNS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_elns_auditinsert BEFORE
INSERT ON T_ENNS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.elns_crtd IS NULL THEN
    :new.elns_crtd := curr_date;
  END IF;

  IF :new.elns_las_act_tim IS NULL THEN
    :new.elns_las_act_tim := curr_date;
  END IF;

  IF :new.elns_las_act IS NULL THEN
    :new.elns_las_act := 1;
  END IF;

  IF :new.elns_obj_stt IS NULL THEN
    :new.elns_obj_stt := 1;
  END IF;

  IF :new.elns_vers IS NULL THEN
    :new.elns_vers := 0;
  END IF;

  IF :new.elns_vsbt IS NULL THEN
    :new.elns_vsbt := 1001;
  END IF;

  IF :new.elns_las_act_by IS NULL THEN
    :new.elns_las_act_by := 1;
  END IF;

  IF :new.elns_origcrtr IS NULL THEN
    :new.elns_origcrtr := 1;
  END IF;

  IF :new.elns_origcrtrlogdin IS NULL THEN
    :new.elns_origcrtrlogdin := 1;
  END IF;

  IF :new.elns_las_act_by_logdin IS NULL THEN
    :new.elns_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_enns
  (
   classtype,
   elns_c4c_id,
   elns_crtd,
   elns_las_act,
   elns_las_act_actrtyp,
   elns_obj_stt,
   elns_vers,
   elns_vsbt,
   elns_dltddt,
   elns_las_act_by,
   elns_origcrtr,
   elns_origcrtrlogdin,
   elns_las_act_by_logdin,
   elns_univid,
   elns_enltdt,
   elns_eftvdt,
   elns_origeftvdt,
   elns_dsntdt,
   elns_termdt,
   elns_ctlyenld,
   elns_cnrtnmbr,
   elns_resn,
   elns_lgcymembenltid,
   elns_benspkg,
   elns_memb,
   elns_inscprsrgrp,
   elns_pvdr,
   elns_id,
   elns_medicaid_prod_id,
   valid_from,
   valid_to ,
   elns_audid,
   elns_prev_audid,
   elns_next_audid
  )
  VALUES
  (
   :new.classtype,
   :new.elns_c4c_id,
   :new.elns_crtd,
   :new.elns_las_act,
   :new.elns_las_act_actrtyp,
   :new.elns_obj_stt,
   :new.elns_vers,
   :new.elns_vsbt,
   :new.elns_dltddt,
   :new.elns_las_act_by,
   :new.elns_origcrtr,
   :new.elns_origcrtrlogdin,
   :new.elns_las_act_by_logdin,
   :new.elns_univid,
   :new.elns_enltdt,
   :new.elns_eftvdt,
   :new.elns_origeftvdt,
   :new.elns_dsntdt,
   :new.elns_termdt,
   :new.elns_ctlyenld,
   :new.elns_cnrtn
mbr,
   :new.elns_resn,
   :new.elns_lgcymembenltid,
   :new.elns_benspkg,
   :new.elns_memb,
   :new.elns_inscprsrgrp,
   :new.elns_pvdr,
   :new.elns_id,
   :new.elns_medicaid_prod_id,
   :new.elns_las_act_tim,
   NULL,
   u_enns.NEXTVAL,
   NULL,
   NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
76
</td>
<td>
THH_C4C
</td>
<td>
TRG_ELNS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ENNS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_elns_auditupdate BEFORE
  UPDATE
    ON T_ENNS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        elns_audid
      INTO
        last_audid
      FROM
        a_enns
      WHERE
        elns_id            = :old.elns_id
      AND elns_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.elns_las_act_tim = :new.elns_las_act_tim THEN
      UPDATE
        a_enns
      SET
        elns_cnrtnmbr          = :new.elns_cnrtnmbr,
        elns_resn              = :new.elns_resn,
        elns_lgcymembenltid    = :new.elns_lgcymembenltid,
        elns_benspkg           = :new.elns_benspkg,
        elns_memb              = :new.elns_memb,
        elns_inscprsrgrp       = :new.elns_inscprsrgrp,
        elns_pvdr              = :new.elns_pvdr,
        classtype              = :new.classtype,
        elns_c4c_id            = :new.elns_c4c_id,
        elns_crtd              = :new.elns_crtd,
        elns_las_act           = :new.elns_las_act,
        elns_las_act_actrtyp   = :new.elns_las_act_actrtyp,
        elns_obj_stt           = :new.elns_obj_stt,
        elns_vers              = :new.elns_vers,
        elns_vsbt              = :new.elns_vsbt,
        elns_dltddt            = :new.elns_dltddt,
        elns_las_act_by        = :new.elns_las_act_by,
        elns_origcrtr          = :new.elns_origcrtr,
        elns_origcrtrlogdin    = :new.elns_origcrtrlogdin,
        elns_las_act_by_logdin = :new.elns_las_act_by_logdin,
        elns_univid            = :new.elns_univid,
        elns_enltdt            = :new.elns_enltdt,
        elns_eftvdt            = :new.elns_eftvdt,
        elns_origeftvdt        = :new.elns_origeftvdt,
        elns_dsntdt            = :new.elns_dsntdt,
        elns_termdt            = :new.elns_termdt,
        elns_ctlyenld          = :new.elns_ctlyenld,

        elns_medicaid_prod_id  = :new.elns_medicaid_prod_id
      WHERE
        elns_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      IF pkg_audit_util.compare_values(:old.CLASSTYPE,:new.CLASSTYPE) OR pkg_audit_util.compare_values(:old.ELNS_C4C_ID,:new.ELNS_C4C_ID) OR
        pkg_audit_util.compare_values(:old.ELNS_CRTD, :new.ELNS_CRTD) OR
        --       pkg_audit_util.compare_values(:old.ELNS_LAS_ACT,:new.ELNS_LAS_ACT) OR
        pkg_audit_util.compare_values(:old.ELNS_LAS_ACT_ACTRTYP,:new.ELNS_LAS_ACT_ACTRTYP) OR pkg_audit_util.compare_values(:old.ELNS_LAS_ACT_TIM,
        :new.ELNS_LAS_ACT_TIM) OR pkg_audit_util.compare_values(:old.ELNS_OBJ_STT,:new.ELNS_OBJ_STT) OR
        --       pkg_audit_util.compare_values(:old.ELNS_VERS,:new.ELNS_VERS) OR
        pkg_audit_util.compare_values(:old.ELNS_VSBT,:new.ELNS_VSBT) OR pkg_audit_util.compare_values(:old.ELNS_DLTDDT,:new.ELNS_DLTDDT) OR
        pkg_audit_util.compare_values(:old.ELNS_LAS_ACT_BY, :new.ELNS_LAS_ACT_BY) OR pkg_audit_util.compare_values(:old.ELNS_ORIGCRTR,:new.ELNS_ORIGCRTR) OR
        pkg_audit_util.compare_values(:old.ELNS_ORIGCRTRLOGDIN,:new.ELNS_ORIGCRTRLOGDIN) OR pkg_audit_util.compare_values(:old.ELNS_LAS_ACT_BY_LOGDIN,
        :new.ELNS_LAS_ACT_BY_LOGDIN) OR pkg_audit_util.compare_values(:old.ELNS_UNIVID,:new.ELNS_UNIVID) OR pkg_audit_util.compare_values( :old.ELNS_ENLTDT,
        :new.ELNS_ENLTDT) OR pkg_audit_util.compare_values(:old.ELNS_EFTVDT,:new.ELNS_EFTVDT) OR pkg_audit_util.compare_values(:old.ELNS_ORIGEFTVDT,
        :new.ELNS_ORIGEFTVDT) OR pkg_audit_util.compare_values(:old.ELNS_DSNTDT,:new.ELNS_DSNTDT) OR pkg_audit_util.compare_values(:old.ELNS_TERMDT,
        :new.ELNS_TERMDT) OR pkg_audit_util.compare_values(:old.ELNS_CTLYENLD, :new.ELNS_CTLYENLD) OR pkg_audit_util.compare_values(:old.ELNS_CNRTNMBR,
        :new.ELNS_CNRTNMBR) OR pkg_audit_util.compare_values(:old.ELNS_RESN,:new.ELNS_RESN) OR pkg_audit_util.compare_values( :old.
ELNS_LGCYMEMBENLTID,
        :new.ELNS_LGCYMEMBENLTID) OR pkg_audit_util.compare_values(:old.ELNS_ID,:new.ELNS_ID) OR pkg_audit_util.compare_values(:old.ELNS_BENSPKG,
        :new.ELNS_BENSPKG) OR pkg_audit_util.compare_values(:old.ELNS_MEMB,:new.ELNS_MEMB) OR pkg_audit_util.compare_values(:old.ELNS_INSCPRSRGRP,
        :new.ELNS_INSCPRSRGRP) OR pkg_audit_util.compare_values(:old.ELNS_PVDR, :new.ELNS_PVDR) THEN
        /* insert new values introduced by new transaction */
        INSERT
        INTO
          a_enns
          (
            elns_cnrtnmbr,
            elns_resn,
            elns_lgcymembenltid,
            elns_benspkg,
            elns_memb,
            elns_inscprsrgrp,
            elns_pvdr,
            classtype,
            elns_c4c_id,
            elns_crtd,
            elns_las_act,
            elns_las_act_actrtyp,
            elns_obj_stt,
            elns_vers,
            elns_vsbt,
            elns_dltddt,
            elns_las_act_by,
            elns_origcrtr,
            elns_origcrtrlogdin,
            elns_las_act_by_logdin,
            elns_univid,
            elns_enltdt,
            elns_eftvdt,
            elns_origeftvdt,
            elns_dsntdt,
            elns_termdt,
            elns_ctlyenld,
            elns_medicaid_prod_id,
            elns_id,
            valid_from,
            valid_to,
            elns_audid,
            elns_prev_audid,
            elns_next_audid
          )
          VALUES
          (
            :new.elns_cnrtnmbr,
            :new.elns_resn,
            :new.elns_lgcymembenltid,
            :new.elns_benspkg,
            :new.elns_memb,
            :new.elns_inscprsrgrp,
            :new.elns_pvdr,
            :new.classtype,
            :new.elns_c4c_id,
            :new.elns_crtd,
            :new.elns_las_act,
            :new.elns_las_act_actrtyp,
            :new.elns_obj_stt,
            :new.elns_vers,
            :new.elns_vsbt,
            :new.elns_dltddt,
            :new.elns_las_act_
by,
            :new.elns_origcrtr,
            :new.elns_origcrtrlogdin,
            :new.elns_las_act_by_logdin,
            :new.elns_univid,
            :new.elns_enltdt,
            :new.elns_eftvdt,
            :new.elns_origeftvdt,
            :new.elns_dsntdt,
            :new.elns_termdt,
            :new.elns_ctlyenld,
            :new.elns_medicaid_prod_id,
            :new.elns_id,
            :new.elns_las_act_tim,
            NULL,
            u_enns.NEXTVAL,
            last_audid,
            NULL
          );
        /* update last audit record's valid_to to new LastActionTime
        and next audit ID to newly inserted record's sequence number
        */
        UPDATE
          a_enns
        SET
          valid_to        = :new.elns_las_act_tim,
          elns_next_audid = u_enns.CURRVAL
        WHERE
          elns_audid = last_audid;
      END IF;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
77
</td>
<td>
THH_C4C
</td>
<td>
TRG_ENNS_TZBUFFER
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ENNS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_enns_tzbuffer before insert or update on t_enns
for each row

</td>
<td>
PL/SQL
</td>
<td>
begin
  if :new.elns_enltdt is not null then
    :new.elns_enltdt := trunc(:new.elns_enltdt) + 12/24;
  end if;
  if :new.elns_eftvdt is not null then
    :new.elns_eftvdt := trunc(:new.elns_eftvdt) + 12/24;
  end if;
  if :new.elns_origeftvdt is not null then
    :new.elns_origeftvdt := trunc(:new.elns_origeftvdt) + 12/24;
  end if;
  if :new.elns_dsntdt is not null then
    :new.elns_dsntdt := trunc(:new.elns_dsntdt) + 12/24;
  end if;
  if :new.elns_termdt is not null then
    :new.elns_termdt := trunc(:new.elns_termdt) + 12/24;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
78
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCCP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNCASEPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FCCP_AUDITINSERT&quot; BEFORE INSERT ON T_FAX_CSFNCASEPVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.fccp_crtd IS NULL THEN 
    :new.fccp_crtd := curr_date; 
  END IF; 

  IF :new.fccp_las_act_tim IS NULL THEN 
    :new.fccp_las_act_tim := curr_date; 
  END IF; 

  IF :new.fccp_las_act IS NULL THEN 
    :new.fccp_las_act := 1; 
  END IF; 

  IF :new.fccp_obj_stt IS NULL THEN 
    :new.fccp_obj_stt := 1; 
  END IF; 

  IF :new.fccp_vers IS NULL THEN 
    :new.fccp_vers := 0; 
  END IF; 

  IF :new.fccp_vsbt IS NULL THEN 
    :new.fccp_vsbt := 1001; 
  END IF; 

  IF :new.fccp_las_act_by IS NULL THEN 
    :new.fccp_las_act_by := 1; 
  END IF; 

  IF :new.fccp_origcrtr IS NULL THEN 
    :new.fccp_origcrtr := 1; 
  END IF; 

  IF :new.fccp_origcrtrlogdin IS NULL THEN 
    :new.fccp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.fccp_las_act_by_logdin IS NULL THEN 
    :new.fccp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_fax_csfncasepvdr 
  ( 
   classtype, 
   fccp_c4c_id, 
   fccp_crtd, 
   fccp_las_act, 
   fccp_las_act_actrtyp, 
   fccp_obj_stt, 
   fccp_vers, 
   fccp_vsbt, 
   fccp_dltddt, 
   fccp_las_act_by, 
   fccp_origcrtr, 
   fccp_origcrtrlogdin, 
   fccp_las_act_by_logdin, 
   fccp_univid, 
   fccp_casepvdrfax_csfn, 
   fccp_casepvrs, 
   fccp_id, 
   valid_from, 
   valid_to , 
   fccp_audid, 
   fccp_prev_audid, 
   fccp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.fccp_c4c_id,
   :new.fccp_crtd,
   :new.fccp_las_act,
   :new.fccp_las_act_actrtyp,
   :new.fccp_obj_stt,
   :new.fccp_vers,
   :new.fccp_vsbt,
   :new.fccp_dltddt,
   :new.fccp_las_act_by,
   :new.fccp_origcrtr,
   :new.fccp_origcrtrlogdin,
   :new.fccp_las_act_by_logdin,
   :new.fccp_univid,
   :new.fccp_casepvdrfax_csfn,
   :new.fccp_casepvrs, 
   :new.fccp_id, 
   :new.fccp_las_act_tim, 
   NULL, 
   u_fax_csfncasepvdr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
79
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCCP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNCASEPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_fccp_auditupdate BEFORE
  UPDATE
    ON T_FAX_CSFNCASEPVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        fccp_audid
      INTO
        last_audid
      FROM
        a_fax_csfncasepvdr
      WHERE
        fccp_id            = :old.fccp_id
      AND fccp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.fccp_las_act_tim = :new.fccp_las_act_tim THEN
      UPDATE
        a_fax_csfncasepvdr
      SET
        classtype              = :new.classtype,
        fccp_c4c_id            = :new.fccp_c4c_id,
        fccp_crtd              = :new.fccp_crtd,
        fccp_las_act           = :new.fccp_las_act,
        fccp_las_act_actrtyp   = :new.fccp_las_act_actrtyp,
        fccp_obj_stt           = :new.fccp_obj_stt,
        fccp_vers              = :new.fccp_vers,
        fccp_vsbt              = :new.fccp_vsbt,
        fccp_dltddt            = :new.fccp_dltddt,
        fccp_las_act_by        = :new.fccp_las_act_by,
        fccp_origcrtr          = :new.fccp_origcrtr,
        fccp_origcrtrlogdin    = :new.fccp_origcrtrlogdin,
        fccp_las_act_by_logdin = :new.fccp_las_act_by_logdin,
        fccp_univid            = :new.fccp_univid,
        fccp_casepvdrfax_csfn  = :new.fccp_casepvdrfax_csfn,
        fccp_casepvrs          = :new.fccp_casepvrs
      WHERE
        fccp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_fax_csfncasepvdr
        (
          classtype,
          fccp_c4c_id,
          fccp_crtd,
          fccp_las_act,
          fccp_las_act_actrtyp,
          fccp_obj_stt,
          fccp_vers,
          fccp_vsbt,
          fccp_dltddt,
          fccp_las_act_by,
          fccp_origcrtr,
          fccp_origcrtrlogdin,

   fccp_las_act_by_logdin,
          fccp_univid,
          fccp_casepvdrfax_csfn,
          fccp_casepvrs,
          fccp_id,
          valid_from,
          valid_to,
          fccp_audid,
          fccp_prev_audid,
          fccp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.fccp_c4c_id,
          :new.fccp_crtd,
          :new.fccp_las_act,
          :new.fccp_las_act_actrtyp,
          :new.fccp_obj_stt,
          :new.fccp_vers,
          :new.fccp_vsbt,
          :new.fccp_dltddt,
          :new.fccp_las_act_by,
          :new.fccp_origcrtr,
          :new.fccp_origcrtrlogdin,
          :new.fccp_las_act_by_logdin,
          :new.fccp_univid,
          :new.fccp_casepvdrfax_csfn,
          :new.fccp_casepvrs,
          :new.fccp_id,
          :new.fccp_las_act_tim,
          NULL,
          u_fax_csfncasepvdr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_fax_csfncasepvdr
      SET
        valid_to        = :new.fccp_las_act_tim,
        fccp_next_audid = u_fax_csfncasepvdr.CURRVAL
      WHERE
        fccp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
80
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCMP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNMEMBPCP
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FCMP_AUDITINSERT&quot; BEFORE INSERT ON T_FAX_CSFNMEMBPCP FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.fcmp_crtd IS NULL THEN 
    :new.fcmp_crtd := curr_date; 
  END IF; 

  IF :new.fcmp_las_act_tim IS NULL THEN 
    :new.fcmp_las_act_tim := curr_date; 
  END IF; 

  IF :new.fcmp_las_act IS NULL THEN 
    :new.fcmp_las_act := 1; 
  END IF; 

  IF :new.fcmp_obj_stt IS NULL THEN 
    :new.fcmp_obj_stt := 1; 
  END IF; 

  IF :new.fcmp_vers IS NULL THEN 
    :new.fcmp_vers := 0; 
  END IF; 

  IF :new.fcmp_vsbt IS NULL THEN 
    :new.fcmp_vsbt := 1001; 
  END IF; 

  IF :new.fcmp_las_act_by IS NULL THEN 
    :new.fcmp_las_act_by := 1; 
  END IF; 

  IF :new.fcmp_origcrtr IS NULL THEN 
    :new.fcmp_origcrtr := 1; 
  END IF; 

  IF :new.fcmp_origcrtrlogdin IS NULL THEN 
    :new.fcmp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.fcmp_las_act_by_logdin IS NULL THEN 
    :new.fcmp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_fax_csfnmembpcp 
  ( 
   classtype, 
   fcmp_c4c_id, 
   fcmp_crtd, 
   fcmp_las_act, 
   fcmp_las_act_actrtyp, 
   fcmp_obj_stt, 
   fcmp_vers, 
   fcmp_vsbt, 
   fcmp_dltddt, 
   fcmp_las_act_by, 
   fcmp_origcrtr, 
   fcmp_origcrtrlogdin, 
   fcmp_las_act_by_logdin, 
   fcmp_univid, 
   fcmp_membpcpsfax_csfn, 
   fcmp_membpcps, 
   fcmp_id, 
   valid_from, 
   valid_to , 
   fcmp_audid, 
   fcmp_prev_audid, 
   fcmp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.fcmp_c4c_id,
   :new.fcmp_crtd,
   :new.fcmp_las_act,
   :new.fcmp_las_act_actrtyp,
   :new.fcmp_obj_stt,
   :new.fcmp_vers,
   :new.fcmp_vsbt,
   :new.fcmp_dltddt,
   :new.fcmp_las_act_by,
   :new.fcmp_origcrtr,
   :new.fcmp_origcrtrlogdin,
   :new.fcmp_las_act_by_logdin,
   :new.fcmp_univid,
   :new.fcmp_membpcpsfax_csfn,
   :new.fcmp_membpcps, 
   :new.fcmp_id, 
   :new.fcmp_las_act_tim, 
   NULL, 
   u_fax_csfnmembpcp.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
81
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCMP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNMEMBPCP
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_fcmp_auditupdate BEFORE
  UPDATE
    ON T_FAX_CSFNMEMBPCP FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        fcmp_audid
      INTO
        last_audid
      FROM
        a_fax_csfnmembpcp
      WHERE
        fcmp_id            = :old.fcmp_id
      AND fcmp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.fcmp_las_act_tim = :new.fcmp_las_act_tim THEN
      UPDATE
        a_fax_csfnmembpcp
      SET
        classtype              = :new.classtype,
        fcmp_c4c_id            = :new.fcmp_c4c_id,
        fcmp_crtd              = :new.fcmp_crtd,
        fcmp_las_act           = :new.fcmp_las_act,
        fcmp_las_act_actrtyp   = :new.fcmp_las_act_actrtyp,
        fcmp_obj_stt           = :new.fcmp_obj_stt,
        fcmp_vers              = :new.fcmp_vers,
        fcmp_vsbt              = :new.fcmp_vsbt,
        fcmp_dltddt            = :new.fcmp_dltddt,
        fcmp_las_act_by        = :new.fcmp_las_act_by,
        fcmp_origcrtr          = :new.fcmp_origcrtr,
        fcmp_origcrtrlogdin    = :new.fcmp_origcrtrlogdin,
        fcmp_las_act_by_logdin = :new.fcmp_las_act_by_logdin,
        fcmp_univid            = :new.fcmp_univid,
        fcmp_membpcpsfax_csfn  = :new.fcmp_membpcpsfax_csfn,
        fcmp_membpcps          = :new.fcmp_membpcps
      WHERE
        fcmp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_fax_csfnmembpcp
        (
          classtype,
          fcmp_c4c_id,
          fcmp_crtd,
          fcmp_las_act,
          fcmp_las_act_actrtyp,
          fcmp_obj_stt,
          fcmp_vers,
          fcmp_vsbt,
          fcmp_dltddt,
          fcmp_las_act_by,
          fcmp_origcrtr,
          fcmp_origcrtrlogdin,

fcmp_las_act_by_logdin,
          fcmp_univid,
          fcmp_membpcpsfax_csfn,
          fcmp_membpcps,
          fcmp_id,
          valid_from,
          valid_to,
          fcmp_audid,
          fcmp_prev_audid,
          fcmp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.fcmp_c4c_id,
          :new.fcmp_crtd,
          :new.fcmp_las_act,
          :new.fcmp_las_act_actrtyp,
          :new.fcmp_obj_stt,
          :new.fcmp_vers,
          :new.fcmp_vsbt,
          :new.fcmp_dltddt,
          :new.fcmp_las_act_by,
          :new.fcmp_origcrtr,
          :new.fcmp_origcrtrlogdin,
          :new.fcmp_las_act_by_logdin,
          :new.fcmp_univid,
          :new.fcmp_membpcpsfax_csfn,
          :new.fcmp_membpcps,
          :new.fcmp_id,
          :new.fcmp_las_act_tim,
          NULL,
          u_fax_csfnmembpcp.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_fax_csfnmembpcp
      SET
        valid_to        = :new.fcmp_las_act_tim,
        fcmp_next_audid = u_fax_csfnmembpcp.CURRVAL
      WHERE
        fcmp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
82
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCPP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNPFNGPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FCPP_AUDITINSERT&quot; BEFORE INSERT ON T_FAX_CSFNPFNGPVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.fcpp_crtd IS NULL THEN 
    :new.fcpp_crtd := curr_date; 
  END IF; 

  IF :new.fcpp_las_act_tim IS NULL THEN 
    :new.fcpp_las_act_tim := curr_date; 
  END IF; 

  IF :new.fcpp_las_act IS NULL THEN 
    :new.fcpp_las_act := 1; 
  END IF; 

  IF :new.fcpp_obj_stt IS NULL THEN 
    :new.fcpp_obj_stt := 1; 
  END IF; 

  IF :new.fcpp_vers IS NULL THEN 
    :new.fcpp_vers := 0; 
  END IF; 

  IF :new.fcpp_vsbt IS NULL THEN 
    :new.fcpp_vsbt := 1001; 
  END IF; 

  IF :new.fcpp_las_act_by IS NULL THEN 
    :new.fcpp_las_act_by := 1; 
  END IF; 

  IF :new.fcpp_origcrtr IS NULL THEN 
    :new.fcpp_origcrtr := 1; 
  END IF; 

  IF :new.fcpp_origcrtrlogdin IS NULL THEN 
    :new.fcpp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.fcpp_las_act_by_logdin IS NULL THEN 
    :new.fcpp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_fax_csfnpfngpvdr 
  ( 
   fcpp_origcrtrlogdin, 
   fcpp_las_act_by_logdin, 
   fcpp_univid, 
   fcpp_pfngpvdrfax_csfn, 
   fcpp_pfngpvrs, 
   classtype, 
   fcpp_c4c_id, 
   fcpp_crtd, 
   fcpp_las_act, 
   fcpp_las_act_actrtyp, 
   fcpp_obj_stt, 
   fcpp_vers, 
   fcpp_vsbt, 
   fcpp_dltddt, 
   fcpp_las_act_by, 
   fcpp_origcrtr, 
   fcpp_id, 
   valid_from, 
   valid_to , 
   fcpp_audid, 
   fcpp_prev_audid, 
   fcpp_next_audid
  ) 
  VALUES 
  ( 
   :new.fcpp_origcrtrlogdin,
   :new.fcpp_las_act_by_logdin,
   :new.fcpp_univid,
   :new.fcpp_pfngpvdrfax_csfn,
   :new.fcpp_pfngpvrs,
   :new.classtype,
   :new.fcpp_c4c_id,
   :new.fcpp_crtd,
   :new.fcpp_las_act,
   :new.fcpp_las_act_actrtyp,
   :new.fcpp_obj_stt,
   :new.fcpp_vers,
   :new.fcpp_vsbt,
   :new.fcpp_dltddt,
   :new.fcpp_las_act_by,
   :new.fcpp_origcrtr, 
   :new.fcpp_id, 
   :new.fcpp_las_act_tim, 
   NULL, 
   u_fax_csfnpfngpvdr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
83
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCPP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNPFNGPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_fcpp_auditupdate BEFORE
  UPDATE
    ON T_FAX_CSFNPFNGPVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        fcpp_audid
      INTO
        last_audid
      FROM
        a_fax_csfnpfngpvdr
      WHERE
        fcpp_id            = :old.fcpp_id
      AND fcpp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.fcpp_las_act_tim = :new.fcpp_las_act_tim THEN
      UPDATE
        a_fax_csfnpfngpvdr
      SET
        fcpp_pfngpvrs          = :new.fcpp_pfngpvrs,
        classtype              = :new.classtype,
        fcpp_c4c_id            = :new.fcpp_c4c_id,
        fcpp_crtd              = :new.fcpp_crtd,
        fcpp_las_act           = :new.fcpp_las_act,
        fcpp_las_act_actrtyp   = :new.fcpp_las_act_actrtyp,
        fcpp_obj_stt           = :new.fcpp_obj_stt,
        fcpp_vers              = :new.fcpp_vers,
        fcpp_vsbt              = :new.fcpp_vsbt,
        fcpp_dltddt            = :new.fcpp_dltddt,
        fcpp_las_act_by        = :new.fcpp_las_act_by,
        fcpp_origcrtr          = :new.fcpp_origcrtr,
        fcpp_origcrtrlogdin    = :new.fcpp_origcrtrlogdin,
        fcpp_las_act_by_logdin = :new.fcpp_las_act_by_logdin,
        fcpp_univid            = :new.fcpp_univid,
        fcpp_pfngpvdrfax_csfn  = :new.fcpp_pfngpvdrfax_csfn
      WHERE
        fcpp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_fax_csfnpfngpvdr
        (
          fcpp_pfngpvrs,
          classtype,
          fcpp_c4c_id,
          fcpp_crtd,
          fcpp_las_act,
          fcpp_las_act_actrtyp,
          fcpp_obj_stt,
          fcpp_vers,
          fcpp_vsbt,
          fcpp_dltddt,
          fcpp_las_act_by,
          fcpp_origcrtr,
          fcp
p_origcrtrlogdin,
          fcpp_las_act_by_logdin,
          fcpp_univid,
          fcpp_pfngpvdrfax_csfn,
          fcpp_id,
          valid_from,
          valid_to,
          fcpp_audid,
          fcpp_prev_audid,
          fcpp_next_audid
        )
        VALUES
        (
          :new.fcpp_pfngpvrs,
          :new.classtype,
          :new.fcpp_c4c_id,
          :new.fcpp_crtd,
          :new.fcpp_las_act,
          :new.fcpp_las_act_actrtyp,
          :new.fcpp_obj_stt,
          :new.fcpp_vers,
          :new.fcpp_vsbt,
          :new.fcpp_dltddt,
          :new.fcpp_las_act_by,
          :new.fcpp_origcrtr,
          :new.fcpp_origcrtrlogdin,
          :new.fcpp_las_act_by_logdin,
          :new.fcpp_univid,
          :new.fcpp_pfngpvdrfax_csfn,
          :new.fcpp_id,
          :new.fcpp_las_act_tim,
          NULL,
          u_fax_csfnpfngpvdr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_fax_csfnpfngpvdr
      SET
        valid_to        = :new.fcpp_las_act_tim,
        fcpp_next_audid = u_fax_csfnpfngpvdr.CURRVAL
      WHERE
        fcpp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
84
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCRP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNRQNGPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FCRP_AUDITINSERT&quot; BEFORE INSERT ON T_FAX_CSFNRQNGPVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.fcrp_crtd IS NULL THEN 
    :new.fcrp_crtd := curr_date; 
  END IF; 

  IF :new.fcrp_las_act_tim IS NULL THEN 
    :new.fcrp_las_act_tim := curr_date; 
  END IF; 

  IF :new.fcrp_las_act IS NULL THEN 
    :new.fcrp_las_act := 1; 
  END IF; 

  IF :new.fcrp_obj_stt IS NULL THEN 
    :new.fcrp_obj_stt := 1; 
  END IF; 

  IF :new.fcrp_vers IS NULL THEN 
    :new.fcrp_vers := 0; 
  END IF; 

  IF :new.fcrp_vsbt IS NULL THEN 
    :new.fcrp_vsbt := 1001; 
  END IF; 

  IF :new.fcrp_las_act_by IS NULL THEN 
    :new.fcrp_las_act_by := 1; 
  END IF; 

  IF :new.fcrp_origcrtr IS NULL THEN 
    :new.fcrp_origcrtr := 1; 
  END IF; 

  IF :new.fcrp_origcrtrlogdin IS NULL THEN 
    :new.fcrp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.fcrp_las_act_by_logdin IS NULL THEN 
    :new.fcrp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_fax_csfnrqngpvdr 
  ( 
   classtype, 
   fcrp_c4c_id, 
   fcrp_crtd, 
   fcrp_las_act, 
   fcrp_las_act_actrtyp, 
   fcrp_obj_stt, 
   fcrp_vers, 
   fcrp_vsbt, 
   fcrp_dltddt, 
   fcrp_las_act_by, 
   fcrp_origcrtr, 
   fcrp_origcrtrlogdin, 
   fcrp_las_act_by_logdin, 
   fcrp_univid, 
   fcrp_rqngpvdrfax_csfn, 
   fcrp_rqngpvrs, 
   fcrp_id, 
   valid_from, 
   valid_to , 
   fcrp_audid, 
   fcrp_prev_audid, 
   fcrp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.fcrp_c4c_id,
   :new.fcrp_crtd,
   :new.fcrp_las_act,
   :new.fcrp_las_act_actrtyp,
   :new.fcrp_obj_stt,
   :new.fcrp_vers,
   :new.fcrp_vsbt,
   :new.fcrp_dltddt,
   :new.fcrp_las_act_by,
   :new.fcrp_origcrtr,
   :new.fcrp_origcrtrlogdin,
   :new.fcrp_las_act_by_logdin,
   :new.fcrp_univid,
   :new.fcrp_rqngpvdrfax_csfn,
   :new.fcrp_rqngpvrs, 
   :new.fcrp_id, 
   :new.fcrp_las_act_tim, 
   NULL, 
   u_fax_csfnrqngpvdr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
85
</td>
<td>
THH_C4C
</td>
<td>
TRG_FCRP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FAX_CSFNRQNGPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_fcrp_auditupdate BEFORE
  UPDATE
    ON T_FAX_CSFNRQNGPVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        fcrp_audid
      INTO
        last_audid
      FROM
        a_fax_csfnrqngpvdr
      WHERE
        fcrp_id            = :old.fcrp_id
      AND fcrp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.fcrp_las_act_tim = :new.fcrp_las_act_tim THEN
      UPDATE
        a_fax_csfnrqngpvdr
      SET
        classtype              = :new.classtype,
        fcrp_c4c_id            = :new.fcrp_c4c_id,
        fcrp_crtd              = :new.fcrp_crtd,
        fcrp_las_act           = :new.fcrp_las_act,
        fcrp_las_act_actrtyp   = :new.fcrp_las_act_actrtyp,
        fcrp_obj_stt           = :new.fcrp_obj_stt,
        fcrp_vers              = :new.fcrp_vers,
        fcrp_vsbt              = :new.fcrp_vsbt,
        fcrp_dltddt            = :new.fcrp_dltddt,
        fcrp_las_act_by        = :new.fcrp_las_act_by,
        fcrp_origcrtr          = :new.fcrp_origcrtr,
        fcrp_origcrtrlogdin    = :new.fcrp_origcrtrlogdin,
        fcrp_las_act_by_logdin = :new.fcrp_las_act_by_logdin,
        fcrp_univid            = :new.fcrp_univid,
        fcrp_rqngpvdrfax_csfn  = :new.fcrp_rqngpvdrfax_csfn,
        fcrp_rqngpvrs          = :new.fcrp_rqngpvrs
      WHERE
        fcrp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_fax_csfnrqngpvdr
        (
          classtype,
          fcrp_c4c_id,
          fcrp_crtd,
          fcrp_las_act,
          fcrp_las_act_actrtyp,
          fcrp_obj_stt,
          fcrp_vers,
          fcrp_vsbt,
          fcrp_dltddt,
          fcrp_las_act_by,
          fcrp_origcrtr,
          fcrp_origcrtrlogdin,

   fcrp_las_act_by_logdin,
          fcrp_univid,
          fcrp_rqngpvdrfax_csfn,
          fcrp_rqngpvrs,
          fcrp_id,
          valid_from,
          valid_to,
          fcrp_audid,
          fcrp_prev_audid,
          fcrp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.fcrp_c4c_id,
          :new.fcrp_crtd,
          :new.fcrp_las_act,
          :new.fcrp_las_act_actrtyp,
          :new.fcrp_obj_stt,
          :new.fcrp_vers,
          :new.fcrp_vsbt,
          :new.fcrp_dltddt,
          :new.fcrp_las_act_by,
          :new.fcrp_origcrtr,
          :new.fcrp_origcrtrlogdin,
          :new.fcrp_las_act_by_logdin,
          :new.fcrp_univid,
          :new.fcrp_rqngpvdrfax_csfn,
          :new.fcrp_rqngpvrs,
          :new.fcrp_id,
          :new.fcrp_las_act_tim,
          NULL,
          u_fax_csfnrqngpvdr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_fax_csfnrqngpvdr
      SET
        valid_to        = :new.fcrp_las_act_tim,
        fcrp_next_audid = u_fax_csfnrqngpvdr.CURRVAL
      WHERE
        fcrp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
86
</td>
<td>
THH_C4C
</td>
<td>
TRG_FILE_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FIL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FILE_AUDITINSERT&quot; BEFORE INSERT ON T_FIL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.file_crtd IS NULL THEN 
    :new.file_crtd := curr_date; 
  END IF; 

  IF :new.file_las_act_tim IS NULL THEN 
    :new.file_las_act_tim := curr_date; 
  END IF; 

  IF :new.file_las_act IS NULL THEN 
    :new.file_las_act := 1; 
  END IF; 

  IF :new.file_obj_stt IS NULL THEN 
    :new.file_obj_stt := 1; 
  END IF; 

  IF :new.file_vers IS NULL THEN 
    :new.file_vers := 0; 
  END IF; 

  IF :new.file_vsbt IS NULL THEN 
    :new.file_vsbt := 1001; 
  END IF; 

  IF :new.file_las_act_by IS NULL THEN 
    :new.file_las_act_by := 1; 
  END IF; 

  IF :new.file_origcrtr IS NULL THEN 
    :new.file_origcrtr := 1; 
  END IF; 

  IF :new.file_origcrtrlogdin IS NULL THEN 
    :new.file_origcrtrlogdin := 1; 
  END IF; 

  IF :new.file_las_act_by_logdin IS NULL THEN 
    :new.file_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_fil 
  ( 
   classtype, 
   file_c4c_id, 
   file_crtd, 
   file_las_act, 
   file_las_act_actrtyp, 
   file_obj_stt, 
   file_vers, 
   file_vsbt, 
   file_dltddt, 
   file_las_act_by, 
   file_origcrtr, 
   file_origcrtrlogdin, 
   file_las_act_by_logdin, 
   file_univid, 
   file_cmmt, 
   file_fil_nam, 
   file_fil_siz, 
   file_cm_base, 
   file_fil_membdgis, 
   file_mdclsrvc, 
   file_cntt, 
   file_ltr_tmpt, 
   file_prpdltr, 
   file_um_base, 
   file_um_extn, 
   file_memb, 
   file_tsk_base, 
   file_cfrdltr, 
   file_tsks, 
   file_id, 
   valid_from, 
   valid_to , 
   file_audid, 
   file_prev_audid, 
   file_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.file_c4c_id,
   :new.file_crtd,
   :new.file_las_act,
   :new.file_las_act_actrtyp,
   :new.file_obj_stt,
   :new.file_vers,
   :new.file_vsbt,
   :new.file_dltddt,
   :new.file_las_act_by,
   :new.file_origcrtr,
   :new.file_origcrtrlogdin,
   :new.file_las_act_by_logdin,
   :new.file_univid,
   :new.file_cmmt,
   :new.file_fil_nam,
   :new.file_fil_siz,
   :new.file_cm_b
ase,
   :new.file_fil_membdgis,
   :new.file_mdclsrvc,
   :new.file_cntt,
   :new.file_ltr_tmpt,
   :new.file_prpdltr,
   :new.file_um_base,
   :new.file_um_extn,
   :new.file_memb,
   :new.file_tsk_base,
   :new.file_cfrdltr,
   :new.file_tsks, 
   :new.file_id, 
   :new.file_las_act_tim, 
   NULL, 
   u_fil.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
87
</td>
<td>
THH_C4C
</td>
<td>
TRG_FILE_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FIL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_file_auditupdate BEFORE
  UPDATE
    ON T_FIL FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        file_audid
      INTO
        last_audid
      FROM
        a_fil
      WHERE
        file_id            = :old.file_id
      AND file_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.file_las_act_tim = :new.file_las_act_tim THEN
      UPDATE
        a_fil
      SET
        classtype              = :new.classtype,
        file_c4c_id            = :new.file_c4c_id,
        file_crtd              = :new.file_crtd,
        file_las_act           = :new.file_las_act,
        file_las_act_actrtyp   = :new.file_las_act_actrtyp,
        file_obj_stt           = :new.file_obj_stt,
        file_vers              = :new.file_vers,
        file_vsbt              = :new.file_vsbt,
        file_dltddt            = :new.file_dltddt,
        file_las_act_by        = :new.file_las_act_by,
        file_origcrtr          = :new.file_origcrtr,
        file_origcrtrlogdin    = :new.file_origcrtrlogdin,
        file_las_act_by_logdin = :new.file_las_act_by_logdin,
        file_univid            = :new.file_univid,
        file_cmmt              = :new.file_cmmt,
        file_fil_nam           = :new.file_fil_nam,
        file_fil_siz           = :new.file_fil_siz,
        file_cm_base           = :new.file_cm_base,
        file_fil_membdgis      = :new.file_fil_membdgis,
        file_mdclsrvc          = :new.file_mdclsrvc,
        file_cntt              = :new.file_cntt,
        file_ltr_tmpt          = :new.file_ltr_tmpt,
        file_prpdltr           = :new.file_prpdltr,
        file_um_base           = :new.file_um_base,
        file_um_extn           = :new.file_um_extn,
        file_memb              = :new.file_memb,
        file_tsk_base          = :new.file_tsk_base,

   file_cfrdltr           = :new.file_cfrdltr,
        file_tsks              = :new.file_tsks
      WHERE
        file_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_fil
        (
          classtype,
          file_c4c_id,
          file_crtd,
          file_las_act,
          file_las_act_actrtyp,
          file_obj_stt,
          file_vers,
          file_vsbt,
          file_dltddt,
          file_las_act_by,
          file_origcrtr,
          file_origcrtrlogdin,
          file_las_act_by_logdin,
          file_univid,
          file_cmmt,
          file_fil_nam,
          file_fil_siz,
          file_cm_base,
          file_fil_membdgis,
          file_mdclsrvc,
          file_cntt,
          file_ltr_tmpt,
          file_prpdltr,
          file_um_base,
          file_um_extn,
          file_memb,
          file_tsk_base,
          file_cfrdltr,
          file_tsks,
          file_id,
          valid_from,
          valid_to,
          file_audid,
          file_prev_audid,
          file_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.file_c4c_id,
          :new.file_crtd,
          :new.file_las_act,
          :new.file_las_act_actrtyp,
          :new.file_obj_stt,
          :new.file_vers,
          :new.file_vsbt,
          :new.file_dltddt,
          :new.file_las_act_by,
          :new.file_origcrtr,
          :new.file_origcrtrlogdin,
          :new.file_las_act_by_logdin,
          :new.file_univid,
          :new.file_cmmt,
          :new.file_fil_nam,
          :new.file_fil_siz,
          :new.file_cm_base,
          :new.file_fil_membdgis,
          :new.file_mdclsrvc,
          :new.file_cntt,
          :new.file_ltr_tmpt,
          :new.file_prpdltr,
          :new.file_um_base,
          :new.file_um_extn,
          :new.file_memb,
          :new.file_tsk_base,

      :new.file_cfrdltr,
          :new.file_tsks,
          :new.file_id,
          :new.file_las_act_tim,
          NULL,
          u_fil.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_fil
      SET
        valid_to        = :new.file_las_act_tim,
        file_next_audid = u_fil.CURRVAL
      WHERE
        file_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
88
</td>
<td>
THH_C4C
</td>
<td>
TRG_FFL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FRDSAND_FMLYLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FFL_AUDITINSERT&quot; BEFORE INSERT ON T_FRDSAND_FMLYLIST FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ffl_crtd IS NULL THEN 
    :new.ffl_crtd := curr_date; 
  END IF; 

  IF :new.ffl_las_act_tim IS NULL THEN 
    :new.ffl_las_act_tim := curr_date; 
  END IF; 

  IF :new.ffl_las_act IS NULL THEN 
    :new.ffl_las_act := 1; 
  END IF; 

  IF :new.ffl_obj_stt IS NULL THEN 
    :new.ffl_obj_stt := 1; 
  END IF; 

  IF :new.ffl_vers IS NULL THEN 
    :new.ffl_vers := 0; 
  END IF; 

  IF :new.ffl_vsbt IS NULL THEN 
    :new.ffl_vsbt := 1001; 
  END IF; 

  IF :new.ffl_las_act_by IS NULL THEN 
    :new.ffl_las_act_by := 1; 
  END IF; 

  IF :new.ffl_origcrtr IS NULL THEN 
    :new.ffl_origcrtr := 1; 
  END IF; 

  IF :new.ffl_origcrtrlogdin IS NULL THEN 
    :new.ffl_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ffl_las_act_by_logdin IS NULL THEN 
    :new.ffl_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_frdsand_fmlylist 
  ( 
   classtype, 
   ffl_c4c_id, 
   ffl_crtd, 
   ffl_las_act, 
   ffl_las_act_actrtyp, 
   ffl_obj_stt, 
   ffl_vers, 
   ffl_vsbt, 
   ffl_dltddt, 
   ffl_las_act_by, 
   ffl_origcrtr, 
   ffl_origcrtrlogdin, 
   ffl_las_act_by_logdin, 
   ffl_univid, 
   ffl_prxyind, 
   ffl_actv, 
   ffl_rlspto_memb, 
   ffl_f_nf_usr, 
   ffl_mems, 
   ffl_id, 
   valid_from, 
   valid_to , 
   ffl_audid, 
   ffl_prev_audid, 
   ffl_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ffl_c4c_id,
   :new.ffl_crtd,
   :new.ffl_las_act,
   :new.ffl_las_act_actrtyp,
   :new.ffl_obj_stt,
   :new.ffl_vers,
   :new.ffl_vsbt,
   :new.ffl_dltddt,
   :new.ffl_las_act_by,
   :new.ffl_origcrtr,
   :new.ffl_origcrtrlogdin,
   :new.ffl_las_act_by_logdin,
   :new.ffl_univid,
   :new.ffl_prxyind,
   :new.ffl_actv,
   :new.ffl_rlspto_memb,
   :new.ffl_f_nf_usr,
   :new.ffl_mems, 
   :new.ffl_id, 
   :new.ffl_las_act_tim, 
   NULL, 
   u_frdsand_fmlylist.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
89
</td>
<td>
THH_C4C
</td>
<td>
TRG_FFL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FRDSAND_FMLYLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ffl_auditupdate BEFORE
  UPDATE
    ON T_FRDSAND_FMLYLIST FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ffl_audid
      INTO
        last_audid
      FROM
        a_frdsand_fmlylist
      WHERE
        ffl_id            = :old.ffl_id
      AND ffl_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ffl_las_act_tim = :new.ffl_las_act_tim THEN
      UPDATE
        a_frdsand_fmlylist
      SET
        classtype             = :new.classtype,
        ffl_c4c_id            = :new.ffl_c4c_id,
        ffl_crtd              = :new.ffl_crtd,
        ffl_las_act           = :new.ffl_las_act,
        ffl_las_act_actrtyp   = :new.ffl_las_act_actrtyp,
        ffl_obj_stt           = :new.ffl_obj_stt,
        ffl_vers              = :new.ffl_vers,
        ffl_vsbt              = :new.ffl_vsbt,
        ffl_dltddt            = :new.ffl_dltddt,
        ffl_las_act_by        = :new.ffl_las_act_by,
        ffl_origcrtr          = :new.ffl_origcrtr,
        ffl_origcrtrlogdin    = :new.ffl_origcrtrlogdin,
        ffl_las_act_by_logdin = :new.ffl_las_act_by_logdin,
        ffl_univid            = :new.ffl_univid,
        ffl_prxyind           = :new.ffl_prxyind,
        ffl_actv              = :new.ffl_actv,
        ffl_rlspto_memb       = :new.ffl_rlspto_memb,
        ffl_f_nf_usr          = :new.ffl_f_nf_usr,
        ffl_mems              = :new.ffl_mems
      WHERE
        ffl_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_frdsand_fmlylist
        (
          classtype,
          ffl_c4c_id,
          ffl_crtd,
          ffl_las_act,
          ffl_las_act_actrtyp,
          ffl_obj_stt,
          ffl_vers,
          ffl_vsbt,
          ffl_dltddt
,
          ffl_las_act_by,
          ffl_origcrtr,
          ffl_origcrtrlogdin,
          ffl_las_act_by_logdin,
          ffl_univid,
          ffl_prxyind,
          ffl_actv,
          ffl_rlspto_memb,
          ffl_f_nf_usr,
          ffl_mems,
          ffl_id,
          valid_from,
          valid_to,
          ffl_audid,
          ffl_prev_audid,
          ffl_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ffl_c4c_id,
          :new.ffl_crtd,
          :new.ffl_las_act,
          :new.ffl_las_act_actrtyp,
          :new.ffl_obj_stt,
          :new.ffl_vers,
          :new.ffl_vsbt,
          :new.ffl_dltddt,
          :new.ffl_las_act_by,
          :new.ffl_origcrtr,
          :new.ffl_origcrtrlogdin,
          :new.ffl_las_act_by_logdin,
          :new.ffl_univid,
          :new.ffl_prxyind,
          :new.ffl_actv,
          :new.ffl_rlspto_memb,
          :new.ffl_f_nf_usr,
          :new.ffl_mems,
          :new.ffl_id,
          :new.ffl_las_act_tim,
          NULL,
          u_frdsand_fmlylist.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_frdsand_fmlylist
      SET
        valid_to       = :new.ffl_las_act_tim,
        ffl_next_audid = u_frdsand_fmlylist.CURRVAL
      WHERE
        ffl_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
90
</td>
<td>
THH_C4C
</td>
<td>
TRG_FVFD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FRTSFDRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_FVFD_AUDITINSERT&quot; BEFORE INSERT ON T_FRTSFDRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.fvfd_crtd IS NULL THEN 
    :new.fvfd_crtd := curr_date; 
  END IF; 

  IF :new.fvfd_las_act_tim IS NULL THEN 
    :new.fvfd_las_act_tim := curr_date; 
  END IF; 

  IF :new.fvfd_las_act IS NULL THEN 
    :new.fvfd_las_act := 1; 
  END IF; 

  IF :new.fvfd_obj_stt IS NULL THEN 
    :new.fvfd_obj_stt := 1; 
  END IF; 

  IF :new.fvfd_vers IS NULL THEN 
    :new.fvfd_vers := 0; 
  END IF; 

  IF :new.fvfd_vsbt IS NULL THEN 
    :new.fvfd_vsbt := 1001; 
  END IF; 

  IF :new.fvfd_las_act_by IS NULL THEN 
    :new.fvfd_las_act_by := 1; 
  END IF; 

  IF :new.fvfd_origcrtr IS NULL THEN 
    :new.fvfd_origcrtr := 1; 
  END IF; 

  IF :new.fvfd_origcrtrlogdin IS NULL THEN 
    :new.fvfd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.fvfd_las_act_by_logdin IS NULL THEN 
    :new.fvfd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_frtsfdrs 
  ( 
   classtype, 
   fvfd_c4c_id, 
   fvfd_crtd, 
   fvfd_las_act, 
   fvfd_las_act_actrtyp, 
   fvfd_obj_stt, 
   fvfd_vers, 
   fvfd_vsbt, 
   fvfd_dltddt, 
   fvfd_las_act_by, 
   fvfd_origcrtr, 
   fvfd_origcrtrlogdin, 
   fvfd_las_act_by_logdin, 
   fvfd_univid, 
   fvfd_nam, 
   fvfd_rec_typ, 
   fvfd_prnt, 
   fvfd_payr, 
   fvfd_id, 
   valid_from, 
   valid_to , 
   fvfd_audid, 
   fvfd_prev_audid, 
   fvfd_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.fvfd_c4c_id,
   :new.fvfd_crtd,
   :new.fvfd_las_act,
   :new.fvfd_las_act_actrtyp,
   :new.fvfd_obj_stt,
   :new.fvfd_vers,
   :new.fvfd_vsbt,
   :new.fvfd_dltddt,
   :new.fvfd_las_act_by,
   :new.fvfd_origcrtr,
   :new.fvfd_origcrtrlogdin,
   :new.fvfd_las_act_by_logdin,
   :new.fvfd_univid,
   :new.fvfd_nam,
   :new.fvfd_rec_typ,
   :new.fvfd_prnt,
   :new.fvfd_payr, 
   :new.fvfd_id, 
   :new.fvfd_las_act_tim, 
   NULL, 
   u_frtsfdrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
91
</td>
<td>
THH_C4C
</td>
<td>
TRG_FVFD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_FRTSFDRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_fvfd_auditupdate BEFORE
  UPDATE
    ON T_FRTSFDRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        fvfd_audid
      INTO
        last_audid
      FROM
        a_frtsfdrs
      WHERE
        fvfd_id            = :old.fvfd_id
      AND fvfd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.fvfd_las_act_tim = :new.fvfd_las_act_tim THEN
      UPDATE
        a_frtsfdrs
      SET
        classtype              = :new.classtype,
        fvfd_c4c_id            = :new.fvfd_c4c_id,
        fvfd_crtd              = :new.fvfd_crtd,
        fvfd_las_act           = :new.fvfd_las_act,
        fvfd_las_act_actrtyp   = :new.fvfd_las_act_actrtyp,
        fvfd_obj_stt           = :new.fvfd_obj_stt,
        fvfd_vers              = :new.fvfd_vers,
        fvfd_vsbt              = :new.fvfd_vsbt,
        fvfd_dltddt            = :new.fvfd_dltddt,
        fvfd_las_act_by        = :new.fvfd_las_act_by,
        fvfd_origcrtr          = :new.fvfd_origcrtr,
        fvfd_origcrtrlogdin    = :new.fvfd_origcrtrlogdin,
        fvfd_las_act_by_logdin = :new.fvfd_las_act_by_logdin,
        fvfd_univid            = :new.fvfd_univid,
        fvfd_nam               = :new.fvfd_nam,
        fvfd_rec_typ           = :new.fvfd_rec_typ,
        fvfd_prnt              = :new.fvfd_prnt,
        fvfd_payr              = :new.fvfd_payr
      WHERE
        fvfd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_frtsfdrs
        (
          classtype,
          fvfd_c4c_id,
          fvfd_crtd,
          fvfd_las_act,
          fvfd_las_act_actrtyp,
          fvfd_obj_stt,
          fvfd_vers,
          fvfd_vsbt,
          fvfd_dltddt,
          fvfd_las_act_by,

       fvfd_origcrtr,
          fvfd_origcrtrlogdin,
          fvfd_las_act_by_logdin,
          fvfd_univid,
          fvfd_nam,
          fvfd_rec_typ,
          fvfd_prnt,
          fvfd_payr,
          fvfd_id,
          valid_from,
          valid_to,
          fvfd_audid,
          fvfd_prev_audid,
          fvfd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.fvfd_c4c_id,
          :new.fvfd_crtd,
          :new.fvfd_las_act,
          :new.fvfd_las_act_actrtyp,
          :new.fvfd_obj_stt,
          :new.fvfd_vers,
          :new.fvfd_vsbt,
          :new.fvfd_dltddt,
          :new.fvfd_las_act_by,
          :new.fvfd_origcrtr,
          :new.fvfd_origcrtrlogdin,
          :new.fvfd_las_act_by_logdin,
          :new.fvfd_univid,
          :new.fvfd_nam,
          :new.fvfd_rec_typ,
          :new.fvfd_prnt,
          :new.fvfd_payr,
          :new.fvfd_id,
          :new.fvfd_las_act_tim,
          NULL,
          u_frtsfdrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_frtsfdrs
      SET
        valid_to        = :new.fvfd_las_act_tim,
        fvfd_next_audid = u_frtsfdrs.CURRVAL
      WHERE
        fvfd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
92
</td>
<td>
THH_C4C
</td>
<td>
TRG_GOALCP
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GOALCP
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_goalCP BEFORE INSERT OR UPDATE ON T_GOALCP FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.goal_crtd IS NULL THEN
    :new.goal_crtd := curr_date;
  END IF;
  IF :new.goal_las_act_tim IS NULL THEN
    :new.goal_las_act_tim := curr_date;
  END IF;
  IF :new.goal_obj_stt IS NULL THEN
    :new.goal_obj_stt := 1;
  END IF;
  IF :new.goal_vers IS NULL THEN
    :new.goal_vers := 0;
  END IF;
  IF :new.goal_vsbt IS NULL THEN
    :new.goal_vsbt := 1001;
  END IF;
  IF :new.goal_origcrtr IS NULL THEN
    :new.goal_origcrtr := 1;
  END IF;
  IF :new.goal_origcrtrlogdin IS NULL THEN
    :new.goal_origcrtrlogdin := 1;
  END IF;
  IF :new.goal_las_act_by_logdin IS NULL THEN
    :new.goal_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_goalcp
  ( GOAL_ID,
   CLASSTYPE,
   GOAL_TYP_SBTY,
   GOAL_C4C_ID,
   GOAL_CRTD,
   GOAL_LAS_ACT_TIM,
   GOAL_OBJ_STT,
   GOAL_VERS,
   GOAL_VSBT,
   GOAL_DLTDT,
   GOAL_LAS_ACT_BY,
   GOAL_ORIGCRTR,
   GOAL_ORIGCRTRLOGDIN,
   GOAL_LAS_ACT_BY_LOGDIN,
   GOAL_UNIVID,
   GOAL_TEMPLATE,
   GOAL_NAME,
   GOAL_DESC,
   GOAL_START,
   GOAL_END,
   GOAL_COMMENTS,
   T_OUTCOME_OUTCOME_ID,
   valid_from,
   valid_to ,
   goal_audid,
   goal_prev_audid,
   goal_next_audid )
  VALUES
  (:new.GOAL_ID,
   :new.CLASSTYPE,
   :new.GOAL_TYP_SBTY,
   :new.GOAL_C4C_ID,
   :new.GOAL_CRTD,
   :new.GOAL_LAS_ACT_TIM,
   :new.GOAL_OBJ_STT,
   :new.GOAL_VERS,
   :new.GOAL_VSBT,
   :new.GOAL_DLTDT,
   :new.GOAL_LAS_ACT_BY,
   :new.GOAL_ORIGCRTR,
   :new.GOAL_ORIGCRTRLOGDIN,
   :new.GOAL_LAS_ACT_BY_LOGDIN,
   :new.GOAL_UNIVID,
   :new.GOAL_TEMPLATE,
   :new.GOAL_NAME,
   :new.GOAL_DESC,
   :new.GOAL_START,
   :new.GOAL_END,
   :new.GOAL_COMMENTS,
   :new.T_OUTCOME_OUTCOME_ID,
   :new.goal_las_act_tim,
   NULL,
   u_goalcp.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT goal_audid INTO last_audid FROM a_goalcp
      WHERE goal_id =  :old.goal_id AND goal_next_audid IS NULL  FOR UPDATE;
  EX
CEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.goal_las_act_tim = :new.goal_las_act_tim THEN
    UPDATE a_goalcp
     SET goal_id                         = :new.goal_id,
         classtype                       = :new.classtype,
         GOAL_TYP_SBTY 						  = :new.GOAL_TYP_SBTY,
         goal_c4c_id                     = :new.goal_c4c_id,
         goal_crtd                       = :new.goal_crtd,
         goal_las_act_tim		 = :new.goal_las_act_tim,
         goal_obj_stt                    = :new.goal_obj_stt,
         goal_vers                       = :new.goal_vers,
         goal_vsbt                       = :new.goal_vsbt,
         goal_dltdt                      = :new.goal_dltdt,
         goal_LAS_ACT_BY                = :new.goal_LAS_ACT_BY,
         goal_origcrtr                   = :new.goal_origcrtr,
         goal_origcrtrlogdin             = :new.goal_origcrtrlogdin,
         goal_las_act_by_logdin          = :new.goal_las_act_by_logdin,
         GOAL_UNIVID                     = :new.goal_univid,
         GOAL_TEMPLATE                   = :new.goal_template,
         GOAL_NAME                       = :new.goal_name,
         GOAL_DESC                       = :new.goal_desc,
         GOAL_START                      = :new.goal_start,
         GOAL_END                        = :new.goal_end,
         GOAL_COMMENTS                   = :new.goal_comments,
         T_OUTCOME_OUTCOME_ID		 = :new.T_OUTCOME_OUTCOME_ID
      WHERE goal_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_goalcp
  ( GOAL_ID,
   CLASSTYPE,
   GOAL_TYP_SBTY,
   GOAL_C4C_ID,
   GOAL_CRTD,
   GOAL_LAS_ACT_TIM,
   GOAL_OBJ_STT,
   GOAL_VERS,
   GOAL_VSBT,
   GOAL_DLTDT,
   GOAL_LAS_ACT_BY,
   GOAL_ORIGCRTR,
   GOAL_ORIGCRTRLOGDIN,
   GOAL_LAS_ACT_BY_LOGDIN,
   GOAL_UNIVID,
   GOAL_TEMPLATE,
   G
OAL_NAME,
   GOAL_DESC,
   GOAL_START,
   GOAL_END,
   GOAL_COMMENTS,
   T_OUTCOME_OUTCOME_ID,
   valid_from,
   valid_to ,
   goal_audid,
   goal_prev_audid,
   goal_next_audid )
  VALUES
  (:new.GOAL_ID,
   :new.CLASSTYPE,
   :new.GOAL_TYP_SBTY,
   :new.GOAL_C4C_ID,
   :new.GOAL_CRTD,
   :new.GOAL_LAS_ACT_TIM,
   :new.GOAL_OBJ_STT,
   :new.GOAL_VERS,
   :new.GOAL_VSBT,
   :new.GOAL_DLTDT,
   :new.GOAL_LAS_ACT_BY,
   :new.GOAL_ORIGCRTR,
   :new.GOAL_ORIGCRTRLOGDIN,
   :new.GOAL_LAS_ACT_BY_LOGDIN,
   :new.GOAL_UNIVID,
   :new.GOAL_TEMPLATE,
   :new.GOAL_NAME,
   :new.GOAL_DESC,
   :new.GOAL_START,
   :new.GOAL_END,
   :new.GOAL_COMMENTS,
   :new.T_OUTCOME_OUTCOME_ID,
   :new.goal_las_act_tim,
   NULL,
   u_goalcp.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_goalcp
      SET
        valid_to = :new.goal_las_act_tim,
        goal_next_audid = u_goalcp.CURRVAL
      WHERE goal_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
93
</td>
<td>
THH_C4C
</td>
<td>
TRG_GOALCP_TEMPLATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GOALCP_TEMPLATE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_goalCP_TEMPLATE BEFORE INSERT OR UPDATE ON T_GOALCP_TEMPLATE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.goal_crtd IS NULL THEN
    :new.goal_crtd := curr_date;
  END IF;
  IF :new.goal_las_act_tim IS NULL THEN
    :new.goal_las_act_tim := curr_date;
  END IF;
  IF :new.goal_obj_stt IS NULL THEN
    :new.goal_obj_stt := 1;
  END IF;
  IF :new.goal_vers IS NULL THEN
    :new.goal_vers := 0;
  END IF;
  IF :new.goal_vsbt IS NULL THEN
    :new.goal_vsbt := 1001;
  END IF;
  IF :new.goal_origcrtr IS NULL THEN
    :new.goal_origcrtr := 1;
  END IF;
  IF :new.goal_origcrtrlogdin IS NULL THEN
    :new.goal_origcrtrlogdin := 1;
  END IF;
  IF :new.goal_las_act_by_logdin IS NULL THEN
    :new.goal_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_goalcp_template
  ( GOAL_ID,
   CLASSTYPE,
   GOAL_C4C_ID,
   GOAL_CRTD,
   GOAL_LAS_ACT_TIM,
   GOAL_OBJ_STT,
   GOAL_VERS,
   GOAL_VSBT,
   GOAL_DLTDT,
   GOAL_LAS_ACT_BY,
   GOAL_ORIGCRTR,
   GOAL_ORIGCRTRLOGDIN,
   GOAL_LAS_ACT_BY_LOGDIN,
   GOAL_UNIVID,
   GOAL_NAME,
   GOAL_DESC,
   GOAL_COMMENTS,
   valid_from,
   valid_to ,
   cp_audid,
   cp_prev_audid,
   cp_next_audid )
  VALUES
  (:new.GOAL_ID,
   :new.CLASSTYPE,
   :new.GOAL_C4C_ID,
   :new.GOAL_CRTD,
   :new.GOAL_LAS_ACT_TIM,
   :new.GOAL_OBJ_STT,
   :new.GOAL_VERS,
   :new.GOAL_VSBT,
   :new.GOAL_DLTDT,
   :new.GOAL_LAS_ACT_BY,
   :new.GOAL_ORIGCRTR,
   :new.GOAL_ORIGCRTRLOGDIN,
   :new.GOAL_LAS_ACT_BY_LOGDIN,
   :new.GOAL_UNIVID,
   :new.GOAL_NAME,
   :new.GOAL_DESC,
   :new.GOAL_COMMENTS,
   :new.goal_las_act_tim,
   NULL,
   u_goalcp_template.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT cp_audid INTO last_audid FROM a_goalcp_template
      WHERE goal_id =  :old.goal_id AND cp_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.goal_las_act_tim = :new.goal_las_act_tim THEN
    UPDATE
 a_goalcp_template
     SET goal_id                         = :new.goal_id,
         classtype                       = :new.classtype,
         goal_c4c_id                     = :new.goal_c4c_id,
         goal_crtd                       = :new.goal_crtd,
         goal_las_act_tim                = :new.goal_las_act_tim,
         goal_obj_stt                    = :new.goal_obj_stt,
         goal_vers                       = :new.goal_vers,
         goal_vsbt                       = :new.goal_vsbt,
         goal_dltdt                      = :new.goal_dltdt,
         goal_LAS_ACT_BY                = :new.goal_LAS_ACT_BY,
         goal_origcrtr                   = :new.goal_origcrtr,
         goal_origcrtrlogdin             = :new.goal_origcrtrlogdin,
         goal_las_act_by_logdin          = :new.goal_las_act_by_logdin,
         GOAL_UNIVID                     = :new.goal_univid,
         GOAL_NAME                       = :new.goal_name,
         GOAL_DESC                       = :new.goal_desc,
         GOAL_COMMENTS                   = :new.goal_comments
      WHERE cp_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_goalcp_template
  ( GOAL_ID,
   CLASSTYPE,
   GOAL_C4C_ID,
   GOAL_CRTD,
   GOAL_LAS_ACT_TIM,
   GOAL_OBJ_STT,
   GOAL_VERS,
   GOAL_VSBT,
   GOAL_DLTDT,
   GOAL_LAS_ACT_BY,
   GOAL_ORIGCRTR,
   GOAL_ORIGCRTRLOGDIN,
   GOAL_LAS_ACT_BY_LOGDIN,
   GOAL_UNIVID,
   GOAL_NAME,
   GOAL_DESC,
   GOAL_COMMENTS,
   valid_from,
   valid_to ,
   cp_audid,
   cp_prev_audid,
   cp_next_audid )
  VALUES
  (:new.GOAL_ID,
   :new.CLASSTYPE,
   :new.GOAL_C4C_ID,
   :new.GOAL_CRTD,
   :new.GOAL_LAS_ACT_TIM,
   :new.GOAL_OBJ_STT,
   :new.GOAL_VERS,
   :new.GOAL_VSBT,
   :new.GOAL_DLTDT,
   :new.GOAL_LAS_ACT_BY,
   :new.GOAL_ORIGCRTR,
   :new.GOAL_ORIGCRTRLOGDIN,
   :new.GOAL_LAS_ACT_BY_LOGDIN,
   :new.GOAL_UNIVID,
   :new.GOAL_NAME,
   :new.GOAL_DESC,
   :new.
GOAL_COMMENTS,
   :new.goal_las_act_tim,
   NULL,
   u_goalcp_template.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_goalcp_template
      SET
        valid_to = :new.goal_las_act_tim,
        cp_next_audid = u_goalcp_template.CURRVAL
      WHERE cp_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
94
</td>
<td>
THH_C4C
</td>
<td>
TRG_GRIEVANCE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GRIEVANCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_grievance before insert or update on t_grievance for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date date;
  /* last audit ID of record */
  last_audid number;
begin
  curr_date := current_date;
  if inserting then
    if :new.grvc_crtd is null then
      :new.grvc_crtd := curr_date;
    end if;
    if :new.grvc_las_act_tim is null then
      :new.grvc_las_act_tim := curr_date;
    end if;
    if :new.grvc_obj_stt is null then
      :new.grvc_obj_stt := 1;
    end if;
    if :new.grvc_vers is null then
      :new.grvc_vers := 0;
    end if;
    if :new.grvc_origcrtr is null then
      :new.grvc_origcrtr := 1;
    end if;
    insert into a_grievance
      (
      classtype,
      grvc_c4c_id,
      grvc_crtd,
      grvc_las_act_tim,
      grvc_obj_stt,
      grvc_vers,
      grvc_dltddt,
      grvc_origcrtr,
      grvc_univid,
      grvc_txt,
      grvc_calldt_tim,
      grvc_calldrtn,
      grvc_calr,
      grvc_callrcpt,
      grvc_nmbrdled,
      grvc_err_cmmt,
      grvc_rstncmmt,
      grvc_cnv_id,
      grvc_rsld,
      grvc_id,
      grvc_mrkdrsldby,
      grvc_mrkdgrvcby,
      grvc_cm_base,
      grvc_rltdpvdr,
      grvc_typ,
      grvc_um_base,
      grvc_memb,
      grvc_pvdr,
      valid_from,
      valid_to,
      grvc_audid,
      grvc_prev_audid,
      grvc_next_audid,
	  grvc_clinicaldataentry_id
      )
    values
      (
      :new.classtype,
      :new.grvc_c4c_id,
      :new.grvc_crtd,
      :new.grvc_las_act_tim,
      :new.grvc_obj_stt,
      :new.grvc_vers,
      :new.grvc_dltddt,
      :new.grvc_origcrtr,
      :new.grvc_univid,
      :new.grvc_txt,
      :new.grvc_calldt_tim,
      :new.grvc_calldrtn,
      :new.grvc_calr,
      :new.grvc_callrcpt,
      :new.grvc_nmbrdled,
      :new.grvc_err_cmmt,
      :new.grvc_rstncmmt,
      :new.grvc_cnv_id,
      :new.grvc_rsld,
      :new.grvc_id,
      :new.grvc_mrkdrsldby,
      :new.grvc_mrkdgrvcby,
      :new.grvc_cm_base,
      :new.grvc_rltdpvdr,
      :new.grvc_typ,
      :new.grvc_um_base,
      :new.grvc_memb,
      :new.grvc_pvdr,
      :new.g
rvc_las_act_tim,
      null,
      u_grievance.nextval,
      null,
      null,
	  :new.grvc_clinicaldataentry_id
      );
  else
    begin
      select grvc_audid into last_audid
      from a_grievance
      where grvc_id = :old.grvc_id
      and
      grvc_next_audid is null
      for update;
      exception when no_data_found then last_audid := null;
    end;
    /* LastActionTime has not changed - no new transaction */
    if :old.grvc_las_act_tim = :new.grvc_las_act_tim then
      update a_grievance
        set
          grvc_id          = :new.grvc_id,
          classtype        = :new.classtype,
          grvc_c4c_id      = :new.grvc_c4c_id,
          grvc_crtd        = :new.grvc_crtd,
          grvc_las_act_tim = :new.grvc_las_act_tim,
          grvc_obj_stt     = :new.grvc_obj_stt,
          grvc_vers        = :new.grvc_vers,
          grvc_dltddt      = :new.grvc_dltddt,
          grvc_origcrtr    = :new.grvc_origcrtr,
          grvc_univid      = :new.grvc_univid,
          grvc_txt         = :new.grvc_txt,
          grvc_calldt_tim  = :new.grvc_calldt_tim,
          grvc_calldrtn    = :new.grvc_calldrtn,
          grvc_calr        = :new.grvc_calr,
          grvc_callrcpt    = :new.grvc_callrcpt,
          grvc_nmbrdled    = :new.grvc_nmbrdled,
          grvc_err_cmmt    = :new.grvc_err_cmmt,
          grvc_rstncmmt    = :new.grvc_rstncmmt,
          grvc_cnv_id      = :new.grvc_cnv_id,
          grvc_rsld        = :new.grvc_rsld,
          grvc_mrkdrsldby  = :new.grvc_mrkdrsldby,
          grvc_mrkdgrvcby  = :new.grvc_mrkdgrvcby,
          grvc_cm_base     = :new.grvc_cm_base,
          grvc_rltdpvdr    = :new.grvc_rltdpvdr,
          grvc_typ         = :new.grvc_typ,
          grvc_um_base     = :new.grvc_um_base,
          grvc_memb        = :new.grvc_memb,
          grvc_pvdr        = :new.grvc_pvdr,
		  grvc_clinicaldataentry_id = :new.grvc_clinicaldataentry_id
        where grvc_audid = last_audid;
    /* LastActionTime has changed - new transactio
n in place */
    else
      /* insert new values introduced by new transaction */
      insert into a_grievance
        (
        classtype,
       	grvc_c4c_id,
        grvc_crtd,
        grvc_las_act_tim,
        grvc_obj_stt,
        grvc_vers,
        grvc_dltddt,
        grvc_origcrtr,
        grvc_univid,
        grvc_txt,
        grvc_calldt_tim,
        grvc_calldrtn,
        grvc_calr,
        grvc_callrcpt,
        grvc_nmbrdled,
        grvc_err_cmmt,
        grvc_rstncmmt,
        grvc_cnv_id,
        grvc_rsld,
        grvc_id,
        grvc_mrkdrsldby,
        grvc_mrkdgrvcby,
        grvc_cm_base,
        grvc_rltdpvdr,
        grvc_typ,
        grvc_um_base,
        grvc_memb,
        grvc_pvdr,
        valid_from,
        valid_to,
        grvc_audid,
        grvc_prev_audid,
        grvc_next_audid,
		grvc_clinicaldataentry_id)
      values
        (
        :new.classtype,
        :new.grvc_c4c_id,
        :new.grvc_crtd,
        :new.grvc_las_act_tim,
        :new.grvc_obj_stt,
        :new.grvc_vers,
        :new.grvc_dltddt,
        :new.grvc_origcrtr,
        :new.grvc_univid,
        :new.grvc_txt,
        :new.grvc_calldt_tim,
        :new.grvc_calldrtn,
        :new.grvc_calr,
        :new.grvc_callrcpt,
        :new.grvc_nmbrdled,
        :new.grvc_err_cmmt,
        :new.grvc_rstncmmt,
        :new.grvc_cnv_id,
        :new.grvc_rsld,
        :new.grvc_id,
        :new.grvc_mrkdrsldby,
        :new.grvc_mrkdgrvcby,
        :new.grvc_cm_base,
        :new.grvc_rltdpvdr,
        :new.grvc_typ,
        :new.grvc_um_base,
        :new.grvc_memb,
        :new.grvc_pvdr,
        :new.grvc_las_act_tim,
        null,
        u_grievance.nextval,
        last_audid,
        null,
		:new.grvc_clinicaldataentry_id
        );
      /* update last audit record's valid_to to new LastActionTime
         and next audit ID to newly inserted record's sequence number
       */
      update a_grievance
        set
          valid_to = :new.grvc_las_act_tim,

         grvc_next_audid = u_grievance.currval
        where grvc_audid = last_audid;
    end if;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
95
</td>
<td>
THH_C4C
</td>
<td>
TRG_GRVC_AFFILIATION
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GRIEVANCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_grvc_affiliation before insert or update on t_grievance
for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
    v_affiliation_id number(19,0);
    v_member_id number(19,0);
    v_classtype varchar2(255);

  begin

    -- Member
    if :new.grvc_memb is not null then
      select usr.classtype, usr.usr_id into v_classtype, v_member_id
      from t_usr usr
      where :new.grvc_memb = usr.mbur_id;
      if v_classtype is not null then
        :new.affiliation_type := 'Member';
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
        :new.affiliation_id := v_member_id;
      end if;
    end if;

    -- Provider
    if :new.grvc_pvdr is not null then
      select pvdr.classtype, pvdr.usr_id, null into v_classtype, v_affiliation_id, v_member_id
      from t_usr pvdr
      where pvdr.prv_id = :new.grvc_pvdr;
      if v_classtype is not null then
        :new.affiliation_type := 'Provider';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
    end if;

    -- Case / Case Request
    if :new.grvc_cm_base is not null then
      select cm.classtype, cm.cmbs_id, cm.cmbs_memb into v_classtype, v_affiliation_id, v_member_id
      from t_cm_basebase cm
      where :new.grvc_cm_base = cm.cmbs_id;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if v_classtype = 'Case' then
        :new.affiliation_type := 'Case';
      end if;
      if v_classtype = 'CaseRequest' then
        :new.affiliation_type := 'CaseRequest';			-- CAREMGR-21550
      end if;
      if v_classtype = 'CMProject' then
        :new.affiliation_type := 'CMProject';
      end if;
      if v_classtype = 'CMProjectRequest' then
        :new.affiliation_type := 'CMProjectRequest';	-- CAREMGR-21550
      end if;
    end if;

    -- Authorization (UM)
    if :new.grvc_um_base is not null then
      select um.classtype, um.umbs_id, um.umbs_memb into v_classt
ype, v_affiliation_id, v_member_id
      from t_um_base um
      where :new.grvc_um_base = um.umbs_id;
      if v_classtype is not null then
        :new.affiliation_type := 'UMEvent';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
    end if;

  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
96
</td>
<td>
THH_C4C
</td>
<td>
TRG_GPMB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GRP_MEMS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_GPMB_AUDITINSERT&quot; BEFORE INSERT ON T_GRP_MEMS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.gpmb_crtd IS NULL THEN 
    :new.gpmb_crtd := curr_date; 
  END IF; 

  IF :new.gpmb_las_act_tim IS NULL THEN 
    :new.gpmb_las_act_tim := curr_date; 
  END IF; 

  IF :new.gpmb_las_act IS NULL THEN 
    :new.gpmb_las_act := 1; 
  END IF; 

  IF :new.gpmb_obj_stt IS NULL THEN 
    :new.gpmb_obj_stt := 1; 
  END IF; 

  IF :new.gpmb_vers IS NULL THEN 
    :new.gpmb_vers := 0; 
  END IF; 

  IF :new.gpmb_vsbt IS NULL THEN 
    :new.gpmb_vsbt := 1001; 
  END IF; 

  IF :new.gpmb_las_act_by IS NULL THEN 
    :new.gpmb_las_act_by := 1; 
  END IF; 

  IF :new.gpmb_origcrtr IS NULL THEN 
    :new.gpmb_origcrtr := 1; 
  END IF; 

  IF :new.gpmb_origcrtrlogdin IS NULL THEN 
    :new.gpmb_origcrtrlogdin := 1; 
  END IF; 

  IF :new.gpmb_las_act_by_logdin IS NULL THEN 
    :new.gpmb_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_grp_mems 
  ( 
   classtype, 
   gpmb_c4c_id, 
   gpmb_crtd, 
   gpmb_las_act, 
   gpmb_las_act_actrtyp, 
   gpmb_obj_stt, 
   gpmb_vers, 
   gpmb_vsbt, 
   gpmb_dltddt, 
   gpmb_las_act_by, 
   gpmb_origcrtr, 
   gpmb_origcrtrlogdin, 
   gpmb_las_act_by_logdin, 
   gpmb_univid, 
   gpmb_grp, 
   gpmb_memb, 
   gpmb_id, 
   valid_from, 
   valid_to , 
   gpmb_audid, 
   gpmb_prev_audid, 
   gpmb_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.gpmb_c4c_id,
   :new.gpmb_crtd,
   :new.gpmb_las_act,
   :new.gpmb_las_act_actrtyp,
   :new.gpmb_obj_stt,
   :new.gpmb_vers,
   :new.gpmb_vsbt,
   :new.gpmb_dltddt,
   :new.gpmb_las_act_by,
   :new.gpmb_origcrtr,
   :new.gpmb_origcrtrlogdin,
   :new.gpmb_las_act_by_logdin,
   :new.gpmb_univid,
   :new.gpmb_grp,
   :new.gpmb_memb, 
   :new.gpmb_id, 
   :new.gpmb_las_act_tim, 
   NULL, 
   u_grp_mems.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
97
</td>
<td>
THH_C4C
</td>
<td>
TRG_GPMB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_GRP_MEMS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_gpmb_auditupdate BEFORE
  UPDATE
    ON T_GRP_MEMS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        gpmb_audid
      INTO
        last_audid
      FROM
        a_grp_mems
      WHERE
        gpmb_id            = :old.gpmb_id
      AND gpmb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.gpmb_las_act_tim = :new.gpmb_las_act_tim THEN
      UPDATE
        a_grp_mems
      SET
        gpmb_origcrtr          = :new.gpmb_origcrtr,
        gpmb_origcrtrlogdin    = :new.gpmb_origcrtrlogdin,
        gpmb_las_act_by_logdin = :new.gpmb_las_act_by_logdin,
        gpmb_univid            = :new.gpmb_univid,
        gpmb_grp               = :new.gpmb_grp,
        gpmb_memb              = :new.gpmb_memb,
        classtype              = :new.classtype,
        gpmb_c4c_id            = :new.gpmb_c4c_id,
        gpmb_crtd              = :new.gpmb_crtd,
        gpmb_las_act           = :new.gpmb_las_act,
        gpmb_las_act_actrtyp   = :new.gpmb_las_act_actrtyp,
        gpmb_obj_stt           = :new.gpmb_obj_stt,
        gpmb_vers              = :new.gpmb_vers,
        gpmb_vsbt              = :new.gpmb_vsbt,
        gpmb_dltddt            = :new.gpmb_dltddt,
        gpmb_las_act_by        = :new.gpmb_las_act_by
      WHERE
        gpmb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_grp_mems
        (
          gpmb_origcrtr,
          gpmb_origcrtrlogdin,
          gpmb_las_act_by_logdin,
          gpmb_univid,
          gpmb_grp,
          gpmb_memb,
          classtype,
          gpmb_c4c_id,
          gpmb_crtd,
          gpmb_las_act,
          gpmb_las_act_actrtyp,
          gpmb_obj_stt,
          gpmb_vers,
          gpmb_vsbt,

          gpmb_dltddt,
          gpmb_las_act_by,
          gpmb_id,
          valid_from,
          valid_to,
          gpmb_audid,
          gpmb_prev_audid,
          gpmb_next_audid
        )
        VALUES
        (
          :new.gpmb_origcrtr,
          :new.gpmb_origcrtrlogdin,
          :new.gpmb_las_act_by_logdin,
          :new.gpmb_univid,
          :new.gpmb_grp,
          :new.gpmb_memb,
          :new.classtype,
          :new.gpmb_c4c_id,
          :new.gpmb_crtd,
          :new.gpmb_las_act,
          :new.gpmb_las_act_actrtyp,
          :new.gpmb_obj_stt,
          :new.gpmb_vers,
          :new.gpmb_vsbt,
          :new.gpmb_dltddt,
          :new.gpmb_las_act_by,
          :new.gpmb_id,
          :new.gpmb_las_act_tim,
          NULL,
          u_grp_mems.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_grp_mems
      SET
        valid_to        = :new.gpmb_las_act_tim,
        gpmb_next_audid = u_grp_mems.CURRVAL
      WHERE
        gpmb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
98
</td>
<td>
THH_C4C
</td>
<td>
TRG_IFAX_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ICMGFAX
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ifax_auditinsert BEFORE INSERT ON T_ICMGFAX FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.ifax_crtd IS NULL THEN
    :new.ifax_crtd := curr_date;
  END IF;

  IF :new.ifax_las_act_tim IS NULL THEN
    :new.ifax_las_act_tim := curr_date;
  END IF;

  IF :new.ifax_las_act IS NULL THEN
    :new.ifax_las_act := 1;
  END IF;

  IF :new.ifax_obj_stt IS NULL THEN
    :new.ifax_obj_stt := 1;
  END IF;

  IF :new.ifax_vers IS NULL THEN
    :new.ifax_vers := 0;
  END IF;

  IF :new.ifax_vsbt IS NULL THEN
    :new.ifax_vsbt := 1001;
  END IF;

  IF :new.ifax_las_act_by IS NULL THEN
    :new.ifax_las_act_by := 1;
  END IF;

  IF :new.ifax_origcrtr IS NULL THEN
    :new.ifax_origcrtr := 1;
  END IF;

  IF :new.ifax_origcrtrlogdin IS NULL THEN
    :new.ifax_origcrtrlogdin := 1;
  END IF;

  IF :new.ifax_las_act_by_logdin IS NULL THEN
    :new.ifax_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_icmgfax
  (
   ifax_um_pfngpvdr,
   ifax_um_srvc,
   ifax_membbenspkg,
   ifax_membdgis,
   ifax_membpmrylang,
   ifax_casesrc,
   ifax_caseresn,
   ifax_um_evntsrc,
   ifax_membcnty,
   ifax_membcityor_town,
   ifax_membcnry,
   classtype,
   ifax_c4c_id,
   ifax_crtd,
   ifax_las_act,
   ifax_las_act_actrtyp,
   ifax_obj_stt,
   ifax_vers,
   ifax_vsbt,
   ifax_dltddt,
   ifax_las_act_by,
   ifax_origcrtr,
   ifax_origcrtrlogdin,
   ifax_las_act_by_logdin,
   ifax_univid,
   ifax_cntt,
   ifax_membnam,
   ifax_membssn,
   ifax_membinscnmbr,
   ifax_rtngchce,
   ifax_membgndr,
   ifax_membcitystrg,
   ifax_membcntystrg,
   ifax_membstt_strg,
   ifax_um_evntstts,
   ifax_wkfwistcid,
   ifax_cnv_id,
   ifax_ownrchndflag,
   ifax_ownrchndcnt,
   ifax_sbtd,
   ifax_acpd,
   ifax_affn_um_evntreqt,
   ifax_affn_um_extn,
   ifax_affn_pvdr,
   ifax_affn_cm,
   ifax_affn_memb,
   ifax_affn_um_evnt,
   ifax_rfngwkfwtsk,
   ifax_prvsrfngtsk,
   ifax_prvsrfngtsk_prmn,
   ifax_ownr,
   ifax_prvsownr,
   ifax_prvssndr,
   ifax_prvsownrprmn,
   ifax_tnfr,
   ifax_prvstnfr,
   ifax_acpdby,

ifax_membstt_or_rgn,
   ifax_membinscprsrgrp,
   ifax_casepvdr,
   ifax_rtngrcpt,
   ifax_membpcp,
   ifax_um_rqngpvdr,
   ifax_comment,
   ifax_reason,
   ifax_phone,
   ifax_id,
   valid_from,
   valid_to ,
   ifax_audid,
   ifax_prev_audid,
   ifax_next_audid
  )
  VALUES
  (
   :new.ifax_um_pfngpvdr,
   :new.ifax_um_srvc,
   :new.ifax_membbenspkg,
   :new.ifax_membdgis,
   :new.ifax_membpmrylang,
   :new.ifax_casesrc,
   :new.ifax_caseresn,
   :new.ifax_um_evntsrc,
   :new.ifax_membcnty,
   :new.ifax_membcityor_town,
   :new.ifax_membcnry,
   :new.classtype,
   :new.ifax_c4c_id,
   :new.ifax_crtd,
   :new.ifax_las_act,
   :new.ifax_las_act_actrtyp,
   :new.ifax_obj_stt,
   :new.ifax_vers,
   :new.ifax_vsbt,
   :new.ifax_dltddt,
   :new.ifax_las_act_by,
   :new.ifax_origcrtr,
   :new.ifax_origcrtrlogdin,
   :new.ifax_las_act_by_logdin,
   :new.ifax_univid,
   :new.ifax_cntt,
   :new.ifax_membnam,
   :new.ifax_membssn,
   :new.ifax_membinscnmbr,
   :new.ifax_rtngchce,
   :new.ifax_membgndr,
   :new.ifax_membcitystrg,
   :new.ifax_membcntystrg,
   :new.ifax_membstt_strg,
   :new.ifax_um_evntstts,
   :new.ifax_wkfwistcid,
   :new.ifax_cnv_id,
   :new.ifax_ownrchndflag,
   :new.ifax_ownrchndcnt,
   :new.ifax_sbtd,
   :new.ifax_acpd,
   :new.ifax_affn_um_evntreqt,
   :new.ifax_affn_um_extn,
   :new.ifax_affn_pvdr,
   :new.ifax_affn_cm,
   :new.ifax_affn_memb,
   :new.ifax_affn_um_evnt,
   :new.ifax_rfngwkfwtsk,
   :new.ifax_prvsrfngtsk,
   :new.ifax_prvsrfngtsk_prmn,
   :new.ifax_ownr,
   :new.ifax_prvsownr,
   :new.ifax_prvssndr,
   :new.ifax_prvsownrprmn,
   :new.ifax_tnfr,
   :new.ifax_prvstnfr,
   :new.ifax_acpdby,
   :new.ifax_membstt_or_rgn,
   :new.ifax_membinscprsrgrp,
   :new.ifax_casepvdr,
   :new.ifax_rtngrcpt,
   :new.ifax_membpcp,
   :new.ifax_um_rqngpvdr,
   :new.ifax_comment,
   :new.ifax_reason,
   :new.ifax_phone,
   :new.ifax_id,
   :new.ifax_las_act_tim,
   NULL,
   u_icmgfax.NEXTVAL,
   NULL,
   NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
99
</td>
<td>
THH_C4C
</td>
<td>
TRG_IFAX_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ICMGFAX
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ifax_auditupdate BEFORE
  UPDATE
    ON T_ICMGFAX FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ifax_audid
      INTO
        last_audid
      FROM
        a_icmgfax
      WHERE
        ifax_id            = :old.ifax_id
      AND ifax_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ifax_las_act_tim = :new.ifax_las_act_tim THEN
      UPDATE
        a_icmgfax
      SET
        ifax_membinscprsrgrp   = :new.ifax_membinscprsrgrp,
        ifax_casepvdr          = :new.ifax_casepvdr,
        ifax_rtngrcpt          = :new.ifax_rtngrcpt,
        ifax_membpcp           = :new.ifax_membpcp,
        ifax_um_rqngpvdr       = :new.ifax_um_rqngpvdr,
        ifax_um_pfngpvdr       = :new.ifax_um_pfngpvdr,
        ifax_um_srvc           = :new.ifax_um_srvc,
        ifax_membbenspkg       = :new.ifax_membbenspkg,
        ifax_membdgis          = :new.ifax_membdgis,
        ifax_membpmrylang      = :new.ifax_membpmrylang,
        ifax_casesrc           = :new.ifax_casesrc,
        ifax_caseresn          = :new.ifax_caseresn,
        ifax_um_evntsrc        = :new.ifax_um_evntsrc,
        ifax_membcnty          = :new.ifax_membcnty,
        ifax_membcityor_town   = :new.ifax_membcityor_town,
        ifax_membcnry          = :new.ifax_membcnry,
        classtype              = :new.classtype,
        ifax_c4c_id            = :new.ifax_c4c_id,
        ifax_crtd              = :new.ifax_crtd,
        ifax_las_act           = :new.ifax_las_act,
        ifax_las_act_actrtyp   = :new.ifax_las_act_actrtyp,
        ifax_obj_stt           = :new.ifax_obj_stt,
        ifax_vers              = :new.ifax_vers,
        ifax_vsbt              = :new.ifax_vsbt,
        ifax_dltddt            = :new.ifax_dltddt,
        ifax_las_act_by        = :new.ifax_las_act_by,
        ifax_origcrtr
        = :new.ifax_origcrtr,
        ifax_origcrtrlogdin    = :new.ifax_origcrtrlogdin,
        ifax_las_act_by_logdin = :new.ifax_las_act_by_logdin,
        ifax_univid            = :new.ifax_univid,
        ifax_cntt              = :new.ifax_cntt,
        ifax_membnam           = :new.ifax_membnam,
        ifax_membssn           = :new.ifax_membssn,
        ifax_membinscnmbr      = :new.ifax_membinscnmbr,
        ifax_rtngchce          = :new.ifax_rtngchce,
        ifax_membgndr          = :new.ifax_membgndr,
        ifax_membcitystrg      = :new.ifax_membcitystrg,
        ifax_membcntystrg      = :new.ifax_membcntystrg,
        ifax_membstt_strg      = :new.ifax_membstt_strg,
        ifax_um_evntstts       = :new.ifax_um_evntstts,
        ifax_wkfwistcid        = :new.ifax_wkfwistcid,
        ifax_cnv_id            = :new.ifax_cnv_id,
        ifax_ownrchndflag      = :new.ifax_ownrchndflag,
        ifax_ownrchndcnt       = :new.ifax_ownrchndcnt,
        ifax_sbtd              = :new.ifax_sbtd,
        ifax_acpd              = :new.ifax_acpd,
        ifax_affn_um_evntreqt  = :new.ifax_affn_um_evntreqt,
        ifax_affn_um_extn      = :new.ifax_affn_um_extn,
        ifax_affn_pvdr         = :new.ifax_affn_pvdr,
        ifax_affn_cm           = :new.ifax_affn_cm,
        ifax_affn_memb         = :new.ifax_affn_memb,
        ifax_affn_um_evnt      = :new.ifax_affn_um_evnt,
        ifax_rfngwkfwtsk       = :new.ifax_rfngwkfwtsk,
        ifax_prvsrfngtsk       = :new.ifax_prvsrfngtsk,
        ifax_prvsrfngtsk_prmn  = :new.ifax_prvsrfngtsk_prmn,
        ifax_ownr              = :new.ifax_ownr,
        ifax_prvsownr          = :new.ifax_prvsownr,
        ifax_prvssndr          = :new.ifax_prvssndr,
        ifax_prvsownrprmn      = :new.ifax_prvsownrprmn,
        ifax_tnfr              = :new.ifax_tnfr,
        ifax_prvstnfr          = :new.ifax_prvstnfr,
        ifax_acpdby            = :new.ifax_acpdby,
        ifax_membstt_or_rgn    = :new.ifax_membstt_or_rgn,

  ifax_reason            = :new.ifax_reason,
        ifax_comment           = :new.ifax_comment,
        ifax_phone             = :new.ifax_phone
      WHERE
        ifax_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_icmgfax
        (
          ifax_membinscprsrgrp,
          ifax_casepvdr,
          ifax_rtngrcpt,
          ifax_membpcp,
          ifax_um_rqngpvdr,
          ifax_um_pfngpvdr,
          ifax_um_srvc,
          ifax_membbenspkg,
          ifax_membdgis,
          ifax_membpmrylang,
          ifax_casesrc,
          ifax_caseresn,
          ifax_um_evntsrc,
          ifax_membcnty,
          ifax_membcityor_town,
          ifax_membcnry,
          classtype,
          ifax_c4c_id,
          ifax_crtd,
          ifax_las_act,
          ifax_las_act_actrtyp,
          ifax_obj_stt,
          ifax_vers,
          ifax_vsbt,
          ifax_dltddt,
          ifax_las_act_by,
          ifax_origcrtr,
          ifax_origcrtrlogdin,
          ifax_las_act_by_logdin,
          ifax_univid,
          ifax_cntt,
          ifax_membnam,
          ifax_membssn,
          ifax_membinscnmbr,
          ifax_rtngchce,
          ifax_membgndr,
          ifax_membcitystrg,
          ifax_membcntystrg,
          ifax_membstt_strg,
          ifax_um_evntstts,
          ifax_wkfwistcid,
          ifax_cnv_id,
          ifax_ownrchndflag,
          ifax_ownrchndcnt,
          ifax_sbtd,
          ifax_acpd,
          ifax_affn_um_evntreqt,
          ifax_affn_um_extn,
          ifax_affn_pvdr,
          ifax_affn_cm,
          ifax_affn_memb,
          ifax_affn_um_evnt,
          ifax_rfngwkfwtsk,
          ifax_prvsrfngtsk,
          ifax_prvsrfngtsk_prmn,
          ifax_ownr,
          ifax_prvsownr,
          ifax_prvssndr,
          ifax_prvsownrprmn,
          ifax_tnfr,
          ifax_prvstnfr,
          ifax_acpdby,

 ifax_membstt_or_rgn,
          ifax_reason,
          ifax_comment,
          ifax_phone,
          ifax_id,
          valid_from,
          valid_to,
          ifax_audid,
          ifax_prev_audid,
          ifax_next_audid
        )
        VALUES
        (
          :new.ifax_membinscprsrgrp,
          :new.ifax_casepvdr,
          :new.ifax_rtngrcpt,
          :new.ifax_membpcp,
          :new.ifax_um_rqngpvdr,
          :new.ifax_um_pfngpvdr,
          :new.ifax_um_srvc,
          :new.ifax_membbenspkg,
          :new.ifax_membdgis,
          :new.ifax_membpmrylang,
          :new.ifax_casesrc,
          :new.ifax_caseresn,
          :new.ifax_um_evntsrc,
          :new.ifax_membcnty,
          :new.ifax_membcityor_town,
          :new.ifax_membcnry,
          :new.classtype,
          :new.ifax_c4c_id,
          :new.ifax_crtd,
          :new.ifax_las_act,
          :new.ifax_las_act_actrtyp,
          :new.ifax_obj_stt,
          :new.ifax_vers,
          :new.ifax_vsbt,
          :new.ifax_dltddt,
          :new.ifax_las_act_by,
          :new.ifax_origcrtr,
          :new.ifax_origcrtrlogdin,
          :new.ifax_las_act_by_logdin,
          :new.ifax_univid,
          :new.ifax_cntt,
          :new.ifax_membnam,
          :new.ifax_membssn,
          :new.ifax_membinscnmbr,
          :new.ifax_rtngchce,
          :new.ifax_membgndr,
          :new.ifax_membcitystrg,
          :new.ifax_membcntystrg,
          :new.ifax_membstt_strg,
          :new.ifax_um_evntstts,
          :new.ifax_wkfwistcid,
          :new.ifax_cnv_id,
          :new.ifax_ownrchndflag,
          :new.ifax_ownrchndcnt,
          :new.ifax_sbtd,
          :new.ifax_acpd,
          :new.ifax_affn_um_evntreqt,
          :new.ifax_affn_um_extn,
          :new.ifax_affn_pvdr,
          :new.ifax_affn_cm,
          :new.ifax_affn_memb,
          :new.ifax_affn_um_evnt,
          :new.ifax_rfngwkfwtsk,
          :new.ifax_prvsrfngtsk,
          :new.ifax_prvsrfngtsk_prmn,
          :new.ifax
_ownr,
          :new.ifax_prvsownr,
          :new.ifax_prvssndr,
          :new.ifax_prvsownrprmn,
          :new.ifax_tnfr,
          :new.ifax_prvstnfr,
          :new.ifax_acpdby,
          :new.ifax_membstt_or_rgn,
          :new.ifax_reason,
          :new.ifax_comment,
          :new.ifax_phone,
          :new.ifax_id,
          :new.ifax_las_act_tim,
          NULL,
          u_icmgfax.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit records valid_to to new LastActionTime
      and next audit ID to newly inserted records sequence number
      */
      UPDATE
        a_icmgfax
      SET
        valid_to        = :new.ifax_las_act_tim,
        ifax_next_audid = u_icmgfax.CURRVAL
      WHERE
        ifax_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
100
</td>
<td>
THH_C4C
</td>
<td>
TRG_LICL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LCNSLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LICL_AUDITINSERT&quot; BEFORE INSERT ON T_LCNSLIST FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.licl_crtd IS NULL THEN 
    :new.licl_crtd := curr_date; 
  END IF; 

  IF :new.licl_las_act_tim IS NULL THEN 
    :new.licl_las_act_tim := curr_date; 
  END IF; 

  IF :new.licl_las_act IS NULL THEN 
    :new.licl_las_act := 1; 
  END IF; 

  IF :new.licl_obj_stt IS NULL THEN 
    :new.licl_obj_stt := 1; 
  END IF; 

  IF :new.licl_vers IS NULL THEN 
    :new.licl_vers := 0; 
  END IF; 

  IF :new.licl_vsbt IS NULL THEN 
    :new.licl_vsbt := 1001; 
  END IF; 

  IF :new.licl_las_act_by IS NULL THEN 
    :new.licl_las_act_by := 1; 
  END IF; 

  IF :new.licl_origcrtr IS NULL THEN 
    :new.licl_origcrtr := 1; 
  END IF; 

  IF :new.licl_origcrtrlogdin IS NULL THEN 
    :new.licl_origcrtrlogdin := 1; 
  END IF; 

  IF :new.licl_las_act_by_logdin IS NULL THEN 
    :new.licl_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_lcnslist 
  ( 
   classtype, 
   licl_c4c_id, 
   licl_crtd, 
   licl_las_act, 
   licl_las_act_actrtyp, 
   licl_obj_stt, 
   licl_vers, 
   licl_vsbt, 
   licl_dltddt, 
   licl_las_act_by, 
   licl_origcrtr, 
   licl_origcrtrlogdin, 
   licl_las_act_by_logdin, 
   licl_univid, 
   licl_lic_nmbr, 
   licl_exp_dt, 
   licl_prf_of_lic, 
   licl_stt_of_ince, 
   licl_lic_typ, 
   licl_payr, 
   licl_pvdr, 
   licl_id, 
   valid_from, 
   valid_to , 
   licl_audid, 
   licl_prev_audid, 
   licl_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.licl_c4c_id,
   :new.licl_crtd,
   :new.licl_las_act,
   :new.licl_las_act_actrtyp,
   :new.licl_obj_stt,
   :new.licl_vers,
   :new.licl_vsbt,
   :new.licl_dltddt,
   :new.licl_las_act_by,
   :new.licl_origcrtr,
   :new.licl_origcrtrlogdin,
   :new.licl_las_act_by_logdin,
   :new.licl_univid,
   :new.licl_lic_nmbr,
   :new.licl_exp_dt,
   :new.licl_prf_of_lic,
   :new.licl_stt_of_ince,
   :new.licl_lic_typ,
   :new.licl_payr,
   :new.licl_pvdr, 
   :new.licl_id, 
   :new.licl_las_act_tim, 
   NULL, 

u_lcnslist.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
101
</td>
<td>
THH_C4C
</td>
<td>
TRG_LICL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LCNSLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_licl_auditupdate BEFORE
  UPDATE
    ON T_LCNSLIST FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        licl_audid
      INTO
        last_audid
      FROM
        a_lcnslist
      WHERE
        licl_id            = :old.licl_id
      AND licl_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.licl_las_act_tim = :new.licl_las_act_tim THEN
      UPDATE
        a_lcnslist
      SET
        classtype              = :new.classtype,
        licl_c4c_id            = :new.licl_c4c_id,
        licl_crtd              = :new.licl_crtd,
        licl_las_act           = :new.licl_las_act,
        licl_las_act_actrtyp   = :new.licl_las_act_actrtyp,
        licl_obj_stt           = :new.licl_obj_stt,
        licl_vers              = :new.licl_vers,
        licl_vsbt              = :new.licl_vsbt,
        licl_dltddt            = :new.licl_dltddt,
        licl_las_act_by        = :new.licl_las_act_by,
        licl_origcrtr          = :new.licl_origcrtr,
        licl_origcrtrlogdin    = :new.licl_origcrtrlogdin,
        licl_las_act_by_logdin = :new.licl_las_act_by_logdin,
        licl_univid            = :new.licl_univid,
        licl_lic_nmbr          = :new.licl_lic_nmbr,
        licl_exp_dt            = :new.licl_exp_dt,
        licl_prf_of_lic        = :new.licl_prf_of_lic,
        licl_stt_of_ince       = :new.licl_stt_of_ince,
        licl_lic_typ           = :new.licl_lic_typ,
        licl_payr              = :new.licl_payr,
        licl_pvdr              = :new.licl_pvdr
      WHERE
        licl_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_lcnslist
        (
          classtype,
          licl_c4c_id,
          licl_crtd,

  licl_las_act,
          licl_las_act_actrtyp,
          licl_obj_stt,
          licl_vers,
          licl_vsbt,
          licl_dltddt,
          licl_las_act_by,
          licl_origcrtr,
          licl_origcrtrlogdin,
          licl_las_act_by_logdin,
          licl_univid,
          licl_lic_nmbr,
          licl_exp_dt,
          licl_prf_of_lic,
          licl_stt_of_ince,
          licl_lic_typ,
          licl_payr,
          licl_pvdr,
          licl_id,
          valid_from,
          valid_to,
          licl_audid,
          licl_prev_audid,
          licl_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.licl_c4c_id,
          :new.licl_crtd,
          :new.licl_las_act,
          :new.licl_las_act_actrtyp,
          :new.licl_obj_stt,
          :new.licl_vers,
          :new.licl_vsbt,
          :new.licl_dltddt,
          :new.licl_las_act_by,
          :new.licl_origcrtr,
          :new.licl_origcrtrlogdin,
          :new.licl_las_act_by_logdin,
          :new.licl_univid,
          :new.licl_lic_nmbr,
          :new.licl_exp_dt,
          :new.licl_prf_of_lic,
          :new.licl_stt_of_ince,
          :new.licl_lic_typ,
          :new.licl_payr,
          :new.licl_pvdr,
          :new.licl_id,
          :new.licl_las_act_tim,
          NULL,
          u_lcnslist.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_lcnslist
      SET
        valid_to        = :new.licl_las_act_tim,
        licl_next_audid = u_lcnslist.CURRVAL
      WHERE
        licl_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
102
</td>
<td>
THH_C4C
</td>
<td>
TRG_LLT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LNGSLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LLT_AUDITINSERT&quot; BEFORE INSERT ON T_LNGSLIST FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.llt_crtd IS NULL THEN 
    :new.llt_crtd := curr_date; 
  END IF; 

  IF :new.llt_las_act_tim IS NULL THEN 
    :new.llt_las_act_tim := curr_date; 
  END IF; 

  IF :new.llt_las_act IS NULL THEN 
    :new.llt_las_act := 1; 
  END IF; 

  IF :new.llt_obj_stt IS NULL THEN 
    :new.llt_obj_stt := 1; 
  END IF; 

  IF :new.llt_vers IS NULL THEN 
    :new.llt_vers := 0; 
  END IF; 

  IF :new.llt_vsbt IS NULL THEN 
    :new.llt_vsbt := 1001; 
  END IF; 

  IF :new.llt_las_act_by IS NULL THEN 
    :new.llt_las_act_by := 1; 
  END IF; 

  IF :new.llt_origcrtr IS NULL THEN 
    :new.llt_origcrtr := 1; 
  END IF; 

  IF :new.llt_origcrtrlogdin IS NULL THEN 
    :new.llt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.llt_las_act_by_logdin IS NULL THEN 
    :new.llt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_lngslist 
  ( 
   classtype, 
   llt_c4c_id, 
   llt_crtd, 
   llt_las_act, 
   llt_las_act_actrtyp, 
   llt_obj_stt, 
   llt_vers, 
   llt_vsbt, 
   llt_dltddt, 
   llt_las_act_by, 
   llt_origcrtr, 
   llt_origcrtrlogdin, 
   llt_las_act_by_logdin, 
   llt_univid, 
   llt_prcycode, 
   llt_langcode, 
   llt_usr_lngs, 
   llt_id, 
   valid_from, 
   valid_to , 
   llt_audid, 
   llt_prev_audid, 
   llt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.llt_c4c_id,
   :new.llt_crtd,
   :new.llt_las_act,
   :new.llt_las_act_actrtyp,
   :new.llt_obj_stt,
   :new.llt_vers,
   :new.llt_vsbt,
   :new.llt_dltddt,
   :new.llt_las_act_by,
   :new.llt_origcrtr,
   :new.llt_origcrtrlogdin,
   :new.llt_las_act_by_logdin,
   :new.llt_univid,
   :new.llt_prcycode,
   :new.llt_langcode,
   :new.llt_usr_lngs, 
   :new.llt_id, 
   :new.llt_las_act_tim, 
   NULL, 
   u_lngslist.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
103
</td>
<td>
THH_C4C
</td>
<td>
TRG_LLT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LNGSLIST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_llt_auditupdate BEFORE
  UPDATE
    ON T_LNGSLIST FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        llt_audid
      INTO
        last_audid
      FROM
        a_lngslist
      WHERE
        llt_id            = :old.llt_id
      AND llt_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.llt_las_act_tim = :new.llt_las_act_tim THEN
      UPDATE
        a_lngslist
      SET
        classtype             = :new.classtype,
        llt_c4c_id            = :new.llt_c4c_id,
        llt_crtd              = :new.llt_crtd,
        llt_las_act           = :new.llt_las_act,
        llt_las_act_actrtyp   = :new.llt_las_act_actrtyp,
        llt_obj_stt           = :new.llt_obj_stt,
        llt_vers              = :new.llt_vers,
        llt_vsbt              = :new.llt_vsbt,
        llt_dltddt            = :new.llt_dltddt,
        llt_las_act_by        = :new.llt_las_act_by,
        llt_origcrtr          = :new.llt_origcrtr,
        llt_origcrtrlogdin    = :new.llt_origcrtrlogdin,
        llt_las_act_by_logdin = :new.llt_las_act_by_logdin,
        llt_univid            = :new.llt_univid,
        llt_prcycode          = :new.llt_prcycode,
        llt_langcode          = :new.llt_langcode,
        llt_usr_lngs          = :new.llt_usr_lngs
      WHERE
        llt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_lngslist
        (
          classtype,
          llt_c4c_id,
          llt_crtd,
          llt_las_act,
          llt_las_act_actrtyp,
          llt_obj_stt,
          llt_vers,
          llt_vsbt,
          llt_dltddt,
          llt_las_act_by,
          llt_origcrtr,
          llt_origcrtrlogdin,
          llt_las_act_by_logdin,

     llt_univid,
          llt_prcycode,
          llt_langcode,
          llt_usr_lngs,
          llt_id,
          valid_from,
          valid_to,
          llt_audid,
          llt_prev_audid,
          llt_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.llt_c4c_id,
          :new.llt_crtd,
          :new.llt_las_act,
          :new.llt_las_act_actrtyp,
          :new.llt_obj_stt,
          :new.llt_vers,
          :new.llt_vsbt,
          :new.llt_dltddt,
          :new.llt_las_act_by,
          :new.llt_origcrtr,
          :new.llt_origcrtrlogdin,
          :new.llt_las_act_by_logdin,
          :new.llt_univid,
          :new.llt_prcycode,
          :new.llt_langcode,
          :new.llt_usr_lngs,
          :new.llt_id,
          :new.llt_las_act_tim,
          NULL,
          u_lngslist.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_lngslist
      SET
        valid_to       = :new.llt_las_act_tim,
        llt_next_audid = u_lngslist.CURRVAL
      WHERE
        llt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
104
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTHD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_HEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LTHD_AUDITINSERT&quot; BEFORE INSERT ON T_LTR_HEAD FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.lthd_crtd IS NULL THEN 
    :new.lthd_crtd := curr_date; 
  END IF; 

  IF :new.lthd_las_act_tim IS NULL THEN 
    :new.lthd_las_act_tim := curr_date; 
  END IF; 

  IF :new.lthd_las_act IS NULL THEN 
    :new.lthd_las_act := 1; 
  END IF; 

  IF :new.lthd_obj_stt IS NULL THEN 
    :new.lthd_obj_stt := 1; 
  END IF; 

  IF :new.lthd_vers IS NULL THEN 
    :new.lthd_vers := 0; 
  END IF; 

  IF :new.lthd_vsbt IS NULL THEN 
    :new.lthd_vsbt := 1001; 
  END IF; 

  IF :new.lthd_las_act_by IS NULL THEN 
    :new.lthd_las_act_by := 1; 
  END IF; 

  IF :new.lthd_origcrtr IS NULL THEN 
    :new.lthd_origcrtr := 1; 
  END IF; 

  IF :new.lthd_origcrtrlogdin IS NULL THEN 
    :new.lthd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.lthd_las_act_by_logdin IS NULL THEN 
    :new.lthd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ltr_head 
  ( 
   lthd_las_sbtdat, 
   lthd_wkfwistcid, 
   lthd_cnv_id, 
   lthd_ownrchndflag, 
   lthd_ownrchndcnt, 
   lthd_dvtndt, 
   lthd_cmmt, 
   lhfl_cntt_contltrh, 
   lhfl_cntt_contimg, 
   lhfl_cntt_hght, 
   lhfl_cntt_wdth, 
   lhfl_cntt_top_mrgn, 
   lhfl_cntt_bttmmrgn, 
   lhfl_cntt_leftmrgn, 
   lhfl_cntt_rghtmrgn, 
   lhfl_cntt_nam, 
   lhfl_cntt_dat1, 
   lhfl_cntt_dat2, 
   lhfl_cntt_pagesiz, 
   lhfl_id, 
   lthd_las_dctdby, 
   lthd_frstatvdby, 
   lthd_las_atvdby, 
   lthd_ratnapvl, 
   lthd_apvl, 
   lthd_rcpttrkg, 
   lthd_las_sbtdby, 
   lthd_frstsbtdby, 
   lthd_rfngwkfwtsk, 
   lthd_prvsrfngtsk, 
   lthd_prvsrfngtsk_prmn, 
   lthd_ownr, 
   lthd_prvsownr, 
   lthd_prvssndr, 
   lthd_prvsownrprmn, 
   lthd_tnfr, 
   lthd_prvstnfr, 
   lhfl_cntt_cntt, 
   lthd_typ_sbty, 
   classtype, 
   lthd_c4c_id, 
   lthd_crtd, 
   lthd_las_act, 
   lthd_las_act_actrtyp, 
   lthd_obj_stt, 
   lthd_vers, 
   lthd_vsbt, 
   lthd_dltddt, 
   lthd_las_act_by, 
   lthd_origcrtr, 
   lthd_origcrtrlogdin, 
   lthd_las_act_by_logdin, 
   lthd_
univid, 
   lthd_nam, 
   lthd_prus, 
   lthd_frstatvd, 
   lthd_las_atvd, 
   lthd_las_dctd, 
   lthd_frstsbtdat, 
   lthd_id, 
   valid_from, 
   valid_to , 
   lthd_audid, 
   lthd_prev_audid, 
   lthd_next_audid
  ) 
  VALUES 
  ( 
   :new.lthd_las_sbtdat,
   :new.lthd_wkfwistcid,
   :new.lthd_cnv_id,
   :new.lthd_ownrchndflag,
   :new.lthd_ownrchndcnt,
   :new.lthd_dvtndt,
   :new.lthd_cmmt,
   :new.lhfl_cntt_contltrh,
   :new.lhfl_cntt_contimg,
   :new.lhfl_cntt_hght,
   :new.lhfl_cntt_wdth,
   :new.lhfl_cntt_top_mrgn,
   :new.lhfl_cntt_bttmmrgn,
   :new.lhfl_cntt_leftmrgn,
   :new.lhfl_cntt_rghtmrgn,
   :new.lhfl_cntt_nam,
   :new.lhfl_cntt_dat1,
   :new.lhfl_cntt_dat2,
   :new.lhfl_cntt_pagesiz,
   :new.lhfl_id,
   :new.lthd_las_dctdby,
   :new.lthd_frstatvdby,
   :new.lthd_las_atvdby,
   :new.lthd_ratnapvl,
   :new.lthd_apvl,
   :new.lthd_rcpttrkg,
   :new.lthd_las_sbtdby,
   :new.lthd_frstsbtdby,
   :new.lthd_rfngwkfwtsk,
   :new.lthd_prvsrfngtsk,
   :new.lthd_prvsrfngtsk_prmn,
   :new.lthd_ownr,
   :new.lthd_prvsownr,
   :new.lthd_prvssndr,
   :new.lthd_prvsownrprmn,
   :new.lthd_tnfr,
   :new.lthd_prvstnfr,
   :new.lhfl_cntt_cntt,
   :new.lthd_typ_sbty,
   :new.classtype,
   :new.lthd_c4c_id,
   :new.lthd_crtd,
   :new.lthd_las_act,
   :new.lthd_las_act_actrtyp,
   :new.lthd_obj_stt,
   :new.lthd_vers,
   :new.lthd_vsbt,
   :new.lthd_dltddt,
   :new.lthd_las_act_by,
   :new.lthd_origcrtr,
   :new.lthd_origcrtrlogdin,
   :new.lthd_las_act_by_logdin,
   :new.lthd_univid,
   :new.lthd_nam,
   :new.lthd_prus,
   :new.lthd_frstatvd,
   :new.lthd_las_atvd,
   :new.lthd_las_dctd,
   :new.lthd_frstsbtdat, 
   :new.lthd_id, 
   :new.lthd_las_act_tim, 
   NULL, 
   u_ltr_head.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
105
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTHD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_HEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_lthd_auditupdate BEFORE
  UPDATE
    ON T_LTR_HEAD FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        lthd_audid
      INTO
        last_audid
      FROM
        a_ltr_head
      WHERE
        lthd_id            = :old.lthd_id
      AND lthd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.lthd_las_act_tim = :new.lthd_las_act_tim THEN
      UPDATE
        a_ltr_head
      SET
        lhfl_cntt_dat1         = :new.lhfl_cntt_dat1,
        lhfl_cntt_dat2         = :new.lhfl_cntt_dat2,
        lhfl_cntt_pagesiz      = :new.lhfl_cntt_pagesiz,
        lhfl_id                = :new.lhfl_id,
        lthd_las_dctdby        = :new.lthd_las_dctdby,
        lthd_frstatvdby        = :new.lthd_frstatvdby,
        lthd_las_atvdby        = :new.lthd_las_atvdby,
        lthd_ratnapvl          = :new.lthd_ratnapvl,
        lthd_apvl              = :new.lthd_apvl,
        lthd_rcpttrkg          = :new.lthd_rcpttrkg,
        lthd_las_sbtdby        = :new.lthd_las_sbtdby,
        lthd_frstsbtdby        = :new.lthd_frstsbtdby,
        lthd_rfngwkfwtsk       = :new.lthd_rfngwkfwtsk,
        lthd_prvsrfngtsk       = :new.lthd_prvsrfngtsk,
        lthd_prvsrfngtsk_prmn  = :new.lthd_prvsrfngtsk_prmn,
        lthd_ownr              = :new.lthd_ownr,
        lthd_prvsownr          = :new.lthd_prvsownr,
        lthd_prvssndr          = :new.lthd_prvssndr,
        lthd_prvsownrprmn      = :new.lthd_prvsownrprmn,
        lthd_tnfr              = :new.lthd_tnfr,
        lthd_prvstnfr          = :new.lthd_prvstnfr,
        lhfl_cntt_cntt         = :new.lhfl_cntt_cntt,
        lthd_typ_sbty          = :new.lthd_typ_sbty,
        classtype              = :new.classtype,
        lthd_c4c_id            = :new.lthd_c4c_id,
        lthd_crtd              = :new.lthd_crtd,
        lthd_las_act
    = :new.lthd_las_act,
        lthd_las_act_actrtyp   = :new.lthd_las_act_actrtyp,
        lthd_obj_stt           = :new.lthd_obj_stt,
        lthd_vers              = :new.lthd_vers,
        lthd_vsbt              = :new.lthd_vsbt,
        lthd_dltddt            = :new.lthd_dltddt,
        lthd_las_act_by        = :new.lthd_las_act_by,
        lthd_origcrtr          = :new.lthd_origcrtr,
        lthd_origcrtrlogdin    = :new.lthd_origcrtrlogdin,
        lthd_las_act_by_logdin = :new.lthd_las_act_by_logdin,
        lthd_univid            = :new.lthd_univid,
        lthd_nam               = :new.lthd_nam,
        lthd_prus              = :new.lthd_prus,
        lthd_frstatvd          = :new.lthd_frstatvd,
        lthd_las_atvd          = :new.lthd_las_atvd,
        lthd_las_dctd          = :new.lthd_las_dctd,
        lthd_frstsbtdat        = :new.lthd_frstsbtdat,
        lthd_las_sbtdat        = :new.lthd_las_sbtdat,
        lthd_wkfwistcid        = :new.lthd_wkfwistcid,
        lthd_cnv_id            = :new.lthd_cnv_id,
        lthd_ownrchndflag      = :new.lthd_ownrchndflag,
        lthd_ownrchndcnt       = :new.lthd_ownrchndcnt,
        lthd_dvtndt            = :new.lthd_dvtndt,
        lthd_cmmt              = :new.lthd_cmmt,
        lhfl_cntt_contltrh     = :new.lhfl_cntt_contltrh,
        lhfl_cntt_contimg      = :new.lhfl_cntt_contimg,
        lhfl_cntt_hght         = :new.lhfl_cntt_hght,
        lhfl_cntt_wdth         = :new.lhfl_cntt_wdth,
        lhfl_cntt_top_mrgn     = :new.lhfl_cntt_top_mrgn,
        lhfl_cntt_bttmmrgn     = :new.lhfl_cntt_bttmmrgn,
        lhfl_cntt_leftmrgn     = :new.lhfl_cntt_leftmrgn,
        lhfl_cntt_rghtmrgn     = :new.lhfl_cntt_rghtmrgn,
        lhfl_cntt_nam          = :new.lhfl_cntt_nam
      WHERE
        lthd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ltr_head
        (

 lhfl_cntt_dat1,
          lhfl_cntt_dat2,
          lhfl_cntt_pagesiz,
          lhfl_id,
          lthd_las_dctdby,
          lthd_frstatvdby,
          lthd_las_atvdby,
          lthd_ratnapvl,
          lthd_apvl,
          lthd_rcpttrkg,
          lthd_las_sbtdby,
          lthd_frstsbtdby,
          lthd_rfngwkfwtsk,
          lthd_prvsrfngtsk,
          lthd_prvsrfngtsk_prmn,
          lthd_ownr,
          lthd_prvsownr,
          lthd_prvssndr,
          lthd_prvsownrprmn,
          lthd_tnfr,
          lthd_prvstnfr,
          lhfl_cntt_cntt,
          lthd_typ_sbty,
          classtype,
          lthd_c4c_id,
          lthd_crtd,
          lthd_las_act,
          lthd_las_act_actrtyp,
          lthd_obj_stt,
          lthd_vers,
          lthd_vsbt,
          lthd_dltddt,
          lthd_las_act_by,
          lthd_origcrtr,
          lthd_origcrtrlogdin,
          lthd_las_act_by_logdin,
          lthd_univid,
          lthd_nam,
          lthd_prus,
          lthd_frstatvd,
          lthd_las_atvd,
          lthd_las_dctd,
          lthd_frstsbtdat,
          lthd_las_sbtdat,
          lthd_wkfwistcid,
          lthd_cnv_id,
          lthd_ownrchndflag,
          lthd_ownrchndcnt,
          lthd_dvtndt,
          lthd_cmmt,
          lhfl_cntt_contltrh,
          lhfl_cntt_contimg,
          lhfl_cntt_hght,
          lhfl_cntt_wdth,
          lhfl_cntt_top_mrgn,
          lhfl_cntt_bttmmrgn,
          lhfl_cntt_leftmrgn,
          lhfl_cntt_rghtmrgn,
          lhfl_cntt_nam,
          lthd_id,
          valid_from,
          valid_to,
          lthd_audid,
          lthd_prev_audid,
          lthd_next_audid
        )
        VALUES
        (
          :new.lhfl_cntt_dat1,
          :new.lhfl_cntt_dat2,
          :new.lhfl_cntt_pagesiz,
          :new.lhfl_id,
          :new.lthd_las_dctdby,
          :new.lthd_frstatvdby,
          :new.lthd_las_atvdby,
          :new.lthd_ratnapvl,
          :new.lthd_apvl,
          :new.lthd_rcpttrkg,
          :new.lt
hd_las_sbtdby,
          :new.lthd_frstsbtdby,
          :new.lthd_rfngwkfwtsk,
          :new.lthd_prvsrfngtsk,
          :new.lthd_prvsrfngtsk_prmn,
          :new.lthd_ownr,
          :new.lthd_prvsownr,
          :new.lthd_prvssndr,
          :new.lthd_prvsownrprmn,
          :new.lthd_tnfr,
          :new.lthd_prvstnfr,
          :new.lhfl_cntt_cntt,
          :new.lthd_typ_sbty,
          :new.classtype,
          :new.lthd_c4c_id,
          :new.lthd_crtd,
          :new.lthd_las_act,
          :new.lthd_las_act_actrtyp,
          :new.lthd_obj_stt,
          :new.lthd_vers,
          :new.lthd_vsbt,
          :new.lthd_dltddt,
          :new.lthd_las_act_by,
          :new.lthd_origcrtr,
          :new.lthd_origcrtrlogdin,
          :new.lthd_las_act_by_logdin,
          :new.lthd_univid,
          :new.lthd_nam,
          :new.lthd_prus,
          :new.lthd_frstatvd,
          :new.lthd_las_atvd,
          :new.lthd_las_dctd,
          :new.lthd_frstsbtdat,
          :new.lthd_las_sbtdat,
          :new.lthd_wkfwistcid,
          :new.lthd_cnv_id,
          :new.lthd_ownrchndflag,
          :new.lthd_ownrchndcnt,
          :new.lthd_dvtndt,
          :new.lthd_cmmt,
          :new.lhfl_cntt_contltrh,
          :new.lhfl_cntt_contimg,
          :new.lhfl_cntt_hght,
          :new.lhfl_cntt_wdth,
          :new.lhfl_cntt_top_mrgn,
          :new.lhfl_cntt_bttmmrgn,
          :new.lhfl_cntt_leftmrgn,
          :new.lhfl_cntt_rghtmrgn,
          :new.lhfl_cntt_nam,
          :new.lthd_id,
          :new.lthd_las_act_tim,
          NULL,
          u_ltr_head.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ltr_head
      SET
        valid_to        = :new.lthd_las_act_tim,
        lthd_next_audid = u_ltr_head.CURRVAL
      WHERE
        lthd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
106
</td>
<td>
THH_C4C
</td>
<td>
TRG_LRCP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_RCPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_lrcp_auditinsert BEFORE INSERT ON T_LTR_RCPT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.lrcp_crtd IS NULL THEN
    :new.lrcp_crtd := curr_date;
  END IF;

  IF :new.lrcp_las_act_tim IS NULL THEN
    :new.lrcp_las_act_tim := curr_date;
  END IF;

  IF :new.lrcp_las_act IS NULL THEN
    :new.lrcp_las_act := 1;
  END IF;

  IF :new.lrcp_obj_stt IS NULL THEN
    :new.lrcp_obj_stt := 1;
  END IF;

  IF :new.lrcp_vers IS NULL THEN
    :new.lrcp_vers := 0;
  END IF;

  IF :new.lrcp_vsbt IS NULL THEN
    :new.lrcp_vsbt := 1001;
  END IF;

  IF :new.lrcp_las_act_by IS NULL THEN
    :new.lrcp_las_act_by := 1;
  END IF;

  IF :new.lrcp_origcrtr IS NULL THEN
    :new.lrcp_origcrtr := 1;
  END IF;

  IF :new.lrcp_origcrtrlogdin IS NULL THEN
    :new.lrcp_origcrtrlogdin := 1;
  END IF;

  IF :new.lrcp_las_act_by_logdin IS NULL THEN
    :new.lrcp_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_ltr_rcpt
  (
   lrcp_cfrdltr_to,
   lrcp_cfrdltr_cc,
   lrcp_dfltrcpt,
   classtype,
   lrcp_c4c_id,
   lrcp_crtd,
   lrcp_las_act,
   lrcp_las_act_actrtyp,
   lrcp_obj_stt,
   lrcp_vers,
   lrcp_vsbt,
   lrcp_dltddt,
   lrcp_las_act_by,
   lrcp_origcrtr,
   lrcp_origcrtrlogdin,
   lrcp_las_act_by_logdin,
   lrcp_univid,
   lrcp_fax,
   lrcp_emal,
   lrcp_frstnam,
   lrcp_mdlenam,
   lrcp_las_nam,
   lrcp_streadd1,
   lrcp_streadd2,
   lrcp_streadd3,
   lrcp_citytown,
   lrcp_cnty,
   lrcp_stt,
   lrcp_zip_cod4,
   lrcp_zip_cod5,
   lrcp_ltr_cc,
   lrcp_usr_rcpt,
   lrcp_ltr_to,
   lrcp_cc_ltr,
   lrcp_sentltr,
   lrcp_id,
   valid_from,
   valid_to ,
   lrcp_audid,
   lrcp_prev_audid,
   lrcp_next_audid,
   lrcp_que,
   lrcp_ltr_cntt,
   lrcp_fax_cntt
  )
  VALUES
  (
   :new.lrcp_cfrdltr_to,
   :new.lrcp_cfrdltr_cc,
   :new.lrcp_dfltrcpt,
   :new.classtype,
   :new.lrcp_c4c_id,
   :new.lrcp_crtd,
   :new.lrcp_las_act,
   :new.lrcp_las_act_actrtyp,
   :new.lrcp_obj_stt,
   :new.lrcp_vers,
   :new.lrcp_vsbt,
   :new.lrcp_dltddt,
   :new.lrcp_las_act_by,
   :new.lrcp_origcrtr,

 :new.lrcp_origcrtrlogdin,
   :new.lrcp_las_act_by_logdin,
   :new.lrcp_univid,
   :new.lrcp_fax,
   :new.lrcp_emal,
   :new.lrcp_frstnam,
   :new.lrcp_mdlenam,
   :new.lrcp_las_nam,
   :new.lrcp_streadd1,
   :new.lrcp_streadd2,
   :new.lrcp_streadd3,
   :new.lrcp_citytown,
   :new.lrcp_cnty,
   :new.lrcp_stt,
   :new.lrcp_zip_cod4,
   :new.lrcp_zip_cod5,
   :new.lrcp_ltr_cc,
   :new.lrcp_usr_rcpt,
   :new.lrcp_ltr_to,
   :new.lrcp_cc_ltr,
   :new.lrcp_sentltr,
   :new.lrcp_id,
   :new.lrcp_las_act_tim,
   NULL,
   u_ltr_rcpt.NEXTVAL,
   NULL,
   NULL,
   :new.lrcp_que,
   :new.lrcp_ltr_cntt,
   :new.lrcp_fax_cntt
  );
END;

</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
107
</td>
<td>
THH_C4C
</td>
<td>
TRG_LRCP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_RCPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_lrcp_auditupdate BEFORE
  UPDATE
    ON T_LTR_RCPT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        lrcp_audid
      INTO
        last_audid
      FROM
        a_ltr_rcpt
      WHERE
        lrcp_id            = :old.lrcp_id
      AND lrcp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.lrcp_las_act_tim = :new.lrcp_las_act_tim THEN
      UPDATE
        a_ltr_rcpt
      SET
        classtype              = :new.classtype,
        lrcp_c4c_id            = :new.lrcp_c4c_id,
        lrcp_crtd              = :new.lrcp_crtd,
        lrcp_las_act           = :new.lrcp_las_act,
        lrcp_las_act_actrtyp   = :new.lrcp_las_act_actrtyp,
        lrcp_obj_stt           = :new.lrcp_obj_stt,
        lrcp_vers              = :new.lrcp_vers,
        lrcp_vsbt              = :new.lrcp_vsbt,
        lrcp_dltddt            = :new.lrcp_dltddt,
        lrcp_las_act_by        = :new.lrcp_las_act_by,
        lrcp_origcrtr          = :new.lrcp_origcrtr,
        lrcp_origcrtrlogdin    = :new.lrcp_origcrtrlogdin,
        lrcp_las_act_by_logdin = :new.lrcp_las_act_by_logdin,
        lrcp_univid            = :new.lrcp_univid,
        lrcp_fax               = :new.lrcp_fax,
        lrcp_emal              = :new.lrcp_emal,
        lrcp_frstnam           = :new.lrcp_frstnam,
        lrcp_mdlenam           = :new.lrcp_mdlenam,
        lrcp_las_nam           = :new.lrcp_las_nam,
        lrcp_streadd1          = :new.lrcp_streadd1,
        lrcp_streadd2          = :new.lrcp_streadd2,
        lrcp_streadd3          = :new.lrcp_streadd3,
        lrcp_citytown          = :new.lrcp_citytown,
        lrcp_cnty              = :new.lrcp_cnty,
        lrcp_stt               = :new.lrcp_stt,
        lrcp_zip_cod4          = :new.lrcp_zip_cod4,
        lrcp_zip_cod5          = :new.lrcp_zip_cod5,

      lrcp_dfltrcpt          = :new.lrcp_dfltrcpt,
        lrcp_cfrdltr_to        = :new.lrcp_cfrdltr_to,
        lrcp_cfrdltr_cc        = :new.lrcp_cfrdltr_cc,
        lrcp_ltr_cc            = :new.lrcp_ltr_cc,
        lrcp_usr_rcpt          = :new.lrcp_usr_rcpt,
        lrcp_ltr_to            = :new.lrcp_ltr_to,
        lrcp_cc_ltr            = :new.lrcp_cc_ltr,
        lrcp_sentltr           = :new.lrcp_sentltr,
		lrcp_que           	   = :new.lrcp_que,
		lrcp_ltr_cntt      	   = :new.lrcp_ltr_cntt,
		lrcp_fax_cntt      	   = :new.lrcp_fax_cntt
      WHERE
        lrcp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ltr_rcpt
        (
          classtype,
          lrcp_c4c_id,
          lrcp_crtd,
          lrcp_las_act,
          lrcp_las_act_actrtyp,
          lrcp_obj_stt,
          lrcp_vers,
          lrcp_vsbt,
          lrcp_dltddt,
          lrcp_las_act_by,
          lrcp_origcrtr,
          lrcp_origcrtrlogdin,
          lrcp_las_act_by_logdin,
          lrcp_univid,
          lrcp_fax,
          lrcp_emal,
          lrcp_frstnam,
          lrcp_mdlenam,
          lrcp_las_nam,
          lrcp_streadd1,
          lrcp_streadd2,
          lrcp_streadd3,
          lrcp_citytown,
          lrcp_cnty,
          lrcp_stt,
          lrcp_zip_cod4,
          lrcp_zip_cod5,
          lrcp_dfltrcpt,
          lrcp_cfrdltr_to,
          lrcp_cfrdltr_cc,
          lrcp_ltr_cc,
          lrcp_usr_rcpt,
          lrcp_ltr_to,
          lrcp_cc_ltr,
          lrcp_sentltr,
          lrcp_id,
		  lrcp_que,
		  lrcp_ltr_cntt,
		  lrcp_fax_cntt,
          valid_from,
          valid_to,
          lrcp_audid,
          lrcp_prev_audid,
          lrcp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.lrcp_c4c_id,
          :new.lrcp_crtd,
          :new.lrcp_las_act,
          :new.lrcp_las_act_ac
trtyp,
          :new.lrcp_obj_stt,
          :new.lrcp_vers,
          :new.lrcp_vsbt,
          :new.lrcp_dltddt,
          :new.lrcp_las_act_by,
          :new.lrcp_origcrtr,
          :new.lrcp_origcrtrlogdin,
          :new.lrcp_las_act_by_logdin,
          :new.lrcp_univid,
          :new.lrcp_fax,
          :new.lrcp_emal,
          :new.lrcp_frstnam,
          :new.lrcp_mdlenam,
          :new.lrcp_las_nam,
          :new.lrcp_streadd1,
          :new.lrcp_streadd2,
          :new.lrcp_streadd3,
          :new.lrcp_citytown,
          :new.lrcp_cnty,
          :new.lrcp_stt,
          :new.lrcp_zip_cod4,
          :new.lrcp_zip_cod5,
          :new.lrcp_dfltrcpt,
          :new.lrcp_cfrdltr_to,
          :new.lrcp_cfrdltr_cc,
          :new.lrcp_ltr_cc,
          :new.lrcp_usr_rcpt,
          :new.lrcp_ltr_to,
          :new.lrcp_cc_ltr,
          :new.lrcp_sentltr,
          :new.lrcp_id,
		  :new.lrcp_que,
		  :new.lrcp_ltr_cntt,
		  :new.lrcp_fax_cntt,
          :new.lrcp_las_act_tim,
          NULL,
          u_ltr_rcpt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ltr_rcpt
      SET
        valid_to        = :new.lrcp_las_act_tim,
        lrcp_next_audid = u_ltr_rcpt.CURRVAL
      WHERE
        lrcp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
108
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTSJ_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_SUBJ
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LTSJ_AUDITINSERT&quot; BEFORE INSERT ON T_LTR_SUBJ FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ltsj_crtd IS NULL THEN 
    :new.ltsj_crtd := curr_date; 
  END IF; 

  IF :new.ltsj_las_act_tim IS NULL THEN 
    :new.ltsj_las_act_tim := curr_date; 
  END IF; 

  IF :new.ltsj_las_act IS NULL THEN 
    :new.ltsj_las_act := 1; 
  END IF; 

  IF :new.ltsj_obj_stt IS NULL THEN 
    :new.ltsj_obj_stt := 1; 
  END IF; 

  IF :new.ltsj_vers IS NULL THEN 
    :new.ltsj_vers := 0; 
  END IF; 

  IF :new.ltsj_vsbt IS NULL THEN 
    :new.ltsj_vsbt := 1001; 
  END IF; 

  IF :new.ltsj_las_act_by IS NULL THEN 
    :new.ltsj_las_act_by := 1; 
  END IF; 

  IF :new.ltsj_origcrtr IS NULL THEN 
    :new.ltsj_origcrtr := 1; 
  END IF; 

  IF :new.ltsj_origcrtrlogdin IS NULL THEN 
    :new.ltsj_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ltsj_las_act_by_logdin IS NULL THEN 
    :new.ltsj_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ltr_subj 
  ( 
   classtype, 
   ltsj_c4c_id, 
   ltsj_crtd, 
   ltsj_las_act, 
   ltsj_las_act_actrtyp, 
   ltsj_obj_stt, 
   ltsj_vers, 
   ltsj_vsbt, 
   ltsj_dltddt, 
   ltsj_las_act_by, 
   ltsj_origcrtr, 
   ltsj_origcrtrlogdin, 
   ltsj_las_act_by_logdin, 
   ltsj_univid, 
   ltsj_affn_um_evntreqt, 
   ltsj_affn_um_extn, 
   ltsj_affn_pvdr, 
   ltsj_affn_cm, 
   ltsj_affn_memb, 
   ltsj_affn_um_evnt, 
   ltsj_affn_um_dgis, 
   ltsj_affn_mdclsrvc, 
   ltsj_affn_apl, 
   ltsj_prpdltr, 
   ltsj_id, 
   valid_from, 
   valid_to , 
   ltsj_audid, 
   ltsj_prev_audid, 
   ltsj_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ltsj_c4c_id,
   :new.ltsj_crtd,
   :new.ltsj_las_act,
   :new.ltsj_las_act_actrtyp,
   :new.ltsj_obj_stt,
   :new.ltsj_vers,
   :new.ltsj_vsbt,
   :new.ltsj_dltddt,
   :new.ltsj_las_act_by,
   :new.ltsj_origcrtr,
   :new.ltsj_origcrtrlogdin,
   :new.ltsj_las_act_by_logdin,
   :new.ltsj_univid,
   :new.ltsj_affn_um_evntreqt,
   :new.ltsj_affn_um_extn,
   :new.ltsj_affn_pvdr,
   :new.ltsj_affn_cm,
   :new.ltsj_affn_memb
,
   :new.ltsj_affn_um_evnt,
   :new.ltsj_affn_um_dgis,
   :new.ltsj_affn_mdclsrvc,
   :new.ltsj_affn_apl,
   :new.ltsj_prpdltr, 
   :new.ltsj_id, 
   :new.ltsj_las_act_tim, 
   NULL, 
   u_ltr_subj.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
109
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTSJ_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_SUBJ
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ltsj_auditupdate BEFORE
  UPDATE
    ON T_LTR_SUBJ FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ltsj_audid
      INTO
        last_audid
      FROM
        a_ltr_subj
      WHERE
        ltsj_id            = :old.ltsj_id
      AND ltsj_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ltsj_las_act_tim = :new.ltsj_las_act_tim THEN
      UPDATE
        a_ltr_subj
      SET
        classtype              = :new.classtype,
        ltsj_c4c_id            = :new.ltsj_c4c_id,
        ltsj_crtd              = :new.ltsj_crtd,
        ltsj_las_act           = :new.ltsj_las_act,
        ltsj_las_act_actrtyp   = :new.ltsj_las_act_actrtyp,
        ltsj_obj_stt           = :new.ltsj_obj_stt,
        ltsj_vers              = :new.ltsj_vers,
        ltsj_vsbt              = :new.ltsj_vsbt,
        ltsj_dltddt            = :new.ltsj_dltddt,
        ltsj_las_act_by        = :new.ltsj_las_act_by,
        ltsj_origcrtr          = :new.ltsj_origcrtr,
        ltsj_origcrtrlogdin    = :new.ltsj_origcrtrlogdin,
        ltsj_las_act_by_logdin = :new.ltsj_las_act_by_logdin,
        ltsj_univid            = :new.ltsj_univid,
        ltsj_affn_um_evntreqt  = :new.ltsj_affn_um_evntreqt,
        ltsj_affn_um_extn      = :new.ltsj_affn_um_extn,
        ltsj_affn_pvdr         = :new.ltsj_affn_pvdr,
        ltsj_affn_cm           = :new.ltsj_affn_cm,
        ltsj_affn_memb         = :new.ltsj_affn_memb,
        ltsj_affn_um_evnt      = :new.ltsj_affn_um_evnt,
        ltsj_affn_um_dgis      = :new.ltsj_affn_um_dgis,
        ltsj_affn_mdclsrvc     = :new.ltsj_affn_mdclsrvc,
        ltsj_affn_apl          = :new.ltsj_affn_apl,
        ltsj_prpdltr           = :new.ltsj_prpdltr
      WHERE
        ltsj_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    E
LSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ltr_subj
        (
          classtype,
          ltsj_c4c_id,
          ltsj_crtd,
          ltsj_las_act,
          ltsj_las_act_actrtyp,
          ltsj_obj_stt,
          ltsj_vers,
          ltsj_vsbt,
          ltsj_dltddt,
          ltsj_las_act_by,
          ltsj_origcrtr,
          ltsj_origcrtrlogdin,
          ltsj_las_act_by_logdin,
          ltsj_univid,
          ltsj_affn_um_evntreqt,
          ltsj_affn_um_extn,
          ltsj_affn_pvdr,
          ltsj_affn_cm,
          ltsj_affn_memb,
          ltsj_affn_um_evnt,
          ltsj_affn_um_dgis,
          ltsj_affn_mdclsrvc,
          ltsj_affn_apl,
          ltsj_prpdltr,
          ltsj_id,
          valid_from,
          valid_to,
          ltsj_audid,
          ltsj_prev_audid,
          ltsj_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ltsj_c4c_id,
          :new.ltsj_crtd,
          :new.ltsj_las_act,
          :new.ltsj_las_act_actrtyp,
          :new.ltsj_obj_stt,
          :new.ltsj_vers,
          :new.ltsj_vsbt,
          :new.ltsj_dltddt,
          :new.ltsj_las_act_by,
          :new.ltsj_origcrtr,
          :new.ltsj_origcrtrlogdin,
          :new.ltsj_las_act_by_logdin,
          :new.ltsj_univid,
          :new.ltsj_affn_um_evntreqt,
          :new.ltsj_affn_um_extn,
          :new.ltsj_affn_pvdr,
          :new.ltsj_affn_cm,
          :new.ltsj_affn_memb,
          :new.ltsj_affn_um_evnt,
          :new.ltsj_affn_um_dgis,
          :new.ltsj_affn_mdclsrvc,
          :new.ltsj_affn_apl,
          :new.ltsj_prpdltr,
          :new.ltsj_id,
          :new.ltsj_las_act_tim,
          NULL,
          u_ltr_subj.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ltr_subj
      SET

  valid_to        = :new.ltsj_las_act_tim,
        ltsj_next_audid = u_ltr_subj.CURRVAL
      WHERE
        ltsj_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
110
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTLT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_TMPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LTLT_AUDITINSERT&quot; BEFORE INSERT ON T_LTR_TMPT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ltlt_crtd IS NULL THEN 
    :new.ltlt_crtd := curr_date; 
  END IF; 

  IF :new.ltlt_las_act_tim IS NULL THEN 
    :new.ltlt_las_act_tim := curr_date; 
  END IF; 

  IF :new.ltlt_las_act IS NULL THEN 
    :new.ltlt_las_act := 1; 
  END IF; 

  IF :new.ltlt_obj_stt IS NULL THEN 
    :new.ltlt_obj_stt := 1; 
  END IF; 

  IF :new.ltlt_vers IS NULL THEN 
    :new.ltlt_vers := 0; 
  END IF; 

  IF :new.ltlt_vsbt IS NULL THEN 
    :new.ltlt_vsbt := 1001; 
  END IF; 

  IF :new.ltlt_las_act_by IS NULL THEN 
    :new.ltlt_las_act_by := 1; 
  END IF; 

  IF :new.ltlt_origcrtr IS NULL THEN 
    :new.ltlt_origcrtr := 1; 
  END IF; 

  IF :new.ltlt_origcrtrlogdin IS NULL THEN 
    :new.ltlt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ltlt_las_act_by_logdin IS NULL THEN 
    :new.ltlt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_ltr_tmpt 
  ( 
   classtype, 
   ltlt_c4c_id, 
   ltlt_crtd, 
   ltlt_las_act, 
   ltlt_las_act_actrtyp, 
   ltlt_obj_stt, 
   ltlt_vers, 
   ltlt_vsbt, 
   ltlt_dltddt, 
   ltlt_las_act_by, 
   ltlt_origcrtr, 
   ltlt_origcrtrlogdin, 
   ltlt_las_act_by_logdin, 
   ltlt_univid, 
   ltlt_nam, 
   ltlt_subj, 
   ltlt_prus, 
   ltlt_gatekperrevw, 
   ltlt_astntyp, 
   ltlt_ltr_frma, 
   ltlt_cntt_contltrh, 
   ltlt_cntt_contimg, 
   ltlt_cntt_hght, 
   ltlt_cntt_wdth, 
   ltlt_cntt_top_mrgn, 
   ltlt_cntt_bttmmrgn, 
   ltlt_cntt_leftmrgn, 
   ltlt_cntt_rghtmrgn, 
   ltlt_cntt_nam, 
   ltlt_cntt_dat1, 
   ltlt_cntt_dat2, 
   ltlt_cntt_pagesiz, 
   ltlt_frstatvd, 
   ltlt_las_atvd, 
   ltlt_las_dctd, 
   ltlt_frstsbtdat, 
   ltlt_las_sbtdat, 
   ltlt_wkfwistcid, 
   ltlt_cnv_id, 
   ltlt_ownrchndflag, 
   ltlt_ownrchndcnt, 
   ltlt_dvtndt, 
   ltlt_cmmt, 
   ltlt_cntt_cntt, 
   ltlt_las_dctdby, 
   ltlt_frstatvdby, 
   ltlt_las_atvdby, 
   ltlt_ratnapvl, 
   ltlt_apvl, 
   ltlt_rcpttrkg, 
   ltlt_las_sbtdby, 
   ltlt_frstsbtdby, 
   ltlt_rfngwkfwtsk,

   ltlt_prvsrfngtsk, 
   ltlt_prvsrfngtsk_prmn, 
   ltlt_ownr, 
   ltlt_prvsownr, 
   ltlt_prvssndr, 
   ltlt_prvsownrprmn, 
   ltlt_tnfr, 
   ltlt_prvstnfr, 
   ltlt_cstmflds, 
   ltlt_typ_sbty, 
   ltlt_fax_covr, 
   ltlt_enlp, 
   ltlt_lbl, 
   ltlt_id, 
   valid_from, 
   valid_to , 
   ltlt_audid, 
   ltlt_prev_audid, 
   ltlt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ltlt_c4c_id,
   :new.ltlt_crtd,
   :new.ltlt_las_act,
   :new.ltlt_las_act_actrtyp,
   :new.ltlt_obj_stt,
   :new.ltlt_vers,
   :new.ltlt_vsbt,
   :new.ltlt_dltddt,
   :new.ltlt_las_act_by,
   :new.ltlt_origcrtr,
   :new.ltlt_origcrtrlogdin,
   :new.ltlt_las_act_by_logdin,
   :new.ltlt_univid,
   :new.ltlt_nam,
   :new.ltlt_subj,
   :new.ltlt_prus,
   :new.ltlt_gatekperrevw,
   :new.ltlt_astntyp,
   :new.ltlt_ltr_frma,
   :new.ltlt_cntt_contltrh,
   :new.ltlt_cntt_contimg,
   :new.ltlt_cntt_hght,
   :new.ltlt_cntt_wdth,
   :new.ltlt_cntt_top_mrgn,
   :new.ltlt_cntt_bttmmrgn,
   :new.ltlt_cntt_leftmrgn,
   :new.ltlt_cntt_rghtmrgn,
   :new.ltlt_cntt_nam,
   :new.ltlt_cntt_dat1,
   :new.ltlt_cntt_dat2,
   :new.ltlt_cntt_pagesiz,
   :new.ltlt_frstatvd,
   :new.ltlt_las_atvd,
   :new.ltlt_las_dctd,
   :new.ltlt_frstsbtdat,
   :new.ltlt_las_sbtdat,
   :new.ltlt_wkfwistcid,
   :new.ltlt_cnv_id,
   :new.ltlt_ownrchndflag,
   :new.ltlt_ownrchndcnt,
   :new.ltlt_dvtndt,
   :new.ltlt_cmmt,
   :new.ltlt_cntt_cntt,
   :new.ltlt_las_dctdby,
   :new.ltlt_frstatvdby,
   :new.ltlt_las_atvdby,
   :new.ltlt_ratnapvl,
   :new.ltlt_apvl,
   :new.ltlt_rcpttrkg,
   :new.ltlt_las_sbtdby,
   :new.ltlt_frstsbtdby,
   :new.ltlt_rfngwkfwtsk,
   :new.ltlt_prvsrfngtsk,
   :new.ltlt_prvsrfngtsk_prmn,
   :new.ltlt_ownr,
   :new.ltlt_prvsownr,
   :new.ltlt_prvssndr,
   :new.ltlt_prvsownrprmn,
   :new.ltlt_tnfr,
   :new.ltlt_prvstnfr,
   :new.ltlt_cstmflds,
   :new.ltlt_typ_sbty,
   :new.ltlt_fax_covr,
   :new.ltlt_enlp,
   :new.ltlt_lbl, 
   :new.ltlt_id, 
   :new.ltlt_las_act_tim, 
   NULL, 
   u_ltr_tmpt.NEXTVAL
, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
111
</td>
<td>
THH_C4C
</td>
<td>
TRG_LTLT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LTR_TMPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ltlt_auditupdate BEFORE
  UPDATE
    ON T_LTR_TMPT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ltlt_audid
      INTO
        last_audid
      FROM
        a_ltr_tmpt
      WHERE
        ltlt_id            = :old.ltlt_id
      AND ltlt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ltlt_las_act_tim = :new.ltlt_las_act_tim THEN
      UPDATE
        a_ltr_tmpt
      SET
        classtype              = :new.classtype,
        ltlt_c4c_id            = :new.ltlt_c4c_id,
        ltlt_crtd              = :new.ltlt_crtd,
        ltlt_las_act           = :new.ltlt_las_act,
        ltlt_las_act_actrtyp   = :new.ltlt_las_act_actrtyp,
        ltlt_obj_stt           = :new.ltlt_obj_stt,
        ltlt_vers              = :new.ltlt_vers,
        ltlt_vsbt              = :new.ltlt_vsbt,
        ltlt_dltddt            = :new.ltlt_dltddt,
        ltlt_las_act_by        = :new.ltlt_las_act_by,
        ltlt_origcrtr          = :new.ltlt_origcrtr,
        ltlt_origcrtrlogdin    = :new.ltlt_origcrtrlogdin,
        ltlt_las_act_by_logdin = :new.ltlt_las_act_by_logdin,
        ltlt_univid            = :new.ltlt_univid,
        ltlt_nam               = :new.ltlt_nam,
        ltlt_subj              = :new.ltlt_subj,
        ltlt_prus              = :new.ltlt_prus,
        ltlt_gatekperrevw      = :new.ltlt_gatekperrevw,
        ltlt_astntyp           = :new.ltlt_astntyp,
        ltlt_ltr_frma          = :new.ltlt_ltr_frma,
        ltlt_cntt_contltrh     = :new.ltlt_cntt_contltrh,
        ltlt_cntt_contimg      = :new.ltlt_cntt_contimg,
        ltlt_cntt_hght         = :new.ltlt_cntt_hght,
        ltlt_cntt_wdth         = :new.ltlt_cntt_wdth,
        ltlt_cntt_top_mrgn     = :new.ltlt_cntt_top_mrgn,
        ltlt_cntt_bttmmrgn     = :new.ltlt_cntt_bttmmrgn,
        ltlt_cntt_leftm
rgn     = :new.ltlt_cntt_leftmrgn,
        ltlt_cntt_rghtmrgn     = :new.ltlt_cntt_rghtmrgn,
        ltlt_cntt_nam          = :new.ltlt_cntt_nam,
        ltlt_cntt_dat1         = :new.ltlt_cntt_dat1,
        ltlt_cntt_dat2         = :new.ltlt_cntt_dat2,
        ltlt_cntt_pagesiz      = :new.ltlt_cntt_pagesiz,
        ltlt_frstatvd          = :new.ltlt_frstatvd,
        ltlt_las_atvd          = :new.ltlt_las_atvd,
        ltlt_las_dctd          = :new.ltlt_las_dctd,
        ltlt_frstsbtdat        = :new.ltlt_frstsbtdat,
        ltlt_las_sbtdat        = :new.ltlt_las_sbtdat,
        ltlt_wkfwistcid        = :new.ltlt_wkfwistcid,
        ltlt_cnv_id            = :new.ltlt_cnv_id,
        ltlt_ownrchndflag      = :new.ltlt_ownrchndflag,
        ltlt_ownrchndcnt       = :new.ltlt_ownrchndcnt,
        ltlt_dvtndt            = :new.ltlt_dvtndt,
        ltlt_cmmt              = :new.ltlt_cmmt,
        ltlt_cntt_cntt         = :new.ltlt_cntt_cntt,
        ltlt_las_dctdby        = :new.ltlt_las_dctdby,
        ltlt_frstatvdby        = :new.ltlt_frstatvdby,
        ltlt_las_atvdby        = :new.ltlt_las_atvdby,
        ltlt_ratnapvl          = :new.ltlt_ratnapvl,
        ltlt_apvl              = :new.ltlt_apvl,
        ltlt_rcpttrkg          = :new.ltlt_rcpttrkg,
        ltlt_las_sbtdby        = :new.ltlt_las_sbtdby,
        ltlt_frstsbtdby        = :new.ltlt_frstsbtdby,
        ltlt_rfngwkfwtsk       = :new.ltlt_rfngwkfwtsk,
        ltlt_prvsrfngtsk       = :new.ltlt_prvsrfngtsk,
        ltlt_prvsrfngtsk_prmn  = :new.ltlt_prvsrfngtsk_prmn,
        ltlt_ownr              = :new.ltlt_ownr,
        ltlt_prvsownr          = :new.ltlt_prvsownr,
        ltlt_prvssndr          = :new.ltlt_prvssndr,
        ltlt_prvsownrprmn      = :new.ltlt_prvsownrprmn,
        ltlt_tnfr              = :new.ltlt_tnfr,
        ltlt_prvstnfr          = :new.ltlt_prvstnfr,
        ltlt_cstmflds          = :new.ltlt_cstmflds,
        ltlt_typ_sbty          = :new.ltlt_typ_sbty,
        ltlt_fax_covr
       = :new.ltlt_fax_covr,
        ltlt_enlp              = :new.ltlt_enlp,
        ltlt_lbl               = :new.ltlt_lbl
      WHERE
        ltlt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ltr_tmpt
        (
          classtype,
          ltlt_c4c_id,
          ltlt_crtd,
          ltlt_las_act,
          ltlt_las_act_actrtyp,
          ltlt_obj_stt,
          ltlt_vers,
          ltlt_vsbt,
          ltlt_dltddt,
          ltlt_las_act_by,
          ltlt_origcrtr,
          ltlt_origcrtrlogdin,
          ltlt_las_act_by_logdin,
          ltlt_univid,
          ltlt_nam,
          ltlt_subj,
          ltlt_prus,
          ltlt_gatekperrevw,
          ltlt_astntyp,
          ltlt_ltr_frma,
          ltlt_cntt_contltrh,
          ltlt_cntt_contimg,
          ltlt_cntt_hght,
          ltlt_cntt_wdth,
          ltlt_cntt_top_mrgn,
          ltlt_cntt_bttmmrgn,
          ltlt_cntt_leftmrgn,
          ltlt_cntt_rghtmrgn,
          ltlt_cntt_nam,
          ltlt_cntt_dat1,
          ltlt_cntt_dat2,
          ltlt_cntt_pagesiz,
          ltlt_frstatvd,
          ltlt_las_atvd,
          ltlt_las_dctd,
          ltlt_frstsbtdat,
          ltlt_las_sbtdat,
          ltlt_wkfwistcid,
          ltlt_cnv_id,
          ltlt_ownrchndflag,
          ltlt_ownrchndcnt,
          ltlt_dvtndt,
          ltlt_cmmt,
          ltlt_cntt_cntt,
          ltlt_las_dctdby,
          ltlt_frstatvdby,
          ltlt_las_atvdby,
          ltlt_ratnapvl,
          ltlt_apvl,
          ltlt_rcpttrkg,
          ltlt_las_sbtdby,
          ltlt_frstsbtdby,
          ltlt_rfngwkfwtsk,
          ltlt_prvsrfngtsk,
          ltlt_prvsrfngtsk_prmn,
          ltlt_ownr,
          ltlt_prvsownr,
          ltlt_prvssndr,
          ltlt_prvsownrprmn,
          ltlt_tnfr,
          ltlt_prvstnfr,
          ltlt_cstmflds,
          ltlt_typ_sbty,
          ltlt_fax
_covr,
          ltlt_enlp,
          ltlt_lbl,
          ltlt_id,
          valid_from,
          valid_to,
          ltlt_audid,
          ltlt_prev_audid,
          ltlt_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ltlt_c4c_id,
          :new.ltlt_crtd,
          :new.ltlt_las_act,
          :new.ltlt_las_act_actrtyp,
          :new.ltlt_obj_stt,
          :new.ltlt_vers,
          :new.ltlt_vsbt,
          :new.ltlt_dltddt,
          :new.ltlt_las_act_by,
          :new.ltlt_origcrtr,
          :new.ltlt_origcrtrlogdin,
          :new.ltlt_las_act_by_logdin,
          :new.ltlt_univid,
          :new.ltlt_nam,
          :new.ltlt_subj,
          :new.ltlt_prus,
          :new.ltlt_gatekperrevw,
          :new.ltlt_astntyp,
          :new.ltlt_ltr_frma,
          :new.ltlt_cntt_contltrh,
          :new.ltlt_cntt_contimg,
          :new.ltlt_cntt_hght,
          :new.ltlt_cntt_wdth,
          :new.ltlt_cntt_top_mrgn,
          :new.ltlt_cntt_bttmmrgn,
          :new.ltlt_cntt_leftmrgn,
          :new.ltlt_cntt_rghtmrgn,
          :new.ltlt_cntt_nam,
          :new.ltlt_cntt_dat1,
          :new.ltlt_cntt_dat2,
          :new.ltlt_cntt_pagesiz,
          :new.ltlt_frstatvd,
          :new.ltlt_las_atvd,
          :new.ltlt_las_dctd,
          :new.ltlt_frstsbtdat,
          :new.ltlt_las_sbtdat,
          :new.ltlt_wkfwistcid,
          :new.ltlt_cnv_id,
          :new.ltlt_ownrchndflag,
          :new.ltlt_ownrchndcnt,
          :new.ltlt_dvtndt,
          :new.ltlt_cmmt,
          :new.ltlt_cntt_cntt,
          :new.ltlt_las_dctdby,
          :new.ltlt_frstatvdby,
          :new.ltlt_las_atvdby,
          :new.ltlt_ratnapvl,
          :new.ltlt_apvl,
          :new.ltlt_rcpttrkg,
          :new.ltlt_las_sbtdby,
          :new.ltlt_frstsbtdby,
          :new.ltlt_rfngwkfwtsk,
          :new.ltlt_prvsrfngtsk,
          :new.ltlt_prvsrfngtsk_prmn,
          :new.ltlt_ownr,
          :new.ltlt_prvsownr,
          :new.ltlt_pr
vssndr,
          :new.ltlt_prvsownrprmn,
          :new.ltlt_tnfr,
          :new.ltlt_prvstnfr,
          :new.ltlt_cstmflds,
          :new.ltlt_typ_sbty,
          :new.ltlt_fax_covr,
          :new.ltlt_enlp,
          :new.ltlt_lbl,
          :new.ltlt_id,
          :new.ltlt_las_act_tim,
          NULL,
          u_ltr_tmpt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_ltr_tmpt
      SET
        valid_to        = :new.ltlt_las_act_tim,
        ltlt_next_audid = u_ltr_tmpt.CURRVAL
      WHERE
        ltlt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
112
</td>
<td>
THH_C4C
</td>
<td>
TRG_LCPV_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LWSTCOSTPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_LCPV_AUDITINSERT&quot; BEFORE INSERT ON T_LWSTCOSTPVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.lcpv_crtd IS NULL THEN 
    :new.lcpv_crtd := curr_date; 
  END IF; 

  IF :new.lcpv_las_act_tim IS NULL THEN 
    :new.lcpv_las_act_tim := curr_date; 
  END IF; 

  IF :new.lcpv_las_act IS NULL THEN 
    :new.lcpv_las_act := 1; 
  END IF; 

  IF :new.lcpv_obj_stt IS NULL THEN 
    :new.lcpv_obj_stt := 1; 
  END IF; 

  IF :new.lcpv_vers IS NULL THEN 
    :new.lcpv_vers := 0; 
  END IF; 

  IF :new.lcpv_vsbt IS NULL THEN 
    :new.lcpv_vsbt := 1001; 
  END IF; 

  IF :new.lcpv_las_act_by IS NULL THEN 
    :new.lcpv_las_act_by := 1; 
  END IF; 

  IF :new.lcpv_origcrtr IS NULL THEN 
    :new.lcpv_origcrtr := 1; 
  END IF; 

  IF :new.lcpv_origcrtrlogdin IS NULL THEN 
    :new.lcpv_origcrtrlogdin := 1; 
  END IF; 

  IF :new.lcpv_las_act_by_logdin IS NULL THEN 
    :new.lcpv_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_lwstcostpvdr 
  ( 
   classtype, 
   lcpv_c4c_id, 
   lcpv_crtd, 
   lcpv_las_act, 
   lcpv_las_act_actrtyp, 
   lcpv_obj_stt, 
   lcpv_vers, 
   lcpv_vsbt, 
   lcpv_dltddt, 
   lcpv_las_act_by, 
   lcpv_origcrtr, 
   lcpv_origcrtrlogdin, 
   lcpv_las_act_by_logdin, 
   lcpv_univid, 
   lcpv_pvdr, 
   lcpv_lwstcostpvdr, 
   lcpv_id, 
   valid_from, 
   valid_to , 
   lcpv_audid, 
   lcpv_prev_audid, 
   lcpv_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.lcpv_c4c_id,
   :new.lcpv_crtd,
   :new.lcpv_las_act,
   :new.lcpv_las_act_actrtyp,
   :new.lcpv_obj_stt,
   :new.lcpv_vers,
   :new.lcpv_vsbt,
   :new.lcpv_dltddt,
   :new.lcpv_las_act_by,
   :new.lcpv_origcrtr,
   :new.lcpv_origcrtrlogdin,
   :new.lcpv_las_act_by_logdin,
   :new.lcpv_univid,
   :new.lcpv_pvdr,
   :new.lcpv_lwstcostpvdr, 
   :new.lcpv_id, 
   :new.lcpv_las_act_tim, 
   NULL, 
   u_lwstcostpvdr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
113
</td>
<td>
THH_C4C
</td>
<td>
TRG_LCPV_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_LWSTCOSTPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_lcpv_auditupdate BEFORE
  UPDATE
    ON T_LWSTCOSTPVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        lcpv_audid
      INTO
        last_audid
      FROM
        a_lwstcostpvdr
      WHERE
        lcpv_id            = :old.lcpv_id
      AND lcpv_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.lcpv_las_act_tim = :new.lcpv_las_act_tim THEN
      UPDATE
        a_lwstcostpvdr
      SET
        classtype              = :new.classtype,
        lcpv_c4c_id            = :new.lcpv_c4c_id,
        lcpv_crtd              = :new.lcpv_crtd,
        lcpv_las_act           = :new.lcpv_las_act,
        lcpv_las_act_actrtyp   = :new.lcpv_las_act_actrtyp,
        lcpv_obj_stt           = :new.lcpv_obj_stt,
        lcpv_vers              = :new.lcpv_vers,
        lcpv_vsbt              = :new.lcpv_vsbt,
        lcpv_dltddt            = :new.lcpv_dltddt,
        lcpv_las_act_by        = :new.lcpv_las_act_by,
        lcpv_origcrtr          = :new.lcpv_origcrtr,
        lcpv_origcrtrlogdin    = :new.lcpv_origcrtrlogdin,
        lcpv_las_act_by_logdin = :new.lcpv_las_act_by_logdin,
        lcpv_univid            = :new.lcpv_univid,
        lcpv_pvdr              = :new.lcpv_pvdr,
        lcpv_lwstcostpvdr      = :new.lcpv_lwstcostpvdr
      WHERE
        lcpv_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_lwstcostpvdr
        (
          classtype,
          lcpv_c4c_id,
          lcpv_crtd,
          lcpv_las_act,
          lcpv_las_act_actrtyp,
          lcpv_obj_stt,
          lcpv_vers,
          lcpv_vsbt,
          lcpv_dltddt,
          lcpv_las_act_by,
          lcpv_origcrtr,
          lcpv_origcrtrlogdin,
          lcpv_las_act_by_l
ogdin,
          lcpv_univid,
          lcpv_pvdr,
          lcpv_lwstcostpvdr,
          lcpv_id,
          valid_from,
          valid_to,
          lcpv_audid,
          lcpv_prev_audid,
          lcpv_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.lcpv_c4c_id,
          :new.lcpv_crtd,
          :new.lcpv_las_act,
          :new.lcpv_las_act_actrtyp,
          :new.lcpv_obj_stt,
          :new.lcpv_vers,
          :new.lcpv_vsbt,
          :new.lcpv_dltddt,
          :new.lcpv_las_act_by,
          :new.lcpv_origcrtr,
          :new.lcpv_origcrtrlogdin,
          :new.lcpv_las_act_by_logdin,
          :new.lcpv_univid,
          :new.lcpv_pvdr,
          :new.lcpv_lwstcostpvdr,
          :new.lcpv_id,
          :new.lcpv_las_act_tim,
          NULL,
          u_lwstcostpvdr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_lwstcostpvdr
      SET
        valid_to        = :new.lcpv_las_act_tim,
        lcpv_next_audid = u_lwstcostpvdr.CURRVAL
      WHERE
        lcpv_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
114
</td>
<td>
THH_C4C
</td>
<td>
TRG_MDCLCLM_INSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCLCLM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_MDCLCLM_INSERT before insert on T_MDCLCLM for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date DATE;
begin
  curr_date := current_date;

  if :new.MCLM_CRTD is null then
    :new.MCLM_CRTD := curr_date;
  end if;

  if :new.MCLM_LAS_ACT_TIM is null then
    :new.MCLM_LAS_ACT_TIM := curr_date;
  end if;

  if :new.MCLM_LAS_ACT_BY is null then
    :new.MCLM_LAS_ACT_BY := 1;
  end if;

  if :new.MCLM_OBJ_STT is null then
    :new.MCLM_OBJ_STT := 1;
  end if;

  if :new.MCLM_VERS is null then
    :new.MCLM_VERS := 0;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
115
</td>
<td>
THH_C4C
</td>
<td>
TRG_MDCLCLM_UPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCLCLM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_MDCLCLM_UPDATE before update on T_MDCLCLM for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date DATE;
begin
  curr_date := current_date;

  if :new.MCLM_LAS_ACT_TIM is null then
    :new.MCLM_LAS_ACT_TIM := curr_date;
  end if;

  if :new.MCLM_LAS_ACT_BY is null then
    :new.MCLM_LAS_ACT_BY := 1;
  end if;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
116
</td>
<td>
THH_C4C
</td>
<td>
TRG_MRCM_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCLREC_CSFNMEMS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_MRCM_AUDITINSERT&quot; BEFORE INSERT ON T_MDCLREC_CSFNMEMS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.mrcm_crtd IS NULL THEN 
    :new.mrcm_crtd := curr_date; 
  END IF; 

  IF :new.mrcm_las_act_tim IS NULL THEN 
    :new.mrcm_las_act_tim := curr_date; 
  END IF; 

  IF :new.mrcm_las_act IS NULL THEN 
    :new.mrcm_las_act := 1; 
  END IF; 

  IF :new.mrcm_obj_stt IS NULL THEN 
    :new.mrcm_obj_stt := 1; 
  END IF; 

  IF :new.mrcm_vers IS NULL THEN 
    :new.mrcm_vers := 0; 
  END IF; 

  IF :new.mrcm_vsbt IS NULL THEN 
    :new.mrcm_vsbt := 1001; 
  END IF; 

  IF :new.mrcm_las_act_by IS NULL THEN 
    :new.mrcm_las_act_by := 1; 
  END IF; 

  IF :new.mrcm_origcrtr IS NULL THEN 
    :new.mrcm_origcrtr := 1; 
  END IF; 

  IF :new.mrcm_origcrtrlogdin IS NULL THEN 
    :new.mrcm_origcrtrlogdin := 1; 
  END IF; 

  IF :new.mrcm_las_act_by_logdin IS NULL THEN 
    :new.mrcm_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_mdclrec_csfnmems 
  ( 
   classtype, 
   mrcm_c4c_id, 
   mrcm_crtd, 
   mrcm_las_act, 
   mrcm_las_act_actrtyp, 
   mrcm_obj_stt, 
   mrcm_vers, 
   mrcm_vsbt, 
   mrcm_dltddt, 
   mrcm_las_act_by, 
   mrcm_origcrtr, 
   mrcm_origcrtrlogdin, 
   mrcm_las_act_by_logdin, 
   mrcm_univid, 
   mrcm_csfn, 
   mrcm_spcdmems, 
   mrcm_id, 
   valid_from, 
   valid_to , 
   mrcm_audid, 
   mrcm_prev_audid, 
   mrcm_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.mrcm_c4c_id,
   :new.mrcm_crtd,
   :new.mrcm_las_act,
   :new.mrcm_las_act_actrtyp,
   :new.mrcm_obj_stt,
   :new.mrcm_vers,
   :new.mrcm_vsbt,
   :new.mrcm_dltddt,
   :new.mrcm_las_act_by,
   :new.mrcm_origcrtr,
   :new.mrcm_origcrtrlogdin,
   :new.mrcm_las_act_by_logdin,
   :new.mrcm_univid,
   :new.mrcm_csfn,
   :new.mrcm_spcdmems, 
   :new.mrcm_id, 
   :new.mrcm_las_act_tim, 
   NULL, 
   u_mdclrec_csfnmems.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
117
</td>
<td>
THH_C4C
</td>
<td>
TRG_MRCM_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCLREC_CSFNMEMS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mrcm_auditupdate BEFORE
  UPDATE
    ON T_MDCLREC_CSFNMEMS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mrcm_audid
      INTO
        last_audid
      FROM
        a_mdclrec_csfnmems
      WHERE
        mrcm_id      = :old.mrcm_id
      AND valid_from = :old.mrcm_las_act_tim FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mrcm_las_act_tim = :new.mrcm_las_act_tim THEN
      UPDATE
        a_mdclrec_csfnmems
      SET
        mrcm_c4c_id            = :new.mrcm_c4c_id,
        mrcm_crtd              = :new.mrcm_crtd,
        mrcm_las_act           = :new.mrcm_las_act,
        mrcm_las_act_actrtyp   = :new.mrcm_las_act_actrtyp,
        mrcm_obj_stt           = :new.mrcm_obj_stt,
        mrcm_vers              = :new.mrcm_vers,
        mrcm_vsbt              = :new.mrcm_vsbt,
        mrcm_dltddt            = :new.mrcm_dltddt,
        mrcm_las_act_by        = :new.mrcm_las_act_by,
        mrcm_origcrtr          = :new.mrcm_origcrtr,
        mrcm_origcrtrlogdin    = :new.mrcm_origcrtrlogdin,
        mrcm_las_act_by_logdin = :new.mrcm_las_act_by_logdin,
        mrcm_univid            = :new.mrcm_univid,
        mrcm_csfn              = :new.mrcm_csfn,
        mrcm_spcdmems          = :new.mrcm_spcdmems,
        classtype              = :new.classtype
      WHERE
        mrcm_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_mdclrec_csfnmems
        (
          mrcm_c4c_id,
          mrcm_crtd,
          mrcm_las_act,
          mrcm_las_act_actrtyp,
          mrcm_obj_stt,
          mrcm_vers,
          mrcm_vsbt,
          mrcm_dltddt,
          mrcm_las_act_by,
          mrcm_origcrtr,
          mrcm_origcrtrlogdin,
          mrcm_las_act_by_logdin,
          mrcm_univid,

 mrcm_csfn,
          mrcm_spcdmems,
          classtype,
          mrcm_id,
          valid_from,
          valid_to,
          mrcm_audid,
          mrcm_prev_audid,
          mrcm_next_audid
        )
        VALUES
        (
          :new.mrcm_c4c_id,
          :new.mrcm_crtd,
          :new.mrcm_las_act,
          :new.mrcm_las_act_actrtyp,
          :new.mrcm_obj_stt,
          :new.mrcm_vers,
          :new.mrcm_vsbt,
          :new.mrcm_dltddt,
          :new.mrcm_las_act_by,
          :new.mrcm_origcrtr,
          :new.mrcm_origcrtrlogdin,
          :new.mrcm_las_act_by_logdin,
          :new.mrcm_univid,
          :new.mrcm_csfn,
          :new.mrcm_spcdmems,
          :new.classtype,
          :new.mrcm_id,
          :new.mrcm_las_act_tim,
          NULL,
          u_mdclrec_csfnmems.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_mdclrec_csfnmems
      SET
        valid_to        = :new.mrcm_las_act_tim,
        mrcm_next_audid = u_mdclrec_csfnmems.CURRVAL
      WHERE
        mrcm_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
118
</td>
<td>
THH_C4C
</td>
<td>
TRG_MDCT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mdct_auditinsert BEFORE INSERT ON T_MDCT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.mdct_crtd IS NULL THEN
    :new.mdct_crtd := curr_date;
  END IF;

  IF :new.mdct_las_act_tim IS NULL THEN
    :new.mdct_las_act_tim := curr_date;
  END IF;

  IF :new.mdct_las_act IS NULL THEN
    :new.mdct_las_act := 1;
  END IF;

  IF :new.mdct_obj_stt IS NULL THEN
    :new.mdct_obj_stt := 1;
  END IF;

  IF :new.mdct_vers IS NULL THEN
    :new.mdct_vers := 0;
  END IF;

  IF :new.mdct_vsbt IS NULL THEN
    :new.mdct_vsbt := 1001;
  END IF;

  IF :new.mdct_las_act_by IS NULL THEN
    :new.mdct_las_act_by := 1;
  END IF;

  IF :new.mdct_origcrtr IS NULL THEN
    :new.mdct_origcrtr := 1;
  END IF;

  IF :new.mdct_origcrtrlogdin IS NULL THEN
    :new.mdct_origcrtrlogdin := 1;
  END IF;

  IF :new.mdct_las_act_by_logdin IS NULL THEN
    :new.mdct_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_mdct
  (
   mdct_drugclm,
   classtype,
   mdct_c4c_id,
   mdct_crtd,
   mdct_las_act,
   mdct_las_act_actrtyp,
   mdct_obj_stt,
   mdct_vers,
   mdct_vsbt,
   mdct_dltddt,
   mdct_las_act_by,
   mdct_origcrtr,
   mdct_origcrtrlogdin,
   mdct_las_act_by_logdin,
   mdct_univid,
   mdct_strtdt,
   mdct_end_dt,
   mdct_err_cmmt,
   mdct_dosg,
   mdct_fqcy,
   mdct_is_gnrc,
   mdct_las_flld,
   mdct_cmmt,
   mdct_mdctnam,
   mdct_src__src_typ,
   mdct_src__asmtcarecalc,
   mdct_src__pat_id_qry,
   mdct_affdrec__um_evntreqt,
   mdct_affdrec__um_extn,
   mdct_affdrec__pvdr,
   mdct_affdrec__cm,
   mdct_affdrec__memb,
   mdct_affdrec__um_evnt,
   mdct_ndc_code,
   mdct_memb,
   mdct_flldby,
   mdct_prtdby,
   mdct_dosgunit,
   mdct_typ,
   mdct_id,
   valid_from,
   valid_to ,
   mdct_audid,
   mdct_prev_audid,
   mdct_next_audid,
   mdct_route,
   mdct_refills_total,
   mdct_refills_remaining,
   mdct_current_list,
   mdct_source_of_list,
   mdct_status,
   mdct_review_options,
   mdct_review_date,
   mdct_qty,
   mdct_reviewed_by
  )
  VALUES
  (
   :new.mdct_drugclm,
   :new.classty
pe,
   :new.mdct_c4c_id,
   :new.mdct_crtd,
   :new.mdct_las_act,
   :new.mdct_las_act_actrtyp,
   :new.mdct_obj_stt,
   :new.mdct_vers,
   :new.mdct_vsbt,
   :new.mdct_dltddt,
   :new.mdct_las_act_by,
   :new.mdct_origcrtr,
   :new.mdct_origcrtrlogdin,
   :new.mdct_las_act_by_logdin,
   :new.mdct_univid,
   :new.mdct_strtdt,
   :new.mdct_end_dt,
   :new.mdct_err_cmmt,
   :new.mdct_dosg,
   :new.mdct_fqcy,
   :new.mdct_is_gnrc,
   :new.mdct_las_flld,
   :new.mdct_cmmt,
   :new.mdct_mdctnam,
   :new.mdct_src__src_typ,
   :new.mdct_src__asmtcarecalc,
   :new.mdct_src__pat_id_qry,
   :new.mdct_affdrec__um_evntreqt,
   :new.mdct_affdrec__um_extn,
   :new.mdct_affdrec__pvdr,
   :new.mdct_affdrec__cm,
   :new.mdct_affdrec__memb,
   :new.mdct_affdrec__um_evnt,
   :new.mdct_ndc_code,
   :new.mdct_memb,
   :new.mdct_flldby,
   :new.mdct_prtdby,
   :new.mdct_dosgunit,
   :new.mdct_typ,
   :new.mdct_id,
   :new.mdct_las_act_tim,
   NULL,
   u_mdct.NEXTVAL,
   NULL,
   NULL,
   :new.mdct_route,
   :new.mdct_refills_total,
   :new.mdct_refills_remaining,
   :new.mdct_current_list,
   :new.mdct_source_of_list,
   :new.mdct_status,
   :new.mdct_review_options,
   :new.mdct_review_date,
   :new.mdct_qty,
   :new.mdct_reviewed_by
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
119
</td>
<td>
THH_C4C
</td>
<td>
TRG_MDCT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MDCT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mdct_auditupdate BEFORE
  UPDATE
    ON T_MDCT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mdct_audid
      INTO
        last_audid
      FROM
        a_mdct
      WHERE
        mdct_id            = :old.mdct_id
      AND mdct_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mdct_las_act_tim = :new.mdct_las_act_tim THEN
      UPDATE
        a_mdct
      SET
        mdct_obj_stt              = :new.mdct_obj_stt,
        mdct_vers                 = :new.mdct_vers,
        mdct_vsbt                 = :new.mdct_vsbt,
        mdct_dltddt               = :new.mdct_dltddt,
        mdct_las_act_by           = :new.mdct_las_act_by,
        mdct_origcrtr             = :new.mdct_origcrtr,
        mdct_origcrtrlogdin       = :new.mdct_origcrtrlogdin,
        mdct_las_act_by_logdin    = :new.mdct_las_act_by_logdin,
        mdct_univid               = :new.mdct_univid,
        mdct_strtdt               = :new.mdct_strtdt,
        mdct_end_dt               = :new.mdct_end_dt,
        mdct_err_cmmt             = :new.mdct_err_cmmt,
        mdct_dosg                 = :new.mdct_dosg,
        mdct_fqcy                 = :new.mdct_fqcy,
        mdct_is_gnrc              = :new.mdct_is_gnrc,
        mdct_las_flld             = :new.mdct_las_flld,
        mdct_cmmt                 = :new.mdct_cmmt,
        mdct_mdctnam              = :new.mdct_mdctnam,
        mdct_src__src_typ         = :new.mdct_src__src_typ,
        mdct_src__asmtcarecalc    = :new.mdct_src__asmtcarecalc,
        mdct_src__pat_id_qry      = :new.mdct_src__pat_id_qry,
        mdct_affdrec__um_evntreqt = :new.mdct_affdrec__um_evntreqt,
        mdct_affdrec__um_extn     = :new.mdct_affdrec__um_extn,
        mdct_affdrec__pvdr        = :new.mdct_affdrec__pvdr,
        mdct_affdrec__cm          = :new.mdct
_affdrec__cm,
        mdct_affdrec__memb        = :new.mdct_affdrec__memb,
        mdct_affdrec__um_evnt     = :new.mdct_affdrec__um_evnt,
        mdct_ndc_code             = :new.mdct_ndc_code,
        mdct_memb                 = :new.mdct_memb,
        mdct_flldby               = :new.mdct_flldby,
        mdct_prtdby               = :new.mdct_prtdby,
        mdct_dosgunit             = :new.mdct_dosgunit,
        mdct_typ                  = :new.mdct_typ,
        mdct_drugclm              = :new.mdct_drugclm,
        classtype                 = :new.classtype,
        mdct_c4c_id               = :new.mdct_c4c_id,
        mdct_crtd                 = :new.mdct_crtd,
        mdct_las_act              = :new.mdct_las_act,
        mdct_las_act_actrtyp      = :new.mdct_las_act_actrtyp,
		mdct_route 				  = :new.mdct_route,
		mdct_refills_total 		  = :new.mdct_refills_total,
		mdct_refills_remaining    = :new.mdct_refills_remaining,
		mdct_current_list         = :new.mdct_current_list,
		mdct_source_of_list       = :new.mdct_source_of_list,
		mdct_status               = :new.mdct_status,
		mdct_review_options       = :new.mdct_review_options,
		mdct_review_date          = :new.mdct_review_date,
		mdct_qty				  = :new.mdct_qty,
		mdct_reviewed_by		  = :new.mdct_reviewed_by

      WHERE
        mdct_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_mdct
        (
          mdct_obj_stt,
          mdct_vers,
          mdct_vsbt,
          mdct_dltddt,
          mdct_las_act_by,
          mdct_origcrtr,
          mdct_origcrtrlogdin,
          mdct_las_act_by_logdin,
          mdct_univid,
          mdct_strtdt,
          mdct_end_dt,
          mdct_err_cmmt,
          mdct_dosg,
          mdct_fqcy,
          mdct_is_gnrc,
          mdct_las_flld,
          mdct_cmmt,
          mdct_mdctnam,
          mdct_src__src_typ,
          mdct_sr
c__asmtcarecalc,
          mdct_src__pat_id_qry,
          mdct_affdrec__um_evntreqt,
          mdct_affdrec__um_extn,
          mdct_affdrec__pvdr,
          mdct_affdrec__cm,
          mdct_affdrec__memb,
          mdct_affdrec__um_evnt,
          mdct_ndc_code,
          mdct_memb,
          mdct_flldby,
          mdct_prtdby,
          mdct_dosgunit,
          mdct_typ,
          mdct_drugclm,
          classtype,
          mdct_c4c_id,
          mdct_crtd,
          mdct_las_act,
          mdct_las_act_actrtyp,
          mdct_id,
          valid_from,
          valid_to,
          mdct_audid,
          mdct_prev_audid,
          mdct_next_audid,
		  mdct_route,
		  mdct_refills_total,
		  mdct_refills_remaining,
		  mdct_current_list,
		  mdct_source_of_list,
		  mdct_status,
		  mdct_review_options,
		  mdct_review_date,
		  mdct_qty,
		  mdct_reviewed_by
        )
        VALUES
        (
          :new.mdct_obj_stt,
          :new.mdct_vers,
          :new.mdct_vsbt,
          :new.mdct_dltddt,
          :new.mdct_las_act_by,
          :new.mdct_origcrtr,
          :new.mdct_origcrtrlogdin,
          :new.mdct_las_act_by_logdin,
          :new.mdct_univid,
          :new.mdct_strtdt,
          :new.mdct_end_dt,
          :new.mdct_err_cmmt,
          :new.mdct_dosg,
          :new.mdct_fqcy,
          :new.mdct_is_gnrc,
          :new.mdct_las_flld,
          :new.mdct_cmmt,
          :new.mdct_mdctnam,
          :new.mdct_src__src_typ,
          :new.mdct_src__asmtcarecalc,
          :new.mdct_src__pat_id_qry,
          :new.mdct_affdrec__um_evntreqt,
          :new.mdct_affdrec__um_extn,
          :new.mdct_affdrec__pvdr,
          :new.mdct_affdrec__cm,
          :new.mdct_affdrec__memb,
          :new.mdct_affdrec__um_evnt,
          :new.mdct_ndc_code,
          :new.mdct_memb,
          :new.mdct_flldby,
          :new.mdct_prtdby,
          :new.mdct_dosgunit,
          :new.mdct_typ,
          :new.mdct_drugclm,
          :new.classtype,
          :n
ew.mdct_c4c_id,
          :new.mdct_crtd,
          :new.mdct_las_act,
          :new.mdct_las_act_actrtyp,
          :new.mdct_id,
          :new.mdct_las_act_tim,
          NULL,
          u_mdct.NEXTVAL,
          last_audid,
          NULL,
		  :new.mdct_route,
		  :new.mdct_refills_total,
		  :new.mdct_refills_remaining,
		  :new.mdct_current_list,
		  :new.mdct_source_of_list,
		  :new.mdct_status,
		  :new.mdct_review_options,
		  :new.mdct_review_date,
		  :new.mdct_qty,
		  :new.mdct_reviewed_by
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_mdct
      SET
        valid_to        = :new.mdct_las_act_tim,
        mdct_next_audid = u_mdct.CURRVAL
      WHERE
        mdct_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
120
</td>
<td>
THH_C4C
</td>
<td>
TRG_MMCT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBCTCS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_MMCT_AUDITINSERT&quot; BEFORE INSERT ON T_MEMBCTCS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.mmct_crtd IS NULL THEN 
    :new.mmct_crtd := curr_date; 
  END IF; 

  IF :new.mmct_las_act_tim IS NULL THEN 
    :new.mmct_las_act_tim := curr_date; 
  END IF; 

  IF :new.mmct_las_act IS NULL THEN 
    :new.mmct_las_act := 1; 
  END IF; 

  IF :new.mmct_obj_stt IS NULL THEN 
    :new.mmct_obj_stt := 1; 
  END IF; 

  IF :new.mmct_vers IS NULL THEN 
    :new.mmct_vers := 0; 
  END IF; 

  IF :new.mmct_vsbt IS NULL THEN 
    :new.mmct_vsbt := 1001; 
  END IF; 

  IF :new.mmct_las_act_by IS NULL THEN 
    :new.mmct_las_act_by := 1; 
  END IF; 

  IF :new.mmct_origcrtr IS NULL THEN 
    :new.mmct_origcrtr := 1; 
  END IF; 

  IF :new.mmct_origcrtrlogdin IS NULL THEN 
    :new.mmct_origcrtrlogdin := 1; 
  END IF; 

  IF :new.mmct_las_act_by_logdin IS NULL THEN 
    :new.mmct_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_membctcs 
  ( 
   mmct_obj_stt, 
   mmct_vers, 
   mmct_vsbt, 
   mmct_dltddt, 
   mmct_las_act_by, 
   mmct_origcrtr, 
   mmct_origcrtrlogdin, 
   mmct_las_act_by_logdin, 
   mmct_univid, 
   mmct_memb, 
   mmct_ctcs, 
   classtype, 
   mmct_c4c_id, 
   mmct_crtd, 
   mmct_las_act, 
   mmct_las_act_actrtyp, 
   mmct_id, 
   valid_from, 
   valid_to , 
   mmct_audid, 
   mmct_prev_audid, 
   mmct_next_audid
  ) 
  VALUES 
  ( 
   :new.mmct_obj_stt,
   :new.mmct_vers,
   :new.mmct_vsbt,
   :new.mmct_dltddt,
   :new.mmct_las_act_by,
   :new.mmct_origcrtr,
   :new.mmct_origcrtrlogdin,
   :new.mmct_las_act_by_logdin,
   :new.mmct_univid,
   :new.mmct_memb,
   :new.mmct_ctcs,
   :new.classtype,
   :new.mmct_c4c_id,
   :new.mmct_crtd,
   :new.mmct_las_act,
   :new.mmct_las_act_actrtyp, 
   :new.mmct_id, 
   :new.mmct_las_act_tim, 
   NULL, 
   u_membctcs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
121
</td>
<td>
THH_C4C
</td>
<td>
TRG_MMCT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBCTCS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mmct_auditupdate BEFORE
  UPDATE
    ON T_MEMBCTCS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mmct_audid
      INTO
        last_audid
      FROM
        a_membctcs
      WHERE
        mmct_id            = :old.mmct_id
      AND mmct_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mmct_las_act_tim = :new.mmct_las_act_tim THEN
      UPDATE
        a_membctcs
      SET
        mmct_memb              = :new.mmct_memb,
        mmct_ctcs              = :new.mmct_ctcs,
        classtype              = :new.classtype,
        mmct_c4c_id            = :new.mmct_c4c_id,
        mmct_crtd              = :new.mmct_crtd,
        mmct_las_act           = :new.mmct_las_act,
        mmct_las_act_actrtyp   = :new.mmct_las_act_actrtyp,
        mmct_obj_stt           = :new.mmct_obj_stt,
        mmct_vers              = :new.mmct_vers,
        mmct_vsbt              = :new.mmct_vsbt,
        mmct_dltddt            = :new.mmct_dltddt,
        mmct_las_act_by        = :new.mmct_las_act_by,
        mmct_origcrtr          = :new.mmct_origcrtr,
        mmct_origcrtrlogdin    = :new.mmct_origcrtrlogdin,
        mmct_las_act_by_logdin = :new.mmct_las_act_by_logdin,
        mmct_univid            = :new.mmct_univid
      WHERE
        mmct_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_membctcs
        (
          mmct_memb,
          mmct_ctcs,
          classtype,
          mmct_c4c_id,
          mmct_crtd,
          mmct_las_act,
          mmct_las_act_actrtyp,
          mmct_obj_stt,
          mmct_vers,
          mmct_vsbt,
          mmct_dltddt,
          mmct_las_act_by,
          mmct_origcrtr,
          mmct_origcrtrlogdin,

     mmct_las_act_by_logdin,
          mmct_univid,
          mmct_id,
          valid_from,
          valid_to,
          mmct_audid,
          mmct_prev_audid,
          mmct_next_audid
        )
        VALUES
        (
          :new.mmct_memb,
          :new.mmct_ctcs,
          :new.classtype,
          :new.mmct_c4c_id,
          :new.mmct_crtd,
          :new.mmct_las_act,
          :new.mmct_las_act_actrtyp,
          :new.mmct_obj_stt,
          :new.mmct_vers,
          :new.mmct_vsbt,
          :new.mmct_dltddt,
          :new.mmct_las_act_by,
          :new.mmct_origcrtr,
          :new.mmct_origcrtrlogdin,
          :new.mmct_las_act_by_logdin,
          :new.mmct_univid,
          :new.mmct_id,
          :new.mmct_las_act_tim,
          NULL,
          u_membctcs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_membctcs
      SET
        valid_to        = :new.mmct_las_act_tim,
        mmct_next_audid = u_membctcs.CURRVAL
      WHERE
        mmct_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
122
</td>
<td>
THH_C4C
</td>
<td>
TRG_MBDB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBDGISBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_MBDB_AUDITINSERT BEFORE INSERT ON T_MEMBDGISBASE
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.mbdb_crtd IS NULL THEN
    :new.mbdb_crtd := curr_date;
  END IF;

  IF :new.mbdb_las_act_tim IS NULL THEN
    :new.mbdb_las_act_tim := curr_date;
  END IF;

  IF :new.mbdb_las_act IS NULL THEN
    :new.mbdb_las_act := 1;
  END IF;

  IF :new.mbdb_obj_stt IS NULL THEN
    :new.mbdb_obj_stt := 1;
  END IF;

  IF :new.mbdb_vers IS NULL THEN
    :new.mbdb_vers := 0;
  END IF;

  IF :new.mbdb_vsbt IS NULL THEN
    :new.mbdb_vsbt := 1001;
  END IF;

  IF :new.mbdb_las_act_by IS NULL THEN
    :new.mbdb_las_act_by := 1;
  END IF;

  IF :new.mbdb_origcrtr IS NULL THEN
    :new.mbdb_origcrtr := 1;
  END IF;

  IF :new.mbdb_origcrtrlogdin IS NULL THEN
    :new.mbdb_origcrtrlogdin := 1;
  END IF;

  IF :new.mbdb_las_act_by_logdin IS NULL THEN
    :new.mbdb_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_membdgisbase
  (
   mdss_prvsrfngtsk_prmn,
   mdss_ownr,
   mdss_prvsownr,
   mdss_prvssndr,
   mdss_prvsownrprmn,
   mdss_tnfr,
   mdss_prvstnfr,
   mdss_src__asmtcarecalc,
   mdss_src__pat_id_qry,
   cmdi_cm_base,
   cfds_cm_tmpt,
   cfds_the_brncact,
   mbdb_dgis,
   cfds_sentasmt,
   mdss_caudby,
   mdss_taknasmtcc,
   mdss_memb,
   cbdg_mdclclm,
   umad_umbs,
   cfds_amtn,
   mbdb_cstmflds,
   umds_dgisum_evnt,
   umds_snp,
   mdss_grp,
   classtype,
   mbdb_c4c_id,
   mbdb_crtd,
   mbdb_las_act,
   mbdb_las_act_actrtyp,
   mbdb_obj_stt,
   mbdb_vers,
   mbdb_vsbt,
   mbdb_dltddt,
   mbdb_las_act_by,
   mbdb_origcrtr,
   mbdb_origcrtrlogdin,
   mbdb_las_act_by_logdin,
   mbdb_univid,
   mbdb_resnor_cmmt,
   cfds_id,
   mdss_strtdt,
   mdss_end_dt,
   mdss_rslvdt,
   mdss_rstncmmt,
   mdss_is_pmrydgis,
   mdss_is_req_and_perfprovsame,
   mdss_is_sltd,
   mdss_is_err,
   mdss_src_usr_nam,
   mdss_err_txt,
   mdss_wkfwistcid,
   mdss_cnv_id,
   mdss_ownrchndflag,
   mdss_ownrchndcnt,
   mdss_src__src_typ,
   mdss_id,
   cbdg_id,
   umad_id,
   cmdi_id,
   umds_id,
   mdss_rfng
wkfwtsk,
   mdss_prvsrfngtsk,
   MPDS_PRBLM_DSCRP,
   MPDS_PRBLM_NAME,
   MPDS_PRBLM_COMMENT,
   MPDS_PRBLM_CLSRRSN,
   MPDS_PRBLM_STATUS,
   MPDS_PRBLM_GNRTD_FRM_SRC_ID,
   MPDS_PRBLM_SRC_ID,
   cfprblmds_sentasmt,
   prblm_caudby,
   prblm_taknasmtcc,
   mbdb_id,
   valid_from,
   valid_to ,
   mbdb_audid,
   mbdb_prev_audid,
   mbdb_next_audid,
   transaction_id
  )
  VALUES
  (
   :new.mdss_prvsrfngtsk_prmn,
   :new.mdss_ownr,
   :new.mdss_prvsownr,
   :new.mdss_prvssndr,
   :new.mdss_prvsownrprmn,
   :new.mdss_tnfr,
   :new.mdss_prvstnfr,
   :new.mdss_src__asmtcarecalc,
   :new.mdss_src__pat_id_qry,
   :new.cmdi_cm_base,
   :new.cfds_cm_tmpt,
   :new.cfds_the_brncact,
   :new.mbdb_dgis,
   :new.cfds_sentasmt,
   :new.mdss_caudby,
   :new.mdss_taknasmtcc,
   :new.mdss_memb,
   :new.cbdg_mdclclm,
   :new.umad_umbs,
   :new.cfds_amtn,
   :new.mbdb_cstmflds,
   :new.umds_dgisum_evnt,
   :new.umds_snp,
   :new.mdss_grp,
   :new.classtype,
   :new.mbdb_c4c_id,
   :new.mbdb_crtd,
   :new.mbdb_las_act,
   :new.mbdb_las_act_actrtyp,
   :new.mbdb_obj_stt,
   :new.mbdb_vers,
   :new.mbdb_vsbt,
   :new.mbdb_dltddt,
   :new.mbdb_las_act_by,
   :new.mbdb_origcrtr,
   :new.mbdb_origcrtrlogdin,
   :new.mbdb_las_act_by_logdin,
   :new.mbdb_univid,
   :new.mbdb_resnor_cmmt,
   :new.cfds_id,
   :new.mdss_strtdt,
   :new.mdss_end_dt,
   :new.mdss_rslvdt,
   :new.mdss_rstncmmt,
   :new.mdss_is_pmrydgis,
   :new.mdss_is_req_and_perfprovsame,
   :new.mdss_is_sltd,
   :new.mdss_is_err,
   :new.mdss_src_usr_nam,
   :new.mdss_err_txt,
   :new.mdss_wkfwistcid,
   :new.mdss_cnv_id,
   :new.mdss_ownrchndflag,
   :new.mdss_ownrchndcnt,
   :new.mdss_src__src_typ,
   :new.mdss_id,
   :new.cbdg_id,
   :new.umad_id,
   :new.cmdi_id,
   :new.umds_id,
   :new.mdss_rfngwkfwtsk,
   :new.mdss_prvsrfngtsk,
   :new.MPDS_PRBLM_DSCRP,
   :new.MPDS_PRBLM_NAME,
   :new.MPDS_PRBLM_COMMENT,
   :new.MPDS_PRBLM_CLSRRSN,
   :new.MPDS_PRBLM_STATUS,
   :new.MPDS_PRBLM_GNRTD_FRM_SRC_ID,
   :new.MPDS_PRBLM_SRC_ID,

   :new.cfprblmds_sentasmt,
   :new.prblm_caudby,
   :new.prblm_taknasmtcc,
   :new.mbdb_id,
   :new.mbdb_las_act_tim,
   NULL,
   u_membdgisbase.NEXTVAL,
   NULL,
   NULL,
   dbms_transaction.local_transaction_id
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
123
</td>
<td>
THH_C4C
</td>
<td>
TRG_MBDB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBDGISBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_MBDB_AUDITUPDATE BEFORE
  UPDATE
    ON T_MEMBDGISBASE REFERENCING NEW AS NEW OLD AS OLD FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mbdb_audid
      INTO
        last_audid
      FROM
        a_membdgisbase
      WHERE
        mbdb_id            = :old.mbdb_id
      AND mbdb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mbdb_las_act_tim = :new.mbdb_las_act_tim THEN
      UPDATE
        a_membdgisbase
      SET
        mbdb_cstmflds                = :new.mbdb_cstmflds,
        umds_dgisum_evnt             = :new.umds_dgisum_evnt,
        umds_snp                     = :new.umds_snp,
        mdss_grp                     = :new.mdss_grp,
        classtype                    = :new.classtype,
        mbdb_c4c_id                  = :new.mbdb_c4c_id,
        mbdb_crtd                    = :new.mbdb_crtd,
        mbdb_las_act                 = :new.mbdb_las_act,
        mbdb_las_act_actrtyp         = :new.mbdb_las_act_actrtyp,
        mbdb_obj_stt                 = :new.mbdb_obj_stt,
        mbdb_vers                    = :new.mbdb_vers,
        mbdb_vsbt                    = :new.mbdb_vsbt,
        mbdb_dltddt                  = :new.mbdb_dltddt,
        mbdb_las_act_by              = :new.mbdb_las_act_by,
        mbdb_origcrtr                = :new.mbdb_origcrtr,
        mbdb_origcrtrlogdin          = :new.mbdb_origcrtrlogdin,
        mbdb_las_act_by_logdin       = :new.mbdb_las_act_by_logdin,
        mbdb_univid                  = :new.mbdb_univid,
        mbdb_resnor_cmmt             = :new.mbdb_resnor_cmmt,
        cfds_id                      = :new.cfds_id,
        mdss_strtdt                  = :new.mdss_strtdt,
        mdss_end_dt                  = :new.mdss_end_dt,
        mdss_rslvdt                  = :new.mdss_rslvdt,
        mdss_rstncmmt                = :new.mdss_rstncmmt,

    mdss_is_pmrydgis             = :new.mdss_is_pmrydgis,
        mdss_is_req_and_perfprovsame = :new.mdss_is_req_and_perfprovsame,
        mdss_is_sltd                 = :new.mdss_is_sltd,
        mdss_is_err                  = :new.mdss_is_err,
        mdss_src_usr_nam             = :new.mdss_src_usr_nam,
        mdss_err_txt                 = :new.mdss_err_txt,
        mdss_wkfwistcid              = :new.mdss_wkfwistcid,
        mdss_cnv_id                  = :new.mdss_cnv_id,
        mdss_ownrchndflag            = :new.mdss_ownrchndflag,
        mdss_ownrchndcnt             = :new.mdss_ownrchndcnt,
        mdss_src__src_typ            = :new.mdss_src__src_typ,
        mdss_id                      = :new.mdss_id,
        cbdg_id                      = :new.cbdg_id,
        umad_id                      = :new.umad_id,
        cmdi_id                      = :new.cmdi_id,
        umds_id                      = :new.umds_id,
        mdss_rfngwkfwtsk             = :new.mdss_rfngwkfwtsk,
        mdss_prvsrfngtsk             = :new.mdss_prvsrfngtsk,
        mdss_prvsrfngtsk_prmn        = :new.mdss_prvsrfngtsk_prmn,
        mdss_ownr                    = :new.mdss_ownr,
        mdss_prvsownr                = :new.mdss_prvsownr,
        mdss_prvssndr                = :new.mdss_prvssndr,
        mdss_prvsownrprmn            = :new.mdss_prvsownrprmn,
        mdss_tnfr                    = :new.mdss_tnfr,
        mdss_prvstnfr                = :new.mdss_prvstnfr,
        mdss_src__asmtcarecalc       = :new.mdss_src__asmtcarecalc,
        mdss_src__pat_id_qry         = :new.mdss_src__pat_id_qry,
        cmdi_cm_base                 = :new.cmdi_cm_base,
        cfds_cm_tmpt                 = :new.cfds_cm_tmpt,
        cfds_the_brncact             = :new.cfds_the_brncact,
        mbdb_dgis                    = :new.mbdb_dgis,
        cfds_sentasmt                = :new.cfds_sentasmt,
        mdss_caudby                  = :new.mdss_caudby,
        mdss_taknasmtcc              =
 :new.mdss_taknasmtcc,
        mdss_memb                    = :new.mdss_memb,
        cbdg_mdclclm                 = :new.cbdg_mdclclm,
        umad_umbs                    = :new.umad_umbs,
        cfds_amtn                    = :new.cfds_amtn,
        MPDS_PRBLM_DSCRP             = :new.MPDS_PRBLM_DSCRP,
        MPDS_PRBLM_NAME              = :new.MPDS_PRBLM_NAME,
        MPDS_PRBLM_COMMENT           = :new.MPDS_PRBLM_COMMENT,
        MPDS_PRBLM_CLSRRSN           = :new.MPDS_PRBLM_CLSRRSN,
        MPDS_PRBLM_STATUS            = :new.MPDS_PRBLM_STATUS,
        MPDS_PRBLM_GNRTD_FRM_SRC_ID  = :new.MPDS_PRBLM_GNRTD_FRM_SRC_ID,
        MPDS_PRBLM_SRC_ID            = :new.MPDS_PRBLM_SRC_ID,
        cfprblmds_sentasmt           = :new.cfprblmds_sentasmt,
        prblm_caudby                 = :new.prblm_caudby,
        prblm_taknasmtcc             = :new.prblm_taknasmtcc
      WHERE
        mbdb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_membdgisbase
        (
          mbdb_cstmflds,
          umds_dgisum_evnt,
          umds_snp,
          mdss_grp,
          classtype,
          mbdb_c4c_id,
          mbdb_crtd,
          mbdb_las_act,
          mbdb_las_act_actrtyp,
          mbdb_obj_stt,
          mbdb_vers,
          mbdb_vsbt,
          mbdb_dltddt,
          mbdb_las_act_by,
          mbdb_origcrtr,
          mbdb_origcrtrlogdin,
          mbdb_las_act_by_logdin,
          mbdb_univid,
          mbdb_resnor_cmmt,
          cfds_id,
          mdss_strtdt,
          mdss_end_dt,
          mdss_rslvdt,
          mdss_rstncmmt,
          mdss_is_pmrydgis,
          mdss_is_req_and_perfprovsame,
          mdss_is_sltd,
          mdss_is_err,
          mdss_src_usr_nam,
          mdss_err_txt,
          mdss_wkfwistcid,
          mdss_cnv_id,
          mdss_ownrchndflag,
          mdss_ownrchndcnt,
          mdss_src__src_ty
p,
          mdss_id,
          cbdg_id,
          umad_id,
          cmdi_id,
          umds_id,
          mdss_rfngwkfwtsk,
          mdss_prvsrfngtsk,
          mdss_prvsrfngtsk_prmn,
          mdss_ownr,
          mdss_prvsownr,
          mdss_prvssndr,
          mdss_prvsownrprmn,
          mdss_tnfr,
          mdss_prvstnfr,
          mdss_src__asmtcarecalc,
          mdss_src__pat_id_qry,
          cmdi_cm_base,
          cfds_cm_tmpt,
          cfds_the_brncact,
          mbdb_dgis,
          cfds_sentasmt,
          mdss_caudby,
          mdss_taknasmtcc,
          mdss_memb,
          cbdg_mdclclm,
          umad_umbs,
          cfds_amtn,
          MPDS_PRBLM_DSCRP,
          MPDS_PRBLM_NAME,
          MPDS_PRBLM_COMMENT,
          MPDS_PRBLM_CLSRRSN,
          MPDS_PRBLM_STATUS,
          MPDS_PRBLM_GNRTD_FRM_SRC_ID,
          MPDS_PRBLM_SRC_ID,
          cfprblmds_sentasmt,
          prblm_caudby,
          prblm_taknasmtcc,
          mbdb_id,
          valid_from,
          valid_to,
          mbdb_audid,
          mbdb_prev_audid,
          mbdb_next_audid,
          transaction_id
        )
        VALUES
        (
          :new.mbdb_cstmflds,
          :new.umds_dgisum_evnt,
          :new.umds_snp,
          :new.mdss_grp,
          :new.classtype,
          :new.mbdb_c4c_id,
          :new.mbdb_crtd,
          :new.mbdb_las_act,
          :new.mbdb_las_act_actrtyp,
          :new.mbdb_obj_stt,
          :new.mbdb_vers,
          :new.mbdb_vsbt,
          :new.mbdb_dltddt,
          :new.mbdb_las_act_by,
          :new.mbdb_origcrtr,
          :new.mbdb_origcrtrlogdin,
          :new.mbdb_las_act_by_logdin,
          :new.mbdb_univid,
          :new.mbdb_resnor_cmmt,
          :new.cfds_id,
          :new.mdss_strtdt,
          :new.mdss_end_dt,
          :new.mdss_rslvdt,
          :new.mdss_rstncmmt,
          :new.mdss_is_pmrydgis,
          :new.mdss_is_req_and_perfprovsame,
          :new.mdss_is_sltd,
          :new.mdss_is_err,
          :n
ew.mdss_src_usr_nam,
          :new.mdss_err_txt,
          :new.mdss_wkfwistcid,
          :new.mdss_cnv_id,
          :new.mdss_ownrchndflag,
          :new.mdss_ownrchndcnt,
          :new.mdss_src__src_typ,
          :new.mdss_id,
          :new.cbdg_id,
          :new.umad_id,
          :new.cmdi_id,
          :new.umds_id,
          :new.mdss_rfngwkfwtsk,
          :new.mdss_prvsrfngtsk,
          :new.mdss_prvsrfngtsk_prmn,
          :new.mdss_ownr,
          :new.mdss_prvsownr,
          :new.mdss_prvssndr,
          :new.mdss_prvsownrprmn,
          :new.mdss_tnfr,
          :new.mdss_prvstnfr,
          :new.mdss_src__asmtcarecalc,
          :new.mdss_src__pat_id_qry,
          :new.cmdi_cm_base,
          :new.cfds_cm_tmpt,
          :new.cfds_the_brncact,
          :new.mbdb_dgis,
          :new.cfds_sentasmt,
          :new.mdss_caudby,
          :new.mdss_taknasmtcc,
          :new.mdss_memb,
          :new.cbdg_mdclclm,
          :new.umad_umbs,
          :new.cfds_amtn,
          :new.MPDS_PRBLM_DSCRP,
          :new.MPDS_PRBLM_NAME,
          :new.MPDS_PRBLM_COMMENT,
          :new.MPDS_PRBLM_CLSRRSN,
          :new.MPDS_PRBLM_STATUS,
          :new.MPDS_PRBLM_GNRTD_FRM_SRC_ID,
          :new.MPDS_PRBLM_SRC_ID,
          :new.cfprblmds_sentasmt,
          :new.prblm_caudby,
          :new.prblm_taknasmtcc,
          :new.mbdb_id,
          :new.mbdb_las_act_tim,
          NULL,
          u_membdgisbase.NEXTVAL,
          last_audid,
          NULL,
          dbms_transaction.local_transaction_id
        );
      /* update last audit records valid_to to new LastActionTime
      and next audit ID to newly inserted records sequence number
      */
      UPDATE
        a_membdgisbase
      SET
        valid_to        = :new.mbdb_las_act_tim,
        mbdb_next_audid = u_membdgisbase.CURRVAL
      WHERE
        mbdb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
124
</td>
<td>
THH_C4C
</td>
<td>
TRG_MBDB_DACMEMBER
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBDGISBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>

(nvl(new.MBDB_OBJ_STT,-1) &lt;&gt; nvl(old.MBDB_OBJ_STT,-1) and (new.MBDB_OBJ_STT =2 or old.MBDB_OBJ_STT=2) ) or
      nvl(new.umds_dgisum_evnt,-1) &lt;&gt;  nvl(old.umds_dgisum_evnt,-1)  or
      nvl(new.cmdi_cm_base,-1)     &lt;&gt;  nvl(old.cmdi_cm_base,-1)      or
      nvl(new.umad_umbs,-1)        &lt;&gt;  nvl(old.umad_umbs,-1)       or
      nvl(new.mdss_memb,-1)        &lt;&gt;  nvl(old.mdss_memb,-1)      or
      nvl(new.mbdb_dgis,-1)        &lt;&gt;  nvl(old.mbdb_dgis,-1)

</td>
<td>
ENABLED
</td>
<td>
TRG_MBDB_DACMEMBER
AFTER DELETE OR INSERT OR UPDATE
OF MBDB_OBJ_STT
  ,CMDI_CM_BASE
  ,MBDB_DGIS
  ,MDSS_MEMB
  ,UMAD_UMBS
  ,UMDS_DGISUM_EVNT
ON T_MEMBDGISBASE
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
declare
    t_membdgisbase_NEW_rec t_membdgisbase%rowtype;
    t_membdgisbase_OLD_rec t_membdgisbase%rowtype;
   begin
    t_membdgisbase_NEW_rec.&quot;CBDG_MDCLCLM&quot; := :new.&quot;CBDG_MDCLCLM&quot;;
    t_membdgisbase_NEW_rec.&quot;CLASSTYPE&quot; := :new.&quot;CLASSTYPE&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_C4C_ID&quot; := :new.&quot;MBDB_C4C_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_CRTD&quot; := :new.&quot;MBDB_CRTD&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_LAS_ACT&quot; := :new.&quot;MBDB_LAS_ACT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_LAS_ACT_ACTRTYP&quot; := :new.&quot;MBDB_LAS_ACT_ACTRTYP&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_LAS_ACT_TIM&quot; := :new.&quot;MBDB_LAS_ACT_TIM&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_OBJ_STT&quot; := :new.&quot;MBDB_OBJ_STT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_VERS&quot; := :new.&quot;MBDB_VERS&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_VSBT&quot; := :new.&quot;MBDB_VSBT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_DLTDDT&quot; := :new.&quot;MBDB_DLTDDT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_LAS_ACT_BY&quot; := :new.&quot;MBDB_LAS_ACT_BY&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_ORIGCRTR&quot; := :new.&quot;MBDB_ORIGCRTR&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_ORIGCRTRLOGDIN&quot; := :new.&quot;MBDB_ORIGCRTRLOGDIN&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_LAS_ACT_BY_LOGDIN&quot; := :new.&quot;MBDB_LAS_ACT_BY_LOGDIN&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_UNIVID&quot; := :new.&quot;MBDB_UNIVID&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_RESNOR_CMMT&quot; := :new.&quot;MBDB_RESNOR_CMMT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_ID&quot; := :new.&quot;MBDB_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;CFDS_ID&quot; := :new.&quot;CFDS_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_STRTDT&quot; := :new.&quot;MDSS_STRTDT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_END_DT&quot; := :new.&quot;MDSS_END_DT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_RSLVDT&quot; := :new.&quot;MDSS_RSLVDT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_RSTNCMMT&quot; := :new.&quot;MDSS_RSTNCMMT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_IS_PMRYDGIS&quot; := :new.&quot;MDSS_IS_PMRYDGIS&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_IS_REQ_AND_PERFPROVSAME&quot; := :new.&quot;MDSS_IS_REQ_AND_PERFPROVSAME&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_IS_SLTD&quot; := :new.&quot;MDSS_IS_SLTD&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_IS_ERR&quot; := :new.&quot;MDSS_IS_ERR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_SRC_USR_
NAM&quot; := :new.&quot;MDSS_SRC_USR_NAM&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_ERR_TXT&quot; := :new.&quot;MDSS_ERR_TXT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_WKFWISTCID&quot; := :new.&quot;MDSS_WKFWISTCID&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_CNV_ID&quot; := :new.&quot;MDSS_CNV_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_OWNRCHNDFLAG&quot; := :new.&quot;MDSS_OWNRCHNDFLAG&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_OWNRCHNDCNT&quot; := :new.&quot;MDSS_OWNRCHNDCNT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_SRC__SRC_TYP&quot; := :new.&quot;MDSS_SRC__SRC_TYP&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_ID&quot; := :new.&quot;MDSS_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;CBDG_ID&quot; := :new.&quot;CBDG_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;UMAD_ID&quot; := :new.&quot;UMAD_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;CMDI_ID&quot; := :new.&quot;CMDI_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;UMDS_ID&quot; := :new.&quot;UMDS_ID&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_RFNGWKFWTSK&quot; := :new.&quot;MDSS_RFNGWKFWTSK&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSRFNGTSK&quot; := :new.&quot;MDSS_PRVSRFNGTSK&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSRFNGTSK_PRMN&quot; := :new.&quot;MDSS_PRVSRFNGTSK_PRMN&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_OWNR&quot; := :new.&quot;MDSS_OWNR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSOWNR&quot; := :new.&quot;MDSS_PRVSOWNR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSSNDR&quot; := :new.&quot;MDSS_PRVSSNDR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSOWNRPRMN&quot; := :new.&quot;MDSS_PRVSOWNRPRMN&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_TNFR&quot; := :new.&quot;MDSS_TNFR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_PRVSTNFR&quot; := :new.&quot;MDSS_PRVSTNFR&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_SRC__ASMTCARECALC&quot; := :new.&quot;MDSS_SRC__ASMTCARECALC&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_SRC__PAT_ID_QRY&quot; := :new.&quot;MDSS_SRC__PAT_ID_QRY&quot;;
    t_membdgisbase_NEW_rec.&quot;CMDI_CM_BASE&quot; := :new.&quot;CMDI_CM_BASE&quot;;
    t_membdgisbase_NEW_rec.&quot;CFDS_CM_TMPT&quot; := :new.&quot;CFDS_CM_TMPT&quot;;
    t_membdgisbase_NEW_rec.&quot;CFDS_THE_BRNCACT&quot; := :new.&quot;CFDS_THE_BRNCACT&quot;;
    t_membdgisbase_NEW_rec.&quot;MBDB_DGIS&quot; := :new.&quot;MBDB_DGIS&quot;;
    t_membdgisbase_NEW_rec.&quot;CFDS_SENTASMT&quot; := :new.&quot;CFDS_SENTASMT&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_CAUDBY&quot; := :new.&quot;MDSS_CAUDBY&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_TAKNASMTCC&quot; := :new.&quot;MDSS_TA
KNASMTCC&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_MEMB&quot; := :new.&quot;MDSS_MEMB&quot;;
    t_membdgisbase_NEW_rec.&quot;UMAD_UMBS&quot; := :new.&quot;UMAD_UMBS&quot;;
    t_membdgisbase_NEW_rec.&quot;CFDS_AMTN&quot; := :new.&quot;CFDS_AMTN&quot;;
    t_membdgisbase_NEW_rec.&quot;UMDS_DGISUM_EVNT&quot; := :new.&quot;UMDS_DGISUM_EVNT&quot;;
    t_membdgisbase_NEW_rec.&quot;UMDS_SNP&quot; := :new.&quot;UMDS_SNP&quot;;
    t_membdgisbase_NEW_rec.&quot;MDSS_GRP&quot; := :new.&quot;MDSS_GRP&quot;;
    t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_DSCRP&quot; := :new.&quot;MPDS_PRBLM_DSCRP&quot;;
    t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_NAME&quot; := :new.&quot;MPDS_PRBLM_NAME&quot;;
	t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_COMMENT&quot; := :new.&quot;MPDS_PRBLM_COMMENT&quot;;
    t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_CLSRRSN&quot; := :new.&quot;MPDS_PRBLM_CLSRRSN&quot;;
	t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_STATUS&quot; := :new.&quot;MPDS_PRBLM_STATUS&quot;;
	t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_GNRTD_FRM_SRC_ID&quot; := :new.&quot;MPDS_PRBLM_GNRTD_FRM_SRC_ID&quot;;
	t_membdgisbase_NEW_rec.&quot;MPDS_PRBLM_SRC_ID&quot; := :new.&quot;MPDS_PRBLM_SRC_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;CBDG_MDCLCLM&quot; := :old.&quot;CBDG_MDCLCLM&quot;;
    t_membdgisbase_OLD_rec.&quot;CLASSTYPE&quot; := :old.&quot;CLASSTYPE&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_C4C_ID&quot; := :old.&quot;MBDB_C4C_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_CRTD&quot; := :old.&quot;MBDB_CRTD&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_LAS_ACT&quot; := :old.&quot;MBDB_LAS_ACT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_LAS_ACT_ACTRTYP&quot; := :old.&quot;MBDB_LAS_ACT_ACTRTYP&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_LAS_ACT_TIM&quot; := :old.&quot;MBDB_LAS_ACT_TIM&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_OBJ_STT&quot; := :old.&quot;MBDB_OBJ_STT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_VERS&quot; := :old.&quot;MBDB_VERS&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_VSBT&quot; := :old.&quot;MBDB_VSBT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_DLTDDT&quot; := :old.&quot;MBDB_DLTDDT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_LAS_ACT_BY&quot; := :old.&quot;MBDB_LAS_ACT_BY&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_ORIGCRTR&quot; := :old.&quot;MBDB_ORIGCRTR&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_ORIGCRTRLOGDIN&quot; := :old.&quot;MBDB_ORIGCRTRLOGDIN&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_LAS_ACT_BY_LOGDIN&quot; := :old.&quot;MBDB_LAS_ACT_BY_LOGDIN&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_UNIVID&quot; := :old.&quot;MBD
B_UNIVID&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_RESNOR_CMMT&quot; := :old.&quot;MBDB_RESNOR_CMMT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_ID&quot; := :old.&quot;MBDB_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;CFDS_ID&quot; := :old.&quot;CFDS_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_STRTDT&quot; := :old.&quot;MDSS_STRTDT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_END_DT&quot; := :old.&quot;MDSS_END_DT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_RSLVDT&quot; := :old.&quot;MDSS_RSLVDT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_RSTNCMMT&quot; := :old.&quot;MDSS_RSTNCMMT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_IS_PMRYDGIS&quot; := :old.&quot;MDSS_IS_PMRYDGIS&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_IS_REQ_AND_PERFPROVSAME&quot; := :old.&quot;MDSS_IS_REQ_AND_PERFPROVSAME&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_IS_SLTD&quot; := :old.&quot;MDSS_IS_SLTD&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_IS_ERR&quot; := :old.&quot;MDSS_IS_ERR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_SRC_USR_NAM&quot; := :old.&quot;MDSS_SRC_USR_NAM&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_ERR_TXT&quot; := :old.&quot;MDSS_ERR_TXT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_WKFWISTCID&quot; := :old.&quot;MDSS_WKFWISTCID&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_CNV_ID&quot; := :old.&quot;MDSS_CNV_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_OWNRCHNDFLAG&quot; := :old.&quot;MDSS_OWNRCHNDFLAG&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_OWNRCHNDCNT&quot; := :old.&quot;MDSS_OWNRCHNDCNT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_SRC__SRC_TYP&quot; := :old.&quot;MDSS_SRC__SRC_TYP&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_ID&quot; := :old.&quot;MDSS_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;CBDG_ID&quot; := :old.&quot;CBDG_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;UMAD_ID&quot; := :old.&quot;UMAD_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;CMDI_ID&quot; := :old.&quot;CMDI_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;UMDS_ID&quot; := :old.&quot;UMDS_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_RFNGWKFWTSK&quot; := :old.&quot;MDSS_RFNGWKFWTSK&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_PRVSRFNGTSK&quot; := :old.&quot;MDSS_PRVSRFNGTSK&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_PRVSRFNGTSK_PRMN&quot; := :old.&quot;MDSS_PRVSRFNGTSK_PRMN&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_OWNR&quot; := :old.&quot;MDSS_OWNR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_PRVSOWNR&quot; := :old.&quot;MDSS_PRVSOWNR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_PRVSSNDR&quot; := :old.&quot;MDSS_PRVSSNDR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDS
S_PRVSOWNRPRMN&quot; := :old.&quot;MDSS_PRVSOWNRPRMN&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_TNFR&quot; := :old.&quot;MDSS_TNFR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_PRVSTNFR&quot; := :old.&quot;MDSS_PRVSTNFR&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_SRC__ASMTCARECALC&quot; := :old.&quot;MDSS_SRC__ASMTCARECALC&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_SRC__PAT_ID_QRY&quot; := :old.&quot;MDSS_SRC__PAT_ID_QRY&quot;;
    t_membdgisbase_OLD_rec.&quot;CMDI_CM_BASE&quot; := :old.&quot;CMDI_CM_BASE&quot;;
    t_membdgisbase_OLD_rec.&quot;CFDS_CM_TMPT&quot; := :old.&quot;CFDS_CM_TMPT&quot;;
    t_membdgisbase_OLD_rec.&quot;CFDS_THE_BRNCACT&quot; := :old.&quot;CFDS_THE_BRNCACT&quot;;
    t_membdgisbase_OLD_rec.&quot;MBDB_DGIS&quot; := :old.&quot;MBDB_DGIS&quot;;
    t_membdgisbase_OLD_rec.&quot;CFDS_SENTASMT&quot; := :old.&quot;CFDS_SENTASMT&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_CAUDBY&quot; := :old.&quot;MDSS_CAUDBY&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_TAKNASMTCC&quot; := :old.&quot;MDSS_TAKNASMTCC&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_MEMB&quot; := :old.&quot;MDSS_MEMB&quot;;
    t_membdgisbase_OLD_rec.&quot;UMAD_UMBS&quot; := :old.&quot;UMAD_UMBS&quot;;
    t_membdgisbase_OLD_rec.&quot;CFDS_AMTN&quot; := :old.&quot;CFDS_AMTN&quot;;
    t_membdgisbase_OLD_rec.&quot;UMDS_DGISUM_EVNT&quot; := :old.&quot;UMDS_DGISUM_EVNT&quot;;
    t_membdgisbase_OLD_rec.&quot;UMDS_SNP&quot; := :old.&quot;UMDS_SNP&quot;;
    t_membdgisbase_OLD_rec.&quot;MDSS_GRP&quot; := :old.&quot;MDSS_GRP&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_DSCRP&quot; := :old.&quot;MPDS_PRBLM_DSCRP&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_NAME&quot; := :old.&quot;MPDS_PRBLM_NAME&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_COMMENT&quot; := :old.&quot;MPDS_PRBLM_COMMENT&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_CLSRRSN&quot; := :old.&quot;MPDS_PRBLM_CLSRRSN&quot;;
	t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_STATUS&quot; := :old.&quot;MPDS_PRBLM_STATUS&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_GNRTD_FRM_SRC_ID&quot; := :old.&quot;MPDS_PRBLM_GNRTD_FRM_SRC_ID&quot;;
    t_membdgisbase_OLD_rec.&quot;MPDS_PRBLM_SRC_ID&quot; := :old.&quot;MPDS_PRBLM_SRC_ID&quot;;
	/*CP-352 */
	t_membdgisbase_NEW_rec.&quot;CFPRBLMDS_SENTASMT&quot; := :new.&quot;CFPRBLMDS_SENTASMT&quot;;
    t_membdgisbase_NEW_rec.&quot;PRBLM_CAUDBY&quot; := :new.&quot;PRBLM_CAUDBY&quot;;
    t_membdgisbase_NEW_rec.&quot;PRBLM_TAKNASMTCC&quot; := :new.&quot;PRBLM_TAKNASMTCC&quot;;
    pkg_dac_aggr.RowProcessForDIAG_MEMB(t_me
mbdgisbase_OLD_rec,t_membdgisbase_NEW_rec);
   end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
125
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_MEMBDGISBASE
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBDGISBASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_MEMBDGISBASE
AFTER INSERT OR UPDATE ON T_MEMBDGISBASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
   var1 VARCHAR2(4000);
  BEGIN
      -- event (diagnosis-event)
       var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
               '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID = :2)';
       EXECUTE IMMEDIATE var1 USING 'P', :NEW.UMDS_DGISUM_EVNT;
  END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
126
</td>
<td>
THH_C4C
</td>
<td>
TRG_MPDT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_MPDT_AUDITINSERT&quot; BEFORE INSERT ON T_MEMBPAYRDAT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.mpdt_crtd IS NULL THEN 
    :new.mpdt_crtd := curr_date; 
  END IF; 

  IF :new.mpdt_las_act_tim IS NULL THEN 
    :new.mpdt_las_act_tim := curr_date; 
  END IF; 

  IF :new.mpdt_las_act IS NULL THEN 
    :new.mpdt_las_act := 1; 
  END IF; 

  IF :new.mpdt_obj_stt IS NULL THEN 
    :new.mpdt_obj_stt := 1; 
  END IF; 

  IF :new.mpdt_vers IS NULL THEN 
    :new.mpdt_vers := 0; 
  END IF; 

  IF :new.mpdt_vsbt IS NULL THEN 
    :new.mpdt_vsbt := 1001; 
  END IF; 

  IF :new.mpdt_las_act_by IS NULL THEN 
    :new.mpdt_las_act_by := 1; 
  END IF; 

  IF :new.mpdt_origcrtr IS NULL THEN 
    :new.mpdt_origcrtr := 1; 
  END IF; 

  IF :new.mpdt_origcrtrlogdin IS NULL THEN 
    :new.mpdt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.mpdt_las_act_by_logdin IS NULL THEN 
    :new.mpdt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_membpayrdat 
  ( 
   classtype, 
   mpdt_c4c_id, 
   mpdt_crtd, 
   mpdt_las_act, 
   mpdt_las_act_actrtyp, 
   mpdt_obj_stt, 
   mpdt_vers, 
   mpdt_vsbt, 
   mpdt_dltddt, 
   mpdt_las_act_by, 
   mpdt_origcrtr, 
   mpdt_origcrtrlogdin, 
   mpdt_las_act_by_logdin, 
   mpdt_univid, 
   mpdt_frstnam, 
   mpdt_mdlenam, 
   mpdt_las_nam, 
   mpdt_dt_of_brth, 
   mpdt_dt_of_dth, 
   mpdt_gndrcode, 
   mpdt_elbl, 
   mpdt_cntnof_bens, 
   mpdt_cntnof_bensnam, 
   mpdt_pmryinsr, 
   mpdt_inscid_at_othrinsr, 
   mpdt_crdtind, 
   mpdt_inscid, 
   mpdt_scl_sctynmbr, 
   mpdt_cnctinfopayrdat, 
   mpdt_pcp_pvdr, 
   mpdt_id, 
   valid_from, 
   valid_to , 
   mpdt_audid, 
   mpdt_prev_audid, 
   mpdt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.mpdt_c4c_id,
   :new.mpdt_crtd,
   :new.mpdt_las_act,
   :new.mpdt_las_act_actrtyp,
   :new.mpdt_obj_stt,
   :new.mpdt_vers,
   :new.mpdt_vsbt,
   :new.mpdt_dltddt,
   :new.mpdt_las_act_by,
   :new.mpdt_origcrtr,
   :new.mpdt_origcrtrlogdin,
   :new.mpdt_las_act_by_logdin,
   :new.mpdt_univid,
   :new.mpd
t_frstnam,
   :new.mpdt_mdlenam,
   :new.mpdt_las_nam,
   :new.mpdt_dt_of_brth,
   :new.mpdt_dt_of_dth,
   :new.mpdt_gndrcode,
   :new.mpdt_elbl,
   :new.mpdt_cntnof_bens,
   :new.mpdt_cntnof_bensnam,
   :new.mpdt_pmryinsr,
   :new.mpdt_inscid_at_othrinsr,
   :new.mpdt_crdtind,
   :new.mpdt_inscid,
   :new.mpdt_scl_sctynmbr,
   :new.mpdt_cnctinfopayrdat,
   :new.mpdt_pcp_pvdr, 
   :new.mpdt_id, 
   :new.mpdt_las_act_tim, 
   NULL, 
   u_membpayrdat.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
127
</td>
<td>
THH_C4C
</td>
<td>
TRG_MPDT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mpdt_auditupdate BEFORE
  UPDATE
    ON T_MEMBPAYRDAT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mpdt_audid
      INTO
        last_audid
      FROM
        a_membpayrdat
      WHERE
        mpdt_id            = :old.mpdt_id
      AND mpdt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mpdt_las_act_tim = :new.mpdt_las_act_tim THEN
      UPDATE
        a_membpayrdat
      SET
        mpdt_las_act            = :new.mpdt_las_act,
        mpdt_las_act_actrtyp    = :new.mpdt_las_act_actrtyp,
        mpdt_obj_stt            = :new.mpdt_obj_stt,
        mpdt_vers               = :new.mpdt_vers,
        mpdt_vsbt               = :new.mpdt_vsbt,
        mpdt_dltddt             = :new.mpdt_dltddt,
        mpdt_las_act_by         = :new.mpdt_las_act_by,
        mpdt_origcrtr           = :new.mpdt_origcrtr,
        mpdt_origcrtrlogdin     = :new.mpdt_origcrtrlogdin,
        mpdt_las_act_by_logdin  = :new.mpdt_las_act_by_logdin,
        mpdt_univid             = :new.mpdt_univid,
        mpdt_frstnam            = :new.mpdt_frstnam,
        mpdt_mdlenam            = :new.mpdt_mdlenam,
        mpdt_las_nam            = :new.mpdt_las_nam,
        mpdt_dt_of_brth         = :new.mpdt_dt_of_brth,
        mpdt_dt_of_dth          = :new.mpdt_dt_of_dth,
        mpdt_gndrcode           = :new.mpdt_gndrcode,
        mpdt_elbl               = :new.mpdt_elbl,
        mpdt_cntnof_bens        = :new.mpdt_cntnof_bens,
        mpdt_cntnof_bensnam     = :new.mpdt_cntnof_bensnam,
        mpdt_pmryinsr           = :new.mpdt_pmryinsr,
        mpdt_inscid_at_othrinsr = :new.mpdt_inscid_at_othrinsr,
        mpdt_crdtind            = :new.mpdt_crdtind,
        mpdt_inscid             = :new.mpdt_inscid,
        mpdt_scl_sctynmbr       = :new.mpdt_scl_sctynmbr,
        mpdt_cnctinfopayrdat
  = :new.mpdt_cnctinfopayrdat,
        mpdt_pcp_pvdr           = :new.mpdt_pcp_pvdr,
        classtype               = :new.classtype,
        mpdt_c4c_id             = :new.mpdt_c4c_id,
        mpdt_crtd               = :new.mpdt_crtd
      WHERE
        mpdt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_membpayrdat
        (
          mpdt_las_act,
          mpdt_las_act_actrtyp,
          mpdt_obj_stt,
          mpdt_vers,
          mpdt_vsbt,
          mpdt_dltddt,
          mpdt_las_act_by,
          mpdt_origcrtr,
          mpdt_origcrtrlogdin,
          mpdt_las_act_by_logdin,
          mpdt_univid,
          mpdt_frstnam,
          mpdt_mdlenam,
          mpdt_las_nam,
          mpdt_dt_of_brth,
          mpdt_dt_of_dth,
          mpdt_gndrcode,
          mpdt_elbl,
          mpdt_cntnof_bens,
          mpdt_cntnof_bensnam,
          mpdt_pmryinsr,
          mpdt_inscid_at_othrinsr,
          mpdt_crdtind,
          mpdt_inscid,
          mpdt_scl_sctynmbr,
          mpdt_cnctinfopayrdat,
          mpdt_pcp_pvdr,
          classtype,
          mpdt_c4c_id,
          mpdt_crtd,
          mpdt_id,
          valid_from,
          valid_to,
          mpdt_audid,
          mpdt_prev_audid,
          mpdt_next_audid
        )
        VALUES
        (
          :new.mpdt_las_act,
          :new.mpdt_las_act_actrtyp,
          :new.mpdt_obj_stt,
          :new.mpdt_vers,
          :new.mpdt_vsbt,
          :new.mpdt_dltddt,
          :new.mpdt_las_act_by,
          :new.mpdt_origcrtr,
          :new.mpdt_origcrtrlogdin,
          :new.mpdt_las_act_by_logdin,
          :new.mpdt_univid,
          :new.mpdt_frstnam,
          :new.mpdt_mdlenam,
          :new.mpdt_las_nam,
          :new.mpdt_dt_of_brth,
          :new.mpdt_dt_of_dth,
          :new.mpdt_gndrcode,
          :new.mpdt_elbl,
          :new.mpdt_cntnof_bens,

     :new.mpdt_cntnof_bensnam,
          :new.mpdt_pmryinsr,
          :new.mpdt_inscid_at_othrinsr,
          :new.mpdt_crdtind,
          :new.mpdt_inscid,
          :new.mpdt_scl_sctynmbr,
          :new.mpdt_cnctinfopayrdat,
          :new.mpdt_pcp_pvdr,
          :new.classtype,
          :new.mpdt_c4c_id,
          :new.mpdt_crtd,
          :new.mpdt_id,
          :new.mpdt_las_act_tim,
          NULL,
          u_membpayrdat.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_membpayrdat
      SET
        valid_to        = :new.mpdt_las_act_tim,
        mpdt_next_audid = u_membpayrdat.CURRVAL
      WHERE
        mpdt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
128
</td>
<td>
THH_C4C
</td>
<td>
TRG_MPCP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBPCP
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_MPCP_AUDITINSERT&quot; BEFORE INSERT ON T_MEMBPCP FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.mpcp_crtd IS NULL THEN 
    :new.mpcp_crtd := curr_date; 
  END IF; 

  IF :new.mpcp_las_act_tim IS NULL THEN 
    :new.mpcp_las_act_tim := curr_date; 
  END IF; 

  IF :new.mpcp_las_act IS NULL THEN 
    :new.mpcp_las_act := 1; 
  END IF; 

  IF :new.mpcp_obj_stt IS NULL THEN 
    :new.mpcp_obj_stt := 1; 
  END IF; 

  IF :new.mpcp_vers IS NULL THEN 
    :new.mpcp_vers := 0; 
  END IF; 

  IF :new.mpcp_vsbt IS NULL THEN 
    :new.mpcp_vsbt := 1001; 
  END IF; 

  IF :new.mpcp_las_act_by IS NULL THEN 
    :new.mpcp_las_act_by := 1; 
  END IF; 

  IF :new.mpcp_origcrtr IS NULL THEN 
    :new.mpcp_origcrtr := 1; 
  END IF; 

  IF :new.mpcp_origcrtrlogdin IS NULL THEN 
    :new.mpcp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.mpcp_las_act_by_logdin IS NULL THEN 
    :new.mpcp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_membpcp 
  ( 
   classtype, 
   mpcp_c4c_id, 
   mpcp_crtd, 
   mpcp_las_act, 
   mpcp_las_act_actrtyp, 
   mpcp_obj_stt, 
   mpcp_vers, 
   mpcp_vsbt, 
   mpcp_dltddt, 
   mpcp_las_act_by, 
   mpcp_origcrtr, 
   mpcp_origcrtrlogdin, 
   mpcp_las_act_by_logdin, 
   mpcp_univid, 
   mpcp_strtdt, 
   mpcp_memb, 
   mpcp_pvdr, 
   mpcp_id, 
   valid_from, 
   valid_to , 
   mpcp_audid, 
   mpcp_prev_audid, 
   mpcp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.mpcp_c4c_id,
   :new.mpcp_crtd,
   :new.mpcp_las_act,
   :new.mpcp_las_act_actrtyp,
   :new.mpcp_obj_stt,
   :new.mpcp_vers,
   :new.mpcp_vsbt,
   :new.mpcp_dltddt,
   :new.mpcp_las_act_by,
   :new.mpcp_origcrtr,
   :new.mpcp_origcrtrlogdin,
   :new.mpcp_las_act_by_logdin,
   :new.mpcp_univid,
   :new.mpcp_strtdt,
   :new.mpcp_memb,
   :new.mpcp_pvdr, 
   :new.mpcp_id, 
   :new.mpcp_las_act_tim, 
   NULL, 
   u_membpcp.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
129
</td>
<td>
THH_C4C
</td>
<td>
TRG_MPCP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_MEMBPCP
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_mpcp_auditupdate BEFORE
  UPDATE
    ON T_MEMBPCP FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        mpcp_audid
      INTO
        last_audid
      FROM
        a_membpcp
      WHERE
        mpcp_id            = :old.mpcp_id
      AND mpcp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.mpcp_las_act_tim = :new.mpcp_las_act_tim THEN
      UPDATE
        a_membpcp
      SET
        classtype              = :new.classtype,
        mpcp_c4c_id            = :new.mpcp_c4c_id,
        mpcp_crtd              = :new.mpcp_crtd,
        mpcp_las_act           = :new.mpcp_las_act,
        mpcp_las_act_actrtyp   = :new.mpcp_las_act_actrtyp,
        mpcp_obj_stt           = :new.mpcp_obj_stt,
        mpcp_vers              = :new.mpcp_vers,
        mpcp_vsbt              = :new.mpcp_vsbt,
        mpcp_dltddt            = :new.mpcp_dltddt,
        mpcp_las_act_by        = :new.mpcp_las_act_by,
        mpcp_origcrtr          = :new.mpcp_origcrtr,
        mpcp_origcrtrlogdin    = :new.mpcp_origcrtrlogdin,
        mpcp_las_act_by_logdin = :new.mpcp_las_act_by_logdin,
        mpcp_univid            = :new.mpcp_univid,
        mpcp_strtdt            = :new.mpcp_strtdt,
        mpcp_memb              = :new.mpcp_memb,
        mpcp_pvdr              = :new.mpcp_pvdr
      WHERE
        mpcp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_membpcp
        (
          classtype,
          mpcp_c4c_id,
          mpcp_crtd,
          mpcp_las_act,
          mpcp_las_act_actrtyp,
          mpcp_obj_stt,
          mpcp_vers,
          mpcp_vsbt,
          mpcp_dltddt,
          mpcp_las_act_by,
          mpcp_origcrtr,
          mpcp_origcrtrlogdin,

          mpcp_las_act_by_logdin,
          mpcp_univid,
          mpcp_strtdt,
          mpcp_memb,
          mpcp_pvdr,
          mpcp_id,
          valid_from,
          valid_to,
          mpcp_audid,
          mpcp_prev_audid,
          mpcp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.mpcp_c4c_id,
          :new.mpcp_crtd,
          :new.mpcp_las_act,
          :new.mpcp_las_act_actrtyp,
          :new.mpcp_obj_stt,
          :new.mpcp_vers,
          :new.mpcp_vsbt,
          :new.mpcp_dltddt,
          :new.mpcp_las_act_by,
          :new.mpcp_origcrtr,
          :new.mpcp_origcrtrlogdin,
          :new.mpcp_las_act_by_logdin,
          :new.mpcp_univid,
          :new.mpcp_strtdt,
          :new.mpcp_memb,
          :new.mpcp_pvdr,
          :new.mpcp_id,
          :new.mpcp_las_act_tim,
          NULL,
          u_membpcp.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_membpcp
      SET
        valid_to        = :new.mpcp_las_act_tim,
        mpcp_next_audid = u_membpcp.CURRVAL
      WHERE
        mpcp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
130
</td>
<td>
THH_C4C
</td>
<td>
TRG_NOTE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NOTE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_note before insert or update on t_note
for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
    v_affiliation_id number(19,0);
    v_member_id number(19,0);
    v_classtype varchar2(255);
	v_case_aff_id number(19,0);
	v_um_aff_id number(19,0);

  begin

    -- Member
    if :new.note_memb is not null then
      select usr.classtype, usr.usr_id into v_classtype, v_member_id
      from t_usr usr
      where :new.note_memb = usr.mbur_id;
      if v_classtype is not null then
        :new.affiliation_type := 'Member';
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
        :new.affiliation_id := v_member_id;
      end if;
      if :new.note_membnotetyp is not null then
        :new.note_type := :new.note_membnotetyp;
      end if;
    end if;

    -- Case / Case Request
    if :new.note_cm_base is not null then
      select cm.classtype, cm.cmbs_id, cm.cmbs_memb into v_classtype, v_affiliation_id, v_member_id
      from t_cm_basebase cm
      where :new.note_cm_base = cm.cmbs_id;
      if v_classtype is not null then
        :new.affiliation_type := v_classtype;
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_casenotetyp is not null then
        :new.note_type := :new.note_casenotetyp;
        --:new.affiliation_type := 'Case';
      end if;
      if :new.note_cm_notetyp is not null then
        :new.note_type := :new.note_cm_notetyp;
        --:new.affiliation_type := 'CMProject';
      end if;
    end if;

    -- Authorization (UM)
    IF (:new.note_um_basenote IS NOT NULL) THEN
      :new.affiliation_id := :new.note_um_basenote;
      :new.affiliation_type := 'UMEvent';

      IF (:new.note_um_notetyp IS NOT NULL) THEN
        :new.note_type := :new.note_um_notetyp;
      END IF;

      -- hijacking the note_memb column to avoid
      -- changing lots of layers to support the member_id column
      -- move the member id from the
 note_memb to the member_id column
      IF (:new.note_memb IS NOT NULL) THEN
        :new.member_id := :new.note_memb;
        :new.note_memb := NULL;
      END IF;

      -- preserving UM note creation where we are able to lookup
      -- the member id from the t_um_base table the hijack above
      -- was due to cases where the t_um_base records was not yet persisted
      IF (:new.member_id IS NULL) THEN
        SELECT um.umbs_memb
        INTO   v_member_id
        FROM   t_um_base um
        WHERE  :new.note_um_basenote = um.umbs_id;

        :new.member_id := v_member_id;
      END IF;

    END IF;

    -- Diagnosis
    if :new.note_notedgis is not null then
      select diag.classtype, diag.mbdb_id, diag.mdss_memb into v_classtype, v_affiliation_id, v_member_id
      from t_membdgisbase diag
      where :new.note_notedgis = diag.mbdb_id;
      :new.affiliation_id := :new.note_notedgis;
      if v_classtype is not null then
        :new.affiliation_type := 'UMDiagnosis';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_um_notetyp is not null then
        :new.note_type := :new.note_um_notetyp;
      end if;
    end if;

    -- Medical Service associated with a Diagnosis
    if :new.note_mdclsrvc is not null then
      select apbl.classtype, apbl.msrv_id, diag.mdss_memb into v_classtype, v_affiliation_id, v_member_id
      from t_apbl apbl
      left outer join t_membdgisbase diag on msrv_srvcdgis = mbdb_id
      where :new.note_mdclsrvc = apbl.msrv_id;
      if v_classtype is not null then
        :new.affiliation_type := 'MedicalService';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_um_notetyp is no
t null then
        :new.note_type := :new.note_um_notetyp;
      end if;
    end if;

    -- Medical Service associated with a UM Event (CAREMGR-19252)
    if :new.note_mdclsrvc is not null then
      select apbl.classtype, apbl.msrv_id, auth.umbs_memb into v_classtype, v_affiliation_id, v_member_id
      from t_apbl apbl
      left outer join t_um_base auth on apbl.apbl_umevent = auth.umbs_id
      where :new.note_mdclsrvc = apbl.msrv_id;
      if v_classtype is not null then
        :new.affiliation_type := 'MedicalService';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_um_notetyp is not null then
        :new.note_type := :new.note_um_notetyp;
      end if;
    end if;

    -- Extension
    if :new.note_um_extn is not null then
      select extn.classtype, extn.umxt_id, um.umbs_memb into v_classtype, v_affiliation_id, v_member_id
      from t_apbl extn
      inner join t_um_base um on extn.umxt_prntevnt = um.umbs_id
      where :new.note_um_extn = extn.umxt_id;
      if v_classtype is not null then
        :new.affiliation_type := 'UMExtension';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_um_notetyp is not null then
        :new.note_type := :new.note_um_notetyp;
      end if;
    end if;


    if :new.note_careplan_notetype is not null then
      -- Care Plan
    /*  if :new.note_careplan_notetype = 93007 then
        select cp.classtype, cp.cp_id, cm.cmbs_memb into v_classtype, v_affiliation_id, v_member_id
        from t_careplan cp
        inner join t_careplan_note_xref xref on xref.t_careplan_cp_id = cp.cp_id
        inner join t_cm_basebase cm on cp.t_cm_basebase_cmbb_id = cm.cmbs_id

where xref.t_note_note_id = :new.note_id;
        if v_classtype is not null then
          :new.affiliation_type := 'CarePlan';
        end if;
        if v_affiliation_id is not null then
          :new.affiliation_id := v_affiliation_id;
        end if;
        if v_member_id is not null then
          :new.member_id := v_member_id;
        end if;
      end if;

      -- Opportunity (Problem)
      if :new.note_careplan_notetype = 93008 then
        select opp.classtype, opp.mbdb_id, opp.mdss_memb into v_classtype, v_affiliation_id, v_member_id
        from t_membdgisbase opp
        inner join t_membdgisbase_note_xref xref on xref.t_membdgisbase_mbdb_id = opp.mbdb_id
        where xref.t_note_note_id = :new.note_id;
        if v_classtype is not null then
          :new.affiliation_type := 'CarePlanProblem';
        end if;
        if v_affiliation_id is not null then
          :new.affiliation_id := v_affiliation_id;
        end if;
        if v_member_id is not null then
          :new.member_id := v_member_id;
        end if;
      end if;

      -- Goal
      if :new.note_careplan_notetype = 93009 then
        select goal.classtype, goal.goal_id, opp.mdss_memb into v_classtype, v_affiliation_id, v_member_id
        from t_goalcp goal
        inner join t_goalcp_note_xref xref on xref.t_goalcp_goal_id = goal.goal_id
        inner join t_membdgisbase_goalcp_xref xref2 on xref2.t_goalcp_goal_id = goal.goal_id
        inner join t_membdgisbase opp on xref2.t_membdgisbase_mbdb_id = opp.mbdb_id
        where xref.t_note_note_id = :new.note_id;
        if v_classtype is not null then
          :new.affiliation_type := 'CarePlanGoal';
        end if;
        if v_affiliation_id is not null then
          :new.affiliation_id := v_affiliation_id;
        end if;
        if v_member_id is not null then
          :new.member_id := v_member_id;
        end if;
      end if;

      -- Action (ToDo)
      if :new.note_careplan_notetype = 93010 then
        select action.c
lasstype, action.todo_id, opp.mdss_memb into v_classtype, v_affiliation_id, v_member_id
        from t_todo action
        inner join t_todo_note_xref xref on xref.t_todo_todo_id = action.todo_id
        inner join t_goalcp_todo_xref goal_xref on goal_xref.t_todo_todo_id = xref.t_todo_todo_id
        inner join t_membdgisbase_goalcp_xref opp_xref on opp_xref.t_goalcp_goal_id = goal_xref.t_goalcp_goal_id
        inner join t_membdgisbase opp on opp.mbdb_id = opp_xref.t_membdgisbase_mbdb_id
        where xref.t_note_note_id = :new.note_id;
        if v_classtype is not null then
          :new.affiliation_type := 'CarePlanTodo';
        end if;
        if v_affiliation_id is not null then
          :new.affiliation_id := v_affiliation_id;
        end if;
        if v_member_id is not null then
          :new.member_id := v_member_id;
        end if;
      end if;

      -- Barrier
      if :new.note_careplan_notetype = 93011 then
        select barrier.classtype, barrier.barrier_id, barrier_member_id into v_classtype, v_affiliation_id, v_member_id
        from t_barrier barrier
        inner join t_barrier_note_xref xref on xref.t_barrier_barrier_id = barrier.barrier_id
        where xref.t_note_note_id = :new.note_id;
        if v_classtype is not null then
          :new.affiliation_type := 'CarePlanBarrier';
        end if;
        if v_affiliation_id is not null then
          :new.affiliation_id := v_affiliation_id;
        end if;
        if v_member_id is not null then
          :new.member_id := v_member_id;
        end if;
      end if;*/
      :new.note_type := :new.note_careplan_notetype;
    end if;


    -- Group
    if :new.note_grp is not null then
      select grp.classtype, grp.gpbs_id, null into v_classtype, v_affiliation_id, v_member_id
      from t_grp_base grp
      where grp.gpbs_id = :new.note_grp;
      if v_classtype is not null then
        :new.affiliation_type := 'MemberGroup';
      end if;
      if v_affiliation_id is not null then

  :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_membnotetyp is not null then
        :new.note_type := :new.note_membnotetyp;
      end if;
    end if;

    -- Provider
    if :new.note_atcdpvdr is not null then
      select pvdr.classtype, pvdr.usr_id, null into v_classtype, v_affiliation_id, v_member_id
      from t_usr pvdr
      where pvdr.prv_id = :new.note_atcdpvdr;
      if v_classtype is not null then
        :new.affiliation_type := 'Provider';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_pvdrnotetyp is not null then
        :new.note_type := :new.note_pvdrnotetyp;
      end if;
    end if;

    -- Provider
    if :new.note_rltdpvdr is not null then
      select pvdr.classtype, pvdr.usr_id, null into v_classtype, v_affiliation_id, v_member_id
      from t_usr pvdr
      where pvdr.prv_id = :new.note_rltdpvdr;
      if v_classtype is not null then
        :new.affiliation_type := 'Provider';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
      if :new.note_pvdrnotetyp is not null then
        :new.note_type := :new.note_pvdrnotetyp;
      end if;
    end if;

    -- Sent Task
    if :new.note_setk is not null then
		select task.classtype, task.setk_id, task.setk_affn_memb into v_classtype, v_affiliation_id, v_member_id
		from t_senttsk task
		where task.setk_id = :new.note_setk;
		if v_classtype is not null then
			:new.affiliation_type := 'SentTask';
		end if;
		if v_affiliation_id is not null then
			:new.affiliation_id := v_affiliation_id;
		end if;
		if v_member_id is null then
			-- Sent Task a
ttached to Case and Program
			select task.setk_affn_cm into v_case_aff_id
			from t_senttsk task
			where task.setk_id = :new.note_setk;
			if v_case_aff_id is not null then
				select cm.cmbs_memb into v_member_id
				from t_cm_basebase cm where cm.cmbs_id=v_case_aff_id;
			else -- Sent Tasks attached to Authorization
				select COALESCE (task.setk_affn_um_evnt, task.setk_affn_um_evntreqt)
				into v_um_aff_id from t_senttsk task
				where task.setk_id = :new.note_setk;
				if v_um_aff_id is not null then
					select um.umbs_memb into v_member_id
					from t_um_base um where  um.umbs_id = v_um_aff_id;
				end if;
			end if;


		-- Sent Task attached to Diagnosis
		-- Sent Task attached to Medical Service
		-- Sent Task attached to Appeal
		-- Sent Task attached to Extension
		end if;
		if v_member_id is not null then
			:new.member_id := v_member_id;
		end if;
		if :new.note_setk_notetyp is not null then
			:new.note_type := :new.note_setk_notetyp;
		end if;
	end if;


	  -- AssessmentNote
    if :new.note_taknasmt is not null then
      select ttb.classtype, ttb.TACB_ID, ttb.TACB_MEMB
	  into v_classtype, v_affiliation_id,  v_member_id
      from T_TAKNASMTCC_BASE ttb
      where :new.note_taknasmt = ttb.TACB_ID;
      if v_classtype is not null then
        :new.affiliation_type := 'Assessment';
      end if;
      if v_affiliation_id is not null then
        :new.affiliation_id := v_affiliation_id;
      end if;
      if :new.ASSESSMENT_NOTE_TYPE is not null then
        :new.note_type := :new.ASSESSMENT_NOTE_TYPE;
      end if;
	   if v_member_id is not null then
        :new.member_id := v_member_id;
      end if;
    end if;

	 -- Sent Task Completion
    if :new.NOTE_TASK_COMPLETION is not null then
		SELECT task.classtype, task.setk_id, task.setk_affn_memb
		INTO v_classtype, v_affiliation_id, v_member_id
		FROM t_senttsk task
		WHERE task.setk_id = :new.NOTE_TASK_COMPLETION;
		if v_classtype is not null then
			:new.affiliation_type := 'Task';
		end if;
	
	if v_affiliation_id is not null then
			:new.affiliation_id := v_affiliation_id;
		end if;
		if v_member_id is null then
			SELECT task.setk_affn_cm
			INTO v_case_aff_id
			FROM t_senttsk task
			WHERE task.setk_id = :new.NOTE_TASK_COMPLETION;
			if v_case_aff_id is not null then
				SELECT cm.cmbs_memb
				INTO v_member_id
				FROM t_cm_basebase cm
				WHERE cm.cmbs_id=v_case_aff_id;
			else
				SELECT COALESCE (task.setk_affn_um_evnt, task.setk_affn_um_evntreqt)
				INTO v_um_aff_id
				FROM t_senttsk task
				WHERE task.setk_id = :new.NOTE_TASK_COMPLETION;
				if v_um_aff_id is not null then
					select um.umbs_memb
					INTO v_member_id
					FROM t_um_base um
					WHERE  um.umbs_id = v_um_aff_id;
				end if;
			end if;
		end if;
		if v_member_id is not null then
			:new.member_id := v_member_id;
		end if;
		if :new.TASK_COMPLETION_NOTE_TYPE is not null then
			:new.note_type := :new.TASK_COMPLETION_NOTE_TYPE;
		end if;
	end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
131
</td>
<td>
THH_C4C
</td>
<td>
TRG_NOTE_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NOTE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_note_auditinsert BEFORE INSERT ON T_NOTE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.note_crtd IS NULL THEN
    :new.note_crtd := curr_date;
  END IF;

  IF :new.note_las_act_tim IS NULL THEN
    :new.note_las_act_tim := curr_date;
  END IF;

  IF :new.note_las_act IS NULL THEN
    :new.note_las_act := 1;
  END IF;

  IF :new.note_obj_stt IS NULL THEN
    :new.note_obj_stt := 1;
  END IF;

  IF :new.note_vers IS NULL THEN
    :new.note_vers := 0;
  END IF;

  IF :new.note_vsbt IS NULL THEN
    :new.note_vsbt := 1001;
  END IF;

  IF :new.note_las_act_by IS NULL THEN
    :new.note_las_act_by := 1;
  END IF;

  IF :new.note_origcrtr IS NULL THEN
    :new.note_origcrtr := 1;
  END IF;

  IF :new.note_origcrtrlogdin IS NULL THEN
    :new.note_origcrtrlogdin := 1;
  END IF;

  IF :new.note_las_act_by_logdin IS NULL THEN
    :new.note_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_note
  (
   classtype,
   note_c4c_id,
   note_crtd,
   note_las_act,
   note_las_act_actrtyp,
   note_obj_stt,
   note_vers,
   note_vsbt,
   note_dltddt,
   note_las_act_by,
   note_origcrtr,
   note_origcrtrlogdin,
   note_las_act_by_logdin,
   note_univid,
   note_txt,
   note_subj,
   note_grvcnote,
   note_phnenote,
   note_calldt_tim,
   note_calldrtn,
   note_calr,
   note_callrcpt,
   note_nmbrdled,
   note_err_cmmt,
   note_rstncmmt,
   note_wkfwistcid,
   note_cnv_id,
   note_ownrchndflag,
   note_ownrchndcnt,
   note_mrkdas_grvc,
   note_rsld,
   note_rfngwkfwtsk,
   note_prvsrfngtsk,
   note_prvsrfngtsk_prmn,
   note_ownr,
   note_prvsownr,
   note_prvssndr,
   note_prvsownrprmn,
   note_tnfr,
   note_prvstnfr,
   note_mrkdrsldby,
   note_mrkdgrvcby,
   note_cm_base,
   note_rltdpvdr,
   note_um_notetyp,
   note_pvdrnotetyp,
   note_um_extn,
   note_um_basenote,
   note_atcdpvdr,
   note_notedgis,
   note_cstmflds,
   note_pity,
   note_calldrtnunts,
   note_cm_notetyp,
   note_casenotetyp,
   note_membnotetyp,
   note_mdclsrvc,
   note_memb,
   note_grp,
   note_id
,
   valid_from,
   valid_to ,
   note_audid,
   note_prev_audid,
   note_next_audid,
   transaction_id,
   note_source,
   note_reason,
   note_outcome_attempt,
   note_call_outcome,
   note_call_disposition,
   note_contact_id,
   note_clinicaldataentry_id
  )
  VALUES
  (
   :new.classtype,
   :new.note_c4c_id,
   :new.note_crtd,
   :new.note_las_act,
   :new.note_las_act_actrtyp,
   :new.note_obj_stt,
   :new.note_vers,
   :new.note_vsbt,
   :new.note_dltddt,
   :new.note_las_act_by,
   :new.note_origcrtr,
   :new.note_origcrtrlogdin,
   :new.note_las_act_by_logdin,
   :new.note_univid,
   :new.note_txt,
   :new.note_subj,
   :new.note_grvcnote,
   :new.note_phnenote,
   :new.note_calldt_tim,
   :new.note_calldrtn,
   :new.note_calr,
   :new.note_callrcpt,
   :new.note_nmbrdled,
   :new.note_err_cmmt,
   :new.note_rstncmmt,
   :new.note_wkfwistcid,
   :new.note_cnv_id,
   :new.note_ownrchndflag,
   :new.note_ownrchndcnt,
   :new.note_mrkdas_grvc,
   :new.note_rsld,
   :new.note_rfngwkfwtsk,
   :new.note_prvsrfngtsk,
   :new.note_prvsrfngtsk_prmn,
   :new.note_ownr,
   :new.note_prvsownr,
   :new.note_prvssndr,
   :new.note_prvsownrprmn,
   :new.note_tnfr,
   :new.note_prvstnfr,
   :new.note_mrkdrsldby,
   :new.note_mrkdgrvcby,
   :new.note_cm_base,
   :new.note_rltdpvdr,
   :new.note_um_notetyp,
   :new.note_pvdrnotetyp,
   :new.note_um_extn,
   :new.note_um_basenote,
   :new.note_atcdpvdr,
   :new.note_notedgis,
   :new.note_cstmflds,
   :new.note_pity,
   :new.note_calldrtnunts,
   :new.note_cm_notetyp,
   :new.note_casenotetyp,
   :new.note_membnotetyp,
   :new.note_mdclsrvc,
   :new.note_memb,
   :new.note_grp,
   :new.note_id,
   :new.note_las_act_tim,
   NULL,
   u_note.NEXTVAL,
   NULL,
   NULL,
   dbms_transaction.local_transaction_id,
   :new.note_source,
   :new.note_reason,
   :new.note_outcome_attempt,
   :new.note_call_outcome,
   :new.note_call_disposition,
   :new.note_contact_id,
   :new.note_clinicaldataentry_id
  );
END;

</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
132
</td>
<td>
THH_C4C
</td>
<td>
TRG_NOTE_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NOTE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_note_auditupdate BEFORE
  UPDATE
    ON T_NOTE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        note_audid
      INTO
        last_audid
      FROM
        a_note
      WHERE
        note_id            = :old.note_id
      AND note_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.note_las_act_tim = :new.note_las_act_tim THEN
      UPDATE
        a_note
      SET
        classtype              = :new.classtype,
        note_c4c_id            = :new.note_c4c_id,
        note_crtd              = :new.note_crtd,
        note_las_act           = :new.note_las_act,
        note_las_act_actrtyp   = :new.note_las_act_actrtyp,
        note_obj_stt           = :new.note_obj_stt,
        note_vers              = :new.note_vers,
        note_vsbt              = :new.note_vsbt,
        note_dltddt            = :new.note_dltddt,
        note_las_act_by        = :new.note_las_act_by,
        note_origcrtr          = :new.note_origcrtr,
        note_origcrtrlogdin    = :new.note_origcrtrlogdin,
        note_las_act_by_logdin = :new.note_las_act_by_logdin,
        note_univid            = :new.note_univid,
        note_txt               = :new.note_txt,
        note_subj              = :new.note_subj,
        note_grvcnote          = :new.note_grvcnote,
        note_phnenote          = :new.note_phnenote,
        note_calldt_tim        = :new.note_calldt_tim,
        note_calldrtn          = :new.note_calldrtn,
        note_calr              = :new.note_calr,
        note_callrcpt          = :new.note_callrcpt,
        note_nmbrdled          = :new.note_nmbrdled,
        note_err_cmmt          = :new.note_err_cmmt,
        note_rstncmmt          = :new.note_rstncmmt,
        note_wkfwistcid        = :new.note_wkfwistcid,
        note_cnv_id            = :new.note_cnv_id,

        note_ownrchndflag      = :new.note_ownrchndflag,
        note_ownrchndcnt       = :new.note_ownrchndcnt,
        note_mrkdas_grvc       = :new.note_mrkdas_grvc,
        note_rsld              = :new.note_rsld,
        note_rfngwkfwtsk       = :new.note_rfngwkfwtsk,
        note_prvsrfngtsk       = :new.note_prvsrfngtsk,
        note_prvsrfngtsk_prmn  = :new.note_prvsrfngtsk_prmn,
        note_ownr              = :new.note_ownr,
        note_prvsownr          = :new.note_prvsownr,
        note_prvssndr          = :new.note_prvssndr,
        note_prvsownrprmn      = :new.note_prvsownrprmn,
        note_tnfr              = :new.note_tnfr,
        note_prvstnfr          = :new.note_prvstnfr,
        note_mrkdrsldby        = :new.note_mrkdrsldby,
        note_mrkdgrvcby        = :new.note_mrkdgrvcby,
        note_cm_base           = :new.note_cm_base,
        note_rltdpvdr          = :new.note_rltdpvdr,
        note_um_notetyp        = :new.note_um_notetyp,
        note_pvdrnotetyp       = :new.note_pvdrnotetyp,
        note_um_extn           = :new.note_um_extn,
        note_um_basenote       = :new.note_um_basenote,
        note_atcdpvdr          = :new.note_atcdpvdr,
        note_notedgis          = :new.note_notedgis,
        note_cstmflds          = :new.note_cstmflds,
        note_pity              = :new.note_pity,
        note_calldrtnunts      = :new.note_calldrtnunts,
        note_cm_notetyp        = :new.note_cm_notetyp,
        note_casenotetyp       = :new.note_casenotetyp,
        note_membnotetyp       = :new.note_membnotetyp,
        note_mdclsrvc          = :new.note_mdclsrvc,
        note_memb              = :new.note_memb,
        note_grp               = :new.note_grp,
        note_setk              = :new.note_setk,
        note_setk_notetyp      = :new.note_setk_notetyp,
		note_source            = :new.note_source,
		note_reason            = :new.note_reason,
		note_outcome_attempt   = :new.note_outcome_attempt,
		note_call_outcome      = :n
ew.note_call_outcome,
        note_call_disposition  = :new.note_call_disposition,
		note_contact_id        = :new.note_contact_id,
		note_clinicaldataentry_id = :new.note_clinicaldataentry_id
      WHERE
        note_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_note
        (
          classtype,
          note_c4c_id,
          note_crtd,
          note_las_act,
          note_las_act_actrtyp,
          note_obj_stt,
          note_vers,
          note_vsbt,
          note_dltddt,
          note_las_act_by,
          note_origcrtr,
          note_origcrtrlogdin,
          note_las_act_by_logdin,
          note_univid,
          note_txt,
          note_subj,
          note_grvcnote,
          note_phnenote,
          note_calldt_tim,
          note_calldrtn,
          note_calr,
          note_callrcpt,
          note_nmbrdled,
          note_err_cmmt,
          note_rstncmmt,
          note_wkfwistcid,
          note_cnv_id,
          note_ownrchndflag,
          note_ownrchndcnt,
          note_mrkdas_grvc,
          note_rsld,
          note_rfngwkfwtsk,
          note_prvsrfngtsk,
          note_prvsrfngtsk_prmn,
          note_ownr,
          note_prvsownr,
          note_prvssndr,
          note_prvsownrprmn,
          note_tnfr,
          note_prvstnfr,
          note_mrkdrsldby,
          note_mrkdgrvcby,
          note_cm_base,
          note_rltdpvdr,
          note_um_notetyp,
          note_pvdrnotetyp,
          note_um_extn,
          note_um_basenote,
          note_atcdpvdr,
          note_notedgis,
          note_cstmflds,
          note_pity,
          note_calldrtnunts,
          note_cm_notetyp,
          note_casenotetyp,
          note_membnotetyp,
          note_mdclsrvc,
          note_memb,
          note_grp,
          note_id,
          valid_from,
          valid_to,
          note_audid,

    note_prev_audid,
          note_next_audid,
          note_setk,
          note_setk_notetyp,
          transaction_id,
		  note_source,
		  note_reason,
		  note_outcome_attempt,
		  note_call_outcome,
          note_call_disposition,
		  note_contact_id,
		  note_clinicaldataentry_id
        )
        VALUES
        (
          :new.classtype,
          :new.note_c4c_id,
          :new.note_crtd,
          :new.note_las_act,
          :new.note_las_act_actrtyp,
          :new.note_obj_stt,
          :new.note_vers,
          :new.note_vsbt,
          :new.note_dltddt,
          :new.note_las_act_by,
          :new.note_origcrtr,
          :new.note_origcrtrlogdin,
          :new.note_las_act_by_logdin,
          :new.note_univid,
          :new.note_txt,
          :new.note_subj,
          :new.note_grvcnote,
          :new.note_phnenote,
          :new.note_calldt_tim,
          :new.note_calldrtn,
          :new.note_calr,
          :new.note_callrcpt,
          :new.note_nmbrdled,
          :new.note_err_cmmt,
          :new.note_rstncmmt,
          :new.note_wkfwistcid,
          :new.note_cnv_id,
          :new.note_ownrchndflag,
          :new.note_ownrchndcnt,
          :new.note_mrkdas_grvc,
          :new.note_rsld,
          :new.note_rfngwkfwtsk,
          :new.note_prvsrfngtsk,
          :new.note_prvsrfngtsk_prmn,
          :new.note_ownr,
          :new.note_prvsownr,
          :new.note_prvssndr,
          :new.note_prvsownrprmn,
          :new.note_tnfr,
          :new.note_prvstnfr,
          :new.note_mrkdrsldby,
          :new.note_mrkdgrvcby,
          :new.note_cm_base,
          :new.note_rltdpvdr,
          :new.note_um_notetyp,
          :new.note_pvdrnotetyp,
          :new.note_um_extn,
          :new.note_um_basenote,
          :new.note_atcdpvdr,
          :new.note_notedgis,
          :new.note_cstmflds,
          :new.note_pity,
          :new.note_calldrtnunts,
          :new.note_cm_notetyp,
          :new.note_casenotetyp,

      :new.note_membnotetyp,
          :new.note_mdclsrvc,
          :new.note_memb,
          :new.note_grp,
          :new.note_id,
          :new.note_las_act_tim,
          NULL,
          u_note.NEXTVAL,
          last_audid,
          NULL,
          :new.note_setk,
          :new.note_setk_notetyp,
          dbms_transaction.local_transaction_id,
		  :new.note_source,
		  :new.note_reason,
		  :new.note_outcome_attempt,
		  :new.note_call_outcome,
          :new.note_call_disposition,
		  :new.note_contact_id,
		  :new.note_clinicaldataentry_id
        );
      /* update last audit records valid_to to new LastActionTime
      and next audit ID to newly inserted records sequence number
      */
      UPDATE
        a_note
      SET
        valid_to        = :new.note_las_act_tim,
        note_next_audid = u_note.CURRVAL
      WHERE
        note_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
133
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_NOTE
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NOTE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_NOTE
AFTER INSERT OR UPDATE ON T_NOTE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
 var1 varchar2(4000);
BEGIN
 -- event (note-event)
  var1 := 'INSERT INTO T_EVENT_UPDT (SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID = :2)';
 EXECUTE IMMEDIATE var1 USING 'P',:new.note_um_basenote;

 -- extension (note-service-diagnosis-event) regular note
 var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
         '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
         '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE UMDS_ID IN  ' ||
         '(SELECT MSRV_SRVCDGIS FROM T_APBL WHERE MSRV_ID = :2 )))';
 EXECUTE IMMEDIATE var1 USING 'P',:new.note_mdclsrvc;

 -- diagnosis (note-diagnosis-event)
 var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
         '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
         '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE MDSS_ID = :2 ))';
 EXECUTE IMMEDIATE var1 USING 'P',:new.note_notedgis;

 -- extension (note-service-diagnosis-event) note extension
 var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
         '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
         '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE UMDS_ID IN  ' ||
         '(SELECT MSRV_SRVCDGIS FROM T_APBL WHERE UMXT_ID = :2 )))';
 EXECUTE IMMEDIATE var1 USING 'P',:new.note_um_extn;

END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
134
</td>
<td>
THH_C4C
</td>
<td>
TRG_NTC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NTCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_NTC_AUDITINSERT BEFORE INSERT ON T_NTCE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.ntc_crtd IS NULL THEN
    :new.ntc_crtd := curr_date;
  END IF;

  IF :new.ntc_las_act_tim IS NULL THEN
    :new.ntc_las_act_tim := curr_date;
  END IF;

  IF :new.ntc_las_act IS NULL THEN
    :new.ntc_las_act := 1;
  END IF;

  IF :new.ntc_obj_stt IS NULL THEN
    :new.ntc_obj_stt := 1;
  END IF;

  IF :new.ntc_vers IS NULL THEN
    :new.ntc_vers := 0;
  END IF;

  IF :new.ntc_vsbt IS NULL THEN
    :new.ntc_vsbt := 1001;
  END IF;

  IF :new.ntc_las_act_by IS NULL THEN
    :new.ntc_las_act_by := 1;
  END IF;

  IF :new.ntc_origcrtr IS NULL THEN
    :new.ntc_origcrtr := 1;
  END IF;

  IF :new.ntc_origcrtrlogdin IS NULL THEN
    :new.ntc_origcrtrlogdin := 1;
  END IF;

  IF :new.ntc_las_act_by_logdin IS NULL THEN
    :new.ntc_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_ntce
  (
   classtype,
   ntc_c4c_id,
   ntc_crtd,
   ntc_las_act,
   ntc_las_act_actrtyp,
   ntc_obj_stt,
   ntc_vers,
   ntc_vsbt,
   ntc_dltddt,
   ntc_las_act_by,
   ntc_origcrtr,
   ntc_origcrtrlogdin,
   ntc_las_act_by_logdin,
   ntc_univid,
   ntc_txt,
   ntc_subj,
   ntc_wkfwistcid,
   ntc_cnv_id,
   ntc_ownrchndflag,
   ntc_ownrchndcnt,
   ntc_sentat,
   ntc_las_rcvdat,
   ntc_rfrdobj_id,
   ntc_rfrdobj_typ,
   ntc_rfngwkfwtsk,
   ntc_prvsrfngtsk,
   ntc_prvsrfngtsk_prmn,
   ntc_ownr,
   ntc_prvsownr,
   ntc_prvssndr,
   ntc_prvsownrprmn,
   ntc_tnfr,
   ntc_prvstnfr,
   ntc_las_sentto,
   ntc_frstsentto,
   ntc_affn_um_evntreqt,
   ntc_affn_um_extn,
   ntc_affn_pvdr,
   ntc_affn_cm,
   ntc_affn_memb,
   ntc_affn_um_evnt,
   ntc_sentby,
   ntc_typ,
   ntc_cfrdmsg,
   entc_expirn_dt,
   ntc_id,
   valid_from,
   valid_to ,
   ntc_audid,
   ntc_prev_audid,
   ntc_next_audid
  )
  VALUES
  (
   :new.classtype,
   :new.ntc_c4c_id,
   :new.ntc_crtd,
   :new.ntc_las_act,
   :new.ntc_las_act_actrtyp,
   :new.ntc_obj_stt,
   :new.ntc_vers,
   :new.ntc_vsbt,
   :new.ntc_dltddt,
   :new.ntc_las_act_
by,
   :new.ntc_origcrtr,
   :new.ntc_origcrtrlogdin,
   :new.ntc_las_act_by_logdin,
   :new.ntc_univid,
   :new.ntc_txt,
   :new.ntc_subj,
   :new.ntc_wkfwistcid,
   :new.ntc_cnv_id,
   :new.ntc_ownrchndflag,
   :new.ntc_ownrchndcnt,
   :new.ntc_sentat,
   :new.ntc_las_rcvdat,
   :new.ntc_rfrdobj_id,
   :new.ntc_rfrdobj_typ,
   :new.ntc_rfngwkfwtsk,
   :new.ntc_prvsrfngtsk,
   :new.ntc_prvsrfngtsk_prmn,
   :new.ntc_ownr,
   :new.ntc_prvsownr,
   :new.ntc_prvssndr,
   :new.ntc_prvsownrprmn,
   :new.ntc_tnfr,
   :new.ntc_prvstnfr,
   :new.ntc_las_sentto,
   :new.ntc_frstsentto,
   :new.ntc_affn_um_evntreqt,
   :new.ntc_affn_um_extn,
   :new.ntc_affn_pvdr,
   :new.ntc_affn_cm,
   :new.ntc_affn_memb,
   :new.ntc_affn_um_evnt,
   :new.ntc_sentby,
   :new.ntc_typ,
   :new.ntc_cfrdmsg,
   :new.entc_expirn_dt,
   :new.ntc_id,
   :new.ntc_las_act_tim,
   NULL,
   u_ntce.NEXTVAL,
   NULL,
   NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
135
</td>
<td>
THH_C4C
</td>
<td>
TRG_NTC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_NTCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ntc_auditupdate BEFORE
  UPDATE
    ON T_NTCE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ntc_audid
      INTO
        last_audid
      FROM
        a_ntce
      WHERE
        ntc_id            = :old.ntc_id
      AND ntc_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ntc_las_act_tim = :new.ntc_las_act_tim THEN
      UPDATE
        a_ntce
      SET
        classtype             = :new.classtype,
        ntc_c4c_id            = :new.ntc_c4c_id,
        ntc_crtd              = :new.ntc_crtd,
        ntc_las_act           = :new.ntc_las_act,
        ntc_las_act_actrtyp   = :new.ntc_las_act_actrtyp,
        ntc_obj_stt           = :new.ntc_obj_stt,
        ntc_vers              = :new.ntc_vers,
        ntc_vsbt              = :new.ntc_vsbt,
        ntc_dltddt            = :new.ntc_dltddt,
        ntc_las_act_by        = :new.ntc_las_act_by,
        ntc_origcrtr          = :new.ntc_origcrtr,
        ntc_origcrtrlogdin    = :new.ntc_origcrtrlogdin,
        ntc_las_act_by_logdin = :new.ntc_las_act_by_logdin,
        ntc_univid            = :new.ntc_univid,
        ntc_txt               = :new.ntc_txt,
        ntc_subj              = :new.ntc_subj,
        ntc_wkfwistcid        = :new.ntc_wkfwistcid,
        ntc_cnv_id            = :new.ntc_cnv_id,
        ntc_ownrchndflag      = :new.ntc_ownrchndflag,
        ntc_ownrchndcnt       = :new.ntc_ownrchndcnt,
        ntc_sentat            = :new.ntc_sentat,
        ntc_las_rcvdat        = :new.ntc_las_rcvdat,
        ntc_rfrdobj_id        = :new.ntc_rfrdobj_id,
        ntc_rfrdobj_typ       = :new.ntc_rfrdobj_typ,
        ntc_rfngwkfwtsk       = :new.ntc_rfngwkfwtsk,
        ntc_prvsrfngtsk       = :new.ntc_prvsrfngtsk,
        ntc_prvsrfngtsk_prmn  = :new.ntc_prvsrfngtsk_prmn,
        ntc_ownr              =
:new.ntc_ownr,
        ntc_prvsownr          = :new.ntc_prvsownr,
        ntc_prvssndr          = :new.ntc_prvssndr,
        ntc_prvsownrprmn      = :new.ntc_prvsownrprmn,
        ntc_tnfr              = :new.ntc_tnfr,
        ntc_prvstnfr          = :new.ntc_prvstnfr,
        ntc_las_sentto        = :new.ntc_las_sentto,
        ntc_frstsentto        = :new.ntc_frstsentto,
        ntc_affn_um_evntreqt  = :new.ntc_affn_um_evntreqt,
        ntc_affn_um_extn      = :new.ntc_affn_um_extn,
        ntc_affn_pvdr         = :new.ntc_affn_pvdr,
        ntc_affn_cm           = :new.ntc_affn_cm,
        ntc_affn_memb         = :new.ntc_affn_memb,
        ntc_affn_um_evnt      = :new.ntc_affn_um_evnt,
        ntc_sentby            = :new.ntc_sentby,
        ntc_typ               = :new.ntc_typ,
        ntc_cfrdmsg           = :new.ntc_cfrdmsg,
        entc_expirn_dt        = :new.entc_expirn_dt
      WHERE
        ntc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_ntce
        (
          classtype,
          ntc_c4c_id,
          ntc_crtd,
          ntc_las_act,
          ntc_las_act_actrtyp,
          ntc_obj_stt,
          ntc_vers,
          ntc_vsbt,
          ntc_dltddt,
          ntc_las_act_by,
          ntc_origcrtr,
          ntc_origcrtrlogdin,
          ntc_las_act_by_logdin,
          ntc_univid,
          ntc_txt,
          ntc_subj,
          ntc_wkfwistcid,
          ntc_cnv_id,
          ntc_ownrchndflag,
          ntc_ownrchndcnt,
          ntc_sentat,
          ntc_las_rcvdat,
          ntc_rfrdobj_id,
          ntc_rfrdobj_typ,
          ntc_rfngwkfwtsk,
          ntc_prvsrfngtsk,
          ntc_prvsrfngtsk_prmn,
          ntc_ownr,
          ntc_prvsownr,
          ntc_prvssndr,
          ntc_prvsownrprmn,
          ntc_tnfr,
          ntc_prvstnfr,
          ntc_las_sentto,
          ntc_frstsentto,
          ntc_affn
_um_evntreqt,
          ntc_affn_um_extn,
          ntc_affn_pvdr,
          ntc_affn_cm,
          ntc_affn_memb,
          ntc_affn_um_evnt,
          ntc_sentby,
          ntc_typ,
          ntc_cfrdmsg,
          entc_expirn_dt,
          ntc_id,
          valid_from,
          valid_to,
          ntc_audid,
          ntc_prev_audid,
          ntc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ntc_c4c_id,
          :new.ntc_crtd,
          :new.ntc_las_act,
          :new.ntc_las_act_actrtyp,
          :new.ntc_obj_stt,
          :new.ntc_vers,
          :new.ntc_vsbt,
          :new.ntc_dltddt,
          :new.ntc_las_act_by,
          :new.ntc_origcrtr,
          :new.ntc_origcrtrlogdin,
          :new.ntc_las_act_by_logdin,
          :new.ntc_univid,
          :new.ntc_txt,
          :new.ntc_subj,
          :new.ntc_wkfwistcid,
          :new.ntc_cnv_id,
          :new.ntc_ownrchndflag,
          :new.ntc_ownrchndcnt,
          :new.ntc_sentat,
          :new.ntc_las_rcvdat,
          :new.ntc_rfrdobj_id,
          :new.ntc_rfrdobj_typ,
          :new.ntc_rfngwkfwtsk,
          :new.ntc_prvsrfngtsk,
          :new.ntc_prvsrfngtsk_prmn,
          :new.ntc_ownr,
          :new.ntc_prvsownr,
          :new.ntc_prvssndr,
          :new.ntc_prvsownrprmn,
          :new.ntc_tnfr,
          :new.ntc_prvstnfr,
          :new.ntc_las_sentto,
          :new.ntc_frstsentto,
          :new.ntc_affn_um_evntreqt,
          :new.ntc_affn_um_extn,
          :new.ntc_affn_pvdr,
          :new.ntc_affn_cm,
          :new.ntc_affn_memb,
          :new.ntc_affn_um_evnt,
          :new.ntc_sentby,
          :new.ntc_typ,
          :new.ntc_cfrdmsg,
          :new.entc_expirn_dt,
          :new.ntc_id,
          :new.ntc_las_act_tim,
          NULL,
          u_ntce.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's seq
uence number
      */
      UPDATE
        a_ntce
      SET
        valid_to       = :new.ntc_las_act_tim,
        ntc_next_audid = u_ntce.CURRVAL
      WHERE
        ntc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
136
</td>
<td>
THH_C4C
</td>
<td>
TRG_OCHI_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ORG_CHRTITEM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_OCHI_AUDITINSERT&quot; BEFORE INSERT ON T_ORG_CHRTITEM FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ochi_crtd IS NULL THEN 
    :new.ochi_crtd := curr_date; 
  END IF; 

  IF :new.ochi_las_act_tim IS NULL THEN 
    :new.ochi_las_act_tim := curr_date; 
  END IF; 

  IF :new.ochi_las_act IS NULL THEN 
    :new.ochi_las_act := 1; 
  END IF; 

  IF :new.ochi_obj_stt IS NULL THEN 
    :new.ochi_obj_stt := 1; 
  END IF; 

  IF :new.ochi_vers IS NULL THEN 
    :new.ochi_vers := 0; 
  END IF; 

  IF :new.ochi_vsbt IS NULL THEN 
    :new.ochi_vsbt := 1001; 
  END IF; 

  IF :new.ochi_las_act_by IS NULL THEN 
    :new.ochi_las_act_by := 1; 
  END IF; 

  IF :new.ochi_origcrtr IS NULL THEN 
    :new.ochi_origcrtr := 1; 
  END IF; 

  IF :new.ochi_origcrtrlogdin IS NULL THEN 
    :new.ochi_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ochi_las_act_by_logdin IS NULL THEN 
    :new.ochi_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_org_chrtitem 
  ( 
   classtype, 
   ochi_c4c_id, 
   ochi_crtd, 
   ochi_las_act, 
   ochi_las_act_actrtyp, 
   ochi_obj_stt, 
   ochi_vers, 
   ochi_vsbt, 
   ochi_dltddt, 
   ochi_las_act_by, 
   ochi_origcrtr, 
   ochi_origcrtrlogdin, 
   ochi_las_act_by_logdin, 
   ochi_univid, 
   ochi_nam, 
   ochi_frstatvd, 
   ochi_las_atvd, 
   ochi_las_dctd, 
   ochi_wkfwistcid, 
   ochi_cnv_id, 
   ochi_ownrchndflag, 
   ochi_ownrchndcnt, 
   ochi_las_dctdby, 
   ochi_frstatvdby, 
   ochi_las_atvdby, 
   ochi_ratnapvl, 
   ochi_rfngwkfwtsk, 
   ochi_prvsrfngtsk, 
   ochi_prvsrfngtsk_prmn, 
   ochi_ownr, 
   ochi_prvsownr, 
   ochi_prvssndr, 
   ochi_prvsownrprmn, 
   ochi_tnfr, 
   ochi_prvstnfr, 
   ochi_lvl, 
   ochi_cnctprsn, 
   ochi_prnt, 
   ochi_id, 
   valid_from, 
   valid_to , 
   ochi_audid, 
   ochi_prev_audid, 
   ochi_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ochi_c4c_id,
   :new.ochi_crtd,
   :new.ochi_las_act,
   :new.ochi_las_act_actrtyp,
   :new.ochi_obj_stt,
   :new.ochi_vers,
   :new.ochi_vsbt,
   :new.ochi_dltddt,

 :new.ochi_las_act_by,
   :new.ochi_origcrtr,
   :new.ochi_origcrtrlogdin,
   :new.ochi_las_act_by_logdin,
   :new.ochi_univid,
   :new.ochi_nam,
   :new.ochi_frstatvd,
   :new.ochi_las_atvd,
   :new.ochi_las_dctd,
   :new.ochi_wkfwistcid,
   :new.ochi_cnv_id,
   :new.ochi_ownrchndflag,
   :new.ochi_ownrchndcnt,
   :new.ochi_las_dctdby,
   :new.ochi_frstatvdby,
   :new.ochi_las_atvdby,
   :new.ochi_ratnapvl,
   :new.ochi_rfngwkfwtsk,
   :new.ochi_prvsrfngtsk,
   :new.ochi_prvsrfngtsk_prmn,
   :new.ochi_ownr,
   :new.ochi_prvsownr,
   :new.ochi_prvssndr,
   :new.ochi_prvsownrprmn,
   :new.ochi_tnfr,
   :new.ochi_prvstnfr,
   :new.ochi_lvl,
   :new.ochi_cnctprsn,
   :new.ochi_prnt, 
   :new.ochi_id, 
   :new.ochi_las_act_tim, 
   NULL, 
   u_org_chrtitem.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
137
</td>
<td>
THH_C4C
</td>
<td>
TRG_OCHI_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ORG_CHRTITEM
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ochi_auditupdate BEFORE
  UPDATE
    ON T_ORG_CHRTITEM FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ochi_audid
      INTO
        last_audid
      FROM
        a_org_chrtitem
      WHERE
        ochi_id            = :old.ochi_id
      AND ochi_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ochi_las_act_tim = :new.ochi_las_act_tim THEN
      UPDATE
        a_org_chrtitem
      SET
        classtype              = :new.classtype,
        ochi_c4c_id            = :new.ochi_c4c_id,
        ochi_crtd              = :new.ochi_crtd,
        ochi_las_act           = :new.ochi_las_act,
        ochi_las_act_actrtyp   = :new.ochi_las_act_actrtyp,
        ochi_obj_stt           = :new.ochi_obj_stt,
        ochi_vers              = :new.ochi_vers,
        ochi_vsbt              = :new.ochi_vsbt,
        ochi_dltddt            = :new.ochi_dltddt,
        ochi_las_act_by        = :new.ochi_las_act_by,
        ochi_origcrtr          = :new.ochi_origcrtr,
        ochi_origcrtrlogdin    = :new.ochi_origcrtrlogdin,
        ochi_las_act_by_logdin = :new.ochi_las_act_by_logdin,
        ochi_univid            = :new.ochi_univid,
        ochi_nam               = :new.ochi_nam,
        ochi_frstatvd          = :new.ochi_frstatvd,
        ochi_las_atvd          = :new.ochi_las_atvd,
        ochi_las_dctd          = :new.ochi_las_dctd,
        ochi_wkfwistcid        = :new.ochi_wkfwistcid,
        ochi_cnv_id            = :new.ochi_cnv_id,
        ochi_ownrchndflag      = :new.ochi_ownrchndflag,
        ochi_ownrchndcnt       = :new.ochi_ownrchndcnt,
        ochi_las_dctdby        = :new.ochi_las_dctdby,
        ochi_frstatvdby        = :new.ochi_frstatvdby,
        ochi_las_atvdby        = :new.ochi_las_atvdby,
        ochi_ratnapvl          = :new.ochi_ratnapvl,
        ochi_rfngw
kfwtsk       = :new.ochi_rfngwkfwtsk,
        ochi_prvsrfngtsk       = :new.ochi_prvsrfngtsk,
        ochi_prvsrfngtsk_prmn  = :new.ochi_prvsrfngtsk_prmn,
        ochi_ownr              = :new.ochi_ownr,
        ochi_prvsownr          = :new.ochi_prvsownr,
        ochi_prvssndr          = :new.ochi_prvssndr,
        ochi_prvsownrprmn      = :new.ochi_prvsownrprmn,
        ochi_tnfr              = :new.ochi_tnfr,
        ochi_prvstnfr          = :new.ochi_prvstnfr,
        ochi_lvl               = :new.ochi_lvl,
        ochi_cnctprsn          = :new.ochi_cnctprsn,
        ochi_prnt              = :new.ochi_prnt
      WHERE
        ochi_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_org_chrtitem
        (
          classtype,
          ochi_c4c_id,
          ochi_crtd,
          ochi_las_act,
          ochi_las_act_actrtyp,
          ochi_obj_stt,
          ochi_vers,
          ochi_vsbt,
          ochi_dltddt,
          ochi_las_act_by,
          ochi_origcrtr,
          ochi_origcrtrlogdin,
          ochi_las_act_by_logdin,
          ochi_univid,
          ochi_nam,
          ochi_frstatvd,
          ochi_las_atvd,
          ochi_las_dctd,
          ochi_wkfwistcid,
          ochi_cnv_id,
          ochi_ownrchndflag,
          ochi_ownrchndcnt,
          ochi_las_dctdby,
          ochi_frstatvdby,
          ochi_las_atvdby,
          ochi_ratnapvl,
          ochi_rfngwkfwtsk,
          ochi_prvsrfngtsk,
          ochi_prvsrfngtsk_prmn,
          ochi_ownr,
          ochi_prvsownr,
          ochi_prvssndr,
          ochi_prvsownrprmn,
          ochi_tnfr,
          ochi_prvstnfr,
          ochi_lvl,
          ochi_cnctprsn,
          ochi_prnt,
          ochi_id,
          valid_from,
          valid_to,
          ochi_audid,
          ochi_prev_audid,
          ochi_next_audid
        )
        VALUES
        (
          :new.
classtype,
          :new.ochi_c4c_id,
          :new.ochi_crtd,
          :new.ochi_las_act,
          :new.ochi_las_act_actrtyp,
          :new.ochi_obj_stt,
          :new.ochi_vers,
          :new.ochi_vsbt,
          :new.ochi_dltddt,
          :new.ochi_las_act_by,
          :new.ochi_origcrtr,
          :new.ochi_origcrtrlogdin,
          :new.ochi_las_act_by_logdin,
          :new.ochi_univid,
          :new.ochi_nam,
          :new.ochi_frstatvd,
          :new.ochi_las_atvd,
          :new.ochi_las_dctd,
          :new.ochi_wkfwistcid,
          :new.ochi_cnv_id,
          :new.ochi_ownrchndflag,
          :new.ochi_ownrchndcnt,
          :new.ochi_las_dctdby,
          :new.ochi_frstatvdby,
          :new.ochi_las_atvdby,
          :new.ochi_ratnapvl,
          :new.ochi_rfngwkfwtsk,
          :new.ochi_prvsrfngtsk,
          :new.ochi_prvsrfngtsk_prmn,
          :new.ochi_ownr,
          :new.ochi_prvsownr,
          :new.ochi_prvssndr,
          :new.ochi_prvsownrprmn,
          :new.ochi_tnfr,
          :new.ochi_prvstnfr,
          :new.ochi_lvl,
          :new.ochi_cnctprsn,
          :new.ochi_prnt,
          :new.ochi_id,
          :new.ochi_las_act_tim,
          NULL,
          u_org_chrtitem.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_org_chrtitem
      SET
        valid_to        = :new.ochi_las_act_tim,
        ochi_next_audid = u_org_chrtitem.CURRVAL
      WHERE
        ochi_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
138
</td>
<td>
THH_C4C
</td>
<td>
TRG_OCRP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ORG_CHRTITEMPRSS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_OCRP_AUDITINSERT&quot; BEFORE INSERT ON T_ORG_CHRTITEMPRSS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ocrp_crtd IS NULL THEN 
    :new.ocrp_crtd := curr_date; 
  END IF; 

  IF :new.ocrp_las_act_tim IS NULL THEN 
    :new.ocrp_las_act_tim := curr_date; 
  END IF; 

  IF :new.ocrp_las_act IS NULL THEN 
    :new.ocrp_las_act := 1; 
  END IF; 

  IF :new.ocrp_obj_stt IS NULL THEN 
    :new.ocrp_obj_stt := 1; 
  END IF; 

  IF :new.ocrp_vers IS NULL THEN 
    :new.ocrp_vers := 0; 
  END IF; 

  IF :new.ocrp_vsbt IS NULL THEN 
    :new.ocrp_vsbt := 1001; 
  END IF; 

  IF :new.ocrp_las_act_by IS NULL THEN 
    :new.ocrp_las_act_by := 1; 
  END IF; 

  IF :new.ocrp_origcrtr IS NULL THEN 
    :new.ocrp_origcrtr := 1; 
  END IF; 

  IF :new.ocrp_origcrtrlogdin IS NULL THEN 
    :new.ocrp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ocrp_las_act_by_logdin IS NULL THEN 
    :new.ocrp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_org_chrtitemprss 
  ( 
   classtype, 
   ocrp_c4c_id, 
   ocrp_crtd, 
   ocrp_las_act, 
   ocrp_las_act_actrtyp, 
   ocrp_obj_stt, 
   ocrp_vers, 
   ocrp_vsbt, 
   ocrp_dltddt, 
   ocrp_las_act_by, 
   ocrp_origcrtr, 
   ocrp_origcrtrlogdin, 
   ocrp_las_act_by_logdin, 
   ocrp_univid, 
   ocrp_prsnchrtitem, 
   ocrp_prsn, 
   ocrp_id, 
   valid_from, 
   valid_to , 
   ocrp_audid, 
   ocrp_prev_audid, 
   ocrp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ocrp_c4c_id,
   :new.ocrp_crtd,
   :new.ocrp_las_act,
   :new.ocrp_las_act_actrtyp,
   :new.ocrp_obj_stt,
   :new.ocrp_vers,
   :new.ocrp_vsbt,
   :new.ocrp_dltddt,
   :new.ocrp_las_act_by,
   :new.ocrp_origcrtr,
   :new.ocrp_origcrtrlogdin,
   :new.ocrp_las_act_by_logdin,
   :new.ocrp_univid,
   :new.ocrp_prsnchrtitem,
   :new.ocrp_prsn, 
   :new.ocrp_id, 
   :new.ocrp_las_act_tim, 
   NULL, 
   u_org_chrtitemprss.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
139
</td>
<td>
THH_C4C
</td>
<td>
TRG_OCRP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_ORG_CHRTITEMPRSS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ocrp_auditupdate BEFORE
  UPDATE
    ON T_ORG_CHRTITEMPRSS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ocrp_audid
      INTO
        last_audid
      FROM
        a_org_chrtitemprss
      WHERE
        ocrp_id            = :old.ocrp_id
      AND ocrp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ocrp_las_act_tim = :new.ocrp_las_act_tim THEN
      UPDATE
        a_org_chrtitemprss
      SET
        classtype              = :new.classtype,
        ocrp_c4c_id            = :new.ocrp_c4c_id,
        ocrp_crtd              = :new.ocrp_crtd,
        ocrp_las_act           = :new.ocrp_las_act,
        ocrp_las_act_actrtyp   = :new.ocrp_las_act_actrtyp,
        ocrp_obj_stt           = :new.ocrp_obj_stt,
        ocrp_vers              = :new.ocrp_vers,
        ocrp_vsbt              = :new.ocrp_vsbt,
        ocrp_dltddt            = :new.ocrp_dltddt,
        ocrp_las_act_by        = :new.ocrp_las_act_by,
        ocrp_origcrtr          = :new.ocrp_origcrtr,
        ocrp_origcrtrlogdin    = :new.ocrp_origcrtrlogdin,
        ocrp_las_act_by_logdin = :new.ocrp_las_act_by_logdin,
        ocrp_univid            = :new.ocrp_univid,
        ocrp_prsnchrtitem      = :new.ocrp_prsnchrtitem,
        ocrp_prsn              = :new.ocrp_prsn
      WHERE
        ocrp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_org_chrtitemprss
        (
          classtype,
          ocrp_c4c_id,
          ocrp_crtd,
          ocrp_las_act,
          ocrp_las_act_actrtyp,
          ocrp_obj_stt,
          ocrp_vers,
          ocrp_vsbt,
          ocrp_dltddt,
          ocrp_las_act_by,
          ocrp_origcrtr,
          ocrp_origcrtrlogdin,
          ocrp_
las_act_by_logdin,
          ocrp_univid,
          ocrp_prsnchrtitem,
          ocrp_prsn,
          ocrp_id,
          valid_from,
          valid_to,
          ocrp_audid,
          ocrp_prev_audid,
          ocrp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ocrp_c4c_id,
          :new.ocrp_crtd,
          :new.ocrp_las_act,
          :new.ocrp_las_act_actrtyp,
          :new.ocrp_obj_stt,
          :new.ocrp_vers,
          :new.ocrp_vsbt,
          :new.ocrp_dltddt,
          :new.ocrp_las_act_by,
          :new.ocrp_origcrtr,
          :new.ocrp_origcrtrlogdin,
          :new.ocrp_las_act_by_logdin,
          :new.ocrp_univid,
          :new.ocrp_prsnchrtitem,
          :new.ocrp_prsn,
          :new.ocrp_id,
          :new.ocrp_las_act_tim,
          NULL,
          u_org_chrtitemprss.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_org_chrtitemprss
      SET
        valid_to        = :new.ocrp_las_act_tim,
        ocrp_next_audid = u_org_chrtitemprss.CURRVAL
      WHERE
        ocrp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
140
</td>
<td>
THH_C4C
</td>
<td>
TRG_OTHER_INS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_OTHER_INSURANCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_other_ins_auditinsert before insert on t_other_insurance

	for each row
		
</td>
<td>
PL/SQL
</td>
<td>
declare
			curr_date date := sysdate;

	begin

		if :new.ins_crtd is null then
			:new.ins_crtd := curr_date;
		end if;

		if :new.ins_las_act_tim is null then
			:new.ins_las_act_tim := curr_date;
		end if;

		if :new.ins_las_act is null then
			:new.ins_las_act := 1;
		end if;

		if :new.ins_obj_stt is null then
			:new.ins_obj_stt := 1;
		end if;

		if :new.ins_vers is null then
			:new.ins_vers := 0;
		end if;

		if :new.ins_vsbt is null then
			:new.ins_vsbt := 1001;
		end if;

		if :new.ins_las_act_by is null then
			:new.ins_las_act_by := 1;
		end if;

		if :new.ins_origcrtr is null then
			:new.ins_origcrtr := 1;
		end if;

		if :new.ins_origcrtrlogdin is null then
			:new.ins_origcrtrlogdin := 1;
		end if;

		if :new.ins_las_act_by_logdin is null then
			:new.ins_las_act_by_logdin := 1;
		end if;

		insert into a_other_insurance (
			classtype,
			ins_id,
			ins_c4c_id,
			ins_univid,
			ins_crtd,
			ins_obj_stt,
			ins_vers,
			ins_member,
			ins_type,
			ins_insurance_id,
			ins_effective_date,
			ins_termination_date,
			ins_vsbt,
			ins_dltddt,
			ins_origcrtr,
			ins_origcrtrlogdin,
			ins_las_act,
			ins_las_act_by,
			ins_las_act_by_logdin,
			ins_las_act_actrtyp,
			ins_las_act_tim,
			ins_valid_from,
			ins_valid_to,
			ins_audid,
			ins_prev_audid,
			ins_next_audid
		) values (
			:new.classtype,
			:new.ins_id,
			:new.ins_c4c_id,
			:new.ins_univid,
			:new.ins_crtd,
			:new.ins_obj_stt,
			:new.ins_vers,
			:new.ins_member,
			:new.ins_type,
			:new.ins_insurance_id,
			:new.ins_effective_date,
			:new.ins_termination_date,
			:new.ins_vsbt,
			:new.ins_dltddt,
			:new.ins_origcrtr,
			:new.ins_origcrtrlogdin,
			:new.ins_las_act,
			:new.ins_las_act_by,
			:new.ins_las_act_by_logdin,
			:new.ins_las_act_actrtyp,
			:new.ins_las_act_tim,
			:new.ins_las_act_tim,
			null,
			u_other_insurance.nextval,
			null,
			null
		);
	end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
141
</td>
<td>
THH_C4C
</td>
<td>
TRG_OTHER_INS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_OTHER_INSURANCE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_other_ins_auditupdate before update on t_other_insurance

	for each row
		
</td>
<td>
PL/SQL
</td>
<td>
declare last_audid number;

		begin
			begin
				select ins_audid into last_audid
				from a_other_insurance
				where ins_id = :old.ins_id
				and
				ins_next_audid is null
				and
				rownum &lt; 2
				for update;
			exception
				when no_data_found then
					last_audid := null;
			end;

			begin
				if :old.ins_las_act_tim = :new.ins_las_act_tim then
					update a_other_insurance
					set
						classtype = :new.classtype,
						ins_id = :new.ins_id,
						ins_c4c_id = :new.ins_c4c_id,
						ins_univid = :new.ins_univid,
						ins_crtd = :new.ins_crtd,
						ins_obj_stt = :new.ins_obj_stt,
						ins_vers = :new.ins_vers,
						ins_member = :new.ins_member,
						ins_type = :new.ins_type,
						ins_insurance_id = :new.ins_insurance_id,
						ins_effective_date = :new.ins_effective_date,
						ins_termination_date = :new.ins_termination_date,
						ins_vsbt = :new.ins_vsbt,
						ins_dltddt = :new.ins_dltddt,
						ins_origcrtr = :new.ins_origcrtr,
						ins_origcrtrlogdin = :new.ins_origcrtrlogdin,
						ins_las_act = :new.ins_las_act,
						ins_las_act_by = :new.ins_las_act_by,
						ins_las_act_by_logdin = :new.ins_las_act_by_logdin,
						ins_las_act_actrtyp = :new.ins_las_act_actrtyp,
						ins_las_act_tim = :new.ins_las_act_tim
				where
						ins_audid = last_audid;
				else
					insert into a_other_insurance (
						classtype,
						ins_id,
						ins_c4c_id,
						ins_univid,
						ins_crtd,
						ins_obj_stt,
						ins_vers,
						ins_member,
						ins_type,
						ins_insurance_id,
						ins_effective_date,
						ins_termination_date,
						ins_vsbt,
						ins_dltddt,
						ins_origcrtr,
						ins_origcrtrlogdin,
						ins_las_act,
						ins_las_act_by,
						ins_las_act_by_logdin,
						ins_las_act_actrtyp,
						ins_las_act_tim,
						ins_valid_from,
						ins_valid_to,
						ins_audid,
						ins_prev_audid,
						ins_next_audid
					) values (
						:new.classtype,
						:new.ins_id,
						:new.ins_c4c_id,
						:new.ins_univid,
						:new.ins_crtd,
						
:new.ins_obj_stt,
						:new.ins_vers,
						:new.ins_member,
						:new.ins_type,
						:new.ins_insurance_id,
						:new.ins_effective_date,
						:new.ins_termination_date,
						:new.ins_vsbt,
						:new.ins_dltddt,
						:new.ins_origcrtr,
						:new.ins_origcrtrlogdin,
						:new.ins_las_act,
						:new.ins_las_act_by,
						:new.ins_las_act_by_logdin,
						:new.ins_las_act_actrtyp,
						:new.ins_las_act_tim,
						:new.ins_las_act_tim,
						null,
						u_other_insurance.nextval,
						last_audid,
						null
					);

					update a_other_insurance
						set
							ins_valid_to = :new.ins_las_act_tim,
							ins_next_audid = u_other_insurance.currval
						where
							ins_audid = last_audid;
				end if;
			end;
		end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
142
</td>
<td>
THH_C4C
</td>
<td>
TRG_OUTCOME
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_OUTCOME
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_outcome BEFORE INSERT OR UPDATE ON T_outcome FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.outcome_crtd IS NULL THEN
    :new.outcome_crtd := curr_date;
  END IF;
  IF :new.outcome_las_act_tim IS NULL THEN
    :new.outcome_las_act_tim := curr_date;
  END IF;
  IF :new.outcome_obj_stt IS NULL THEN
    :new.outcome_obj_stt := 1;
  END IF;
  IF :new.outcome_vers IS NULL THEN
    :new.outcome_vers := 0;
  END IF;
  IF :new.outcome_vsbt IS NULL THEN
    :new.outcome_vsbt := 1001;
  END IF;
  IF :new.outcome_origcrtr IS NULL THEN
    :new.outcome_origcrtr := 1;
  END IF;
  IF :new.outcome_origcrtrlogdin IS NULL THEN
    :new.outcome_origcrtrlogdin := 1;
  END IF;
  IF :new.outcome_las_act_by_logdin IS NULL THEN
    :new.outcome_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_outcome
  ( outcome_ID,
   CLASSTYPE,
   outcome_C4C_ID,
   outcome_CRTD,
   outcome_LAS_ACT_TIM,
   outcome_OBJ_STT,
   outcome_VERS,
   outcome_VSBT,
   outcome_DLTDT,
   outcome_LAS_ACT_BY,
   outcome_ORIGCRTR,
   outcome_ORIGCRTRLOGDIN,
   outcome_LAS_ACT_BY_LOGDIN,
   outcome_UNIVID,
   outcome_result,
   outcome_reason,
   valid_from,
   valid_to ,
   outcome_audid,
   outcome_prev_audid,
   outcome_next_audid )
  VALUES
  (:new.outcome_ID,
   :new.CLASSTYPE,
   :new.outcome_C4C_ID,
   :new.outcome_CRTD,
   :new.outcome_LAS_ACT_TIM,
   :new.outcome_OBJ_STT,
   :new.outcome_VERS,
   :new.outcome_VSBT,
   :new.outcome_DLTDT,
   :new.outcome_LAS_ACT_BY,
   :new.outcome_ORIGCRTR,
   :new.outcome_ORIGCRTRLOGDIN,
   :new.outcome_LAS_ACT_BY_LOGDIN,
   :new.outcome_UNIVID,
   :new.outcome_result,
   :new.outcome_reason,
   :new.outcome_las_act_tim,
   NULL,
   u_outcome.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT outcome_audid INTO last_audid FROM a_outcome
      WHERE outcome_id =  :old.outcome_id AND outcome_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastAc
tionTime has not changed - no new transaction */
  IF :old.outcome_las_act_tim = :new.outcome_las_act_tim THEN
    UPDATE a_outcome
     SET outcome_id                         = :new.outcome_id,
         classtype                         = :new.classtype,
         outcome_c4c_id                     = :new.outcome_c4c_id,
         outcome_crtd                       = :new.outcome_crtd,
         outcome_las_act_tim		   = :new.outcome_las_act_tim,
         outcome_obj_stt                    = :new.outcome_obj_stt,
         outcome_vers                       = :new.outcome_vers,
         outcome_vsbt                       = :new.outcome_vsbt,
         outcome_dltdt                      = :new.outcome_dltdt,
         outcome_LAS_ACT_BY                = :new.outcome_LAS_ACT_BY,
         outcome_origcrtr                   = :new.outcome_origcrtr,
         outcome_origcrtrlogdin             = :new.outcome_origcrtrlogdin,
         outcome_las_act_by_logdin          = :new.outcome_las_act_by_logdin,
         outcome_UNIVID                    = :new.outcome_univid,
         outcome_result                    = :new.outcome_result,
         outcome_reason                    = :new.outcome_reason
      WHERE outcome_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_outcome
  ( outcome_ID,
   CLASSTYPE,
   outcome_C4C_ID,
   outcome_CRTD,
   outcome_LAS_ACT_TIM,
   outcome_OBJ_STT,
   outcome_VERS,
   outcome_VSBT,
   outcome_DLTDT,
   outcome_LAS_ACT_BY,
   outcome_ORIGCRTR,
   outcome_ORIGCRTRLOGDIN,
   outcome_LAS_ACT_BY_LOGDIN,
   outcome_UNIVID,
   outcome_result,
   outcome_reason,
   valid_from,
   valid_to ,
   outcome_audid,
   outcome_prev_audid,
   outcome_next_audid )
  VALUES
  (:new.outcome_ID,
   :new.CLASSTYPE,
   :new.outcome_C4C_ID,
   :new.outcome_CRTD,
   :new.outcome_LAS_ACT_TIM,
   :new.outcome_OBJ_STT,
   :new.outcome_VERS,
   :new.outcome_VSBT,

   :new.outcome_DLTDT,
   :new.outcome_LAS_ACT_BY,
   :new.outcome_ORIGCRTR,
   :new.outcome_ORIGCRTRLOGDIN,
   :new.outcome_LAS_ACT_BY_LOGDIN,
   :new.outcome_UNIVID,
   :new.outcome_result,
   :new.outcome_reason,
   :new.outcome_las_act_tim,
   NULL,
   u_outcome.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_outcome
      SET
        valid_to = :new.outcome_las_act_tim,
        outcome_next_audid = u_outcome.CURRVAL
      WHERE outcome_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
143
</td>
<td>
THH_C4C
</td>
<td>
TRG_PIDQ_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAT_ID_QRY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PIDQ_AUDITINSERT&quot; BEFORE INSERT ON T_PAT_ID_QRY FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pidq_crtd IS NULL THEN 
    :new.pidq_crtd := curr_date; 
  END IF; 

  IF :new.pidq_las_act_tim IS NULL THEN 
    :new.pidq_las_act_tim := curr_date; 
  END IF; 

  IF :new.pidq_las_act IS NULL THEN 
    :new.pidq_las_act := 1; 
  END IF; 

  IF :new.pidq_obj_stt IS NULL THEN 
    :new.pidq_obj_stt := 1; 
  END IF; 

  IF :new.pidq_vers IS NULL THEN 
    :new.pidq_vers := 0; 
  END IF; 

  IF :new.pidq_vsbt IS NULL THEN 
    :new.pidq_vsbt := 1001; 
  END IF; 

  IF :new.pidq_las_act_by IS NULL THEN 
    :new.pidq_las_act_by := 1; 
  END IF; 

  IF :new.pidq_origcrtr IS NULL THEN 
    :new.pidq_origcrtr := 1; 
  END IF; 

  IF :new.pidq_origcrtrlogdin IS NULL THEN 
    :new.pidq_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pidq_las_act_by_logdin IS NULL THEN 
    :new.pidq_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pat_id_qry 
  ( 
   pidq_dltddt, 
   pidq_las_act_by, 
   pidq_origcrtr, 
   pidq_origcrtrlogdin, 
   pidq_las_act_by_logdin, 
   pidq_univid, 
   pidq_nam, 
   pidq_rtng, 
   pidq_ddln, 
   pidq_xml_qry, 
   pidq_prus, 
   pidq_sub_qry, 
   pidq_txt_qry, 
   pidq_frstatvd, 
   pidq_las_atvd, 
   pidq_las_dctd, 
   pidq_frstsbtdat, 
   pidq_las_sbtdat, 
   pidq_wkfwistcid, 
   pidq_cnv_id, 
   pidq_ownrchndflag, 
   pidq_ownrchndcnt, 
   pidq_dvtndt, 
   pidq_cmmt, 
   pidq_las_dctdby, 
   pidq_frstatvdby, 
   pidq_las_atvdby, 
   pidq_ratnapvl, 
   pidq_apvl, 
   pidq_rcpttrkg, 
   pidq_las_sbtdby, 
   pidq_frstsbtdby, 
   pidq_rfngwkfwtsk, 
   pidq_prvsrfngtsk, 
   pidq_prvsrfngtsk_prmn, 
   pidq_ownr, 
   pidq_prvsownr, 
   pidq_prvssndr, 
   pidq_prvsownrprmn, 
   pidq_tnfr, 
   pidq_prvstnfr, 
   pidq_sch, 
   pidq_rslscnfg, 
   pidq_typ_sbty, 
   pidq_amtn, 
   classtype, 
   pidq_c4c_id, 
   pidq_crtd, 
   pidq_las_act, 
   pidq_las_act_actrtyp, 
   pidq_obj_stt, 
   pidq_vers, 
   pidq_vsbt, 
   pidq_id, 
   valid_from, 
   valid_to , 
   p
idq_audid, 
   pidq_prev_audid, 
   pidq_next_audid
  ) 
  VALUES 
  ( 
   :new.pidq_dltddt,
   :new.pidq_las_act_by,
   :new.pidq_origcrtr,
   :new.pidq_origcrtrlogdin,
   :new.pidq_las_act_by_logdin,
   :new.pidq_univid,
   :new.pidq_nam,
   :new.pidq_rtng,
   :new.pidq_ddln,
   :new.pidq_xml_qry,
   :new.pidq_prus,
   :new.pidq_sub_qry,
   :new.pidq_txt_qry,
   :new.pidq_frstatvd,
   :new.pidq_las_atvd,
   :new.pidq_las_dctd,
   :new.pidq_frstsbtdat,
   :new.pidq_las_sbtdat,
   :new.pidq_wkfwistcid,
   :new.pidq_cnv_id,
   :new.pidq_ownrchndflag,
   :new.pidq_ownrchndcnt,
   :new.pidq_dvtndt,
   :new.pidq_cmmt,
   :new.pidq_las_dctdby,
   :new.pidq_frstatvdby,
   :new.pidq_las_atvdby,
   :new.pidq_ratnapvl,
   :new.pidq_apvl,
   :new.pidq_rcpttrkg,
   :new.pidq_las_sbtdby,
   :new.pidq_frstsbtdby,
   :new.pidq_rfngwkfwtsk,
   :new.pidq_prvsrfngtsk,
   :new.pidq_prvsrfngtsk_prmn,
   :new.pidq_ownr,
   :new.pidq_prvsownr,
   :new.pidq_prvssndr,
   :new.pidq_prvsownrprmn,
   :new.pidq_tnfr,
   :new.pidq_prvstnfr,
   :new.pidq_sch,
   :new.pidq_rslscnfg,
   :new.pidq_typ_sbty,
   :new.pidq_amtn,
   :new.classtype,
   :new.pidq_c4c_id,
   :new.pidq_crtd,
   :new.pidq_las_act,
   :new.pidq_las_act_actrtyp,
   :new.pidq_obj_stt,
   :new.pidq_vers,
   :new.pidq_vsbt, 
   :new.pidq_id, 
   :new.pidq_las_act_tim, 
   NULL, 
   u_pat_id_qry.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
144
</td>
<td>
THH_C4C
</td>
<td>
TRG_PIDQ_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAT_ID_QRY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pidq_auditupdate BEFORE
  UPDATE
    ON T_PAT_ID_QRY FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pidq_audid
      INTO
        last_audid
      FROM
        a_pat_id_qry
      WHERE
        pidq_id            = :old.pidq_id
      AND pidq_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pidq_las_act_tim = :new.pidq_las_act_tim THEN
      UPDATE
        a_pat_id_qry
      SET
        classtype              = :new.classtype,
        pidq_c4c_id            = :new.pidq_c4c_id,
        pidq_crtd              = :new.pidq_crtd,
        pidq_las_act           = :new.pidq_las_act,
        pidq_las_act_actrtyp   = :new.pidq_las_act_actrtyp,
        pidq_obj_stt           = :new.pidq_obj_stt,
        pidq_vers              = :new.pidq_vers,
        pidq_vsbt              = :new.pidq_vsbt,
        pidq_dltddt            = :new.pidq_dltddt,
        pidq_las_act_by        = :new.pidq_las_act_by,
        pidq_origcrtr          = :new.pidq_origcrtr,
        pidq_origcrtrlogdin    = :new.pidq_origcrtrlogdin,
        pidq_las_act_by_logdin = :new.pidq_las_act_by_logdin,
        pidq_univid            = :new.pidq_univid,
        pidq_nam               = :new.pidq_nam,
        pidq_rtng              = :new.pidq_rtng,
        pidq_ddln              = :new.pidq_ddln,
        pidq_xml_qry           = :new.pidq_xml_qry,
        pidq_prus              = :new.pidq_prus,
        pidq_sub_qry           = :new.pidq_sub_qry,
        pidq_txt_qry           = :new.pidq_txt_qry,
        pidq_frstatvd          = :new.pidq_frstatvd,
        pidq_las_atvd          = :new.pidq_las_atvd,
        pidq_las_dctd          = :new.pidq_las_dctd,
        pidq_frstsbtdat        = :new.pidq_frstsbtdat,
        pidq_las_sbtdat        = :new.pidq_las_sbtdat,
        pidq_wkfwistcid        = :new.pidq_wkf
wistcid,
        pidq_cnv_id            = :new.pidq_cnv_id,
        pidq_ownrchndflag      = :new.pidq_ownrchndflag,
        pidq_ownrchndcnt       = :new.pidq_ownrchndcnt,
        pidq_dvtndt            = :new.pidq_dvtndt,
        pidq_cmmt              = :new.pidq_cmmt,
        pidq_las_dctdby        = :new.pidq_las_dctdby,
        pidq_frstatvdby        = :new.pidq_frstatvdby,
        pidq_las_atvdby        = :new.pidq_las_atvdby,
        pidq_ratnapvl          = :new.pidq_ratnapvl,
        pidq_apvl              = :new.pidq_apvl,
        pidq_rcpttrkg          = :new.pidq_rcpttrkg,
        pidq_las_sbtdby        = :new.pidq_las_sbtdby,
        pidq_frstsbtdby        = :new.pidq_frstsbtdby,
        pidq_rfngwkfwtsk       = :new.pidq_rfngwkfwtsk,
        pidq_prvsrfngtsk       = :new.pidq_prvsrfngtsk,
        pidq_prvsrfngtsk_prmn  = :new.pidq_prvsrfngtsk_prmn,
        pidq_ownr              = :new.pidq_ownr,
        pidq_prvsownr          = :new.pidq_prvsownr,
        pidq_prvssndr          = :new.pidq_prvssndr,
        pidq_prvsownrprmn      = :new.pidq_prvsownrprmn,
        pidq_tnfr              = :new.pidq_tnfr,
        pidq_prvstnfr          = :new.pidq_prvstnfr,
        pidq_sch               = :new.pidq_sch,
        pidq_rslscnfg          = :new.pidq_rslscnfg,
        pidq_typ_sbty          = :new.pidq_typ_sbty,
        pidq_amtn              = :new.pidq_amtn
      WHERE
        pidq_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pat_id_qry
        (
          classtype,
          pidq_c4c_id,
          pidq_crtd,
          pidq_las_act,
          pidq_las_act_actrtyp,
          pidq_obj_stt,
          pidq_vers,
          pidq_vsbt,
          pidq_dltddt,
          pidq_las_act_by,
          pidq_origcrtr,
          pidq_origcrtrlogdin,
          pidq_las_act_by_logdin,
          pidq_univid,
          pidq_nam,

       pidq_rtng,
          pidq_ddln,
          pidq_xml_qry,
          pidq_prus,
          pidq_sub_qry,
          pidq_txt_qry,
          pidq_frstatvd,
          pidq_las_atvd,
          pidq_las_dctd,
          pidq_frstsbtdat,
          pidq_las_sbtdat,
          pidq_wkfwistcid,
          pidq_cnv_id,
          pidq_ownrchndflag,
          pidq_ownrchndcnt,
          pidq_dvtndt,
          pidq_cmmt,
          pidq_las_dctdby,
          pidq_frstatvdby,
          pidq_las_atvdby,
          pidq_ratnapvl,
          pidq_apvl,
          pidq_rcpttrkg,
          pidq_las_sbtdby,
          pidq_frstsbtdby,
          pidq_rfngwkfwtsk,
          pidq_prvsrfngtsk,
          pidq_prvsrfngtsk_prmn,
          pidq_ownr,
          pidq_prvsownr,
          pidq_prvssndr,
          pidq_prvsownrprmn,
          pidq_tnfr,
          pidq_prvstnfr,
          pidq_sch,
          pidq_rslscnfg,
          pidq_typ_sbty,
          pidq_amtn,
          pidq_id,
          valid_from,
          valid_to,
          pidq_audid,
          pidq_prev_audid,
          pidq_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pidq_c4c_id,
          :new.pidq_crtd,
          :new.pidq_las_act,
          :new.pidq_las_act_actrtyp,
          :new.pidq_obj_stt,
          :new.pidq_vers,
          :new.pidq_vsbt,
          :new.pidq_dltddt,
          :new.pidq_las_act_by,
          :new.pidq_origcrtr,
          :new.pidq_origcrtrlogdin,
          :new.pidq_las_act_by_logdin,
          :new.pidq_univid,
          :new.pidq_nam,
          :new.pidq_rtng,
          :new.pidq_ddln,
          :new.pidq_xml_qry,
          :new.pidq_prus,
          :new.pidq_sub_qry,
          :new.pidq_txt_qry,
          :new.pidq_frstatvd,
          :new.pidq_las_atvd,
          :new.pidq_las_dctd,
          :new.pidq_frstsbtdat,
          :new.pidq_las_sbtdat,
          :new.pidq_wkfwistcid,
          :new.pidq_cnv_id,
          :new.pidq_ownrchndflag,
          :new.pidq_ownrchn
dcnt,
          :new.pidq_dvtndt,
          :new.pidq_cmmt,
          :new.pidq_las_dctdby,
          :new.pidq_frstatvdby,
          :new.pidq_las_atvdby,
          :new.pidq_ratnapvl,
          :new.pidq_apvl,
          :new.pidq_rcpttrkg,
          :new.pidq_las_sbtdby,
          :new.pidq_frstsbtdby,
          :new.pidq_rfngwkfwtsk,
          :new.pidq_prvsrfngtsk,
          :new.pidq_prvsrfngtsk_prmn,
          :new.pidq_ownr,
          :new.pidq_prvsownr,
          :new.pidq_prvssndr,
          :new.pidq_prvsownrprmn,
          :new.pidq_tnfr,
          :new.pidq_prvstnfr,
          :new.pidq_sch,
          :new.pidq_rslscnfg,
          :new.pidq_typ_sbty,
          :new.pidq_amtn,
          :new.pidq_id,
          :new.pidq_las_act_tim,
          NULL,
          u_pat_id_qry.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pat_id_qry
      SET
        valid_to        = :new.pidq_las_act_tim,
        pidq_next_audid = u_pat_id_qry.CURRVAL
      WHERE
        pidq_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
145
</td>
<td>
THH_C4C
</td>
<td>
TRG_PDIS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRDGISSCTY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PDIS_AUDITINSERT&quot; BEFORE INSERT ON T_PAYRDGISSCTY FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pdis_crtd IS NULL THEN 
    :new.pdis_crtd := curr_date; 
  END IF; 

  IF :new.pdis_las_act_tim IS NULL THEN 
    :new.pdis_las_act_tim := curr_date; 
  END IF; 

  IF :new.pdis_las_act IS NULL THEN 
    :new.pdis_las_act := 1; 
  END IF; 

  IF :new.pdis_obj_stt IS NULL THEN 
    :new.pdis_obj_stt := 1; 
  END IF; 

  IF :new.pdis_vers IS NULL THEN 
    :new.pdis_vers := 0; 
  END IF; 

  IF :new.pdis_vsbt IS NULL THEN 
    :new.pdis_vsbt := 1001; 
  END IF; 

  IF :new.pdis_las_act_by IS NULL THEN 
    :new.pdis_las_act_by := 1; 
  END IF; 

  IF :new.pdis_origcrtr IS NULL THEN 
    :new.pdis_origcrtr := 1; 
  END IF; 

  IF :new.pdis_origcrtrlogdin IS NULL THEN 
    :new.pdis_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pdis_las_act_by_logdin IS NULL THEN 
    :new.pdis_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_payrdgisscty 
  ( 
   classtype, 
   pdis_c4c_id, 
   pdis_crtd, 
   pdis_las_act, 
   pdis_las_act_actrtyp, 
   pdis_obj_stt, 
   pdis_vers, 
   pdis_vsbt, 
   pdis_dltddt, 
   pdis_las_act_by, 
   pdis_origcrtr, 
   pdis_origcrtrlogdin, 
   pdis_las_act_by_logdin, 
   pdis_univid, 
   pdis_payr, 
   pdis_dgisscty, 
   pdis_id, 
   valid_from, 
   valid_to , 
   pdis_audid, 
   pdis_prev_audid, 
   pdis_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.pdis_c4c_id,
   :new.pdis_crtd,
   :new.pdis_las_act,
   :new.pdis_las_act_actrtyp,
   :new.pdis_obj_stt,
   :new.pdis_vers,
   :new.pdis_vsbt,
   :new.pdis_dltddt,
   :new.pdis_las_act_by,
   :new.pdis_origcrtr,
   :new.pdis_origcrtrlogdin,
   :new.pdis_las_act_by_logdin,
   :new.pdis_univid,
   :new.pdis_payr,
   :new.pdis_dgisscty, 
   :new.pdis_id, 
   :new.pdis_las_act_tim, 
   NULL, 
   u_payrdgisscty.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
146
</td>
<td>
THH_C4C
</td>
<td>
TRG_PDIS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRDGISSCTY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pdis_auditupdate BEFORE
  UPDATE
    ON T_PAYRDGISSCTY FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pdis_audid
      INTO
        last_audid
      FROM
        a_payrdgisscty
      WHERE
        pdis_id            = :old.pdis_id
      AND pdis_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pdis_las_act_tim = :new.pdis_las_act_tim THEN
      UPDATE
        a_payrdgisscty
      SET
        classtype              = :new.classtype,
        pdis_c4c_id            = :new.pdis_c4c_id,
        pdis_crtd              = :new.pdis_crtd,
        pdis_las_act           = :new.pdis_las_act,
        pdis_las_act_actrtyp   = :new.pdis_las_act_actrtyp,
        pdis_obj_stt           = :new.pdis_obj_stt,
        pdis_vers              = :new.pdis_vers,
        pdis_vsbt              = :new.pdis_vsbt,
        pdis_dltddt            = :new.pdis_dltddt,
        pdis_las_act_by        = :new.pdis_las_act_by,
        pdis_origcrtr          = :new.pdis_origcrtr,
        pdis_origcrtrlogdin    = :new.pdis_origcrtrlogdin,
        pdis_las_act_by_logdin = :new.pdis_las_act_by_logdin,
        pdis_univid            = :new.pdis_univid,
        pdis_payr              = :new.pdis_payr,
        pdis_dgisscty          = :new.pdis_dgisscty
      WHERE
        pdis_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_payrdgisscty
        (
          classtype,
          pdis_c4c_id,
          pdis_crtd,
          pdis_las_act,
          pdis_las_act_actrtyp,
          pdis_obj_stt,
          pdis_vers,
          pdis_vsbt,
          pdis_dltddt,
          pdis_las_act_by,
          pdis_origcrtr,
          pdis_origcrtrlogdin,
          pdis_las_act_by_logdi
n,
          pdis_univid,
          pdis_payr,
          pdis_dgisscty,
          pdis_id,
          valid_from,
          valid_to,
          pdis_audid,
          pdis_prev_audid,
          pdis_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pdis_c4c_id,
          :new.pdis_crtd,
          :new.pdis_las_act,
          :new.pdis_las_act_actrtyp,
          :new.pdis_obj_stt,
          :new.pdis_vers,
          :new.pdis_vsbt,
          :new.pdis_dltddt,
          :new.pdis_las_act_by,
          :new.pdis_origcrtr,
          :new.pdis_origcrtrlogdin,
          :new.pdis_las_act_by_logdin,
          :new.pdis_univid,
          :new.pdis_payr,
          :new.pdis_dgisscty,
          :new.pdis_id,
          :new.pdis_las_act_tim,
          NULL,
          u_payrdgisscty.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_payrdgisscty
      SET
        valid_to        = :new.pdis_las_act_tim,
        pdis_next_audid = u_payrdgisscty.CURRVAL
      WHERE
        pdis_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
147
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYPD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PYPD_AUDITINSERT&quot; BEFORE INSERT ON T_PAYRPAYRDAT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pypd_crtd IS NULL THEN 
    :new.pypd_crtd := curr_date; 
  END IF; 

  IF :new.pypd_las_act_tim IS NULL THEN 
    :new.pypd_las_act_tim := curr_date; 
  END IF; 

  IF :new.pypd_las_act IS NULL THEN 
    :new.pypd_las_act := 1; 
  END IF; 

  IF :new.pypd_obj_stt IS NULL THEN 
    :new.pypd_obj_stt := 1; 
  END IF; 

  IF :new.pypd_vers IS NULL THEN 
    :new.pypd_vers := 0; 
  END IF; 

  IF :new.pypd_vsbt IS NULL THEN 
    :new.pypd_vsbt := 1001; 
  END IF; 

  IF :new.pypd_las_act_by IS NULL THEN 
    :new.pypd_las_act_by := 1; 
  END IF; 

  IF :new.pypd_origcrtr IS NULL THEN 
    :new.pypd_origcrtr := 1; 
  END IF; 

  IF :new.pypd_origcrtrlogdin IS NULL THEN 
    :new.pypd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pypd_las_act_by_logdin IS NULL THEN 
    :new.pypd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_payrpayrdat 
  ( 
   pypd_hreddt, 
   pypd_tmtddt, 
   pypd_cnctinfopayrdat, 
   classtype, 
   pypd_c4c_id, 
   pypd_crtd, 
   pypd_las_act, 
   pypd_las_act_actrtyp, 
   pypd_obj_stt, 
   pypd_vers, 
   pypd_vsbt, 
   pypd_dltddt, 
   pypd_las_act_by, 
   pypd_origcrtr, 
   pypd_origcrtrlogdin, 
   pypd_las_act_by_logdin, 
   pypd_univid, 
   pypd_frstnam, 
   pypd_mdlenam, 
   pypd_las_nam, 
   pypd_gndrcode, 
   pypd_scl_sctynmbr, 
   pypd_dt_of_brth, 
   pypd_empeid, 
   pypd_strtof_yr, 
   pypd_id, 
   valid_from, 
   valid_to , 
   pypd_audid, 
   pypd_prev_audid, 
   pypd_next_audid
  ) 
  VALUES 
  ( 
   :new.pypd_hreddt,
   :new.pypd_tmtddt,
   :new.pypd_cnctinfopayrdat,
   :new.classtype,
   :new.pypd_c4c_id,
   :new.pypd_crtd,
   :new.pypd_las_act,
   :new.pypd_las_act_actrtyp,
   :new.pypd_obj_stt,
   :new.pypd_vers,
   :new.pypd_vsbt,
   :new.pypd_dltddt,
   :new.pypd_las_act_by,
   :new.pypd_origcrtr,
   :new.pypd_origcrtrlogdin,
   :new.pypd_las_act_by_logdin,
   :new.pypd_univid,
   :new.pypd_frstnam,
   :new.pypd_mdlenam,
   :new.
pypd_las_nam,
   :new.pypd_gndrcode,
   :new.pypd_scl_sctynmbr,
   :new.pypd_dt_of_brth,
   :new.pypd_empeid,
   :new.pypd_strtof_yr, 
   :new.pypd_id, 
   :new.pypd_las_act_tim, 
   NULL, 
   u_payrpayrdat.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
148
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYPD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pypd_auditupdate BEFORE
  UPDATE
    ON T_PAYRPAYRDAT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pypd_audid
      INTO
        last_audid
      FROM
        a_payrpayrdat
      WHERE
        pypd_id            = :old.pypd_id
      AND pypd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pypd_las_act_tim = :new.pypd_las_act_tim THEN
      UPDATE
        a_payrpayrdat
      SET
        classtype              = :new.classtype,
        pypd_c4c_id            = :new.pypd_c4c_id,
        pypd_crtd              = :new.pypd_crtd,
        pypd_las_act           = :new.pypd_las_act,
        pypd_las_act_actrtyp   = :new.pypd_las_act_actrtyp,
        pypd_obj_stt           = :new.pypd_obj_stt,
        pypd_vers              = :new.pypd_vers,
        pypd_vsbt              = :new.pypd_vsbt,
        pypd_dltddt            = :new.pypd_dltddt,
        pypd_las_act_by        = :new.pypd_las_act_by,
        pypd_origcrtr          = :new.pypd_origcrtr,
        pypd_origcrtrlogdin    = :new.pypd_origcrtrlogdin,
        pypd_las_act_by_logdin = :new.pypd_las_act_by_logdin,
        pypd_univid            = :new.pypd_univid,
        pypd_frstnam           = :new.pypd_frstnam,
        pypd_mdlenam           = :new.pypd_mdlenam,
        pypd_las_nam           = :new.pypd_las_nam,
        pypd_gndrcode          = :new.pypd_gndrcode,
        pypd_scl_sctynmbr      = :new.pypd_scl_sctynmbr,
        pypd_dt_of_brth        = :new.pypd_dt_of_brth,
        pypd_empeid            = :new.pypd_empeid,
        pypd_strtof_yr         = :new.pypd_strtof_yr,
        pypd_hreddt            = :new.pypd_hreddt,
        pypd_tmtddt            = :new.pypd_tmtddt,
        pypd_cnctinfopayrdat   = :new.pypd_cnctinfopayrdat
      WHERE
        pypd_audid = last_audid;
      /* LastActionTime has chan
ged - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_payrpayrdat
        (
          classtype,
          pypd_c4c_id,
          pypd_crtd,
          pypd_las_act,
          pypd_las_act_actrtyp,
          pypd_obj_stt,
          pypd_vers,
          pypd_vsbt,
          pypd_dltddt,
          pypd_las_act_by,
          pypd_origcrtr,
          pypd_origcrtrlogdin,
          pypd_las_act_by_logdin,
          pypd_univid,
          pypd_frstnam,
          pypd_mdlenam,
          pypd_las_nam,
          pypd_gndrcode,
          pypd_scl_sctynmbr,
          pypd_dt_of_brth,
          pypd_empeid,
          pypd_strtof_yr,
          pypd_hreddt,
          pypd_tmtddt,
          pypd_cnctinfopayrdat,
          pypd_id,
          valid_from,
          valid_to,
          pypd_audid,
          pypd_prev_audid,
          pypd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pypd_c4c_id,
          :new.pypd_crtd,
          :new.pypd_las_act,
          :new.pypd_las_act_actrtyp,
          :new.pypd_obj_stt,
          :new.pypd_vers,
          :new.pypd_vsbt,
          :new.pypd_dltddt,
          :new.pypd_las_act_by,
          :new.pypd_origcrtr,
          :new.pypd_origcrtrlogdin,
          :new.pypd_las_act_by_logdin,
          :new.pypd_univid,
          :new.pypd_frstnam,
          :new.pypd_mdlenam,
          :new.pypd_las_nam,
          :new.pypd_gndrcode,
          :new.pypd_scl_sctynmbr,
          :new.pypd_dt_of_brth,
          :new.pypd_empeid,
          :new.pypd_strtof_yr,
          :new.pypd_hreddt,
          :new.pypd_tmtddt,
          :new.pypd_cnctinfopayrdat,
          :new.pypd_id,
          :new.pypd_las_act_tim,
          NULL,
          u_payrpayrdat.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence numb
er
      */
      UPDATE
        a_payrpayrdat
      SET
        valid_to        = :new.pypd_las_act_tim,
        pypd_next_audid = u_payrpayrdat.CURRVAL
      WHERE
        pypd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
149
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYRL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRROLS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PYRL_AUDITINSERT&quot; BEFORE INSERT ON T_PAYRROLS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pyrl_crtd IS NULL THEN 
    :new.pyrl_crtd := curr_date; 
  END IF; 

  IF :new.pyrl_las_act_tim IS NULL THEN 
    :new.pyrl_las_act_tim := curr_date; 
  END IF; 

  IF :new.pyrl_las_act IS NULL THEN 
    :new.pyrl_las_act := 1; 
  END IF; 

  IF :new.pyrl_obj_stt IS NULL THEN 
    :new.pyrl_obj_stt := 1; 
  END IF; 

  IF :new.pyrl_vers IS NULL THEN 
    :new.pyrl_vers := 0; 
  END IF; 

  IF :new.pyrl_vsbt IS NULL THEN 
    :new.pyrl_vsbt := 1001; 
  END IF; 

  IF :new.pyrl_las_act_by IS NULL THEN 
    :new.pyrl_las_act_by := 1; 
  END IF; 

  IF :new.pyrl_origcrtr IS NULL THEN 
    :new.pyrl_origcrtr := 1; 
  END IF; 

  IF :new.pyrl_origcrtrlogdin IS NULL THEN 
    :new.pyrl_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pyrl_las_act_by_logdin IS NULL THEN 
    :new.pyrl_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_payrrols 
  ( 
   classtype, 
   pyrl_c4c_id, 
   pyrl_crtd, 
   pyrl_las_act, 
   pyrl_las_act_actrtyp, 
   pyrl_obj_stt, 
   pyrl_vers, 
   pyrl_vsbt, 
   pyrl_dltddt, 
   pyrl_las_act_by, 
   pyrl_origcrtr, 
   pyrl_origcrtrlogdin, 
   pyrl_las_act_by_logdin, 
   pyrl_univid, 
   pyrl_pmryrole, 
   pyrl_wkldlmtd, 
   pyrl_payr, 
   pyrl_usr_rols, 
   pyrl_id, 
   valid_from, 
   valid_to , 
   pyrl_audid, 
   pyrl_prev_audid, 
   pyrl_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.pyrl_c4c_id,
   :new.pyrl_crtd,
   :new.pyrl_las_act,
   :new.pyrl_las_act_actrtyp,
   :new.pyrl_obj_stt,
   :new.pyrl_vers,
   :new.pyrl_vsbt,
   :new.pyrl_dltddt,
   :new.pyrl_las_act_by,
   :new.pyrl_origcrtr,
   :new.pyrl_origcrtrlogdin,
   :new.pyrl_las_act_by_logdin,
   :new.pyrl_univid,
   :new.pyrl_pmryrole,
   :new.pyrl_wkldlmtd,
   :new.pyrl_payr,
   :new.pyrl_usr_rols, 
   :new.pyrl_id, 
   :new.pyrl_las_act_tim, 
   NULL, 
   u_payrrols.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
150
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYRL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRROLS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pyrl_auditupdate BEFORE
  UPDATE
    ON T_PAYRROLS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pyrl_audid
      INTO
        last_audid
      FROM
        a_payrrols
      WHERE
        pyrl_id            = :old.pyrl_id
      AND pyrl_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pyrl_las_act_tim = :new.pyrl_las_act_tim THEN
      UPDATE
        a_payrrols
      SET
        classtype              = :new.classtype,
        pyrl_c4c_id            = :new.pyrl_c4c_id,
        pyrl_crtd              = :new.pyrl_crtd,
        pyrl_las_act           = :new.pyrl_las_act,
        pyrl_las_act_actrtyp   = :new.pyrl_las_act_actrtyp,
        pyrl_obj_stt           = :new.pyrl_obj_stt,
        pyrl_vers              = :new.pyrl_vers,
        pyrl_vsbt              = :new.pyrl_vsbt,
        pyrl_dltddt            = :new.pyrl_dltddt,
        pyrl_las_act_by        = :new.pyrl_las_act_by,
        pyrl_origcrtr          = :new.pyrl_origcrtr,
        pyrl_origcrtrlogdin    = :new.pyrl_origcrtrlogdin,
        pyrl_las_act_by_logdin = :new.pyrl_las_act_by_logdin,
        pyrl_univid            = :new.pyrl_univid,
        pyrl_pmryrole          = :new.pyrl_pmryrole,
        pyrl_wkldlmtd          = :new.pyrl_wkldlmtd,
        pyrl_payr              = :new.pyrl_payr,
        pyrl_usr_rols          = :new.pyrl_usr_rols
      WHERE
        pyrl_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_payrrols
        (
          classtype,
          pyrl_c4c_id,
          pyrl_crtd,
          pyrl_las_act,
          pyrl_las_act_actrtyp,
          pyrl_obj_stt,
          pyrl_vers,
          pyrl_vsbt,
          pyrl_dltddt,
          pyrl_las_a
ct_by,
          pyrl_origcrtr,
          pyrl_origcrtrlogdin,
          pyrl_las_act_by_logdin,
          pyrl_univid,
          pyrl_pmryrole,
          pyrl_wkldlmtd,
          pyrl_payr,
          pyrl_usr_rols,
          pyrl_id,
          valid_from,
          valid_to,
          pyrl_audid,
          pyrl_prev_audid,
          pyrl_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pyrl_c4c_id,
          :new.pyrl_crtd,
          :new.pyrl_las_act,
          :new.pyrl_las_act_actrtyp,
          :new.pyrl_obj_stt,
          :new.pyrl_vers,
          :new.pyrl_vsbt,
          :new.pyrl_dltddt,
          :new.pyrl_las_act_by,
          :new.pyrl_origcrtr,
          :new.pyrl_origcrtrlogdin,
          :new.pyrl_las_act_by_logdin,
          :new.pyrl_univid,
          :new.pyrl_pmryrole,
          :new.pyrl_wkldlmtd,
          :new.pyrl_payr,
          :new.pyrl_usr_rols,
          :new.pyrl_id,
          :new.pyrl_las_act_tim,
          NULL,
          u_payrrols.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_payrrols
      SET
        valid_to        = :new.pyrl_las_act_tim,
        pyrl_next_audid = u_payrrols.CURRVAL
      WHERE
        pyrl_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
151
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYSS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRSRVCSCTY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PYSS_AUDITINSERT&quot; BEFORE INSERT ON T_PAYRSRVCSCTY FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pyss_crtd IS NULL THEN 
    :new.pyss_crtd := curr_date; 
  END IF; 

  IF :new.pyss_las_act_tim IS NULL THEN 
    :new.pyss_las_act_tim := curr_date; 
  END IF; 

  IF :new.pyss_las_act IS NULL THEN 
    :new.pyss_las_act := 1; 
  END IF; 

  IF :new.pyss_obj_stt IS NULL THEN 
    :new.pyss_obj_stt := 1; 
  END IF; 

  IF :new.pyss_vers IS NULL THEN 
    :new.pyss_vers := 0; 
  END IF; 

  IF :new.pyss_vsbt IS NULL THEN 
    :new.pyss_vsbt := 1001; 
  END IF; 

  IF :new.pyss_las_act_by IS NULL THEN 
    :new.pyss_las_act_by := 1; 
  END IF; 

  IF :new.pyss_origcrtr IS NULL THEN 
    :new.pyss_origcrtr := 1; 
  END IF; 

  IF :new.pyss_origcrtrlogdin IS NULL THEN 
    :new.pyss_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pyss_las_act_by_logdin IS NULL THEN 
    :new.pyss_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_payrsrvcscty 
  ( 
   classtype, 
   pyss_c4c_id, 
   pyss_crtd, 
   pyss_las_act, 
   pyss_las_act_actrtyp, 
   pyss_obj_stt, 
   pyss_vers, 
   pyss_vsbt, 
   pyss_dltddt, 
   pyss_las_act_by, 
   pyss_origcrtr, 
   pyss_origcrtrlogdin, 
   pyss_las_act_by_logdin, 
   pyss_univid, 
   pyss_payr, 
   pyss_srvcscty, 
   pyss_id, 
   valid_from, 
   valid_to , 
   pyss_audid, 
   pyss_prev_audid, 
   pyss_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.pyss_c4c_id,
   :new.pyss_crtd,
   :new.pyss_las_act,
   :new.pyss_las_act_actrtyp,
   :new.pyss_obj_stt,
   :new.pyss_vers,
   :new.pyss_vsbt,
   :new.pyss_dltddt,
   :new.pyss_las_act_by,
   :new.pyss_origcrtr,
   :new.pyss_origcrtrlogdin,
   :new.pyss_las_act_by_logdin,
   :new.pyss_univid,
   :new.pyss_payr,
   :new.pyss_srvcscty, 
   :new.pyss_id, 
   :new.pyss_las_act_tim, 
   NULL, 
   u_payrsrvcscty.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
152
</td>
<td>
THH_C4C
</td>
<td>
TRG_PYSS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PAYRSRVCSCTY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pyss_auditupdate BEFORE
  UPDATE
    ON T_PAYRSRVCSCTY FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pyss_audid
      INTO
        last_audid
      FROM
        a_payrsrvcscty
      WHERE
        pyss_id            = :old.pyss_id
      AND pyss_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pyss_las_act_tim = :new.pyss_las_act_tim THEN
      UPDATE
        a_payrsrvcscty
      SET
        classtype              = :new.classtype,
        pyss_c4c_id            = :new.pyss_c4c_id,
        pyss_crtd              = :new.pyss_crtd,
        pyss_las_act           = :new.pyss_las_act,
        pyss_las_act_actrtyp   = :new.pyss_las_act_actrtyp,
        pyss_obj_stt           = :new.pyss_obj_stt,
        pyss_vers              = :new.pyss_vers,
        pyss_vsbt              = :new.pyss_vsbt,
        pyss_dltddt            = :new.pyss_dltddt,
        pyss_las_act_by        = :new.pyss_las_act_by,
        pyss_origcrtr          = :new.pyss_origcrtr,
        pyss_origcrtrlogdin    = :new.pyss_origcrtrlogdin,
        pyss_las_act_by_logdin = :new.pyss_las_act_by_logdin,
        pyss_univid            = :new.pyss_univid,
        pyss_payr              = :new.pyss_payr,
        pyss_srvcscty          = :new.pyss_srvcscty
      WHERE
        pyss_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_payrsrvcscty
        (
          classtype,
          pyss_c4c_id,
          pyss_crtd,
          pyss_las_act,
          pyss_las_act_actrtyp,
          pyss_obj_stt,
          pyss_vers,
          pyss_vsbt,
          pyss_dltddt,
          pyss_las_act_by,
          pyss_origcrtr,
          pyss_origcrtrlogdin,
          pyss_las_act_by_logdi
n,
          pyss_univid,
          pyss_payr,
          pyss_srvcscty,
          pyss_id,
          valid_from,
          valid_to,
          pyss_audid,
          pyss_prev_audid,
          pyss_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pyss_c4c_id,
          :new.pyss_crtd,
          :new.pyss_las_act,
          :new.pyss_las_act_actrtyp,
          :new.pyss_obj_stt,
          :new.pyss_vers,
          :new.pyss_vsbt,
          :new.pyss_dltddt,
          :new.pyss_las_act_by,
          :new.pyss_origcrtr,
          :new.pyss_origcrtrlogdin,
          :new.pyss_las_act_by_logdin,
          :new.pyss_univid,
          :new.pyss_payr,
          :new.pyss_srvcscty,
          :new.pyss_id,
          :new.pyss_las_act_tim,
          NULL,
          u_payrsrvcscty.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_payrsrvcscty
      SET
        valid_to        = :new.pyss_las_act_tim,
        pyss_next_audid = u_payrsrvcscty.CURRVAL
      WHERE
        pyss_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
153
</td>
<td>
THH_C4C
</td>
<td>
TRG_PHI_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PHI
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_phi_auditinsert before insert on t_phi

  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    -- save current date
    curr_date date;

  begin
    curr_date := current_date;
    if :new.created_date is null then
      :new.created_date := curr_date;
    end if;
    if :new.last_action_time is null then
      :new.last_action_time := curr_date;
    end if;
    if :new.last_action is null then
      :new.last_action := 1;
    end if;
    if :new.object_state is null then
      :new.object_state := 1;
    end if;
    if :new.phi_version is null then
      :new.phi_version := 0;
    end if;
--  if :new.phi_vsbt is null then
--    :new.phi_vsbt := 1001;
--  end if;
    if :new.last_action_by is null then
      :new.last_action_by := 1;
    end if;
    if :new.original_creator is null then
      :new.original_creator := 1;
    end if;
--  if :new.phi_origcrtrlogdin is null then
--    :new.phi_origcrtrlogdin := 1;
--  end if;
--  if :new.phi_las_act_by_logdin is null then
--    :new.phi_las_act_by_logdin := 1;
--  end if;

    insert into a_phi (
      classtype,
      phi_id,
      universal_id,
      c4c_id,
      created_date,
      phi_version,
      last_action,
      last_action_time,
      last_action_by,
      object_state,
      deleted_date,
      original_creator,
      member_id,
      phi_type,
      first_name,
      last_name,
      relationship,
      phone_number,
      phone_type,
      email,
      start_date,
      end_date,
      phi_scope,
      auth_source,
      auth_type,
      auth_purpose,
      auth_disclose_to,
      sign_start_date,
      conf_comm_type,
      legal_type,
      rep_address,
      rep_city,
      rep_zip,
      rep_country,
      rep_type,
      valid_from,
      valid_to,
      audid,
      prev_audid,
      next_audid
    ) values (
      :new.classtype,
      :new.phi_id,
      :new.universal_id,
      :new.c4c_id,
      :new.created_date,
      :new.phi_version,
      :new.last_action,
      :new.last_action_time,
      :new.last_action_by,
      :new.object_state,
      :new.deleted_date,
      :new.or
iginal_creator,
      :new.member_id,
      :new.phi_type,
      :new.first_name,
      :new.last_name,
      :new.relationship,
      :new.phone_number,
      :new.phone_type,
      :new.email,
      :new.start_date,
      :new.end_date,
      :new.phi_scope,
      :new.auth_source,
      :new.auth_type,
      :new.auth_purpose,
      :new.auth_disclose_to,
      :new.sign_start_date,
      :new.conf_comm_type,
      :new.legal_type,
      :new.rep_address,
      :new.rep_city,
      :new.rep_zip,
      :new.rep_country,
      :new.rep_type,
      :new.last_action_time,
      null, -- valid to
      u_phi.nextval,
      null, -- prev_audid
      null -- next_audid
    );
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
154
</td>
<td>
THH_C4C
</td>
<td>
TRG_PHI_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PHI
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_phi_auditupdate before update on t_phi

  for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    -- last audit id of record
    last_audid number;

  begin
    begin
      select
        audid
      into
        last_audid
      from
        a_phi
      where
        phi_id = :old.phi_id
        and
        next_audid is null
        and
        rownum &lt; 2 for update;
    exception
      when no_data_found then
        last_audid := null;
    end;

    -- last action time has not changed, no new transaction
    if :old.last_action_time = :new.last_action_time then
      update
        a_phi
      set
      classtype = :new.classtype,
      phi_id = :new.phi_id,
      universal_id = :new.universal_id,
      c4c_id = :new.c4c_id,
      created_date = :new.created_date,
      phi_version = :new.phi_version,
      last_action = :new.last_action,
      last_action_time = :new.last_action_time,
      last_action_by = :new.last_action_by,
      object_state = :new.object_state,
      deleted_date = :new.deleted_date,
      original_creator = :new.original_creator,
      member_id = :new.member_id,
      phi_type = :new.phi_type,
      first_name = :new.first_name,
      last_name = :new.last_name,
      relationship = :new.relationship,
      phone_number = :new.phone_number,
      phone_type = :new.phone_type,
      email = :new.email,
      start_date = :new.start_date,
      end_date = :new.end_date,
      phi_scope = :new.phi_scope,
      auth_source = :new.auth_source,
      auth_type = :new.auth_type,
      auth_purpose = :new.auth_purpose,
      auth_disclose_to = :new.auth_disclose_to,
      sign_start_date = :new.sign_start_date,
      conf_comm_type = :new.conf_comm_type,
      legal_type = :new.legal_type,
      rep_address = :new.rep_address,
      rep_city = :new.rep_city,
      rep_zip = :new.rep_zip,
      rep_country = :new.rep_country,
      rep_type = :new.rep_type
      where
        audid = last_audid;
    -- last action time has changed, new transaction
    else
      -- insert new values introduced by new transaction
      insert into
 a_phi (
      classtype,
      phi_id,
      universal_id,
      c4c_id,
      created_date,
      phi_version,
      last_action,
      last_action_time,
      last_action_by,
      object_state,
      deleted_date,
      original_creator,
      member_id,
      phi_type,
      first_name,
      last_name,
      relationship,
      phone_number,
      phone_type,
      email,
      start_date,
      end_date,
      phi_scope,
      auth_source,
      auth_type,
      auth_purpose,
      auth_disclose_to,
      sign_start_date,
      conf_comm_type,
      legal_type,
      rep_address,
      rep_city,
      rep_zip,
      rep_country,
      rep_type,
      valid_from,
      valid_to,
      audid,
      prev_audid,
      next_audid
    ) values (
      :new.classtype,
      :new.phi_id,
      :new.universal_id,
      :new.c4c_id,
      :new.created_date,
      :new.phi_version,
      :new.last_action,
      :new.last_action_time,
      :new.last_action_by,
      :new.object_state,
      :new.deleted_date,
      :new.original_creator,
      :new.member_id,
      :new.phi_type,
      :new.first_name,
      :new.last_name,
      :new.relationship,
      :new.phone_number,
      :new.phone_type,
      :new.email,
      :new.start_date,
      :new.end_date,
      :new.phi_scope,
      :new.auth_source,
      :new.auth_type,
      :new.auth_purpose,
      :new.auth_disclose_to,
      :new.sign_start_date,
      :new.conf_comm_type,
      :new.legal_type,
      :new.rep_address,
      :new.rep_city,
      :new.rep_zip,
      :new.rep_country,
      :new.rep_type,
      :new.last_action_time,
      null, -- valid to
      u_phi.nextval,
      null, -- prev_audid
      null -- next_audid
      );
      /* update last audit records valid_to to new LastActionTime
      and next audit ID to newly inserted records sequence number
      */
      update
        a_phi
      set
        valid_to = :new.last_action_time,
        next_audid = u_phi.currval
      where
        audid =
last_audid;
    end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
155
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRACROLE_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRACTITIONER_ROLE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pracrole_auditinsert before
	insert
		on t_practitioner_role for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
	/* save current date */
	curr_date date;
begin
  curr_date := current_date;

  if :new.creation_date is null then
    :new.creation_date := curr_date;
  end if;

  if :new.last_action_time is null then
    :new.last_action_time := curr_date;
  end if;

  if :new.object_state is null then
    :new.object_state := 1;
  end if;

  insert into a_practitioner_role
  (
      practitioner_role_id,
	  practitioner_role_name,
	  practitioner_id,
	  supplier_id,
      supplier_location_id,
	  effective_start_date,
	  creation_date,
      object_state,
      valid_from,
      valid_to,
      pracrole_audid,
      pracrole_prev_audid,
      pracrole_next_audid
  )
  values
  (
      :new.practitioner_role_id,
	  :new.practitioner_role_name,
	  :new.practitioner_id,
	  :new.supplier_id,
      :new.supplier_location_id,
	  :new.effective_start_date,
	  :new.creation_date,
      :new.object_state,
      :new.last_action_time,
      null,
      u_practitioner_role.nextval,
      null,
      null
  );
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
156
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRACROLE_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRACTITIONER_ROLE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pracrole_auditupdate before
  update
    on t_practitioner_role for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
    /* last audit ID of record */
    last_audid number;
  begin
    /* retrieve last audit ID of record */
    begin
      select
        pracrole_audid
      into
        last_audid
      from
        a_practitioner_role
      where
        practitioner_role_id            = :old.practitioner_role_id
      and pracrole_next_audid is null
      and rownum           &lt; 2 for update;
    exception
    when no_data_found then
      last_audid := null;
    end;

  insert into a_practitioner_role
  (
      practitioner_role_id,
	  practitioner_role_name,
	  practitioner_id,
	  supplier_id,
      supplier_location_id,
	  effective_start_date,
	  creation_date,
      object_state,
      valid_from,
      valid_to,
      pracrole_audid,
      pracrole_prev_audid,
      pracrole_next_audid
  )
  values
  (
      :new.practitioner_role_id,
	  :new.practitioner_role_name,
	  :new.practitioner_id,
	  :new.supplier_id,
      :new.supplier_location_id,
	  :new.effective_start_date,
	  :new.creation_date,
      :new.object_state,
      :new.last_action_time,
      null,
      u_practitioner_role.nextval,
      last_audid,
      null
  );

      /* update last audit record's valid_to to new LastActionTime
        and next audit ID to newly inserted record's sequence number
        */
      update
        a_practitioner_role
      set
	    valid_to            = :new.last_action_time,
        pracrole_next_audid = u_practitioner_role.currval
      where
        pracrole_audid = last_audid;

end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
157
</td>
<td>
THH_C4C
</td>
<td>
TRG_PERF_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRMR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PERF_AUDITINSERT&quot; BEFORE INSERT ON T_PRMR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.perf_crtd IS NULL THEN 
    :new.perf_crtd := curr_date; 
  END IF; 

  IF :new.perf_las_act_tim IS NULL THEN 
    :new.perf_las_act_tim := curr_date; 
  END IF; 

  IF :new.perf_las_act IS NULL THEN 
    :new.perf_las_act := 1; 
  END IF; 

  IF :new.perf_obj_stt IS NULL THEN 
    :new.perf_obj_stt := 1; 
  END IF; 

  IF :new.perf_vers IS NULL THEN 
    :new.perf_vers := 0; 
  END IF; 

  IF :new.perf_vsbt IS NULL THEN 
    :new.perf_vsbt := 1001; 
  END IF; 

  IF :new.perf_las_act_by IS NULL THEN 
    :new.perf_las_act_by := 1; 
  END IF; 

  IF :new.perf_origcrtr IS NULL THEN 
    :new.perf_origcrtr := 1; 
  END IF; 

  IF :new.perf_origcrtrlogdin IS NULL THEN 
    :new.perf_origcrtrlogdin := 1; 
  END IF; 

  IF :new.perf_las_act_by_logdin IS NULL THEN 
    :new.perf_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_prmr 
  ( 
   perf_vers, 
   perf_vsbt, 
   perf_dltddt, 
   perf_las_act_by, 
   perf_origcrtr, 
   perf_origcrtrlogdin, 
   perf_las_act_by_logdin, 
   perf_univid, 
   perf_prmrrole, 
   perf_can_be_rand, 
   perf_sbtnrole, 
   perf_stt, 
   perf_sttdby, 
   perf_usr, 
   classtype, 
   perf_c4c_id, 
   perf_crtd, 
   perf_las_act, 
   perf_las_act_actrtyp, 
   perf_obj_stt, 
   perf_id, 
   valid_from, 
   valid_to , 
   perf_audid, 
   perf_prev_audid, 
   perf_next_audid
  ) 
  VALUES 
  ( 
   :new.perf_vers,
   :new.perf_vsbt,
   :new.perf_dltddt,
   :new.perf_las_act_by,
   :new.perf_origcrtr,
   :new.perf_origcrtrlogdin,
   :new.perf_las_act_by_logdin,
   :new.perf_univid,
   :new.perf_prmrrole,
   :new.perf_can_be_rand,
   :new.perf_sbtnrole,
   :new.perf_stt,
   :new.perf_sttdby,
   :new.perf_usr,
   :new.classtype,
   :new.perf_c4c_id,
   :new.perf_crtd,
   :new.perf_las_act,
   :new.perf_las_act_actrtyp,
   :new.perf_obj_stt, 
   :new.perf_id, 
   :new.perf_las_act_tim, 
   NULL, 
   u_prmr.NEXTVAL, 
   NULL, 
   NULL
  );
END;








&nbsp;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
158
</td>
<td>
THH_C4C
</td>
<td>
TRG_PERF_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRMR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_perf_auditupdate BEFORE
  UPDATE
    ON T_PRMR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        perf_audid
      INTO
        last_audid
      FROM
        a_prmr
      WHERE
        perf_id            = :old.perf_id
      AND perf_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.perf_las_act_tim = :new.perf_las_act_tim THEN
      UPDATE
        a_prmr
      SET
        perf_prmrrole          = :new.perf_prmrrole,
        perf_can_be_rand       = :new.perf_can_be_rand,
        perf_sbtnrole          = :new.perf_sbtnrole,
        perf_stt               = :new.perf_stt,
        perf_sttdby            = :new.perf_sttdby,
        perf_usr               = :new.perf_usr,
        classtype              = :new.classtype,
        perf_c4c_id            = :new.perf_c4c_id,
        perf_crtd              = :new.perf_crtd,
        perf_las_act           = :new.perf_las_act,
        perf_las_act_actrtyp   = :new.perf_las_act_actrtyp,
        perf_obj_stt           = :new.perf_obj_stt,
        perf_vers              = :new.perf_vers,
        perf_vsbt              = :new.perf_vsbt,
        perf_dltddt            = :new.perf_dltddt,
        perf_las_act_by        = :new.perf_las_act_by,
        perf_origcrtr          = :new.perf_origcrtr,
        perf_origcrtrlogdin    = :new.perf_origcrtrlogdin,
        perf_las_act_by_logdin = :new.perf_las_act_by_logdin,
        perf_univid            = :new.perf_univid
      WHERE
        perf_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_prmr
        (
          perf_prmrrole,
          perf_can_be_rand,
          perf_sbtnrole,
          perf_stt,
          perf_sttdby,
          perf_usr,

          classtype,
          perf_c4c_id,
          perf_crtd,
          perf_las_act,
          perf_las_act_actrtyp,
          perf_obj_stt,
          perf_vers,
          perf_vsbt,
          perf_dltddt,
          perf_las_act_by,
          perf_origcrtr,
          perf_origcrtrlogdin,
          perf_las_act_by_logdin,
          perf_univid,
          perf_id,
          valid_from,
          valid_to,
          perf_audid,
          perf_prev_audid,
          perf_next_audid
        )
        VALUES
        (
          :new.perf_prmrrole,
          :new.perf_can_be_rand,
          :new.perf_sbtnrole,
          :new.perf_stt,
          :new.perf_sttdby,
          :new.perf_usr,
          :new.classtype,
          :new.perf_c4c_id,
          :new.perf_crtd,
          :new.perf_las_act,
          :new.perf_las_act_actrtyp,
          :new.perf_obj_stt,
          :new.perf_vers,
          :new.perf_vsbt,
          :new.perf_dltddt,
          :new.perf_las_act_by,
          :new.perf_origcrtr,
          :new.perf_origcrtrlogdin,
          :new.perf_las_act_by_logdin,
          :new.perf_univid,
          :new.perf_id,
          :new.perf_las_act_tim,
          NULL,
          u_prmr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_prmr
      SET
        valid_to        = :new.perf_las_act_tim,
        perf_next_audid = u_prmr.CURRVAL
      WHERE
        perf_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
159
</td>
<td>
THH_C4C
</td>
<td>
TRG_PCCP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRODCAT_CNTDPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PCCP_AUDITINSERT&quot; BEFORE INSERT ON T_PRODCAT_CNTDPVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pccp_crtd IS NULL THEN 
    :new.pccp_crtd := curr_date; 
  END IF; 

  IF :new.pccp_las_act_tim IS NULL THEN 
    :new.pccp_las_act_tim := curr_date; 
  END IF; 

  IF :new.pccp_las_act IS NULL THEN 
    :new.pccp_las_act := 1; 
  END IF; 

  IF :new.pccp_obj_stt IS NULL THEN 
    :new.pccp_obj_stt := 1; 
  END IF; 

  IF :new.pccp_vers IS NULL THEN 
    :new.pccp_vers := 0; 
  END IF; 

  IF :new.pccp_vsbt IS NULL THEN 
    :new.pccp_vsbt := 1001; 
  END IF; 

  IF :new.pccp_las_act_by IS NULL THEN 
    :new.pccp_las_act_by := 1; 
  END IF; 

  IF :new.pccp_origcrtr IS NULL THEN 
    :new.pccp_origcrtr := 1; 
  END IF; 

  IF :new.pccp_origcrtrlogdin IS NULL THEN 
    :new.pccp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pccp_las_act_by_logdin IS NULL THEN 
    :new.pccp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_prodcat_cntdpvdr 
  ( 
   classtype, 
   pccp_c4c_id, 
   pccp_crtd, 
   pccp_las_act, 
   pccp_las_act_actrtyp, 
   pccp_obj_stt, 
   pccp_vers, 
   pccp_vsbt, 
   pccp_dltddt, 
   pccp_las_act_by, 
   pccp_origcrtr, 
   pccp_origcrtrlogdin, 
   pccp_las_act_by_logdin, 
   pccp_univid, 
   pccp_in_cnrtprodcats, 
   pccp_in_cnrtpvrs, 
   pccp_id, 
   valid_from, 
   valid_to , 
   pccp_audid, 
   pccp_prev_audid, 
   pccp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.pccp_c4c_id,
   :new.pccp_crtd,
   :new.pccp_las_act,
   :new.pccp_las_act_actrtyp,
   :new.pccp_obj_stt,
   :new.pccp_vers,
   :new.pccp_vsbt,
   :new.pccp_dltddt,
   :new.pccp_las_act_by,
   :new.pccp_origcrtr,
   :new.pccp_origcrtrlogdin,
   :new.pccp_las_act_by_logdin,
   :new.pccp_univid,
   :new.pccp_in_cnrtprodcats,
   :new.pccp_in_cnrtpvrs, 
   :new.pccp_id, 
   :new.pccp_las_act_tim, 
   NULL, 
   u_prodcat_cntdpvdr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
160
</td>
<td>
THH_C4C
</td>
<td>
TRG_PCCP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRODCAT_CNTDPVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pccp_auditupdate BEFORE
  UPDATE
    ON T_PRODCAT_CNTDPVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pccp_audid
      INTO
        last_audid
      FROM
        a_prodcat_cntdpvdr
      WHERE
        pccp_id            = :old.pccp_id
      AND pccp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pccp_las_act_tim = :new.pccp_las_act_tim THEN
      UPDATE
        a_prodcat_cntdpvdr
      SET
        classtype              = :new.classtype,
        pccp_c4c_id            = :new.pccp_c4c_id,
        pccp_crtd              = :new.pccp_crtd,
        pccp_las_act           = :new.pccp_las_act,
        pccp_las_act_actrtyp   = :new.pccp_las_act_actrtyp,
        pccp_obj_stt           = :new.pccp_obj_stt,
        pccp_vers              = :new.pccp_vers,
        pccp_vsbt              = :new.pccp_vsbt,
        pccp_dltddt            = :new.pccp_dltddt,
        pccp_las_act_by        = :new.pccp_las_act_by,
        pccp_origcrtr          = :new.pccp_origcrtr,
        pccp_origcrtrlogdin    = :new.pccp_origcrtrlogdin,
        pccp_las_act_by_logdin = :new.pccp_las_act_by_logdin,
        pccp_univid            = :new.pccp_univid,
        pccp_in_cnrtprodcats   = :new.pccp_in_cnrtprodcats,
        pccp_in_cnrtpvrs       = :new.pccp_in_cnrtpvrs
      WHERE
        pccp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      IF pkg_audit_util.compare_values(:old.CLASSTYPE,:new.CLASSTYPE) OR pkg_audit_util.compare_values(:old.PCCP_C4C_ID,:new.PCCP_C4C_ID) OR
        pkg_audit_util.compare_values(:old.PCCP_CRTD,:new.PCCP_CRTD) OR pkg_audit_util.compare_values(:old.PCCP_LAS_ACT,:new.PCCP_LAS_ACT) OR
        pkg_audit_util.compare_values(:old.PCCP_LAS_ACT_ACTRTYP,:new.PCCP_LAS_ACT_ACTRTYP) OR
        --       pkg_audit_util.compare_va
lues(:old.PCCP_LAS_ACT_TIM,:new.PCCP_LAS_ACT_TIM) OR
        pkg_audit_util.compare_values(:old.PCCP_OBJ_STT,:new.PCCP_OBJ_STT) OR
        --       pkg_audit_util.compare_values(:old.PCCP_VERS,:new.PCCP_VERS) OR
        pkg_audit_util.compare_values(:old.PCCP_VSBT,:new.PCCP_VSBT) OR pkg_audit_util.compare_values(:old.PCCP_DLTDDT,:new.PCCP_DLTDDT) OR
        pkg_audit_util.compare_values(:old.PCCP_LAS_ACT_BY,:new.PCCP_LAS_ACT_BY) OR pkg_audit_util.compare_values(:old.PCCP_ORIGCRTR,:new.PCCP_ORIGCRTR) OR
        pkg_audit_util.compare_values(:old.PCCP_ORIGCRTRLOGDIN,:new.PCCP_ORIGCRTRLOGDIN) OR pkg_audit_util.compare_values(:old.PCCP_LAS_ACT_BY_LOGDIN,
        :new.PCCP_LAS_ACT_BY_LOGDIN) OR pkg_audit_util.compare_values(:old.PCCP_UNIVID,:new.PCCP_UNIVID) OR pkg_audit_util.compare_values(:old.PCCP_ID,
        :new.PCCP_ID) OR pkg_audit_util.compare_values(:old.PCCP_IN_CNRTPRODCATS,:new.PCCP_IN_CNRTPRODCATS) OR pkg_audit_util.compare_values(
        :old.PCCP_IN_CNRTPVRS,:new.PCCP_IN_CNRTPVRS) THEN
        /* insert new values introduced by new transaction */
        INSERT
        INTO
          a_prodcat_cntdpvdr
          (
            classtype,
            pccp_c4c_id,
            pccp_crtd,
            pccp_las_act,
            pccp_las_act_actrtyp,
            pccp_obj_stt,
            pccp_vers,
            pccp_vsbt,
            pccp_dltddt,
            pccp_las_act_by,
            pccp_origcrtr,
            pccp_origcrtrlogdin,
            pccp_las_act_by_logdin,
            pccp_univid,
            pccp_in_cnrtprodcats,
            pccp_in_cnrtpvrs,
            pccp_id,
            valid_from,
            valid_to,
            pccp_audid,
            pccp_prev_audid,
            pccp_next_audid
          )
          VALUES
          (
            :new.classtype,
            :new.pccp_c4c_id,
            :new.pccp_crtd,
            :new.pccp_las_act,
            :new.pccp_las_act_actrtyp,
            :new.pccp_obj_stt,
            :new.pccp_vers,

:new.pccp_vsbt,
            :new.pccp_dltddt,
            :new.pccp_las_act_by,
            :new.pccp_origcrtr,
            :new.pccp_origcrtrlogdin,
            :new.pccp_las_act_by_logdin,
            :new.pccp_univid,
            :new.pccp_in_cnrtprodcats,
            :new.pccp_in_cnrtpvrs,
            :new.pccp_id,
            :new.pccp_las_act_tim,
            NULL,
            u_prodcat_cntdpvdr.NEXTVAL,
            last_audid,
            NULL
          );
        /* update last audit record's valid_to to new LastActionTime
        and next audit ID to newly inserted record's sequence number
        */
        UPDATE
          a_prodcat_cntdpvdr
        SET
          valid_to        = :new.pccp_las_act_tim,
          pccp_next_audid = u_prodcat_cntdpvdr.CURRVAL
        WHERE
          pccp_audid = last_audid;
      END IF;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
161
</td>
<td>
THH_C4C
</td>
<td>
TRG_PCPR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRODCAT_PVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pcpr_auditinsert BEFORE INSERT ON T_PRODCAT_PVDR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.pcpr_crtd IS NULL THEN
    :new.pcpr_crtd := curr_date;
  END IF;

  IF :new.pcpr_las_act_tim IS NULL THEN
    :new.pcpr_las_act_tim := curr_date;
  END IF;

  IF :new.pcpr_las_act IS NULL THEN
    :new.pcpr_las_act := 1;
  END IF;

  IF :new.pcpr_obj_stt IS NULL THEN
    :new.pcpr_obj_stt := 1;
  END IF;

  IF :new.pcpr_vers IS NULL THEN
    :new.pcpr_vers := 0;
  END IF;

  IF :new.pcpr_vsbt IS NULL THEN
    :new.pcpr_vsbt := 1001;
  END IF;

  IF :new.pcpr_las_act_by IS NULL THEN
    :new.pcpr_las_act_by := 1;
  END IF;

  IF :new.pcpr_origcrtr IS NULL THEN
    :new.pcpr_origcrtr := 1;
  END IF;

  IF :new.pcpr_origcrtrlogdin IS NULL THEN
    :new.pcpr_origcrtrlogdin := 1;
  END IF;

  IF :new.pcpr_las_act_by_logdin IS NULL THEN
    :new.pcpr_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_prodcat_pvdr
  (
   pcpr_obj_stt,
   pcpr_vers,
   pcpr_vsbt,
   pcpr_dltddt,
   pcpr_las_act_by,
   pcpr_origcrtr,
   pcpr_origcrtrlogdin,
   pcpr_las_act_by_logdin,
   pcpr_univid,
   pcpr_in_ntwkprodcats,
   pcpr_in_ntwkpvrs,
   practitioner_role_id,
   applies_to_all_practitioners,
   benefit_network_name,
   classtype,
   pcpr_c4c_id,
   pcpr_crtd,
   pcpr_las_act,
   pcpr_las_act_actrtyp,
   pcpr_id,
   valid_from,
   valid_to ,
   pcpr_audid,
   pcpr_prev_audid,
   pcpr_next_audid
  )
  VALUES
  (
   :new.pcpr_obj_stt,
   :new.pcpr_vers,
   :new.pcpr_vsbt,
   :new.pcpr_dltddt,
   :new.pcpr_las_act_by,
   :new.pcpr_origcrtr,
   :new.pcpr_origcrtrlogdin,
   :new.pcpr_las_act_by_logdin,
   :new.pcpr_univid,
   :new.pcpr_in_ntwkprodcats,
   :new.pcpr_in_ntwkpvrs,
   :new.practitioner_role_id,
   :new.applies_to_all_practitioners,
   :new.benefit_network_name,
   :new.classtype,
   :new.pcpr_c4c_id,
   :new.pcpr_crtd,
   :new.pcpr_las_act,
   :new.pcpr_las_act_actrtyp,
   :new.pcpr_id,
   :new.pcpr_las_act_tim,
   NULL,
   u_prodcat_pvdr.NEXTVAL,
   NULL,
   NULL
  );
END;

</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
162
</td>
<td>
THH_C4C
</td>
<td>
TRG_PCPR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRODCAT_PVDR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pcpr_auditupdate BEFORE
  UPDATE
    ON T_PRODCAT_PVDR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pcpr_audid
      INTO
        last_audid
      FROM
        a_prodcat_pvdr
      WHERE
        pcpr_id            = :old.pcpr_id
      AND pcpr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pcpr_las_act_tim = :new.pcpr_las_act_tim THEN
      UPDATE
        a_prodcat_pvdr
      SET
        classtype                      = :new.classtype,
        pcpr_c4c_id                    = :new.pcpr_c4c_id,
        pcpr_crtd                      = :new.pcpr_crtd,
        pcpr_las_act                   = :new.pcpr_las_act,
        pcpr_las_act_actrtyp           = :new.pcpr_las_act_actrtyp,
        pcpr_obj_stt                   = :new.pcpr_obj_stt,
        pcpr_vers                      = :new.pcpr_vers,
        pcpr_vsbt                      = :new.pcpr_vsbt,
        pcpr_dltddt                    = :new.pcpr_dltddt,
        pcpr_las_act_by                = :new.pcpr_las_act_by,
        pcpr_origcrtr                  = :new.pcpr_origcrtr,
        pcpr_origcrtrlogdin            = :new.pcpr_origcrtrlogdin,
        pcpr_las_act_by_logdin         = :new.pcpr_las_act_by_logdin,
        pcpr_univid                    = :new.pcpr_univid,
        pcpr_in_ntwkprodcats           = :new.pcpr_in_ntwkprodcats,
        pcpr_in_ntwkpvrs               = :new.pcpr_in_ntwkpvrs,
		practitioner_role_id           = :new.practitioner_role_id,
		applies_to_all_practitioners   = :new.applies_to_all_practitioners,
		benefit_network_name           = :new.benefit_network_name
      WHERE
        pcpr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      IF
	    pkg_audit_util.compare_values(:old.CLASSTYPE,:new.CLASSTYPE)
		OR pkg_audit_util.compare_va
lues(:old.PCPR_C4C_ID,:new.PCPR_C4C_ID)
		OR pkg_audit_util.compare_values(:old.PCPR_CRTD,:new.PCPR_CRTD)
		OR pkg_audit_util.compare_values(:old.PCPR_LAS_ACT,:new.PCPR_LAS_ACT)
		OR pkg_audit_util.compare_values(:old.PCPR_LAS_ACT_ACTRTYP,:new.PCPR_LAS_ACT_ACTRTYP)
		-- OR pkg_audit_util.compare_values(:old.PCPR_LAS_ACT_TIM,:new.PCPR_LAS_ACT_TIM)
		OR pkg_audit_util.compare_values(:old.PCPR_OBJ_STT,:new.PCPR_OBJ_STT)
		-- OR pkg_audit_util.compare_values(:old.PCPR_VERS,:new.PCPR_VERS)
		OR pkg_audit_util.compare_values(:old.PCPR_VSBT,:new.PCPR_VSBT)
		OR pkg_audit_util.compare_values(:old.PCPR_DLTDDT,:new.PCPR_DLTDDT)
		OR pkg_audit_util.compare_values(:old.PCPR_LAS_ACT_BY,:new.PCPR_LAS_ACT_BY)
		OR pkg_audit_util.compare_values(:old.PCPR_ORIGCRTR,:new.PCPR_ORIGCRTR)
		OR pkg_audit_util.compare_values(:old.PCPR_ORIGCRTRLOGDIN,:new.PCPR_ORIGCRTRLOGDIN)
		OR pkg_audit_util.compare_values(:old.PCPR_LAS_ACT_BY_LOGDIN,:new.PCPR_LAS_ACT_BY_LOGDIN)
		OR pkg_audit_util.compare_values(:old.PCPR_UNIVID,:new.PCPR_UNIVID)
		OR pkg_audit_util.compare_values(:old.PCPR_ID,:new.PCPR_ID)
		OR pkg_audit_util.compare_values(:old.PCPR_IN_NTWKPRODCATS,:new.PCPR_IN_NTWKPRODCATS)
		OR pkg_audit_util.compare_values(:old.PCPR_IN_NTWKPVRS,:new.PCPR_IN_NTWKPVRS)
		OR pkg_audit_util.compare_values(:old.practitioner_role_id,:new.practitioner_role_id)
		OR pkg_audit_util.compare_values(:old.applies_to_all_practitioners,:new.applies_to_all_practitioners)
		OR pkg_audit_util.compare_values(:old.benefit_network_name,:new.benefit_network_name) THEN
        /* insert new values introduced by new transaction */
        INSERT
        INTO
          a_prodcat_pvdr
          (
            classtype,
            pcpr_c4c_id,
            pcpr_crtd,
            pcpr_las_act,
            pcpr_las_act_actrtyp,
            pcpr_obj_stt,
            pcpr_vers,
            pcpr_vsbt,
            pcpr_dltddt,
            pcpr_las_act_by,
            pcpr_origcrtr,
            pcpr_origcrtrlogdin,
            pcp
r_las_act_by_logdin,
            pcpr_univid,
            pcpr_in_ntwkprodcats,
            pcpr_in_ntwkpvrs,
			practitioner_role_id,
			applies_to_all_practitioners,
			benefit_network_name,
            pcpr_id,
            valid_from,
            valid_to,
            pcpr_audid,
            pcpr_prev_audid,
            pcpr_next_audid
          )
          VALUES
          (
            :new.classtype,
            :new.pcpr_c4c_id,
            :new.pcpr_crtd,
            :new.pcpr_las_act,
            :new.pcpr_las_act_actrtyp,
            :new.pcpr_obj_stt,
            :new.pcpr_vers,
            :new.pcpr_vsbt,
            :new.pcpr_dltddt,
            :new.pcpr_las_act_by,
            :new.pcpr_origcrtr,
            :new.pcpr_origcrtrlogdin,
            :new.pcpr_las_act_by_logdin,
            :new.pcpr_univid,
            :new.pcpr_in_ntwkprodcats,
            :new.pcpr_in_ntwkpvrs,
			:new.practitioner_role_id,
			:new.applies_to_all_practitioners,
			:new.benefit_network_name,
            :new.pcpr_id,
            :new.pcpr_las_act_tim,
            NULL,
            u_prodcat_pvdr.NEXTVAL,
            last_audid,
            NULL
          );
        /* update last audit record's valid_to to new LastActionTime
        and next audit ID to newly inserted record's sequence number
        */
        UPDATE
          a_prodcat_pvdr
        SET
          valid_to        = :new.pcpr_las_act_tim,
          pcpr_next_audid = u_prodcat_pvdr.CURRVAL
        WHERE
          pcpr_audid = last_audid;
      END IF;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
163
</td>
<td>
THH_C4C
</td>
<td>
TRG_PROVIDER_CHOICE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PROVIDER_CHOICE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_provider_choice before insert or update on t_provider_choice for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date date;
  /* last audit ID of record */
  last_audid number;
begin
  curr_date := current_date;
  if inserting then
    if :new.prce_crtd is null then
      :new.prce_crtd := curr_date;
    end if;
    if :new.prce_las_act_tim is null then
      :new.prce_las_act_tim := curr_date;
    end if;
    if :new.prce_obj_stt is null then
      :new.prce_obj_stt := 1;
    end if;
    if :new.prce_vers is null then
      :new.prce_vers := 0;
    end if;
    if :new.prce_origcrtr is null then
      :new.prce_origcrtr := 1;
    end if;
    insert into a_provider_choice
      (
      classtype,
      prce_c4c_id,
      prce_crtd,
      prce_las_act_tim,
      prce_obj_stt,
      prce_vers,
      prce_dltddt,
      prce_origcrtr,
      prce_univid,
      prce_auto_assigned,
      prce_from_date,
      prce_to_date,
      prce_id,
      prce_memb,
      prce_pvdr,
      prce_network,
      valid_from,
      valid_to,
      prce_audid,
      prce_prev_audid,
      prce_next_audid
      )
    values
      (
      :new.classtype,
      :new.prce_c4c_id,
      :new.prce_crtd,
      :new.prce_las_act_tim,
      :new.prce_obj_stt,
      :new.prce_vers,
      :new.prce_dltddt,
      :new.prce_origcrtr,
      :new.prce_univid,
      :new.prce_auto_assigned,
      :new.prce_from_date,
      :new.prce_to_date,
      :new.prce_id,
      :new.prce_memb,
      :new.prce_pvdr,
      :new.prce_network,
      :new.prce_las_act_tim,  --audit boilerplate starts here
      null,
      u_provider_choice.nextval,
      null,
      null
      );
  else
    begin
      select prce_audid into last_audid
      from a_provider_choice
      where prce_id = :old.prce_id
      and
      prce_next_audid is null
      for update;
      exception when no_data_found then last_audid := null;
    end;
    /* LastActionTime has not changed - no new transaction */
    if :old.prce_las_act_tim = :new.prce_las_act_tim then
      update a_provider_choice
        set

prce_id          = :new.prce_id,
          classtype        = :new.classtype,
          prce_c4c_id      = :new.prce_c4c_id,
          prce_crtd        = :new.prce_crtd,
          prce_las_act_tim = :new.prce_las_act_tim,
          prce_obj_stt     = :new.prce_obj_stt,
          prce_vers        = :new.prce_vers,
          prce_dltddt      = :new.prce_dltddt,
          prce_origcrtr    = :new.prce_origcrtr,
          prce_univid      = :new.prce_univid,
          prce_auto_assigned = :new.prce_auto_assigned,
          prce_from_date    = :new.prce_from_date,
          prce_to_date      = :new.prce_to_date,

          prce_memb         = :new.prce_memb,
          prce_pvdr         = :new.prce_pvdr,
          prce_network      = :new.prce_network
        where prce_audid = last_audid;
    /* LastActionTime has changed - new transaction in place */
    else
      /* insert new values introduced by new transaction */
      insert into a_provider_choice
        (
        classtype,
        prce_c4c_id,
        prce_crtd,
        prce_las_act_tim,
        prce_obj_stt,
        prce_vers,
        prce_dltddt,
        prce_origcrtr,
        prce_univid,
        prce_auto_assigned,
        prce_from_date,
        prce_to_date,
        prce_id,
        prce_memb,
        prce_pvdr,
        prce_network,
        valid_from,
        valid_to,
        prce_audid,
        prce_prev_audid,
        prce_next_audid
      )
      values
        (
        :new.classtype,
        :new.prce_c4c_id,
        :new.prce_crtd,
        :new.prce_las_act_tim,
        :new.prce_obj_stt,
        :new.prce_vers,
        :new.prce_dltddt,
        :new.prce_origcrtr,
        :new.prce_univid,
        :new.prce_auto_assigned,
        :new.prce_from_date,
        :new.prce_to_date,
        :new.prce_id,
        :new.prce_memb,
        :new.prce_pvdr,
        :new.prce_network,
        :new.prce_las_act_tim,
        null,
        u_provider_choice.nextval,
        last_audid,
        null
        );

     /* update last audit record's valid_to to new LastActionTime
         and next audit ID to newly inserted record's sequence number
       */
      update a_provider_choice
        set
          valid_to = :new.prce_las_act_tim,
          prce_next_audid = u_provider_choice.currval
        where prce_audid = last_audid;
    end if;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
164
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRLT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRPDLTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PRLT_AUDITINSERT&quot; BEFORE INSERT ON T_PRPDLTR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.prlt_crtd IS NULL THEN 
    :new.prlt_crtd := curr_date; 
  END IF; 

  IF :new.prlt_las_act_tim IS NULL THEN 
    :new.prlt_las_act_tim := curr_date; 
  END IF; 

  IF :new.prlt_las_act IS NULL THEN 
    :new.prlt_las_act := 1; 
  END IF; 

  IF :new.prlt_obj_stt IS NULL THEN 
    :new.prlt_obj_stt := 1; 
  END IF; 

  IF :new.prlt_vers IS NULL THEN 
    :new.prlt_vers := 0; 
  END IF; 

  IF :new.prlt_vsbt IS NULL THEN 
    :new.prlt_vsbt := 1001; 
  END IF; 

  IF :new.prlt_las_act_by IS NULL THEN 
    :new.prlt_las_act_by := 1; 
  END IF; 

  IF :new.prlt_origcrtr IS NULL THEN 
    :new.prlt_origcrtr := 1; 
  END IF; 

  IF :new.prlt_origcrtrlogdin IS NULL THEN 
    :new.prlt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.prlt_las_act_by_logdin IS NULL THEN 
    :new.prlt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_prpdltr 
  ( 
   classtype, 
   prlt_c4c_id, 
   prlt_crtd, 
   prlt_las_act, 
   prlt_las_act_actrtyp, 
   prlt_obj_stt, 
   prlt_vers, 
   prlt_vsbt, 
   prlt_dltddt, 
   prlt_las_act_by, 
   prlt_origcrtr, 
   prlt_origcrtrlogdin, 
   prlt_las_act_by_logdin, 
   prlt_univid, 
   prlt_ltr_subj, 
   prlt_astntyp, 
   prlt_chcencry, 
   prlt_freetxt, 
   prlt_menutxt, 
   prlt_one_off, 
   prlt_cntt_contltrh, 
   prlt_cntt_contimg, 
   prlt_cntt_hght, 
   prlt_cntt_wdth, 
   prlt_cntt_top_mrgn, 
   prlt_cntt_bttmmrgn, 
   prlt_cntt_leftmrgn, 
   prlt_cntt_rghtmrgn, 
   prlt_cntt_nam, 
   prlt_cntt_dat1, 
   prlt_cntt_dat2, 
   prlt_cntt_pagesiz, 
   prlt_las_rtedto_gkprat, 
   prlt_las_gkpract_at, 
   prlt_gkprotcm, 
   prlt_frstsbtdat, 
   prlt_las_sbtdat, 
   prlt_wkfwistcid, 
   prlt_cnv_id, 
   prlt_ownrchndflag, 
   prlt_ownrchndcnt, 
   prlt_sndgedd, 
   prlt_cntt_cntt, 
   prlt_las_gkpr, 
   prlt_las_sbtdby, 
   prlt_frstsbtdby, 
   prlt_rfngwkfwtsk, 
   prlt_prvsrfngtsk, 
   prlt_prvsrfngtsk_prmn, 
   prlt_ownr, 
   prlt_prvsownr, 
   prlt_
prvssndr, 
   prlt_prvsownrprmn, 
   prlt_tnfr, 
   prlt_prvstnfr, 
   prlt_asmt, 
   prlt_typ_sbty, 
   prlt_ltr_tmpt, 
   prlt_fax_covr, 
   prlt_enlp, 
   prlt_lbl, 
   prlt_cfrdltr, 
   prlt_que, 
   prlt_grp, 
   prlt_id, 
   valid_from, 
   valid_to , 
   prlt_audid, 
   prlt_prev_audid, 
   prlt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.prlt_c4c_id,
   :new.prlt_crtd,
   :new.prlt_las_act,
   :new.prlt_las_act_actrtyp,
   :new.prlt_obj_stt,
   :new.prlt_vers,
   :new.prlt_vsbt,
   :new.prlt_dltddt,
   :new.prlt_las_act_by,
   :new.prlt_origcrtr,
   :new.prlt_origcrtrlogdin,
   :new.prlt_las_act_by_logdin,
   :new.prlt_univid,
   :new.prlt_ltr_subj,
   :new.prlt_astntyp,
   :new.prlt_chcencry,
   :new.prlt_freetxt,
   :new.prlt_menutxt,
   :new.prlt_one_off,
   :new.prlt_cntt_contltrh,
   :new.prlt_cntt_contimg,
   :new.prlt_cntt_hght,
   :new.prlt_cntt_wdth,
   :new.prlt_cntt_top_mrgn,
   :new.prlt_cntt_bttmmrgn,
   :new.prlt_cntt_leftmrgn,
   :new.prlt_cntt_rghtmrgn,
   :new.prlt_cntt_nam,
   :new.prlt_cntt_dat1,
   :new.prlt_cntt_dat2,
   :new.prlt_cntt_pagesiz,
   :new.prlt_las_rtedto_gkprat,
   :new.prlt_las_gkpract_at,
   :new.prlt_gkprotcm,
   :new.prlt_frstsbtdat,
   :new.prlt_las_sbtdat,
   :new.prlt_wkfwistcid,
   :new.prlt_cnv_id,
   :new.prlt_ownrchndflag,
   :new.prlt_ownrchndcnt,
   :new.prlt_sndgedd,
   :new.prlt_cntt_cntt,
   :new.prlt_las_gkpr,
   :new.prlt_las_sbtdby,
   :new.prlt_frstsbtdby,
   :new.prlt_rfngwkfwtsk,
   :new.prlt_prvsrfngtsk,
   :new.prlt_prvsrfngtsk_prmn,
   :new.prlt_ownr,
   :new.prlt_prvsownr,
   :new.prlt_prvssndr,
   :new.prlt_prvsownrprmn,
   :new.prlt_tnfr,
   :new.prlt_prvstnfr,
   :new.prlt_asmt,
   :new.prlt_typ_sbty,
   :new.prlt_ltr_tmpt,
   :new.prlt_fax_covr,
   :new.prlt_enlp,
   :new.prlt_lbl,
   :new.prlt_cfrdltr,
   :new.prlt_que,
   :new.prlt_grp, 
   :new.prlt_id, 
   :new.prlt_las_act_tim, 
   NULL, 
   u_prpdltr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
165
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRLT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRPDLTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prlt_auditupdate BEFORE
  UPDATE
    ON T_PRPDLTR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        prlt_audid
      INTO
        last_audid
      FROM
        a_prpdltr
      WHERE
        prlt_id            = :old.prlt_id
      AND prlt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.prlt_las_act_tim = :new.prlt_las_act_tim THEN
      UPDATE
        a_prpdltr
      SET
        prlt_ltr_subj          = :new.prlt_ltr_subj,
        prlt_astntyp           = :new.prlt_astntyp,
        prlt_chcencry          = :new.prlt_chcencry,
        prlt_freetxt           = :new.prlt_freetxt,
        prlt_menutxt           = :new.prlt_menutxt,
        prlt_one_off           = :new.prlt_one_off,
        prlt_cntt_contltrh     = :new.prlt_cntt_contltrh,
        prlt_cntt_contimg      = :new.prlt_cntt_contimg,
        prlt_cntt_hght         = :new.prlt_cntt_hght,
        prlt_cntt_wdth         = :new.prlt_cntt_wdth,
        prlt_cntt_top_mrgn     = :new.prlt_cntt_top_mrgn,
        prlt_cntt_bttmmrgn     = :new.prlt_cntt_bttmmrgn,
        prlt_cntt_leftmrgn     = :new.prlt_cntt_leftmrgn,
        prlt_cntt_rghtmrgn     = :new.prlt_cntt_rghtmrgn,
        prlt_cntt_nam          = :new.prlt_cntt_nam,
        prlt_cntt_dat1         = :new.prlt_cntt_dat1,
        prlt_cntt_dat2         = :new.prlt_cntt_dat2,
        prlt_cntt_pagesiz      = :new.prlt_cntt_pagesiz,
        prlt_las_rtedto_gkprat = :new.prlt_las_rtedto_gkprat,
        prlt_las_gkpract_at    = :new.prlt_las_gkpract_at,
        prlt_gkprotcm          = :new.prlt_gkprotcm,
        prlt_frstsbtdat        = :new.prlt_frstsbtdat,
        prlt_las_sbtdat        = :new.prlt_las_sbtdat,
        prlt_wkfwistcid        = :new.prlt_wkfwistcid,
        prlt_cnv_id            = :new.prlt_cnv_id,
        prlt_ownrchndflag      = :new
.prlt_ownrchndflag,
        prlt_ownrchndcnt       = :new.prlt_ownrchndcnt,
        prlt_sndgedd           = :new.prlt_sndgedd,
        prlt_cntt_cntt         = :new.prlt_cntt_cntt,
        prlt_las_gkpr          = :new.prlt_las_gkpr,
        prlt_las_sbtdby        = :new.prlt_las_sbtdby,
        prlt_frstsbtdby        = :new.prlt_frstsbtdby,
        prlt_rfngwkfwtsk       = :new.prlt_rfngwkfwtsk,
        prlt_prvsrfngtsk       = :new.prlt_prvsrfngtsk,
        prlt_prvsrfngtsk_prmn  = :new.prlt_prvsrfngtsk_prmn,
        prlt_ownr              = :new.prlt_ownr,
        prlt_prvsownr          = :new.prlt_prvsownr,
        prlt_prvssndr          = :new.prlt_prvssndr,
        prlt_prvsownrprmn      = :new.prlt_prvsownrprmn,
        prlt_tnfr              = :new.prlt_tnfr,
        prlt_prvstnfr          = :new.prlt_prvstnfr,
        prlt_asmt              = :new.prlt_asmt,
        prlt_typ_sbty          = :new.prlt_typ_sbty,
        prlt_ltr_tmpt          = :new.prlt_ltr_tmpt,
        prlt_fax_covr          = :new.prlt_fax_covr,
        prlt_enlp              = :new.prlt_enlp,
        prlt_lbl               = :new.prlt_lbl,
        prlt_cfrdltr           = :new.prlt_cfrdltr,
        prlt_que               = :new.prlt_que,
        prlt_grp               = :new.prlt_grp,
        classtype              = :new.classtype,
        prlt_c4c_id            = :new.prlt_c4c_id,
        prlt_crtd              = :new.prlt_crtd,
        prlt_las_act           = :new.prlt_las_act,
        prlt_las_act_actrtyp   = :new.prlt_las_act_actrtyp,
        prlt_obj_stt           = :new.prlt_obj_stt,
        prlt_vers              = :new.prlt_vers,
        prlt_vsbt              = :new.prlt_vsbt,
        prlt_dltddt            = :new.prlt_dltddt,
        prlt_las_act_by        = :new.prlt_las_act_by,
        prlt_origcrtr          = :new.prlt_origcrtr,
        prlt_origcrtrlogdin    = :new.prlt_origcrtrlogdin,
        prlt_las_act_by_logdin = :new.prlt_las_act_by_logdin,
        prlt_univid
       = :new.prlt_univid
      WHERE
        prlt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_prpdltr
        (
          prlt_ltr_subj,
          prlt_astntyp,
          prlt_chcencry,
          prlt_freetxt,
          prlt_menutxt,
          prlt_one_off,
          prlt_cntt_contltrh,
          prlt_cntt_contimg,
          prlt_cntt_hght,
          prlt_cntt_wdth,
          prlt_cntt_top_mrgn,
          prlt_cntt_bttmmrgn,
          prlt_cntt_leftmrgn,
          prlt_cntt_rghtmrgn,
          prlt_cntt_nam,
          prlt_cntt_dat1,
          prlt_cntt_dat2,
          prlt_cntt_pagesiz,
          prlt_las_rtedto_gkprat,
          prlt_las_gkpract_at,
          prlt_gkprotcm,
          prlt_frstsbtdat,
          prlt_las_sbtdat,
          prlt_wkfwistcid,
          prlt_cnv_id,
          prlt_ownrchndflag,
          prlt_ownrchndcnt,
          prlt_sndgedd,
          prlt_cntt_cntt,
          prlt_las_gkpr,
          prlt_las_sbtdby,
          prlt_frstsbtdby,
          prlt_rfngwkfwtsk,
          prlt_prvsrfngtsk,
          prlt_prvsrfngtsk_prmn,
          prlt_ownr,
          prlt_prvsownr,
          prlt_prvssndr,
          prlt_prvsownrprmn,
          prlt_tnfr,
          prlt_prvstnfr,
          prlt_asmt,
          prlt_typ_sbty,
          prlt_ltr_tmpt,
          prlt_fax_covr,
          prlt_enlp,
          prlt_lbl,
          prlt_cfrdltr,
          prlt_que,
          prlt_grp,
          classtype,
          prlt_c4c_id,
          prlt_crtd,
          prlt_las_act,
          prlt_las_act_actrtyp,
          prlt_obj_stt,
          prlt_vers,
          prlt_vsbt,
          prlt_dltddt,
          prlt_las_act_by,
          prlt_origcrtr,
          prlt_origcrtrlogdin,
          prlt_las_act_by_logdin,
          prlt_univid,
          prlt_id,
          valid_from,
          valid_to,
          prlt_audid,

prlt_prev_audid,
          prlt_next_audid
        )
        VALUES
        (
          :new.prlt_ltr_subj,
          :new.prlt_astntyp,
          :new.prlt_chcencry,
          :new.prlt_freetxt,
          :new.prlt_menutxt,
          :new.prlt_one_off,
          :new.prlt_cntt_contltrh,
          :new.prlt_cntt_contimg,
          :new.prlt_cntt_hght,
          :new.prlt_cntt_wdth,
          :new.prlt_cntt_top_mrgn,
          :new.prlt_cntt_bttmmrgn,
          :new.prlt_cntt_leftmrgn,
          :new.prlt_cntt_rghtmrgn,
          :new.prlt_cntt_nam,
          :new.prlt_cntt_dat1,
          :new.prlt_cntt_dat2,
          :new.prlt_cntt_pagesiz,
          :new.prlt_las_rtedto_gkprat,
          :new.prlt_las_gkpract_at,
          :new.prlt_gkprotcm,
          :new.prlt_frstsbtdat,
          :new.prlt_las_sbtdat,
          :new.prlt_wkfwistcid,
          :new.prlt_cnv_id,
          :new.prlt_ownrchndflag,
          :new.prlt_ownrchndcnt,
          :new.prlt_sndgedd,
          :new.prlt_cntt_cntt,
          :new.prlt_las_gkpr,
          :new.prlt_las_sbtdby,
          :new.prlt_frstsbtdby,
          :new.prlt_rfngwkfwtsk,
          :new.prlt_prvsrfngtsk,
          :new.prlt_prvsrfngtsk_prmn,
          :new.prlt_ownr,
          :new.prlt_prvsownr,
          :new.prlt_prvssndr,
          :new.prlt_prvsownrprmn,
          :new.prlt_tnfr,
          :new.prlt_prvstnfr,
          :new.prlt_asmt,
          :new.prlt_typ_sbty,
          :new.prlt_ltr_tmpt,
          :new.prlt_fax_covr,
          :new.prlt_enlp,
          :new.prlt_lbl,
          :new.prlt_cfrdltr,
          :new.prlt_que,
          :new.prlt_grp,
          :new.classtype,
          :new.prlt_c4c_id,
          :new.prlt_crtd,
          :new.prlt_las_act,
          :new.prlt_las_act_actrtyp,
          :new.prlt_obj_stt,
          :new.prlt_vers,
          :new.prlt_vsbt,
          :new.prlt_dltddt,
          :new.prlt_las_act_by,
          :new.prlt_origcrtr,
          :new.prlt_origcrtrlogdin,
          :new.prlt_
las_act_by_logdin,
          :new.prlt_univid,
          :new.prlt_id,
          :new.prlt_las_act_tim,
          NULL,
          u_prpdltr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_prpdltr
      SET
        valid_to        = :new.prlt_las_act_tim,
        prlt_next_audid = u_prpdltr.CURRVAL
      WHERE
        prlt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
166
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRSC_INSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRSC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prsc_insert	before insert on t_prsc

for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
	curr_date date;

begin
	curr_date := current_date;

	if :new.prsc_crtd is null then
		:new.prsc_crtd := curr_date;
	end if;

	if :new.prsc_las_act_tim is null then
		:new.prsc_las_act_tim := curr_date;
	end if;

	if :new.prsc_las_act_by is null then
		:new.prsc_las_act_by := 1;
	end if;

	if :new.prsc_obj_stt is null then
		:new.prsc_obj_stt := 1;
	end if;

	if :new.prsc_vers is null then
		:new.prsc_vers := 0;
	end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
167
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRSC_UPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PRSC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prsc_update	before update on t_prsc

for each row
</td>
<td>
PL/SQL
</td>
<td>
declare
	curr_date date;

begin
	curr_date := current_date;

	if :new.prsc_las_act_tim is null then
		:new.prsc_las_act_tim := curr_date;
	end if;

	if :new.prsc_las_act_by is null then
		:new.prsc_las_act_by := 1;
	end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
168
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAGS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRADVEGRP_PVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PAGS_AUDITINSERT&quot; BEFORE INSERT ON T_PVDRADVEGRP_PVRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.pags_crtd IS NULL THEN 
    :new.pags_crtd := curr_date; 
  END IF; 

  IF :new.pags_las_act_tim IS NULL THEN 
    :new.pags_las_act_tim := curr_date; 
  END IF; 

  IF :new.pags_las_act IS NULL THEN 
    :new.pags_las_act := 1; 
  END IF; 

  IF :new.pags_obj_stt IS NULL THEN 
    :new.pags_obj_stt := 1; 
  END IF; 

  IF :new.pags_vers IS NULL THEN 
    :new.pags_vers := 0; 
  END IF; 

  IF :new.pags_vsbt IS NULL THEN 
    :new.pags_vsbt := 1001; 
  END IF; 

  IF :new.pags_las_act_by IS NULL THEN 
    :new.pags_las_act_by := 1; 
  END IF; 

  IF :new.pags_origcrtr IS NULL THEN 
    :new.pags_origcrtr := 1; 
  END IF; 

  IF :new.pags_origcrtrlogdin IS NULL THEN 
    :new.pags_origcrtrlogdin := 1; 
  END IF; 

  IF :new.pags_las_act_by_logdin IS NULL THEN 
    :new.pags_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvdradvegrp_pvrs 
  ( 
   classtype, 
   pags_c4c_id, 
   pags_crtd, 
   pags_las_act, 
   pags_las_act_actrtyp, 
   pags_obj_stt, 
   pags_vers, 
   pags_vsbt, 
   pags_dltddt, 
   pags_las_act_by, 
   pags_origcrtr, 
   pags_origcrtrlogdin, 
   pags_las_act_by_logdin, 
   pags_univid, 
   pags_pvdr, 
   pags_advegrp, 
   pags_id, 
   valid_from, 
   valid_to , 
   pags_audid, 
   pags_prev_audid, 
   pags_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.pags_c4c_id,
   :new.pags_crtd,
   :new.pags_las_act,
   :new.pags_las_act_actrtyp,
   :new.pags_obj_stt,
   :new.pags_vers,
   :new.pags_vsbt,
   :new.pags_dltddt,
   :new.pags_las_act_by,
   :new.pags_origcrtr,
   :new.pags_origcrtrlogdin,
   :new.pags_las_act_by_logdin,
   :new.pags_univid,
   :new.pags_pvdr,
   :new.pags_advegrp, 
   :new.pags_id, 
   :new.pags_las_act_tim, 
   NULL, 
   u_pvdradvegrp_pvrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
169
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAGS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRADVEGRP_PVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pags_auditupdate BEFORE
  UPDATE
    ON T_PVDRADVEGRP_PVRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pags_audid
      INTO
        last_audid
      FROM
        a_pvdradvegrp_pvrs
      WHERE
        pags_id            = :old.pags_id
      AND pags_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pags_las_act_tim = :new.pags_las_act_tim THEN
      UPDATE
        a_pvdradvegrp_pvrs
      SET
        classtype              = :new.classtype,
        pags_c4c_id            = :new.pags_c4c_id,
        pags_crtd              = :new.pags_crtd,
        pags_las_act           = :new.pags_las_act,
        pags_las_act_actrtyp   = :new.pags_las_act_actrtyp,
        pags_obj_stt           = :new.pags_obj_stt,
        pags_vers              = :new.pags_vers,
        pags_vsbt              = :new.pags_vsbt,
        pags_dltddt            = :new.pags_dltddt,
        pags_las_act_by        = :new.pags_las_act_by,
        pags_origcrtr          = :new.pags_origcrtr,
        pags_origcrtrlogdin    = :new.pags_origcrtrlogdin,
        pags_las_act_by_logdin = :new.pags_las_act_by_logdin,
        pags_univid            = :new.pags_univid,
        pags_pvdr              = :new.pags_pvdr,
        pags_advegrp           = :new.pags_advegrp
      WHERE
        pags_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdradvegrp_pvrs
        (
          classtype,
          pags_c4c_id,
          pags_crtd,
          pags_las_act,
          pags_las_act_actrtyp,
          pags_obj_stt,
          pags_vers,
          pags_vsbt,
          pags_dltddt,
          pags_las_act_by,
          pags_origcrtr,
          pags_origcrtrlogdin,
          pags_las_a
ct_by_logdin,
          pags_univid,
          pags_pvdr,
          pags_advegrp,
          pags_id,
          valid_from,
          valid_to,
          pags_audid,
          pags_prev_audid,
          pags_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.pags_c4c_id,
          :new.pags_crtd,
          :new.pags_las_act,
          :new.pags_las_act_actrtyp,
          :new.pags_obj_stt,
          :new.pags_vers,
          :new.pags_vsbt,
          :new.pags_dltddt,
          :new.pags_las_act_by,
          :new.pags_origcrtr,
          :new.pags_origcrtrlogdin,
          :new.pags_las_act_by_logdin,
          :new.pags_univid,
          :new.pags_pvdr,
          :new.pags_advegrp,
          :new.pags_id,
          :new.pags_las_act_tim,
          NULL,
          u_pvdradvegrp_pvrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdradvegrp_pvrs
      SET
        valid_to        = :new.pags_las_act_tim,
        pags_next_audid = u_pvdradvegrp_pvrs.CURRVAL
      WHERE
        pags_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
170
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAHO_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRAFFDHPTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PAHO_AUDITINSERT&quot; BEFORE INSERT ON T_PVDRAFFDHPTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.paho_crtd IS NULL THEN 
    :new.paho_crtd := curr_date; 
  END IF; 

  IF :new.paho_las_act_tim IS NULL THEN 
    :new.paho_las_act_tim := curr_date; 
  END IF; 

  IF :new.paho_las_act IS NULL THEN 
    :new.paho_las_act := 1; 
  END IF; 

  IF :new.paho_obj_stt IS NULL THEN 
    :new.paho_obj_stt := 1; 
  END IF; 

  IF :new.paho_vers IS NULL THEN 
    :new.paho_vers := 0; 
  END IF; 

  IF :new.paho_vsbt IS NULL THEN 
    :new.paho_vsbt := 1001; 
  END IF; 

  IF :new.paho_las_act_by IS NULL THEN 
    :new.paho_las_act_by := 1; 
  END IF; 

  IF :new.paho_origcrtr IS NULL THEN 
    :new.paho_origcrtr := 1; 
  END IF; 

  IF :new.paho_origcrtrlogdin IS NULL THEN 
    :new.paho_origcrtrlogdin := 1; 
  END IF; 

  IF :new.paho_las_act_by_logdin IS NULL THEN 
    :new.paho_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvdraffdhpts 
  ( 
   classtype, 
   paho_c4c_id, 
   paho_crtd, 
   paho_las_act, 
   paho_las_act_actrtyp, 
   paho_obj_stt, 
   paho_vers, 
   paho_vsbt, 
   paho_dltddt, 
   paho_las_act_by, 
   paho_origcrtr, 
   paho_origcrtrlogdin, 
   paho_las_act_by_logdin, 
   paho_univid, 
   paho_affdhptlpvdr, 
   paho_affdhptl, 
   paho_id, 
   valid_from, 
   valid_to , 
   paho_audid, 
   paho_prev_audid, 
   paho_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.paho_c4c_id,
   :new.paho_crtd,
   :new.paho_las_act,
   :new.paho_las_act_actrtyp,
   :new.paho_obj_stt,
   :new.paho_vers,
   :new.paho_vsbt,
   :new.paho_dltddt,
   :new.paho_las_act_by,
   :new.paho_origcrtr,
   :new.paho_origcrtrlogdin,
   :new.paho_las_act_by_logdin,
   :new.paho_univid,
   :new.paho_affdhptlpvdr,
   :new.paho_affdhptl, 
   :new.paho_id, 
   :new.paho_las_act_tim, 
   NULL, 
   u_pvdraffdhpts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
171
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAHO_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRAFFDHPTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_paho_auditupdate BEFORE
  UPDATE
    ON T_PVDRAFFDHPTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        paho_audid
      INTO
        last_audid
      FROM
        a_pvdraffdhpts
      WHERE
        paho_id            = :old.paho_id
      AND paho_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.paho_las_act_tim = :new.paho_las_act_tim THEN
      UPDATE
        a_pvdraffdhpts
      SET
        classtype              = :new.classtype,
        paho_c4c_id            = :new.paho_c4c_id,
        paho_crtd              = :new.paho_crtd,
        paho_las_act           = :new.paho_las_act,
        paho_las_act_actrtyp   = :new.paho_las_act_actrtyp,
        paho_obj_stt           = :new.paho_obj_stt,
        paho_vers              = :new.paho_vers,
        paho_vsbt              = :new.paho_vsbt,
        paho_dltddt            = :new.paho_dltddt,
        paho_las_act_by        = :new.paho_las_act_by,
        paho_origcrtr          = :new.paho_origcrtr,
        paho_origcrtrlogdin    = :new.paho_origcrtrlogdin,
        paho_las_act_by_logdin = :new.paho_las_act_by_logdin,
        paho_univid            = :new.paho_univid,
        paho_affdhptlpvdr      = :new.paho_affdhptlpvdr,
        paho_affdhptl          = :new.paho_affdhptl
      WHERE
        paho_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdraffdhpts
        (
          classtype,
          paho_c4c_id,
          paho_crtd,
          paho_las_act,
          paho_las_act_actrtyp,
          paho_obj_stt,
          paho_vers,
          paho_vsbt,
          paho_dltddt,
          paho_las_act_by,
          paho_origcrtr,
          paho_origcrtrlogdin,
          paho_las_act_
by_logdin,
          paho_univid,
          paho_affdhptlpvdr,
          paho_affdhptl,
          paho_id,
          valid_from,
          valid_to,
          paho_audid,
          paho_prev_audid,
          paho_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.paho_c4c_id,
          :new.paho_crtd,
          :new.paho_las_act,
          :new.paho_las_act_actrtyp,
          :new.paho_obj_stt,
          :new.paho_vers,
          :new.paho_vsbt,
          :new.paho_dltddt,
          :new.paho_las_act_by,
          :new.paho_origcrtr,
          :new.paho_origcrtrlogdin,
          :new.paho_las_act_by_logdin,
          :new.paho_univid,
          :new.paho_affdhptlpvdr,
          :new.paho_affdhptl,
          :new.paho_id,
          :new.paho_las_act_tim,
          NULL,
          u_pvdraffdhpts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdraffdhpts
      SET
        valid_to        = :new.paho_las_act_tim,
        paho_next_audid = u_pvdraffdhpts.CURRVAL
      WHERE
        paho_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
172
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAPY_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRAFFDPHYS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PAPY_AUDITINSERT&quot; BEFORE INSERT ON T_PVDRAFFDPHYS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.papy_crtd IS NULL THEN 
    :new.papy_crtd := curr_date; 
  END IF; 

  IF :new.papy_las_act_tim IS NULL THEN 
    :new.papy_las_act_tim := curr_date; 
  END IF; 

  IF :new.papy_las_act IS NULL THEN 
    :new.papy_las_act := 1; 
  END IF; 

  IF :new.papy_obj_stt IS NULL THEN 
    :new.papy_obj_stt := 1; 
  END IF; 

  IF :new.papy_vers IS NULL THEN 
    :new.papy_vers := 0; 
  END IF; 

  IF :new.papy_vsbt IS NULL THEN 
    :new.papy_vsbt := 1001; 
  END IF; 

  IF :new.papy_las_act_by IS NULL THEN 
    :new.papy_las_act_by := 1; 
  END IF; 

  IF :new.papy_origcrtr IS NULL THEN 
    :new.papy_origcrtr := 1; 
  END IF; 

  IF :new.papy_origcrtrlogdin IS NULL THEN 
    :new.papy_origcrtrlogdin := 1; 
  END IF; 

  IF :new.papy_las_act_by_logdin IS NULL THEN 
    :new.papy_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvdraffdphys 
  ( 
   classtype, 
   papy_c4c_id, 
   papy_crtd, 
   papy_las_act, 
   papy_las_act_actrtyp, 
   papy_obj_stt, 
   papy_vers, 
   papy_vsbt, 
   papy_dltddt, 
   papy_las_act_by, 
   papy_origcrtr, 
   papy_origcrtrlogdin, 
   papy_las_act_by_logdin, 
   papy_univid, 
   papy_affdphynpvdr, 
   papy_affdphyn, 
   papy_id, 
   valid_from, 
   valid_to , 
   papy_audid, 
   papy_prev_audid, 
   papy_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.papy_c4c_id,
   :new.papy_crtd,
   :new.papy_las_act,
   :new.papy_las_act_actrtyp,
   :new.papy_obj_stt,
   :new.papy_vers,
   :new.papy_vsbt,
   :new.papy_dltddt,
   :new.papy_las_act_by,
   :new.papy_origcrtr,
   :new.papy_origcrtrlogdin,
   :new.papy_las_act_by_logdin,
   :new.papy_univid,
   :new.papy_affdphynpvdr,
   :new.papy_affdphyn, 
   :new.papy_id, 
   :new.papy_las_act_tim, 
   NULL, 
   u_pvdraffdphys.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
173
</td>
<td>
THH_C4C
</td>
<td>
TRG_PAPY_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRAFFDPHYS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_papy_auditupdate BEFORE
  UPDATE
    ON T_PVDRAFFDPHYS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        papy_audid
      INTO
        last_audid
      FROM
        a_pvdraffdphys
      WHERE
        papy_id            = :old.papy_id
      AND papy_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.papy_las_act_tim = :new.papy_las_act_tim THEN
      UPDATE
        a_pvdraffdphys
      SET
        classtype              = :new.classtype,
        papy_c4c_id            = :new.papy_c4c_id,
        papy_crtd              = :new.papy_crtd,
        papy_las_act           = :new.papy_las_act,
        papy_las_act_actrtyp   = :new.papy_las_act_actrtyp,
        papy_obj_stt           = :new.papy_obj_stt,
        papy_vers              = :new.papy_vers,
        papy_vsbt              = :new.papy_vsbt,
        papy_dltddt            = :new.papy_dltddt,
        papy_las_act_by        = :new.papy_las_act_by,
        papy_origcrtr          = :new.papy_origcrtr,
        papy_origcrtrlogdin    = :new.papy_origcrtrlogdin,
        papy_las_act_by_logdin = :new.papy_las_act_by_logdin,
        papy_univid            = :new.papy_univid,
        papy_affdphynpvdr      = :new.papy_affdphynpvdr,
        papy_affdphyn          = :new.papy_affdphyn
      WHERE
        papy_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdraffdphys
        (
          classtype,
          papy_c4c_id,
          papy_crtd,
          papy_las_act,
          papy_las_act_actrtyp,
          papy_obj_stt,
          papy_vers,
          papy_vsbt,
          papy_dltddt,
          papy_las_act_by,
          papy_origcrtr,
          papy_origcrtrlogdin,
          papy_las_act_
by_logdin,
          papy_univid,
          papy_affdphynpvdr,
          papy_affdphyn,
          papy_id,
          valid_from,
          valid_to,
          papy_audid,
          papy_prev_audid,
          papy_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.papy_c4c_id,
          :new.papy_crtd,
          :new.papy_las_act,
          :new.papy_las_act_actrtyp,
          :new.papy_obj_stt,
          :new.papy_vers,
          :new.papy_vsbt,
          :new.papy_dltddt,
          :new.papy_las_act_by,
          :new.papy_origcrtr,
          :new.papy_origcrtrlogdin,
          :new.papy_las_act_by_logdin,
          :new.papy_univid,
          :new.papy_affdphynpvdr,
          :new.papy_affdphyn,
          :new.papy_id,
          :new.papy_las_act_tim,
          NULL,
          u_pvdraffdphys.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdraffdphys
      SET
        valid_to        = :new.papy_las_act_tim,
        papy_next_audid = u_pvdraffdphys.CURRVAL
      WHERE
        papy_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
174
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRAS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRASTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pras_auditinsert BEFORE
	INSERT
		ON T_PVDRASTN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
	/* save current date */
	curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.pras_crtd IS NULL THEN
    :new.pras_crtd := curr_date;
  END IF;

  IF :new.pras_las_act_tim IS NULL THEN
    :new.pras_las_act_tim := curr_date;
  END IF;

  IF :new.pras_las_act IS NULL THEN
    :new.pras_las_act := 1;
  END IF;

  IF :new.pras_obj_stt IS NULL THEN
    :new.pras_obj_stt := 1;
  END IF;

  IF :new.pras_vers IS NULL THEN
    :new.pras_vers := 0;
  END IF;

  IF :new.pras_vsbt IS NULL THEN
    :new.pras_vsbt := 1001;
  END IF;

  IF :new.pras_las_act_by IS NULL THEN
    :new.pras_las_act_by := 1;
  END IF;

  IF :new.pras_origcrtr IS NULL THEN
    :new.pras_origcrtr := 1;
  END IF;

  IF :new.pras_origcrtrlogdin IS NULL THEN
    :new.pras_origcrtrlogdin := 1;
  END IF;

  IF :new.pras_las_act_by_logdin IS NULL THEN
    :new.pras_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_pvdrastn
  (
   cpas_pmrypvdr,
   cpas_id,
   mspa_id,
   mpas_id,
   upas_pmrypvdr,
   upas_rqngpvdr,
   upas_pfngpvdr,
   upas_id,
   cpas_cm_base,
   pras_role,
   upas_pvdrum_base,
   pras_pvdr,
   mpas_memb,
   mpas_drugclm,
   mpas_mdclclm,
   classtype,
   pras_c4c_id,
   pras_crtd,
   pras_las_act,
   pras_las_act_actrtyp,
   pras_obj_stt,
   pras_vers,
   pras_vsbt,
   pras_dltddt,
   pras_las_act_by,
   pras_origcrtr,
   pras_origcrtrlogdin,
   pras_las_act_by_logdin,
   pras_univid,
   pras_strtdt,
   pras_end_dt,
   pras_cmmt,
   pras_src_nam_id,
   pras_id,
   valid_from,
   valid_to ,
   pras_audid,
   pras_prev_audid,
   pras_next_audid,
   pras_distance_member,
   pras_network_status,
   pras_address_string,
   pras_audit_key,
   pras_practitioner_location
  )
  VALUES
  (
   :new.cpas_pmrypvdr,
   :new.cpas_id,
   :new.mspa_id,
   :new.mpas_id,
   :new.upas_pmrypvdr,
   :new.upas_rqngpvdr,
   :new.upas_pfngpvdr,
   :new.upas_id,
   :new.cpas_cm_base,
   :new.pras_role,
   :new.upas_pvdrum_base,
   :new.pras_pvdr,
   :new.mpas_memb,
   :new.mpas_drugclm,
   :new.mp
as_mdclclm,
   :new.classtype,
   :new.pras_c4c_id,
   :new.pras_crtd,
   :new.pras_las_act,
   :new.pras_las_act_actrtyp,
   :new.pras_obj_stt,
   :new.pras_vers,
   :new.pras_vsbt,
   :new.pras_dltddt,
   :new.pras_las_act_by,
   :new.pras_origcrtr,
   :new.pras_origcrtrlogdin,
   :new.pras_las_act_by_logdin,
   :new.pras_univid,
   :new.pras_strtdt,
   :new.pras_end_dt,
   :new.pras_cmmt,
   :new.pras_src_nam_id,
   :new.pras_id,
   :new.pras_las_act_tim,
   NULL,
   u_pvdrastn.NEXTVAL,
   NULL,
   NULL,
   :new.pras_distance_member,
   :new.pras_network_status,
   :new.pras_address_string,
   :new.pras_audit_key,
   :new.pras_practitioner_location
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
175
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRAS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRASTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_pras_auditupdate BEFORE
  UPDATE
    ON T_PVDRASTN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        pras_audid
      INTO
        last_audid
      FROM
        a_pvdrastn
      WHERE
        pras_id            = :old.pras_id
      AND pras_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.pras_las_act_tim = :new.pras_las_act_tim THEN
      UPDATE
        a_pvdrastn
      SET
        pras_crtd              = :new.pras_crtd,
        pras_las_act           = :new.pras_las_act,
        pras_las_act_actrtyp   = :new.pras_las_act_actrtyp,
        pras_obj_stt           = :new.pras_obj_stt,
        pras_vers              = :new.pras_vers,
        pras_vsbt              = :new.pras_vsbt,
        pras_dltddt            = :new.pras_dltddt,
        pras_las_act_by        = :new.pras_las_act_by,
        pras_origcrtr          = :new.pras_origcrtr,
        pras_origcrtrlogdin    = :new.pras_origcrtrlogdin,
        pras_las_act_by_logdin = :new.pras_las_act_by_logdin,
        pras_univid            = :new.pras_univid,
        pras_strtdt            = :new.pras_strtdt,
        pras_end_dt            = :new.pras_end_dt,
        pras_cmmt              = :new.pras_cmmt,
        pras_src_nam_id        = :new.pras_src_nam_id,
        cpas_pmrypvdr          = :new.cpas_pmrypvdr,
        cpas_id                = :new.cpas_id,
        mspa_id                = :new.mspa_id,
        mpas_id                = :new.mpas_id,
        upas_pmrypvdr          = :new.upas_pmrypvdr,
        upas_rqngpvdr          = :new.upas_rqngpvdr,
        upas_pfngpvdr          = :new.upas_pfngpvdr,
        upas_id                = :new.upas_id,
        cpas_cm_base           = :new.cpas_cm_base,
        pras_role              = :new.pras_role,
        upas_pvdrum_base       = :new.upas_pvdrum_base,

 pras_pvdr              = :new.pras_pvdr,
        mpas_memb              = :new.mpas_memb,
        mpas_drugclm           = :new.mpas_drugclm,
        mpas_mdclclm           = :new.mpas_mdclclm,
        classtype              = :new.classtype,
        pras_c4c_id            = :new.pras_c4c_id,
        pras_distance_member   = :new.pras_distance_member,
        pras_network_status    = :new.pras_network_status,
        pras_address_string    = :new.pras_address_string,
        pras_audit_key		   = :new.pras_audit_key,
		pras_practitioner_location = :new.pras_practitioner_location
      WHERE
        pras_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdrastn
        (
          pras_crtd,
          pras_las_act,
          pras_las_act_actrtyp,
          pras_obj_stt,
          pras_vers,
          pras_vsbt,
          pras_dltddt,
          pras_las_act_by,
          pras_origcrtr,
          pras_origcrtrlogdin,
          pras_las_act_by_logdin,
          pras_univid,
          pras_strtdt,
          pras_end_dt,
          pras_cmmt,
          pras_src_nam_id,
          cpas_pmrypvdr,
          cpas_id,
          mspa_id,
          mpas_id,
          upas_pmrypvdr,
          upas_rqngpvdr,
          upas_pfngpvdr,
          upas_id,
          cpas_cm_base,
          pras_role,
          upas_pvdrum_base,
          pras_pvdr,
          mpas_memb,
          mpas_drugclm,
          mpas_mdclclm,
          classtype,
          pras_c4c_id,
          pras_id,
          valid_from,
          valid_to,
          pras_audid,
          pras_prev_audid,
          pras_next_audid,
          pras_distance_member,
          pras_network_status,
          pras_address_string,
          pras_audit_key,
		  pras_practitioner_location
        )
        VALUES
        (
          :new.pras_crtd,
          :new.pras_las_act,
          :new.pras_
las_act_actrtyp,
          :new.pras_obj_stt,
          :new.pras_vers,
          :new.pras_vsbt,
          :new.pras_dltddt,
          :new.pras_las_act_by,
          :new.pras_origcrtr,
          :new.pras_origcrtrlogdin,
          :new.pras_las_act_by_logdin,
          :new.pras_univid,
          :new.pras_strtdt,
          :new.pras_end_dt,
          :new.pras_cmmt,
          :new.pras_src_nam_id,
          :new.cpas_pmrypvdr,
          :new.cpas_id,
          :new.mspa_id,
          :new.mpas_id,
          :new.upas_pmrypvdr,
          :new.upas_rqngpvdr,
          :new.upas_pfngpvdr,
          :new.upas_id,
          :new.cpas_cm_base,
          :new.pras_role,
          :new.upas_pvdrum_base,
          :new.pras_pvdr,
          :new.mpas_memb,
          :new.mpas_drugclm,
          :new.mpas_mdclclm,
          :new.classtype,
          :new.pras_c4c_id,
          :new.pras_id,
          :new.pras_las_act_tim,
          NULL,
          u_pvdrastn.NEXTVAL,
          last_audid,
          NULL,
          :new.pras_distance_member,
          :new.pras_network_status,
          :new.pras_address_string,
          :new.pras_audit_key,
		  :new.pras_practitioner_location
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdrastn
      SET
        valid_to        = :new.pras_las_act_tim,
        pras_next_audid = u_pvdrastn.CURRVAL
      WHERE
        pras_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
176
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_PVDRASTN
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRASTN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_PVDRASTN
AFTER INSERT OR UPDATE ON T_PVDRASTN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  VAR1 VARCHAR2(4000);
 BEGIN
      -- service (provider-service-diagnosis-event)
       var1 := 'INSERT INTO T_EVENT_UPDT  ' ||
               '(SELECT UMET_ID, :1 FROM T_UM_BASE WHERE UMBS_ID IN  ' ||
               '(SELECT UMDS_DGISUM_EVNT FROM T_MEMBDGISBASE WHERE UMDS_ID IN ' ||
               '(SELECT MSRV_SRVCDGIS FROM T_APBL WHERE MSRV_PVDRASTN = :2)))';
       EXECUTE IMMEDIATE VAR1 USING 'P',:NEW.MSPA_ID;
 END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
177
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRPD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PRPD_AUDITINSERT&quot; BEFORE INSERT ON T_PVDRPAYRDAT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.prpd_crtd IS NULL THEN 
    :new.prpd_crtd := curr_date; 
  END IF; 

  IF :new.prpd_las_act_tim IS NULL THEN 
    :new.prpd_las_act_tim := curr_date; 
  END IF; 

  IF :new.prpd_las_act IS NULL THEN 
    :new.prpd_las_act := 1; 
  END IF; 

  IF :new.prpd_obj_stt IS NULL THEN 
    :new.prpd_obj_stt := 1; 
  END IF; 

  IF :new.prpd_vers IS NULL THEN 
    :new.prpd_vers := 0; 
  END IF; 

  IF :new.prpd_vsbt IS NULL THEN 
    :new.prpd_vsbt := 1001; 
  END IF; 

  IF :new.prpd_las_act_by IS NULL THEN 
    :new.prpd_las_act_by := 1; 
  END IF; 

  IF :new.prpd_origcrtr IS NULL THEN 
    :new.prpd_origcrtr := 1; 
  END IF; 

  IF :new.prpd_origcrtrlogdin IS NULL THEN 
    :new.prpd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.prpd_las_act_by_logdin IS NULL THEN 
    :new.prpd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvdrpayrdat 
  ( 
   classtype, 
   prpd_c4c_id, 
   prpd_crtd, 
   prpd_las_act, 
   prpd_las_act_actrtyp, 
   prpd_obj_stt, 
   prpd_vers, 
   prpd_vsbt, 
   prpd_dltddt, 
   prpd_las_act_by, 
   prpd_origcrtr, 
   prpd_origcrtrlogdin, 
   prpd_las_act_by_logdin, 
   prpd_univid, 
   prpd_pln_id, 
   prpd_upn_id, 
   prpd_fed_tax, 
   prpd_frstnam, 
   prpd_mdlenam, 
   prpd_las_nam, 
   prpd_dt_of_brth, 
   prpd_gndrcode, 
   prpd_totlpnts, 
   prpd_totlpntsin_pctc, 
   prpd_totlpayrmems, 
   prpd_totlpayrmemsin_pctc, 
   prpd_acngnew_pnts, 
   prpd_athdfor_aumtdtmn, 
   prpd_inscid, 
   prpd_pcp_ind, 
   prpd_cnctinfopayrdat, 
   prpd_id, 
   valid_from, 
   valid_to , 
   prpd_audid, 
   prpd_prev_audid, 
   prpd_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.prpd_c4c_id,
   :new.prpd_crtd,
   :new.prpd_las_act,
   :new.prpd_las_act_actrtyp,
   :new.prpd_obj_stt,
   :new.prpd_vers,
   :new.prpd_vsbt,
   :new.prpd_dltddt,
   :new.prpd_las_act_by,
   :new.prpd_origcrtr,
   :new.prpd_origcrtrlogdin,
   :new.prpd_las_act_by_logdin,
   :
new.prpd_univid,
   :new.prpd_pln_id,
   :new.prpd_upn_id,
   :new.prpd_fed_tax,
   :new.prpd_frstnam,
   :new.prpd_mdlenam,
   :new.prpd_las_nam,
   :new.prpd_dt_of_brth,
   :new.prpd_gndrcode,
   :new.prpd_totlpnts,
   :new.prpd_totlpntsin_pctc,
   :new.prpd_totlpayrmems,
   :new.prpd_totlpayrmemsin_pctc,
   :new.prpd_acngnew_pnts,
   :new.prpd_athdfor_aumtdtmn,
   :new.prpd_inscid,
   :new.prpd_pcp_ind,
   :new.prpd_cnctinfopayrdat, 
   :new.prpd_id, 
   :new.prpd_las_act_tim, 
   NULL, 
   u_pvdrpayrdat.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
178
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRPD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRPAYRDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prpd_auditupdate BEFORE
  UPDATE
    ON T_PVDRPAYRDAT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        prpd_audid
      INTO
        last_audid
      FROM
        a_pvdrpayrdat
      WHERE
        prpd_id            = :old.prpd_id
      AND prpd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.prpd_las_act_tim = :new.prpd_las_act_tim THEN
      UPDATE
        a_pvdrpayrdat
      SET
        classtype                = :new.classtype,
        prpd_c4c_id              = :new.prpd_c4c_id,
        prpd_crtd                = :new.prpd_crtd,
        prpd_las_act             = :new.prpd_las_act,
        prpd_las_act_actrtyp     = :new.prpd_las_act_actrtyp,
        prpd_obj_stt             = :new.prpd_obj_stt,
        prpd_vers                = :new.prpd_vers,
        prpd_vsbt                = :new.prpd_vsbt,
        prpd_dltddt              = :new.prpd_dltddt,
        prpd_las_act_by          = :new.prpd_las_act_by,
        prpd_origcrtr            = :new.prpd_origcrtr,
        prpd_origcrtrlogdin      = :new.prpd_origcrtrlogdin,
        prpd_las_act_by_logdin   = :new.prpd_las_act_by_logdin,
        prpd_univid              = :new.prpd_univid,
        prpd_pln_id              = :new.prpd_pln_id,
        prpd_upn_id              = :new.prpd_upn_id,
        prpd_fed_tax             = :new.prpd_fed_tax,
        prpd_frstnam             = :new.prpd_frstnam,
        prpd_mdlenam             = :new.prpd_mdlenam,
        prpd_las_nam             = :new.prpd_las_nam,
        prpd_dt_of_brth          = :new.prpd_dt_of_brth,
        prpd_gndrcode            = :new.prpd_gndrcode,
        prpd_totlpnts            = :new.prpd_totlpnts,
        prpd_totlpntsin_pctc     = :new.prpd_totlpntsin_pctc,
        prpd_totlpayrmems        = :new.prpd_totlpayrmems,
        prpd_totlpayrmemsi
n_pctc = :new.prpd_totlpayrmemsin_pctc,
        prpd_acngnew_pnts        = :new.prpd_acngnew_pnts,
        prpd_athdfor_aumtdtmn    = :new.prpd_athdfor_aumtdtmn,
        prpd_inscid              = :new.prpd_inscid,
        prpd_pcp_ind             = :new.prpd_pcp_ind,
        prpd_cnctinfopayrdat     = :new.prpd_cnctinfopayrdat
      WHERE
        prpd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdrpayrdat
        (
          classtype,
          prpd_c4c_id,
          prpd_crtd,
          prpd_las_act,
          prpd_las_act_actrtyp,
          prpd_obj_stt,
          prpd_vers,
          prpd_vsbt,
          prpd_dltddt,
          prpd_las_act_by,
          prpd_origcrtr,
          prpd_origcrtrlogdin,
          prpd_las_act_by_logdin,
          prpd_univid,
          prpd_pln_id,
          prpd_upn_id,
          prpd_fed_tax,
          prpd_frstnam,
          prpd_mdlenam,
          prpd_las_nam,
          prpd_dt_of_brth,
          prpd_gndrcode,
          prpd_totlpnts,
          prpd_totlpntsin_pctc,
          prpd_totlpayrmems,
          prpd_totlpayrmemsin_pctc,
          prpd_acngnew_pnts,
          prpd_athdfor_aumtdtmn,
          prpd_inscid,
          prpd_pcp_ind,
          prpd_cnctinfopayrdat,
          prpd_id,
          valid_from,
          valid_to,
          prpd_audid,
          prpd_prev_audid,
          prpd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.prpd_c4c_id,
          :new.prpd_crtd,
          :new.prpd_las_act,
          :new.prpd_las_act_actrtyp,
          :new.prpd_obj_stt,
          :new.prpd_vers,
          :new.prpd_vsbt,
          :new.prpd_dltddt,
          :new.prpd_las_act_by,
          :new.prpd_origcrtr,
          :new.prpd_origcrtrlogdin,
          :new.prpd_las_act_by_logdin,
          :new.prpd_univid,
          :new.prpd_pln_id,

  :new.prpd_upn_id,
          :new.prpd_fed_tax,
          :new.prpd_frstnam,
          :new.prpd_mdlenam,
          :new.prpd_las_nam,
          :new.prpd_dt_of_brth,
          :new.prpd_gndrcode,
          :new.prpd_totlpnts,
          :new.prpd_totlpntsin_pctc,
          :new.prpd_totlpayrmems,
          :new.prpd_totlpayrmemsin_pctc,
          :new.prpd_acngnew_pnts,
          :new.prpd_athdfor_aumtdtmn,
          :new.prpd_inscid,
          :new.prpd_pcp_ind,
          :new.prpd_cnctinfopayrdat,
          :new.prpd_id,
          :new.prpd_las_act_tim,
          NULL,
          u_pvdrpayrdat.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdrpayrdat
      SET
        valid_to        = :new.prpd_las_act_tim,
        prpd_next_audid = u_pvdrpayrdat.CURRVAL
      WHERE
        prpd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
179
</td>
<td>
THH_C4C
</td>
<td>
TRG_PPAF_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRPLNSAFFS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PPAF_AUDITINSERT&quot; BEFORE INSERT ON T_PVDRPLNSAFFS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ppaf_crtd IS NULL THEN 
    :new.ppaf_crtd := curr_date; 
  END IF; 

  IF :new.ppaf_las_act_tim IS NULL THEN 
    :new.ppaf_las_act_tim := curr_date; 
  END IF; 

  IF :new.ppaf_las_act IS NULL THEN 
    :new.ppaf_las_act := 1; 
  END IF; 

  IF :new.ppaf_obj_stt IS NULL THEN 
    :new.ppaf_obj_stt := 1; 
  END IF; 

  IF :new.ppaf_vers IS NULL THEN 
    :new.ppaf_vers := 0; 
  END IF; 

  IF :new.ppaf_vsbt IS NULL THEN 
    :new.ppaf_vsbt := 1001; 
  END IF; 

  IF :new.ppaf_las_act_by IS NULL THEN 
    :new.ppaf_las_act_by := 1; 
  END IF; 

  IF :new.ppaf_origcrtr IS NULL THEN 
    :new.ppaf_origcrtr := 1; 
  END IF; 

  IF :new.ppaf_origcrtrlogdin IS NULL THEN 
    :new.ppaf_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ppaf_las_act_by_logdin IS NULL THEN 
    :new.ppaf_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvdrplnsaffs 
  ( 
   classtype, 
   ppaf_c4c_id, 
   ppaf_crtd, 
   ppaf_las_act, 
   ppaf_las_act_actrtyp, 
   ppaf_obj_stt, 
   ppaf_vers, 
   ppaf_vsbt, 
   ppaf_dltddt, 
   ppaf_las_act_by, 
   ppaf_origcrtr, 
   ppaf_origcrtrlogdin, 
   ppaf_las_act_by_logdin, 
   ppaf_univid, 
   ppaf_pvdr, 
   ppaf_plnsaffs, 
   ppaf_id, 
   valid_from, 
   valid_to , 
   ppaf_audid, 
   ppaf_prev_audid, 
   ppaf_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ppaf_c4c_id,
   :new.ppaf_crtd,
   :new.ppaf_las_act,
   :new.ppaf_las_act_actrtyp,
   :new.ppaf_obj_stt,
   :new.ppaf_vers,
   :new.ppaf_vsbt,
   :new.ppaf_dltddt,
   :new.ppaf_las_act_by,
   :new.ppaf_origcrtr,
   :new.ppaf_origcrtrlogdin,
   :new.ppaf_las_act_by_logdin,
   :new.ppaf_univid,
   :new.ppaf_pvdr,
   :new.ppaf_plnsaffs, 
   :new.ppaf_id, 
   :new.ppaf_las_act_tim, 
   NULL, 
   u_pvdrplnsaffs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
180
</td>
<td>
THH_C4C
</td>
<td>
TRG_PPAF_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDRPLNSAFFS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ppaf_auditupdate BEFORE
  UPDATE
    ON T_PVDRPLNSAFFS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ppaf_audid
      INTO
        last_audid
      FROM
        a_pvdrplnsaffs
      WHERE
        ppaf_id            = :old.ppaf_id
      AND ppaf_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ppaf_las_act_tim = :new.ppaf_las_act_tim THEN
      UPDATE
        a_pvdrplnsaffs
      SET
        classtype              = :new.classtype,
        ppaf_c4c_id            = :new.ppaf_c4c_id,
        ppaf_crtd              = :new.ppaf_crtd,
        ppaf_las_act           = :new.ppaf_las_act,
        ppaf_las_act_actrtyp   = :new.ppaf_las_act_actrtyp,
        ppaf_obj_stt           = :new.ppaf_obj_stt,
        ppaf_vers              = :new.ppaf_vers,
        ppaf_vsbt              = :new.ppaf_vsbt,
        ppaf_dltddt            = :new.ppaf_dltddt,
        ppaf_las_act_by        = :new.ppaf_las_act_by,
        ppaf_origcrtr          = :new.ppaf_origcrtr,
        ppaf_origcrtrlogdin    = :new.ppaf_origcrtrlogdin,
        ppaf_las_act_by_logdin = :new.ppaf_las_act_by_logdin,
        ppaf_univid            = :new.ppaf_univid,
        ppaf_pvdr              = :new.ppaf_pvdr,
        ppaf_plnsaffs          = :new.ppaf_plnsaffs
      WHERE
        ppaf_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdrplnsaffs
        (
          classtype,
          ppaf_c4c_id,
          ppaf_crtd,
          ppaf_las_act,
          ppaf_las_act_actrtyp,
          ppaf_obj_stt,
          ppaf_vers,
          ppaf_vsbt,
          ppaf_dltddt,
          ppaf_las_act_by,
          ppaf_origcrtr,
          ppaf_origcrtrlogdin,
          ppaf_las_act_by_logdi
n,
          ppaf_univid,
          ppaf_pvdr,
          ppaf_plnsaffs,
          ppaf_id,
          valid_from,
          valid_to,
          ppaf_audid,
          ppaf_prev_audid,
          ppaf_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ppaf_c4c_id,
          :new.ppaf_crtd,
          :new.ppaf_las_act,
          :new.ppaf_las_act_actrtyp,
          :new.ppaf_obj_stt,
          :new.ppaf_vers,
          :new.ppaf_vsbt,
          :new.ppaf_dltddt,
          :new.ppaf_las_act_by,
          :new.ppaf_origcrtr,
          :new.ppaf_origcrtrlogdin,
          :new.ppaf_las_act_by_logdin,
          :new.ppaf_univid,
          :new.ppaf_pvdr,
          :new.ppaf_plnsaffs,
          :new.ppaf_id,
          :new.ppaf_las_act_tim,
          NULL,
          u_pvdrplnsaffs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdrplnsaffs
      SET
        valid_to        = :new.ppaf_las_act_tim,
        ppaf_next_audid = u_pvdrplnsaffs.CURRVAL
      WHERE
        ppaf_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
181
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRVDRDETS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDR_DIR_DETAILS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prvdrdets_auditinsert BEFORE
	INSERT
		ON T_PVDR_DIR_DETAILS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
	/* save current date */
	curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.prdd_crtd IS NULL THEN
    :new.prdd_crtd := curr_date;
  END IF;

  IF :new.prdd_las_act_tim IS NULL THEN
    :new.prdd_las_act_tim := curr_date;
  END IF;

  IF :new.prdd_las_act IS NULL THEN
    :new.prdd_las_act := 1;
  END IF;

  IF :new.prdd_obj_stt IS NULL THEN
    :new.prdd_obj_stt := 1;
  END IF;

  IF :new.prdd_vers IS NULL THEN
    :new.prdd_vers := 0;
  END IF;

  IF :new.prdd_vsbt IS NULL THEN
    :new.prdd_vsbt := 1001;
  END IF;

  IF :new.prdd_las_act_by IS NULL THEN
    :new.prdd_las_act_by := 1;
  END IF;

  IF :new.prdd_origcrtr IS NULL THEN
    :new.prdd_origcrtr := 1;
  END IF;

  IF :new.prdd_origcrtrlogdin IS NULL THEN
    :new.prdd_origcrtrlogdin := 1;
  END IF;

  IF :new.prdd_las_act_by_logdin IS NULL THEN
    :new.prdd_las_act_by_logdin := 1;
  END IF;

  INSERT INTO A_PVDR_DIR_DETAILS
  (
      CLASSTYPE,
      prdd_c4c_id,
      prdd_crtd,
      prdd_las_act_tim,
	  prdd_las_act,
	  prdd_las_act_actrtyp,
	  prdd_las_act_by_logdin,
	  prdd_las_act_by,
      prdd_obj_stt,
      prdd_vers,
      prdd_dltddt,
      prdd_univid,
      prdd_id,
	  prdd_pvdr,
	  prdd_vsbt,
	  prdd_origcrtr,
	  prdd_origcrtrlogdin,

	  prdd_is_obgyn,

	  prdd_named_provider_grouping,

	  prdd_network_tier_num,
	  prdd_network_tier_name,

	  prdd_organization_name,

	  prdd_practitionr_othr_id,
	  prdd_practitionr_role_othr_id,

	  prdd_specialty,
	  prdd_specialty_classification,

	  prdd_splr_loc_mbr_facing_num,
	  prdd_splr_loc_office_main,
	  prdd_splr_loc_other_id,
	  prdd_splr_loc_status,
	  prdd_splr_network_name,
	  prdd_splr_other_id,
	  prdd_splr_status,
	  prdd_status,

	  valid_from,
      valid_to,
      prdd_audid,
      prdd_prev_audid,
      prdd_next_audid
  )
  VALUES
  (
      :new.CLASSTYPE,
      :new.prdd_c4c_id,
      :new.prdd_crtd,
      :new.prdd_las_act_tim,
	  :new.prdd_las_act,
	  :new.prdd_las_act_actrtyp,
	  :new.prdd_las_act_by_logdin,
	
  :new.prdd_las_act_by,
      :new.prdd_obj_stt,
      :new.prdd_vers,
      :new.prdd_dltddt,
      :new.prdd_univid,
      :new.prdd_id,
	  :new.prdd_pvdr,
	  :new.prdd_vsbt,
	  :new.prdd_origcrtr,
	  :new.prdd_origcrtrlogdin,

	  :new.prdd_is_obgyn,

	  :new.prdd_named_provider_grouping,

	  :new.prdd_network_tier_num,
	  :new.prdd_network_tier_name,

	  :new.prdd_organization_name,

	  :new.prdd_practitionr_othr_id,
	  :new.prdd_practitionr_role_othr_id,

	  :new.prdd_specialty,
	  :new.prdd_specialty_classification,

	  :new.prdd_splr_loc_mbr_facing_num,
	  :new.prdd_splr_loc_office_main,
	  :new.prdd_splr_loc_other_id,
	  :new.prdd_splr_loc_status,
	  :new.prdd_splr_network_name,
	  :new.prdd_splr_other_id,
	  :new.prdd_splr_status,
	  :new.prdd_status,

      :new.prdd_las_act_tim,
	  NULL,
      u_pvdr_dir_details.NEXTVAL,
      NULL,
	  NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
182
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRVDRDETS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVDR_DIR_DETAILS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prvdrdets_auditupdate BEFORE
  UPDATE
    ON T_PVDR_DIR_DETAILS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        prdd_audid
      INTO
        last_audid
      FROM
        a_pvdr_dir_details
      WHERE
        prdd_id            = :old.prdd_id
      AND prdd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.prdd_las_act_tim = :new.prdd_las_act_tim THEN
      UPDATE
        a_pvdr_dir_details
      SET
		  CLASSTYPE = :new.CLASSTYPE,
	      prdd_c4c_id = :new.prdd_c4c_id,
	      prdd_crtd = :new.prdd_crtd,
	      prdd_las_act_tim = :new.prdd_las_act_tim,
		  prdd_las_act = :new.prdd_las_act,
		  prdd_las_act_actrtyp = :new.prdd_las_act_actrtyp,
		  prdd_las_act_by_logdin = :new.prdd_las_act_by_logdin,
		  prdd_las_act_by = :new.prdd_las_act_by,
	      prdd_obj_stt = :new.prdd_obj_stt,
	      prdd_vers = :new.prdd_vers,
	      prdd_dltddt = :new.prdd_dltddt,
	      prdd_univid = :new.prdd_univid,
	      prdd_id = :new.prdd_id,
		  prdd_pvdr = :new.prdd_pvdr,
		  prdd_vsbt = :new.prdd_vsbt,
		  prdd_origcrtr = :new.prdd_origcrtr,
		  prdd_origcrtrlogdin = :new.prdd_origcrtrlogdin,

		  prdd_is_obgyn = :new.prdd_is_obgyn,

		  prdd_named_provider_grouping = :new.prdd_named_provider_grouping,

		  prdd_network_tier_num = :new.prdd_network_tier_num,
		  prdd_network_tier_name = :new.prdd_network_tier_name,

		  prdd_organization_name = :new.prdd_organization_name,

		  prdd_practitionr_othr_id = :new.prdd_practitionr_othr_id,
		  prdd_practitionr_role_othr_id = :new.prdd_practitionr_role_othr_id,

		  prdd_specialty = :new.prdd_specialty,
		  prdd_specialty_classification = :new.prdd_specialty_classification,

		  prdd_splr_loc_mbr_facing_num = :new.prdd_splr_loc_mbr_facing_num,
		  prdd_splr_loc_office_main = :new.prdd_splr_loc_office_main,
		  prdd_splr_loc_other_id = :new.p
rdd_splr_loc_other_id,
		  prdd_splr_loc_status = :new.prdd_splr_loc_status,
		  prdd_splr_network_name = :new.prdd_splr_network_name,
		  prdd_splr_other_id = :new.prdd_splr_other_id,
		  prdd_splr_status = :new.prdd_splr_status,
		  prdd_status = :new.prdd_status

      WHERE
        prdd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvdr_dir_details
        (
		  CLASSTYPE,
	      prdd_c4c_id,
	      prdd_crtd,
	      prdd_las_act_tim,
		  prdd_las_act,
		  prdd_las_act_actrtyp,
		  prdd_las_act_by_logdin,
		  prdd_las_act_by,
	      prdd_obj_stt,
	      prdd_vers,
	      prdd_dltddt,
	      prdd_univid,
	      prdd_id,
		  prdd_pvdr,
		  prdd_vsbt,
		  prdd_origcrtr,
		  prdd_origcrtrlogdin,

		  prdd_is_obgyn,

		  prdd_named_provider_grouping,

		  prdd_network_tier_num,
		  prdd_network_tier_name,

		  prdd_organization_name,

		  prdd_practitionr_othr_id,
		  prdd_practitionr_role_othr_id,

		  prdd_specialty,
		  prdd_specialty_classification,

		  prdd_splr_loc_mbr_facing_num,
		  prdd_splr_loc_office_main,
		  prdd_splr_loc_other_id,
		  prdd_splr_loc_status,
		  prdd_splr_network_name,
		  prdd_splr_other_id,
		  prdd_splr_status,
		  prdd_status,

		  valid_from,
	      valid_to,
	      prdd_audid,
	      prdd_prev_audid,
	      prdd_next_audid

        )
        VALUES
        (

		  :new.CLASSTYPE,
	      :new.prdd_c4c_id,
	      :new.prdd_crtd,
	      :new.prdd_las_act_tim,
		  :new.prdd_las_act,
		  :new.prdd_las_act_actrtyp,
		  :new.prdd_las_act_by_logdin,
		  :new.prdd_las_act_by,
	      :new.prdd_obj_stt,
	      :new.prdd_vers,
	      :new.prdd_dltddt,
	      :new.prdd_univid,
	      :new.prdd_id,
		  :new.prdd_pvdr,
		  :new.prdd_vsbt,
		  :new.prdd_origcrtr,
		  :new.prdd_origcrtrlogdin,

		  :new.prdd_is_obgyn,

		  :new.prdd_named_provider_grouping,

		  :new.prdd_network_tier_num,
		  :new.prdd_netwo
rk_tier_name,

		  :new.prdd_organization_name,

		  :new.prdd_practitionr_othr_id,
		  :new.prdd_practitionr_role_othr_id,

		  :new.prdd_specialty,
		  :new.prdd_specialty_classification,

		  :new.prdd_splr_loc_mbr_facing_num,
		  :new.prdd_splr_loc_office_main,
		  :new.prdd_splr_loc_other_id,
		  :new.prdd_splr_loc_status,
		  :new.prdd_splr_network_name,
		  :new.prdd_splr_other_id,
		  :new.prdd_splr_status,
		  :new.prdd_status,

	      :new.prdd_las_act_tim,
	      NULL,
	      u_pvdr_dir_details.NEXTVAL,
	      last_audid,
	      NULL

        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvdr_dir_details
      SET
        valid_to        = :new.prdd_las_act_tim,
        prdd_next_audid = u_pvdr_dir_details.CURRVAL
      WHERE
        prdd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
183
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRRA_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVRSRQRGAUTH
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_PRRA_AUDITINSERT&quot; BEFORE INSERT ON T_PVRSRQRGAUTH FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.prra_crtd IS NULL THEN 
    :new.prra_crtd := curr_date; 
  END IF; 

  IF :new.prra_las_act_tim IS NULL THEN 
    :new.prra_las_act_tim := curr_date; 
  END IF; 

  IF :new.prra_las_act IS NULL THEN 
    :new.prra_las_act := 1; 
  END IF; 

  IF :new.prra_obj_stt IS NULL THEN 
    :new.prra_obj_stt := 1; 
  END IF; 

  IF :new.prra_vers IS NULL THEN 
    :new.prra_vers := 0; 
  END IF; 

  IF :new.prra_vsbt IS NULL THEN 
    :new.prra_vsbt := 1001; 
  END IF; 

  IF :new.prra_las_act_by IS NULL THEN 
    :new.prra_las_act_by := 1; 
  END IF; 

  IF :new.prra_origcrtr IS NULL THEN 
    :new.prra_origcrtr := 1; 
  END IF; 

  IF :new.prra_origcrtrlogdin IS NULL THEN 
    :new.prra_origcrtrlogdin := 1; 
  END IF; 

  IF :new.prra_las_act_by_logdin IS NULL THEN 
    :new.prra_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_pvrsrqrgauth 
  ( 
   classtype, 
   prra_c4c_id, 
   prra_crtd, 
   prra_las_act, 
   prra_las_act_actrtyp, 
   prra_obj_stt, 
   prra_vers, 
   prra_vsbt, 
   prra_dltddt, 
   prra_las_act_by, 
   prra_origcrtr, 
   prra_origcrtrlogdin, 
   prra_las_act_by_logdin, 
   prra_univid, 
   prra_pndgdvonaths, 
   prra_pvrsrqrgauth, 
   prra_id, 
   valid_from, 
   valid_to , 
   prra_audid, 
   prra_prev_audid, 
   prra_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.prra_c4c_id,
   :new.prra_crtd,
   :new.prra_las_act,
   :new.prra_las_act_actrtyp,
   :new.prra_obj_stt,
   :new.prra_vers,
   :new.prra_vsbt,
   :new.prra_dltddt,
   :new.prra_las_act_by,
   :new.prra_origcrtr,
   :new.prra_origcrtrlogdin,
   :new.prra_las_act_by_logdin,
   :new.prra_univid,
   :new.prra_pndgdvonaths,
   :new.prra_pvrsrqrgauth, 
   :new.prra_id, 
   :new.prra_las_act_tim, 
   NULL, 
   u_pvrsrqrgauth.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
184
</td>
<td>
THH_C4C
</td>
<td>
TRG_PRRA_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_PVRSRQRGAUTH
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_prra_auditupdate BEFORE
  UPDATE
    ON T_PVRSRQRGAUTH FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        prra_audid
      INTO
        last_audid
      FROM
        a_pvrsrqrgauth
      WHERE
        prra_id            = :old.prra_id
      AND prra_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.prra_las_act_tim = :new.prra_las_act_tim THEN
      UPDATE
        a_pvrsrqrgauth
      SET
        classtype              = :new.classtype,
        prra_c4c_id            = :new.prra_c4c_id,
        prra_crtd              = :new.prra_crtd,
        prra_las_act           = :new.prra_las_act,
        prra_las_act_actrtyp   = :new.prra_las_act_actrtyp,
        prra_obj_stt           = :new.prra_obj_stt,
        prra_vers              = :new.prra_vers,
        prra_vsbt              = :new.prra_vsbt,
        prra_dltddt            = :new.prra_dltddt,
        prra_las_act_by        = :new.prra_las_act_by,
        prra_origcrtr          = :new.prra_origcrtr,
        prra_origcrtrlogdin    = :new.prra_origcrtrlogdin,
        prra_las_act_by_logdin = :new.prra_las_act_by_logdin,
        prra_univid            = :new.prra_univid,
        prra_pndgdvonaths      = :new.prra_pndgdvonaths,
        prra_pvrsrqrgauth      = :new.prra_pvrsrqrgauth
      WHERE
        prra_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_pvrsrqrgauth
        (
          classtype,
          prra_c4c_id,
          prra_crtd,
          prra_las_act,
          prra_las_act_actrtyp,
          prra_obj_stt,
          prra_vers,
          prra_vsbt,
          prra_dltddt,
          prra_las_act_by,
          prra_origcrtr,
          prra_origcrtrlogdin,
          prra_las_
act_by_logdin,
          prra_univid,
          prra_pndgdvonaths,
          prra_pvrsrqrgauth,
          prra_id,
          valid_from,
          valid_to,
          prra_audid,
          prra_prev_audid,
          prra_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.prra_c4c_id,
          :new.prra_crtd,
          :new.prra_las_act,
          :new.prra_las_act_actrtyp,
          :new.prra_obj_stt,
          :new.prra_vers,
          :new.prra_vsbt,
          :new.prra_dltddt,
          :new.prra_las_act_by,
          :new.prra_origcrtr,
          :new.prra_origcrtrlogdin,
          :new.prra_las_act_by_logdin,
          :new.prra_univid,
          :new.prra_pndgdvonaths,
          :new.prra_pvrsrqrgauth,
          :new.prra_id,
          :new.prra_las_act_tim,
          NULL,
          u_pvrsrqrgauth.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_pvrsrqrgauth
      SET
        valid_to        = :new.prra_las_act_tim,
        prra_next_audid = u_pvrsrqrgauth.CURRVAL
      WHERE
        prra_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
185
</td>
<td>
THH_C4C
</td>
<td>
TRG_QSS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_QCK_SEA_SNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_QSS_AUDITINSERT&quot; BEFORE INSERT ON T_QCK_SEA_SNGS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.qss_crtd IS NULL THEN 
    :new.qss_crtd := curr_date; 
  END IF; 

  IF :new.qss_las_act_tim IS NULL THEN 
    :new.qss_las_act_tim := curr_date; 
  END IF; 

  IF :new.qss_las_act IS NULL THEN 
    :new.qss_las_act := 1; 
  END IF; 

  IF :new.qss_obj_stt IS NULL THEN 
    :new.qss_obj_stt := 1; 
  END IF; 

  IF :new.qss_vers IS NULL THEN 
    :new.qss_vers := 0; 
  END IF; 

  IF :new.qss_vsbt IS NULL THEN 
    :new.qss_vsbt := 1001; 
  END IF; 

  IF :new.qss_las_act_by IS NULL THEN 
    :new.qss_las_act_by := 1; 
  END IF; 

  IF :new.qss_origcrtr IS NULL THEN 
    :new.qss_origcrtr := 1; 
  END IF; 

  IF :new.qss_origcrtrlogdin IS NULL THEN 
    :new.qss_origcrtrlogdin := 1; 
  END IF; 

  IF :new.qss_las_act_by_logdin IS NULL THEN 
    :new.qss_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_qck_sea_sngs 
  ( 
   classtype, 
   qss_c4c_id, 
   qss_crtd, 
   qss_las_act, 
   qss_las_act_actrtyp, 
   qss_obj_stt, 
   qss_vers, 
   qss_vsbt, 
   qss_dltddt, 
   qss_las_act_by, 
   qss_origcrtr, 
   qss_origcrtrlogdin, 
   qss_las_act_by_logdin, 
   qss_univid, 
   qss_sea, 
   qss_fld, 
   qss_seq, 
   qss_act, 
   qss_dfltui_pfr, 
   qss_payr, 
   qss_id, 
   valid_from, 
   valid_to , 
   qss_audid, 
   qss_prev_audid, 
   qss_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.qss_c4c_id,
   :new.qss_crtd,
   :new.qss_las_act,
   :new.qss_las_act_actrtyp,
   :new.qss_obj_stt,
   :new.qss_vers,
   :new.qss_vsbt,
   :new.qss_dltddt,
   :new.qss_las_act_by,
   :new.qss_origcrtr,
   :new.qss_origcrtrlogdin,
   :new.qss_las_act_by_logdin,
   :new.qss_univid,
   :new.qss_sea,
   :new.qss_fld,
   :new.qss_seq,
   :new.qss_act,
   :new.qss_dfltui_pfr,
   :new.qss_payr, 
   :new.qss_id, 
   :new.qss_las_act_tim, 
   NULL, 
   u_qck_sea_sngs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
186
</td>
<td>
THH_C4C
</td>
<td>
TRG_QSS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_QCK_SEA_SNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_qss_auditupdate BEFORE
  UPDATE
    ON T_QCK_SEA_SNGS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        qss_audid
      INTO
        last_audid
      FROM
        a_qck_sea_sngs
      WHERE
        qss_id            = :old.qss_id
      AND qss_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.qss_las_act_tim = :new.qss_las_act_tim THEN
      UPDATE
        a_qck_sea_sngs
      SET
        classtype             = :new.classtype,
        qss_c4c_id            = :new.qss_c4c_id,
        qss_crtd              = :new.qss_crtd,
        qss_las_act           = :new.qss_las_act,
        qss_las_act_actrtyp   = :new.qss_las_act_actrtyp,
        qss_obj_stt           = :new.qss_obj_stt,
        qss_vers              = :new.qss_vers,
        qss_vsbt              = :new.qss_vsbt,
        qss_dltddt            = :new.qss_dltddt,
        qss_las_act_by        = :new.qss_las_act_by,
        qss_origcrtr          = :new.qss_origcrtr,
        qss_origcrtrlogdin    = :new.qss_origcrtrlogdin,
        qss_las_act_by_logdin = :new.qss_las_act_by_logdin,
        qss_univid            = :new.qss_univid,
        qss_sea               = :new.qss_sea,
        qss_fld               = :new.qss_fld,
        qss_seq               = :new.qss_seq,
        qss_act               = :new.qss_act,
        qss_dfltui_pfr        = :new.qss_dfltui_pfr,
        qss_payr              = :new.qss_payr
      WHERE
        qss_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_qck_sea_sngs
        (
          classtype,
          qss_c4c_id,
          qss_crtd,
          qss_las_act,
          qss_las_act_actrtyp,
          qss_obj_stt,
          qss_vers,
          qss_vsb
t,
          qss_dltddt,
          qss_las_act_by,
          qss_origcrtr,
          qss_origcrtrlogdin,
          qss_las_act_by_logdin,
          qss_univid,
          qss_sea,
          qss_fld,
          qss_seq,
          qss_act,
          qss_dfltui_pfr,
          qss_payr,
          qss_id,
          valid_from,
          valid_to,
          qss_audid,
          qss_prev_audid,
          qss_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.qss_c4c_id,
          :new.qss_crtd,
          :new.qss_las_act,
          :new.qss_las_act_actrtyp,
          :new.qss_obj_stt,
          :new.qss_vers,
          :new.qss_vsbt,
          :new.qss_dltddt,
          :new.qss_las_act_by,
          :new.qss_origcrtr,
          :new.qss_origcrtrlogdin,
          :new.qss_las_act_by_logdin,
          :new.qss_univid,
          :new.qss_sea,
          :new.qss_fld,
          :new.qss_seq,
          :new.qss_act,
          :new.qss_dfltui_pfr,
          :new.qss_payr,
          :new.qss_id,
          :new.qss_las_act_tim,
          NULL,
          u_qck_sea_sngs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_qck_sea_sngs
      SET
        valid_to       = :new.qss_las_act_tim,
        qss_next_audid = u_qck_sea_sngs.CURRVAL
      WHERE
        qss_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
187
</td>
<td>
THH_C4C
</td>
<td>
TRG_REPT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REP_TMPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_REPT_AUDITINSERT&quot; BEFORE INSERT ON T_REP_TMPT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rept_crtd IS NULL THEN 
    :new.rept_crtd := curr_date; 
  END IF; 

  IF :new.rept_las_act_tim IS NULL THEN 
    :new.rept_las_act_tim := curr_date; 
  END IF; 

  IF :new.rept_las_act IS NULL THEN 
    :new.rept_las_act := 1; 
  END IF; 

  IF :new.rept_obj_stt IS NULL THEN 
    :new.rept_obj_stt := 1; 
  END IF; 

  IF :new.rept_vers IS NULL THEN 
    :new.rept_vers := 0; 
  END IF; 

  IF :new.rept_vsbt IS NULL THEN 
    :new.rept_vsbt := 1001; 
  END IF; 

  IF :new.rept_las_act_by IS NULL THEN 
    :new.rept_las_act_by := 1; 
  END IF; 

  IF :new.rept_origcrtr IS NULL THEN 
    :new.rept_origcrtr := 1; 
  END IF; 

  IF :new.rept_origcrtrlogdin IS NULL THEN 
    :new.rept_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rept_las_act_by_logdin IS NULL THEN 
    :new.rept_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_rep_tmpt 
  ( 
   classtype, 
   rept_c4c_id, 
   rept_crtd, 
   rept_las_act, 
   rept_las_act_actrtyp, 
   rept_obj_stt, 
   rept_vers, 
   rept_vsbt, 
   rept_dltddt, 
   rept_las_act_by, 
   rept_origcrtr, 
   rept_origcrtrlogdin, 
   rept_las_act_by_logdin, 
   rept_univid, 
   rept_nam, 
   rept_dscn, 
   rept_url, 
   rept_frstatvd, 
   rept_las_atvd, 
   rept_las_dctd, 
   rept_frstsbtdat, 
   rept_las_sbtdat, 
   rept_wkfwistcid, 
   rept_cnv_id, 
   rept_ownrchndflag, 
   rept_ownrchndcnt, 
   rept_dvtndt, 
   rept_cmmt, 
   rept_las_dctdby, 
   rept_frstatvdby, 
   rept_las_atvdby, 
   rept_ratnapvl, 
   rept_apvl, 
   rept_rcpttrkg, 
   rept_las_sbtdby, 
   rept_frstsbtdby, 
   rept_rfngwkfwtsk, 
   rept_prvsrfngtsk, 
   rept_prvsrfngtsk_prmn, 
   rept_ownr, 
   rept_prvsownr, 
   rept_prvssndr, 
   rept_prvsownrprmn, 
   rept_tnfr, 
   rept_prvstnfr, 
   rept_typ_sbty, 
   rept_id, 
   valid_from, 
   valid_to , 
   rept_audid, 
   rept_prev_audid, 
   rept_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.rept_c4c_id,
   :new.
rept_crtd,
   :new.rept_las_act,
   :new.rept_las_act_actrtyp,
   :new.rept_obj_stt,
   :new.rept_vers,
   :new.rept_vsbt,
   :new.rept_dltddt,
   :new.rept_las_act_by,
   :new.rept_origcrtr,
   :new.rept_origcrtrlogdin,
   :new.rept_las_act_by_logdin,
   :new.rept_univid,
   :new.rept_nam,
   :new.rept_dscn,
   :new.rept_url,
   :new.rept_frstatvd,
   :new.rept_las_atvd,
   :new.rept_las_dctd,
   :new.rept_frstsbtdat,
   :new.rept_las_sbtdat,
   :new.rept_wkfwistcid,
   :new.rept_cnv_id,
   :new.rept_ownrchndflag,
   :new.rept_ownrchndcnt,
   :new.rept_dvtndt,
   :new.rept_cmmt,
   :new.rept_las_dctdby,
   :new.rept_frstatvdby,
   :new.rept_las_atvdby,
   :new.rept_ratnapvl,
   :new.rept_apvl,
   :new.rept_rcpttrkg,
   :new.rept_las_sbtdby,
   :new.rept_frstsbtdby,
   :new.rept_rfngwkfwtsk,
   :new.rept_prvsrfngtsk,
   :new.rept_prvsrfngtsk_prmn,
   :new.rept_ownr,
   :new.rept_prvsownr,
   :new.rept_prvssndr,
   :new.rept_prvsownrprmn,
   :new.rept_tnfr,
   :new.rept_prvstnfr,
   :new.rept_typ_sbty, 
   :new.rept_id, 
   :new.rept_las_act_tim, 
   NULL, 
   u_rep_tmpt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
188
</td>
<td>
THH_C4C
</td>
<td>
TRG_REPT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REP_TMPT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rept_auditupdate BEFORE
  UPDATE
    ON T_REP_TMPT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rept_audid
      INTO
        last_audid
      FROM
        a_rep_tmpt
      WHERE
        rept_id            = :old.rept_id
      AND rept_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rept_las_act_tim = :new.rept_las_act_tim THEN
      UPDATE
        a_rep_tmpt
      SET
        classtype              = :new.classtype,
        rept_c4c_id            = :new.rept_c4c_id,
        rept_crtd              = :new.rept_crtd,
        rept_las_act           = :new.rept_las_act,
        rept_las_act_actrtyp   = :new.rept_las_act_actrtyp,
        rept_obj_stt           = :new.rept_obj_stt,
        rept_vers              = :new.rept_vers,
        rept_vsbt              = :new.rept_vsbt,
        rept_dltddt            = :new.rept_dltddt,
        rept_las_act_by        = :new.rept_las_act_by,
        rept_origcrtr          = :new.rept_origcrtr,
        rept_origcrtrlogdin    = :new.rept_origcrtrlogdin,
        rept_las_act_by_logdin = :new.rept_las_act_by_logdin,
        rept_univid            = :new.rept_univid,
        rept_nam               = :new.rept_nam,
        rept_dscn              = :new.rept_dscn,
        rept_url               = :new.rept_url,
        rept_frstatvd          = :new.rept_frstatvd,
        rept_las_atvd          = :new.rept_las_atvd,
        rept_las_dctd          = :new.rept_las_dctd,
        rept_frstsbtdat        = :new.rept_frstsbtdat,
        rept_las_sbtdat        = :new.rept_las_sbtdat,
        rept_wkfwistcid        = :new.rept_wkfwistcid,
        rept_cnv_id            = :new.rept_cnv_id,
        rept_ownrchndflag      = :new.rept_ownrchndflag,
        rept_ownrchndcnt       = :new.rept_ownrchndcnt,
        rept_dvtndt            = :new
.rept_dvtndt,
        rept_cmmt              = :new.rept_cmmt,
        rept_las_dctdby        = :new.rept_las_dctdby,
        rept_frstatvdby        = :new.rept_frstatvdby,
        rept_las_atvdby        = :new.rept_las_atvdby,
        rept_ratnapvl          = :new.rept_ratnapvl,
        rept_apvl              = :new.rept_apvl,
        rept_rcpttrkg          = :new.rept_rcpttrkg,
        rept_las_sbtdby        = :new.rept_las_sbtdby,
        rept_frstsbtdby        = :new.rept_frstsbtdby,
        rept_rfngwkfwtsk       = :new.rept_rfngwkfwtsk,
        rept_prvsrfngtsk       = :new.rept_prvsrfngtsk,
        rept_prvsrfngtsk_prmn  = :new.rept_prvsrfngtsk_prmn,
        rept_ownr              = :new.rept_ownr,
        rept_prvsownr          = :new.rept_prvsownr,
        rept_prvssndr          = :new.rept_prvssndr,
        rept_prvsownrprmn      = :new.rept_prvsownrprmn,
        rept_tnfr              = :new.rept_tnfr,
        rept_prvstnfr          = :new.rept_prvstnfr,
        rept_typ_sbty          = :new.rept_typ_sbty
      WHERE
        rept_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_rep_tmpt
        (
          classtype,
          rept_c4c_id,
          rept_crtd,
          rept_las_act,
          rept_las_act_actrtyp,
          rept_obj_stt,
          rept_vers,
          rept_vsbt,
          rept_dltddt,
          rept_las_act_by,
          rept_origcrtr,
          rept_origcrtrlogdin,
          rept_las_act_by_logdin,
          rept_univid,
          rept_nam,
          rept_dscn,
          rept_url,
          rept_frstatvd,
          rept_las_atvd,
          rept_las_dctd,
          rept_frstsbtdat,
          rept_las_sbtdat,
          rept_wkfwistcid,
          rept_cnv_id,
          rept_ownrchndflag,
          rept_ownrchndcnt,
          rept_dvtndt,
          rept_cmmt,
          rept_las_dctdby,
          rept_fr
statvdby,
          rept_las_atvdby,
          rept_ratnapvl,
          rept_apvl,
          rept_rcpttrkg,
          rept_las_sbtdby,
          rept_frstsbtdby,
          rept_rfngwkfwtsk,
          rept_prvsrfngtsk,
          rept_prvsrfngtsk_prmn,
          rept_ownr,
          rept_prvsownr,
          rept_prvssndr,
          rept_prvsownrprmn,
          rept_tnfr,
          rept_prvstnfr,
          rept_typ_sbty,
          rept_id,
          valid_from,
          valid_to,
          rept_audid,
          rept_prev_audid,
          rept_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rept_c4c_id,
          :new.rept_crtd,
          :new.rept_las_act,
          :new.rept_las_act_actrtyp,
          :new.rept_obj_stt,
          :new.rept_vers,
          :new.rept_vsbt,
          :new.rept_dltddt,
          :new.rept_las_act_by,
          :new.rept_origcrtr,
          :new.rept_origcrtrlogdin,
          :new.rept_las_act_by_logdin,
          :new.rept_univid,
          :new.rept_nam,
          :new.rept_dscn,
          :new.rept_url,
          :new.rept_frstatvd,
          :new.rept_las_atvd,
          :new.rept_las_dctd,
          :new.rept_frstsbtdat,
          :new.rept_las_sbtdat,
          :new.rept_wkfwistcid,
          :new.rept_cnv_id,
          :new.rept_ownrchndflag,
          :new.rept_ownrchndcnt,
          :new.rept_dvtndt,
          :new.rept_cmmt,
          :new.rept_las_dctdby,
          :new.rept_frstatvdby,
          :new.rept_las_atvdby,
          :new.rept_ratnapvl,
          :new.rept_apvl,
          :new.rept_rcpttrkg,
          :new.rept_las_sbtdby,
          :new.rept_frstsbtdby,
          :new.rept_rfngwkfwtsk,
          :new.rept_prvsrfngtsk,
          :new.rept_prvsrfngtsk_prmn,
          :new.rept_ownr,
          :new.rept_prvsownr,
          :new.rept_prvssndr,
          :new.rept_prvsownrprmn,
          :new.rept_tnfr,
          :new.rept_prvstnfr,
          :new.rept_typ_sbty,
          :new.rept_
id,
          :new.rept_las_act_tim,
          NULL,
          u_rep_tmpt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_rep_tmpt
      SET
        valid_to        = :new.rept_las_act_tim,
        rept_next_audid = u_rep_tmpt.CURRVAL
      WHERE
        rept_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
189
</td>
<td>
THH_C4C
</td>
<td>
TRG_RWHD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWHEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RWHD_AUDITINSERT&quot; BEFORE INSERT ON T_REVWHEAD FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rwhd_crtd IS NULL THEN 
    :new.rwhd_crtd := curr_date; 
  END IF; 

  IF :new.rwhd_las_act_tim IS NULL THEN 
    :new.rwhd_las_act_tim := curr_date; 
  END IF; 

  IF :new.rwhd_las_act IS NULL THEN 
    :new.rwhd_las_act := 1; 
  END IF; 

  IF :new.rwhd_obj_stt IS NULL THEN 
    :new.rwhd_obj_stt := 1; 
  END IF; 

  IF :new.rwhd_vers IS NULL THEN 
    :new.rwhd_vers := 0; 
  END IF; 

  IF :new.rwhd_vsbt IS NULL THEN 
    :new.rwhd_vsbt := 1001; 
  END IF; 

  IF :new.rwhd_las_act_by IS NULL THEN 
    :new.rwhd_las_act_by := 1; 
  END IF; 

  IF :new.rwhd_origcrtr IS NULL THEN 
    :new.rwhd_origcrtr := 1; 
  END IF; 

  IF :new.rwhd_origcrtrlogdin IS NULL THEN 
    :new.rwhd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rwhd_las_act_by_logdin IS NULL THEN 
    :new.rwhd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_revwhead 
  ( 
   classtype, 
   rwhd_c4c_id, 
   rwhd_crtd, 
   rwhd_las_act, 
   rwhd_las_act_actrtyp, 
   rwhd_obj_stt, 
   rwhd_vers, 
   rwhd_vsbt, 
   rwhd_dltddt, 
   rwhd_las_act_by, 
   rwhd_origcrtr, 
   rwhd_origcrtrlogdin, 
   rwhd_las_act_by_logdin, 
   rwhd_univid, 
   rwhd_cmpd, 
   rwhd_ddln, 
   rwhd_ddlnact, 
   rwhd_cmmt, 
   rwhd_wkfwistcid, 
   rwhd_cnv_id, 
   rwhd_rfrdobj_id, 
   rwhd_rfrdobj_typ, 
   mrwh_id, 
   rwhd_cfrdrevw, 
   rwhd_resn, 
   rwhd_ogtr, 
   rwhd_sndr, 
   rwhd_ret_to, 
   mrwh_grp, 
   rwhd_frtropnnfor, 
   mrwh_pat_id_qry, 
   mrwh_qry_stts, 
   rwhd_id, 
   valid_from, 
   valid_to , 
   rwhd_audid, 
   rwhd_prev_audid, 
   rwhd_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.rwhd_c4c_id,
   :new.rwhd_crtd,
   :new.rwhd_las_act,
   :new.rwhd_las_act_actrtyp,
   :new.rwhd_obj_stt,
   :new.rwhd_vers,
   :new.rwhd_vsbt,
   :new.rwhd_dltddt,
   :new.rwhd_las_act_by,
   :new.rwhd_origcrtr,
   :new.rwhd_origcrtrlogdin,
   :new.rwhd_las_act_by_logdin,
   :new.rwhd_univid,
   :new.rwhd_cmpd,
   :new.
rwhd_ddln,
   :new.rwhd_ddlnact,
   :new.rwhd_cmmt,
   :new.rwhd_wkfwistcid,
   :new.rwhd_cnv_id,
   :new.rwhd_rfrdobj_id,
   :new.rwhd_rfrdobj_typ,
   :new.mrwh_id,
   :new.rwhd_cfrdrevw,
   :new.rwhd_resn,
   :new.rwhd_ogtr,
   :new.rwhd_sndr,
   :new.rwhd_ret_to,
   :new.mrwh_grp,
   :new.rwhd_frtropnnfor,
   :new.mrwh_pat_id_qry,
   :new.mrwh_qry_stts, 
   :new.rwhd_id, 
   :new.rwhd_las_act_tim, 
   NULL, 
   u_revwhead.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
190
</td>
<td>
THH_C4C
</td>
<td>
TRG_RWHD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWHEAD
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rwhd_auditupdate BEFORE
  UPDATE
    ON T_REVWHEAD FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rwhd_audid
      INTO
        last_audid
      FROM
        a_revwhead
      WHERE
        rwhd_id            = :old.rwhd_id
      AND rwhd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rwhd_las_act_tim = :new.rwhd_las_act_tim THEN
      UPDATE
        a_revwhead
      SET
        classtype              = :new.classtype,
        rwhd_c4c_id            = :new.rwhd_c4c_id,
        rwhd_crtd              = :new.rwhd_crtd,
        rwhd_las_act           = :new.rwhd_las_act,
        rwhd_las_act_actrtyp   = :new.rwhd_las_act_actrtyp,
        rwhd_obj_stt           = :new.rwhd_obj_stt,
        rwhd_vers              = :new.rwhd_vers,
        rwhd_vsbt              = :new.rwhd_vsbt,
        rwhd_dltddt            = :new.rwhd_dltddt,
        rwhd_las_act_by        = :new.rwhd_las_act_by,
        rwhd_origcrtr          = :new.rwhd_origcrtr,
        rwhd_origcrtrlogdin    = :new.rwhd_origcrtrlogdin,
        rwhd_las_act_by_logdin = :new.rwhd_las_act_by_logdin,
        rwhd_univid            = :new.rwhd_univid,
        rwhd_cmpd              = :new.rwhd_cmpd,
        rwhd_ddln              = :new.rwhd_ddln,
        rwhd_ddlnact           = :new.rwhd_ddlnact,
        rwhd_cmmt              = :new.rwhd_cmmt,
        rwhd_wkfwistcid        = :new.rwhd_wkfwistcid,
        rwhd_cnv_id            = :new.rwhd_cnv_id,
        rwhd_rfrdobj_id        = :new.rwhd_rfrdobj_id,
        rwhd_rfrdobj_typ       = :new.rwhd_rfrdobj_typ,
        mrwh_id                = :new.mrwh_id,
        rwhd_cfrdrevw          = :new.rwhd_cfrdrevw,
        rwhd_resn              = :new.rwhd_resn,
        rwhd_ogtr              = :new.rwhd_ogtr,
        rwhd_sndr              = :new.rwhd_sndr,

 rwhd_ret_to            = :new.rwhd_ret_to,
        mrwh_grp               = :new.mrwh_grp,
        rwhd_frtropnnfor       = :new.rwhd_frtropnnfor,
        mrwh_pat_id_qry        = :new.mrwh_pat_id_qry,
        mrwh_qry_stts          = :new.mrwh_qry_stts
      WHERE
        rwhd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_revwhead
        (
          classtype,
          rwhd_c4c_id,
          rwhd_crtd,
          rwhd_las_act,
          rwhd_las_act_actrtyp,
          rwhd_obj_stt,
          rwhd_vers,
          rwhd_vsbt,
          rwhd_dltddt,
          rwhd_las_act_by,
          rwhd_origcrtr,
          rwhd_origcrtrlogdin,
          rwhd_las_act_by_logdin,
          rwhd_univid,
          rwhd_cmpd,
          rwhd_ddln,
          rwhd_ddlnact,
          rwhd_cmmt,
          rwhd_wkfwistcid,
          rwhd_cnv_id,
          rwhd_rfrdobj_id,
          rwhd_rfrdobj_typ,
          mrwh_id,
          rwhd_cfrdrevw,
          rwhd_resn,
          rwhd_ogtr,
          rwhd_sndr,
          rwhd_ret_to,
          mrwh_grp,
          rwhd_frtropnnfor,
          mrwh_pat_id_qry,
          mrwh_qry_stts,
          rwhd_id,
          valid_from,
          valid_to,
          rwhd_audid,
          rwhd_prev_audid,
          rwhd_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rwhd_c4c_id,
          :new.rwhd_crtd,
          :new.rwhd_las_act,
          :new.rwhd_las_act_actrtyp,
          :new.rwhd_obj_stt,
          :new.rwhd_vers,
          :new.rwhd_vsbt,
          :new.rwhd_dltddt,
          :new.rwhd_las_act_by,
          :new.rwhd_origcrtr,
          :new.rwhd_origcrtrlogdin,
          :new.rwhd_las_act_by_logdin,
          :new.rwhd_univid,
          :new.rwhd_cmpd,
          :new.rwhd_ddln,
          :new.rwhd_ddlnact,
          :new.rwhd_cmmt,
          :new.rwhd_wkfwistcid,

:new.rwhd_cnv_id,
          :new.rwhd_rfrdobj_id,
          :new.rwhd_rfrdobj_typ,
          :new.mrwh_id,
          :new.rwhd_cfrdrevw,
          :new.rwhd_resn,
          :new.rwhd_ogtr,
          :new.rwhd_sndr,
          :new.rwhd_ret_to,
          :new.mrwh_grp,
          :new.rwhd_frtropnnfor,
          :new.mrwh_pat_id_qry,
          :new.mrwh_qry_stts,
          :new.rwhd_id,
          :new.rwhd_las_act_tim,
          NULL,
          u_revwhead.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_revwhead
      SET
        valid_to        = :new.rwhd_las_act_tim,
        rwhd_next_audid = u_revwhead.CURRVAL
      WHERE
        rwhd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
191
</td>
<td>
THH_C4C
</td>
<td>
TRG_RERT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWRCPTTRKG
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RERT_AUDITINSERT&quot; BEFORE INSERT ON T_REVWRCPTTRKG FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rert_crtd IS NULL THEN 
    :new.rert_crtd := curr_date; 
  END IF; 

  IF :new.rert_las_act_tim IS NULL THEN 
    :new.rert_las_act_tim := curr_date; 
  END IF; 

  IF :new.rert_las_act IS NULL THEN 
    :new.rert_las_act := 1; 
  END IF; 

  IF :new.rert_obj_stt IS NULL THEN 
    :new.rert_obj_stt := 1; 
  END IF; 

  IF :new.rert_vers IS NULL THEN 
    :new.rert_vers := 0; 
  END IF; 

  IF :new.rert_vsbt IS NULL THEN 
    :new.rert_vsbt := 1001; 
  END IF; 

  IF :new.rert_las_act_by IS NULL THEN 
    :new.rert_las_act_by := 1; 
  END IF; 

  IF :new.rert_origcrtr IS NULL THEN 
    :new.rert_origcrtr := 1; 
  END IF; 

  IF :new.rert_origcrtrlogdin IS NULL THEN 
    :new.rert_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rert_las_act_by_logdin IS NULL THEN 
    :new.rert_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_revwrcpttrkg 
  ( 
   classtype, 
   rert_c4c_id, 
   rert_crtd, 
   rert_las_act, 
   rert_las_act_actrtyp, 
   rert_obj_stt, 
   rert_vers, 
   rert_vsbt, 
   rert_dltddt, 
   rert_las_act_by, 
   rert_origcrtr, 
   rert_origcrtrlogdin, 
   rert_las_act_by_logdin, 
   rert_univid, 
   aprt_id, 
   rert_id, 
   valid_from, 
   valid_to , 
   rert_audid, 
   rert_prev_audid, 
   rert_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.rert_c4c_id,
   :new.rert_crtd,
   :new.rert_las_act,
   :new.rert_las_act_actrtyp,
   :new.rert_obj_stt,
   :new.rert_vers,
   :new.rert_vsbt,
   :new.rert_dltddt,
   :new.rert_las_act_by,
   :new.rert_origcrtr,
   :new.rert_origcrtrlogdin,
   :new.rert_las_act_by_logdin,
   :new.rert_univid,
   :new.aprt_id, 
   :new.rert_id, 
   :new.rert_las_act_tim, 
   NULL, 
   u_revwrcpttrkg.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
192
</td>
<td>
THH_C4C
</td>
<td>
TRG_RERT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWRCPTTRKG
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rert_auditupdate BEFORE
  UPDATE
    ON T_REVWRCPTTRKG FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rert_audid
      INTO
        last_audid
      FROM
        a_revwrcpttrkg
      WHERE
        rert_id            = :old.rert_id
      AND rert_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rert_las_act_tim = :new.rert_las_act_tim THEN
      UPDATE
        a_revwrcpttrkg
      SET
        classtype              = :new.classtype,
        rert_c4c_id            = :new.rert_c4c_id,
        rert_crtd              = :new.rert_crtd,
        rert_las_act           = :new.rert_las_act,
        rert_las_act_actrtyp   = :new.rert_las_act_actrtyp,
        rert_obj_stt           = :new.rert_obj_stt,
        rert_vers              = :new.rert_vers,
        rert_vsbt              = :new.rert_vsbt,
        rert_dltddt            = :new.rert_dltddt,
        rert_las_act_by        = :new.rert_las_act_by,
        rert_origcrtr          = :new.rert_origcrtr,
        rert_origcrtrlogdin    = :new.rert_origcrtrlogdin,
        rert_las_act_by_logdin = :new.rert_las_act_by_logdin,
        rert_univid            = :new.rert_univid,
        aprt_id                = :new.aprt_id
      WHERE
        rert_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_revwrcpttrkg
        (
          classtype,
          rert_c4c_id,
          rert_crtd,
          rert_las_act,
          rert_las_act_actrtyp,
          rert_obj_stt,
          rert_vers,
          rert_vsbt,
          rert_dltddt,
          rert_las_act_by,
          rert_origcrtr,
          rert_origcrtrlogdin,
          rert_las_act_by_logdin,
          rert_univid,
          aprt_id,

rert_id,
          valid_from,
          valid_to,
          rert_audid,
          rert_prev_audid,
          rert_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rert_c4c_id,
          :new.rert_crtd,
          :new.rert_las_act,
          :new.rert_las_act_actrtyp,
          :new.rert_obj_stt,
          :new.rert_vers,
          :new.rert_vsbt,
          :new.rert_dltddt,
          :new.rert_las_act_by,
          :new.rert_origcrtr,
          :new.rert_origcrtrlogdin,
          :new.rert_las_act_by_logdin,
          :new.rert_univid,
          :new.aprt_id,
          :new.rert_id,
          :new.rert_las_act_tim,
          NULL,
          u_revwrcpttrkg.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_revwrcpttrkg
      SET
        valid_to        = :new.rert_las_act_tim,
        rert_next_audid = u_revwrcpttrkg.CURRVAL
      WHERE
        rert_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
193
</td>
<td>
THH_C4C
</td>
<td>
TRG_RWRC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RWRC_AUDITINSERT&quot; BEFORE INSERT ON T_REVWREC FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rwrc_crtd IS NULL THEN 
    :new.rwrc_crtd := curr_date; 
  END IF; 

  IF :new.rwrc_las_act_tim IS NULL THEN 
    :new.rwrc_las_act_tim := curr_date; 
  END IF; 

  IF :new.rwrc_las_act IS NULL THEN 
    :new.rwrc_las_act := 1; 
  END IF; 

  IF :new.rwrc_obj_stt IS NULL THEN 
    :new.rwrc_obj_stt := 1; 
  END IF; 

  IF :new.rwrc_vers IS NULL THEN 
    :new.rwrc_vers := 0; 
  END IF; 

  IF :new.rwrc_vsbt IS NULL THEN 
    :new.rwrc_vsbt := 1001; 
  END IF; 

  IF :new.rwrc_las_act_by IS NULL THEN 
    :new.rwrc_las_act_by := 1; 
  END IF; 

  IF :new.rwrc_origcrtr IS NULL THEN 
    :new.rwrc_origcrtr := 1; 
  END IF; 

  IF :new.rwrc_origcrtrlogdin IS NULL THEN 
    :new.rwrc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rwrc_las_act_by_logdin IS NULL THEN 
    :new.rwrc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_revwrec 
  ( 
   rwrc_prvsrfngtsk_prmn, 
   rwrc_ownr, 
   rwrc_prvsownr, 
   rwrc_prvssndr, 
   rwrc_prvsownrprmn, 
   rwrc_tnfr, 
   rwrc_prvstnfr, 
   rwrc_rjtnresn, 
   rwrc_head, 
   classtype, 
   rwrc_c4c_id, 
   rwrc_crtd, 
   rwrc_las_act, 
   rwrc_las_act_actrtyp, 
   rwrc_obj_stt, 
   rwrc_vers, 
   rwrc_vsbt, 
   rwrc_dltddt, 
   rwrc_las_act_by, 
   rwrc_origcrtr, 
   rwrc_origcrtrlogdin, 
   rwrc_las_act_by_logdin, 
   rwrc_univid, 
   rwrc_cmmt, 
   rwrc_rcvd, 
   rwrc_cmpd, 
   rwrc_rjtncmmt, 
   rwrc_rfrdobj_id, 
   rwrc_rfrdobj_typ, 
   rwrc_wkfwistcid, 
   rwrc_cnv_id, 
   rwrc_ownrchndflag, 
   rwrc_ownrchndcnt, 
   rwrc_rfngwkfwtsk, 
   rwrc_prvsrfngtsk, 
   rwrc_id, 
   valid_from, 
   valid_to , 
   rwrc_audid, 
   rwrc_prev_audid, 
   rwrc_next_audid
  ) 
  VALUES 
  ( 
   :new.rwrc_prvsrfngtsk_prmn,
   :new.rwrc_ownr,
   :new.rwrc_prvsownr,
   :new.rwrc_prvssndr,
   :new.rwrc_prvsownrprmn,
   :new.rwrc_tnfr,
   :new.rwrc_prvstnfr,
   :new.rwrc_rjtnresn,
   :new.rwrc_head,
   :new.classtype,
   :new.rwrc_c4c_id,
   :new.rwrc
_crtd,
   :new.rwrc_las_act,
   :new.rwrc_las_act_actrtyp,
   :new.rwrc_obj_stt,
   :new.rwrc_vers,
   :new.rwrc_vsbt,
   :new.rwrc_dltddt,
   :new.rwrc_las_act_by,
   :new.rwrc_origcrtr,
   :new.rwrc_origcrtrlogdin,
   :new.rwrc_las_act_by_logdin,
   :new.rwrc_univid,
   :new.rwrc_cmmt,
   :new.rwrc_rcvd,
   :new.rwrc_cmpd,
   :new.rwrc_rjtncmmt,
   :new.rwrc_rfrdobj_id,
   :new.rwrc_rfrdobj_typ,
   :new.rwrc_wkfwistcid,
   :new.rwrc_cnv_id,
   :new.rwrc_ownrchndflag,
   :new.rwrc_ownrchndcnt,
   :new.rwrc_rfngwkfwtsk,
   :new.rwrc_prvsrfngtsk, 
   :new.rwrc_id, 
   :new.rwrc_las_act_tim, 
   NULL, 
   u_revwrec.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
194
</td>
<td>
THH_C4C
</td>
<td>
TRG_RWRC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rwrc_auditupdate BEFORE
  UPDATE
    ON T_REVWREC FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rwrc_audid
      INTO
        last_audid
      FROM
        a_revwrec
      WHERE
        rwrc_id            = :old.rwrc_id
      AND rwrc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rwrc_las_act_tim = :new.rwrc_las_act_tim THEN
      UPDATE
        a_revwrec
      SET
        rwrc_prvsownr          = :new.rwrc_prvsownr,
        rwrc_prvssndr          = :new.rwrc_prvssndr,
        rwrc_prvsownrprmn      = :new.rwrc_prvsownrprmn,
        rwrc_tnfr              = :new.rwrc_tnfr,
        rwrc_prvstnfr          = :new.rwrc_prvstnfr,
        rwrc_rjtnresn          = :new.rwrc_rjtnresn,
        rwrc_head              = :new.rwrc_head,
        classtype              = :new.classtype,
        rwrc_c4c_id            = :new.rwrc_c4c_id,
        rwrc_crtd              = :new.rwrc_crtd,
        rwrc_las_act           = :new.rwrc_las_act,
        rwrc_las_act_actrtyp   = :new.rwrc_las_act_actrtyp,
        rwrc_obj_stt           = :new.rwrc_obj_stt,
        rwrc_vers              = :new.rwrc_vers,
        rwrc_vsbt              = :new.rwrc_vsbt,
        rwrc_dltddt            = :new.rwrc_dltddt,
        rwrc_las_act_by        = :new.rwrc_las_act_by,
        rwrc_origcrtr          = :new.rwrc_origcrtr,
        rwrc_origcrtrlogdin    = :new.rwrc_origcrtrlogdin,
        rwrc_las_act_by_logdin = :new.rwrc_las_act_by_logdin,
        rwrc_univid            = :new.rwrc_univid,
        rwrc_cmmt              = :new.rwrc_cmmt,
        rwrc_rcvd              = :new.rwrc_rcvd,
        rwrc_cmpd              = :new.rwrc_cmpd,
        rwrc_rjtncmmt          = :new.rwrc_rjtncmmt,
        rwrc_rfrdobj_id        = :new.rwrc_rfrdobj_id,
        rwrc_rfrdobj_typ       = :new.rwrc_rfrdobj
_typ,
        rwrc_wkfwistcid        = :new.rwrc_wkfwistcid,
        rwrc_cnv_id            = :new.rwrc_cnv_id,
        rwrc_ownrchndflag      = :new.rwrc_ownrchndflag,
        rwrc_ownrchndcnt       = :new.rwrc_ownrchndcnt,
        rwrc_rfngwkfwtsk       = :new.rwrc_rfngwkfwtsk,
        rwrc_prvsrfngtsk       = :new.rwrc_prvsrfngtsk,
        rwrc_prvsrfngtsk_prmn  = :new.rwrc_prvsrfngtsk_prmn,
        rwrc_ownr              = :new.rwrc_ownr
      WHERE
        rwrc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_revwrec
        (
          rwrc_prvsownr,
          rwrc_prvssndr,
          rwrc_prvsownrprmn,
          rwrc_tnfr,
          rwrc_prvstnfr,
          rwrc_rjtnresn,
          rwrc_head,
          classtype,
          rwrc_c4c_id,
          rwrc_crtd,
          rwrc_las_act,
          rwrc_las_act_actrtyp,
          rwrc_obj_stt,
          rwrc_vers,
          rwrc_vsbt,
          rwrc_dltddt,
          rwrc_las_act_by,
          rwrc_origcrtr,
          rwrc_origcrtrlogdin,
          rwrc_las_act_by_logdin,
          rwrc_univid,
          rwrc_cmmt,
          rwrc_rcvd,
          rwrc_cmpd,
          rwrc_rjtncmmt,
          rwrc_rfrdobj_id,
          rwrc_rfrdobj_typ,
          rwrc_wkfwistcid,
          rwrc_cnv_id,
          rwrc_ownrchndflag,
          rwrc_ownrchndcnt,
          rwrc_rfngwkfwtsk,
          rwrc_prvsrfngtsk,
          rwrc_prvsrfngtsk_prmn,
          rwrc_ownr,
          rwrc_id,
          valid_from,
          valid_to,
          rwrc_audid,
          rwrc_prev_audid,
          rwrc_next_audid
        )
        VALUES
        (
          :new.rwrc_prvsownr,
          :new.rwrc_prvssndr,
          :new.rwrc_prvsownrprmn,
          :new.rwrc_tnfr,
          :new.rwrc_prvstnfr,
          :new.rwrc_rjtnresn,
          :new.rwrc_head,
          :new.classtype,
          :new.rwrc_c4c_id,

:new.rwrc_crtd,
          :new.rwrc_las_act,
          :new.rwrc_las_act_actrtyp,
          :new.rwrc_obj_stt,
          :new.rwrc_vers,
          :new.rwrc_vsbt,
          :new.rwrc_dltddt,
          :new.rwrc_las_act_by,
          :new.rwrc_origcrtr,
          :new.rwrc_origcrtrlogdin,
          :new.rwrc_las_act_by_logdin,
          :new.rwrc_univid,
          :new.rwrc_cmmt,
          :new.rwrc_rcvd,
          :new.rwrc_cmpd,
          :new.rwrc_rjtncmmt,
          :new.rwrc_rfrdobj_id,
          :new.rwrc_rfrdobj_typ,
          :new.rwrc_wkfwistcid,
          :new.rwrc_cnv_id,
          :new.rwrc_ownrchndflag,
          :new.rwrc_ownrchndcnt,
          :new.rwrc_rfngwkfwtsk,
          :new.rwrc_prvsrfngtsk,
          :new.rwrc_prvsrfngtsk_prmn,
          :new.rwrc_ownr,
          :new.rwrc_id,
          :new.rwrc_las_act_tim,
          NULL,
          u_revwrec.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_revwrec
      SET
        valid_to        = :new.rwrc_las_act_tim,
        rwrc_next_audid = u_revwrec.CURRVAL
      WHERE
        rwrc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
195
</td>
<td>
THH_C4C
</td>
<td>
TRG_RETA_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWTRKGACTL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RETA_AUDITINSERT&quot; BEFORE INSERT ON T_REVWTRKGACTL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.reta_crtd IS NULL THEN 
    :new.reta_crtd := curr_date; 
  END IF; 

  IF :new.reta_las_act_tim IS NULL THEN 
    :new.reta_las_act_tim := curr_date; 
  END IF; 

  IF :new.reta_las_act IS NULL THEN 
    :new.reta_las_act := 1; 
  END IF; 

  IF :new.reta_obj_stt IS NULL THEN 
    :new.reta_obj_stt := 1; 
  END IF; 

  IF :new.reta_vers IS NULL THEN 
    :new.reta_vers := 0; 
  END IF; 

  IF :new.reta_vsbt IS NULL THEN 
    :new.reta_vsbt := 1001; 
  END IF; 

  IF :new.reta_las_act_by IS NULL THEN 
    :new.reta_las_act_by := 1; 
  END IF; 

  IF :new.reta_origcrtr IS NULL THEN 
    :new.reta_origcrtr := 1; 
  END IF; 

  IF :new.reta_origcrtrlogdin IS NULL THEN 
    :new.reta_origcrtrlogdin := 1; 
  END IF; 

  IF :new.reta_las_act_by_logdin IS NULL THEN 
    :new.reta_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_revwtrkgactl 
  ( 
   classtype, 
   reta_c4c_id, 
   reta_crtd, 
   reta_las_act, 
   reta_las_act_actrtyp, 
   reta_obj_stt, 
   reta_vers, 
   reta_vsbt, 
   reta_dltddt, 
   reta_las_act_by, 
   reta_origcrtr, 
   reta_origcrtrlogdin, 
   reta_las_act_by_logdin, 
   reta_univid, 
   reta_trkgfor_rcpt, 
   reta_actlrcts, 
   reta_id, 
   valid_from, 
   valid_to , 
   reta_audid, 
   reta_prev_audid, 
   reta_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.reta_c4c_id,
   :new.reta_crtd,
   :new.reta_las_act,
   :new.reta_las_act_actrtyp,
   :new.reta_obj_stt,
   :new.reta_vers,
   :new.reta_vsbt,
   :new.reta_dltddt,
   :new.reta_las_act_by,
   :new.reta_origcrtr,
   :new.reta_origcrtrlogdin,
   :new.reta_las_act_by_logdin,
   :new.reta_univid,
   :new.reta_trkgfor_rcpt,
   :new.reta_actlrcts, 
   :new.reta_id, 
   :new.reta_las_act_tim, 
   NULL, 
   u_revwtrkgactl.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
196
</td>
<td>
THH_C4C
</td>
<td>
TRG_RETA_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_REVWTRKGACTL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_reta_auditupdate BEFORE
  UPDATE
    ON T_REVWTRKGACTL FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        reta_audid
      INTO
        last_audid
      FROM
        a_revwtrkgactl
      WHERE
        reta_id            = :old.reta_id
      AND reta_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.reta_las_act_tim = :new.reta_las_act_tim THEN
      UPDATE
        a_revwtrkgactl
      SET
        classtype              = :new.classtype,
        reta_c4c_id            = :new.reta_c4c_id,
        reta_crtd              = :new.reta_crtd,
        reta_las_act           = :new.reta_las_act,
        reta_las_act_actrtyp   = :new.reta_las_act_actrtyp,
        reta_obj_stt           = :new.reta_obj_stt,
        reta_vers              = :new.reta_vers,
        reta_vsbt              = :new.reta_vsbt,
        reta_dltddt            = :new.reta_dltddt,
        reta_las_act_by        = :new.reta_las_act_by,
        reta_origcrtr          = :new.reta_origcrtr,
        reta_origcrtrlogdin    = :new.reta_origcrtrlogdin,
        reta_las_act_by_logdin = :new.reta_las_act_by_logdin,
        reta_univid            = :new.reta_univid,
        reta_trkgfor_rcpt      = :new.reta_trkgfor_rcpt,
        reta_actlrcts          = :new.reta_actlrcts
      WHERE
        reta_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_revwtrkgactl
        (
          classtype,
          reta_c4c_id,
          reta_crtd,
          reta_las_act,
          reta_las_act_actrtyp,
          reta_obj_stt,
          reta_vers,
          reta_vsbt,
          reta_dltddt,
          reta_las_act_by,
          reta_origcrtr,
          reta_origcrtrlogdin,
          reta_las_act_
by_logdin,
          reta_univid,
          reta_trkgfor_rcpt,
          reta_actlrcts,
          reta_id,
          valid_from,
          valid_to,
          reta_audid,
          reta_prev_audid,
          reta_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.reta_c4c_id,
          :new.reta_crtd,
          :new.reta_las_act,
          :new.reta_las_act_actrtyp,
          :new.reta_obj_stt,
          :new.reta_vers,
          :new.reta_vsbt,
          :new.reta_dltddt,
          :new.reta_las_act_by,
          :new.reta_origcrtr,
          :new.reta_origcrtrlogdin,
          :new.reta_las_act_by_logdin,
          :new.reta_univid,
          :new.reta_trkgfor_rcpt,
          :new.reta_actlrcts,
          :new.reta_id,
          :new.reta_las_act_tim,
          NULL,
          u_revwtrkgactl.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_revwtrkgactl
      SET
        valid_to        = :new.reta_las_act_tim,
        reta_next_audid = u_revwtrkgactl.CURRVAL
      WHERE
        reta_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
197
</td>
<td>
THH_C4C
</td>
<td>
TRG_RLST_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RGNLSNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RLST_AUDITINSERT&quot; BEFORE INSERT ON T_RGNLSNGS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rlst_crtd IS NULL THEN 
    :new.rlst_crtd := curr_date; 
  END IF; 

  IF :new.rlst_las_act_tim IS NULL THEN 
    :new.rlst_las_act_tim := curr_date; 
  END IF; 

  IF :new.rlst_las_act IS NULL THEN 
    :new.rlst_las_act := 1; 
  END IF; 

  IF :new.rlst_obj_stt IS NULL THEN 
    :new.rlst_obj_stt := 1; 
  END IF; 

  IF :new.rlst_vers IS NULL THEN 
    :new.rlst_vers := 0; 
  END IF; 

  IF :new.rlst_vsbt IS NULL THEN 
    :new.rlst_vsbt := 1001; 
  END IF; 

  IF :new.rlst_las_act_by IS NULL THEN 
    :new.rlst_las_act_by := 1; 
  END IF; 

  IF :new.rlst_origcrtr IS NULL THEN 
    :new.rlst_origcrtr := 1; 
  END IF; 

  IF :new.rlst_origcrtrlogdin IS NULL THEN 
    :new.rlst_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rlst_las_act_by_logdin IS NULL THEN 
    :new.rlst_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_rgnlsngs 
  ( 
   rlst_vers, 
   rlst_vsbt, 
   rlst_dltddt, 
   rlst_las_act_by, 
   rlst_origcrtr, 
   rlst_origcrtrlogdin, 
   rlst_las_act_by_logdin, 
   rlst_univid, 
   rlst_cnry, 
   rlst_lang, 
   classtype, 
   rlst_c4c_id, 
   rlst_crtd, 
   rlst_las_act, 
   rlst_las_act_actrtyp, 
   rlst_obj_stt, 
   rlst_id, 
   valid_from, 
   valid_to , 
   rlst_audid, 
   rlst_prev_audid, 
   rlst_next_audid
  ) 
  VALUES 
  ( 
   :new.rlst_vers,
   :new.rlst_vsbt,
   :new.rlst_dltddt,
   :new.rlst_las_act_by,
   :new.rlst_origcrtr,
   :new.rlst_origcrtrlogdin,
   :new.rlst_las_act_by_logdin,
   :new.rlst_univid,
   :new.rlst_cnry,
   :new.rlst_lang,
   :new.classtype,
   :new.rlst_c4c_id,
   :new.rlst_crtd,
   :new.rlst_las_act,
   :new.rlst_las_act_actrtyp,
   :new.rlst_obj_stt, 
   :new.rlst_id, 
   :new.rlst_las_act_tim, 
   NULL, 
   u_rgnlsngs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
198
</td>
<td>
THH_C4C
</td>
<td>
TRG_RLST_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RGNLSNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rlst_auditupdate BEFORE
  UPDATE
    ON T_RGNLSNGS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rlst_audid
      INTO
        last_audid
      FROM
        a_rgnlsngs
      WHERE
        rlst_id            = :old.rlst_id
      AND rlst_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rlst_las_act_tim = :new.rlst_las_act_tim THEN
      UPDATE
        a_rgnlsngs
      SET
        classtype              = :new.classtype,
        rlst_c4c_id            = :new.rlst_c4c_id,
        rlst_crtd              = :new.rlst_crtd,
        rlst_las_act           = :new.rlst_las_act,
        rlst_las_act_actrtyp   = :new.rlst_las_act_actrtyp,
        rlst_obj_stt           = :new.rlst_obj_stt,
        rlst_vers              = :new.rlst_vers,
        rlst_vsbt              = :new.rlst_vsbt,
        rlst_dltddt            = :new.rlst_dltddt,
        rlst_las_act_by        = :new.rlst_las_act_by,
        rlst_origcrtr          = :new.rlst_origcrtr,
        rlst_origcrtrlogdin    = :new.rlst_origcrtrlogdin,
        rlst_las_act_by_logdin = :new.rlst_las_act_by_logdin,
        rlst_univid            = :new.rlst_univid,
        rlst_cnry              = :new.rlst_cnry,
        rlst_lang              = :new.rlst_lang
      WHERE
        rlst_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_rgnlsngs
        (
          classtype,
          rlst_c4c_id,
          rlst_crtd,
          rlst_las_act,
          rlst_las_act_actrtyp,
          rlst_obj_stt,
          rlst_vers,
          rlst_vsbt,
          rlst_dltddt,
          rlst_las_act_by,
          rlst_origcrtr,
          rlst_origcrtrlogdin,
          rlst_las_act_by_logdin,
          rls
t_univid,
          rlst_cnry,
          rlst_lang,
          rlst_id,
          valid_from,
          valid_to,
          rlst_audid,
          rlst_prev_audid,
          rlst_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rlst_c4c_id,
          :new.rlst_crtd,
          :new.rlst_las_act,
          :new.rlst_las_act_actrtyp,
          :new.rlst_obj_stt,
          :new.rlst_vers,
          :new.rlst_vsbt,
          :new.rlst_dltddt,
          :new.rlst_las_act_by,
          :new.rlst_origcrtr,
          :new.rlst_origcrtrlogdin,
          :new.rlst_las_act_by_logdin,
          :new.rlst_univid,
          :new.rlst_cnry,
          :new.rlst_lang,
          :new.rlst_id,
          :new.rlst_las_act_tim,
          NULL,
          u_rgnlsngs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_rgnlsngs
      SET
        valid_to        = :new.rlst_las_act_tim,
        rlst_next_audid = u_rgnlsngs.CURRVAL
      WHERE
        rlst_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
199
</td>
<td>
THH_C4C
</td>
<td>
TRG_RSCF_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RSLSCNFG
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RSCF_AUDITINSERT&quot; BEFORE INSERT ON T_RSLSCNFG FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rscf_crtd IS NULL THEN 
    :new.rscf_crtd := curr_date; 
  END IF; 

  IF :new.rscf_las_act_tim IS NULL THEN 
    :new.rscf_las_act_tim := curr_date; 
  END IF; 

  IF :new.rscf_las_act IS NULL THEN 
    :new.rscf_las_act := 1; 
  END IF; 

  IF :new.rscf_obj_stt IS NULL THEN 
    :new.rscf_obj_stt := 1; 
  END IF; 

  IF :new.rscf_vers IS NULL THEN 
    :new.rscf_vers := 0; 
  END IF; 

  IF :new.rscf_vsbt IS NULL THEN 
    :new.rscf_vsbt := 1001; 
  END IF; 

  IF :new.rscf_las_act_by IS NULL THEN 
    :new.rscf_las_act_by := 1; 
  END IF; 

  IF :new.rscf_origcrtr IS NULL THEN 
    :new.rscf_origcrtr := 1; 
  END IF; 

  IF :new.rscf_origcrtrlogdin IS NULL THEN 
    :new.rscf_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rscf_las_act_by_logdin IS NULL THEN 
    :new.rscf_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_rslscnfg 
  ( 
   classtype, 
   rscf_c4c_id, 
   rscf_crtd, 
   rscf_las_act, 
   rscf_las_act_actrtyp, 
   rscf_obj_stt, 
   rscf_vers, 
   rscf_vsbt, 
   rscf_dltddt, 
   rscf_las_act_by, 
   rscf_origcrtr, 
   rscf_origcrtrlogdin, 
   rscf_las_act_by_logdin, 
   rscf_univid, 
   rscf_nam, 
   rscf_cmmt, 
   rscf_sytmdefd, 
   rscf_wkfwistcid, 
   rscf_cnv_id, 
   rscf_ownrchndflag, 
   rscf_ownrchndcnt, 
   rscf_rfngwkfwtsk, 
   rscf_prvsrfngtsk, 
   rscf_prvsrfngtsk_prmn, 
   rscf_ownr, 
   rscf_prvsownr, 
   rscf_prvssndr, 
   rscf_prvsownrprmn, 
   rscf_tnfr, 
   rscf_prvstnfr, 
   rscf_id, 
   valid_from, 
   valid_to , 
   rscf_audid, 
   rscf_prev_audid, 
   rscf_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.rscf_c4c_id,
   :new.rscf_crtd,
   :new.rscf_las_act,
   :new.rscf_las_act_actrtyp,
   :new.rscf_obj_stt,
   :new.rscf_vers,
   :new.rscf_vsbt,
   :new.rscf_dltddt,
   :new.rscf_las_act_by,
   :new.rscf_origcrtr,
   :new.rscf_origcrtrlogdin,
   :new.rscf_las_act_by_logdin,
   :new.rscf_univid,
   :new.rscf_nam,
   :new.rsc
f_cmmt,
   :new.rscf_sytmdefd,
   :new.rscf_wkfwistcid,
   :new.rscf_cnv_id,
   :new.rscf_ownrchndflag,
   :new.rscf_ownrchndcnt,
   :new.rscf_rfngwkfwtsk,
   :new.rscf_prvsrfngtsk,
   :new.rscf_prvsrfngtsk_prmn,
   :new.rscf_ownr,
   :new.rscf_prvsownr,
   :new.rscf_prvssndr,
   :new.rscf_prvsownrprmn,
   :new.rscf_tnfr,
   :new.rscf_prvstnfr, 
   :new.rscf_id, 
   :new.rscf_las_act_tim, 
   NULL, 
   u_rslscnfg.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
200
</td>
<td>
THH_C4C
</td>
<td>
TRG_RSCF_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RSLSCNFG
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rscf_auditupdate BEFORE
  UPDATE
    ON T_RSLSCNFG FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rscf_audid
      INTO
        last_audid
      FROM
        a_rslscnfg
      WHERE
        rscf_id            = :old.rscf_id
      AND rscf_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rscf_las_act_tim = :new.rscf_las_act_tim THEN
      UPDATE
        a_rslscnfg
      SET
        classtype              = :new.classtype,
        rscf_c4c_id            = :new.rscf_c4c_id,
        rscf_crtd              = :new.rscf_crtd,
        rscf_las_act           = :new.rscf_las_act,
        rscf_las_act_actrtyp   = :new.rscf_las_act_actrtyp,
        rscf_obj_stt           = :new.rscf_obj_stt,
        rscf_vers              = :new.rscf_vers,
        rscf_vsbt              = :new.rscf_vsbt,
        rscf_dltddt            = :new.rscf_dltddt,
        rscf_las_act_by        = :new.rscf_las_act_by,
        rscf_origcrtr          = :new.rscf_origcrtr,
        rscf_origcrtrlogdin    = :new.rscf_origcrtrlogdin,
        rscf_las_act_by_logdin = :new.rscf_las_act_by_logdin,
        rscf_univid            = :new.rscf_univid,
        rscf_nam               = :new.rscf_nam,
        rscf_cmmt              = :new.rscf_cmmt,
        rscf_sytmdefd          = :new.rscf_sytmdefd,
        rscf_wkfwistcid        = :new.rscf_wkfwistcid,
        rscf_cnv_id            = :new.rscf_cnv_id,
        rscf_ownrchndflag      = :new.rscf_ownrchndflag,
        rscf_ownrchndcnt       = :new.rscf_ownrchndcnt,
        rscf_rfngwkfwtsk       = :new.rscf_rfngwkfwtsk,
        rscf_prvsrfngtsk       = :new.rscf_prvsrfngtsk,
        rscf_prvsrfngtsk_prmn  = :new.rscf_prvsrfngtsk_prmn,
        rscf_ownr              = :new.rscf_ownr,
        rscf_prvsownr          = :new.rscf_prvsownr,
        rscf_prvssndr
     = :new.rscf_prvssndr,
        rscf_prvsownrprmn      = :new.rscf_prvsownrprmn,
        rscf_tnfr              = :new.rscf_tnfr,
        rscf_prvstnfr          = :new.rscf_prvstnfr
      WHERE
        rscf_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_rslscnfg
        (
          classtype,
          rscf_c4c_id,
          rscf_crtd,
          rscf_las_act,
          rscf_las_act_actrtyp,
          rscf_obj_stt,
          rscf_vers,
          rscf_vsbt,
          rscf_dltddt,
          rscf_las_act_by,
          rscf_origcrtr,
          rscf_origcrtrlogdin,
          rscf_las_act_by_logdin,
          rscf_univid,
          rscf_nam,
          rscf_cmmt,
          rscf_sytmdefd,
          rscf_wkfwistcid,
          rscf_cnv_id,
          rscf_ownrchndflag,
          rscf_ownrchndcnt,
          rscf_rfngwkfwtsk,
          rscf_prvsrfngtsk,
          rscf_prvsrfngtsk_prmn,
          rscf_ownr,
          rscf_prvsownr,
          rscf_prvssndr,
          rscf_prvsownrprmn,
          rscf_tnfr,
          rscf_prvstnfr,
          rscf_id,
          valid_from,
          valid_to,
          rscf_audid,
          rscf_prev_audid,
          rscf_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rscf_c4c_id,
          :new.rscf_crtd,
          :new.rscf_las_act,
          :new.rscf_las_act_actrtyp,
          :new.rscf_obj_stt,
          :new.rscf_vers,
          :new.rscf_vsbt,
          :new.rscf_dltddt,
          :new.rscf_las_act_by,
          :new.rscf_origcrtr,
          :new.rscf_origcrtrlogdin,
          :new.rscf_las_act_by_logdin,
          :new.rscf_univid,
          :new.rscf_nam,
          :new.rscf_cmmt,
          :new.rscf_sytmdefd,
          :new.rscf_wkfwistcid,
          :new.rscf_cnv_id,
          :new.rscf_ownrchndflag,
          :new.rscf_ownrchndcnt,
          :new.rscf_rfngw
kfwtsk,
          :new.rscf_prvsrfngtsk,
          :new.rscf_prvsrfngtsk_prmn,
          :new.rscf_ownr,
          :new.rscf_prvsownr,
          :new.rscf_prvssndr,
          :new.rscf_prvsownrprmn,
          :new.rscf_tnfr,
          :new.rscf_prvstnfr,
          :new.rscf_id,
          :new.rscf_las_act_tim,
          NULL,
          u_rslscnfg.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_rslscnfg
      SET
        valid_to        = :new.rscf_las_act_tim,
        rscf_next_audid = u_rslscnfg.CURRVAL
      WHERE
        rscf_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
201
</td>
<td>
THH_C4C
</td>
<td>
TRG_RUFU_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RTNGFLBKUSRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_RUFU_AUDITINSERT&quot; BEFORE INSERT ON T_RTNGFLBKUSRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.rufu_crtd IS NULL THEN 
    :new.rufu_crtd := curr_date; 
  END IF; 

  IF :new.rufu_las_act_tim IS NULL THEN 
    :new.rufu_las_act_tim := curr_date; 
  END IF; 

  IF :new.rufu_las_act IS NULL THEN 
    :new.rufu_las_act := 1; 
  END IF; 

  IF :new.rufu_obj_stt IS NULL THEN 
    :new.rufu_obj_stt := 1; 
  END IF; 

  IF :new.rufu_vers IS NULL THEN 
    :new.rufu_vers := 0; 
  END IF; 

  IF :new.rufu_vsbt IS NULL THEN 
    :new.rufu_vsbt := 1001; 
  END IF; 

  IF :new.rufu_las_act_by IS NULL THEN 
    :new.rufu_las_act_by := 1; 
  END IF; 

  IF :new.rufu_origcrtr IS NULL THEN 
    :new.rufu_origcrtr := 1; 
  END IF; 

  IF :new.rufu_origcrtrlogdin IS NULL THEN 
    :new.rufu_origcrtrlogdin := 1; 
  END IF; 

  IF :new.rufu_las_act_by_logdin IS NULL THEN 
    :new.rufu_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_rtngflbkusrs 
  ( 
   classtype, 
   rufu_c4c_id, 
   rufu_crtd, 
   rufu_las_act, 
   rufu_las_act_actrtyp, 
   rufu_obj_stt, 
   rufu_vers, 
   rufu_vsbt, 
   rufu_dltddt, 
   rufu_las_act_by, 
   rufu_origcrtr, 
   rufu_origcrtrlogdin, 
   rufu_las_act_by_logdin, 
   rufu_univid, 
   rufu_aumtrtngrule, 
   rufu_flbkusrs, 
   rufu_id, 
   valid_from, 
   valid_to , 
   rufu_audid, 
   rufu_prev_audid, 
   rufu_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.rufu_c4c_id,
   :new.rufu_crtd,
   :new.rufu_las_act,
   :new.rufu_las_act_actrtyp,
   :new.rufu_obj_stt,
   :new.rufu_vers,
   :new.rufu_vsbt,
   :new.rufu_dltddt,
   :new.rufu_las_act_by,
   :new.rufu_origcrtr,
   :new.rufu_origcrtrlogdin,
   :new.rufu_las_act_by_logdin,
   :new.rufu_univid,
   :new.rufu_aumtrtngrule,
   :new.rufu_flbkusrs, 
   :new.rufu_id, 
   :new.rufu_las_act_tim, 
   NULL, 
   u_rtngflbkusrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
202
</td>
<td>
THH_C4C
</td>
<td>
TRG_RUFU_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_RTNGFLBKUSRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_rufu_auditupdate BEFORE
  UPDATE
    ON T_RTNGFLBKUSRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        rufu_audid
      INTO
        last_audid
      FROM
        a_rtngflbkusrs
      WHERE
        rufu_id            = :old.rufu_id
      AND rufu_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.rufu_las_act_tim = :new.rufu_las_act_tim THEN
      UPDATE
        a_rtngflbkusrs
      SET
        classtype              = :new.classtype,
        rufu_c4c_id            = :new.rufu_c4c_id,
        rufu_crtd              = :new.rufu_crtd,
        rufu_las_act           = :new.rufu_las_act,
        rufu_las_act_actrtyp   = :new.rufu_las_act_actrtyp,
        rufu_obj_stt           = :new.rufu_obj_stt,
        rufu_vers              = :new.rufu_vers,
        rufu_vsbt              = :new.rufu_vsbt,
        rufu_dltddt            = :new.rufu_dltddt,
        rufu_las_act_by        = :new.rufu_las_act_by,
        rufu_origcrtr          = :new.rufu_origcrtr,
        rufu_origcrtrlogdin    = :new.rufu_origcrtrlogdin,
        rufu_las_act_by_logdin = :new.rufu_las_act_by_logdin,
        rufu_univid            = :new.rufu_univid,
        rufu_aumtrtngrule      = :new.rufu_aumtrtngrule,
        rufu_flbkusrs          = :new.rufu_flbkusrs
      WHERE
        rufu_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_rtngflbkusrs
        (
          classtype,
          rufu_c4c_id,
          rufu_crtd,
          rufu_las_act,
          rufu_las_act_actrtyp,
          rufu_obj_stt,
          rufu_vers,
          rufu_vsbt,
          rufu_dltddt,
          rufu_las_act_by,
          rufu_origcrtr,
          rufu_origcrtrlogdin,
          rufu_las_act_
by_logdin,
          rufu_univid,
          rufu_aumtrtngrule,
          rufu_flbkusrs,
          rufu_id,
          valid_from,
          valid_to,
          rufu_audid,
          rufu_prev_audid,
          rufu_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.rufu_c4c_id,
          :new.rufu_crtd,
          :new.rufu_las_act,
          :new.rufu_las_act_actrtyp,
          :new.rufu_obj_stt,
          :new.rufu_vers,
          :new.rufu_vsbt,
          :new.rufu_dltddt,
          :new.rufu_las_act_by,
          :new.rufu_origcrtr,
          :new.rufu_origcrtrlogdin,
          :new.rufu_las_act_by_logdin,
          :new.rufu_univid,
          :new.rufu_aumtrtngrule,
          :new.rufu_flbkusrs,
          :new.rufu_id,
          :new.rufu_las_act_tim,
          NULL,
          u_rtngflbkusrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_rtngflbkusrs
      SET
        valid_to        = :new.rufu_las_act_tim,
        rufu_next_audid = u_rtngflbkusrs.CURRVAL
      WHERE
        rufu_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
203
</td>
<td>
THH_C4C
</td>
<td>
TRG_STCB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTCAREBEAN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_STCB_AUDITINSERT&quot; BEFORE INSERT ON T_SENTCAREBEAN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.stcb_crtd IS NULL THEN 
    :new.stcb_crtd := curr_date; 
  END IF; 

  IF :new.stcb_las_act_tim IS NULL THEN 
    :new.stcb_las_act_tim := curr_date; 
  END IF; 

  IF :new.stcb_las_act IS NULL THEN 
    :new.stcb_las_act := 1; 
  END IF; 

  IF :new.stcb_obj_stt IS NULL THEN 
    :new.stcb_obj_stt := 1; 
  END IF; 

  IF :new.stcb_vers IS NULL THEN 
    :new.stcb_vers := 0; 
  END IF; 

  IF :new.stcb_vsbt IS NULL THEN 
    :new.stcb_vsbt := 1001; 
  END IF; 

  IF :new.stcb_las_act_by IS NULL THEN 
    :new.stcb_las_act_by := 1; 
  END IF; 

  IF :new.stcb_origcrtr IS NULL THEN 
    :new.stcb_origcrtr := 1; 
  END IF; 

  IF :new.stcb_origcrtrlogdin IS NULL THEN 
    :new.stcb_origcrtrlogdin := 1; 
  END IF; 

  IF :new.stcb_las_act_by_logdin IS NULL THEN 
    :new.stcb_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_sentcarebean 
  ( 
   classtype, 
   stcb_c4c_id, 
   stcb_crtd, 
   stcb_las_act, 
   stcb_las_act_actrtyp, 
   stcb_obj_stt, 
   stcb_vers, 
   stcb_vsbt, 
   stcb_dltddt, 
   stcb_las_act_by, 
   stcb_origcrtr, 
   stcb_origcrtrlogdin, 
   stcb_las_act_by_logdin, 
   stcb_univid, 
   stcb_nam, 
   stcb_prus, 
   stcb_sndrspcddts, 
   stcb_wlcmtxt, 
   stcb_rcmd, 
   stcb_sent, 
   stcb_srtd, 
   stcb_tmtd, 
   stcb_otcm, 
   stcb_las_rtedto_gkprat, 
   stcb_las_gkpract_at, 
   stcb_gkprotcm, 
   stcb_wkfwistcid, 
   stcb_cnv_id, 
   stcb_ownrchndflag, 
   stcb_ownrchndcnt, 
   stcb_src__src_typ, 
   stcb_origrcpt, 
   stcb_las_gkpr, 
   stcb_rfngwkfwtsk, 
   stcb_prvsrfngtsk, 
   stcb_prvsrfngtsk_prmn, 
   stcb_ownr, 
   stcb_prvsownr, 
   stcb_prvssndr, 
   stcb_prvsownrprmn, 
   stcb_tnfr, 
   stcb_prvstnfr, 
   stcb_src__asmtcarecalc, 
   stcb_src__pat_id_qry, 
   stcb_affn_um_evntreqt, 
   stcb_affn_um_extn, 
   stcb_affn_pvdr, 
   stcb_affn_cm, 
   stcb_affn_memb, 
   stcb_affn_um_evnt, 
   stcb_caudby, 
   stcb_cstmflds, 
   stcb_grp, 

stcb_carebean, 
   stcb_taknasmtcc, 
   stcb_taknasmtcc_base, 
   stcb_id, 
   valid_from, 
   valid_to , 
   stcb_audid, 
   stcb_prev_audid, 
   stcb_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.stcb_c4c_id,
   :new.stcb_crtd,
   :new.stcb_las_act,
   :new.stcb_las_act_actrtyp,
   :new.stcb_obj_stt,
   :new.stcb_vers,
   :new.stcb_vsbt,
   :new.stcb_dltddt,
   :new.stcb_las_act_by,
   :new.stcb_origcrtr,
   :new.stcb_origcrtrlogdin,
   :new.stcb_las_act_by_logdin,
   :new.stcb_univid,
   :new.stcb_nam,
   :new.stcb_prus,
   :new.stcb_sndrspcddts,
   :new.stcb_wlcmtxt,
   :new.stcb_rcmd,
   :new.stcb_sent,
   :new.stcb_srtd,
   :new.stcb_tmtd,
   :new.stcb_otcm,
   :new.stcb_las_rtedto_gkprat,
   :new.stcb_las_gkpract_at,
   :new.stcb_gkprotcm,
   :new.stcb_wkfwistcid,
   :new.stcb_cnv_id,
   :new.stcb_ownrchndflag,
   :new.stcb_ownrchndcnt,
   :new.stcb_src__src_typ,
   :new.stcb_origrcpt,
   :new.stcb_las_gkpr,
   :new.stcb_rfngwkfwtsk,
   :new.stcb_prvsrfngtsk,
   :new.stcb_prvsrfngtsk_prmn,
   :new.stcb_ownr,
   :new.stcb_prvsownr,
   :new.stcb_prvssndr,
   :new.stcb_prvsownrprmn,
   :new.stcb_tnfr,
   :new.stcb_prvstnfr,
   :new.stcb_src__asmtcarecalc,
   :new.stcb_src__pat_id_qry,
   :new.stcb_affn_um_evntreqt,
   :new.stcb_affn_um_extn,
   :new.stcb_affn_pvdr,
   :new.stcb_affn_cm,
   :new.stcb_affn_memb,
   :new.stcb_affn_um_evnt,
   :new.stcb_caudby,
   :new.stcb_cstmflds,
   :new.stcb_grp,
   :new.stcb_carebean,
   :new.stcb_taknasmtcc,
   :new.stcb_taknasmtcc_base, 
   :new.stcb_id, 
   :new.stcb_las_act_tim, 
   NULL, 
   u_sentcarebean.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
204
</td>
<td>
THH_C4C
</td>
<td>
TRG_STCB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTCAREBEAN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_stcb_auditupdate BEFORE
  UPDATE
    ON T_SENTCAREBEAN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        stcb_audid
      INTO
        last_audid
      FROM
        a_sentcarebean
      WHERE
        stcb_id            = :old.stcb_id
      AND stcb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.stcb_las_act_tim = :new.stcb_las_act_tim THEN
      UPDATE
        a_sentcarebean
      SET
        classtype              = :new.classtype,
        stcb_c4c_id            = :new.stcb_c4c_id,
        stcb_crtd              = :new.stcb_crtd,
        stcb_las_act           = :new.stcb_las_act,
        stcb_las_act_actrtyp   = :new.stcb_las_act_actrtyp,
        stcb_obj_stt           = :new.stcb_obj_stt,
        stcb_vers              = :new.stcb_vers,
        stcb_vsbt              = :new.stcb_vsbt,
        stcb_dltddt            = :new.stcb_dltddt,
        stcb_las_act_by        = :new.stcb_las_act_by,
        stcb_origcrtr          = :new.stcb_origcrtr,
        stcb_origcrtrlogdin    = :new.stcb_origcrtrlogdin,
        stcb_las_act_by_logdin = :new.stcb_las_act_by_logdin,
        stcb_univid            = :new.stcb_univid,
        stcb_nam               = :new.stcb_nam,
        stcb_prus              = :new.stcb_prus,
        stcb_sndrspcddts       = :new.stcb_sndrspcddts,
        stcb_wlcmtxt           = :new.stcb_wlcmtxt,
        stcb_rcmd              = :new.stcb_rcmd,
        stcb_sent              = :new.stcb_sent,
        stcb_srtd              = :new.stcb_srtd,
        stcb_tmtd              = :new.stcb_tmtd,
        stcb_otcm              = :new.stcb_otcm,
        stcb_las_rtedto_gkprat = :new.stcb_las_rtedto_gkprat,
        stcb_las_gkpract_at    = :new.stcb_las_gkpract_at,
        stcb_gkprotcm          = :new.stcb_gkprotcm,
        stcb_wkfwistcid        = :new.
stcb_wkfwistcid,
        stcb_cnv_id            = :new.stcb_cnv_id,
        stcb_ownrchndflag      = :new.stcb_ownrchndflag,
        stcb_ownrchndcnt       = :new.stcb_ownrchndcnt,
        stcb_src__src_typ      = :new.stcb_src__src_typ,
        stcb_origrcpt          = :new.stcb_origrcpt,
        stcb_las_gkpr          = :new.stcb_las_gkpr,
        stcb_rfngwkfwtsk       = :new.stcb_rfngwkfwtsk,
        stcb_prvsrfngtsk       = :new.stcb_prvsrfngtsk,
        stcb_prvsrfngtsk_prmn  = :new.stcb_prvsrfngtsk_prmn,
        stcb_ownr              = :new.stcb_ownr,
        stcb_prvsownr          = :new.stcb_prvsownr,
        stcb_prvssndr          = :new.stcb_prvssndr,
        stcb_prvsownrprmn      = :new.stcb_prvsownrprmn,
        stcb_tnfr              = :new.stcb_tnfr,
        stcb_prvstnfr          = :new.stcb_prvstnfr,
        stcb_src__asmtcarecalc = :new.stcb_src__asmtcarecalc,
        stcb_src__pat_id_qry   = :new.stcb_src__pat_id_qry,
        stcb_affn_um_evntreqt  = :new.stcb_affn_um_evntreqt,
        stcb_affn_um_extn      = :new.stcb_affn_um_extn,
        stcb_affn_pvdr         = :new.stcb_affn_pvdr,
        stcb_affn_cm           = :new.stcb_affn_cm,
        stcb_affn_memb         = :new.stcb_affn_memb,
        stcb_affn_um_evnt      = :new.stcb_affn_um_evnt,
        stcb_caudby            = :new.stcb_caudby,
        stcb_cstmflds          = :new.stcb_cstmflds,
        stcb_grp               = :new.stcb_grp,
        stcb_carebean          = :new.stcb_carebean,
        stcb_taknasmtcc        = :new.stcb_taknasmtcc,
        stcb_taknasmtcc_base   = :new.stcb_taknasmtcc_base
      WHERE
        stcb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sentcarebean
        (
          classtype,
          stcb_c4c_id,
          stcb_crtd,
          stcb_las_act,
          stcb_las_act_actrtyp,
          stcb_obj_stt,
          s
tcb_vers,
          stcb_vsbt,
          stcb_dltddt,
          stcb_las_act_by,
          stcb_origcrtr,
          stcb_origcrtrlogdin,
          stcb_las_act_by_logdin,
          stcb_univid,
          stcb_nam,
          stcb_prus,
          stcb_sndrspcddts,
          stcb_wlcmtxt,
          stcb_rcmd,
          stcb_sent,
          stcb_srtd,
          stcb_tmtd,
          stcb_otcm,
          stcb_las_rtedto_gkprat,
          stcb_las_gkpract_at,
          stcb_gkprotcm,
          stcb_wkfwistcid,
          stcb_cnv_id,
          stcb_ownrchndflag,
          stcb_ownrchndcnt,
          stcb_src__src_typ,
          stcb_origrcpt,
          stcb_las_gkpr,
          stcb_rfngwkfwtsk,
          stcb_prvsrfngtsk,
          stcb_prvsrfngtsk_prmn,
          stcb_ownr,
          stcb_prvsownr,
          stcb_prvssndr,
          stcb_prvsownrprmn,
          stcb_tnfr,
          stcb_prvstnfr,
          stcb_src__asmtcarecalc,
          stcb_src__pat_id_qry,
          stcb_affn_um_evntreqt,
          stcb_affn_um_extn,
          stcb_affn_pvdr,
          stcb_affn_cm,
          stcb_affn_memb,
          stcb_affn_um_evnt,
          stcb_caudby,
          stcb_cstmflds,
          stcb_grp,
          stcb_carebean,
          stcb_taknasmtcc,
          stcb_taknasmtcc_base,
          stcb_id,
          valid_from,
          valid_to,
          stcb_audid,
          stcb_prev_audid,
          stcb_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.stcb_c4c_id,
          :new.stcb_crtd,
          :new.stcb_las_act,
          :new.stcb_las_act_actrtyp,
          :new.stcb_obj_stt,
          :new.stcb_vers,
          :new.stcb_vsbt,
          :new.stcb_dltddt,
          :new.stcb_las_act_by,
          :new.stcb_origcrtr,
          :new.stcb_origcrtrlogdin,
          :new.stcb_las_act_by_logdin,
          :new.stcb_univid,
          :new.stcb_nam,
          :new.stcb_prus,
          :new.stcb_sndrspcddts,
          :new.stcb_wlcmtxt,

  :new.stcb_rcmd,
          :new.stcb_sent,
          :new.stcb_srtd,
          :new.stcb_tmtd,
          :new.stcb_otcm,
          :new.stcb_las_rtedto_gkprat,
          :new.stcb_las_gkpract_at,
          :new.stcb_gkprotcm,
          :new.stcb_wkfwistcid,
          :new.stcb_cnv_id,
          :new.stcb_ownrchndflag,
          :new.stcb_ownrchndcnt,
          :new.stcb_src__src_typ,
          :new.stcb_origrcpt,
          :new.stcb_las_gkpr,
          :new.stcb_rfngwkfwtsk,
          :new.stcb_prvsrfngtsk,
          :new.stcb_prvsrfngtsk_prmn,
          :new.stcb_ownr,
          :new.stcb_prvsownr,
          :new.stcb_prvssndr,
          :new.stcb_prvsownrprmn,
          :new.stcb_tnfr,
          :new.stcb_prvstnfr,
          :new.stcb_src__asmtcarecalc,
          :new.stcb_src__pat_id_qry,
          :new.stcb_affn_um_evntreqt,
          :new.stcb_affn_um_extn,
          :new.stcb_affn_pvdr,
          :new.stcb_affn_cm,
          :new.stcb_affn_memb,
          :new.stcb_affn_um_evnt,
          :new.stcb_caudby,
          :new.stcb_cstmflds,
          :new.stcb_grp,
          :new.stcb_carebean,
          :new.stcb_taknasmtcc,
          :new.stcb_taknasmtcc_base,
          :new.stcb_id,
          :new.stcb_las_act_tim,
          NULL,
          u_sentcarebean.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_sentcarebean
      SET
        valid_to        = :new.stcb_las_act_tim,
        stcb_next_audid = u_sentcarebean.CURRVAL
      WHERE
        stcb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
205
</td>
<td>
THH_C4C
</td>
<td>
TRG_SELC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEDNLCNTT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SELC_AUDITINSERT&quot; BEFORE INSERT ON T_SENTEDNLCNTT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.selc_crtd IS NULL THEN 
    :new.selc_crtd := curr_date; 
  END IF; 

  IF :new.selc_las_act_tim IS NULL THEN 
    :new.selc_las_act_tim := curr_date; 
  END IF; 

  IF :new.selc_las_act IS NULL THEN 
    :new.selc_las_act := 1; 
  END IF; 

  IF :new.selc_obj_stt IS NULL THEN 
    :new.selc_obj_stt := 1; 
  END IF; 

  IF :new.selc_vers IS NULL THEN 
    :new.selc_vers := 0; 
  END IF; 

  IF :new.selc_vsbt IS NULL THEN 
    :new.selc_vsbt := 1001; 
  END IF; 

  IF :new.selc_las_act_by IS NULL THEN 
    :new.selc_las_act_by := 1; 
  END IF; 

  IF :new.selc_origcrtr IS NULL THEN 
    :new.selc_origcrtr := 1; 
  END IF; 

  IF :new.selc_origcrtrlogdin IS NULL THEN 
    :new.selc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.selc_las_act_by_logdin IS NULL THEN 
    :new.selc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_sentednlcntt 
  ( 
   classtype, 
   selc_c4c_id, 
   selc_crtd, 
   selc_las_act, 
   selc_las_act_actrtyp, 
   selc_obj_stt, 
   selc_vers, 
   selc_vsbt, 
   selc_dltddt, 
   selc_las_act_by, 
   selc_origcrtr, 
   selc_origcrtrlogdin, 
   selc_las_act_by_logdin, 
   selc_univid, 
   selc_wkfwistcid, 
   selc_cnv_id, 
   selc_ownrchndflag, 
   selc_ownrchndcnt, 
   selc_vwd, 
   selc_rfngwkfwtsk, 
   selc_prvsrfngtsk, 
   selc_prvsrfngtsk_prmn, 
   selc_ownr, 
   selc_prvsownr, 
   selc_prvssndr, 
   selc_prvsownrprmn, 
   selc_tnfr, 
   selc_prvstnfr, 
   selc_ednlcntt, 
   selc_senttsk, 
   selc_id, 
   valid_from, 
   valid_to , 
   selc_audid, 
   selc_prev_audid, 
   selc_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.selc_c4c_id,
   :new.selc_crtd,
   :new.selc_las_act,
   :new.selc_las_act_actrtyp,
   :new.selc_obj_stt,
   :new.selc_vers,
   :new.selc_vsbt,
   :new.selc_dltddt,
   :new.selc_las_act_by,
   :new.selc_origcrtr,
   :new.selc_origcrtrlogdin,
   :new.selc_las_act_by_logdin,
   :new.selc_univid,
   :new.selc_wkfwistci
d,
   :new.selc_cnv_id,
   :new.selc_ownrchndflag,
   :new.selc_ownrchndcnt,
   :new.selc_vwd,
   :new.selc_rfngwkfwtsk,
   :new.selc_prvsrfngtsk,
   :new.selc_prvsrfngtsk_prmn,
   :new.selc_ownr,
   :new.selc_prvsownr,
   :new.selc_prvssndr,
   :new.selc_prvsownrprmn,
   :new.selc_tnfr,
   :new.selc_prvstnfr,
   :new.selc_ednlcntt,
   :new.selc_senttsk, 
   :new.selc_id, 
   :new.selc_las_act_tim, 
   NULL, 
   u_sentednlcntt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
206
</td>
<td>
THH_C4C
</td>
<td>
TRG_SELC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEDNLCNTT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_selc_auditupdate BEFORE
  UPDATE
    ON T_SENTEDNLCNTT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        selc_audid
      INTO
        last_audid
      FROM
        a_sentednlcntt
      WHERE
        selc_id            = :old.selc_id
      AND selc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.selc_las_act_tim = :new.selc_las_act_tim THEN
      UPDATE
        a_sentednlcntt
      SET
        classtype              = :new.classtype,
        selc_c4c_id            = :new.selc_c4c_id,
        selc_crtd              = :new.selc_crtd,
        selc_las_act           = :new.selc_las_act,
        selc_las_act_actrtyp   = :new.selc_las_act_actrtyp,
        selc_obj_stt           = :new.selc_obj_stt,
        selc_vers              = :new.selc_vers,
        selc_vsbt              = :new.selc_vsbt,
        selc_dltddt            = :new.selc_dltddt,
        selc_las_act_by        = :new.selc_las_act_by,
        selc_origcrtr          = :new.selc_origcrtr,
        selc_origcrtrlogdin    = :new.selc_origcrtrlogdin,
        selc_las_act_by_logdin = :new.selc_las_act_by_logdin,
        selc_univid            = :new.selc_univid,
        selc_wkfwistcid        = :new.selc_wkfwistcid,
        selc_cnv_id            = :new.selc_cnv_id,
        selc_ownrchndflag      = :new.selc_ownrchndflag,
        selc_ownrchndcnt       = :new.selc_ownrchndcnt,
        selc_vwd               = :new.selc_vwd,
        selc_rfngwkfwtsk       = :new.selc_rfngwkfwtsk,
        selc_prvsrfngtsk       = :new.selc_prvsrfngtsk,
        selc_prvsrfngtsk_prmn  = :new.selc_prvsrfngtsk_prmn,
        selc_ownr              = :new.selc_ownr,
        selc_prvsownr          = :new.selc_prvsownr,
        selc_prvssndr          = :new.selc_prvssndr,
        selc_prvsownrprmn      = :new.selc_prvsownrprmn,
        se
lc_tnfr              = :new.selc_tnfr,
        selc_prvstnfr          = :new.selc_prvstnfr,
        selc_ednlcntt          = :new.selc_ednlcntt,
        selc_senttsk           = :new.selc_senttsk
      WHERE
        selc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sentednlcntt
        (
          classtype,
          selc_c4c_id,
          selc_crtd,
          selc_las_act,
          selc_las_act_actrtyp,
          selc_obj_stt,
          selc_vers,
          selc_vsbt,
          selc_dltddt,
          selc_las_act_by,
          selc_origcrtr,
          selc_origcrtrlogdin,
          selc_las_act_by_logdin,
          selc_univid,
          selc_wkfwistcid,
          selc_cnv_id,
          selc_ownrchndflag,
          selc_ownrchndcnt,
          selc_vwd,
          selc_rfngwkfwtsk,
          selc_prvsrfngtsk,
          selc_prvsrfngtsk_prmn,
          selc_ownr,
          selc_prvsownr,
          selc_prvssndr,
          selc_prvsownrprmn,
          selc_tnfr,
          selc_prvstnfr,
          selc_ednlcntt,
          selc_senttsk,
          selc_id,
          valid_from,
          valid_to,
          selc_audid,
          selc_prev_audid,
          selc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.selc_c4c_id,
          :new.selc_crtd,
          :new.selc_las_act,
          :new.selc_las_act_actrtyp,
          :new.selc_obj_stt,
          :new.selc_vers,
          :new.selc_vsbt,
          :new.selc_dltddt,
          :new.selc_las_act_by,
          :new.selc_origcrtr,
          :new.selc_origcrtrlogdin,
          :new.selc_las_act_by_logdin,
          :new.selc_univid,
          :new.selc_wkfwistcid,
          :new.selc_cnv_id,
          :new.selc_ownrchndflag,
          :new.selc_ownrchndcnt,
          :new.selc_vwd,
          :new.selc_rfngwkfwtsk,
          :new.selc_prvsrfngts
k,
          :new.selc_prvsrfngtsk_prmn,
          :new.selc_ownr,
          :new.selc_prvsownr,
          :new.selc_prvssndr,
          :new.selc_prvsownrprmn,
          :new.selc_tnfr,
          :new.selc_prvstnfr,
          :new.selc_ednlcntt,
          :new.selc_senttsk,
          :new.selc_id,
          :new.selc_las_act_tim,
          NULL,
          u_sentednlcntt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_sentednlcntt
      SET
        valid_to        = :new.selc_las_act_tim,
        selc_next_audid = u_sentednlcntt.CURRVAL
      WHERE
        selc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
207
</td>
<td>
THH_C4C
</td>
<td>
TRG_STEL_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEMAL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_STEL_AUDITINSERT&quot; BEFORE INSERT ON T_SENTEMAL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.stel_crtd IS NULL THEN 
    :new.stel_crtd := curr_date; 
  END IF; 

  IF :new.stel_las_act_tim IS NULL THEN 
    :new.stel_las_act_tim := curr_date; 
  END IF; 

  IF :new.stel_las_act IS NULL THEN 
    :new.stel_las_act := 1; 
  END IF; 

  IF :new.stel_obj_stt IS NULL THEN 
    :new.stel_obj_stt := 1; 
  END IF; 

  IF :new.stel_vers IS NULL THEN 
    :new.stel_vers := 0; 
  END IF; 

  IF :new.stel_vsbt IS NULL THEN 
    :new.stel_vsbt := 1001; 
  END IF; 

  IF :new.stel_las_act_by IS NULL THEN 
    :new.stel_las_act_by := 1; 
  END IF; 

  IF :new.stel_origcrtr IS NULL THEN 
    :new.stel_origcrtr := 1; 
  END IF; 

  IF :new.stel_origcrtrlogdin IS NULL THEN 
    :new.stel_origcrtrlogdin := 1; 
  END IF; 

  IF :new.stel_las_act_by_logdin IS NULL THEN 
    :new.stel_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_sentemal 
  ( 
   classtype, 
   stel_c4c_id, 
   stel_crtd, 
   stel_las_act, 
   stel_las_act_actrtyp, 
   stel_obj_stt, 
   stel_vers, 
   stel_vsbt, 
   stel_dltddt, 
   stel_las_act_by, 
   stel_origcrtr, 
   stel_origcrtrlogdin, 
   stel_las_act_by_logdin, 
   stel_univid, 
   stel_cnxt_um_evntreqt, 
   stel_cnxt_um_extn, 
   stel_cnxt_pvdr, 
   stel_cnxt_cm, 
   stel_cnxt_memb, 
   stel_cnxt_um_evnt, 
   stel_cnxt_apl, 
   stel_cnxt_um_dgis, 
   stel_cnxt_mdclsrvc, 
   stel_senttsk, 
   stel_grp_cnxt, 
   stel_id, 
   valid_from, 
   valid_to , 
   stel_audid, 
   stel_prev_audid, 
   stel_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.stel_c4c_id,
   :new.stel_crtd,
   :new.stel_las_act,
   :new.stel_las_act_actrtyp,
   :new.stel_obj_stt,
   :new.stel_vers,
   :new.stel_vsbt,
   :new.stel_dltddt,
   :new.stel_las_act_by,
   :new.stel_origcrtr,
   :new.stel_origcrtrlogdin,
   :new.stel_las_act_by_logdin,
   :new.stel_univid,
   :new.stel_cnxt_um_evntreqt,
   :new.stel_cnxt_um_extn,
   :new.stel_cnxt_pvdr,
   :new.stel_cnxt_cm,

:new.stel_cnxt_memb,
   :new.stel_cnxt_um_evnt,
   :new.stel_cnxt_apl,
   :new.stel_cnxt_um_dgis,
   :new.stel_cnxt_mdclsrvc,
   :new.stel_senttsk,
   :new.stel_grp_cnxt, 
   :new.stel_id, 
   :new.stel_las_act_tim, 
   NULL, 
   u_sentemal.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
208
</td>
<td>
THH_C4C
</td>
<td>
TRG_STEL_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEMAL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_stel_auditupdate BEFORE
  UPDATE
    ON T_SENTEMAL FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        stel_audid
      INTO
        last_audid
      FROM
        a_sentemal
      WHERE
        stel_id      = :old.stel_id
      AND valid_from = :old.stel_las_act_tim FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.stel_las_act_tim = :new.stel_las_act_tim THEN
      UPDATE
        a_sentemal
      SET
        classtype              = :new.classtype,
        stel_c4c_id            = :new.stel_c4c_id,
        stel_crtd              = :new.stel_crtd,
        stel_las_act           = :new.stel_las_act,
        stel_las_act_actrtyp   = :new.stel_las_act_actrtyp,
        stel_obj_stt           = :new.stel_obj_stt,
        stel_vers              = :new.stel_vers,
        stel_vsbt              = :new.stel_vsbt,
        stel_dltddt            = :new.stel_dltddt,
        stel_las_act_by        = :new.stel_las_act_by,
        stel_origcrtr          = :new.stel_origcrtr,
        stel_origcrtrlogdin    = :new.stel_origcrtrlogdin,
        stel_las_act_by_logdin = :new.stel_las_act_by_logdin,
        stel_univid            = :new.stel_univid,
        stel_cnxt_um_evntreqt  = :new.stel_cnxt_um_evntreqt,
        stel_cnxt_um_extn      = :new.stel_cnxt_um_extn,
        stel_cnxt_pvdr         = :new.stel_cnxt_pvdr,
        stel_cnxt_cm           = :new.stel_cnxt_cm,
        stel_cnxt_memb         = :new.stel_cnxt_memb,
        stel_cnxt_um_evnt      = :new.stel_cnxt_um_evnt,
        stel_cnxt_apl          = :new.stel_cnxt_apl,
        stel_cnxt_um_dgis      = :new.stel_cnxt_um_dgis,
        stel_cnxt_mdclsrvc     = :new.stel_cnxt_mdclsrvc,
        stel_senttsk           = :new.stel_senttsk,
        stel_grp_cnxt          = :new.stel_grp_cnxt
      WHERE
        stel_audid = last_audid;
      /* LastActionTime has changed - new tr
ansaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sentemal
        (
          classtype,
          stel_c4c_id,
          stel_crtd,
          stel_las_act,
          stel_las_act_actrtyp,
          stel_obj_stt,
          stel_vers,
          stel_vsbt,
          stel_dltddt,
          stel_las_act_by,
          stel_origcrtr,
          stel_origcrtrlogdin,
          stel_las_act_by_logdin,
          stel_univid,
          stel_cnxt_um_evntreqt,
          stel_cnxt_um_extn,
          stel_cnxt_pvdr,
          stel_cnxt_cm,
          stel_cnxt_memb,
          stel_cnxt_um_evnt,
          stel_cnxt_apl,
          stel_cnxt_um_dgis,
          stel_cnxt_mdclsrvc,
          stel_senttsk,
          stel_grp_cnxt,
          stel_id,
          valid_from,
          valid_to,
          stel_audid,
          stel_prev_audid,
          stel_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.stel_c4c_id,
          :new.stel_crtd,
          :new.stel_las_act,
          :new.stel_las_act_actrtyp,
          :new.stel_obj_stt,
          :new.stel_vers,
          :new.stel_vsbt,
          :new.stel_dltddt,
          :new.stel_las_act_by,
          :new.stel_origcrtr,
          :new.stel_origcrtrlogdin,
          :new.stel_las_act_by_logdin,
          :new.stel_univid,
          :new.stel_cnxt_um_evntreqt,
          :new.stel_cnxt_um_extn,
          :new.stel_cnxt_pvdr,
          :new.stel_cnxt_cm,
          :new.stel_cnxt_memb,
          :new.stel_cnxt_um_evnt,
          :new.stel_cnxt_apl,
          :new.stel_cnxt_um_dgis,
          :new.stel_cnxt_mdclsrvc,
          :new.stel_senttsk,
          :new.stel_grp_cnxt,
          :new.stel_id,
          :new.stel_las_act_tim,
          NULL,
          u_sentemal.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted
record's sequence number
      */
      UPDATE
        a_sentemal
      SET
        valid_to        = :new.stel_las_act_tim,
        stel_next_audid = u_sentemal.CURRVAL
      WHERE
        stel_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
209
</td>
<td>
THH_C4C
</td>
<td>
TRG_SERS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEMALRCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SERS_AUDITINSERT&quot; BEFORE INSERT ON T_SENTEMALRCTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.sers_crtd IS NULL THEN 
    :new.sers_crtd := curr_date; 
  END IF; 

  IF :new.sers_las_act_tim IS NULL THEN 
    :new.sers_las_act_tim := curr_date; 
  END IF; 

  IF :new.sers_las_act IS NULL THEN 
    :new.sers_las_act := 1; 
  END IF; 

  IF :new.sers_obj_stt IS NULL THEN 
    :new.sers_obj_stt := 1; 
  END IF; 

  IF :new.sers_vers IS NULL THEN 
    :new.sers_vers := 0; 
  END IF; 

  IF :new.sers_vsbt IS NULL THEN 
    :new.sers_vsbt := 1001; 
  END IF; 

  IF :new.sers_las_act_by IS NULL THEN 
    :new.sers_las_act_by := 1; 
  END IF; 

  IF :new.sers_origcrtr IS NULL THEN 
    :new.sers_origcrtr := 1; 
  END IF; 

  IF :new.sers_origcrtrlogdin IS NULL THEN 
    :new.sers_origcrtrlogdin := 1; 
  END IF; 

  IF :new.sers_las_act_by_logdin IS NULL THEN 
    :new.sers_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_sentemalrcts 
  ( 
   classtype, 
   sers_c4c_id, 
   sers_crtd, 
   sers_las_act, 
   sers_las_act_actrtyp, 
   sers_obj_stt, 
   sers_vers, 
   sers_vsbt, 
   sers_dltddt, 
   sers_las_act_by, 
   sers_origcrtr, 
   sers_origcrtrlogdin, 
   sers_las_act_by_logdin, 
   sers_univid, 
   sers_sentemal, 
   sers_rcts, 
   sers_id, 
   valid_from, 
   valid_to , 
   sers_audid, 
   sers_prev_audid, 
   sers_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.sers_c4c_id,
   :new.sers_crtd,
   :new.sers_las_act,
   :new.sers_las_act_actrtyp,
   :new.sers_obj_stt,
   :new.sers_vers,
   :new.sers_vsbt,
   :new.sers_dltddt,
   :new.sers_las_act_by,
   :new.sers_origcrtr,
   :new.sers_origcrtrlogdin,
   :new.sers_las_act_by_logdin,
   :new.sers_univid,
   :new.sers_sentemal,
   :new.sers_rcts, 
   :new.sers_id, 
   :new.sers_las_act_tim, 
   NULL, 
   u_sentemalrcts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
210
</td>
<td>
THH_C4C
</td>
<td>
TRG_SERS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTEMALRCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_sers_auditupdate BEFORE
  UPDATE
    ON T_SENTEMALRCTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        sers_audid
      INTO
        last_audid
      FROM
        a_sentemalrcts
      WHERE
        sers_id            = :old.sers_id
      AND sers_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.sers_las_act_tim = :new.sers_las_act_tim THEN
      UPDATE
        a_sentemalrcts
      SET
        classtype              = :new.classtype,
        sers_c4c_id            = :new.sers_c4c_id,
        sers_crtd              = :new.sers_crtd,
        sers_las_act           = :new.sers_las_act,
        sers_las_act_actrtyp   = :new.sers_las_act_actrtyp,
        sers_obj_stt           = :new.sers_obj_stt,
        sers_vers              = :new.sers_vers,
        sers_vsbt              = :new.sers_vsbt,
        sers_dltddt            = :new.sers_dltddt,
        sers_las_act_by        = :new.sers_las_act_by,
        sers_origcrtr          = :new.sers_origcrtr,
        sers_origcrtrlogdin    = :new.sers_origcrtrlogdin,
        sers_las_act_by_logdin = :new.sers_las_act_by_logdin,
        sers_univid            = :new.sers_univid,
        sers_sentemal          = :new.sers_sentemal,
        sers_rcts              = :new.sers_rcts
      WHERE
        sers_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sentemalrcts
        (
          classtype,
          sers_c4c_id,
          sers_crtd,
          sers_las_act,
          sers_las_act_actrtyp,
          sers_obj_stt,
          sers_vers,
          sers_vsbt,
          sers_dltddt,
          sers_las_act_by,
          sers_origcrtr,
          sers_origcrtrlogdin,
          sers_las_act_by_logdi
n,
          sers_univid,
          sers_sentemal,
          sers_rcts,
          sers_id,
          valid_from,
          valid_to,
          sers_audid,
          sers_prev_audid,
          sers_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.sers_c4c_id,
          :new.sers_crtd,
          :new.sers_las_act,
          :new.sers_las_act_actrtyp,
          :new.sers_obj_stt,
          :new.sers_vers,
          :new.sers_vsbt,
          :new.sers_dltddt,
          :new.sers_las_act_by,
          :new.sers_origcrtr,
          :new.sers_origcrtrlogdin,
          :new.sers_las_act_by_logdin,
          :new.sers_univid,
          :new.sers_sentemal,
          :new.sers_rcts,
          :new.sers_id,
          :new.sers_las_act_tim,
          NULL,
          u_sentemalrcts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_sentemalrcts
      SET
        valid_to        = :new.sers_las_act_tim,
        sers_next_audid = u_sentemalrcts.CURRVAL
      WHERE
        sers_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
211
</td>
<td>
THH_C4C
</td>
<td>
TRG_SLTT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTLTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_sltt_auditinsert BEFORE INSERT ON T_SENTLTR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.sltt_crtd IS NULL THEN
    :new.sltt_crtd := curr_date;
  END IF;

  IF :new.sltt_las_act_tim IS NULL THEN
    :new.sltt_las_act_tim := curr_date;
  END IF;

  IF :new.sltt_las_act IS NULL THEN
    :new.sltt_las_act := 1;
  END IF;

  IF :new.sltt_obj_stt IS NULL THEN
    :new.sltt_obj_stt := 1;
  END IF;

  IF :new.sltt_vers IS NULL THEN
    :new.sltt_vers := 0;
  END IF;

  IF :new.sltt_vsbt IS NULL THEN
    :new.sltt_vsbt := 1001;
  END IF;

  IF :new.sltt_las_act_by IS NULL THEN
    :new.sltt_las_act_by := 1;
  END IF;

  IF :new.sltt_origcrtr IS NULL THEN
    :new.sltt_origcrtr := 1;
  END IF;

  IF :new.sltt_origcrtrlogdin IS NULL THEN
    :new.sltt_origcrtrlogdin := 1;
  END IF;

  IF :new.sltt_las_act_by_logdin IS NULL THEN
    :new.sltt_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_sentltr
  (
   sltt_enlpfrnt_bttmmrgn,
   sltt_enlpfrnt_leftmrgn,
   sltt_enlpfrnt_rghtmrgn,
   sltt_enlpfrnt_nam,
   sltt_enlpfrnt_dat1,
   sltt_enlpfrnt_dat2,
   sltt_enlpfrnt_pagesiz,
   sltt_enlpback_contltrh,
   sltt_enlpback_contimg,
   sltt_enlpback_hght,
   sltt_enlpback_wdth,
   sltt_enlpback_top_mrgn,
   sltt_enlpback_bttmmrgn,
   sltt_enlpback_leftmrgn,
   sltt_enlpback_rghtmrgn,
   sltt_enlpback_nam,
   sltt_enlpback_dat1,
   sltt_enlpback_dat2,
   sltt_enlpback_pagesiz,
   sltt_lbl__contltrh,
   sltt_lbl__contimg,
   sltt_lbl__hght,
   sltt_lbl__wdth,
   sltt_lbl__top_mrgn,
   sltt_lbl__bttmmrgn,
   sltt_lbl__leftmrgn,
   sltt_lbl__rghtmrgn,
   sltt_lbl__nam,
   sltt_lbl__dat1,
   sltt_lbl__dat2,
   sltt_lbl__pagesiz,
   sltt_cntt_contltrh,
   sltt_cntt_contimg,
   sltt_cntt_hght,
   sltt_cntt_wdth,
   sltt_cntt_top_mrgn,
   sltt_cntt_bttmmrgn,
   sltt_cntt_leftmrgn,
   sltt_cntt_rghtmrgn,
   sltt_cntt_nam,
   sltt_cntt_dat1,
   sltt_cntt_dat2,
   sltt_cntt_pagesiz,
   SLTT_PRNTCNTT_CNTT,
   SLTT_PRNTCNTT_CONTLTRH,
   SLTT_PRNTCNTT_CONTIMG,
   SLTT_PRNTCNTT_HGHT,

 SLTT_PRNTCNTT_WDTH,
   SLTT_PRNTCNTT_TOP_MRGN,
   SLTT_PRNTCNTT_BTTMMRGN,
   SLTT_PRNTCNTT_LEFTMRGN,
   SLTT_PRNTCNTT_RGHTMRGN,
   SLTT_PRNTCNTT_NAM,
   SLTT_PRNTCNTT_DAT1,
   SLTT_PRNTCNTT_DAT2,
   SLTT_PRNTCNTT_PAGESIZ,
   sltt_fax_covrpage_cntt,
   sltt_enlpfrnt_cntt,
   sltt_enlpback_cntt,
   sltt_lbl__cntt,
   sltt_cntt_cntt,
   sltt_affn_um_evntreqt,
   sltt_affn_um_extn,
   sltt_affn_pvdr,
   sltt_affn_cm,
   sltt_affn_memb,
   sltt_affn_um_evnt,
   sltt_affn_um_dgis,
   sltt_affn_mdclsrvc,
   sltt_affn_apl,
   sltt_prpdltr,
   sltt_senttsk,
   sltt_sndr,
   classtype,
   sltt_c4c_id,
   sltt_crtd,
   sltt_las_act,
   sltt_las_act_actrtyp,
   sltt_obj_stt,
   sltt_vers,
   sltt_vsbt,
   sltt_dltddt,
   sltt_las_act_by,
   sltt_origcrtr,
   sltt_origcrtrlogdin,
   sltt_las_act_by_logdin,
   sltt_univid,
   sltt_fax_covrpage_contltrh,
   sltt_fax_covrpage_contimg,
   sltt_fax_covrpage_hght,
   sltt_fax_covrpage_wdth,
   sltt_fax_covrpage_top_mrgn,
   sltt_fax_covrpage_bttmmrgn,
   sltt_fax_covrpage_leftmrgn,
   sltt_fax_covrpage_rghtmrgn,
   sltt_fax_covrpage_nam,
   sltt_fax_covrpage_dat1,
   sltt_fax_covrpage_dat2,
   sltt_fax_covrpage_pagesiz,
   sltt_enlpfrnt_contltrh,
   sltt_enlpfrnt_contimg,
   sltt_enlpfrnt_hght,
   sltt_enlpfrnt_wdth,
   sltt_enlpfrnt_top_mrgn,
   sltt_id,
   valid_from,
   valid_to ,
   sltt_audid,
   sltt_prev_audid,
   sltt_next_audid
  )
  VALUES
  (
   :new.sltt_enlpfrnt_bttmmrgn,
   :new.sltt_enlpfrnt_leftmrgn,
   :new.sltt_enlpfrnt_rghtmrgn,
   :new.sltt_enlpfrnt_nam,
   :new.sltt_enlpfrnt_dat1,
   :new.sltt_enlpfrnt_dat2,
   :new.sltt_enlpfrnt_pagesiz,
   :new.sltt_enlpback_contltrh,
   :new.sltt_enlpback_contimg,
   :new.sltt_enlpback_hght,
   :new.sltt_enlpback_wdth,
   :new.sltt_enlpback_top_mrgn,
   :new.sltt_enlpback_bttmmrgn,
   :new.sltt_enlpback_leftmrgn,
   :new.sltt_enlpback_rghtmrgn,
   :new.sltt_enlpback_nam,
   :new.sltt_enlpback_dat1,
   :new.sltt_enlpback_dat2,
   :new.sltt_enlpback_pagesiz,
   :new.sltt_lbl__co
ntltrh,
   :new.sltt_lbl__contimg,
   :new.sltt_lbl__hght,
   :new.sltt_lbl__wdth,
   :new.sltt_lbl__top_mrgn,
   :new.sltt_lbl__bttmmrgn,
   :new.sltt_lbl__leftmrgn,
   :new.sltt_lbl__rghtmrgn,
   :new.sltt_lbl__nam,
   :new.sltt_lbl__dat1,
   :new.sltt_lbl__dat2,
   :new.sltt_lbl__pagesiz,
   :new.sltt_cntt_contltrh,
   :new.sltt_cntt_contimg,
   :new.sltt_cntt_hght,
   :new.sltt_cntt_wdth,
   :new.sltt_cntt_top_mrgn,
   :new.sltt_cntt_bttmmrgn,
   :new.sltt_cntt_leftmrgn,
   :new.sltt_cntt_rghtmrgn,
   :new.sltt_cntt_nam,
   :new.sltt_cntt_dat1,
   :new.sltt_cntt_dat2,
   :new.sltt_cntt_pagesiz,
   :new.SLTT_PRNTCNTT_CNTT,
   :new.SLTT_PRNTCNTT_CONTLTRH,
   :new.SLTT_PRNTCNTT_CONTIMG,
   :new.SLTT_PRNTCNTT_HGHT,
   :new.SLTT_PRNTCNTT_WDTH,
   :new.SLTT_PRNTCNTT_TOP_MRGN,
   :new.SLTT_PRNTCNTT_BTTMMRGN,
   :new.SLTT_PRNTCNTT_LEFTMRGN,
   :new.SLTT_PRNTCNTT_RGHTMRGN,
   :new.SLTT_PRNTCNTT_NAM,
   :new.SLTT_PRNTCNTT_DAT1,
   :new.SLTT_PRNTCNTT_DAT2,
   :new.SLTT_PRNTCNTT_PAGESIZ,
   :new.sltt_fax_covrpage_cntt,
   :new.sltt_enlpfrnt_cntt,
   :new.sltt_enlpback_cntt,
   :new.sltt_lbl__cntt,
   :new.sltt_cntt_cntt,
   :new.sltt_affn_um_evntreqt,
   :new.sltt_affn_um_extn,
   :new.sltt_affn_pvdr,
   :new.sltt_affn_cm,
   :new.sltt_affn_memb,
   :new.sltt_affn_um_evnt,
   :new.sltt_affn_um_dgis,
   :new.sltt_affn_mdclsrvc,
   :new.sltt_affn_apl,
   :new.sltt_prpdltr,
   :new.sltt_senttsk,
   :new.sltt_sndr,
   :new.classtype,
   :new.sltt_c4c_id,
   :new.sltt_crtd,
   :new.sltt_las_act,
   :new.sltt_las_act_actrtyp,
   :new.sltt_obj_stt,
   :new.sltt_vers,
   :new.sltt_vsbt,
   :new.sltt_dltddt,
   :new.sltt_las_act_by,
   :new.sltt_origcrtr,
   :new.sltt_origcrtrlogdin,
   :new.sltt_las_act_by_logdin,
   :new.sltt_univid,
   :new.sltt_fax_covrpage_contltrh,
   :new.sltt_fax_covrpage_contimg,
   :new.sltt_fax_covrpage_hght,
   :new.sltt_fax_covrpage_wdth,
   :new.sltt_fax_covrpage_top_mrgn,
   :new.sltt_fax_covrpage_bttmmrgn,
   :new.sltt_fax_covrpage_leftmrgn,
   :new.
sltt_fax_covrpage_rghtmrgn,
   :new.sltt_fax_covrpage_nam,
   :new.sltt_fax_covrpage_dat1,
   :new.sltt_fax_covrpage_dat2,
   :new.sltt_fax_covrpage_pagesiz,
   :new.sltt_enlpfrnt_contltrh,
   :new.sltt_enlpfrnt_contimg,
   :new.sltt_enlpfrnt_hght,
   :new.sltt_enlpfrnt_wdth,
   :new.sltt_enlpfrnt_top_mrgn,
   :new.sltt_id,
   :new.sltt_las_act_tim,
   NULL,
   u_sentltr.NEXTVAL,
   NULL,
   NULL
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
212
</td>
<td>
THH_C4C
</td>
<td>
TRG_SLTT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTLTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_sltt_auditupdate BEFORE
  UPDATE
    ON T_SENTLTR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        sltt_audid
      INTO
        last_audid
      FROM
        a_sentltr
      WHERE
        sltt_id            = :old.sltt_id
      AND sltt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.sltt_las_act_tim = :new.sltt_las_act_tim THEN
      UPDATE
        a_sentltr
      SET
        sltt_enlpback_nam          = :new.sltt_enlpback_nam,
        sltt_enlpback_dat1         = :new.sltt_enlpback_dat1,
        sltt_enlpback_dat2         = :new.sltt_enlpback_dat2,
        sltt_enlpback_pagesiz      = :new.sltt_enlpback_pagesiz,
        sltt_lbl__contltrh         = :new.sltt_lbl__contltrh,
        sltt_lbl__contimg          = :new.sltt_lbl__contimg,
        sltt_lbl__hght             = :new.sltt_lbl__hght,
        sltt_lbl__wdth             = :new.sltt_lbl__wdth,
        sltt_lbl__top_mrgn         = :new.sltt_lbl__top_mrgn,
        sltt_lbl__bttmmrgn         = :new.sltt_lbl__bttmmrgn,
        sltt_lbl__leftmrgn         = :new.sltt_lbl__leftmrgn,
        sltt_lbl__rghtmrgn         = :new.sltt_lbl__rghtmrgn,
        sltt_lbl__nam              = :new.sltt_lbl__nam,
        sltt_lbl__dat1             = :new.sltt_lbl__dat1,
        sltt_lbl__dat2             = :new.sltt_lbl__dat2,
        sltt_lbl__pagesiz          = :new.sltt_lbl__pagesiz,
        sltt_cntt_contltrh         = :new.sltt_cntt_contltrh,
        sltt_cntt_contimg          = :new.sltt_cntt_contimg,
        sltt_cntt_hght             = :new.sltt_cntt_hght,
        sltt_cntt_wdth             = :new.sltt_cntt_wdth,
        sltt_cntt_top_mrgn         = :new.sltt_cntt_top_mrgn,
        sltt_cntt_bttmmrgn         = :new.sltt_cntt_bttmmrgn,
        sltt_cntt_leftmrgn         = :new.sltt_cntt_leftmrgn,
        sltt_cntt_
rghtmrgn         = :new.sltt_cntt_rghtmrgn,
        sltt_cntt_nam              = :new.sltt_cntt_nam,
        sltt_cntt_dat1             = :new.sltt_cntt_dat1,
        sltt_cntt_dat2             = :new.sltt_cntt_dat2,
        sltt_cntt_pagesiz          = :new.sltt_cntt_pagesiz,
        SLTT_PRNTCNTT_CNTT         = :new.SLTT_PRNTCNTT_CNTT,
        SLTT_PRNTCNTT_CONTLTRH     = :new.SLTT_PRNTCNTT_CONTLTRH,
        SLTT_PRNTCNTT_CONTIMG      = :new.SLTT_PRNTCNTT_CONTIMG,
        SLTT_PRNTCNTT_HGHT         = :new.SLTT_PRNTCNTT_HGHT,
        SLTT_PRNTCNTT_WDTH         = :new.SLTT_PRNTCNTT_WDTH,
        SLTT_PRNTCNTT_TOP_MRGN     = :new.SLTT_PRNTCNTT_TOP_MRGN,
        SLTT_PRNTCNTT_BTTMMRGN     = :new.SLTT_PRNTCNTT_BTTMMRGN,
        SLTT_PRNTCNTT_LEFTMRGN     = :new.SLTT_PRNTCNTT_LEFTMRGN,
        SLTT_PRNTCNTT_RGHTMRGN     = :new.SLTT_PRNTCNTT_RGHTMRGN,
        SLTT_PRNTCNTT_NAM          = :new.SLTT_PRNTCNTT_NAM,
        SLTT_PRNTCNTT_DAT1         = :new.SLTT_PRNTCNTT_DAT1,
        SLTT_PRNTCNTT_DAT2         = :new.SLTT_PRNTCNTT_DAT2,
        SLTT_PRNTCNTT_PAGESIZ      = :new.SLTT_PRNTCNTT_PAGESIZ,
        sltt_fax_covrpage_cntt     = :new.sltt_fax_covrpage_cntt,
        sltt_enlpfrnt_cntt         = :new.sltt_enlpfrnt_cntt,
        sltt_enlpback_cntt         = :new.sltt_enlpback_cntt,
        sltt_lbl__cntt             = :new.sltt_lbl__cntt,
        sltt_cntt_cntt             = :new.sltt_cntt_cntt,
        sltt_affn_um_evntreqt      = :new.sltt_affn_um_evntreqt,
        sltt_affn_um_extn          = :new.sltt_affn_um_extn,
        sltt_affn_pvdr             = :new.sltt_affn_pvdr,
        sltt_affn_cm               = :new.sltt_affn_cm,
        sltt_affn_memb             = :new.sltt_affn_memb,
        sltt_affn_um_evnt          = :new.sltt_affn_um_evnt,
        sltt_affn_um_dgis          = :new.sltt_affn_um_dgis,
        sltt_affn_mdclsrvc         = :new.sltt_affn_mdclsrvc,
        sltt_affn_apl              = :new.sltt_affn_apl,
        sltt_prpdltr               = :new.sltt
_prpdltr,
        sltt_senttsk               = :new.sltt_senttsk,
        sltt_sndr                  = :new.sltt_sndr,
        classtype                  = :new.classtype,
        sltt_c4c_id                = :new.sltt_c4c_id,
        sltt_crtd                  = :new.sltt_crtd,
        sltt_las_act               = :new.sltt_las_act,
        sltt_las_act_actrtyp       = :new.sltt_las_act_actrtyp,
        sltt_obj_stt               = :new.sltt_obj_stt,
        sltt_vers                  = :new.sltt_vers,
        sltt_vsbt                  = :new.sltt_vsbt,
        sltt_dltddt                = :new.sltt_dltddt,
        sltt_las_act_by            = :new.sltt_las_act_by,
        sltt_origcrtr              = :new.sltt_origcrtr,
        sltt_origcrtrlogdin        = :new.sltt_origcrtrlogdin,
        sltt_las_act_by_logdin     = :new.sltt_las_act_by_logdin,
        sltt_univid                = :new.sltt_univid,
        sltt_fax_covrpage_contltrh = :new.sltt_fax_covrpage_contltrh,
        sltt_fax_covrpage_contimg  = :new.sltt_fax_covrpage_contimg,
        sltt_fax_covrpage_hght     = :new.sltt_fax_covrpage_hght,
        sltt_fax_covrpage_wdth     = :new.sltt_fax_covrpage_wdth,
        sltt_fax_covrpage_top_mrgn = :new.sltt_fax_covrpage_top_mrgn,
        sltt_fax_covrpage_bttmmrgn = :new.sltt_fax_covrpage_bttmmrgn,
        sltt_fax_covrpage_leftmrgn = :new.sltt_fax_covrpage_leftmrgn,
        sltt_fax_covrpage_rghtmrgn = :new.sltt_fax_covrpage_rghtmrgn,
        sltt_fax_covrpage_nam      = :new.sltt_fax_covrpage_nam,
        sltt_fax_covrpage_dat1     = :new.sltt_fax_covrpage_dat1,
        sltt_fax_covrpage_dat2     = :new.sltt_fax_covrpage_dat2,
        sltt_fax_covrpage_pagesiz  = :new.sltt_fax_covrpage_pagesiz,
        sltt_enlpfrnt_contltrh     = :new.sltt_enlpfrnt_contltrh,
        sltt_enlpfrnt_contimg      = :new.sltt_enlpfrnt_contimg,
        sltt_enlpfrnt_hght         = :new.sltt_enlpfrnt_hght,
        sltt_enlpfrnt_wdth         = :new.sltt_enlpfrnt_wdth,
        slt
t_enlpfrnt_top_mrgn     = :new.sltt_enlpfrnt_top_mrgn,
        sltt_enlpfrnt_bttmmrgn     = :new.sltt_enlpfrnt_bttmmrgn,
        sltt_enlpfrnt_leftmrgn     = :new.sltt_enlpfrnt_leftmrgn,
        sltt_enlpfrnt_rghtmrgn     = :new.sltt_enlpfrnt_rghtmrgn,
        sltt_enlpfrnt_nam          = :new.sltt_enlpfrnt_nam,
        sltt_enlpfrnt_dat1         = :new.sltt_enlpfrnt_dat1,
        sltt_enlpfrnt_dat2         = :new.sltt_enlpfrnt_dat2,
        sltt_enlpfrnt_pagesiz      = :new.sltt_enlpfrnt_pagesiz,
        sltt_enlpback_contltrh     = :new.sltt_enlpback_contltrh,
        sltt_enlpback_contimg      = :new.sltt_enlpback_contimg,
        sltt_enlpback_hght         = :new.sltt_enlpback_hght,
        sltt_enlpback_wdth         = :new.sltt_enlpback_wdth,
        sltt_enlpback_top_mrgn     = :new.sltt_enlpback_top_mrgn,
        sltt_enlpback_bttmmrgn     = :new.sltt_enlpback_bttmmrgn,
        sltt_enlpback_leftmrgn     = :new.sltt_enlpback_leftmrgn,
        sltt_enlpback_rghtmrgn     = :new.sltt_enlpback_rghtmrgn
      WHERE
        sltt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sentltr
        (
          sltt_enlpback_nam,
          sltt_enlpback_dat1,
          sltt_enlpback_dat2,
          sltt_enlpback_pagesiz,
          sltt_lbl__contltrh,
          sltt_lbl__contimg,
          sltt_lbl__hght,
          sltt_lbl__wdth,
          sltt_lbl__top_mrgn,
          sltt_lbl__bttmmrgn,
          sltt_lbl__leftmrgn,
          sltt_lbl__rghtmrgn,
          sltt_lbl__nam,
          sltt_lbl__dat1,
          sltt_lbl__dat2,
          sltt_lbl__pagesiz,
          sltt_cntt_contltrh,
          sltt_cntt_contimg,
          sltt_cntt_hght,
          sltt_cntt_wdth,
          sltt_cntt_top_mrgn,
          sltt_cntt_bttmmrgn,
          sltt_cntt_leftmrgn,
          sltt_cntt_rghtmrgn,
          sltt_cntt_nam,
          sltt_cntt_dat1,

    sltt_cntt_dat2,
          sltt_cntt_pagesiz,
          SLTT_PRNTCNTT_CNTT,
          SLTT_PRNTCNTT_CONTLTRH,
          SLTT_PRNTCNTT_CONTIMG,
          SLTT_PRNTCNTT_HGHT,
          SLTT_PRNTCNTT_WDTH,
          SLTT_PRNTCNTT_TOP_MRGN,
          SLTT_PRNTCNTT_BTTMMRGN,
          SLTT_PRNTCNTT_LEFTMRGN,
          SLTT_PRNTCNTT_RGHTMRGN,
          SLTT_PRNTCNTT_NAM,
          SLTT_PRNTCNTT_DAT1,
          SLTT_PRNTCNTT_DAT2,
          SLTT_PRNTCNTT_PAGESIZ,
          sltt_fax_covrpage_cntt,
          sltt_enlpfrnt_cntt,
          sltt_enlpback_cntt,
          sltt_lbl__cntt,
          sltt_cntt_cntt,
          sltt_affn_um_evntreqt,
          sltt_affn_um_extn,
          sltt_affn_pvdr,
          sltt_affn_cm,
          sltt_affn_memb,
          sltt_affn_um_evnt,
          sltt_affn_um_dgis,
          sltt_affn_mdclsrvc,
          sltt_affn_apl,
          sltt_prpdltr,
          sltt_senttsk,
          sltt_sndr,
          classtype,
          sltt_c4c_id,
          sltt_crtd,
          sltt_las_act,
          sltt_las_act_actrtyp,
          sltt_obj_stt,
          sltt_vers,
          sltt_vsbt,
          sltt_dltddt,
          sltt_las_act_by,
          sltt_origcrtr,
          sltt_origcrtrlogdin,
          sltt_las_act_by_logdin,
          sltt_univid,
          sltt_fax_covrpage_contltrh,
          sltt_fax_covrpage_contimg,
          sltt_fax_covrpage_hght,
          sltt_fax_covrpage_wdth,
          sltt_fax_covrpage_top_mrgn,
          sltt_fax_covrpage_bttmmrgn,
          sltt_fax_covrpage_leftmrgn,
          sltt_fax_covrpage_rghtmrgn,
          sltt_fax_covrpage_nam,
          sltt_fax_covrpage_dat1,
          sltt_fax_covrpage_dat2,
          sltt_fax_covrpage_pagesiz,
          sltt_enlpfrnt_contltrh,
          sltt_enlpfrnt_contimg,
          sltt_enlpfrnt_hght,
          sltt_enlpfrnt_wdth,
          sltt_enlpfrnt_top_mrgn,
          sltt_enlpfrnt_bttmmrgn,
          sltt_enlpfrnt_leftmrgn,
          sltt_enlpfrnt_rghtmrgn,
          sltt_enlpfrnt_
nam,
          sltt_enlpfrnt_dat1,
          sltt_enlpfrnt_dat2,
          sltt_enlpfrnt_pagesiz,
          sltt_enlpback_contltrh,
          sltt_enlpback_contimg,
          sltt_enlpback_hght,
          sltt_enlpback_wdth,
          sltt_enlpback_top_mrgn,
          sltt_enlpback_bttmmrgn,
          sltt_enlpback_leftmrgn,
          sltt_enlpback_rghtmrgn,
          sltt_id,
          valid_from,
          valid_to,
          sltt_audid,
          sltt_prev_audid,
          sltt_next_audid
        )
        VALUES
        (
          :new.sltt_enlpback_nam,
          :new.sltt_enlpback_dat1,
          :new.sltt_enlpback_dat2,
          :new.sltt_enlpback_pagesiz,
          :new.sltt_lbl__contltrh,
          :new.sltt_lbl__contimg,
          :new.sltt_lbl__hght,
          :new.sltt_lbl__wdth,
          :new.sltt_lbl__top_mrgn,
          :new.sltt_lbl__bttmmrgn,
          :new.sltt_lbl__leftmrgn,
          :new.sltt_lbl__rghtmrgn,
          :new.sltt_lbl__nam,
          :new.sltt_lbl__dat1,
          :new.sltt_lbl__dat2,
          :new.sltt_lbl__pagesiz,
          :new.sltt_cntt_contltrh,
          :new.sltt_cntt_contimg,
          :new.sltt_cntt_hght,
          :new.sltt_cntt_wdth,
          :new.sltt_cntt_top_mrgn,
          :new.sltt_cntt_bttmmrgn,
          :new.sltt_cntt_leftmrgn,
          :new.sltt_cntt_rghtmrgn,
          :new.sltt_cntt_nam,
          :new.sltt_cntt_dat1,
          :new.sltt_cntt_dat2,
          :new.sltt_cntt_pagesiz,
          :new.SLTT_PRNTCNTT_CNTT,
          :new.SLTT_PRNTCNTT_CONTLTRH,
          :new.SLTT_PRNTCNTT_CONTIMG,
          :new.SLTT_PRNTCNTT_HGHT,
          :new.SLTT_PRNTCNTT_WDTH,
          :new.SLTT_PRNTCNTT_TOP_MRGN,
          :new.SLTT_PRNTCNTT_BTTMMRGN,
          :new.SLTT_PRNTCNTT_LEFTMRGN,
          :new.SLTT_PRNTCNTT_RGHTMRGN,
          :new.SLTT_PRNTCNTT_NAM,
          :new.SLTT_PRNTCNTT_DAT1,
          :new.SLTT_PRNTCNTT_DAT2,
          :new.SLTT_PRNTCNTT_PAGESIZ,
          :new.sltt_fax_covrpage_cntt,
          :ne
w.sltt_enlpfrnt_cntt,
          :new.sltt_enlpback_cntt,
          :new.sltt_lbl__cntt,
          :new.sltt_cntt_cntt,
          :new.sltt_affn_um_evntreqt,
          :new.sltt_affn_um_extn,
          :new.sltt_affn_pvdr,
          :new.sltt_affn_cm,
          :new.sltt_affn_memb,
          :new.sltt_affn_um_evnt,
          :new.sltt_affn_um_dgis,
          :new.sltt_affn_mdclsrvc,
          :new.sltt_affn_apl,
          :new.sltt_prpdltr,
          :new.sltt_senttsk,
          :new.sltt_sndr,
          :new.classtype,
          :new.sltt_c4c_id,
          :new.sltt_crtd,
          :new.sltt_las_act,
          :new.sltt_las_act_actrtyp,
          :new.sltt_obj_stt,
          :new.sltt_vers,
          :new.sltt_vsbt,
          :new.sltt_dltddt,
          :new.sltt_las_act_by,
          :new.sltt_origcrtr,
          :new.sltt_origcrtrlogdin,
          :new.sltt_las_act_by_logdin,
          :new.sltt_univid,
          :new.sltt_fax_covrpage_contltrh,
          :new.sltt_fax_covrpage_contimg,
          :new.sltt_fax_covrpage_hght,
          :new.sltt_fax_covrpage_wdth,
          :new.sltt_fax_covrpage_top_mrgn,
          :new.sltt_fax_covrpage_bttmmrgn,
          :new.sltt_fax_covrpage_leftmrgn,
          :new.sltt_fax_covrpage_rghtmrgn,
          :new.sltt_fax_covrpage_nam,
          :new.sltt_fax_covrpage_dat1,
          :new.sltt_fax_covrpage_dat2,
          :new.sltt_fax_covrpage_pagesiz,
          :new.sltt_enlpfrnt_contltrh,
          :new.sltt_enlpfrnt_contimg,
          :new.sltt_enlpfrnt_hght,
          :new.sltt_enlpfrnt_wdth,
          :new.sltt_enlpfrnt_top_mrgn,
          :new.sltt_enlpfrnt_bttmmrgn,
          :new.sltt_enlpfrnt_leftmrgn,
          :new.sltt_enlpfrnt_rghtmrgn,
          :new.sltt_enlpfrnt_nam,
          :new.sltt_enlpfrnt_dat1,
          :new.sltt_enlpfrnt_dat2,
          :new.sltt_enlpfrnt_pagesiz,
          :new.sltt_enlpback_contltrh,
          :new.sltt_enlpback_contimg,
          :new.sltt_enlpback_hght,
          :new.sltt_enlpback_wd
th,
          :new.sltt_enlpback_top_mrgn,
          :new.sltt_enlpback_bttmmrgn,
          :new.sltt_enlpback_leftmrgn,
          :new.sltt_enlpback_rghtmrgn,
          :new.sltt_id,
          :new.sltt_las_act_tim,
          NULL,
          u_sentltr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_sentltr
      SET
        valid_to        = :new.sltt_las_act_tim,
        sltt_next_audid = u_sentltr.CURRVAL
      WHERE
        sltt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
213
</td>
<td>
THH_C4C
</td>
<td>
TRG_SETK_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTTSK
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_setk_auditinsert before insert on t_senttsk for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
  curr_date date;
begin
  curr_date := current_date;
  if :new.setk_crtd is null then
    :new.setk_crtd := curr_date;
  end if;
  if :new.setk_las_act_tim is null then
    :new.setk_las_act_tim := curr_date;
  end if;
  if :new.setk_las_act is null then
    :new.setk_las_act := 1;
  end if;
  if :new.setk_obj_stt is null then
    :new.setk_obj_stt := 1;
  end if;
  if :new.setk_vers is null then
    :new.setk_vers := 0;
  end if;
  if :new.setk_vsbt is null then
    :new.setk_vsbt := 1001;
  end if;
  if :new.setk_las_act_by is null then
    :new.setk_las_act_by := 1;
  end if;
  if :new.setk_origcrtr is null then
    :new.setk_origcrtr := 1;
  end if;
  if :new.setk_origcrtrlogdin is null then
    :new.setk_origcrtrlogdin := 1;
  end if;
  if :new.setk_las_act_by_logdin is null then
    :new.setk_las_act_by_logdin := 1;
  end if;
  insert into a_senttsk (
    setk_vsbt,
    setk_dltddt,
    setk_las_act_by,
    setk_origcrtr,
    setk_origcrtrlogdin,
    setk_las_act_by_logdin,
    setk_univid,
    setk_ddlnalrtrcpt,
    setk_tsk_nam,
    setk_tsk_dscn,
    setk_drtn_amnt,
    setk_drtn_unit,
    setk_rmdrprcdwth__amnt,
    setk_rmdrprcdwth__unit,
    setk_prnl,
    setk_subj,
    setk_cmmt,
    setk_cmpd,
    setk_rmdrtim_orgn,
    setk_ddlntim_blck_amnt,
    setk_ddlntim_blck_unit,
    setk_cnclcmmt,
    setk_sent,
    setk_srtd,
    setk_tmtd,
    setk_otcm,
    setk_wkfwistcid,
    setk_cnv_id,
    setk_ownrchndflag,
    setk_ownrchndcnt,
    setk_src__src_typ,
    setk_tsk_timg_ddln_dt,
    setk_tsk_timg_ddln_tim_in_dy,
    setk_tsk_timg_ddlnact,
    setk_tsk_timg_strtdt,
    setk_tsk_timg_scldat,
    setk_tsk_timg_snlttsk,
    setk_tsk_timg_snltdt,
    setk_tsk_timg_snltact,
    setk_tsk_timg_ddlnbfr_nxt_irtn,
    setk_tsk_timg_ddlnsltn,
    setk_tsk_timg_scld,
    scbt_strttim_blck_amnt,
    scbt_strttim_blck_unit,
    scbt_nmbr,
    scbt_aft_eachistc,
    scbt_id,
    setk_affn_um_evntreqt,
    setk_affn_um_extn,
    setk_affn_pvdr,
    setk_affn_c
m,
    setk_affn_memb,
    setk_affn_um_evnt,
    setk_origrcpt,
    setk_rfngwkfwtsk,
    setk_prvsrfngtsk,
    setk_prvsrfngtsk_prmn,
    setk_ownr,
    setk_prvsownr,
    setk_prvssndr,
    setk_prvsownrprmn,
    setk_tnfr,
    setk_prvstnfr,
    setk_src__asmtcarecalc,
    setk_src__pat_id_qry,
    setk_caudby,
    setk_cstmflds,
    setk_cnclresn,
    setk_grp,
    scbt_carebean,
    scbt_carebeantsk,
    setk_tsk_typ,
    setk_retnptrn,
    setk_tmpt,
    setk_taknasmtcc_base,
    setk_um_base,
    classtype,
    setk_c4c_id,
    setk_crtd,
    setk_las_act,
    setk_las_act_actrtyp,
    setk_obj_stt,
    setk_vers,
    setk_id,
    valid_from,
    valid_to ,
    setk_audid,
    setk_prev_audid,
    setk_next_audid,
    setk_reschedule_reason,
    setk_reschedule_comment
  ) values (
    :new.setk_vsbt,
    :new.setk_dltddt,
    :new.setk_las_act_by,
    :new.setk_origcrtr,
    :new.setk_origcrtrlogdin,
    :new.setk_las_act_by_logdin,
    :new.setk_univid,
    :new.setk_ddlnalrtrcpt,
    :new.setk_tsk_nam,
    :new.setk_tsk_dscn,
    :new.setk_drtn_amnt,
    :new.setk_drtn_unit,
    :new.setk_rmdrprcdwth__amnt,
    :new.setk_rmdrprcdwth__unit,
    :new.setk_prnl,
    :new.setk_subj,
    :new.setk_cmmt,
    :new.setk_cmpd,
    :new.setk_rmdrtim_orgn,
    :new.setk_ddlntim_blck_amnt,
    :new.setk_ddlntim_blck_unit,
    :new.setk_cnclcmmt,
    :new.setk_sent,
    :new.setk_srtd,
    :new.setk_tmtd,
    :new.setk_otcm,
    :new.setk_wkfwistcid,
    :new.setk_cnv_id,
    :new.setk_ownrchndflag,
    :new.setk_ownrchndcnt,
    :new.setk_src__src_typ,
    :new.setk_tsk_timg_ddln_dt,
    :new.setk_tsk_timg_ddln_tim_in_dy,
    :new.setk_tsk_timg_ddlnact,
    :new.setk_tsk_timg_strtdt,
    :new.setk_tsk_timg_scldat,
    :new.setk_tsk_timg_snlttsk,
    :new.setk_tsk_timg_snltdt,
    :new.setk_tsk_timg_snltact,
    :new.setk_tsk_timg_ddlnbfr_nxt_irtn,
    :new.setk_tsk_timg_ddlnsltn,
    :new.setk_tsk_timg_scld,
    :new.scbt_strttim_blck_amnt,
    :new.scbt_strttim_blck
_unit,
    :new.scbt_nmbr,
    :new.scbt_aft_eachistc,
    :new.scbt_id,
    :new.setk_affn_um_evntreqt,
    :new.setk_affn_um_extn,
    :new.setk_affn_pvdr,
    :new.setk_affn_cm,
    :new.setk_affn_memb,
    :new.setk_affn_um_evnt,
    :new.setk_origrcpt,
    :new.setk_rfngwkfwtsk,
    :new.setk_prvsrfngtsk,
    :new.setk_prvsrfngtsk_prmn,
    :new.setk_ownr,
    :new.setk_prvsownr,
    :new.setk_prvssndr,
    :new.setk_prvsownrprmn,
    :new.setk_tnfr,
    :new.setk_prvstnfr,
    :new.setk_src__asmtcarecalc,
    :new.setk_src__pat_id_qry,
    :new.setk_caudby,
    :new.setk_cstmflds,
    :new.setk_cnclresn,
    :new.setk_grp,
    :new.scbt_carebean,
    :new.scbt_carebeantsk,
    :new.setk_tsk_typ,
    :new.setk_retnptrn,
    :new.setk_tmpt,
    :new.setk_taknasmtcc_base,
    :new.setk_um_base,
    :new.classtype,
    :new.setk_c4c_id,
    :new.setk_crtd,
    :new.setk_las_act,
    :new.setk_las_act_actrtyp,
    :new.setk_obj_stt,
    :new.setk_vers,
    :new.setk_id,
    :new.setk_las_act_tim,
    null,
    u_senttsk.nextval,
    null,
    null,
    :new.setk_reschedule_reason,
    :new.setk_reschedule_comment
  );
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
214
</td>
<td>
THH_C4C
</td>
<td>
TRG_SETK_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SENTTSK
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_setk_auditupdate before update on t_senttsk for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
  last_audid number;
begin
  begin
    select
      setk_audid into last_audid
    from
      a_senttsk
    where
      setk_id = :old.setk_id
      and
      setk_next_audid is null
      and
      rownum &lt; 2
    for update;
  exception
    when no_data_found then
      last_audid := null;
  end;
  -- LastActionTime has not changed - no new transaction
  if :old.setk_las_act_tim = :new.setk_las_act_tim then
    update a_senttsk
      set
        setk_tsk_timg_ddln_dt          = :new.setk_tsk_timg_ddln_dt,
        setk_tsk_timg_ddln_tim_in_dy   = :new.setk_tsk_timg_ddln_tim_in_dy,
        setk_tsk_timg_ddlnact          = :new.setk_tsk_timg_ddlnact,
        setk_tsk_timg_strtdt           = :new.setk_tsk_timg_strtdt,
        setk_tsk_timg_scldat           = :new.setk_tsk_timg_scldat,
        setk_tsk_timg_snlttsk          = :new.setk_tsk_timg_snlttsk,
        setk_tsk_timg_snltdt           = :new.setk_tsk_timg_snltdt,
        setk_tsk_timg_snltact          = :new.setk_tsk_timg_snltact,
        setk_tsk_timg_ddlnbfr_nxt_irtn = :new.setk_tsk_timg_ddlnbfr_nxt_irtn,
        setk_tsk_timg_ddlnsltn         = :new.setk_tsk_timg_ddlnsltn,
        setk_tsk_timg_scld             = :new.setk_tsk_timg_scld,
        scbt_strttim_blck_amnt         = :new.scbt_strttim_blck_amnt,
        scbt_strttim_blck_unit         = :new.scbt_strttim_blck_unit,
        scbt_nmbr                      = :new.scbt_nmbr,
        scbt_aft_eachistc              = :new.scbt_aft_eachistc,
        scbt_id                        = :new.scbt_id,
        setk_affn_um_evntreqt          = :new.setk_affn_um_evntreqt,
        setk_affn_um_extn              = :new.setk_affn_um_extn,
        setk_affn_pvdr                 = :new.setk_affn_pvdr,
        setk_affn_cm                   = :new.setk_affn_cm,
        setk_affn_memb                 = :new.setk_affn_memb,
        setk_affn_um_evnt              = :new.setk_affn_um_evnt,
        setk_origrcpt                  = :new.setk_origrcpt,
        setk_rfngw
kfwtsk               = :new.setk_rfngwkfwtsk,
        setk_prvsrfngtsk               = :new.setk_prvsrfngtsk,
        setk_prvsrfngtsk_prmn          = :new.setk_prvsrfngtsk_prmn,
        setk_ownr                      = :new.setk_ownr,
        setk_prvsownr                  = :new.setk_prvsownr,
        setk_prvssndr                  = :new.setk_prvssndr,
        setk_prvsownrprmn              = :new.setk_prvsownrprmn,
        setk_tnfr                      = :new.setk_tnfr,
        setk_prvstnfr                  = :new.setk_prvstnfr,
        setk_src__asmtcarecalc         = :new.setk_src__asmtcarecalc,
        setk_src__pat_id_qry           = :new.setk_src__pat_id_qry,
        setk_caudby                    = :new.setk_caudby,
        setk_cstmflds                  = :new.setk_cstmflds,
        setk_cnclresn                  = :new.setk_cnclresn,
        setk_grp                       = :new.setk_grp,
        scbt_carebean                  = :new.scbt_carebean,
        scbt_carebeantsk               = :new.scbt_carebeantsk,
        setk_tsk_typ                   = :new.setk_tsk_typ,
        setk_retnptrn                  = :new.setk_retnptrn,
        setk_tmpt                      = :new.setk_tmpt,
        setk_taknasmtcc_base           = :new.setk_taknasmtcc_base,
        setk_um_base                   = :new.setk_um_base,
        classtype                      = :new.classtype,
        setk_c4c_id                    = :new.setk_c4c_id,
        setk_crtd                      = :new.setk_crtd,
        setk_las_act                   = :new.setk_las_act,
        setk_las_act_actrtyp           = :new.setk_las_act_actrtyp,
        setk_obj_stt                   = :new.setk_obj_stt,
        setk_vers                      = :new.setk_vers,
        setk_vsbt                      = :new.setk_vsbt,
        setk_dltddt                    = :new.setk_dltddt,
        setk_las_act_by                = :new.setk_las_act_by,
        setk_origcrtr                  = :new.setk_origc
rtr,
        setk_origcrtrlogdin            = :new.setk_origcrtrlogdin,
        setk_las_act_by_logdin         = :new.setk_las_act_by_logdin,
        setk_univid                    = :new.setk_univid,
        setk_ddlnalrtrcpt              = :new.setk_ddlnalrtrcpt,
        setk_tsk_nam                   = :new.setk_tsk_nam,
        setk_tsk_dscn                  = :new.setk_tsk_dscn,
        setk_drtn_amnt                 = :new.setk_drtn_amnt,
        setk_drtn_unit                 = :new.setk_drtn_unit,
        setk_rmdrprcdwth__amnt         = :new.setk_rmdrprcdwth__amnt,
        setk_rmdrprcdwth__unit         = :new.setk_rmdrprcdwth__unit,
        setk_prnl                      = :new.setk_prnl,
        setk_subj                      = :new.setk_subj,
        setk_cmmt                      = :new.setk_cmmt,
        setk_cmpd                      = :new.setk_cmpd,
        setk_rmdrtim_orgn              = :new.setk_rmdrtim_orgn,
        setk_ddlntim_blck_amnt         = :new.setk_ddlntim_blck_amnt,
        setk_ddlntim_blck_unit         = :new.setk_ddlntim_blck_unit,
        setk_cnclcmmt                  = :new.setk_cnclcmmt,
        setk_sent                      = :new.setk_sent,
        setk_srtd                      = :new.setk_srtd,
        setk_tmtd                      = :new.setk_tmtd,
        setk_otcm                      = :new.setk_otcm,
        setk_wkfwistcid                = :new.setk_wkfwistcid,
        setk_cnv_id                    = :new.setk_cnv_id,
        setk_ownrchndflag              = :new.setk_ownrchndflag,
        setk_ownrchndcnt               = :new.setk_ownrchndcnt,
        setk_src__src_typ              = :new.setk_src__src_typ,
        setk_reschedule_reason         = :new.setk_reschedule_reason,
        setk_reschedule_comment        = :new.setk_reschedule_comment
      where
        setk_audid = last_audid;
  -- LastActionTime has changed - new transaction in place
  else
    -- insert new values introduced by new transaction

 insert into a_senttsk (
        setk_tsk_timg_ddln_dt,
        setk_tsk_timg_ddln_tim_in_dy,
        setk_tsk_timg_ddlnact,
        setk_tsk_timg_strtdt,
        setk_tsk_timg_scldat,
        setk_tsk_timg_snlttsk,
        setk_tsk_timg_snltdt,
        setk_tsk_timg_snltact,
        setk_tsk_timg_ddlnbfr_nxt_irtn,
        setk_tsk_timg_ddlnsltn,
        setk_tsk_timg_scld,
        scbt_strttim_blck_amnt,
        scbt_strttim_blck_unit,
        scbt_nmbr,
        scbt_aft_eachistc,
        scbt_id,
        setk_affn_um_evntreqt,
        setk_affn_um_extn,
        setk_affn_pvdr,
        setk_affn_cm,
        setk_affn_memb,
        setk_affn_um_evnt,
        setk_origrcpt,
        setk_rfngwkfwtsk,
        setk_prvsrfngtsk,
        setk_prvsrfngtsk_prmn,
        setk_ownr,
        setk_prvsownr,
        setk_prvssndr,
        setk_prvsownrprmn,
        setk_tnfr,
        setk_prvstnfr,
        setk_src__asmtcarecalc,
        setk_src__pat_id_qry,
        setk_caudby,
        setk_cstmflds,
        setk_cnclresn,
        setk_grp,
        scbt_carebean,
        scbt_carebeantsk,
        setk_tsk_typ,
        setk_retnptrn,
        setk_tmpt,
        setk_taknasmtcc_base,
        setk_um_base,
        classtype,
        setk_c4c_id,
        setk_crtd,
        setk_las_act,
        setk_las_act_actrtyp,
        setk_obj_stt,
        setk_vers,
        setk_vsbt,
        setk_dltddt,
        setk_las_act_by,
        setk_origcrtr,
        setk_origcrtrlogdin,
        setk_las_act_by_logdin,
        setk_univid,
        setk_ddlnalrtrcpt,
        setk_tsk_nam,
        setk_tsk_dscn,
        setk_drtn_amnt,
        setk_drtn_unit,
        setk_rmdrprcdwth__amnt,
        setk_rmdrprcdwth__unit,
        setk_prnl,
        setk_subj,
        setk_cmmt,
        setk_cmpd,
        setk_rmdrtim_orgn,
        setk_ddlntim_blck_amnt,
        setk_ddlntim_blck_unit,
        setk_cnclcmmt,
        setk_sent,
        setk_srtd,
        setk_tmtd,
        setk_otcm,
        setk_wkfw
istcid,
        setk_cnv_id,
        setk_ownrchndflag,
        setk_ownrchndcnt,
        setk_src__src_typ,
        setk_id,
        valid_from,
        valid_to,
        setk_audid,
        setk_prev_audid,
        setk_next_audid,
        setk_reschedule_reason,
        setk_reschedule_comment
      ) values (
        :new.setk_tsk_timg_ddln_dt,
        :new.setk_tsk_timg_ddln_tim_in_dy,
        :new.setk_tsk_timg_ddlnact,
        :new.setk_tsk_timg_strtdt,
        :new.setk_tsk_timg_scldat,
        :new.setk_tsk_timg_snlttsk,
        :new.setk_tsk_timg_snltdt,
        :new.setk_tsk_timg_snltact,
        :new.setk_tsk_timg_ddlnbfr_nxt_irtn,
        :new.setk_tsk_timg_ddlnsltn,
        :new.setk_tsk_timg_scld,
        :new.scbt_strttim_blck_amnt,
        :new.scbt_strttim_blck_unit,
        :new.scbt_nmbr,
        :new.scbt_aft_eachistc,
        :new.scbt_id,
        :new.setk_affn_um_evntreqt,
        :new.setk_affn_um_extn,
        :new.setk_affn_pvdr,
        :new.setk_affn_cm,
        :new.setk_affn_memb,
        :new.setk_affn_um_evnt,
        :new.setk_origrcpt,
        :new.setk_rfngwkfwtsk,
        :new.setk_prvsrfngtsk,
        :new.setk_prvsrfngtsk_prmn,
        :new.setk_ownr,
        :new.setk_prvsownr,
        :new.setk_prvssndr,
        :new.setk_prvsownrprmn,
        :new.setk_tnfr,
        :new.setk_prvstnfr,
        :new.setk_src__asmtcarecalc,
        :new.setk_src__pat_id_qry,
        :new.setk_caudby,
        :new.setk_cstmflds,
        :new.setk_cnclresn,
        :new.setk_grp,
        :new.scbt_carebean,
        :new.scbt_carebeantsk,
        :new.setk_tsk_typ,
        :new.setk_retnptrn,
        :new.setk_tmpt,
        :new.setk_taknasmtcc_base,
        :new.setk_um_base,
        :new.classtype,
        :new.setk_c4c_id,
        :new.setk_crtd,
        :new.setk_las_act,
        :new.setk_las_act_actrtyp,
        :new.setk_obj_stt,
        :new.setk_vers,
        :new.setk_vsbt,
        :new.setk_dltddt,
        :new.setk_las_act_by,

 :new.setk_origcrtr,
        :new.setk_origcrtrlogdin,
        :new.setk_las_act_by_logdin,
        :new.setk_univid,
        :new.setk_ddlnalrtrcpt,
        :new.setk_tsk_nam,
        :new.setk_tsk_dscn,
        :new.setk_drtn_amnt,
        :new.setk_drtn_unit,
        :new.setk_rmdrprcdwth__amnt,
        :new.setk_rmdrprcdwth__unit,
        :new.setk_prnl,
        :new.setk_subj,
        :new.setk_cmmt,
        :new.setk_cmpd,
        :new.setk_rmdrtim_orgn,
        :new.setk_ddlntim_blck_amnt,
        :new.setk_ddlntim_blck_unit,
        :new.setk_cnclcmmt,
        :new.setk_sent,
        :new.setk_srtd,
        :new.setk_tmtd,
        :new.setk_otcm,
        :new.setk_wkfwistcid,
        :new.setk_cnv_id,
        :new.setk_ownrchndflag,
        :new.setk_ownrchndcnt,
        :new.setk_src__src_typ,
        :new.setk_id,
        :new.setk_las_act_tim,
        null,
        u_senttsk.nextval,
        last_audid,
        null,
        :new.setk_reschedule_reason,
        :new.setk_reschedule_comment
      );
      -- update last audit record's valid_to to new LastActionTime and next audit ID to newly inserted record's sequence number
      update a_senttsk
        set
          valid_to        = :new.setk_las_act_tim,
          setk_next_audid = u_senttsk.currval
        where
          setk_audid = last_audid;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
215
</td>
<td>
THH_C4C
</td>
<td>
TRG_STTY_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SNRY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_STTY_AUDITINSERT&quot; BEFORE INSERT ON T_SNRY FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.stty_crtd IS NULL THEN 
    :new.stty_crtd := curr_date; 
  END IF; 

  IF :new.stty_las_act_tim IS NULL THEN 
    :new.stty_las_act_tim := curr_date; 
  END IF; 

  IF :new.stty_las_act IS NULL THEN 
    :new.stty_las_act := 1; 
  END IF; 

  IF :new.stty_obj_stt IS NULL THEN 
    :new.stty_obj_stt := 1; 
  END IF; 

  IF :new.stty_vers IS NULL THEN 
    :new.stty_vers := 0; 
  END IF; 

  IF :new.stty_vsbt IS NULL THEN 
    :new.stty_vsbt := 1001; 
  END IF; 

  IF :new.stty_las_act_by IS NULL THEN 
    :new.stty_las_act_by := 1; 
  END IF; 

  IF :new.stty_origcrtr IS NULL THEN 
    :new.stty_origcrtr := 1; 
  END IF; 

  IF :new.stty_origcrtrlogdin IS NULL THEN 
    :new.stty_origcrtrlogdin := 1; 
  END IF; 

  IF :new.stty_las_act_by_logdin IS NULL THEN 
    :new.stty_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_snry 
  ( 
   envl_typ_sbty, 
   lbl_typ_sbty, 
   stty_univid, 
   stty_nam, 
   stty_prus, 
   stty_cntt_contltrh, 
   stty_cntt_contimg, 
   stty_cntt_hght, 
   stty_cntt_wdth, 
   stty_cntt_top_mrgn, 
   stty_cntt_bttmmrgn, 
   stty_cntt_leftmrgn, 
   stty_cntt_rghtmrgn, 
   stty_cntt_nam, 
   stty_cntt_dat1, 
   stty_cntt_dat2, 
   stty_cntt_pagesiz, 
   faxc_frstatvd, 
   faxc_las_atvd, 
   faxc_las_dctd, 
   faxc_frstsbtdat, 
   faxc_las_sbtdat, 
   faxc_wkfwistcid, 
   faxc_cnv_id, 
   faxc_ownrchndflag, 
   faxc_ownrchndcnt, 
   faxc_dvtndt, 
   faxc_cmmt, 
   faxc_id, 
   envl_backcntt_contltrh, 
   envl_backcntt_contimg, 
   envl_backcntt_hght, 
   envl_backcntt_wdth, 
   envl_backcntt_top_mrgn, 
   envl_backcntt_bttmmrgn, 
   envl_backcntt_leftmrgn, 
   envl_backcntt_rghtmrgn, 
   envl_backcntt_nam, 
   envl_backcntt_dat1, 
   envl_backcntt_dat2, 
   envl_backcntt_pagesiz, 
   envl_frstatvd, 
   envl_las_atvd, 
   envl_las_dctd, 
   envl_frstsbtdat, 
   envl_las_sbtdat, 
   envl_wkfwistcid, 
   envl_cnv_id, 
   envl_ownrchndflag, 
   en
vl_ownrchndcnt, 
   envl_dvtndt, 
   envl_cmmt, 
   envl_id, 
   lbl_frstatvd, 
   lbl_las_atvd, 
   lbl_las_dctd, 
   lbl_frstsbtdat, 
   lbl_las_sbtdat, 
   lbl_wkfwistcid, 
   lbl_cnv_id, 
   lbl_ownrchndflag, 
   lbl_ownrchndcnt, 
   lbl_dvtndt, 
   lbl_cmmt, 
   lbl_id, 
   stty_cntt_cntt, 
   faxc_las_dctdby, 
   faxc_frstatvdby, 
   faxc_las_atvdby, 
   faxc_ratnapvl, 
   faxc_apvl, 
   faxc_rcpttrkg, 
   faxc_las_sbtdby, 
   faxc_frstsbtdby, 
   faxc_rfngwkfwtsk, 
   faxc_prvsrfngtsk, 
   faxc_prvsrfngtsk_prmn, 
   faxc_ownr, 
   faxc_prvsownr, 
   faxc_prvssndr, 
   faxc_prvsownrprmn, 
   faxc_tnfr, 
   faxc_prvstnfr, 
   envl_backcntt_cntt, 
   envl_las_dctdby, 
   envl_frstatvdby, 
   envl_las_atvdby, 
   envl_ratnapvl, 
   envl_apvl, 
   envl_rcpttrkg, 
   envl_las_sbtdby, 
   envl_frstsbtdby, 
   envl_rfngwkfwtsk, 
   envl_prvsrfngtsk, 
   envl_prvsrfngtsk_prmn, 
   envl_ownr, 
   envl_prvsownr, 
   envl_prvssndr, 
   envl_prvsownrprmn, 
   envl_tnfr, 
   envl_prvstnfr, 
   lbl_las_dctdby, 
   lbl_frstatvdby, 
   lbl_las_atvdby, 
   lbl_ratnapvl, 
   lbl_apvl, 
   lbl_rcpttrkg, 
   lbl_las_sbtdby, 
   lbl_frstsbtdby, 
   lbl_rfngwkfwtsk, 
   lbl_prvsrfngtsk, 
   lbl_prvsrfngtsk_prmn, 
   lbl_ownr, 
   lbl_prvsownr, 
   lbl_prvssndr, 
   lbl_prvsownrprmn, 
   lbl_tnfr, 
   lbl_prvstnfr, 
   faxc_typ_sbty, 
   classtype, 
   stty_c4c_id, 
   stty_crtd, 
   stty_las_act, 
   stty_las_act_actrtyp, 
   stty_obj_stt, 
   stty_vers, 
   stty_vsbt, 
   stty_dltddt, 
   stty_las_act_by, 
   stty_origcrtr, 
   stty_origcrtrlogdin, 
   stty_las_act_by_logdin, 
   stty_id, 
   valid_from, 
   valid_to , 
   stty_audid, 
   stty_prev_audid, 
   stty_next_audid
  ) 
  VALUES 
  ( 
   :new.envl_typ_sbty,
   :new.lbl_typ_sbty,
   :new.stty_univid,
   :new.stty_nam,
   :new.stty_prus,
   :new.stty_cntt_contltrh,
   :new.stty_cntt_contimg,
   :new.stty_cntt_hght,
   :new.stty_cntt_wdth,
   :new.stty_cntt_top_mrgn,
   :new.stty_cntt_bttmmrgn,
   :new.stty_cntt_leftmrgn,

  :new.stty_cntt_rghtmrgn,
   :new.stty_cntt_nam,
   :new.stty_cntt_dat1,
   :new.stty_cntt_dat2,
   :new.stty_cntt_pagesiz,
   :new.faxc_frstatvd,
   :new.faxc_las_atvd,
   :new.faxc_las_dctd,
   :new.faxc_frstsbtdat,
   :new.faxc_las_sbtdat,
   :new.faxc_wkfwistcid,
   :new.faxc_cnv_id,
   :new.faxc_ownrchndflag,
   :new.faxc_ownrchndcnt,
   :new.faxc_dvtndt,
   :new.faxc_cmmt,
   :new.faxc_id,
   :new.envl_backcntt_contltrh,
   :new.envl_backcntt_contimg,
   :new.envl_backcntt_hght,
   :new.envl_backcntt_wdth,
   :new.envl_backcntt_top_mrgn,
   :new.envl_backcntt_bttmmrgn,
   :new.envl_backcntt_leftmrgn,
   :new.envl_backcntt_rghtmrgn,
   :new.envl_backcntt_nam,
   :new.envl_backcntt_dat1,
   :new.envl_backcntt_dat2,
   :new.envl_backcntt_pagesiz,
   :new.envl_frstatvd,
   :new.envl_las_atvd,
   :new.envl_las_dctd,
   :new.envl_frstsbtdat,
   :new.envl_las_sbtdat,
   :new.envl_wkfwistcid,
   :new.envl_cnv_id,
   :new.envl_ownrchndflag,
   :new.envl_ownrchndcnt,
   :new.envl_dvtndt,
   :new.envl_cmmt,
   :new.envl_id,
   :new.lbl_frstatvd,
   :new.lbl_las_atvd,
   :new.lbl_las_dctd,
   :new.lbl_frstsbtdat,
   :new.lbl_las_sbtdat,
   :new.lbl_wkfwistcid,
   :new.lbl_cnv_id,
   :new.lbl_ownrchndflag,
   :new.lbl_ownrchndcnt,
   :new.lbl_dvtndt,
   :new.lbl_cmmt,
   :new.lbl_id,
   :new.stty_cntt_cntt,
   :new.faxc_las_dctdby,
   :new.faxc_frstatvdby,
   :new.faxc_las_atvdby,
   :new.faxc_ratnapvl,
   :new.faxc_apvl,
   :new.faxc_rcpttrkg,
   :new.faxc_las_sbtdby,
   :new.faxc_frstsbtdby,
   :new.faxc_rfngwkfwtsk,
   :new.faxc_prvsrfngtsk,
   :new.faxc_prvsrfngtsk_prmn,
   :new.faxc_ownr,
   :new.faxc_prvsownr,
   :new.faxc_prvssndr,
   :new.faxc_prvsownrprmn,
   :new.faxc_tnfr,
   :new.faxc_prvstnfr,
   :new.envl_backcntt_cntt,
   :new.envl_las_dctdby,
   :new.envl_frstatvdby,
   :new.envl_las_atvdby,
   :new.envl_ratnapvl,
   :new.envl_apvl,
   :new.envl_rcpttrkg,
   :new.envl_las_sbtdby,
   :new.envl_frstsbtdby,
   :new.envl_rfngwkfwtsk,
   :new.envl_prvsrfngtsk,

   :new.envl_prvsrfngtsk_prmn,
   :new.envl_ownr,
   :new.envl_prvsownr,
   :new.envl_prvssndr,
   :new.envl_prvsownrprmn,
   :new.envl_tnfr,
   :new.envl_prvstnfr,
   :new.lbl_las_dctdby,
   :new.lbl_frstatvdby,
   :new.lbl_las_atvdby,
   :new.lbl_ratnapvl,
   :new.lbl_apvl,
   :new.lbl_rcpttrkg,
   :new.lbl_las_sbtdby,
   :new.lbl_frstsbtdby,
   :new.lbl_rfngwkfwtsk,
   :new.lbl_prvsrfngtsk,
   :new.lbl_prvsrfngtsk_prmn,
   :new.lbl_ownr,
   :new.lbl_prvsownr,
   :new.lbl_prvssndr,
   :new.lbl_prvsownrprmn,
   :new.lbl_tnfr,
   :new.lbl_prvstnfr,
   :new.faxc_typ_sbty,
   :new.classtype,
   :new.stty_c4c_id,
   :new.stty_crtd,
   :new.stty_las_act,
   :new.stty_las_act_actrtyp,
   :new.stty_obj_stt,
   :new.stty_vers,
   :new.stty_vsbt,
   :new.stty_dltddt,
   :new.stty_las_act_by,
   :new.stty_origcrtr,
   :new.stty_origcrtrlogdin,
   :new.stty_las_act_by_logdin, 
   :new.stty_id, 
   :new.stty_las_act_tim, 
   NULL, 
   u_snry.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
216
</td>
<td>
THH_C4C
</td>
<td>
TRG_STTY_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SNRY
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_stty_auditupdate BEFORE
  UPDATE
    ON T_SNRY FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        stty_audid
      INTO
        last_audid
      FROM
        a_snry
      WHERE
        stty_id            = :old.stty_id
      AND stty_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.stty_las_act_tim = :new.stty_las_act_tim THEN
      UPDATE
        a_snry
      SET
        faxc_frstsbtdat        = :new.faxc_frstsbtdat,
        faxc_las_sbtdat        = :new.faxc_las_sbtdat,
        faxc_wkfwistcid        = :new.faxc_wkfwistcid,
        faxc_cnv_id            = :new.faxc_cnv_id,
        faxc_ownrchndflag      = :new.faxc_ownrchndflag,
        faxc_ownrchndcnt       = :new.faxc_ownrchndcnt,
        faxc_dvtndt            = :new.faxc_dvtndt,
        faxc_cmmt              = :new.faxc_cmmt,
        faxc_id                = :new.faxc_id,
        envl_backcntt_contltrh = :new.envl_backcntt_contltrh,
        envl_backcntt_contimg  = :new.envl_backcntt_contimg,
        envl_backcntt_hght     = :new.envl_backcntt_hght,
        envl_backcntt_wdth     = :new.envl_backcntt_wdth,
        envl_backcntt_top_mrgn = :new.envl_backcntt_top_mrgn,
        envl_backcntt_bttmmrgn = :new.envl_backcntt_bttmmrgn,
        envl_backcntt_leftmrgn = :new.envl_backcntt_leftmrgn,
        envl_backcntt_rghtmrgn = :new.envl_backcntt_rghtmrgn,
        envl_backcntt_nam      = :new.envl_backcntt_nam,
        envl_backcntt_dat1     = :new.envl_backcntt_dat1,
        envl_backcntt_dat2     = :new.envl_backcntt_dat2,
        envl_backcntt_pagesiz  = :new.envl_backcntt_pagesiz,
        envl_frstatvd          = :new.envl_frstatvd,
        envl_las_atvd          = :new.envl_las_atvd,
        envl_las_dctd          = :new.envl_las_dctd,
        envl_frstsbtdat        = :new.envl_frstsbtdat,
        e
nvl_las_sbtdat        = :new.envl_las_sbtdat,
        envl_wkfwistcid        = :new.envl_wkfwistcid,
        envl_cnv_id            = :new.envl_cnv_id,
        envl_ownrchndflag      = :new.envl_ownrchndflag,
        envl_ownrchndcnt       = :new.envl_ownrchndcnt,
        envl_dvtndt            = :new.envl_dvtndt,
        envl_cmmt              = :new.envl_cmmt,
        envl_id                = :new.envl_id,
        lbl_frstatvd           = :new.lbl_frstatvd,
        lbl_las_atvd           = :new.lbl_las_atvd,
        lbl_las_dctd           = :new.lbl_las_dctd,
        lbl_frstsbtdat         = :new.lbl_frstsbtdat,
        lbl_las_sbtdat         = :new.lbl_las_sbtdat,
        lbl_wkfwistcid         = :new.lbl_wkfwistcid,
        lbl_cnv_id             = :new.lbl_cnv_id,
        lbl_ownrchndflag       = :new.lbl_ownrchndflag,
        lbl_ownrchndcnt        = :new.lbl_ownrchndcnt,
        lbl_dvtndt             = :new.lbl_dvtndt,
        lbl_cmmt               = :new.lbl_cmmt,
        lbl_id                 = :new.lbl_id,
        stty_cntt_cntt         = :new.stty_cntt_cntt,
        faxc_las_dctdby        = :new.faxc_las_dctdby,
        faxc_frstatvdby        = :new.faxc_frstatvdby,
        faxc_las_atvdby        = :new.faxc_las_atvdby,
        faxc_ratnapvl          = :new.faxc_ratnapvl,
        faxc_apvl              = :new.faxc_apvl,
        faxc_rcpttrkg          = :new.faxc_rcpttrkg,
        faxc_las_sbtdby        = :new.faxc_las_sbtdby,
        faxc_frstsbtdby        = :new.faxc_frstsbtdby,
        faxc_rfngwkfwtsk       = :new.faxc_rfngwkfwtsk,
        faxc_prvsrfngtsk       = :new.faxc_prvsrfngtsk,
        faxc_prvsrfngtsk_prmn  = :new.faxc_prvsrfngtsk_prmn,
        faxc_ownr              = :new.faxc_ownr,
        faxc_prvsownr          = :new.faxc_prvsownr,
        faxc_prvssndr          = :new.faxc_prvssndr,
        faxc_prvsownrprmn      = :new.faxc_prvsownrprmn,
        faxc_tnfr              = :new.faxc_tnfr,
        faxc_prvstnfr          = :new.faxc_prvs
tnfr,
        envl_backcntt_cntt     = :new.envl_backcntt_cntt,
        envl_las_dctdby        = :new.envl_las_dctdby,
        envl_frstatvdby        = :new.envl_frstatvdby,
        envl_las_atvdby        = :new.envl_las_atvdby,
        envl_ratnapvl          = :new.envl_ratnapvl,
        envl_apvl              = :new.envl_apvl,
        envl_rcpttrkg          = :new.envl_rcpttrkg,
        envl_las_sbtdby        = :new.envl_las_sbtdby,
        envl_frstsbtdby        = :new.envl_frstsbtdby,
        envl_rfngwkfwtsk       = :new.envl_rfngwkfwtsk,
        envl_prvsrfngtsk       = :new.envl_prvsrfngtsk,
        envl_prvsrfngtsk_prmn  = :new.envl_prvsrfngtsk_prmn,
        envl_ownr              = :new.envl_ownr,
        envl_prvsownr          = :new.envl_prvsownr,
        envl_prvssndr          = :new.envl_prvssndr,
        envl_prvsownrprmn      = :new.envl_prvsownrprmn,
        envl_tnfr              = :new.envl_tnfr,
        envl_prvstnfr          = :new.envl_prvstnfr,
        lbl_las_dctdby         = :new.lbl_las_dctdby,
        lbl_frstatvdby         = :new.lbl_frstatvdby,
        lbl_las_atvdby         = :new.lbl_las_atvdby,
        lbl_ratnapvl           = :new.lbl_ratnapvl,
        lbl_apvl               = :new.lbl_apvl,
        lbl_rcpttrkg           = :new.lbl_rcpttrkg,
        lbl_las_sbtdby         = :new.lbl_las_sbtdby,
        lbl_frstsbtdby         = :new.lbl_frstsbtdby,
        lbl_rfngwkfwtsk        = :new.lbl_rfngwkfwtsk,
        lbl_prvsrfngtsk        = :new.lbl_prvsrfngtsk,
        lbl_prvsrfngtsk_prmn   = :new.lbl_prvsrfngtsk_prmn,
        lbl_ownr               = :new.lbl_ownr,
        lbl_prvsownr           = :new.lbl_prvsownr,
        lbl_prvssndr           = :new.lbl_prvssndr,
        lbl_prvsownrprmn       = :new.lbl_prvsownrprmn,
        lbl_tnfr               = :new.lbl_tnfr,
        lbl_prvstnfr           = :new.lbl_prvstnfr,
        faxc_typ_sbty          = :new.faxc_typ_sbty,
        envl_typ_sbty          = :new.envl_typ_sbty,
        lbl_t
yp_sbty           = :new.lbl_typ_sbty,
        classtype              = :new.classtype,
        stty_c4c_id            = :new.stty_c4c_id,
        stty_crtd              = :new.stty_crtd,
        stty_las_act           = :new.stty_las_act,
        stty_las_act_actrtyp   = :new.stty_las_act_actrtyp,
        stty_obj_stt           = :new.stty_obj_stt,
        stty_vers              = :new.stty_vers,
        stty_vsbt              = :new.stty_vsbt,
        stty_dltddt            = :new.stty_dltddt,
        stty_las_act_by        = :new.stty_las_act_by,
        stty_origcrtr          = :new.stty_origcrtr,
        stty_origcrtrlogdin    = :new.stty_origcrtrlogdin,
        stty_las_act_by_logdin = :new.stty_las_act_by_logdin,
        stty_univid            = :new.stty_univid,
        stty_nam               = :new.stty_nam,
        stty_prus              = :new.stty_prus,
        stty_cntt_contltrh     = :new.stty_cntt_contltrh,
        stty_cntt_contimg      = :new.stty_cntt_contimg,
        stty_cntt_hght         = :new.stty_cntt_hght,
        stty_cntt_wdth         = :new.stty_cntt_wdth,
        stty_cntt_top_mrgn     = :new.stty_cntt_top_mrgn,
        stty_cntt_bttmmrgn     = :new.stty_cntt_bttmmrgn,
        stty_cntt_leftmrgn     = :new.stty_cntt_leftmrgn,
        stty_cntt_rghtmrgn     = :new.stty_cntt_rghtmrgn,
        stty_cntt_nam          = :new.stty_cntt_nam,
        stty_cntt_dat1         = :new.stty_cntt_dat1,
        stty_cntt_dat2         = :new.stty_cntt_dat2,
        stty_cntt_pagesiz      = :new.stty_cntt_pagesiz,
        faxc_frstatvd          = :new.faxc_frstatvd,
        faxc_las_atvd          = :new.faxc_las_atvd,
        faxc_las_dctd          = :new.faxc_las_dctd
      WHERE
        stty_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_snry
        (
          faxc_frstsbtdat,
          faxc_las_sbtdat,

  faxc_wkfwistcid,
          faxc_cnv_id,
          faxc_ownrchndflag,
          faxc_ownrchndcnt,
          faxc_dvtndt,
          faxc_cmmt,
          faxc_id,
          envl_backcntt_contltrh,
          envl_backcntt_contimg,
          envl_backcntt_hght,
          envl_backcntt_wdth,
          envl_backcntt_top_mrgn,
          envl_backcntt_bttmmrgn,
          envl_backcntt_leftmrgn,
          envl_backcntt_rghtmrgn,
          envl_backcntt_nam,
          envl_backcntt_dat1,
          envl_backcntt_dat2,
          envl_backcntt_pagesiz,
          envl_frstatvd,
          envl_las_atvd,
          envl_las_dctd,
          envl_frstsbtdat,
          envl_las_sbtdat,
          envl_wkfwistcid,
          envl_cnv_id,
          envl_ownrchndflag,
          envl_ownrchndcnt,
          envl_dvtndt,
          envl_cmmt,
          envl_id,
          lbl_frstatvd,
          lbl_las_atvd,
          lbl_las_dctd,
          lbl_frstsbtdat,
          lbl_las_sbtdat,
          lbl_wkfwistcid,
          lbl_cnv_id,
          lbl_ownrchndflag,
          lbl_ownrchndcnt,
          lbl_dvtndt,
          lbl_cmmt,
          lbl_id,
          stty_cntt_cntt,
          faxc_las_dctdby,
          faxc_frstatvdby,
          faxc_las_atvdby,
          faxc_ratnapvl,
          faxc_apvl,
          faxc_rcpttrkg,
          faxc_las_sbtdby,
          faxc_frstsbtdby,
          faxc_rfngwkfwtsk,
          faxc_prvsrfngtsk,
          faxc_prvsrfngtsk_prmn,
          faxc_ownr,
          faxc_prvsownr,
          faxc_prvssndr,
          faxc_prvsownrprmn,
          faxc_tnfr,
          faxc_prvstnfr,
          envl_backcntt_cntt,
          envl_las_dctdby,
          envl_frstatvdby,
          envl_las_atvdby,
          envl_ratnapvl,
          envl_apvl,
          envl_rcpttrkg,
          envl_las_sbtdby,
          envl_frstsbtdby,
          envl_rfngwkfwtsk,
          envl_prvsrfngtsk,
          envl_prvsrfngtsk_prmn,
          envl_ownr,
          envl_prvsownr,
          envl_prvssndr,

      envl_prvsownrprmn,
          envl_tnfr,
          envl_prvstnfr,
          lbl_las_dctdby,
          lbl_frstatvdby,
          lbl_las_atvdby,
          lbl_ratnapvl,
          lbl_apvl,
          lbl_rcpttrkg,
          lbl_las_sbtdby,
          lbl_frstsbtdby,
          lbl_rfngwkfwtsk,
          lbl_prvsrfngtsk,
          lbl_prvsrfngtsk_prmn,
          lbl_ownr,
          lbl_prvsownr,
          lbl_prvssndr,
          lbl_prvsownrprmn,
          lbl_tnfr,
          lbl_prvstnfr,
          faxc_typ_sbty,
          envl_typ_sbty,
          lbl_typ_sbty,
          classtype,
          stty_c4c_id,
          stty_crtd,
          stty_las_act,
          stty_las_act_actrtyp,
          stty_obj_stt,
          stty_vers,
          stty_vsbt,
          stty_dltddt,
          stty_las_act_by,
          stty_origcrtr,
          stty_origcrtrlogdin,
          stty_las_act_by_logdin,
          stty_univid,
          stty_nam,
          stty_prus,
          stty_cntt_contltrh,
          stty_cntt_contimg,
          stty_cntt_hght,
          stty_cntt_wdth,
          stty_cntt_top_mrgn,
          stty_cntt_bttmmrgn,
          stty_cntt_leftmrgn,
          stty_cntt_rghtmrgn,
          stty_cntt_nam,
          stty_cntt_dat1,
          stty_cntt_dat2,
          stty_cntt_pagesiz,
          faxc_frstatvd,
          faxc_las_atvd,
          faxc_las_dctd,
          stty_id,
          valid_from,
          valid_to,
          stty_audid,
          stty_prev_audid,
          stty_next_audid
        )
        VALUES
        (
          :new.faxc_frstsbtdat,
          :new.faxc_las_sbtdat,
          :new.faxc_wkfwistcid,
          :new.faxc_cnv_id,
          :new.faxc_ownrchndflag,
          :new.faxc_ownrchndcnt,
          :new.faxc_dvtndt,
          :new.faxc_cmmt,
          :new.faxc_id,
          :new.envl_backcntt_contltrh,
          :new.envl_backcntt_contimg,
          :new.envl_backcntt_hght,
          :new.envl_backcntt_wdth,
          :new.envl_backcntt_top_mrgn,

        :new.envl_backcntt_bttmmrgn,
          :new.envl_backcntt_leftmrgn,
          :new.envl_backcntt_rghtmrgn,
          :new.envl_backcntt_nam,
          :new.envl_backcntt_dat1,
          :new.envl_backcntt_dat2,
          :new.envl_backcntt_pagesiz,
          :new.envl_frstatvd,
          :new.envl_las_atvd,
          :new.envl_las_dctd,
          :new.envl_frstsbtdat,
          :new.envl_las_sbtdat,
          :new.envl_wkfwistcid,
          :new.envl_cnv_id,
          :new.envl_ownrchndflag,
          :new.envl_ownrchndcnt,
          :new.envl_dvtndt,
          :new.envl_cmmt,
          :new.envl_id,
          :new.lbl_frstatvd,
          :new.lbl_las_atvd,
          :new.lbl_las_dctd,
          :new.lbl_frstsbtdat,
          :new.lbl_las_sbtdat,
          :new.lbl_wkfwistcid,
          :new.lbl_cnv_id,
          :new.lbl_ownrchndflag,
          :new.lbl_ownrchndcnt,
          :new.lbl_dvtndt,
          :new.lbl_cmmt,
          :new.lbl_id,
          :new.stty_cntt_cntt,
          :new.faxc_las_dctdby,
          :new.faxc_frstatvdby,
          :new.faxc_las_atvdby,
          :new.faxc_ratnapvl,
          :new.faxc_apvl,
          :new.faxc_rcpttrkg,
          :new.faxc_las_sbtdby,
          :new.faxc_frstsbtdby,
          :new.faxc_rfngwkfwtsk,
          :new.faxc_prvsrfngtsk,
          :new.faxc_prvsrfngtsk_prmn,
          :new.faxc_ownr,
          :new.faxc_prvsownr,
          :new.faxc_prvssndr,
          :new.faxc_prvsownrprmn,
          :new.faxc_tnfr,
          :new.faxc_prvstnfr,
          :new.envl_backcntt_cntt,
          :new.envl_las_dctdby,
          :new.envl_frstatvdby,
          :new.envl_las_atvdby,
          :new.envl_ratnapvl,
          :new.envl_apvl,
          :new.envl_rcpttrkg,
          :new.envl_las_sbtdby,
          :new.envl_frstsbtdby,
          :new.envl_rfngwkfwtsk,
          :new.envl_prvsrfngtsk,
          :new.envl_prvsrfngtsk_prmn,
          :new.envl_ownr,
          :new.envl_prvsownr,
          :new.envl_prvssndr,

 :new.envl_prvsownrprmn,
          :new.envl_tnfr,
          :new.envl_prvstnfr,
          :new.lbl_las_dctdby,
          :new.lbl_frstatvdby,
          :new.lbl_las_atvdby,
          :new.lbl_ratnapvl,
          :new.lbl_apvl,
          :new.lbl_rcpttrkg,
          :new.lbl_las_sbtdby,
          :new.lbl_frstsbtdby,
          :new.lbl_rfngwkfwtsk,
          :new.lbl_prvsrfngtsk,
          :new.lbl_prvsrfngtsk_prmn,
          :new.lbl_ownr,
          :new.lbl_prvsownr,
          :new.lbl_prvssndr,
          :new.lbl_prvsownrprmn,
          :new.lbl_tnfr,
          :new.lbl_prvstnfr,
          :new.faxc_typ_sbty,
          :new.envl_typ_sbty,
          :new.lbl_typ_sbty,
          :new.classtype,
          :new.stty_c4c_id,
          :new.stty_crtd,
          :new.stty_las_act,
          :new.stty_las_act_actrtyp,
          :new.stty_obj_stt,
          :new.stty_vers,
          :new.stty_vsbt,
          :new.stty_dltddt,
          :new.stty_las_act_by,
          :new.stty_origcrtr,
          :new.stty_origcrtrlogdin,
          :new.stty_las_act_by_logdin,
          :new.stty_univid,
          :new.stty_nam,
          :new.stty_prus,
          :new.stty_cntt_contltrh,
          :new.stty_cntt_contimg,
          :new.stty_cntt_hght,
          :new.stty_cntt_wdth,
          :new.stty_cntt_top_mrgn,
          :new.stty_cntt_bttmmrgn,
          :new.stty_cntt_leftmrgn,
          :new.stty_cntt_rghtmrgn,
          :new.stty_cntt_nam,
          :new.stty_cntt_dat1,
          :new.stty_cntt_dat2,
          :new.stty_cntt_pagesiz,
          :new.faxc_frstatvd,
          :new.faxc_las_atvd,
          :new.faxc_las_dctd,
          :new.stty_id,
          :new.stty_las_act_tim,
          NULL,
          u_snry.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_snry
      SET
        valid_to        = :new.stty
_las_act_tim,
        stty_next_audid = u_snry.CURRVAL
      WHERE
        stty_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
217
</td>
<td>
THH_C4C
</td>
<td>
TRG_SVDC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SRVCDVONCNTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SVDC_AUDITINSERT&quot; BEFORE INSERT ON T_SRVCDVONCNTR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.svdc_crtd IS NULL THEN 
    :new.svdc_crtd := curr_date; 
  END IF; 

  IF :new.svdc_las_act_tim IS NULL THEN 
    :new.svdc_las_act_tim := curr_date; 
  END IF; 

  IF :new.svdc_las_act IS NULL THEN 
    :new.svdc_las_act := 1; 
  END IF; 

  IF :new.svdc_obj_stt IS NULL THEN 
    :new.svdc_obj_stt := 1; 
  END IF; 

  IF :new.svdc_vers IS NULL THEN 
    :new.svdc_vers := 0; 
  END IF; 

  IF :new.svdc_vsbt IS NULL THEN 
    :new.svdc_vsbt := 1001; 
  END IF; 

  IF :new.svdc_las_act_by IS NULL THEN 
    :new.svdc_las_act_by := 1; 
  END IF; 

  IF :new.svdc_origcrtr IS NULL THEN 
    :new.svdc_origcrtr := 1; 
  END IF; 

  IF :new.svdc_origcrtrlogdin IS NULL THEN 
    :new.svdc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.svdc_las_act_by_logdin IS NULL THEN 
    :new.svdc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_srvcdvoncntr 
  ( 
   classtype, 
   svdc_c4c_id, 
   svdc_crtd, 
   svdc_las_act, 
   svdc_las_act_actrtyp, 
   svdc_obj_stt, 
   svdc_vers, 
   svdc_vsbt, 
   svdc_dltddt, 
   svdc_las_act_by, 
   svdc_origcrtr, 
   svdc_origcrtrlogdin, 
   svdc_las_act_by_logdin, 
   svdc_univid, 
   svdc_srvc, 
   svdc_memb, 
   svdc_id, 
   valid_from, 
   valid_to , 
   svdc_audid, 
   svdc_prev_audid, 
   svdc_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.svdc_c4c_id,
   :new.svdc_crtd,
   :new.svdc_las_act,
   :new.svdc_las_act_actrtyp,
   :new.svdc_obj_stt,
   :new.svdc_vers,
   :new.svdc_vsbt,
   :new.svdc_dltddt,
   :new.svdc_las_act_by,
   :new.svdc_origcrtr,
   :new.svdc_origcrtrlogdin,
   :new.svdc_las_act_by_logdin,
   :new.svdc_univid,
   :new.svdc_srvc,
   :new.svdc_memb, 
   :new.svdc_id, 
   :new.svdc_las_act_tim, 
   NULL, 
   u_srvcdvoncntr.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
218
</td>
<td>
THH_C4C
</td>
<td>
TRG_SVDC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SRVCDVONCNTR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_svdc_auditupdate BEFORE
  UPDATE
    ON T_SRVCDVONCNTR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        svdc_audid
      INTO
        last_audid
      FROM
        a_srvcdvoncntr
      WHERE
        svdc_id            = :old.svdc_id
      AND svdc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.svdc_las_act_tim = :new.svdc_las_act_tim THEN
      UPDATE
        a_srvcdvoncntr
      SET
        classtype              = :new.classtype,
        svdc_c4c_id            = :new.svdc_c4c_id,
        svdc_crtd              = :new.svdc_crtd,
        svdc_las_act           = :new.svdc_las_act,
        svdc_las_act_actrtyp   = :new.svdc_las_act_actrtyp,
        svdc_obj_stt           = :new.svdc_obj_stt,
        svdc_vers              = :new.svdc_vers,
        svdc_vsbt              = :new.svdc_vsbt,
        svdc_dltddt            = :new.svdc_dltddt,
        svdc_las_act_by        = :new.svdc_las_act_by,
        svdc_origcrtr          = :new.svdc_origcrtr,
        svdc_origcrtrlogdin    = :new.svdc_origcrtrlogdin,
        svdc_las_act_by_logdin = :new.svdc_las_act_by_logdin,
        svdc_univid            = :new.svdc_univid,
        svdc_srvc              = :new.svdc_srvc,
        svdc_memb              = :new.svdc_memb
      WHERE
        svdc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_srvcdvoncntr
        (
          classtype,
          svdc_c4c_id,
          svdc_crtd,
          svdc_las_act,
          svdc_las_act_actrtyp,
          svdc_obj_stt,
          svdc_vers,
          svdc_vsbt,
          svdc_dltddt,
          svdc_las_act_by,
          svdc_origcrtr,
          svdc_origcrtrlogdin,
          svdc_las_act_by_logdin,

         svdc_univid,
          svdc_srvc,
          svdc_memb,
          svdc_id,
          valid_from,
          valid_to,
          svdc_audid,
          svdc_prev_audid,
          svdc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.svdc_c4c_id,
          :new.svdc_crtd,
          :new.svdc_las_act,
          :new.svdc_las_act_actrtyp,
          :new.svdc_obj_stt,
          :new.svdc_vers,
          :new.svdc_vsbt,
          :new.svdc_dltddt,
          :new.svdc_las_act_by,
          :new.svdc_origcrtr,
          :new.svdc_origcrtrlogdin,
          :new.svdc_las_act_by_logdin,
          :new.svdc_univid,
          :new.svdc_srvc,
          :new.svdc_memb,
          :new.svdc_id,
          :new.svdc_las_act_tim,
          NULL,
          u_srvcdvoncntr.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_srvcdvoncntr
      SET
        valid_to        = :new.svdc_las_act_tim,
        svdc_next_audid = u_srvcdvoncntr.CURRVAL
      WHERE
        svdc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
219
</td>
<td>
THH_C4C
</td>
<td>
TRG_SNTS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_STCYNOTESNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SNTS_AUDITINSERT&quot; BEFORE INSERT ON T_STCYNOTESNGS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.snts_crtd IS NULL THEN 
    :new.snts_crtd := curr_date; 
  END IF; 

  IF :new.snts_las_act_tim IS NULL THEN 
    :new.snts_las_act_tim := curr_date; 
  END IF; 

  IF :new.snts_las_act IS NULL THEN 
    :new.snts_las_act := 1; 
  END IF; 

  IF :new.snts_obj_stt IS NULL THEN 
    :new.snts_obj_stt := 1; 
  END IF; 

  IF :new.snts_vers IS NULL THEN 
    :new.snts_vers := 0; 
  END IF; 

  IF :new.snts_vsbt IS NULL THEN 
    :new.snts_vsbt := 1001; 
  END IF; 

  IF :new.snts_las_act_by IS NULL THEN 
    :new.snts_las_act_by := 1; 
  END IF; 

  IF :new.snts_origcrtr IS NULL THEN 
    :new.snts_origcrtr := 1; 
  END IF; 

  IF :new.snts_origcrtrlogdin IS NULL THEN 
    :new.snts_origcrtrlogdin := 1; 
  END IF; 

  IF :new.snts_las_act_by_logdin IS NULL THEN 
    :new.snts_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_stcynotesngs 
  ( 
   snts_origcrtrlogdin, 
   snts_las_act_by_logdin, 
   snts_univid, 
   snts_awyson_top, 
   snts_bg_clr, 
   snts_txt_clr, 
   snts_font, 
   classtype, 
   snts_c4c_id, 
   snts_crtd, 
   snts_las_act, 
   snts_las_act_actrtyp, 
   snts_obj_stt, 
   snts_vers, 
   snts_vsbt, 
   snts_dltddt, 
   snts_las_act_by, 
   snts_origcrtr, 
   snts_id, 
   valid_from, 
   valid_to , 
   snts_audid, 
   snts_prev_audid, 
   snts_next_audid
  ) 
  VALUES 
  ( 
   :new.snts_origcrtrlogdin,
   :new.snts_las_act_by_logdin,
   :new.snts_univid,
   :new.snts_awyson_top,
   :new.snts_bg_clr,
   :new.snts_txt_clr,
   :new.snts_font,
   :new.classtype,
   :new.snts_c4c_id,
   :new.snts_crtd,
   :new.snts_las_act,
   :new.snts_las_act_actrtyp,
   :new.snts_obj_stt,
   :new.snts_vers,
   :new.snts_vsbt,
   :new.snts_dltddt,
   :new.snts_las_act_by,
   :new.snts_origcrtr, 
   :new.snts_id, 
   :new.snts_las_act_tim, 
   NULL, 
   u_stcynotesngs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
220
</td>
<td>
THH_C4C
</td>
<td>
TRG_SNTS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_STCYNOTESNGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_snts_auditupdate BEFORE
  UPDATE
    ON T_STCYNOTESNGS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        snts_audid
      INTO
        last_audid
      FROM
        a_stcynotesngs
      WHERE
        snts_id            = :old.snts_id
      AND snts_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.snts_las_act_tim = :new.snts_las_act_tim THEN
      UPDATE
        a_stcynotesngs
      SET
        classtype              = :new.classtype,
        snts_c4c_id            = :new.snts_c4c_id,
        snts_crtd              = :new.snts_crtd,
        snts_las_act           = :new.snts_las_act,
        snts_las_act_actrtyp   = :new.snts_las_act_actrtyp,
        snts_obj_stt           = :new.snts_obj_stt,
        snts_vers              = :new.snts_vers,
        snts_vsbt              = :new.snts_vsbt,
        snts_dltddt            = :new.snts_dltddt,
        snts_las_act_by        = :new.snts_las_act_by,
        snts_origcrtr          = :new.snts_origcrtr,
        snts_origcrtrlogdin    = :new.snts_origcrtrlogdin,
        snts_las_act_by_logdin = :new.snts_las_act_by_logdin,
        snts_univid            = :new.snts_univid,
        snts_awyson_top        = :new.snts_awyson_top,
        snts_bg_clr            = :new.snts_bg_clr,
        snts_txt_clr           = :new.snts_txt_clr,
        snts_font              = :new.snts_font
      WHERE
        snts_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_stcynotesngs
        (
          classtype,
          snts_c4c_id,
          snts_crtd,
          snts_las_act,
          snts_las_act_actrtyp,
          snts_obj_stt,
          snts_vers,
          snts_vsbt,
          snts_dltddt,

 snts_las_act_by,
          snts_origcrtr,
          snts_origcrtrlogdin,
          snts_las_act_by_logdin,
          snts_univid,
          snts_awyson_top,
          snts_bg_clr,
          snts_txt_clr,
          snts_font,
          snts_id,
          valid_from,
          valid_to,
          snts_audid,
          snts_prev_audid,
          snts_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.snts_c4c_id,
          :new.snts_crtd,
          :new.snts_las_act,
          :new.snts_las_act_actrtyp,
          :new.snts_obj_stt,
          :new.snts_vers,
          :new.snts_vsbt,
          :new.snts_dltddt,
          :new.snts_las_act_by,
          :new.snts_origcrtr,
          :new.snts_origcrtrlogdin,
          :new.snts_las_act_by_logdin,
          :new.snts_univid,
          :new.snts_awyson_top,
          :new.snts_bg_clr,
          :new.snts_txt_clr,
          :new.snts_font,
          :new.snts_id,
          :new.snts_las_act_tim,
          NULL,
          u_stcynotesngs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_stcynotesngs
      SET
        valid_to        = :new.snts_las_act_tim,
        snts_next_audid = u_stcynotesngs.CURRVAL
      WHERE
        snts_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
221
</td>
<td>
THH_C4C
</td>
<td>
TRG_SAV_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SAV_AUDITINSERT&quot; BEFORE INSERT ON T_SVGS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.sav_crtd IS NULL THEN 
    :new.sav_crtd := curr_date; 
  END IF; 

  IF :new.sav_las_act_tim IS NULL THEN 
    :new.sav_las_act_tim := curr_date; 
  END IF; 

  IF :new.sav_las_act IS NULL THEN 
    :new.sav_las_act := 1; 
  END IF; 

  IF :new.sav_obj_stt IS NULL THEN 
    :new.sav_obj_stt := 1; 
  END IF; 

  IF :new.sav_vers IS NULL THEN 
    :new.sav_vers := 0; 
  END IF; 

  IF :new.sav_vsbt IS NULL THEN 
    :new.sav_vsbt := 1001; 
  END IF; 

  IF :new.sav_las_act_by IS NULL THEN 
    :new.sav_las_act_by := 1; 
  END IF; 

  IF :new.sav_origcrtr IS NULL THEN 
    :new.sav_origcrtr := 1; 
  END IF; 

  IF :new.sav_origcrtrlogdin IS NULL THEN 
    :new.sav_origcrtrlogdin := 1; 
  END IF; 

  IF :new.sav_las_act_by_logdin IS NULL THEN 
    :new.sav_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_svgs 
  ( 
   classtype, 
   sav_c4c_id, 
   sav_crtd, 
   sav_las_act, 
   sav_las_act_actrtyp, 
   sav_obj_stt, 
   sav_vers, 
   sav_vsbt, 
   sav_dltddt, 
   sav_las_act_by, 
   sav_origcrtr, 
   sav_origcrtrlogdin, 
   sav_las_act_by_logdin, 
   sav_univid, 
   sav_fromdt, 
   sav_to_dt, 
   sav_cmmt, 
   sav_net_svgs, 
   sav_origcost, 
   sav_cm_base, 
   sav_svgscat_dtls, 
   sav_um_base, 
   sav_um_extn, 
   sav_svgsmembdgis, 
   sav_cstmflds, 
   sav_cat_sub_cat, 
   sav_mdclsrvc, 
   sav_pvdr, 
   sav_memb, 
   sav_grp, 
   sav_id, 
   valid_from, 
   valid_to , 
   sav_audid, 
   sav_prev_audid, 
   sav_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.sav_c4c_id,
   :new.sav_crtd,
   :new.sav_las_act,
   :new.sav_las_act_actrtyp,
   :new.sav_obj_stt,
   :new.sav_vers,
   :new.sav_vsbt,
   :new.sav_dltddt,
   :new.sav_las_act_by,
   :new.sav_origcrtr,
   :new.sav_origcrtrlogdin,
   :new.sav_las_act_by_logdin,
   :new.sav_univid,
   :new.sav_fromdt,
   :new.sav_to_dt,
   :new.sav_cmmt,
   :new.sav_net_svgs,
   :new.sav_origcost,
   :new.sav_cm_base,

   :new.sav_svgscat_dtls,
   :new.sav_um_base,
   :new.sav_um_extn,
   :new.sav_svgsmembdgis,
   :new.sav_cstmflds,
   :new.sav_cat_sub_cat,
   :new.sav_mdclsrvc,
   :new.sav_pvdr,
   :new.sav_memb,
   :new.sav_grp, 
   :new.sav_id, 
   :new.sav_las_act_tim, 
   NULL, 
   u_svgs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
222
</td>
<td>
THH_C4C
</td>
<td>
TRG_SAV_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_sav_auditupdate BEFORE
  UPDATE
    ON T_SVGS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        sav_audid
      INTO
        last_audid
      FROM
        a_svgs
      WHERE
        sav_id            = :old.sav_id
      AND sav_next_audid IS NULL
      AND rownum          &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.sav_las_act_tim = :new.sav_las_act_tim THEN
      UPDATE
        a_svgs
      SET
        sav_cat_sub_cat       = :new.sav_cat_sub_cat,
        sav_mdclsrvc          = :new.sav_mdclsrvc,
        sav_pvdr              = :new.sav_pvdr,
        sav_memb              = :new.sav_memb,
        sav_grp               = :new.sav_grp,
        classtype             = :new.classtype,
        sav_c4c_id            = :new.sav_c4c_id,
        sav_crtd              = :new.sav_crtd,
        sav_las_act           = :new.sav_las_act,
        sav_las_act_actrtyp   = :new.sav_las_act_actrtyp,
        sav_obj_stt           = :new.sav_obj_stt,
        sav_vers              = :new.sav_vers,
        sav_vsbt              = :new.sav_vsbt,
        sav_dltddt            = :new.sav_dltddt,
        sav_las_act_by        = :new.sav_las_act_by,
        sav_origcrtr          = :new.sav_origcrtr,
        sav_origcrtrlogdin    = :new.sav_origcrtrlogdin,
        sav_las_act_by_logdin = :new.sav_las_act_by_logdin,
        sav_univid            = :new.sav_univid,
        sav_fromdt            = :new.sav_fromdt,
        sav_to_dt             = :new.sav_to_dt,
        sav_cmmt              = :new.sav_cmmt,
        sav_net_svgs          = :new.sav_net_svgs,
        sav_origcost          = :new.sav_origcost,
        sav_cm_base           = :new.sav_cm_base,
        sav_svgscat_dtls      = :new.sav_svgscat_dtls,
        sav_um_base           = :new.sav_um_base,
        sav_um_extn           = :new.sav_um_extn,
        sav_svgs
membdgis      = :new.sav_svgsmembdgis,
        sav_cstmflds          = :new.sav_cstmflds
      WHERE
        sav_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_svgs
        (
          sav_cat_sub_cat,
          sav_mdclsrvc,
          sav_pvdr,
          sav_memb,
          sav_grp,
          classtype,
          sav_c4c_id,
          sav_crtd,
          sav_las_act,
          sav_las_act_actrtyp,
          sav_obj_stt,
          sav_vers,
          sav_vsbt,
          sav_dltddt,
          sav_las_act_by,
          sav_origcrtr,
          sav_origcrtrlogdin,
          sav_las_act_by_logdin,
          sav_univid,
          sav_fromdt,
          sav_to_dt,
          sav_cmmt,
          sav_net_svgs,
          sav_origcost,
          sav_cm_base,
          sav_svgscat_dtls,
          sav_um_base,
          sav_um_extn,
          sav_svgsmembdgis,
          sav_cstmflds,
          sav_id,
          valid_from,
          valid_to,
          sav_audid,
          sav_prev_audid,
          sav_next_audid
        )
        VALUES
        (
          :new.sav_cat_sub_cat,
          :new.sav_mdclsrvc,
          :new.sav_pvdr,
          :new.sav_memb,
          :new.sav_grp,
          :new.classtype,
          :new.sav_c4c_id,
          :new.sav_crtd,
          :new.sav_las_act,
          :new.sav_las_act_actrtyp,
          :new.sav_obj_stt,
          :new.sav_vers,
          :new.sav_vsbt,
          :new.sav_dltddt,
          :new.sav_las_act_by,
          :new.sav_origcrtr,
          :new.sav_origcrtrlogdin,
          :new.sav_las_act_by_logdin,
          :new.sav_univid,
          :new.sav_fromdt,
          :new.sav_to_dt,
          :new.sav_cmmt,
          :new.sav_net_svgs,
          :new.sav_origcost,
          :new.sav_cm_base,
          :new.sav_svgscat_dtls,
          :new.sav_um_base,
          :new.sav_um_extn,
          :new
.sav_svgsmembdgis,
          :new.sav_cstmflds,
          :new.sav_id,
          :new.sav_las_act_tim,
          NULL,
          u_svgs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_svgs
      SET
        valid_to       = :new.sav_las_act_tim,
        sav_next_audid = u_svgs.CURRVAL
      WHERE
        sav_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
223
</td>
<td>
THH_C4C
</td>
<td>
TRG_SACT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGSALT_COST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SACT_AUDITINSERT&quot; BEFORE INSERT ON T_SVGSALT_COST FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.sact_crtd IS NULL THEN 
    :new.sact_crtd := curr_date; 
  END IF; 

  IF :new.sact_las_act_tim IS NULL THEN 
    :new.sact_las_act_tim := curr_date; 
  END IF; 

  IF :new.sact_las_act IS NULL THEN 
    :new.sact_las_act := 1; 
  END IF; 

  IF :new.sact_obj_stt IS NULL THEN 
    :new.sact_obj_stt := 1; 
  END IF; 

  IF :new.sact_vers IS NULL THEN 
    :new.sact_vers := 0; 
  END IF; 

  IF :new.sact_vsbt IS NULL THEN 
    :new.sact_vsbt := 1001; 
  END IF; 

  IF :new.sact_las_act_by IS NULL THEN 
    :new.sact_las_act_by := 1; 
  END IF; 

  IF :new.sact_origcrtr IS NULL THEN 
    :new.sact_origcrtr := 1; 
  END IF; 

  IF :new.sact_origcrtrlogdin IS NULL THEN 
    :new.sact_origcrtrlogdin := 1; 
  END IF; 

  IF :new.sact_las_act_by_logdin IS NULL THEN 
    :new.sact_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_svgsalt_cost 
  ( 
   classtype, 
   sact_c4c_id, 
   sact_crtd, 
   sact_las_act, 
   sact_las_act_actrtyp, 
   sact_obj_stt, 
   sact_vers, 
   sact_vsbt, 
   sact_dltddt, 
   sact_las_act_by, 
   sact_origcrtr, 
   sact_origcrtrlogdin, 
   sact_las_act_by_logdin, 
   sact_univid, 
   sact_fromdt, 
   sact_to_dt, 
   sact_unts, 
   sact_costper_unit, 
   sact_cmmt, 
   sact_alt_srvc, 
   sact_costben_excgsvgs, 
   sact_costdenlsvgs, 
   sact_alt_costtyp_sbty, 
   sact_alt_costunittyp, 
   sact_pvdr, 
   sact_id, 
   valid_from, 
   valid_to , 
   sact_audid, 
   sact_prev_audid, 
   sact_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.sact_c4c_id,
   :new.sact_crtd,
   :new.sact_las_act,
   :new.sact_las_act_actrtyp,
   :new.sact_obj_stt,
   :new.sact_vers,
   :new.sact_vsbt,
   :new.sact_dltddt,
   :new.sact_las_act_by,
   :new.sact_origcrtr,
   :new.sact_origcrtrlogdin,
   :new.sact_las_act_by_logdin,
   :new.sact_univid,
   :new.sact_fromdt,
   :new.sact_to_dt,
   :new.sact_unts,
   :new.sact_costper_unit,
   :new.sact_cmmt,
   :new.
sact_alt_srvc,
   :new.sact_costben_excgsvgs,
   :new.sact_costdenlsvgs,
   :new.sact_alt_costtyp_sbty,
   :new.sact_alt_costunittyp,
   :new.sact_pvdr, 
   :new.sact_id, 
   :new.sact_las_act_tim, 
   NULL, 
   u_svgsalt_cost.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
224
</td>
<td>
THH_C4C
</td>
<td>
TRG_SACT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGSALT_COST
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_sact_auditupdate BEFORE
  UPDATE
    ON T_SVGSALT_COST FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        sact_audid
      INTO
        last_audid
      FROM
        a_svgsalt_cost
      WHERE
        sact_id            = :old.sact_id
      AND sact_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.sact_las_act_tim = :new.sact_las_act_tim THEN
      UPDATE
        a_svgsalt_cost
      SET
        classtype              = :new.classtype,
        sact_c4c_id            = :new.sact_c4c_id,
        sact_crtd              = :new.sact_crtd,
        sact_las_act           = :new.sact_las_act,
        sact_las_act_actrtyp   = :new.sact_las_act_actrtyp,
        sact_obj_stt           = :new.sact_obj_stt,
        sact_vers              = :new.sact_vers,
        sact_vsbt              = :new.sact_vsbt,
        sact_dltddt            = :new.sact_dltddt,
        sact_las_act_by        = :new.sact_las_act_by,
        sact_origcrtr          = :new.sact_origcrtr,
        sact_origcrtrlogdin    = :new.sact_origcrtrlogdin,
        sact_las_act_by_logdin = :new.sact_las_act_by_logdin,
        sact_univid            = :new.sact_univid,
        sact_fromdt            = :new.sact_fromdt,
        sact_to_dt             = :new.sact_to_dt,
        sact_unts              = :new.sact_unts,
        sact_costper_unit      = :new.sact_costper_unit,
        sact_cmmt              = :new.sact_cmmt,
        sact_alt_srvc          = :new.sact_alt_srvc,
        sact_costben_excgsvgs  = :new.sact_costben_excgsvgs,
        sact_costdenlsvgs      = :new.sact_costdenlsvgs,
        sact_alt_costtyp_sbty  = :new.sact_alt_costtyp_sbty,
        sact_alt_costunittyp   = :new.sact_alt_costunittyp,
        sact_pvdr              = :new.sact_pvdr
      WHERE
        sact_audid = last_audid;
      /* LastActionTi
me has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_svgsalt_cost
        (
          classtype,
          sact_c4c_id,
          sact_crtd,
          sact_las_act,
          sact_las_act_actrtyp,
          sact_obj_stt,
          sact_vers,
          sact_vsbt,
          sact_dltddt,
          sact_las_act_by,
          sact_origcrtr,
          sact_origcrtrlogdin,
          sact_las_act_by_logdin,
          sact_univid,
          sact_fromdt,
          sact_to_dt,
          sact_unts,
          sact_costper_unit,
          sact_cmmt,
          sact_alt_srvc,
          sact_costben_excgsvgs,
          sact_costdenlsvgs,
          sact_alt_costtyp_sbty,
          sact_alt_costunittyp,
          sact_pvdr,
          sact_id,
          valid_from,
          valid_to,
          sact_audid,
          sact_prev_audid,
          sact_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.sact_c4c_id,
          :new.sact_crtd,
          :new.sact_las_act,
          :new.sact_las_act_actrtyp,
          :new.sact_obj_stt,
          :new.sact_vers,
          :new.sact_vsbt,
          :new.sact_dltddt,
          :new.sact_las_act_by,
          :new.sact_origcrtr,
          :new.sact_origcrtrlogdin,
          :new.sact_las_act_by_logdin,
          :new.sact_univid,
          :new.sact_fromdt,
          :new.sact_to_dt,
          :new.sact_unts,
          :new.sact_costper_unit,
          :new.sact_cmmt,
          :new.sact_alt_srvc,
          :new.sact_costben_excgsvgs,
          :new.sact_costdenlsvgs,
          :new.sact_alt_costtyp_sbty,
          :new.sact_alt_costunittyp,
          :new.sact_pvdr,
          :new.sact_id,
          :new.sact_las_act_tim,
          NULL,
          u_svgsalt_cost.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly
inserted record's sequence number
      */
      UPDATE
        a_svgsalt_cost
      SET
        valid_to        = :new.sact_las_act_tim,
        sact_next_audid = u_svgsalt_cost.CURRVAL
      WHERE
        sact_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
225
</td>
<td>
THH_C4C
</td>
<td>
TRG_SVCD_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGSCAT_DTLS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SVCD_AUDITINSERT&quot; BEFORE INSERT ON T_SVGSCAT_DTLS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.svcd_crtd IS NULL THEN 
    :new.svcd_crtd := curr_date; 
  END IF; 

  IF :new.svcd_las_act_tim IS NULL THEN 
    :new.svcd_las_act_tim := curr_date; 
  END IF; 

  IF :new.svcd_las_act IS NULL THEN 
    :new.svcd_las_act := 1; 
  END IF; 

  IF :new.svcd_obj_stt IS NULL THEN 
    :new.svcd_obj_stt := 1; 
  END IF; 

  IF :new.svcd_vers IS NULL THEN 
    :new.svcd_vers := 0; 
  END IF; 

  IF :new.svcd_vsbt IS NULL THEN 
    :new.svcd_vsbt := 1001; 
  END IF; 

  IF :new.svcd_las_act_by IS NULL THEN 
    :new.svcd_las_act_by := 1; 
  END IF; 

  IF :new.svcd_origcrtr IS NULL THEN 
    :new.svcd_origcrtr := 1; 
  END IF; 

  IF :new.svcd_origcrtrlogdin IS NULL THEN 
    :new.svcd_origcrtrlogdin := 1; 
  END IF; 

  IF :new.svcd_las_act_by_logdin IS NULL THEN 
    :new.svcd_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_svgscat_dtls 
  ( 
   srvs_rqtdsrvcpvdr, 
   classtype, 
   svcd_c4c_id, 
   svcd_crtd, 
   svcd_las_act, 
   svcd_las_act_actrtyp, 
   svcd_obj_stt, 
   svcd_vers, 
   svcd_vsbt, 
   svcd_dltddt, 
   svcd_las_act_by, 
   svcd_origcrtr, 
   svcd_origcrtrlogdin, 
   svcd_las_act_by_logdin, 
   svcd_univid, 
   svcd_cat_cmmt, 
   osav_svgs, 
   osav_id, 
   srvs_id, 
   pcns_std_costper_unit, 
   pcns_cnrtcostper_unit, 
   pcns_std_costperc, 
   pcns_actlunts, 
   pcns_id, 
   ours_svgs, 
   ours_id, 
   bxsv_xptdcostper_unit, 
   bxsv_xptdunts, 
   bxsv_actlcostper_unit, 
   bxsv_actlunts, 
   bxsv_id, 
   ahns_std_costper_unit, 
   ahns_ngtdcostper_unit, 
   ahns_std_costperc, 
   ahns_actlunts, 
   ahns_id, 
   mrsv_estdcostper_unit, 
   mrsv_actlcostper_unit, 
   mrsv_actlunts, 
   mrsv_id, 
   bxes_estdsvgs, 
   bxes_costof_unit, 
   bxes_unts, 
   bxes_id, 
   dnsv_costper_unit, 
   dnsv_rqtdunts, 
   dnsv_actlunts, 
   dnsv_id, 
   srvs_rqtdsrvc, 
   bxsv_actlunittyp, 
   bxsv_replsrvc, 
   bxsv_replsrvcpvdr, 
   bxsv_xptdunittyp, 
   ahns_uni
ttyp, 
   bxes_unittyp, 
   dnsv_unittyp, 
   mrsv_unittyp, 
   pcns_unittyp, 
   svcd_id, 
   valid_from, 
   valid_to , 
   svcd_audid, 
   svcd_prev_audid, 
   svcd_next_audid
  ) 
  VALUES 
  ( 
   :new.srvs_rqtdsrvcpvdr,
   :new.classtype,
   :new.svcd_c4c_id,
   :new.svcd_crtd,
   :new.svcd_las_act,
   :new.svcd_las_act_actrtyp,
   :new.svcd_obj_stt,
   :new.svcd_vers,
   :new.svcd_vsbt,
   :new.svcd_dltddt,
   :new.svcd_las_act_by,
   :new.svcd_origcrtr,
   :new.svcd_origcrtrlogdin,
   :new.svcd_las_act_by_logdin,
   :new.svcd_univid,
   :new.svcd_cat_cmmt,
   :new.osav_svgs,
   :new.osav_id,
   :new.srvs_id,
   :new.pcns_std_costper_unit,
   :new.pcns_cnrtcostper_unit,
   :new.pcns_std_costperc,
   :new.pcns_actlunts,
   :new.pcns_id,
   :new.ours_svgs,
   :new.ours_id,
   :new.bxsv_xptdcostper_unit,
   :new.bxsv_xptdunts,
   :new.bxsv_actlcostper_unit,
   :new.bxsv_actlunts,
   :new.bxsv_id,
   :new.ahns_std_costper_unit,
   :new.ahns_ngtdcostper_unit,
   :new.ahns_std_costperc,
   :new.ahns_actlunts,
   :new.ahns_id,
   :new.mrsv_estdcostper_unit,
   :new.mrsv_actlcostper_unit,
   :new.mrsv_actlunts,
   :new.mrsv_id,
   :new.bxes_estdsvgs,
   :new.bxes_costof_unit,
   :new.bxes_unts,
   :new.bxes_id,
   :new.dnsv_costper_unit,
   :new.dnsv_rqtdunts,
   :new.dnsv_actlunts,
   :new.dnsv_id,
   :new.srvs_rqtdsrvc,
   :new.bxsv_actlunittyp,
   :new.bxsv_replsrvc,
   :new.bxsv_replsrvcpvdr,
   :new.bxsv_xptdunittyp,
   :new.ahns_unittyp,
   :new.bxes_unittyp,
   :new.dnsv_unittyp,
   :new.mrsv_unittyp,
   :new.pcns_unittyp, 
   :new.svcd_id, 
   :new.svcd_las_act_tim, 
   NULL, 
   u_svgscat_dtls.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
226
</td>
<td>
THH_C4C
</td>
<td>
TRG_SVCD_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SVGSCAT_DTLS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_svcd_auditupdate BEFORE
  UPDATE
    ON T_SVGSCAT_DTLS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        svcd_audid
      INTO
        last_audid
      FROM
        a_svgscat_dtls
      WHERE
        svcd_id            = :old.svcd_id
      AND svcd_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.svcd_las_act_tim = :new.svcd_las_act_tim THEN
      UPDATE
        a_svgscat_dtls
      SET
        svcd_vsbt              = :new.svcd_vsbt,
        svcd_dltddt            = :new.svcd_dltddt,
        svcd_las_act_by        = :new.svcd_las_act_by,
        svcd_origcrtr          = :new.svcd_origcrtr,
        svcd_origcrtrlogdin    = :new.svcd_origcrtrlogdin,
        svcd_las_act_by_logdin = :new.svcd_las_act_by_logdin,
        svcd_univid            = :new.svcd_univid,
        svcd_cat_cmmt          = :new.svcd_cat_cmmt,
        osav_svgs              = :new.osav_svgs,
        osav_id                = :new.osav_id,
        srvs_id                = :new.srvs_id,
        pcns_std_costper_unit  = :new.pcns_std_costper_unit,
        pcns_cnrtcostper_unit  = :new.pcns_cnrtcostper_unit,
        pcns_std_costperc      = :new.pcns_std_costperc,
        pcns_actlunts          = :new.pcns_actlunts,
        pcns_id                = :new.pcns_id,
        ours_svgs              = :new.ours_svgs,
        ours_id                = :new.ours_id,
        bxsv_xptdcostper_unit  = :new.bxsv_xptdcostper_unit,
        bxsv_xptdunts          = :new.bxsv_xptdunts,
        bxsv_actlcostper_unit  = :new.bxsv_actlcostper_unit,
        bxsv_actlunts          = :new.bxsv_actlunts,
        bxsv_id                = :new.bxsv_id,
        ahns_std_costper_unit  = :new.ahns_std_costper_unit,
        ahns_ngtdcostper_unit  = :new.ahns_ngtdcostper_unit,
        ahns_std_costperc      = :new.ahns_std_costperc,

        ahns_actlunts          = :new.ahns_actlunts,
        ahns_id                = :new.ahns_id,
        mrsv_estdcostper_unit  = :new.mrsv_estdcostper_unit,
        mrsv_actlcostper_unit  = :new.mrsv_actlcostper_unit,
        mrsv_actlunts          = :new.mrsv_actlunts,
        mrsv_id                = :new.mrsv_id,
        bxes_estdsvgs          = :new.bxes_estdsvgs,
        bxes_costof_unit       = :new.bxes_costof_unit,
        bxes_unts              = :new.bxes_unts,
        bxes_id                = :new.bxes_id,
        dnsv_costper_unit      = :new.dnsv_costper_unit,
        dnsv_rqtdunts          = :new.dnsv_rqtdunts,
        dnsv_actlunts          = :new.dnsv_actlunts,
        dnsv_id                = :new.dnsv_id,
        srvs_rqtdsrvc          = :new.srvs_rqtdsrvc,
        bxsv_actlunittyp       = :new.bxsv_actlunittyp,
        bxsv_replsrvc          = :new.bxsv_replsrvc,
        bxsv_replsrvcpvdr      = :new.bxsv_replsrvcpvdr,
        bxsv_xptdunittyp       = :new.bxsv_xptdunittyp,
        ahns_unittyp           = :new.ahns_unittyp,
        bxes_unittyp           = :new.bxes_unittyp,
        dnsv_unittyp           = :new.dnsv_unittyp,
        mrsv_unittyp           = :new.mrsv_unittyp,
        pcns_unittyp           = :new.pcns_unittyp,
        srvs_rqtdsrvcpvdr      = :new.srvs_rqtdsrvcpvdr,
        classtype              = :new.classtype,
        svcd_c4c_id            = :new.svcd_c4c_id,
        svcd_crtd              = :new.svcd_crtd,
        svcd_las_act           = :new.svcd_las_act,
        svcd_las_act_actrtyp   = :new.svcd_las_act_actrtyp,
        svcd_obj_stt           = :new.svcd_obj_stt,
        svcd_vers              = :new.svcd_vers
      WHERE
        svcd_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_svgscat_dtls
        (
          svcd_vsbt,
          svcd_dltddt,
          svcd_las_act_by,

         svcd_origcrtr,
          svcd_origcrtrlogdin,
          svcd_las_act_by_logdin,
          svcd_univid,
          svcd_cat_cmmt,
          osav_svgs,
          osav_id,
          srvs_id,
          pcns_std_costper_unit,
          pcns_cnrtcostper_unit,
          pcns_std_costperc,
          pcns_actlunts,
          pcns_id,
          ours_svgs,
          ours_id,
          bxsv_xptdcostper_unit,
          bxsv_xptdunts,
          bxsv_actlcostper_unit,
          bxsv_actlunts,
          bxsv_id,
          ahns_std_costper_unit,
          ahns_ngtdcostper_unit,
          ahns_std_costperc,
          ahns_actlunts,
          ahns_id,
          mrsv_estdcostper_unit,
          mrsv_actlcostper_unit,
          mrsv_actlunts,
          mrsv_id,
          bxes_estdsvgs,
          bxes_costof_unit,
          bxes_unts,
          bxes_id,
          dnsv_costper_unit,
          dnsv_rqtdunts,
          dnsv_actlunts,
          dnsv_id,
          srvs_rqtdsrvc,
          bxsv_actlunittyp,
          bxsv_replsrvc,
          bxsv_replsrvcpvdr,
          bxsv_xptdunittyp,
          ahns_unittyp,
          bxes_unittyp,
          dnsv_unittyp,
          mrsv_unittyp,
          pcns_unittyp,
          srvs_rqtdsrvcpvdr,
          classtype,
          svcd_c4c_id,
          svcd_crtd,
          svcd_las_act,
          svcd_las_act_actrtyp,
          svcd_obj_stt,
          svcd_vers,
          svcd_id,
          valid_from,
          valid_to,
          svcd_audid,
          svcd_prev_audid,
          svcd_next_audid
        )
        VALUES
        (
          :new.svcd_vsbt,
          :new.svcd_dltddt,
          :new.svcd_las_act_by,
          :new.svcd_origcrtr,
          :new.svcd_origcrtrlogdin,
          :new.svcd_las_act_by_logdin,
          :new.svcd_univid,
          :new.svcd_cat_cmmt,
          :new.osav_svgs,
          :new.osav_id,
          :new.srvs_id,
          :new.pcns_std_costper_unit,
          :new.pcns_cnrtcostper_unit,
          :new.pcns_std_costpe
rc,
          :new.pcns_actlunts,
          :new.pcns_id,
          :new.ours_svgs,
          :new.ours_id,
          :new.bxsv_xptdcostper_unit,
          :new.bxsv_xptdunts,
          :new.bxsv_actlcostper_unit,
          :new.bxsv_actlunts,
          :new.bxsv_id,
          :new.ahns_std_costper_unit,
          :new.ahns_ngtdcostper_unit,
          :new.ahns_std_costperc,
          :new.ahns_actlunts,
          :new.ahns_id,
          :new.mrsv_estdcostper_unit,
          :new.mrsv_actlcostper_unit,
          :new.mrsv_actlunts,
          :new.mrsv_id,
          :new.bxes_estdsvgs,
          :new.bxes_costof_unit,
          :new.bxes_unts,
          :new.bxes_id,
          :new.dnsv_costper_unit,
          :new.dnsv_rqtdunts,
          :new.dnsv_actlunts,
          :new.dnsv_id,
          :new.srvs_rqtdsrvc,
          :new.bxsv_actlunittyp,
          :new.bxsv_replsrvc,
          :new.bxsv_replsrvcpvdr,
          :new.bxsv_xptdunittyp,
          :new.ahns_unittyp,
          :new.bxes_unittyp,
          :new.dnsv_unittyp,
          :new.mrsv_unittyp,
          :new.pcns_unittyp,
          :new.srvs_rqtdsrvcpvdr,
          :new.classtype,
          :new.svcd_c4c_id,
          :new.svcd_crtd,
          :new.svcd_las_act,
          :new.svcd_las_act_actrtyp,
          :new.svcd_obj_stt,
          :new.svcd_vers,
          :new.svcd_id,
          :new.svcd_las_act_tim,
          NULL,
          u_svgscat_dtls.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_svgscat_dtls
      SET
        valid_to        = :new.svcd_las_act_tim,
        svcd_next_audid = u_svgscat_dtls.CURRVAL
      WHERE
        svcd_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
227
</td>
<td>
THH_C4C
</td>
<td>
TRG_SSDT_AR
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SYTMSTNGDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SSDT_AR&quot; 
AFTER INSERT OR UPDATE OR DELETE
ON t_sytmstngdat
FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  old_row t_sytmstngdat%ROWTYPE;
  new_row t_sytmstngdat%ROWTYPE;
BEGIN
  old_row.classtype := :old.classtype;
  new_row.classtype := :new.classtype;
  old_row.ssdt_c4c_id := :old.ssdt_c4c_id;
  new_row.ssdt_c4c_id := :new.ssdt_c4c_id;
  old_row.ssdt_crtd := :old.ssdt_crtd;
  new_row.ssdt_crtd := :new.ssdt_crtd;
  old_row.ssdt_las_act := :old.ssdt_las_act;
  new_row.ssdt_las_act := :new.ssdt_las_act;
  old_row.ssdt_las_act_actrtyp := :old.ssdt_las_act_actrtyp;
  new_row.ssdt_las_act_actrtyp := :new.ssdt_las_act_actrtyp;
  old_row.ssdt_las_act_tim := :old.ssdt_las_act_tim;
  new_row.ssdt_las_act_tim := :new.ssdt_las_act_tim;
  old_row.ssdt_obj_stt := :old.ssdt_obj_stt;
  new_row.ssdt_obj_stt := :new.ssdt_obj_stt;
  old_row.ssdt_vers := :old.ssdt_vers;
  new_row.ssdt_vers := :new.ssdt_vers;
  old_row.ssdt_vsbt := :old.ssdt_vsbt;
  new_row.ssdt_vsbt := :new.ssdt_vsbt;
  old_row.ssdt_dltddt := :old.ssdt_dltddt;
  new_row.ssdt_dltddt := :new.ssdt_dltddt;
  old_row.ssdt_las_act_by := :old.ssdt_las_act_by;
  new_row.ssdt_las_act_by := :new.ssdt_las_act_by;
  old_row.ssdt_origcrtr := :old.ssdt_origcrtr;
  new_row.ssdt_origcrtr := :new.ssdt_origcrtr;
  old_row.ssdt_origcrtrlogdin := :old.ssdt_origcrtrlogdin;
  new_row.ssdt_origcrtrlogdin := :new.ssdt_origcrtrlogdin;
  old_row.ssdt_las_act_by_logdin := :old.ssdt_las_act_by_logdin;
  new_row.ssdt_las_act_by_logdin := :new.ssdt_las_act_by_logdin;
  old_row.ssdt_univid := :old.ssdt_univid;
  new_row.ssdt_univid := :new.ssdt_univid;
  old_row.ssdt_dfltdat := :old.ssdt_dfltdat;
  new_row.ssdt_dfltdat := :new.ssdt_dfltdat;
  old_row.ssdt_frzn := :old.ssdt_frzn;
  new_row.ssdt_frzn := :new.ssdt_frzn;
  old_row.ssdt_id := :old.ssdt_id;
  new_row.ssdt_id := :new.ssdt_id;
  old_row.lsgd_id := :old.lsgd_id;
  new_row.lsgd_id := :new.lsgd_id;
  old_row.dlsd_id := :old.dlsd_id;
  new_row.dlsd_id := :new.dlsd_id;
  old_row.desd_id := :old.desd_id;
  new_row.desd_id := :new.desd_id;
  old_row.dssd_id := :old.dssd_id;
  new_row.dssd_
id := :new.dssd_id;
  old_row.istd_itgrval := :old.istd_itgrval;
  new_row.istd_itgrval := :new.istd_itgrval;
  old_row.istd_id := :old.istd_id;
  new_row.istd_id := :new.istd_id;
  old_row.ltsd_id := :old.ltsd_id;
  new_row.ltsd_id := :new.ltsd_id;
  old_row.sgsd_strgval := :old.sgsd_strgval;
  new_row.sgsd_strgval := :new.sgsd_strgval;
  old_row.sgsd_id := :old.sgsd_id;
  new_row.sgsd_id := :new.sgsd_id;
  old_row.ilsd_itgrval := :old.ilsd_itgrval;
  new_row.ilsd_itgrval := :new.ilsd_itgrval;
  old_row.ilsd_id := :old.ilsd_id;
  new_row.ilsd_id := :new.ilsd_id;
  old_row.cysd_id := :old.cysd_id;
  new_row.cysd_id := :new.cysd_id;
  old_row.bsgd_bolnval := :old.bsgd_bolnval;
  new_row.bsgd_bolnval := :new.bsgd_bolnval;
  old_row.bsgd_id := :old.bsgd_id;
  new_row.bsgd_id := :new.bsgd_id;
  old_row.pysd_id := :old.pysd_id;
  new_row.pysd_id := :new.pysd_id;
  old_row.ilsd_unitof_msmt := :old.ilsd_unitof_msmt;
  new_row.ilsd_unitof_msmt := :new.ilsd_unitof_msmt;
  old_row.dlsd_ddl_item := :old.dlsd_ddl_item;
  new_row.dlsd_ddl_item := :new.dlsd_ddl_item;
  old_row.ssdt_sytmstng := :old.ssdt_sytmstng;
  new_row.ssdt_sytmstng := :new.ssdt_sytmstng;
  old_row.cysd_cnry := :old.cysd_cnry;
  new_row.cysd_cnry := :new.cysd_cnry;
  old_row.lsgd_lang := :old.lsgd_lang;
  new_row.lsgd_lang := :new.lsgd_lang;
  old_row.ltsd_ltr_tmpt := :old.ltsd_ltr_tmpt;
  new_row.ltsd_ltr_tmpt := :new.ltsd_ltr_tmpt;
  old_row.pysd_payr := :old.pysd_payr;
  new_row.pysd_payr := :new.pysd_payr;

  trgproc_ssdt_ar(old_row, new_row, inserting, updating, deleting);
END trg_ssdt_ar;









</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
228
</td>
<td>
THH_C4C
</td>
<td>
TRG_SSDT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SYTMSTNGDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_SSDT_AUDITINSERT&quot; BEFORE INSERT ON T_SYTMSTNGDAT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ssdt_crtd IS NULL THEN 
    :new.ssdt_crtd := curr_date; 
  END IF; 

  IF :new.ssdt_las_act_tim IS NULL THEN 
    :new.ssdt_las_act_tim := curr_date; 
  END IF; 

  IF :new.ssdt_las_act IS NULL THEN 
    :new.ssdt_las_act := 1; 
  END IF; 

  IF :new.ssdt_obj_stt IS NULL THEN 
    :new.ssdt_obj_stt := 1; 
  END IF; 

  IF :new.ssdt_vers IS NULL THEN 
    :new.ssdt_vers := 0; 
  END IF; 

  IF :new.ssdt_vsbt IS NULL THEN 
    :new.ssdt_vsbt := 1001; 
  END IF; 

  IF :new.ssdt_las_act_by IS NULL THEN 
    :new.ssdt_las_act_by := 1; 
  END IF; 

  IF :new.ssdt_origcrtr IS NULL THEN 
    :new.ssdt_origcrtr := 1; 
  END IF; 

  IF :new.ssdt_origcrtrlogdin IS NULL THEN 
    :new.ssdt_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ssdt_las_act_by_logdin IS NULL THEN 
    :new.ssdt_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_sytmstngdat 
  ( 
   classtype, 
   ssdt_c4c_id, 
   ssdt_crtd, 
   ssdt_las_act, 
   ssdt_las_act_actrtyp, 
   ssdt_obj_stt, 
   ssdt_vers, 
   ssdt_vsbt, 
   ssdt_dltddt, 
   ssdt_las_act_by, 
   ssdt_origcrtr, 
   ssdt_origcrtrlogdin, 
   ssdt_las_act_by_logdin, 
   ssdt_univid, 
   ssdt_dfltdat, 
   ssdt_frzn, 
   lsgd_id, 
   dlsd_id, 
   desd_id, 
   dssd_id, 
   istd_itgrval, 
   istd_id, 
   ltsd_id, 
   sgsd_strgval, 
   sgsd_id, 
   ilsd_itgrval, 
   ilsd_id, 
   cysd_id, 
   bsgd_bolnval, 
   bsgd_id, 
   pysd_id, 
   ilsd_unitof_msmt, 
   dlsd_ddl_item, 
   ssdt_sytmstng, 
   cysd_cnry, 
   lsgd_lang, 
   ltsd_ltr_tmpt, 
   pysd_payr, 
   ssdt_id, 
   valid_from, 
   valid_to , 
   ssdt_audid, 
   ssdt_prev_audid, 
   ssdt_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ssdt_c4c_id,
   :new.ssdt_crtd,
   :new.ssdt_las_act,
   :new.ssdt_las_act_actrtyp,
   :new.ssdt_obj_stt,
   :new.ssdt_vers,
   :new.ssdt_vsbt,
   :new.ssdt_dltddt,
   :new.ssdt_las_act_by,
   :new.ssdt_origcrtr,
   :new.ssdt_origcrtrlogdin,
   :new.ssdt_las_ac
t_by_logdin,
   :new.ssdt_univid,
   :new.ssdt_dfltdat,
   :new.ssdt_frzn,
   :new.lsgd_id,
   :new.dlsd_id,
   :new.desd_id,
   :new.dssd_id,
   :new.istd_itgrval,
   :new.istd_id,
   :new.ltsd_id,
   :new.sgsd_strgval,
   :new.sgsd_id,
   :new.ilsd_itgrval,
   :new.ilsd_id,
   :new.cysd_id,
   :new.bsgd_bolnval,
   :new.bsgd_id,
   :new.pysd_id,
   :new.ilsd_unitof_msmt,
   :new.dlsd_ddl_item,
   :new.ssdt_sytmstng,
   :new.cysd_cnry,
   :new.lsgd_lang,
   :new.ltsd_ltr_tmpt,
   :new.pysd_payr, 
   :new.ssdt_id, 
   :new.ssdt_las_act_tim, 
   NULL, 
   u_sytmstngdat.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
229
</td>
<td>
THH_C4C
</td>
<td>
TRG_SSDT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_SYTMSTNGDAT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ssdt_auditupdate BEFORE
  UPDATE
    ON T_SYTMSTNGDAT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ssdt_audid
      INTO
        last_audid
      FROM
        a_sytmstngdat
      WHERE
        ssdt_id            = :old.ssdt_id
      AND ssdt_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ssdt_las_act_tim = :new.ssdt_las_act_tim THEN
      UPDATE
        a_sytmstngdat
      SET
        dlsd_ddl_item          = :new.dlsd_ddl_item,
        ssdt_sytmstng          = :new.ssdt_sytmstng,
        cysd_cnry              = :new.cysd_cnry,
        lsgd_lang              = :new.lsgd_lang,
        ltsd_ltr_tmpt          = :new.ltsd_ltr_tmpt,
        pysd_payr              = :new.pysd_payr,
        classtype              = :new.classtype,
        ssdt_c4c_id            = :new.ssdt_c4c_id,
        ssdt_crtd              = :new.ssdt_crtd,
        ssdt_las_act           = :new.ssdt_las_act,
        ssdt_las_act_actrtyp   = :new.ssdt_las_act_actrtyp,
        ssdt_obj_stt           = :new.ssdt_obj_stt,
        ssdt_vers              = :new.ssdt_vers,
        ssdt_vsbt              = :new.ssdt_vsbt,
        ssdt_dltddt            = :new.ssdt_dltddt,
        ssdt_las_act_by        = :new.ssdt_las_act_by,
        ssdt_origcrtr          = :new.ssdt_origcrtr,
        ssdt_origcrtrlogdin    = :new.ssdt_origcrtrlogdin,
        ssdt_las_act_by_logdin = :new.ssdt_las_act_by_logdin,
        ssdt_univid            = :new.ssdt_univid,
        ssdt_dfltdat           = :new.ssdt_dfltdat,
        ssdt_frzn              = :new.ssdt_frzn,
        lsgd_id                = :new.lsgd_id,
        dlsd_id                = :new.dlsd_id,
        desd_id                = :new.desd_id,
        dssd_id                = :new.dssd_id,
        istd_itgrval           = :new.istd_itgrval,
        istd_id
              = :new.istd_id,
        ltsd_id                = :new.ltsd_id,
        sgsd_strgval           = :new.sgsd_strgval,
        sgsd_id                = :new.sgsd_id,
        ilsd_itgrval           = :new.ilsd_itgrval,
        ilsd_id                = :new.ilsd_id,
        cysd_id                = :new.cysd_id,
        bsgd_bolnval           = :new.bsgd_bolnval,
        bsgd_id                = :new.bsgd_id,
        pysd_id                = :new.pysd_id,
        ilsd_unitof_msmt       = :new.ilsd_unitof_msmt
      WHERE
        ssdt_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_sytmstngdat
        (
          dlsd_ddl_item,
          ssdt_sytmstng,
          cysd_cnry,
          lsgd_lang,
          ltsd_ltr_tmpt,
          pysd_payr,
          classtype,
          ssdt_c4c_id,
          ssdt_crtd,
          ssdt_las_act,
          ssdt_las_act_actrtyp,
          ssdt_obj_stt,
          ssdt_vers,
          ssdt_vsbt,
          ssdt_dltddt,
          ssdt_las_act_by,
          ssdt_origcrtr,
          ssdt_origcrtrlogdin,
          ssdt_las_act_by_logdin,
          ssdt_univid,
          ssdt_dfltdat,
          ssdt_frzn,
          lsgd_id,
          dlsd_id,
          desd_id,
          dssd_id,
          istd_itgrval,
          istd_id,
          ltsd_id,
          sgsd_strgval,
          sgsd_id,
          ilsd_itgrval,
          ilsd_id,
          cysd_id,
          bsgd_bolnval,
          bsgd_id,
          pysd_id,
          ilsd_unitof_msmt,
          ssdt_id,
          valid_from,
          valid_to,
          ssdt_audid,
          ssdt_prev_audid,
          ssdt_next_audid
        )
        VALUES
        (
          :new.dlsd_ddl_item,
          :new.ssdt_sytmstng,
          :new.cysd_cnry,
          :new.lsgd_lang,
          :new.ltsd_ltr_tmpt,
          :new.pysd_payr,
          :new.classtype,

:new.ssdt_c4c_id,
          :new.ssdt_crtd,
          :new.ssdt_las_act,
          :new.ssdt_las_act_actrtyp,
          :new.ssdt_obj_stt,
          :new.ssdt_vers,
          :new.ssdt_vsbt,
          :new.ssdt_dltddt,
          :new.ssdt_las_act_by,
          :new.ssdt_origcrtr,
          :new.ssdt_origcrtrlogdin,
          :new.ssdt_las_act_by_logdin,
          :new.ssdt_univid,
          :new.ssdt_dfltdat,
          :new.ssdt_frzn,
          :new.lsgd_id,
          :new.dlsd_id,
          :new.desd_id,
          :new.dssd_id,
          :new.istd_itgrval,
          :new.istd_id,
          :new.ltsd_id,
          :new.sgsd_strgval,
          :new.sgsd_id,
          :new.ilsd_itgrval,
          :new.ilsd_id,
          :new.cysd_id,
          :new.bsgd_bolnval,
          :new.bsgd_id,
          :new.pysd_id,
          :new.ilsd_unitof_msmt,
          :new.ssdt_id,
          :new.ssdt_las_act_tim,
          NULL,
          u_sytmstngdat.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_sytmstngdat
      SET
        valid_to        = :new.ssdt_las_act_tim,
        ssdt_next_audid = u_sytmstngdat.CURRVAL
      WHERE
        ssdt_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
230
</td>
<td>
THH_C4C
</td>
<td>
TRG_TACB_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TAKNASMTCC_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_tacb_auditinsert BEFORE INSERT ON T_TAKNASMTCC_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.tacb_crtd IS NULL THEN
    :new.tacb_crtd := curr_date;
  END IF;

  IF :new.tacb_las_act_tim IS NULL THEN
    :new.tacb_las_act_tim := curr_date;
  END IF;

  IF :new.tacb_las_act IS NULL THEN
    :new.tacb_las_act := 1;
  END IF;

  IF :new.tacb_obj_stt IS NULL THEN
    :new.tacb_obj_stt := 1;
  END IF;

  IF :new.tacb_vers IS NULL THEN
    :new.tacb_vers := 0;
  END IF;

  IF :new.tacb_vsbt IS NULL THEN
    :new.tacb_vsbt := 1001;
  END IF;

  IF :new.tacb_las_act_by IS NULL THEN
    :new.tacb_las_act_by := 1;
  END IF;

  IF :new.tacb_origcrtr IS NULL THEN
    :new.tacb_origcrtr := 1;
  END IF;

  IF :new.tacb_origcrtrlogdin IS NULL THEN
    :new.tacb_origcrtrlogdin := 1;
  END IF;

  IF :new.tacb_las_act_by_logdin IS NULL THEN
    :new.tacb_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_taknasmtcc_base
  (
   tacb_obj_stt,
   tacb_vers,
   tacb_vsbt,
   tacb_dltddt,
   tacb_las_act_by,
   tacb_origcrtr,
   tacb_origcrtrlogdin,
   tacb_las_act_by_logdin,
   tacb_univid,
   tacb_scor,
   tacb_dscmacpd,
   cctr_cmpdat,
   cctr_id,
   stat_wkfwistcid,
   stat_cnv_id,
   stat_ownrchndflag,
   stat_ownrchndcnt,
   stat_srtdat,
   stat_cmpdat,
   stat_cancat,
   stat_id,
   cctr_affn_um_evntreqt,
   cctr_affn_um_extn,
   cctr_affn_pvdr,
   cctr_affn_cm,
   cctr_affn_memb,
   cctr_affn_um_evnt,
   stat_rfngwkfwtsk,
   stat_prvsrfngtsk,
   stat_prvsrfngtsk_prmn,
   stat_ownr,
   stat_prvsownr,
   stat_prvssndr,
   stat_prvsownrprmn,
   stat_tnfr,
   stat_prvstnfr,
   tacb_currqtn,
   tacb_asmtcc,
   stat_rtknorig,
   stat_sentltr,
   stat_senttsk,
   tacb_clldstts,
   tacb_memb,
   classtype,
   tacb_c4c_id,
   tacb_crtd,
   tacb_las_act,
   tacb_las_act_actrtyp,
   tacb_id,
   valid_from,
   valid_to ,
   tacb_audid,
   tacb_prev_audid,
   tacb_next_audid,
   rendered_asmt
  )
  VALUES
  (
   :new.tacb_obj_stt,
   :new.tacb_vers,
   :new.tacb_vsbt,
   :new.tacb_dltddt,

   :new.tacb_las_act_by,
   :new.tacb_origcrtr,
   :new.tacb_origcrtrlogdin,
   :new.tacb_las_act_by_logdin,
   :new.tacb_univid,
   :new.tacb_scor,
   :new.tacb_dscmacpd,
   :new.cctr_cmpdat,
   :new.cctr_id,
   :new.stat_wkfwistcid,
   :new.stat_cnv_id,
   :new.stat_ownrchndflag,
   :new.stat_ownrchndcnt,
   :new.stat_srtdat,
   :new.stat_cmpdat,
   :new.stat_cancat,
   :new.stat_id,
   :new.cctr_affn_um_evntreqt,
   :new.cctr_affn_um_extn,
   :new.cctr_affn_pvdr,
   :new.cctr_affn_cm,
   :new.cctr_affn_memb,
   :new.cctr_affn_um_evnt,
   :new.stat_rfngwkfwtsk,
   :new.stat_prvsrfngtsk,
   :new.stat_prvsrfngtsk_prmn,
   :new.stat_ownr,
   :new.stat_prvsownr,
   :new.stat_prvssndr,
   :new.stat_prvsownrprmn,
   :new.stat_tnfr,
   :new.stat_prvstnfr,
   :new.tacb_currqtn,
   :new.tacb_asmtcc,
   :new.stat_rtknorig,
   :new.stat_sentltr,
   :new.stat_senttsk,
   :new.tacb_clldstts,
   :new.tacb_memb,
   :new.classtype,
   :new.tacb_c4c_id,
   :new.tacb_crtd,
   :new.tacb_las_act,
   :new.tacb_las_act_actrtyp,
   :new.tacb_id,
   :new.tacb_las_act_tim,
   NULL,
   u_taknasmtcc_base.NEXTVAL,
   NULL,
   NULL,
   :new.rendered_asmt
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
231
</td>
<td>
THH_C4C
</td>
<td>
TRG_TACB_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TAKNASMTCC_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_tacb_auditupdate BEFORE
  UPDATE
    ON T_TAKNASMTCC_BASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        tacb_audid
      INTO
        last_audid
      FROM
        a_taknasmtcc_base
      WHERE
        tacb_id            = :old.tacb_id
      AND tacb_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.tacb_las_act_tim = :new.tacb_las_act_tim THEN
      UPDATE
        a_taknasmtcc_base
      SET
        stat_id                = :new.stat_id,
        cctr_affn_um_evntreqt  = :new.cctr_affn_um_evntreqt,
        cctr_affn_um_extn      = :new.cctr_affn_um_extn,
        cctr_affn_pvdr         = :new.cctr_affn_pvdr,
        cctr_affn_cm           = :new.cctr_affn_cm,
        cctr_affn_memb         = :new.cctr_affn_memb,
        cctr_affn_um_evnt      = :new.cctr_affn_um_evnt,
        stat_rfngwkfwtsk       = :new.stat_rfngwkfwtsk,
        stat_prvsrfngtsk       = :new.stat_prvsrfngtsk,
        stat_prvsrfngtsk_prmn  = :new.stat_prvsrfngtsk_prmn,
        stat_ownr              = :new.stat_ownr,
        stat_prvsownr          = :new.stat_prvsownr,
        stat_prvssndr          = :new.stat_prvssndr,
        stat_prvsownrprmn      = :new.stat_prvsownrprmn,
        stat_tnfr              = :new.stat_tnfr,
        stat_prvstnfr          = :new.stat_prvstnfr,
        tacb_currqtn           = :new.tacb_currqtn,
        tacb_asmtcc            = :new.tacb_asmtcc,
        stat_rtknorig          = :new.stat_rtknorig,
        stat_sentltr           = :new.stat_sentltr,
        stat_senttsk           = :new.stat_senttsk,
        tacb_clldstts          = :new.tacb_clldstts,
        tacb_memb              = :new.tacb_memb,
        classtype              = :new.classtype,
        tacb_c4c_id            = :new.tacb_c4c_id,
        tacb_crtd              = :new.tacb_crtd,
        tacb_las_a
ct           = :new.tacb_las_act,
        tacb_las_act_actrtyp   = :new.tacb_las_act_actrtyp,
        tacb_obj_stt           = :new.tacb_obj_stt,
        tacb_vers              = :new.tacb_vers,
        tacb_vsbt              = :new.tacb_vsbt,
        tacb_dltddt            = :new.tacb_dltddt,
        tacb_las_act_by        = :new.tacb_las_act_by,
        tacb_origcrtr          = :new.tacb_origcrtr,
        tacb_origcrtrlogdin    = :new.tacb_origcrtrlogdin,
        tacb_las_act_by_logdin = :new.tacb_las_act_by_logdin,
        tacb_univid            = :new.tacb_univid,
        tacb_scor              = :new.tacb_scor,
        tacb_dscmacpd          = :new.tacb_dscmacpd,
        cctr_cmpdat            = :new.cctr_cmpdat,
        cctr_id                = :new.cctr_id,
        stat_wkfwistcid        = :new.stat_wkfwistcid,
        stat_cnv_id            = :new.stat_cnv_id,
        stat_ownrchndflag      = :new.stat_ownrchndflag,
        stat_ownrchndcnt       = :new.stat_ownrchndcnt,
        stat_srtdat            = :new.stat_srtdat,
        stat_cmpdat            = :new.stat_cmpdat,
        stat_cancat            = :new.stat_cancat,
		rendered_asmt		   = :new.rendered_asmt
      WHERE
        tacb_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_taknasmtcc_base
        (
          stat_id,
          cctr_affn_um_evntreqt,
          cctr_affn_um_extn,
          cctr_affn_pvdr,
          cctr_affn_cm,
          cctr_affn_memb,
          cctr_affn_um_evnt,
          stat_rfngwkfwtsk,
          stat_prvsrfngtsk,
          stat_prvsrfngtsk_prmn,
          stat_ownr,
          stat_prvsownr,
          stat_prvssndr,
          stat_prvsownrprmn,
          stat_tnfr,
          stat_prvstnfr,
          tacb_currqtn,
          tacb_asmtcc,
          stat_rtknorig,
          stat_sentltr,
          stat_senttsk,
          tacb_clldstts,

    tacb_memb,
          classtype,
          tacb_c4c_id,
          tacb_crtd,
          tacb_las_act,
          tacb_las_act_actrtyp,
          tacb_obj_stt,
          tacb_vers,
          tacb_vsbt,
          tacb_dltddt,
          tacb_las_act_by,
          tacb_origcrtr,
          tacb_origcrtrlogdin,
          tacb_las_act_by_logdin,
          tacb_univid,
          tacb_scor,
          tacb_dscmacpd,
          cctr_cmpdat,
          cctr_id,
          stat_wkfwistcid,
          stat_cnv_id,
          stat_ownrchndflag,
          stat_ownrchndcnt,
          stat_srtdat,
          stat_cmpdat,
          stat_cancat,
          tacb_id,
          valid_from,
          valid_to,
          tacb_audid,
          tacb_prev_audid,
          tacb_next_audid,
		  rendered_asmt
        )
        VALUES
        (
          :new.stat_id,
          :new.cctr_affn_um_evntreqt,
          :new.cctr_affn_um_extn,
          :new.cctr_affn_pvdr,
          :new.cctr_affn_cm,
          :new.cctr_affn_memb,
          :new.cctr_affn_um_evnt,
          :new.stat_rfngwkfwtsk,
          :new.stat_prvsrfngtsk,
          :new.stat_prvsrfngtsk_prmn,
          :new.stat_ownr,
          :new.stat_prvsownr,
          :new.stat_prvssndr,
          :new.stat_prvsownrprmn,
          :new.stat_tnfr,
          :new.stat_prvstnfr,
          :new.tacb_currqtn,
          :new.tacb_asmtcc,
          :new.stat_rtknorig,
          :new.stat_sentltr,
          :new.stat_senttsk,
          :new.tacb_clldstts,
          :new.tacb_memb,
          :new.classtype,
          :new.tacb_c4c_id,
          :new.tacb_crtd,
          :new.tacb_las_act,
          :new.tacb_las_act_actrtyp,
          :new.tacb_obj_stt,
          :new.tacb_vers,
          :new.tacb_vsbt,
          :new.tacb_dltddt,
          :new.tacb_las_act_by,
          :new.tacb_origcrtr,
          :new.tacb_origcrtrlogdin,
          :new.tacb_las_act_by_logdin,
          :new.tacb_univid,
          :new.tacb_scor,
          :new.tacb_dscmacpd,

       :new.cctr_cmpdat,
          :new.cctr_id,
          :new.stat_wkfwistcid,
          :new.stat_cnv_id,
          :new.stat_ownrchndflag,
          :new.stat_ownrchndcnt,
          :new.stat_srtdat,
          :new.stat_cmpdat,
          :new.stat_cancat,
          :new.tacb_id,
          :new.tacb_las_act_tim,
          NULL,
          u_taknasmtcc_base.NEXTVAL,
          last_audid,
          NULL,
		  :new.rendered_asmt
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_taknasmtcc_base
      SET
        valid_to        = :new.tacb_las_act_tim,
        tacb_next_audid = u_taknasmtcc_base.CURRVAL
      WHERE
        tacb_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
232
</td>
<td>
THH_C4C
</td>
<td>
TRG_TOIT_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TIM_OFF_ITVL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_TOIT_AUDITINSERT&quot; BEFORE INSERT ON T_TIM_OFF_ITVL FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.toit_crtd IS NULL THEN 
    :new.toit_crtd := curr_date; 
  END IF; 

  IF :new.toit_las_act_tim IS NULL THEN 
    :new.toit_las_act_tim := curr_date; 
  END IF; 

  IF :new.toit_las_act IS NULL THEN 
    :new.toit_las_act := 1; 
  END IF; 

  IF :new.toit_obj_stt IS NULL THEN 
    :new.toit_obj_stt := 1; 
  END IF; 

  IF :new.toit_vers IS NULL THEN 
    :new.toit_vers := 0; 
  END IF; 

  IF :new.toit_vsbt IS NULL THEN 
    :new.toit_vsbt := 1001; 
  END IF; 

  IF :new.toit_las_act_by IS NULL THEN 
    :new.toit_las_act_by := 1; 
  END IF; 

  IF :new.toit_origcrtr IS NULL THEN 
    :new.toit_origcrtr := 1; 
  END IF; 

  IF :new.toit_origcrtrlogdin IS NULL THEN 
    :new.toit_origcrtrlogdin := 1; 
  END IF; 

  IF :new.toit_las_act_by_logdin IS NULL THEN 
    :new.toit_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_tim_off_itvl 
  ( 
   classtype, 
   toit_c4c_id, 
   toit_crtd, 
   toit_las_act, 
   toit_las_act_actrtyp, 
   toit_obj_stt, 
   toit_vers, 
   toit_vsbt, 
   toit_dltddt, 
   toit_las_act_by, 
   toit_origcrtr, 
   toit_origcrtrlogdin, 
   toit_las_act_by_logdin, 
   toit_univid, 
   toit_dt_from, 
   toit_dt_to, 
   toit_aprd, 
   toit_payr, 
   toit_tim_off_reqt, 
   toit_id, 
   valid_from, 
   valid_to , 
   toit_audid, 
   toit_prev_audid, 
   toit_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.toit_c4c_id,
   :new.toit_crtd,
   :new.toit_las_act,
   :new.toit_las_act_actrtyp,
   :new.toit_obj_stt,
   :new.toit_vers,
   :new.toit_vsbt,
   :new.toit_dltddt,
   :new.toit_las_act_by,
   :new.toit_origcrtr,
   :new.toit_origcrtrlogdin,
   :new.toit_las_act_by_logdin,
   :new.toit_univid,
   :new.toit_dt_from,
   :new.toit_dt_to,
   :new.toit_aprd,
   :new.toit_payr,
   :new.toit_tim_off_reqt, 
   :new.toit_id, 
   :new.toit_las_act_tim, 
   NULL, 
   u_tim_off_itvl.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
233
</td>
<td>
THH_C4C
</td>
<td>
TRG_TOIT_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TIM_OFF_ITVL
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_toit_auditupdate BEFORE
  UPDATE
    ON T_TIM_OFF_ITVL FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        toit_audid
      INTO
        last_audid
      FROM
        a_tim_off_itvl
      WHERE
        toit_id            = :old.toit_id
      AND toit_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.toit_las_act_tim = :new.toit_las_act_tim THEN
      UPDATE
        a_tim_off_itvl
      SET
        classtype              = :new.classtype,
        toit_c4c_id            = :new.toit_c4c_id,
        toit_crtd              = :new.toit_crtd,
        toit_las_act           = :new.toit_las_act,
        toit_las_act_actrtyp   = :new.toit_las_act_actrtyp,
        toit_obj_stt           = :new.toit_obj_stt,
        toit_vers              = :new.toit_vers,
        toit_vsbt              = :new.toit_vsbt,
        toit_dltddt            = :new.toit_dltddt,
        toit_las_act_by        = :new.toit_las_act_by,
        toit_origcrtr          = :new.toit_origcrtr,
        toit_origcrtrlogdin    = :new.toit_origcrtrlogdin,
        toit_las_act_by_logdin = :new.toit_las_act_by_logdin,
        toit_univid            = :new.toit_univid,
        toit_dt_from           = :new.toit_dt_from,
        toit_dt_to             = :new.toit_dt_to,
        toit_aprd              = :new.toit_aprd,
        toit_payr              = :new.toit_payr,
        toit_tim_off_reqt      = :new.toit_tim_off_reqt
      WHERE
        toit_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_tim_off_itvl
        (
          classtype,
          toit_c4c_id,
          toit_crtd,
          toit_las_act,
          toit_las_act_actrtyp,
          toit_obj_stt,
          toit_vers,

       toit_vsbt,
          toit_dltddt,
          toit_las_act_by,
          toit_origcrtr,
          toit_origcrtrlogdin,
          toit_las_act_by_logdin,
          toit_univid,
          toit_dt_from,
          toit_dt_to,
          toit_aprd,
          toit_payr,
          toit_tim_off_reqt,
          toit_id,
          valid_from,
          valid_to,
          toit_audid,
          toit_prev_audid,
          toit_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.toit_c4c_id,
          :new.toit_crtd,
          :new.toit_las_act,
          :new.toit_las_act_actrtyp,
          :new.toit_obj_stt,
          :new.toit_vers,
          :new.toit_vsbt,
          :new.toit_dltddt,
          :new.toit_las_act_by,
          :new.toit_origcrtr,
          :new.toit_origcrtrlogdin,
          :new.toit_las_act_by_logdin,
          :new.toit_univid,
          :new.toit_dt_from,
          :new.toit_dt_to,
          :new.toit_aprd,
          :new.toit_payr,
          :new.toit_tim_off_reqt,
          :new.toit_id,
          :new.toit_las_act_tim,
          NULL,
          u_tim_off_itvl.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_tim_off_itvl
      SET
        valid_to        = :new.toit_las_act_tim,
        toit_next_audid = u_tim_off_itvl.CURRVAL
      WHERE
        toit_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
234
</td>
<td>
THH_C4C
</td>
<td>
TRG_TOFR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TIM_OFF_REQT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_TOFR_AUDITINSERT&quot; BEFORE INSERT ON T_TIM_OFF_REQT FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.tofr_crtd IS NULL THEN 
    :new.tofr_crtd := curr_date; 
  END IF; 

  IF :new.tofr_las_act_tim IS NULL THEN 
    :new.tofr_las_act_tim := curr_date; 
  END IF; 

  IF :new.tofr_las_act IS NULL THEN 
    :new.tofr_las_act := 1; 
  END IF; 

  IF :new.tofr_obj_stt IS NULL THEN 
    :new.tofr_obj_stt := 1; 
  END IF; 

  IF :new.tofr_vers IS NULL THEN 
    :new.tofr_vers := 0; 
  END IF; 

  IF :new.tofr_vsbt IS NULL THEN 
    :new.tofr_vsbt := 1001; 
  END IF; 

  IF :new.tofr_las_act_by IS NULL THEN 
    :new.tofr_las_act_by := 1; 
  END IF; 

  IF :new.tofr_origcrtr IS NULL THEN 
    :new.tofr_origcrtr := 1; 
  END IF; 

  IF :new.tofr_origcrtrlogdin IS NULL THEN 
    :new.tofr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.tofr_las_act_by_logdin IS NULL THEN 
    :new.tofr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_tim_off_reqt 
  ( 
   tofr_rqtrcmmt, 
   tofr_svsrcmmt, 
   tofr_wkfwistcid, 
   tofr_cnv_id, 
   tofr_ownrchndflag, 
   tofr_ownrchndcnt, 
   tofr_rtedat, 
   tofr_drmdat, 
   tofr_rfngwkfwtsk, 
   tofr_prvsrfngtsk, 
   tofr_prvsrfngtsk_prmn, 
   tofr_ownr, 
   tofr_prvsownr, 
   tofr_prvssndr, 
   tofr_prvsownrprmn, 
   tofr_tnfr, 
   tofr_prvstnfr, 
   tofr_rtedto, 
   tofr_reqttyp, 
   tofr_payrmy_to_rqs, 
   classtype, 
   tofr_c4c_id, 
   tofr_crtd, 
   tofr_las_act, 
   tofr_las_act_actrtyp, 
   tofr_obj_stt, 
   tofr_vers, 
   tofr_vsbt, 
   tofr_dltddt, 
   tofr_las_act_by, 
   tofr_origcrtr, 
   tofr_origcrtrlogdin, 
   tofr_las_act_by_logdin, 
   tofr_univid, 
   tofr_unitreqt, 
   tofr_on_dy, 
   tofr_id, 
   valid_from, 
   valid_to , 
   tofr_audid, 
   tofr_prev_audid, 
   tofr_next_audid
  ) 
  VALUES 
  ( 
   :new.tofr_rqtrcmmt,
   :new.tofr_svsrcmmt,
   :new.tofr_wkfwistcid,
   :new.tofr_cnv_id,
   :new.tofr_ownrchndflag,
   :new.tofr_ownrchndcnt,
   :new.tofr_rtedat,
   :new.tofr_drmdat,
   :new.tofr_rfngwkfwtsk,
   :new.tofr_prv
srfngtsk,
   :new.tofr_prvsrfngtsk_prmn,
   :new.tofr_ownr,
   :new.tofr_prvsownr,
   :new.tofr_prvssndr,
   :new.tofr_prvsownrprmn,
   :new.tofr_tnfr,
   :new.tofr_prvstnfr,
   :new.tofr_rtedto,
   :new.tofr_reqttyp,
   :new.tofr_payrmy_to_rqs,
   :new.classtype,
   :new.tofr_c4c_id,
   :new.tofr_crtd,
   :new.tofr_las_act,
   :new.tofr_las_act_actrtyp,
   :new.tofr_obj_stt,
   :new.tofr_vers,
   :new.tofr_vsbt,
   :new.tofr_dltddt,
   :new.tofr_las_act_by,
   :new.tofr_origcrtr,
   :new.tofr_origcrtrlogdin,
   :new.tofr_las_act_by_logdin,
   :new.tofr_univid,
   :new.tofr_unitreqt,
   :new.tofr_on_dy, 
   :new.tofr_id, 
   :new.tofr_las_act_tim, 
   NULL, 
   u_tim_off_reqt.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
235
</td>
<td>
THH_C4C
</td>
<td>
TRG_TOFR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TIM_OFF_REQT
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_tofr_auditupdate BEFORE
  UPDATE
    ON T_TIM_OFF_REQT FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        tofr_audid
      INTO
        last_audid
      FROM
        a_tim_off_reqt
      WHERE
        tofr_id            = :old.tofr_id
      AND tofr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.tofr_las_act_tim = :new.tofr_las_act_tim THEN
      UPDATE
        a_tim_off_reqt
      SET
        tofr_ownr              = :new.tofr_ownr,
        tofr_prvsownr          = :new.tofr_prvsownr,
        tofr_prvssndr          = :new.tofr_prvssndr,
        tofr_prvsownrprmn      = :new.tofr_prvsownrprmn,
        tofr_tnfr              = :new.tofr_tnfr,
        tofr_prvstnfr          = :new.tofr_prvstnfr,
        tofr_rtedto            = :new.tofr_rtedto,
        tofr_reqttyp           = :new.tofr_reqttyp,
        tofr_payrmy_to_rqs     = :new.tofr_payrmy_to_rqs,
        classtype              = :new.classtype,
        tofr_c4c_id            = :new.tofr_c4c_id,
        tofr_crtd              = :new.tofr_crtd,
        tofr_las_act           = :new.tofr_las_act,
        tofr_las_act_actrtyp   = :new.tofr_las_act_actrtyp,
        tofr_obj_stt           = :new.tofr_obj_stt,
        tofr_vers              = :new.tofr_vers,
        tofr_vsbt              = :new.tofr_vsbt,
        tofr_dltddt            = :new.tofr_dltddt,
        tofr_las_act_by        = :new.tofr_las_act_by,
        tofr_origcrtr          = :new.tofr_origcrtr,
        tofr_origcrtrlogdin    = :new.tofr_origcrtrlogdin,
        tofr_las_act_by_logdin = :new.tofr_las_act_by_logdin,
        tofr_univid            = :new.tofr_univid,
        tofr_unitreqt          = :new.tofr_unitreqt,
        tofr_on_dy             = :new.tofr_on_dy,
        tofr_rqtrcmmt          = :new.tofr_rqtrcmmt,
        tofr_svsrcmmt
= :new.tofr_svsrcmmt,
        tofr_wkfwistcid        = :new.tofr_wkfwistcid,
        tofr_cnv_id            = :new.tofr_cnv_id,
        tofr_ownrchndflag      = :new.tofr_ownrchndflag,
        tofr_ownrchndcnt       = :new.tofr_ownrchndcnt,
        tofr_rtedat            = :new.tofr_rtedat,
        tofr_drmdat            = :new.tofr_drmdat,
        tofr_rfngwkfwtsk       = :new.tofr_rfngwkfwtsk,
        tofr_prvsrfngtsk       = :new.tofr_prvsrfngtsk,
        tofr_prvsrfngtsk_prmn  = :new.tofr_prvsrfngtsk_prmn
      WHERE
        tofr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_tim_off_reqt
        (
          tofr_ownr,
          tofr_prvsownr,
          tofr_prvssndr,
          tofr_prvsownrprmn,
          tofr_tnfr,
          tofr_prvstnfr,
          tofr_rtedto,
          tofr_reqttyp,
          tofr_payrmy_to_rqs,
          classtype,
          tofr_c4c_id,
          tofr_crtd,
          tofr_las_act,
          tofr_las_act_actrtyp,
          tofr_obj_stt,
          tofr_vers,
          tofr_vsbt,
          tofr_dltddt,
          tofr_las_act_by,
          tofr_origcrtr,
          tofr_origcrtrlogdin,
          tofr_las_act_by_logdin,
          tofr_univid,
          tofr_unitreqt,
          tofr_on_dy,
          tofr_rqtrcmmt,
          tofr_svsrcmmt,
          tofr_wkfwistcid,
          tofr_cnv_id,
          tofr_ownrchndflag,
          tofr_ownrchndcnt,
          tofr_rtedat,
          tofr_drmdat,
          tofr_rfngwkfwtsk,
          tofr_prvsrfngtsk,
          tofr_prvsrfngtsk_prmn,
          tofr_id,
          valid_from,
          valid_to,
          tofr_audid,
          tofr_prev_audid,
          tofr_next_audid
        )
        VALUES
        (
          :new.tofr_ownr,
          :new.tofr_prvsownr,
          :new.tofr_prvssndr,
          :new.tofr_prvsownrprmn,
          :new.tofr_tnfr,
          :new.tofr
_prvstnfr,
          :new.tofr_rtedto,
          :new.tofr_reqttyp,
          :new.tofr_payrmy_to_rqs,
          :new.classtype,
          :new.tofr_c4c_id,
          :new.tofr_crtd,
          :new.tofr_las_act,
          :new.tofr_las_act_actrtyp,
          :new.tofr_obj_stt,
          :new.tofr_vers,
          :new.tofr_vsbt,
          :new.tofr_dltddt,
          :new.tofr_las_act_by,
          :new.tofr_origcrtr,
          :new.tofr_origcrtrlogdin,
          :new.tofr_las_act_by_logdin,
          :new.tofr_univid,
          :new.tofr_unitreqt,
          :new.tofr_on_dy,
          :new.tofr_rqtrcmmt,
          :new.tofr_svsrcmmt,
          :new.tofr_wkfwistcid,
          :new.tofr_cnv_id,
          :new.tofr_ownrchndflag,
          :new.tofr_ownrchndcnt,
          :new.tofr_rtedat,
          :new.tofr_drmdat,
          :new.tofr_rfngwkfwtsk,
          :new.tofr_prvsrfngtsk,
          :new.tofr_prvsrfngtsk_prmn,
          :new.tofr_id,
          :new.tofr_las_act_tim,
          NULL,
          u_tim_off_reqt.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_tim_off_reqt
      SET
        valid_to        = :new.tofr_las_act_tim,
        tofr_next_audid = u_tim_off_reqt.CURRVAL
      WHERE
        tofr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
236
</td>
<td>
THH_C4C
</td>
<td>
TRG_TRRC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TNFRREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_TRRC_AUDITINSERT&quot; BEFORE INSERT ON T_TNFRREC FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.trrc_crtd IS NULL THEN 
    :new.trrc_crtd := curr_date; 
  END IF; 

  IF :new.trrc_las_act_tim IS NULL THEN 
    :new.trrc_las_act_tim := curr_date; 
  END IF; 

  IF :new.trrc_las_act IS NULL THEN 
    :new.trrc_las_act := 1; 
  END IF; 

  IF :new.trrc_obj_stt IS NULL THEN 
    :new.trrc_obj_stt := 1; 
  END IF; 

  IF :new.trrc_vers IS NULL THEN 
    :new.trrc_vers := 0; 
  END IF; 

  IF :new.trrc_vsbt IS NULL THEN 
    :new.trrc_vsbt := 1001; 
  END IF; 

  IF :new.trrc_las_act_by IS NULL THEN 
    :new.trrc_las_act_by := 1; 
  END IF; 

  IF :new.trrc_origcrtr IS NULL THEN 
    :new.trrc_origcrtr := 1; 
  END IF; 

  IF :new.trrc_origcrtrlogdin IS NULL THEN 
    :new.trrc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.trrc_las_act_by_logdin IS NULL THEN 
    :new.trrc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_tnfrrec 
  ( 
   classtype, 
   trrc_c4c_id, 
   trrc_crtd, 
   trrc_las_act, 
   trrc_las_act_actrtyp, 
   trrc_obj_stt, 
   trrc_vers, 
   trrc_vsbt, 
   trrc_dltddt, 
   trrc_las_act_by, 
   trrc_origcrtr, 
   trrc_origcrtrlogdin, 
   trrc_las_act_by_logdin, 
   trrc_univid, 
   trrc_tmtd, 
   trrc_ddln_dt, 
   trrc_ddln_tim_in_dy, 
   trrc_ddlnact, 
   trrc_cmmt, 
   trrc_rjtncmmt, 
   trrc_rfrdobj_id, 
   trrc_rfrdobj_typ, 
   trrc_wkfwistcid, 
   trrc_cnv_id, 
   trrc_rfngwkfwtsk, 
   trrc_prvsrfngtsk, 
   trrc_prvsrfngtsk_prmn, 
   trrc_rjtnresn, 
   trrc_resn, 
   trrc_origownr, 
   trrc_sndr, 
   trrc_rcpt, 
   trrc_id, 
   valid_from, 
   valid_to , 
   trrc_audid, 
   trrc_prev_audid, 
   trrc_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.trrc_c4c_id,
   :new.trrc_crtd,
   :new.trrc_las_act,
   :new.trrc_las_act_actrtyp,
   :new.trrc_obj_stt,
   :new.trrc_vers,
   :new.trrc_vsbt,
   :new.trrc_dltddt,
   :new.trrc_las_act_by,
   :new.trrc_origcrtr,
   :new.trrc_origcrtrlogdin,
   :new.trrc_las_act_by_logdin,
   :new.trrc_univi
d,
   :new.trrc_tmtd,
   :new.trrc_ddln_dt,
   :new.trrc_ddln_tim_in_dy,
   :new.trrc_ddlnact,
   :new.trrc_cmmt,
   :new.trrc_rjtncmmt,
   :new.trrc_rfrdobj_id,
   :new.trrc_rfrdobj_typ,
   :new.trrc_wkfwistcid,
   :new.trrc_cnv_id,
   :new.trrc_rfngwkfwtsk,
   :new.trrc_prvsrfngtsk,
   :new.trrc_prvsrfngtsk_prmn,
   :new.trrc_rjtnresn,
   :new.trrc_resn,
   :new.trrc_origownr,
   :new.trrc_sndr,
   :new.trrc_rcpt, 
   :new.trrc_id, 
   :new.trrc_las_act_tim, 
   NULL, 
   u_tnfrrec.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
237
</td>
<td>
THH_C4C
</td>
<td>
TRG_TRRC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TNFRREC
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_trrc_auditupdate BEFORE
  UPDATE
    ON T_TNFRREC FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        trrc_audid
      INTO
        last_audid
      FROM
        a_tnfrrec
      WHERE
        trrc_id            = :old.trrc_id
      AND trrc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.trrc_las_act_tim = :new.trrc_las_act_tim THEN
      UPDATE
        a_tnfrrec
      SET
        classtype              = :new.classtype,
        trrc_c4c_id            = :new.trrc_c4c_id,
        trrc_crtd              = :new.trrc_crtd,
        trrc_las_act           = :new.trrc_las_act,
        trrc_las_act_actrtyp   = :new.trrc_las_act_actrtyp,
        trrc_obj_stt           = :new.trrc_obj_stt,
        trrc_vers              = :new.trrc_vers,
        trrc_vsbt              = :new.trrc_vsbt,
        trrc_dltddt            = :new.trrc_dltddt,
        trrc_las_act_by        = :new.trrc_las_act_by,
        trrc_origcrtr          = :new.trrc_origcrtr,
        trrc_origcrtrlogdin    = :new.trrc_origcrtrlogdin,
        trrc_las_act_by_logdin = :new.trrc_las_act_by_logdin,
        trrc_univid            = :new.trrc_univid,
        trrc_tmtd              = :new.trrc_tmtd,
        trrc_ddln_dt           = :new.trrc_ddln_dt,
        trrc_ddln_tim_in_dy    = :new.trrc_ddln_tim_in_dy,
        trrc_ddlnact           = :new.trrc_ddlnact,
        trrc_cmmt              = :new.trrc_cmmt,
        trrc_rjtncmmt          = :new.trrc_rjtncmmt,
        trrc_rfrdobj_id        = :new.trrc_rfrdobj_id,
        trrc_rfrdobj_typ       = :new.trrc_rfrdobj_typ,
        trrc_wkfwistcid        = :new.trrc_wkfwistcid,
        trrc_cnv_id            = :new.trrc_cnv_id,
        trrc_rfngwkfwtsk       = :new.trrc_rfngwkfwtsk,
        trrc_prvsrfngtsk       = :new.trrc_prvsrfngtsk,
        trrc_prvsrfngtsk_prmn
  = :new.trrc_prvsrfngtsk_prmn,
        trrc_rjtnresn          = :new.trrc_rjtnresn,
        trrc_resn              = :new.trrc_resn,
        trrc_origownr          = :new.trrc_origownr,
        trrc_sndr              = :new.trrc_sndr,
        trrc_rcpt              = :new.trrc_rcpt
      WHERE
        trrc_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_tnfrrec
        (
          classtype,
          trrc_c4c_id,
          trrc_crtd,
          trrc_las_act,
          trrc_las_act_actrtyp,
          trrc_obj_stt,
          trrc_vers,
          trrc_vsbt,
          trrc_dltddt,
          trrc_las_act_by,
          trrc_origcrtr,
          trrc_origcrtrlogdin,
          trrc_las_act_by_logdin,
          trrc_univid,
          trrc_tmtd,
          trrc_ddln_dt,
          trrc_ddln_tim_in_dy,
          trrc_ddlnact,
          trrc_cmmt,
          trrc_rjtncmmt,
          trrc_rfrdobj_id,
          trrc_rfrdobj_typ,
          trrc_wkfwistcid,
          trrc_cnv_id,
          trrc_rfngwkfwtsk,
          trrc_prvsrfngtsk,
          trrc_prvsrfngtsk_prmn,
          trrc_rjtnresn,
          trrc_resn,
          trrc_origownr,
          trrc_sndr,
          trrc_rcpt,
          trrc_id,
          valid_from,
          valid_to,
          trrc_audid,
          trrc_prev_audid,
          trrc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.trrc_c4c_id,
          :new.trrc_crtd,
          :new.trrc_las_act,
          :new.trrc_las_act_actrtyp,
          :new.trrc_obj_stt,
          :new.trrc_vers,
          :new.trrc_vsbt,
          :new.trrc_dltddt,
          :new.trrc_las_act_by,
          :new.trrc_origcrtr,
          :new.trrc_origcrtrlogdin,
          :new.trrc_las_act_by_logdin,
          :new.trrc_univid,
          :new.trrc_tmtd,
          :new.trrc_ddln_dt,
          :new.trrc_ddln_tim_in_dy,

          :new.trrc_ddlnact,
          :new.trrc_cmmt,
          :new.trrc_rjtncmmt,
          :new.trrc_rfrdobj_id,
          :new.trrc_rfrdobj_typ,
          :new.trrc_wkfwistcid,
          :new.trrc_cnv_id,
          :new.trrc_rfngwkfwtsk,
          :new.trrc_prvsrfngtsk,
          :new.trrc_prvsrfngtsk_prmn,
          :new.trrc_rjtnresn,
          :new.trrc_resn,
          :new.trrc_origownr,
          :new.trrc_sndr,
          :new.trrc_rcpt,
          :new.trrc_id,
          :new.trrc_las_act_tim,
          NULL,
          u_tnfrrec.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_tnfrrec
      SET
        valid_to        = :new.trrc_las_act_tim,
        trrc_next_audid = u_tnfrrec.CURRVAL
      WHERE
        trrc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
238
</td>
<td>
THH_C4C
</td>
<td>
TRG_TODO
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TODO
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_todo BEFORE INSERT OR UPDATE ON T_todo FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.todo_crtd IS NULL THEN
    :new.todo_crtd := curr_date;
  END IF;
  IF :new.todo_las_act_tim IS NULL THEN
    :new.todo_las_act_tim := curr_date;
  END IF;
  IF :new.todo_obj_stt IS NULL THEN
    :new.todo_obj_stt := 1;
  END IF;
  IF :new.todo_vers IS NULL THEN
    :new.todo_vers := 0;
  END IF;
  IF :new.todo_vsbt IS NULL THEN
    :new.todo_vsbt := 1001;
  END IF;
  IF :new.todo_origcrtr IS NULL THEN
    :new.todo_origcrtr := 1;
  END IF;
  IF :new.todo_origcrtrlogdin IS NULL THEN
    :new.todo_origcrtrlogdin := 1;
  END IF;
  IF :new.todo_las_act_by_logdin IS NULL THEN
    :new.todo_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_todo
  ( todo_ID,
   CLASSTYPE,
   TODO_TYP_SBTY,
   todo_C4C_ID,
   todo_CRTD,
   todo_LAS_ACT_TIM,
   todo_OBJ_STT,
   todo_VERS,
   todo_VSBT,
   todo_DLTDT,
   todo_LAS_ACT_BY,
   todo_ORIGCRTR,
   todo_ORIGCRTRLOGDIN,
   todo_LAS_ACT_BY_LOGDIN,
   todo_UNIVID,
   todo_TEMPLATE,
   todo_NAME,
   todo_DESCRIPTION,
   todo_COMMENTS,
   todo_PRIORITY,
   todo_START,
   todo_END,
   t_senttsk_setk_id,
   t_outcome_outcome_id,
   valid_from,
   valid_to ,
   todo_audid,
   todo_prev_audid,
   todo_next_audid )
  VALUES
  (:new.todo_ID,
   :new.CLASSTYPE,
   :new.TODO_TYP_SBTY,
   :new.todo_C4C_ID,
   :new.todo_CRTD,
   :new.todo_LAS_ACT_TIM,
   :new.todo_OBJ_STT,
   :new.todo_VERS,
   :new.todo_VSBT,
   :new.todo_DLTDT,
   :new.todo_LAS_ACT_BY,
   :new.todo_ORIGCRTR,
   :new.todo_ORIGCRTRLOGDIN,
   :new.todo_LAS_ACT_BY_LOGDIN,
   :new.todo_UNIVID,
   :new.todo_TEMPLATE,
   :new.todo_NAME,
   :new.todo_DESCRIPTION,
   :new.todo_COMMENTS,
   :new.todo_PRIORITY,
   :new.todo_START,
   :new.todo_END,
   :new.t_senttsk_setk_id,
   :new.t_outcome_outcome_id,
   :new.todo_las_act_tim,
   NULL,
   u_todo.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT todo_audid INTO last_a
udid FROM a_todo
      WHERE todo_id =  :old.todo_id AND todo_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :old.todo_las_act_tim = :new.todo_las_act_tim THEN
    UPDATE a_todo
     SET todo_id                         = :new.todo_id,
         classtype                       = :new.classtype,
         TODO_TYP_SBTY						  = :new.TODO_TYP_SBTY,
         todo_c4c_id                     = :new.todo_c4c_id,
         todo_crtd                       = :new.todo_crtd,
         todo_las_act_tim		 = :new.todo_las_act_tim,
         todo_obj_stt                    = :new.todo_obj_stt,
         todo_vers                       = :new.todo_vers,
         todo_vsbt                       = :new.todo_vsbt,
         todo_dltdt                      = :new.todo_dltdt,
         todo_LAS_ACT_BY                = :new.todo_LAS_ACT_BY,
         todo_origcrtr                   = :new.todo_origcrtr,
         todo_origcrtrlogdin             = :new.todo_origcrtrlogdin,
         todo_las_act_by_logdin          = :new.todo_las_act_by_logdin,
         todo_UNIVID                     = :new.todo_univid,
         todo_TEMPLATE                   = :new.todo_TEMPLATE,
         todo_NAME                       = :new.todo_name,
         todo_DESCRIPTION                = :new.todo_description,
         todo_COMMENTS                   = :new.todo_comments,
         todo_priority                   = :new.todo_priority,
         todo_start                      = :new.todo_START,
         todo_end                        = :new.todo_END,
         t_senttsk_setk_id               = :new.t_senttsk_setk_id,
         t_outcome_outcome_id            = :new.t_outcome_outcome_id
      WHERE todo_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_todo
  ( todo_ID,
   CLASSTYPE,
   TODO_TYP_SBTY,

   todo_C4C_ID,
   todo_CRTD,
   todo_LAS_ACT_TIM,
   todo_OBJ_STT,
   todo_VERS,
   todo_VSBT,
   todo_DLTDT,
   todo_LAS_ACT_BY,
   todo_ORIGCRTR,
   todo_ORIGCRTRLOGDIN,
   todo_LAS_ACT_BY_LOGDIN,
   todo_UNIVID,
   todo_TEMPLATE,
   todo_NAME,
   todo_DESCRIPTION,
   todo_COMMENTS,
   todo_PRIORITY,
   todo_START,
   todo_END,
   t_senttsk_setk_id,
   t_outcome_outcome_id,
   valid_from,
   valid_to ,
   todo_audid,
   todo_prev_audid,
   todo_next_audid )
  VALUES
  (:new.todo_ID,
   :new.CLASSTYPE,
   :new.TODO_TYP_SBTY,
   :new.todo_C4C_ID,
   :new.todo_CRTD,
   :new.todo_LAS_ACT_TIM,
   :new.todo_OBJ_STT,
   :new.todo_VERS,
   :new.todo_VSBT,
   :new.todo_DLTDT,
   :new.todo_LAS_ACT_BY,
   :new.todo_ORIGCRTR,
   :new.todo_ORIGCRTRLOGDIN,
   :new.todo_LAS_ACT_BY_LOGDIN,
   :new.todo_UNIVID,
   :new.todo_TEMPLATE,
   :new.todo_NAME,
   :new.todo_DESCRIPTION,
   :new.todo_COMMENTS,
   :new.todo_PRIORITY,
   :new.todo_START,
   :new.todo_END,
   :new.t_senttsk_setk_id,
   :new.t_outcome_outcome_id,
   :new.todo_las_act_tim,
   NULL,
   u_todo.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_todo
      SET
        valid_to = :new.todo_las_act_tim,
        todo_next_audid = u_todo.CURRVAL
      WHERE todo_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
239
</td>
<td>
THH_C4C
</td>
<td>
TRG_TODO_TEMPLATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TODO_TEMPLATE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_todo_TEMPLATE BEFORE INSERT OR UPDATE ON T_todo_TEMPLATE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
  /* last audit ID of record */
  last_audid NUMBER;
BEGIN

  curr_date := current_date;
IF INSERTING THEN
  IF :new.todo_crtd IS NULL THEN
    :new.todo_crtd := curr_date;
  END IF;
  IF :new.todo_las_act_tim IS NULL THEN
    :new.todo_las_act_tim := curr_date;
  END IF;
  IF :new.todo_obj_stt IS NULL THEN
    :new.todo_obj_stt := 1;
  END IF;
  IF :new.todo_vers IS NULL THEN
    :new.todo_vers := 0;
  END IF;
  IF :new.todo_vsbt IS NULL THEN
    :new.todo_vsbt := 1001;
  END IF;
  IF :new.todo_origcrtr IS NULL THEN
    :new.todo_origcrtr := 1;
  END IF;
  IF :new.todo_origcrtrlogdin IS NULL THEN
    :new.todo_origcrtrlogdin := 1;
  END IF;
  IF :new.todo_las_act_by_logdin IS NULL THEN
    :new.todo_las_act_by_logdin := 1;
  END IF;
  INSERT INTO a_todo_template
  ( todo_ID,
   CLASSTYPE,
   todo_C4C_ID,
   todo_CRTD,
   todo_LAS_ACT_TIM,
   todo_OBJ_STT,
   todo_VERS,
   todo_VSBT,
   todo_DLTDT,
   todo_LAS_ACT_BY,
   todo_ORIGCRTR,
   todo_ORIGCRTRLOGDIN,
   todo_LAS_ACT_BY_LOGDIN,
   todo_UNIVID,
   todo_NAME,
   todo_DESCRIPTION,
   todo_COMMENTS,
   todo_PRIORITY,
   valid_from,
   valid_to ,
   todo_audid,
   todo_prev_audid,
   todo_next_audid )
  VALUES
  (:new.todo_ID,
   :new.CLASSTYPE,
   :new.todo_C4C_ID,
   :new.todo_CRTD,
   :new.todo_LAS_ACT_TIM,
   :new.todo_OBJ_STT,
   :new.todo_VERS,
   :new.todo_VSBT,
   :new.todo_DLTDT,
   :new.todo_LAS_ACT_BY,
   :new.todo_ORIGCRTR,
   :new.todo_ORIGCRTRLOGDIN,
   :new.todo_LAS_ACT_BY_LOGDIN,
   :new.todo_UNIVID,
   :new.todo_NAME,
   :new.todo_DESCRIPTION,
   :new.todo_COMMENTS,
   :new.todo_PRIORITY,
   :new.todo_las_act_tim,
   NULL,
   u_todo_template.NEXTVAL,
   NULL,
   NULL);
 ELSE
  BEGIN
    SELECT todo_audid INTO last_audid FROM a_todo_template
      WHERE todo_id =  :old.todo_id AND todo_next_audid IS NULL  FOR UPDATE;
  EXCEPTION WHEN NO_DATA_FOUND THEN last_audid := NULL;
  END;

  /* LastActionTime has not changed - no new transaction */
  IF :o
ld.todo_las_act_tim = :new.todo_las_act_tim THEN
    UPDATE a_todo_template
     SET todo_id                         = :new.todo_id,
         classtype                       = :new.classtype,
         todo_c4c_id                     = :new.todo_c4c_id,
         todo_crtd                       = :new.todo_crtd,
         todo_las_act_tim		 = :new.todo_las_act_tim,
         todo_obj_stt                    = :new.todo_obj_stt,
         todo_vers                       = :new.todo_vers,
         todo_vsbt                       = :new.todo_vsbt,
         todo_dltdt                      = :new.todo_dltdt,
         todo_LAS_ACT_BY                = :new.todo_LAS_ACT_BY,
         todo_origcrtr                   = :new.todo_origcrtr,
         todo_origcrtrlogdin             = :new.todo_origcrtrlogdin,
         todo_las_act_by_logdin          = :new.todo_las_act_by_logdin,
         todo_UNIVID                     = :new.todo_univid,
         todo_NAME                       = :new.todo_name,
         todo_DESCRIPTION                = :new.todo_description,
         todo_COMMENTS                   = :new.todo_comments,
         todo_priority                   = :new.todo_priority
      WHERE todo_audid = last_audid;

  /* LastActionTime has changed - new transaction in place */
  ELSE
    /* insert new values introduced by new transaction */
  INSERT INTO a_todo_template
  ( todo_ID,
   CLASSTYPE,
   todo_C4C_ID,
   todo_CRTD,
   todo_LAS_ACT_TIM,
   todo_OBJ_STT,
   todo_VERS,
   todo_VSBT,
   todo_DLTDT,
   todo_LAS_ACT_BY,
   todo_ORIGCRTR,
   todo_ORIGCRTRLOGDIN,
   todo_LAS_ACT_BY_LOGDIN,
   todo_UNIVID,
   todo_NAME,
   todo_DESCRIPTION,
   todo_COMMENTS,
   todo_priority,
   valid_from,
   valid_to ,
   todo_audid,
   todo_prev_audid,
   todo_next_audid )
  VALUES
  (:new.todo_ID,
   :new.CLASSTYPE,
   :new.todo_C4C_ID,
   :new.todo_CRTD,
   :new.todo_LAS_ACT_TIM,
   :new.todo_OBJ_STT,
   :new.todo_VERS,
   :new.todo_VSBT,
   :new.todo_DLTDT,
   :new.todo_LAS_ACT_BY,
   :ne
w.todo_ORIGCRTR,
   :new.todo_ORIGCRTRLOGDIN,
   :new.todo_LAS_ACT_BY_LOGDIN,
   :new.todo_UNIVID,
   :new.todo_NAME,
   :new.todo_DESCRIPTION,
   :new.todo_COMMENTS,
   :new.todo_priority,
   :new.todo_las_act_tim,
   NULL,
   u_todo_template.NEXTVAL,
   last_audid,
   NULL);

    /* update last audit record's valid_to to new LastActionTime
       and next audit ID to newly inserted record's sequence number
     */
    UPDATE a_todo_template
      SET
        valid_to = :new.todo_las_act_tim,
        todo_next_audid = u_todo_template.CURRVAL
      WHERE todo_audid = last_audid;
  END IF;
 END IF;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
240
</td>
<td>
THH_C4C
</td>
<td>
TRG_TKBS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TSK_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_TKBS_AUDITINSERT&quot; BEFORE INSERT ON T_TSK_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.tkbs_crtd IS NULL THEN 
    :new.tkbs_crtd := curr_date; 
  END IF; 

  IF :new.tkbs_las_act_tim IS NULL THEN 
    :new.tkbs_las_act_tim := curr_date; 
  END IF; 

  IF :new.tkbs_las_act IS NULL THEN 
    :new.tkbs_las_act := 1; 
  END IF; 

  IF :new.tkbs_obj_stt IS NULL THEN 
    :new.tkbs_obj_stt := 1; 
  END IF; 

  IF :new.tkbs_vers IS NULL THEN 
    :new.tkbs_vers := 0; 
  END IF; 

  IF :new.tkbs_vsbt IS NULL THEN 
    :new.tkbs_vsbt := 1001; 
  END IF; 

  IF :new.tkbs_las_act_by IS NULL THEN 
    :new.tkbs_las_act_by := 1; 
  END IF; 

  IF :new.tkbs_origcrtr IS NULL THEN 
    :new.tkbs_origcrtr := 1; 
  END IF; 

  IF :new.tkbs_origcrtrlogdin IS NULL THEN 
    :new.tkbs_origcrtrlogdin := 1; 
  END IF; 

  IF :new.tkbs_las_act_by_logdin IS NULL THEN 
    :new.tkbs_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_tsk_base 
  ( 
   tkbs_las_act_actrtyp, 
   tkbs_obj_stt, 
   tkbs_vers, 
   tkbs_vsbt, 
   tkbs_dltddt, 
   tkbs_las_act_by, 
   tkbs_origcrtr, 
   tkbs_origcrtrlogdin, 
   tkbs_las_act_by_logdin, 
   tkbs_univid, 
   tkbs_nam, 
   tkbs_dscn, 
   tkbs_affnreqd, 
   tkbs_kwds, 
   ttlt_frstatvd, 
   ttlt_las_atvd, 
   ttlt_las_dctd, 
   ttlt_frstsbtdat, 
   ttlt_las_sbtdat, 
   ttlt_wkfwistcid, 
   ttlt_cnv_id, 
   ttlt_ownrchndflag, 
   ttlt_ownrchndcnt, 
   ttlt_dvtndt, 
   ttlt_cmmt, 
   ttlt_id, 
   ctsk_subj, 
   ctsk_ddlntim_blck_amnt, 
   ctsk_ddlntim_blck_unit, 
   ctsk_drtn_amnt, 
   ctsk_drtn_unit, 
   ctsk_rmdrprcdwth__amnt, 
   ctsk_rmdrprcdwth__unit, 
   ctsk_rmdrtim_orgn, 
   ctsk_prnl, 
   ctsk_tsk_timg_ddln_dt, 
   ctsk_tsk_timg_ddln_tim_in_dy, 
   ctsk_tsk_timg_ddlnact, 
   ctsk_tsk_timg_strtdt, 
   ctsk_tsk_timg_scldat, 
   ctsk_tsk_timg_snlttsk, 
   ctsk_tsk_timg_snltdt, 
   ctsk_tsk_timg_snltact, 
   ctsk_tsk_timg_ddlnbfr_nxt_irtn, 
   ctsk_tsk_timg_ddlnsltn, 
   ctsk_tsk_timg_scld, 
   ctsk_id, 
   ttlt_las_dctdby, 
   ttlt_frs
tatvdby, 
   ttlt_las_atvdby, 
   ttlt_ratnapvl, 
   ttlt_apvl, 
   ttlt_rcpttrkg, 
   ttlt_las_sbtdby, 
   ttlt_frstsbtdby, 
   ttlt_rfngwkfwtsk, 
   ttlt_prvsrfngtsk, 
   ttlt_prvsrfngtsk_prmn, 
   ttlt_ownr, 
   ttlt_prvsownr, 
   ttlt_prvssndr, 
   ttlt_prvsownrprmn, 
   ttlt_tnfr, 
   ttlt_prvstnfr, 
   ctsk_the_brncact, 
   ctsk_amtn, 
   tkbs_cstmflds, 
   tkbs_tsk_typ, 
   ctsk_orig, 
   ctsk_retnptrn, 
   ctsk_tsk_frma, 
   classtype, 
   tkbs_c4c_id, 
   tkbs_crtd, 
   tkbs_las_act, 
   tkbs_id, 
   valid_from, 
   valid_to , 
   tkbs_audid, 
   tkbs_prev_audid, 
   tkbs_next_audid
  ) 
  VALUES 
  ( 
   :new.tkbs_las_act_actrtyp,
   :new.tkbs_obj_stt,
   :new.tkbs_vers,
   :new.tkbs_vsbt,
   :new.tkbs_dltddt,
   :new.tkbs_las_act_by,
   :new.tkbs_origcrtr,
   :new.tkbs_origcrtrlogdin,
   :new.tkbs_las_act_by_logdin,
   :new.tkbs_univid,
   :new.tkbs_nam,
   :new.tkbs_dscn,
   :new.tkbs_affnreqd,
   :new.tkbs_kwds,
   :new.ttlt_frstatvd,
   :new.ttlt_las_atvd,
   :new.ttlt_las_dctd,
   :new.ttlt_frstsbtdat,
   :new.ttlt_las_sbtdat,
   :new.ttlt_wkfwistcid,
   :new.ttlt_cnv_id,
   :new.ttlt_ownrchndflag,
   :new.ttlt_ownrchndcnt,
   :new.ttlt_dvtndt,
   :new.ttlt_cmmt,
   :new.ttlt_id,
   :new.ctsk_subj,
   :new.ctsk_ddlntim_blck_amnt,
   :new.ctsk_ddlntim_blck_unit,
   :new.ctsk_drtn_amnt,
   :new.ctsk_drtn_unit,
   :new.ctsk_rmdrprcdwth__amnt,
   :new.ctsk_rmdrprcdwth__unit,
   :new.ctsk_rmdrtim_orgn,
   :new.ctsk_prnl,
   :new.ctsk_tsk_timg_ddln_dt,
   :new.ctsk_tsk_timg_ddln_tim_in_dy,
   :new.ctsk_tsk_timg_ddlnact,
   :new.ctsk_tsk_timg_strtdt,
   :new.ctsk_tsk_timg_scldat,
   :new.ctsk_tsk_timg_snlttsk,
   :new.ctsk_tsk_timg_snltdt,
   :new.ctsk_tsk_timg_snltact,
   :new.ctsk_tsk_timg_ddlnbfr_nxt_irtn,
   :new.ctsk_tsk_timg_ddlnsltn,
   :new.ctsk_tsk_timg_scld,
   :new.ctsk_id,
   :new.ttlt_las_dctdby,
   :new.ttlt_frstatvdby,
   :new.ttlt_las_atvdby,
   :new.ttlt_ratnapvl,
   :new.ttlt_apvl,
   :new.ttlt_rcpttrkg,
   :new.ttlt_las_sbtdby,
   :new.ttl
t_frstsbtdby,
   :new.ttlt_rfngwkfwtsk,
   :new.ttlt_prvsrfngtsk,
   :new.ttlt_prvsrfngtsk_prmn,
   :new.ttlt_ownr,
   :new.ttlt_prvsownr,
   :new.ttlt_prvssndr,
   :new.ttlt_prvsownrprmn,
   :new.ttlt_tnfr,
   :new.ttlt_prvstnfr,
   :new.ctsk_the_brncact,
   :new.ctsk_amtn,
   :new.tkbs_cstmflds,
   :new.tkbs_tsk_typ,
   :new.ctsk_orig,
   :new.ctsk_retnptrn,
   :new.ctsk_tsk_frma,
   :new.classtype,
   :new.tkbs_c4c_id,
   :new.tkbs_crtd,
   :new.tkbs_las_act, 
   :new.tkbs_id, 
   :new.tkbs_las_act_tim, 
   NULL, 
   u_tsk_base.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
241
</td>
<td>
THH_C4C
</td>
<td>
TRG_TKBS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_TSK_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_tkbs_auditupdate BEFORE
  UPDATE
    ON T_TSK_BASE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        tkbs_audid
      INTO
        last_audid
      FROM
        a_tsk_base
      WHERE
        tkbs_id            = :old.tkbs_id
      AND tkbs_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.tkbs_las_act_tim = :new.tkbs_las_act_tim THEN
      UPDATE
        a_tsk_base
      SET
        tkbs_las_act_actrtyp           = :new.tkbs_las_act_actrtyp,
        tkbs_obj_stt                   = :new.tkbs_obj_stt,
        tkbs_vers                      = :new.tkbs_vers,
        tkbs_vsbt                      = :new.tkbs_vsbt,
        tkbs_dltddt                    = :new.tkbs_dltddt,
        tkbs_las_act_by                = :new.tkbs_las_act_by,
        tkbs_origcrtr                  = :new.tkbs_origcrtr,
        tkbs_origcrtrlogdin            = :new.tkbs_origcrtrlogdin,
        tkbs_las_act_by_logdin         = :new.tkbs_las_act_by_logdin,
        tkbs_univid                    = :new.tkbs_univid,
        tkbs_nam                       = :new.tkbs_nam,
        tkbs_dscn                      = :new.tkbs_dscn,
        tkbs_affnreqd                  = :new.tkbs_affnreqd,
        tkbs_kwds                      = :new.tkbs_kwds,
        ttlt_frstatvd                  = :new.ttlt_frstatvd,
        ttlt_las_atvd                  = :new.ttlt_las_atvd,
        ttlt_las_dctd                  = :new.ttlt_las_dctd,
        ttlt_frstsbtdat                = :new.ttlt_frstsbtdat,
        ttlt_las_sbtdat                = :new.ttlt_las_sbtdat,
        ttlt_wkfwistcid                = :new.ttlt_wkfwistcid,
        ttlt_cnv_id                    = :new.ttlt_cnv_id,
        ttlt_ownrchndflag              = :new.ttlt_ownrchndflag,
        ttlt_ownrchndcnt               = :new.ttlt_ownrchndcnt,

        ttlt_dvtndt                    = :new.ttlt_dvtndt,
        ttlt_cmmt                      = :new.ttlt_cmmt,
        ttlt_id                        = :new.ttlt_id,
        ctsk_subj                      = :new.ctsk_subj,
        ctsk_ddlntim_blck_amnt         = :new.ctsk_ddlntim_blck_amnt,
        ctsk_ddlntim_blck_unit         = :new.ctsk_ddlntim_blck_unit,
        ctsk_drtn_amnt                 = :new.ctsk_drtn_amnt,
        ctsk_drtn_unit                 = :new.ctsk_drtn_unit,
        ctsk_rmdrprcdwth__amnt         = :new.ctsk_rmdrprcdwth__amnt,
        ctsk_rmdrprcdwth__unit         = :new.ctsk_rmdrprcdwth__unit,
        ctsk_rmdrtim_orgn              = :new.ctsk_rmdrtim_orgn,
        ctsk_prnl                      = :new.ctsk_prnl,
        ctsk_tsk_timg_ddln_dt          = :new.ctsk_tsk_timg_ddln_dt,
        ctsk_tsk_timg_ddln_tim_in_dy   = :new.ctsk_tsk_timg_ddln_tim_in_dy,
        ctsk_tsk_timg_ddlnact          = :new.ctsk_tsk_timg_ddlnact,
        ctsk_tsk_timg_strtdt           = :new.ctsk_tsk_timg_strtdt,
        ctsk_tsk_timg_scldat           = :new.ctsk_tsk_timg_scldat,
        ctsk_tsk_timg_snlttsk          = :new.ctsk_tsk_timg_snlttsk,
        ctsk_tsk_timg_snltdt           = :new.ctsk_tsk_timg_snltdt,
        ctsk_tsk_timg_snltact          = :new.ctsk_tsk_timg_snltact,
        ctsk_tsk_timg_ddlnbfr_nxt_irtn = :new.ctsk_tsk_timg_ddlnbfr_nxt_irtn,
        ctsk_tsk_timg_ddlnsltn         = :new.ctsk_tsk_timg_ddlnsltn,
        ctsk_tsk_timg_scld             = :new.ctsk_tsk_timg_scld,
        ctsk_id                        = :new.ctsk_id,
        ttlt_las_dctdby                = :new.ttlt_las_dctdby,
        ttlt_frstatvdby                = :new.ttlt_frstatvdby,
        ttlt_las_atvdby                = :new.ttlt_las_atvdby,
        ttlt_ratnapvl                  = :new.ttlt_ratnapvl,
        ttlt_apvl                      = :new.ttlt_apvl,
        ttlt_rcpttrkg                  = :new.ttlt_rcpttrkg,
        ttlt_las_sbtdby                = :new.ttlt_la
s_sbtdby,
        ttlt_frstsbtdby                = :new.ttlt_frstsbtdby,
        ttlt_rfngwkfwtsk               = :new.ttlt_rfngwkfwtsk,
        ttlt_prvsrfngtsk               = :new.ttlt_prvsrfngtsk,
        ttlt_prvsrfngtsk_prmn          = :new.ttlt_prvsrfngtsk_prmn,
        ttlt_ownr                      = :new.ttlt_ownr,
        ttlt_prvsownr                  = :new.ttlt_prvsownr,
        ttlt_prvssndr                  = :new.ttlt_prvssndr,
        ttlt_prvsownrprmn              = :new.ttlt_prvsownrprmn,
        ttlt_tnfr                      = :new.ttlt_tnfr,
        ttlt_prvstnfr                  = :new.ttlt_prvstnfr,
        ctsk_the_brncact               = :new.ctsk_the_brncact,
        ctsk_amtn                      = :new.ctsk_amtn,
        tkbs_cstmflds                  = :new.tkbs_cstmflds,
        tkbs_tsk_typ                   = :new.tkbs_tsk_typ,
        ctsk_orig                      = :new.ctsk_orig,
        ctsk_retnptrn                  = :new.ctsk_retnptrn,
        ctsk_tsk_frma                  = :new.ctsk_tsk_frma,
        classtype                      = :new.classtype,
        tkbs_c4c_id                    = :new.tkbs_c4c_id,
        tkbs_crtd                      = :new.tkbs_crtd,
        tkbs_las_act                   = :new.tkbs_las_act
      WHERE
        tkbs_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_tsk_base
        (
          tkbs_las_act_actrtyp,
          tkbs_obj_stt,
          tkbs_vers,
          tkbs_vsbt,
          tkbs_dltddt,
          tkbs_las_act_by,
          tkbs_origcrtr,
          tkbs_origcrtrlogdin,
          tkbs_las_act_by_logdin,
          tkbs_univid,
          tkbs_nam,
          tkbs_dscn,
          tkbs_affnreqd,
          tkbs_kwds,
          ttlt_frstatvd,
          ttlt_las_atvd,
          ttlt_las_dctd,
          ttlt_frstsbtdat,
          ttlt_las_sbtdat,

     ttlt_wkfwistcid,
          ttlt_cnv_id,
          ttlt_ownrchndflag,
          ttlt_ownrchndcnt,
          ttlt_dvtndt,
          ttlt_cmmt,
          ttlt_id,
          ctsk_subj,
          ctsk_ddlntim_blck_amnt,
          ctsk_ddlntim_blck_unit,
          ctsk_drtn_amnt,
          ctsk_drtn_unit,
          ctsk_rmdrprcdwth__amnt,
          ctsk_rmdrprcdwth__unit,
          ctsk_rmdrtim_orgn,
          ctsk_prnl,
          ctsk_tsk_timg_ddln_dt,
          ctsk_tsk_timg_ddln_tim_in_dy,
          ctsk_tsk_timg_ddlnact,
          ctsk_tsk_timg_strtdt,
          ctsk_tsk_timg_scldat,
          ctsk_tsk_timg_snlttsk,
          ctsk_tsk_timg_snltdt,
          ctsk_tsk_timg_snltact,
          ctsk_tsk_timg_ddlnbfr_nxt_irtn,
          ctsk_tsk_timg_ddlnsltn,
          ctsk_tsk_timg_scld,
          ctsk_id,
          ttlt_las_dctdby,
          ttlt_frstatvdby,
          ttlt_las_atvdby,
          ttlt_ratnapvl,
          ttlt_apvl,
          ttlt_rcpttrkg,
          ttlt_las_sbtdby,
          ttlt_frstsbtdby,
          ttlt_rfngwkfwtsk,
          ttlt_prvsrfngtsk,
          ttlt_prvsrfngtsk_prmn,
          ttlt_ownr,
          ttlt_prvsownr,
          ttlt_prvssndr,
          ttlt_prvsownrprmn,
          ttlt_tnfr,
          ttlt_prvstnfr,
          ctsk_the_brncact,
          ctsk_amtn,
          tkbs_cstmflds,
          tkbs_tsk_typ,
          ctsk_orig,
          ctsk_retnptrn,
          ctsk_tsk_frma,
          classtype,
          tkbs_c4c_id,
          tkbs_crtd,
          tkbs_las_act,
          tkbs_id,
          valid_from,
          valid_to,
          tkbs_audid,
          tkbs_prev_audid,
          tkbs_next_audid
        )
        VALUES
        (
          :new.tkbs_las_act_actrtyp,
          :new.tkbs_obj_stt,
          :new.tkbs_vers,
          :new.tkbs_vsbt,
          :new.tkbs_dltddt,
          :new.tkbs_las_act_by,
          :new.tkbs_origcrtr,
          :new.tkbs_origcrtrlogdin,
          :new.tkbs_las_act_by_logdin,
          :new.tkbs_univid,

        :new.tkbs_nam,
          :new.tkbs_dscn,
          :new.tkbs_affnreqd,
          :new.tkbs_kwds,
          :new.ttlt_frstatvd,
          :new.ttlt_las_atvd,
          :new.ttlt_las_dctd,
          :new.ttlt_frstsbtdat,
          :new.ttlt_las_sbtdat,
          :new.ttlt_wkfwistcid,
          :new.ttlt_cnv_id,
          :new.ttlt_ownrchndflag,
          :new.ttlt_ownrchndcnt,
          :new.ttlt_dvtndt,
          :new.ttlt_cmmt,
          :new.ttlt_id,
          :new.ctsk_subj,
          :new.ctsk_ddlntim_blck_amnt,
          :new.ctsk_ddlntim_blck_unit,
          :new.ctsk_drtn_amnt,
          :new.ctsk_drtn_unit,
          :new.ctsk_rmdrprcdwth__amnt,
          :new.ctsk_rmdrprcdwth__unit,
          :new.ctsk_rmdrtim_orgn,
          :new.ctsk_prnl,
          :new.ctsk_tsk_timg_ddln_dt,
          :new.ctsk_tsk_timg_ddln_tim_in_dy,
          :new.ctsk_tsk_timg_ddlnact,
          :new.ctsk_tsk_timg_strtdt,
          :new.ctsk_tsk_timg_scldat,
          :new.ctsk_tsk_timg_snlttsk,
          :new.ctsk_tsk_timg_snltdt,
          :new.ctsk_tsk_timg_snltact,
          :new.ctsk_tsk_timg_ddlnbfr_nxt_irtn,
          :new.ctsk_tsk_timg_ddlnsltn,
          :new.ctsk_tsk_timg_scld,
          :new.ctsk_id,
          :new.ttlt_las_dctdby,
          :new.ttlt_frstatvdby,
          :new.ttlt_las_atvdby,
          :new.ttlt_ratnapvl,
          :new.ttlt_apvl,
          :new.ttlt_rcpttrkg,
          :new.ttlt_las_sbtdby,
          :new.ttlt_frstsbtdby,
          :new.ttlt_rfngwkfwtsk,
          :new.ttlt_prvsrfngtsk,
          :new.ttlt_prvsrfngtsk_prmn,
          :new.ttlt_ownr,
          :new.ttlt_prvsownr,
          :new.ttlt_prvssndr,
          :new.ttlt_prvsownrprmn,
          :new.ttlt_tnfr,
          :new.ttlt_prvstnfr,
          :new.ctsk_the_brncact,
          :new.ctsk_amtn,
          :new.tkbs_cstmflds,
          :new.tkbs_tsk_typ,
          :new.ctsk_orig,
          :new.ctsk_retnptrn,
          :new.ctsk_tsk_frma,
          :new.classtype,
          :new.tkbs_c4c
_id,
          :new.tkbs_crtd,
          :new.tkbs_las_act,
          :new.tkbs_id,
          :new.tkbs_las_act_tim,
          NULL,
          u_tsk_base.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_tsk_base
      SET
        valid_to        = :new.tkbs_las_act_tim,
        tkbs_next_audid = u_tsk_base.CURRVAL
      WHERE
        tkbs_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
242
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_UM_BASE
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_UM_BASE
AFTER INSERT OR UPDATE ON T_UM_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
   var1 varchar2(4000);
  BEGIN
    -- event
    IF :new.classtype = 'UMEvent' THEN
    var1 := 'INSERT INTO T_EVENT_UPDT VALUES (:1, :2)';
       EXECUTE IMMEDIATE var1 USING :NEW.UMET_ID, 'P';
    END IF;
  END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
243
</td>
<td>
THH_C4C
</td>
<td>
TRG_T_UM_BASE_C4C
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_T_UM_BASE_C4C
BEFORE INSERT OR UPDATE ON T_UM_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
BEGIN
  IF :new.UMBS_UNIVID is NULL
    THEN :new.UMBS_UNIVID := nvl(:new.UMBS_C4C_ID,:new.UMBS_ID);
  END IF;
END;



</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
244
</td>
<td>
THH_C4C
</td>
<td>
TRG_UMBS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_UMBS_AUDITINSERT BEFORE INSERT ON T_UM_BASE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE

  curr_date DATE;
BEGIN
  curr_date := current_date;

  IF :new.umbs_crtd IS NULL THEN
    :new.umbs_crtd := curr_date;
  END IF;

  IF :new.umbs_las_act_tim IS NULL THEN
    :new.umbs_las_act_tim := curr_date;
  END IF;

  IF :new.umbs_las_act IS NULL THEN
    :new.umbs_las_act := 1;
  END IF;

  IF :new.umbs_obj_stt IS NULL THEN
    :new.umbs_obj_stt := 1;
  END IF;

  IF :new.umbs_vers IS NULL THEN
    :new.umbs_vers := 0;
  END IF;

  IF :new.umbs_vsbt IS NULL THEN
    :new.umbs_vsbt := 1001;
  END IF;

  IF :new.umbs_las_act_by IS NULL THEN
    :new.umbs_las_act_by := 1;
  END IF;

  IF :new.umbs_origcrtr IS NULL THEN
    :new.umbs_origcrtr := 1;
  END IF;

  IF :new.umbs_origcrtrlogdin IS NULL THEN
    :new.umbs_origcrtrlogdin := 1;
  END IF;

  IF :new.umbs_las_act_by_logdin IS NULL THEN
    :new.umbs_las_act_by_logdin := 1;
  END IF;

  INSERT INTO a_um_base
  (
   umet_ackgddln_tim_in_dy,
   umet_clsedt__dt,
   umet_clsedt__tim_in_dy,
   umet_reoncmmt,
   umet_las_clsd,
   umet_las_rpnd,
   umet_wkfwistcid,
   umet_cnv_id,
   umet_ownrchndflag,
   umet_ownrchndcnt,
   umet_frstopndat,
   umet_id,
   umer_is_ok_aft_ddln,
   umer_dtmn,
   umer_clseevntaft_crtn,
   umer_rjtncmmt,
   umer_frstsbtdat,
   umer_las_sbtdat,
   umer_wkfwistcid,
   umer_cnv_id,
   umer_ownrchndflag,
   umer_ownrchndcnt,
   umer_autoum_at,
   umer_las_rtedat,
   umer_id,
   umet_las_clsdby,
   umet_las_rpndby,
   umet_rfngwkfwtsk,
   umet_prvsrfngtsk,
   umet_prvsrfngtsk_prmn,
   umet_ownr,
   umet_prvsownr,
   umet_prvssndr,
   umet_prvsownrprmn,
   umet_tnfr,
   umet_prvstnfr,
   umet_rcpttrkg,
   umet_las_revw,
   umet_las_rtedto,
   umet_frstopndby,
   umer_las_sbtdby,
   umer_frstsbtdby,
   umer_rfngwkfwtsk,
   umer_prvsrfngtsk,
   umer_prvsrfngtsk_prmn,
   umer_ownr,
   umer_prvsownr,
   umer_prvssndr,
   umer_prvsownrprmn,
   umer_tnfr,
   umer_prvstnfr,
   umer_rcpttrkg,
   umer_las_revw,
   umer_las_rtedto,
   umbs_cstmflds,
   umet_um_evntotcm,
   umet_clsrresn,

umbs_svty,
   umbs_pity,
   umbs_src,
   umer_denlresn,
   umet_reonresn,
   umer_rjtnresn,
   umbs_ltr,
   umbs_typ,
   umbs_rtngpeer,
   umbs_rqtr,
   umet_reqt,
   umbs_pmrypvdr,
   umbs_pfngpvdr,
   umbs_rqngpvdr,
   umbs_memb,
   umbs_rtngrcpt,
   umbs_ownrobst,
   classtype,
   umbs_c4c_id,
   umbs_crtd,
   umbs_las_act,
   umbs_las_act_actrtyp,
   umbs_obj_stt,
   umbs_vers,
   umbs_vsbt,
   umbs_dltddt,
   umbs_las_act_by,
   umbs_origcrtr,
   umbs_origcrtrlogdin,
   umbs_las_act_by_logdin,
   umbs_univid,
   umbs_ini_cnctdt_tim__dt,
   umbs_ini_cnctdt_tim__tim_in_dy,
   umbs_rcmdlos,
   umbs_showto_rqtr,
   umbs_rtng,
   umbs_ddlntyp,
   umbs_ddlntim_blckunit,
   umbs_ddlntim_blck,
   umbs_ddlndt__dt,
   umbs_ddlndt__tim_in_dy,
   umbs_cmmt,
   umbs_reqttyp,
   umbs_drvddtmnstt,
   umet_clngcmts,
   umet_ackgddln_dt,
   umbs_cntrct_id,
   umbs_fees_vrfd,
   umbs_release_of_info,
   umbs_id,
   valid_from,
   valid_to ,
   umbs_audid,
   umbs_prev_audid,
   umbs_next_audid,
   transaction_id,
   umbs_in_netwrk,
   umbs_pay_at_max,
   umbs_ext_lmt,
   umbs_ctd,
   umbs_rbrs_mthd,
   umbs_rbrs_amt,
   umbs_fee_typ,
   umbs_pct_bld,
   umbs_srv_agmt,
   umbs_dtmn_due,
   umbs_admt,
   umbs_dischrg,
   umbs_auth_typ,
   umbs_acty,
   umbs_svrty,
   umbs_trg_dat_frm,
   umbs_trg_dat_to,
   umbs_trg_dat_dis,
   umbs_trg_unt_typ,
   umbs_trg_qnty,
   umbs_health_plan_rcvd,
   umbs_dept_rcvd,
   umbs_auth_src,
   umbs_clinicaldataentry_id
  )
  VALUES
  (
   :new.umet_ackgddln_tim_in_dy,
   :new.umet_clsedt__dt,
   :new.umet_clsedt__tim_in_dy,
   :new.umet_reoncmmt,
   :new.umet_las_clsd,
   :new.umet_las_rpnd,
   :new.umet_wkfwistcid,
   :new.umet_cnv_id,
   :new.umet_ownrchndflag,
   :new.umet_ownrchndcnt,
   :new.umet_frstopndat,
   :new.umet_id,
   :new.umer_is_ok_aft_ddln,
   :new.umer_dtmn,
   :new.umer_clseevntaft_crtn,
   :new.umer_rjtncmmt,
   :new.umer_frstsbtdat,
   :new.umer_las_sbtdat,
   :new.umer_wkfwistcid,
   :new.umer_cnv_id,
   :new.umer_ownrchndf
lag,
   :new.umer_ownrchndcnt,
   :new.umer_autoum_at,
   :new.umer_las_rtedat,
   :new.umer_id,
   :new.umet_las_clsdby,
   :new.umet_las_rpndby,
   :new.umet_rfngwkfwtsk,
   :new.umet_prvsrfngtsk,
   :new.umet_prvsrfngtsk_prmn,
   :new.umet_ownr,
   :new.umet_prvsownr,
   :new.umet_prvssndr,
   :new.umet_prvsownrprmn,
   :new.umet_tnfr,
   :new.umet_prvstnfr,
   :new.umet_rcpttrkg,
   :new.umet_las_revw,
   :new.umet_las_rtedto,
   :new.umet_frstopndby,
   :new.umer_las_sbtdby,
   :new.umer_frstsbtdby,
   :new.umer_rfngwkfwtsk,
   :new.umer_prvsrfngtsk,
   :new.umer_prvsrfngtsk_prmn,
   :new.umer_ownr,
   :new.umer_prvsownr,
   :new.umer_prvssndr,
   :new.umer_prvsownrprmn,
   :new.umer_tnfr,
   :new.umer_prvstnfr,
   :new.umer_rcpttrkg,
   :new.umer_las_revw,
   :new.umer_las_rtedto,
   :new.umbs_cstmflds,
   :new.umet_um_evntotcm,
   :new.umet_clsrresn,
   :new.umbs_svty,
   :new.umbs_pity,
   :new.umbs_src,
   :new.umer_denlresn,
   :new.umet_reonresn,
   :new.umer_rjtnresn,
   :new.umbs_ltr,
   :new.umbs_typ,
   :new.umbs_rtngpeer,
   :new.umbs_rqtr,
   :new.umet_reqt,
   :new.umbs_pmrypvdr,
   :new.umbs_pfngpvdr,
   :new.umbs_rqngpvdr,
   :new.umbs_memb,
   :new.umbs_rtngrcpt,
   :new.umbs_ownrobst,
   :new.classtype,
   :new.umbs_c4c_id,
   :new.umbs_crtd,
   :new.umbs_las_act,
   :new.umbs_las_act_actrtyp,
   :new.umbs_obj_stt,
   :new.umbs_vers,
   :new.umbs_vsbt,
   :new.umbs_dltddt,
   :new.umbs_las_act_by,
   :new.umbs_origcrtr,
   :new.umbs_origcrtrlogdin,
   :new.umbs_las_act_by_logdin,
   :new.umbs_univid,
   :new.umbs_ini_cnctdt_tim__dt,
   :new.umbs_ini_cnctdt_tim__tim_in_dy,
   :new.umbs_rcmdlos,
   :new.umbs_showto_rqtr,
   :new.umbs_rtng,
   :new.umbs_ddlntyp,
   :new.umbs_ddlntim_blckunit,
   :new.umbs_ddlntim_blck,
   :new.umbs_ddlndt__dt,
   :new.umbs_ddlndt__tim_in_dy,
   :new.umbs_cmmt,
   :new.umbs_reqttyp,
   :new.umbs_drvddtmnstt,
   :new.umet_clngcmts,
   :new.umet_ackgddln_dt,
   :new.umbs_cntrct_id,
   :new.umbs_fees_vrfd,
   :new.umb
s_release_of_info,
   :new.umbs_id,
   :new.umbs_las_act_tim,
   NULL,
   u_um_base.NEXTVAL,
   NULL,
   NULL,
   dbms_transaction.local_transaction_id,
   :new.umbs_in_netwrk,
   :new.umbs_pay_at_max,
   :new.umbs_ext_lmt,
   :new.umbs_ctd,
   :new.umbs_rbrs_mthd,
   :new.umbs_rbrs_amt,
   :new.umbs_fee_typ,
   :new.umbs_pct_bld,
   :new.umbs_srv_agmt,
   :new.umbs_dtmn_due,
   :new.umbs_admt,
   :new.umbs_dischrg,
   :new.umbs_auth_typ,
   :new.umbs_acty,
   :new.umbs_svrty,
   :new.umbs_trg_dat_frm,
   :new.umbs_trg_dat_to,
   :new.umbs_trg_dat_dis,
   :new.umbs_trg_unt_typ,
   :new.umbs_trg_qnty,
   :new.umbs_health_plan_rcvd,
   :new.umbs_dept_rcvd,
   :new.umbs_auth_src,
   :new.umbs_clinicaldataentry_id
  );
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
245
</td>
<td>
THH_C4C
</td>
<td>
TRG_UMBS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_umbs_auditupdate before
  UPDATE
    ON t_um_base FOR EACH row
</td>
<td>
PL/SQL
</td>
<td>
DECLARE last_audid NUMBER;
  BEGIN
    BEGIN
      SELECT
        umbs_audid
      INTO
        last_audid
      FROM
        a_um_base
      WHERE
        umbs_id            = :old.umbs_id
      AND umbs_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN no_data_found THEN
      last_audid := NULL;
    END;
    IF :old.umbs_las_act_tim = :new.umbs_las_act_tim THEN
      UPDATE
        a_um_base
      SET
        umbs_obj_stt                   = :new.umbs_obj_stt,
        umbs_vers                      = :new.umbs_vers,
        umbs_vsbt                      = :new.umbs_vsbt,
        umbs_dltddt                    = :new.umbs_dltddt,
        umbs_las_act_by                = :new.umbs_las_act_by,
        umbs_origcrtr                  = :new.umbs_origcrtr,
        umbs_origcrtrlogdin            = :new.umbs_origcrtrlogdin,
        umbs_las_act_by_logdin         = :new.umbs_las_act_by_logdin,
        umbs_univid                    = :new.umbs_univid,
        umbs_ini_cnctdt_tim__dt        = :new.umbs_ini_cnctdt_tim__dt,
        umbs_ini_cnctdt_tim__tim_in_dy = :new.umbs_ini_cnctdt_tim__tim_in_dy,
        umbs_rcmdlos                   = :new.umbs_rcmdlos,
        umbs_showto_rqtr               = :new.umbs_showto_rqtr,
        umbs_rtng                      = :new.umbs_rtng,
        umbs_ddlntyp                   = :new.umbs_ddlntyp,
        umbs_ddlntim_blckunit          = :new.umbs_ddlntim_blckunit,
        umbs_ddlntim_blck              = :new.umbs_ddlntim_blck,
        umbs_ddlndt__dt                = :new.umbs_ddlndt__dt,
        umbs_ddlndt__tim_in_dy         = :new.umbs_ddlndt__tim_in_dy,
        umbs_cmmt                      = :new.umbs_cmmt,
        umbs_reqttyp                   = :new.umbs_reqttyp,
        umbs_drvddtmnstt               = :new.umbs_drvddtmnstt,
        umet_clngcmts                  = :new.umet_clngcmts,
        umet_ackgddln_dt               = :new.umet_ackgddln_dt,
        umet_ackgddln_tim_in_dy        =
:new.umet_ackgddln_tim_in_dy,
        umet_clsedt__dt                = :new.umet_clsedt__dt,
        umet_clsedt__tim_in_dy         = :new.umet_clsedt__tim_in_dy,
        umet_reoncmmt                  = :new.umet_reoncmmt,
        umet_las_clsd                  = :new.umet_las_clsd,
        umet_las_rpnd                  = :new.umet_las_rpnd,
        umet_wkfwistcid                = :new.umet_wkfwistcid,
        umet_cnv_id                    = :new.umet_cnv_id,
        umet_ownrchndflag              = :new.umet_ownrchndflag,
        umet_ownrchndcnt               = :new.umet_ownrchndcnt,
        umet_frstopndat                = :new.umet_frstopndat,
        umet_id                        = :new.umet_id,
        umer_is_ok_aft_ddln            = :new.umer_is_ok_aft_ddln,
        umer_dtmn                      = :new.umer_dtmn,
        umer_clseevntaft_crtn          = :new.umer_clseevntaft_crtn,
        umer_rjtncmmt                  = :new.umer_rjtncmmt,
        umer_frstsbtdat                = :new.umer_frstsbtdat,
        umer_las_sbtdat                = :new.umer_las_sbtdat,
        umer_wkfwistcid                = :new.umer_wkfwistcid,
        umer_cnv_id                    = :new.umer_cnv_id,
        umer_ownrchndflag              = :new.umer_ownrchndflag,
        umer_ownrchndcnt               = :new.umer_ownrchndcnt,
        umer_autoum_at                 = :new.umer_autoum_at,
        umer_las_rtedat                = :new.umer_las_rtedat,
        umer_id                        = :new.umer_id,
        umet_las_clsdby                = :new.umet_las_clsdby,
        umet_las_rpndby                = :new.umet_las_rpndby,
        umet_rfngwkfwtsk               = :new.umet_rfngwkfwtsk,
        umet_prvsrfngtsk               = :new.umet_prvsrfngtsk,
        umet_prvsrfngtsk_prmn          = :new.umet_prvsrfngtsk_prmn,
        umet_ownr                      = :new.umet_ownr,
        umet_prvsownr                  = :new.umet_prvsownr,
        umet_prvssndr
      = :new.umet_prvssndr,
        umet_prvsownrprmn              = :new.umet_prvsownrprmn,
        umet_tnfr                      = :new.umet_tnfr,
        umet_prvstnfr                  = :new.umet_prvstnfr,
        umet_rcpttrkg                  = :new.umet_rcpttrkg,
        umet_las_revw                  = :new.umet_las_revw,
        umet_las_rtedto                = :new.umet_las_rtedto,
        umet_frstopndby                = :new.umet_frstopndby,
        umer_las_sbtdby                = :new.umer_las_sbtdby,
        umer_frstsbtdby                = :new.umer_frstsbtdby,
        umer_rfngwkfwtsk               = :new.umer_rfngwkfwtsk,
        umer_prvsrfngtsk               = :new.umer_prvsrfngtsk,
        umer_prvsrfngtsk_prmn          = :new.umer_prvsrfngtsk_prmn,
        umer_ownr                      = :new.umer_ownr,
        umer_prvsownr                  = :new.umer_prvsownr,
        umer_prvssndr                  = :new.umer_prvssndr,
        umer_prvsownrprmn              = :new.umer_prvsownrprmn,
        umer_tnfr                      = :new.umer_tnfr,
        umer_prvstnfr                  = :new.umer_prvstnfr,
        umer_rcpttrkg                  = :new.umer_rcpttrkg,
        umer_las_revw                  = :new.umer_las_revw,
        umer_las_rtedto                = :new.umer_las_rtedto,
        umbs_cstmflds                  = :new.umbs_cstmflds,
        umet_um_evntotcm               = :new.umet_um_evntotcm,
        umet_clsrresn                  = :new.umet_clsrresn,
        umbs_svty                      = :new.umbs_svty,
        umbs_pity                      = :new.umbs_pity,
        umbs_src                       = :new.umbs_src,
        umer_denlresn                  = :new.umer_denlresn,
        umet_reonresn                  = :new.umet_reonresn,
        umer_rjtnresn                  = :new.umer_rjtnresn,
        umbs_ltr                       = :new.umbs_ltr,
        umbs_typ                       = :new.umbs_typ,
        umbs_rtngpee
r                  = :new.umbs_rtngpeer,
        umbs_rqtr                      = :new.umbs_rqtr,
        umet_reqt                      = :new.umet_reqt,
        umbs_pmrypvdr                  = :new.umbs_pmrypvdr,
        umbs_pfngpvdr                  = :new.umbs_pfngpvdr,
        umbs_rqngpvdr                  = :new.umbs_rqngpvdr,
        umbs_memb                      = :new.umbs_memb,
        umbs_rtngrcpt                  = :new.umbs_rtngrcpt,
        umbs_ownrobst                  = :new.umbs_ownrobst,
        classtype                      = :new.classtype,
        umbs_c4c_id                    = :new.umbs_c4c_id,
        umbs_crtd                      = :new.umbs_crtd,
        umbs_las_act                   = :new.umbs_las_act,
        umbs_las_act_actrtyp           = :new.umbs_las_act_actrtyp,
        umbs_cntrct_id                 = :new.umbs_cntrct_id,
        umbs_fees_vrfd                 = :new.umbs_fees_vrfd,
        umbs_release_of_info           = :new.umbs_release_of_info,
        umbs_in_netwrk                 = :new.umbs_in_netwrk,
        umbs_pay_at_max                = :new.umbs_pay_at_max,
        umbs_ext_lmt                   = :new.umbs_ext_lmt,
        umbs_ctd                       = :new.umbs_ctd,
        umbs_rbrs_mthd                 = :new.umbs_rbrs_mthd,
        umbs_rbrs_amt                  = :new.umbs_rbrs_amt,
        umbs_fee_typ                   = :new.umbs_fee_typ,
        umbs_pct_bld                   = :new.umbs_pct_bld,
        umbs_srv_agmt                  = :new.umbs_srv_agmt,
        umbs_dtmn_due                  = :new.umbs_dtmn_due,
        umbs_admt                      = :new.umbs_admt,
        umbs_dischrg                   = :new.umbs_dischrg,
        umbs_auth_typ                  = :new.umbs_auth_typ,
        umbs_acty                      = :new.umbs_acty,
        umbs_svrty                     = :new.umbs_svrty,
        umbs_trg_dat_frm               = :new.umbs_trg_dat_frm,
        umbs_trg_dat_to
            = :new.umbs_trg_dat_to,
        umbs_trg_dat_dis               = :new.umbs_trg_dat_dis,
        umbs_trg_unt_typ               = :new.umbs_trg_unt_typ,
        umbs_trg_qnty                  = :new.umbs_trg_qnty,
		umbs_health_plan_rcvd          = :new.umbs_health_plan_rcvd,
		umbs_dept_rcvd                 = :new.umbs_dept_rcvd,
        umbs_auth_src                  = :new.umbs_auth_src,
		umbs_clinicaldataentry_id      = :new.umbs_clinicaldataentry_id
      WHERE
        umbs_audid = last_audid;
    ELSE
      INSERT
      INTO
        a_um_base
        (
          umbs_cntrct_id,
          umbs_fees_vrfd,
          umbs_obj_stt,
          umbs_vers,
          umbs_vsbt,
          umbs_dltddt,
          umbs_las_act_by,
          umbs_origcrtr,
          umbs_origcrtrlogdin,
          umbs_las_act_by_logdin,
          umbs_univid,
          umbs_ini_cnctdt_tim__dt,
          umbs_ini_cnctdt_tim__tim_in_dy,
          umbs_rcmdlos,
          umbs_showto_rqtr,
          umbs_rtng,
          umbs_ddlntyp,
          umbs_ddlntim_blckunit,
          umbs_ddlntim_blck,
          umbs_ddlndt__dt,
          umbs_ddlndt__tim_in_dy,
          umbs_cmmt,
          umbs_reqttyp,
          umbs_drvddtmnstt,
          umet_clngcmts,
          umet_ackgddln_dt,
          umet_ackgddln_tim_in_dy,
          umet_clsedt__dt,
          umet_clsedt__tim_in_dy,
          umet_reoncmmt,
          umet_las_clsd,
          umet_las_rpnd,
          umet_wkfwistcid,
          umet_cnv_id,
          umet_ownrchndflag,
          umet_ownrchndcnt,
          umet_frstopndat,
          umet_id,
          umer_is_ok_aft_ddln,
          umer_dtmn,
          umer_clseevntaft_crtn,
          umer_rjtncmmt,
          umer_frstsbtdat,
          umer_las_sbtdat,
          umer_wkfwistcid,
          umer_cnv_id,
          umer_ownrchndflag,
          umer_ownrchndcnt,
          umer_autoum_at,
          umer_las_rtedat,
          umer_id,
          umet_las_clsdby,
          umet_las_rpndby
,
          umet_rfngwkfwtsk,
          umet_prvsrfngtsk,
          umet_prvsrfngtsk_prmn,
          umet_ownr,
          umet_prvsownr,
          umet_prvssndr,
          umet_prvsownrprmn,
          umet_tnfr,
          umet_prvstnfr,
          umet_rcpttrkg,
          umet_las_revw,
          umet_las_rtedto,
          umet_frstopndby,
          umer_las_sbtdby,
          umer_frstsbtdby,
          umer_rfngwkfwtsk,
          umer_prvsrfngtsk,
          umer_prvsrfngtsk_prmn,
          umer_ownr,
          umer_prvsownr,
          umer_prvssndr,
          umer_prvsownrprmn,
          umer_tnfr,
          umer_prvstnfr,
          umer_rcpttrkg,
          umer_las_revw,
          umer_las_rtedto,
          umbs_cstmflds,
          umet_um_evntotcm,
          umet_clsrresn,
          umbs_svty,
          umbs_pity,
          umbs_src,
          umer_denlresn,
          umet_reonresn,
          umer_rjtnresn,
          umbs_ltr,
          umbs_typ,
          umbs_rtngpeer,
          umbs_rqtr,
          umet_reqt,
          umbs_pmrypvdr,
          umbs_pfngpvdr,
          umbs_rqngpvdr,
          umbs_memb,
          umbs_rtngrcpt,
          umbs_ownrobst,
          classtype,
          umbs_c4c_id,
          umbs_crtd,
          umbs_las_act,
          umbs_las_act_actrtyp,
          umbs_release_of_info,
          umbs_id,
          valid_from,
          valid_to,
          umbs_audid,
          umbs_prev_audid,
          umbs_next_audid,
          transaction_id,
          umbs_in_netwrk,
          umbs_pay_at_max,
          umbs_ext_lmt,
          umbs_ctd,
          umbs_rbrs_mthd,
          umbs_rbrs_amt,
          umbs_fee_typ,
          umbs_pct_bld,
          umbs_srv_agmt,
          umbs_dtmn_due,
          umbs_admt,
          umbs_dischrg,
		  umbs_auth_typ,
		  umbs_acty,
		  umbs_svrty,
          umbs_trg_dat_frm,
          umbs_trg_dat_to,
          umbs_trg_dat_dis,
          umbs_trg_unt_typ,
          umbs_trg_qnty,
          umbs_health_plan_rcvd,

          umbs_dept_rcvd,
		  umbs_auth_src,
          umbs_clinicaldataentry_id
        )
        VALUES
        (
          :new.umbs_cntrct_id,
          :new.umbs_fees_vrfd,
          :new.umbs_obj_stt,
          :new.umbs_vers,
          :new.umbs_vsbt,
          :new.umbs_dltddt,
          :new.umbs_las_act_by,
          :new.umbs_origcrtr,
          :new.umbs_origcrtrlogdin,
          :new.umbs_las_act_by_logdin,
          :new.umbs_univid,
          :new.umbs_ini_cnctdt_tim__dt,
          :new.umbs_ini_cnctdt_tim__tim_in_dy,
          :new.umbs_rcmdlos,
          :new.umbs_showto_rqtr,
          :new.umbs_rtng,
          :new.umbs_ddlntyp,
          :new.umbs_ddlntim_blckunit,
          :new.umbs_ddlntim_blck,
          :new.umbs_ddlndt__dt,
          :new.umbs_ddlndt__tim_in_dy,
          :new.umbs_cmmt,
          :new.umbs_reqttyp,
          :new.umbs_drvddtmnstt,
          :new.umet_clngcmts,
          :new.umet_ackgddln_dt,
          :new.umet_ackgddln_tim_in_dy,
          :new.umet_clsedt__dt,
          :new.umet_clsedt__tim_in_dy,
          :new.umet_reoncmmt,
          :new.umet_las_clsd,
          :new.umet_las_rpnd,
          :new.umet_wkfwistcid,
          :new.umet_cnv_id,
          :new.umet_ownrchndflag,
          :new.umet_ownrchndcnt,
          :new.umet_frstopndat,
          :new.umet_id,
          :new.umer_is_ok_aft_ddln,
          :new.umer_dtmn,
          :new.umer_clseevntaft_crtn,
          :new.umer_rjtncmmt,
          :new.umer_frstsbtdat,
          :new.umer_las_sbtdat,
          :new.umer_wkfwistcid,
          :new.umer_cnv_id,
          :new.umer_ownrchndflag,
          :new.umer_ownrchndcnt,
          :new.umer_autoum_at,
          :new.umer_las_rtedat,
          :new.umer_id,
          :new.umet_las_clsdby,
          :new.umet_las_rpndby,
          :new.umet_rfngwkfwtsk,
          :new.umet_prvsrfngtsk,
          :new.umet_prvsrfngtsk_prmn,
          :new.umet_ownr,
          :new.umet_prvsownr,
          :new.umet_prvssndr,

       :new.umet_prvsownrprmn,
          :new.umet_tnfr,
          :new.umet_prvstnfr,
          :new.umet_rcpttrkg,
          :new.umet_las_revw,
          :new.umet_las_rtedto,
          :new.umet_frstopndby,
          :new.umer_las_sbtdby,
          :new.umer_frstsbtdby,
          :new.umer_rfngwkfwtsk,
          :new.umer_prvsrfngtsk,
          :new.umer_prvsrfngtsk_prmn,
          :new.umer_ownr,
          :new.umer_prvsownr,
          :new.umer_prvssndr,
          :new.umer_prvsownrprmn,
          :new.umer_tnfr,
          :new.umer_prvstnfr,
          :new.umer_rcpttrkg,
          :new.umer_las_revw,
          :new.umer_las_rtedto,
          :new.umbs_cstmflds,
          :new.umet_um_evntotcm,
          :new.umet_clsrresn,
          :new.umbs_svty,
          :new.umbs_pity,
          :new.umbs_src,
          :new.umer_denlresn,
          :new.umet_reonresn,
          :new.umer_rjtnresn,
          :new.umbs_ltr,
          :new.umbs_typ,
          :new.umbs_rtngpeer,
          :new.umbs_rqtr,
          :new.umet_reqt,
          :new.umbs_pmrypvdr,
          :new.umbs_pfngpvdr,
          :new.umbs_rqngpvdr,
          :new.umbs_memb,
          :new.umbs_rtngrcpt,
          :new.umbs_ownrobst,
          :new.classtype,
          :new.umbs_c4c_id,
          :new.umbs_crtd,
          :new.umbs_las_act,
          :new.umbs_las_act_actrtyp,
          :new.umbs_release_of_info,
          :new.umbs_id,
          :new.umbs_las_act_tim,
          NULL,
          u_um_base.nextval,
          last_audid,
          NULL,
          dbms_transaction.local_transaction_id,
          :new.umbs_in_netwrk,
          :new.umbs_pay_at_max,
          :new.umbs_ext_lmt,
          :new.umbs_ctd,
          :new.umbs_rbrs_mthd,
          :new.umbs_rbrs_amt,
          :new.umbs_fee_typ,
          :new.umbs_pct_bld,
          :new.umbs_srv_agmt,
          :new.umbs_dtmn_due,
          :new.umbs_admt,
          :new.umbs_dischrg,
    	  :new.umbs_auth_typ,
		  :new.umbs_acty,
		  :new.umbs_s
vrty,
		  :new.umbs_trg_dat_frm,
		  :new.umbs_trg_dat_to,
		  :new.umbs_trg_dat_dis,
		  :new.umbs_trg_unt_typ,
		  :new.umbs_trg_qnty,
		  :new.umbs_health_plan_rcvd,
		  :new.umbs_dept_rcvd,
		  :new.umbs_auth_src,
          :new.umbs_clinicaldataentry_id
        );
      UPDATE
        a_um_base
      SET
        valid_to        = :new.umbs_las_act_tim,
        umbs_next_audid = u_um_base.currval
      WHERE
        umbs_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
246
</td>
<td>
THH_C4C
</td>
<td>
TRG_UM_DACMEMBER
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_BASE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>

(nvl(new.umbs_OBJ_STT,-1) &lt;&gt; nvl(old.umbs_OBJ_STT,-1) and (new.umbs_OBJ_STT =2 or old.umbs_OBJ_STT=2) ) or
      nvl(new.umbs_memb,-1) &lt;&gt;  nvl(old.umbs_memb,-1)

</td>
<td>
ENABLED
</td>
<td>
trg_um_dacmember
   AFTER INSERT OR DELETE OR UPDATE OF umbs_OBJ_STT,umbs_memb
   ON t_um_base
   FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
declare
    t_um_base_OLD_rec t_um_base%rowtype;
    t_um_base_NEW_rec t_um_base%rowtype;
   begin
    t_um_base_NEW_rec.&quot;UMBS_CNTRCT_ID&quot;  := :new.&quot;UMBS_CNTRCT_ID&quot;;
    t_um_base_NEW_rec.&quot;UMBS_FEES_VRFD&quot;  := :new.&quot;UMBS_FEES_VRFD&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LAS_ACT_BY_LOGDIN&quot; := :new.&quot;UMBS_LAS_ACT_BY_LOGDIN&quot;;
    t_um_base_NEW_rec.&quot;UMBS_UNIVID&quot; := :new.&quot;UMBS_UNIVID&quot;;
    t_um_base_NEW_rec.&quot;UMBS_INI_CNCTDT_TIM__DT&quot; := :new.&quot;UMBS_INI_CNCTDT_TIM__DT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot; := :new.&quot;UMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RCMDLOS&quot; := :new.&quot;UMBS_RCMDLOS&quot;;
    t_um_base_NEW_rec.&quot;UMBS_SHOWTO_RQTR&quot; := :new.&quot;UMBS_SHOWTO_RQTR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RTNG&quot; := :new.&quot;UMBS_RTNG&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DDLNTYP&quot; := :new.&quot;UMBS_DDLNTYP&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DDLNTIM_BLCKUNIT&quot; := :new.&quot;UMBS_DDLNTIM_BLCKUNIT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DDLNTIM_BLCK&quot; := :new.&quot;UMBS_DDLNTIM_BLCK&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DDLNDT__DT&quot; := :new.&quot;UMBS_DDLNDT__DT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DDLNDT__TIM_IN_DY&quot; := :new.&quot;UMBS_DDLNDT__TIM_IN_DY&quot;;
    t_um_base_NEW_rec.&quot;UMBS_CMMT&quot; := :new.&quot;UMBS_CMMT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_REQTTYP&quot; := :new.&quot;UMBS_REQTTYP&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DRVDDTMNSTT&quot; := :new.&quot;UMBS_DRVDDTMNSTT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_ID&quot; := :new.&quot;UMBS_ID&quot;;
    t_um_base_NEW_rec.&quot;UMET_CLNGCMTS&quot; := :new.&quot;UMET_CLNGCMTS&quot;;
    t_um_base_NEW_rec.&quot;UMET_ACKGDDLN_DT&quot; := :new.&quot;UMET_ACKGDDLN_DT&quot;;
    t_um_base_NEW_rec.&quot;UMET_ACKGDDLN_TIM_IN_DY&quot; := :new.&quot;UMET_ACKGDDLN_TIM_IN_DY&quot;;
    t_um_base_NEW_rec.&quot;UMET_CLSEDT__DT&quot; := :new.&quot;UMET_CLSEDT__DT&quot;;
    t_um_base_NEW_rec.&quot;UMET_CLSEDT__TIM_IN_DY&quot; := :new.&quot;UMET_CLSEDT__TIM_IN_DY&quot;;
    t_um_base_NEW_rec.&quot;UMET_REONCMMT&quot; := :new.&quot;UMET_REONCMMT&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS_CLSD&quot; := :new.&quot;UMET_LAS_CLSD&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS_RPND&quot; := :new.&quot;UMET_LAS_RPND&quot;;
    t_um_base_NEW_rec.&quot;UMET_WKFWISTCID&quot; := :new.&quot;UMET_WKFWISTCID&quot;;
    t_um_base_NEW_rec.&quot;UMET_CNV_ID&quot; := :new.&quot;UMET_
CNV_ID&quot;;
    t_um_base_NEW_rec.&quot;UMET_OWNRCHNDFLAG&quot; := :new.&quot;UMET_OWNRCHNDFLAG&quot;;
    t_um_base_NEW_rec.&quot;UMET_OWNRCHNDCNT&quot; := :new.&quot;UMET_OWNRCHNDCNT&quot;;
    t_um_base_NEW_rec.&quot;UMET_FRSTOPNDAT&quot; := :new.&quot;UMET_FRSTOPNDAT&quot;;
    t_um_base_NEW_rec.&quot;UMET_ID&quot; := :new.&quot;UMET_ID&quot;;
    t_um_base_NEW_rec.&quot;UMER_IS_OK_AFT_DDLN&quot; := :new.&quot;UMER_IS_OK_AFT_DDLN&quot;;
    t_um_base_NEW_rec.&quot;UMER_DTMN&quot; := :new.&quot;UMER_DTMN&quot;;
    t_um_base_NEW_rec.&quot;UMER_CLSEEVNTAFT_CRTN&quot; := :new.&quot;UMER_CLSEEVNTAFT_CRTN&quot;;
    t_um_base_NEW_rec.&quot;UMER_RJTNCMMT&quot; := :new.&quot;UMER_RJTNCMMT&quot;;
    t_um_base_NEW_rec.&quot;UMER_FRSTSBTDAT&quot; := :new.&quot;UMER_FRSTSBTDAT&quot;;
    t_um_base_NEW_rec.&quot;UMER_LAS_SBTDAT&quot; := :new.&quot;UMER_LAS_SBTDAT&quot;;
    t_um_base_NEW_rec.&quot;UMER_WKFWISTCID&quot; := :new.&quot;UMER_WKFWISTCID&quot;;
    t_um_base_NEW_rec.&quot;UMER_CNV_ID&quot; := :new.&quot;UMER_CNV_ID&quot;;
    t_um_base_NEW_rec.&quot;UMER_OWNRCHNDFLAG&quot; := :new.&quot;UMER_OWNRCHNDFLAG&quot;;
    t_um_base_NEW_rec.&quot;UMER_OWNRCHNDCNT&quot; := :new.&quot;UMER_OWNRCHNDCNT&quot;;
    t_um_base_NEW_rec.&quot;UMER_AUTOUM_AT&quot; := :new.&quot;UMER_AUTOUM_AT&quot;;
    t_um_base_NEW_rec.&quot;UMER_LAS_RTEDAT&quot; := :new.&quot;UMER_LAS_RTEDAT&quot;;
    t_um_base_NEW_rec.&quot;UMER_ID&quot; := :new.&quot;UMER_ID&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS_CLSDBY&quot; := :new.&quot;UMET_LAS_CLSDBY&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS_RPNDBY&quot; := :new.&quot;UMET_LAS_RPNDBY&quot;;
    t_um_base_NEW_rec.&quot;UMET_RFNGWKFWTSK&quot; := :new.&quot;UMET_RFNGWKFWTSK&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSRFNGTSK&quot; := :new.&quot;UMET_PRVSRFNGTSK&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSRFNGTSK_PRMN&quot; := :new.&quot;UMET_PRVSRFNGTSK_PRMN&quot;;
    t_um_base_NEW_rec.&quot;UMET_OWNR&quot; := :new.&quot;UMET_OWNR&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSOWNR&quot; := :new.&quot;UMET_PRVSOWNR&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSSNDR&quot; := :new.&quot;UMET_PRVSSNDR&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSOWNRPRMN&quot; := :new.&quot;UMET_PRVSOWNRPRMN&quot;;
    t_um_base_NEW_rec.&quot;UMET_TNFR&quot; := :new.&quot;UMET_TNFR&quot;;
    t_um_base_NEW_rec.&quot;UMET_PRVSTNFR&quot; := :new.&quot;UMET_PRVSTNFR&quot;;
    t_um_base_NEW_rec.&quot;UMET_RCPTTRKG&quot; := :new.&quot;UMET_RCPTTRKG&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS_REVW&quot; := :new.&quot;UMET_LAS_REVW&quot;;
    t_um_base_NEW_rec.&quot;UMET_LAS
_RTEDTO&quot; := :new.&quot;UMET_LAS_RTEDTO&quot;;
    t_um_base_NEW_rec.&quot;UMET_FRSTOPNDBY&quot; := :new.&quot;UMET_FRSTOPNDBY&quot;;
    t_um_base_NEW_rec.&quot;UMER_LAS_SBTDBY&quot; := :new.&quot;UMER_LAS_SBTDBY&quot;;
    t_um_base_NEW_rec.&quot;UMER_FRSTSBTDBY&quot; := :new.&quot;UMER_FRSTSBTDBY&quot;;
    t_um_base_NEW_rec.&quot;UMER_RFNGWKFWTSK&quot; := :new.&quot;UMER_RFNGWKFWTSK&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSRFNGTSK&quot; := :new.&quot;UMER_PRVSRFNGTSK&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSRFNGTSK_PRMN&quot; := :new.&quot;UMER_PRVSRFNGTSK_PRMN&quot;;
    t_um_base_NEW_rec.&quot;UMER_OWNR&quot; := :new.&quot;UMER_OWNR&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSOWNR&quot; := :new.&quot;UMER_PRVSOWNR&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSSNDR&quot; := :new.&quot;UMER_PRVSSNDR&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSOWNRPRMN&quot; := :new.&quot;UMER_PRVSOWNRPRMN&quot;;
    t_um_base_NEW_rec.&quot;UMER_TNFR&quot; := :new.&quot;UMER_TNFR&quot;;
    t_um_base_NEW_rec.&quot;UMER_PRVSTNFR&quot; := :new.&quot;UMER_PRVSTNFR&quot;;
    t_um_base_NEW_rec.&quot;UMER_RCPTTRKG&quot; := :new.&quot;UMER_RCPTTRKG&quot;;
    t_um_base_NEW_rec.&quot;UMER_LAS_REVW&quot; := :new.&quot;UMER_LAS_REVW&quot;;
    t_um_base_NEW_rec.&quot;UMER_LAS_RTEDTO&quot; := :new.&quot;UMER_LAS_RTEDTO&quot;;
    t_um_base_NEW_rec.&quot;UMET_UM_EVNTOTCM&quot; := :new.&quot;UMET_UM_EVNTOTCM&quot;;
    t_um_base_NEW_rec.&quot;UMET_CLSRRESN&quot; := :new.&quot;UMET_CLSRRESN&quot;;
    t_um_base_NEW_rec.&quot;UMBS_SVRTY&quot; := :new.&quot;UMBS_SVRTY&quot;;
    t_um_base_NEW_rec.&quot;UMBS_PITY&quot; := :new.&quot;UMBS_PITY&quot;;
    t_um_base_NEW_rec.&quot;UMBS_SRC&quot; := :new.&quot;UMBS_SRC&quot;;
    t_um_base_NEW_rec.&quot;UMER_DENLRESN&quot; := :new.&quot;UMER_DENLRESN&quot;;
    t_um_base_NEW_rec.&quot;UMET_REONRESN&quot; := :new.&quot;UMET_REONRESN&quot;;
    t_um_base_NEW_rec.&quot;UMER_RJTNRESN&quot; := :new.&quot;UMER_RJTNRESN&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LTR&quot; := :new.&quot;UMBS_LTR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_TYP&quot; := :new.&quot;UMBS_TYP&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RTNGPEER&quot; := :new.&quot;UMBS_RTNGPEER&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RQTR&quot; := :new.&quot;UMBS_RQTR&quot;;
    t_um_base_NEW_rec.&quot;UMET_REQT&quot; := :new.&quot;UMET_REQT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_PMRYPVDR&quot; := :new.&quot;UMBS_PMRYPVDR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_PFNGPVDR&quot; := :new.&quot;UMBS_PFNGPVDR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RQNGPVDR&quot; := :new.&quot;UMBS_RQNGPVDR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_M
EMB&quot; := :new.&quot;UMBS_MEMB&quot;;
    t_um_base_NEW_rec.&quot;UMBS_RTNGRCPT&quot; := :new.&quot;UMBS_RTNGRCPT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_OWNROBST&quot; := :new.&quot;UMBS_OWNROBST&quot;;
    t_um_base_NEW_rec.&quot;CLASSTYPE&quot; := :new.&quot;CLASSTYPE&quot;;
    t_um_base_NEW_rec.&quot;UMBS_C4C_ID&quot; := :new.&quot;UMBS_C4C_ID&quot;;
    t_um_base_NEW_rec.&quot;UMBS_CRTD&quot; := :new.&quot;UMBS_CRTD&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LAS_ACT&quot; := :new.&quot;UMBS_LAS_ACT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LAS_ACT_ACTRTYP&quot; := :new.&quot;UMBS_LAS_ACT_ACTRTYP&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LAS_ACT_TIM&quot; := :new.&quot;UMBS_LAS_ACT_TIM&quot;;
    t_um_base_NEW_rec.&quot;UMBS_OBJ_STT&quot; := :new.&quot;UMBS_OBJ_STT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_VERS&quot; := :new.&quot;UMBS_VERS&quot;;
    t_um_base_NEW_rec.&quot;UMBS_VSBT&quot; := :new.&quot;UMBS_VSBT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_DLTDDT&quot; := :new.&quot;UMBS_DLTDDT&quot;;
    t_um_base_NEW_rec.&quot;UMBS_LAS_ACT_BY&quot; := :new.&quot;UMBS_LAS_ACT_BY&quot;;
    t_um_base_NEW_rec.&quot;UMBS_ORIGCRTR&quot; := :new.&quot;UMBS_ORIGCRTR&quot;;
    t_um_base_NEW_rec.&quot;UMBS_ORIGCRTRLOGDIN&quot; := :new.&quot;UMBS_ORIGCRTRLOGDIN&quot;;

    t_um_base_OLD_rec.&quot;UMBS_CNTRCT_ID&quot;  := :old.&quot;UMBS_CNTRCT_ID&quot;;
    t_um_base_OLD_rec.&quot;UMBS_FEES_VRFD&quot;  := :old.&quot;UMBS_FEES_VRFD&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LAS_ACT_BY_LOGDIN&quot; := :old.&quot;UMBS_LAS_ACT_BY_LOGDIN&quot;;
    t_um_base_OLD_rec.&quot;UMBS_UNIVID&quot; := :old.&quot;UMBS_UNIVID&quot;;
    t_um_base_OLD_rec.&quot;UMBS_INI_CNCTDT_TIM__DT&quot; := :old.&quot;UMBS_INI_CNCTDT_TIM__DT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot; := :old.&quot;UMBS_INI_CNCTDT_TIM__TIM_IN_DY&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RCMDLOS&quot; := :old.&quot;UMBS_RCMDLOS&quot;;
    t_um_base_OLD_rec.&quot;UMBS_SHOWTO_RQTR&quot; := :old.&quot;UMBS_SHOWTO_RQTR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RTNG&quot; := :old.&quot;UMBS_RTNG&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DDLNTYP&quot; := :old.&quot;UMBS_DDLNTYP&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DDLNTIM_BLCKUNIT&quot; := :old.&quot;UMBS_DDLNTIM_BLCKUNIT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DDLNTIM_BLCK&quot; := :old.&quot;UMBS_DDLNTIM_BLCK&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DDLNDT__DT&quot; := :old.&quot;UMBS_DDLNDT__DT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DDLNDT__TIM_IN_DY&quot; := :old.&quot;UMBS_DDLNDT__TIM_IN_DY&quot;;
    t_um_base_OLD_rec.&quot;UMBS_CMMT&quot; := :ol
d.&quot;UMBS_CMMT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_REQTTYP&quot; := :old.&quot;UMBS_REQTTYP&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DRVDDTMNSTT&quot; := :old.&quot;UMBS_DRVDDTMNSTT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_ID&quot; := :old.&quot;UMBS_ID&quot;;
    t_um_base_OLD_rec.&quot;UMET_CLNGCMTS&quot; := :old.&quot;UMET_CLNGCMTS&quot;;
    t_um_base_OLD_rec.&quot;UMET_ACKGDDLN_DT&quot; := :old.&quot;UMET_ACKGDDLN_DT&quot;;
    t_um_base_OLD_rec.&quot;UMET_ACKGDDLN_TIM_IN_DY&quot; := :old.&quot;UMET_ACKGDDLN_TIM_IN_DY&quot;;
    t_um_base_OLD_rec.&quot;UMET_CLSEDT__DT&quot; := :old.&quot;UMET_CLSEDT__DT&quot;;
    t_um_base_OLD_rec.&quot;UMET_CLSEDT__TIM_IN_DY&quot; := :old.&quot;UMET_CLSEDT__TIM_IN_DY&quot;;
    t_um_base_OLD_rec.&quot;UMET_REONCMMT&quot; := :old.&quot;UMET_REONCMMT&quot;;
    t_um_base_OLD_rec.&quot;UMET_LAS_CLSD&quot; := :old.&quot;UMET_LAS_CLSD&quot;;
    t_um_base_OLD_rec.&quot;UMET_LAS_RPND&quot; := :old.&quot;UMET_LAS_RPND&quot;;
    t_um_base_OLD_rec.&quot;UMET_WKFWISTCID&quot; := :old.&quot;UMET_WKFWISTCID&quot;;
    t_um_base_OLD_rec.&quot;UMET_CNV_ID&quot; := :old.&quot;UMET_CNV_ID&quot;;
    t_um_base_OLD_rec.&quot;UMET_OWNRCHNDFLAG&quot; := :old.&quot;UMET_OWNRCHNDFLAG&quot;;
    t_um_base_OLD_rec.&quot;UMET_OWNRCHNDCNT&quot; := :old.&quot;UMET_OWNRCHNDCNT&quot;;
    t_um_base_OLD_rec.&quot;UMET_FRSTOPNDAT&quot; := :old.&quot;UMET_FRSTOPNDAT&quot;;
    t_um_base_OLD_rec.&quot;UMET_ID&quot; := :old.&quot;UMET_ID&quot;;
    t_um_base_OLD_rec.&quot;UMER_IS_OK_AFT_DDLN&quot; := :old.&quot;UMER_IS_OK_AFT_DDLN&quot;;
    t_um_base_OLD_rec.&quot;UMER_DTMN&quot; := :old.&quot;UMER_DTMN&quot;;
    t_um_base_OLD_rec.&quot;UMER_CLSEEVNTAFT_CRTN&quot; := :old.&quot;UMER_CLSEEVNTAFT_CRTN&quot;;
    t_um_base_OLD_rec.&quot;UMER_RJTNCMMT&quot; := :old.&quot;UMER_RJTNCMMT&quot;;
    t_um_base_OLD_rec.&quot;UMER_FRSTSBTDAT&quot; := :old.&quot;UMER_FRSTSBTDAT&quot;;
    t_um_base_OLD_rec.&quot;UMER_LAS_SBTDAT&quot; := :old.&quot;UMER_LAS_SBTDAT&quot;;
    t_um_base_OLD_rec.&quot;UMER_WKFWISTCID&quot; := :old.&quot;UMER_WKFWISTCID&quot;;
    t_um_base_OLD_rec.&quot;UMER_CNV_ID&quot; := :old.&quot;UMER_CNV_ID&quot;;
    t_um_base_OLD_rec.&quot;UMER_OWNRCHNDFLAG&quot; := :old.&quot;UMER_OWNRCHNDFLAG&quot;;
    t_um_base_OLD_rec.&quot;UMER_OWNRCHNDCNT&quot; := :old.&quot;UMER_OWNRCHNDCNT&quot;;
    t_um_base_OLD_rec.&quot;UMER_AUTOUM_AT&quot; := :old.&quot;UMER_AUTOUM_AT&quot;;
    t_um_base_OLD_rec.&quot;UMER_LAS_RTEDAT&quot; := :old.&quot;UMER_LAS_RTEDAT&quot;;
    t_um_base_OLD_rec.&quot;UMER_ID&quot; := :old.&quot;UMER_ID&quot;;
    t_um_base
_OLD_rec.&quot;UMET_LAS_CLSDBY&quot; := :old.&quot;UMET_LAS_CLSDBY&quot;;
    t_um_base_OLD_rec.&quot;UMET_LAS_RPNDBY&quot; := :old.&quot;UMET_LAS_RPNDBY&quot;;
    t_um_base_OLD_rec.&quot;UMET_RFNGWKFWTSK&quot; := :old.&quot;UMET_RFNGWKFWTSK&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSRFNGTSK&quot; := :old.&quot;UMET_PRVSRFNGTSK&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSRFNGTSK_PRMN&quot; := :old.&quot;UMET_PRVSRFNGTSK_PRMN&quot;;
    t_um_base_OLD_rec.&quot;UMET_OWNR&quot; := :old.&quot;UMET_OWNR&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSOWNR&quot; := :old.&quot;UMET_PRVSOWNR&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSSNDR&quot; := :old.&quot;UMET_PRVSSNDR&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSOWNRPRMN&quot; := :old.&quot;UMET_PRVSOWNRPRMN&quot;;
    t_um_base_OLD_rec.&quot;UMET_TNFR&quot; := :old.&quot;UMET_TNFR&quot;;
    t_um_base_OLD_rec.&quot;UMET_PRVSTNFR&quot; := :old.&quot;UMET_PRVSTNFR&quot;;
    t_um_base_OLD_rec.&quot;UMET_RCPTTRKG&quot; := :old.&quot;UMET_RCPTTRKG&quot;;
    t_um_base_OLD_rec.&quot;UMET_LAS_REVW&quot; := :old.&quot;UMET_LAS_REVW&quot;;
    t_um_base_OLD_rec.&quot;UMET_LAS_RTEDTO&quot; := :old.&quot;UMET_LAS_RTEDTO&quot;;
    t_um_base_OLD_rec.&quot;UMET_FRSTOPNDBY&quot; := :old.&quot;UMET_FRSTOPNDBY&quot;;
    t_um_base_OLD_rec.&quot;UMER_LAS_SBTDBY&quot; := :old.&quot;UMER_LAS_SBTDBY&quot;;
    t_um_base_OLD_rec.&quot;UMER_FRSTSBTDBY&quot; := :old.&quot;UMER_FRSTSBTDBY&quot;;
    t_um_base_OLD_rec.&quot;UMER_RFNGWKFWTSK&quot; := :old.&quot;UMER_RFNGWKFWTSK&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSRFNGTSK&quot; := :old.&quot;UMER_PRVSRFNGTSK&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSRFNGTSK_PRMN&quot; := :old.&quot;UMER_PRVSRFNGTSK_PRMN&quot;;
    t_um_base_OLD_rec.&quot;UMER_OWNR&quot; := :old.&quot;UMER_OWNR&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSOWNR&quot; := :old.&quot;UMER_PRVSOWNR&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSSNDR&quot; := :old.&quot;UMER_PRVSSNDR&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSOWNRPRMN&quot; := :old.&quot;UMER_PRVSOWNRPRMN&quot;;
    t_um_base_OLD_rec.&quot;UMER_TNFR&quot; := :old.&quot;UMER_TNFR&quot;;
    t_um_base_OLD_rec.&quot;UMER_PRVSTNFR&quot; := :old.&quot;UMER_PRVSTNFR&quot;;
    t_um_base_OLD_rec.&quot;UMER_RCPTTRKG&quot; := :old.&quot;UMER_RCPTTRKG&quot;;
    t_um_base_OLD_rec.&quot;UMER_LAS_REVW&quot; := :old.&quot;UMER_LAS_REVW&quot;;
    t_um_base_OLD_rec.&quot;UMER_LAS_RTEDTO&quot; := :old.&quot;UMER_LAS_RTEDTO&quot;;
    t_um_base_OLD_rec.&quot;UMET_UM_EVNTOTCM&quot; := :old.&quot;UMET_UM_EVNTOTCM&quot;;
    t_um_base_OLD_rec.&quot;UMET_CLSRRESN&quot; := :old.&quot;UM
ET_CLSRRESN&quot;;
    t_um_base_OLD_rec.&quot;UMBS_SVRTY&quot; := :old.&quot;UMBS_SVRTY&quot;;
    t_um_base_OLD_rec.&quot;UMBS_PITY&quot; := :old.&quot;UMBS_PITY&quot;;
    t_um_base_OLD_rec.&quot;UMBS_SRC&quot; := :old.&quot;UMBS_SRC&quot;;
    t_um_base_OLD_rec.&quot;UMER_DENLRESN&quot; := :old.&quot;UMER_DENLRESN&quot;;
    t_um_base_OLD_rec.&quot;UMET_REONRESN&quot; := :old.&quot;UMET_REONRESN&quot;;
    t_um_base_OLD_rec.&quot;UMER_RJTNRESN&quot; := :old.&quot;UMER_RJTNRESN&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LTR&quot; := :old.&quot;UMBS_LTR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_TYP&quot; := :old.&quot;UMBS_TYP&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RTNGPEER&quot; := :old.&quot;UMBS_RTNGPEER&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RQTR&quot; := :old.&quot;UMBS_RQTR&quot;;
    t_um_base_OLD_rec.&quot;UMET_REQT&quot; := :old.&quot;UMET_REQT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_PMRYPVDR&quot; := :old.&quot;UMBS_PMRYPVDR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_PFNGPVDR&quot; := :old.&quot;UMBS_PFNGPVDR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RQNGPVDR&quot; := :old.&quot;UMBS_RQNGPVDR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_MEMB&quot; := :old.&quot;UMBS_MEMB&quot;;
    t_um_base_OLD_rec.&quot;UMBS_RTNGRCPT&quot; := :old.&quot;UMBS_RTNGRCPT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_OWNROBST&quot; := :old.&quot;UMBS_OWNROBST&quot;;
    t_um_base_OLD_rec.&quot;CLASSTYPE&quot; := :old.&quot;CLASSTYPE&quot;;
    t_um_base_OLD_rec.&quot;UMBS_C4C_ID&quot; := :old.&quot;UMBS_C4C_ID&quot;;
    t_um_base_OLD_rec.&quot;UMBS_CRTD&quot; := :old.&quot;UMBS_CRTD&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LAS_ACT&quot; := :old.&quot;UMBS_LAS_ACT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LAS_ACT_ACTRTYP&quot; := :old.&quot;UMBS_LAS_ACT_ACTRTYP&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LAS_ACT_TIM&quot; := :old.&quot;UMBS_LAS_ACT_TIM&quot;;
    t_um_base_OLD_rec.&quot;UMBS_OBJ_STT&quot; := :old.&quot;UMBS_OBJ_STT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_VERS&quot; := :old.&quot;UMBS_VERS&quot;;
    t_um_base_OLD_rec.&quot;UMBS_VSBT&quot; := :old.&quot;UMBS_VSBT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_DLTDDT&quot; := :old.&quot;UMBS_DLTDDT&quot;;
    t_um_base_OLD_rec.&quot;UMBS_LAS_ACT_BY&quot; := :old.&quot;UMBS_LAS_ACT_BY&quot;;
    t_um_base_OLD_rec.&quot;UMBS_ORIGCRTR&quot; := :old.&quot;UMBS_ORIGCRTR&quot;;
    t_um_base_OLD_rec.&quot;UMBS_ORIGCRTRLOGDIN&quot; := :old.&quot;UMBS_ORIGCRTRLOGDIN&quot;;

    /*pkg_dac_aggr.RowProcessForDIAG_UM(t_um_base_OLD_rec,t_um_base_NEW_rec);*/
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
247
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCRP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_CSFNRQNGPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UCRP_AUDITINSERT&quot; BEFORE INSERT ON T_UM_CSFNRQNGPVRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ucrp_crtd IS NULL THEN 
    :new.ucrp_crtd := curr_date; 
  END IF; 

  IF :new.ucrp_las_act_tim IS NULL THEN 
    :new.ucrp_las_act_tim := curr_date; 
  END IF; 

  IF :new.ucrp_las_act IS NULL THEN 
    :new.ucrp_las_act := 1; 
  END IF; 

  IF :new.ucrp_obj_stt IS NULL THEN 
    :new.ucrp_obj_stt := 1; 
  END IF; 

  IF :new.ucrp_vers IS NULL THEN 
    :new.ucrp_vers := 0; 
  END IF; 

  IF :new.ucrp_vsbt IS NULL THEN 
    :new.ucrp_vsbt := 1001; 
  END IF; 

  IF :new.ucrp_las_act_by IS NULL THEN 
    :new.ucrp_las_act_by := 1; 
  END IF; 

  IF :new.ucrp_origcrtr IS NULL THEN 
    :new.ucrp_origcrtr := 1; 
  END IF; 

  IF :new.ucrp_origcrtrlogdin IS NULL THEN 
    :new.ucrp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ucrp_las_act_by_logdin IS NULL THEN 
    :new.ucrp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_um_csfnrqngpvrs 
  ( 
   classtype, 
   ucrp_c4c_id, 
   ucrp_crtd, 
   ucrp_las_act, 
   ucrp_las_act_actrtyp, 
   ucrp_obj_stt, 
   ucrp_vers, 
   ucrp_vsbt, 
   ucrp_dltddt, 
   ucrp_las_act_by, 
   ucrp_origcrtr, 
   ucrp_origcrtrlogdin, 
   ucrp_las_act_by_logdin, 
   ucrp_univid, 
   ucrp_csfn, 
   ucrp_rqngpvrs, 
   ucrp_id, 
   valid_from, 
   valid_to , 
   ucrp_audid, 
   ucrp_prev_audid, 
   ucrp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ucrp_c4c_id,
   :new.ucrp_crtd,
   :new.ucrp_las_act,
   :new.ucrp_las_act_actrtyp,
   :new.ucrp_obj_stt,
   :new.ucrp_vers,
   :new.ucrp_vsbt,
   :new.ucrp_dltddt,
   :new.ucrp_las_act_by,
   :new.ucrp_origcrtr,
   :new.ucrp_origcrtrlogdin,
   :new.ucrp_las_act_by_logdin,
   :new.ucrp_univid,
   :new.ucrp_csfn,
   :new.ucrp_rqngpvrs, 
   :new.ucrp_id, 
   :new.ucrp_las_act_tim, 
   NULL, 
   u_um_csfnrqngpvrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
248
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCRP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_CSFNRQNGPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ucrp_auditupdate BEFORE
  UPDATE
    ON T_UM_CSFNRQNGPVRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ucrp_audid
      INTO
        last_audid
      FROM
        a_um_csfnrqngpvrs
      WHERE
        ucrp_id            = :old.ucrp_id
      AND ucrp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ucrp_las_act_tim = :new.ucrp_las_act_tim THEN
      UPDATE
        a_um_csfnrqngpvrs
      SET
        classtype              = :new.classtype,
        ucrp_c4c_id            = :new.ucrp_c4c_id,
        ucrp_crtd              = :new.ucrp_crtd,
        ucrp_las_act           = :new.ucrp_las_act,
        ucrp_las_act_actrtyp   = :new.ucrp_las_act_actrtyp,
        ucrp_obj_stt           = :new.ucrp_obj_stt,
        ucrp_vers              = :new.ucrp_vers,
        ucrp_vsbt              = :new.ucrp_vsbt,
        ucrp_dltddt            = :new.ucrp_dltddt,
        ucrp_las_act_by        = :new.ucrp_las_act_by,
        ucrp_origcrtr          = :new.ucrp_origcrtr,
        ucrp_origcrtrlogdin    = :new.ucrp_origcrtrlogdin,
        ucrp_las_act_by_logdin = :new.ucrp_las_act_by_logdin,
        ucrp_univid            = :new.ucrp_univid,
        ucrp_csfn              = :new.ucrp_csfn,
        ucrp_rqngpvrs          = :new.ucrp_rqngpvrs
      WHERE
        ucrp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_um_csfnrqngpvrs
        (
          classtype,
          ucrp_c4c_id,
          ucrp_crtd,
          ucrp_las_act,
          ucrp_las_act_actrtyp,
          ucrp_obj_stt,
          ucrp_vers,
          ucrp_vsbt,
          ucrp_dltddt,
          ucrp_las_act_by,
          ucrp_origcrtr,
          ucrp_origcrtrlogdin,
          ucrp_las_act
_by_logdin,
          ucrp_univid,
          ucrp_csfn,
          ucrp_rqngpvrs,
          ucrp_id,
          valid_from,
          valid_to,
          ucrp_audid,
          ucrp_prev_audid,
          ucrp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ucrp_c4c_id,
          :new.ucrp_crtd,
          :new.ucrp_las_act,
          :new.ucrp_las_act_actrtyp,
          :new.ucrp_obj_stt,
          :new.ucrp_vers,
          :new.ucrp_vsbt,
          :new.ucrp_dltddt,
          :new.ucrp_las_act_by,
          :new.ucrp_origcrtr,
          :new.ucrp_origcrtrlogdin,
          :new.ucrp_las_act_by_logdin,
          :new.ucrp_univid,
          :new.ucrp_csfn,
          :new.ucrp_rqngpvrs,
          :new.ucrp_id,
          :new.ucrp_las_act_tim,
          NULL,
          u_um_csfnrqngpvrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_um_csfnrqngpvrs
      SET
        valid_to        = :new.ucrp_las_act_tim,
        ucrp_next_audid = u_um_csfnrqngpvrs.CURRVAL
      WHERE
        ucrp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
249
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCSP_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_CSFNSENGPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UCSP_AUDITINSERT&quot; BEFORE INSERT ON T_UM_CSFNSENGPVRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ucsp_crtd IS NULL THEN 
    :new.ucsp_crtd := curr_date; 
  END IF; 

  IF :new.ucsp_las_act_tim IS NULL THEN 
    :new.ucsp_las_act_tim := curr_date; 
  END IF; 

  IF :new.ucsp_las_act IS NULL THEN 
    :new.ucsp_las_act := 1; 
  END IF; 

  IF :new.ucsp_obj_stt IS NULL THEN 
    :new.ucsp_obj_stt := 1; 
  END IF; 

  IF :new.ucsp_vers IS NULL THEN 
    :new.ucsp_vers := 0; 
  END IF; 

  IF :new.ucsp_vsbt IS NULL THEN 
    :new.ucsp_vsbt := 1001; 
  END IF; 

  IF :new.ucsp_las_act_by IS NULL THEN 
    :new.ucsp_las_act_by := 1; 
  END IF; 

  IF :new.ucsp_origcrtr IS NULL THEN 
    :new.ucsp_origcrtr := 1; 
  END IF; 

  IF :new.ucsp_origcrtrlogdin IS NULL THEN 
    :new.ucsp_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ucsp_las_act_by_logdin IS NULL THEN 
    :new.ucsp_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_um_csfnsengpvrs 
  ( 
   classtype, 
   ucsp_c4c_id, 
   ucsp_crtd, 
   ucsp_las_act, 
   ucsp_las_act_actrtyp, 
   ucsp_obj_stt, 
   ucsp_vers, 
   ucsp_vsbt, 
   ucsp_dltddt, 
   ucsp_las_act_by, 
   ucsp_origcrtr, 
   ucsp_origcrtrlogdin, 
   ucsp_las_act_by_logdin, 
   ucsp_univid, 
   ucsp_csfn, 
   ucsp_sengpvrs, 
   ucsp_id, 
   valid_from, 
   valid_to , 
   ucsp_audid, 
   ucsp_prev_audid, 
   ucsp_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ucsp_c4c_id,
   :new.ucsp_crtd,
   :new.ucsp_las_act,
   :new.ucsp_las_act_actrtyp,
   :new.ucsp_obj_stt,
   :new.ucsp_vers,
   :new.ucsp_vsbt,
   :new.ucsp_dltddt,
   :new.ucsp_las_act_by,
   :new.ucsp_origcrtr,
   :new.ucsp_origcrtrlogdin,
   :new.ucsp_las_act_by_logdin,
   :new.ucsp_univid,
   :new.ucsp_csfn,
   :new.ucsp_sengpvrs, 
   :new.ucsp_id, 
   :new.ucsp_las_act_tim, 
   NULL, 
   u_um_csfnsengpvrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
250
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCSP_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_CSFNSENGPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ucsp_auditupdate BEFORE
  UPDATE
    ON T_UM_CSFNSENGPVRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ucsp_audid
      INTO
        last_audid
      FROM
        a_um_csfnsengpvrs
      WHERE
        ucsp_id            = :old.ucsp_id
      AND ucsp_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ucsp_las_act_tim = :new.ucsp_las_act_tim THEN
      UPDATE
        a_um_csfnsengpvrs
      SET
        classtype              = :new.classtype,
        ucsp_c4c_id            = :new.ucsp_c4c_id,
        ucsp_crtd              = :new.ucsp_crtd,
        ucsp_las_act           = :new.ucsp_las_act,
        ucsp_las_act_actrtyp   = :new.ucsp_las_act_actrtyp,
        ucsp_obj_stt           = :new.ucsp_obj_stt,
        ucsp_vers              = :new.ucsp_vers,
        ucsp_vsbt              = :new.ucsp_vsbt,
        ucsp_dltddt            = :new.ucsp_dltddt,
        ucsp_las_act_by        = :new.ucsp_las_act_by,
        ucsp_origcrtr          = :new.ucsp_origcrtr,
        ucsp_origcrtrlogdin    = :new.ucsp_origcrtrlogdin,
        ucsp_las_act_by_logdin = :new.ucsp_las_act_by_logdin,
        ucsp_univid            = :new.ucsp_univid,
        ucsp_csfn              = :new.ucsp_csfn,
        ucsp_sengpvrs          = :new.ucsp_sengpvrs
      WHERE
        ucsp_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_um_csfnsengpvrs
        (
          classtype,
          ucsp_c4c_id,
          ucsp_crtd,
          ucsp_las_act,
          ucsp_las_act_actrtyp,
          ucsp_obj_stt,
          ucsp_vers,
          ucsp_vsbt,
          ucsp_dltddt,
          ucsp_las_act_by,
          ucsp_origcrtr,
          ucsp_origcrtrlogdin,
          ucsp_las_act
_by_logdin,
          ucsp_univid,
          ucsp_csfn,
          ucsp_sengpvrs,
          ucsp_id,
          valid_from,
          valid_to,
          ucsp_audid,
          ucsp_prev_audid,
          ucsp_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ucsp_c4c_id,
          :new.ucsp_crtd,
          :new.ucsp_las_act,
          :new.ucsp_las_act_actrtyp,
          :new.ucsp_obj_stt,
          :new.ucsp_vers,
          :new.ucsp_vsbt,
          :new.ucsp_dltddt,
          :new.ucsp_las_act_by,
          :new.ucsp_origcrtr,
          :new.ucsp_origcrtrlogdin,
          :new.ucsp_las_act_by_logdin,
          :new.ucsp_univid,
          :new.ucsp_csfn,
          :new.ucsp_sengpvrs,
          :new.ucsp_id,
          :new.ucsp_las_act_tim,
          NULL,
          u_um_csfnsengpvrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_um_csfnsengpvrs
      SET
        valid_to        = :new.ucsp_las_act_tim,
        ucsp_next_audid = u_um_csfnsengpvrs.CURRVAL
      WHERE
        ucsp_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
251
</td>
<td>
THH_C4C
</td>
<td>
TRG_UENR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_EXTNNTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UENR_AUDITINSERT&quot; BEFORE INSERT ON T_UM_EXTNNTCERCTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.uenr_crtd IS NULL THEN 
    :new.uenr_crtd := curr_date; 
  END IF; 

  IF :new.uenr_las_act_tim IS NULL THEN 
    :new.uenr_las_act_tim := curr_date; 
  END IF; 

  IF :new.uenr_las_act IS NULL THEN 
    :new.uenr_las_act := 1; 
  END IF; 

  IF :new.uenr_obj_stt IS NULL THEN 
    :new.uenr_obj_stt := 1; 
  END IF; 

  IF :new.uenr_vers IS NULL THEN 
    :new.uenr_vers := 0; 
  END IF; 

  IF :new.uenr_vsbt IS NULL THEN 
    :new.uenr_vsbt := 1001; 
  END IF; 

  IF :new.uenr_las_act_by IS NULL THEN 
    :new.uenr_las_act_by := 1; 
  END IF; 

  IF :new.uenr_origcrtr IS NULL THEN 
    :new.uenr_origcrtr := 1; 
  END IF; 

  IF :new.uenr_origcrtrlogdin IS NULL THEN 
    :new.uenr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.uenr_las_act_by_logdin IS NULL THEN 
    :new.uenr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_um_extnntcercts 
  ( 
   classtype, 
   uenr_c4c_id, 
   uenr_crtd, 
   uenr_las_act, 
   uenr_las_act_actrtyp, 
   uenr_obj_stt, 
   uenr_vers, 
   uenr_vsbt, 
   uenr_dltddt, 
   uenr_las_act_by, 
   uenr_origcrtr, 
   uenr_origcrtrlogdin, 
   uenr_las_act_by_logdin, 
   uenr_univid, 
   uenr_um_extn, 
   uenr_ntcercts, 
   uenr_id, 
   valid_from, 
   valid_to , 
   uenr_audid, 
   uenr_prev_audid, 
   uenr_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.uenr_c4c_id,
   :new.uenr_crtd,
   :new.uenr_las_act,
   :new.uenr_las_act_actrtyp,
   :new.uenr_obj_stt,
   :new.uenr_vers,
   :new.uenr_vsbt,
   :new.uenr_dltddt,
   :new.uenr_las_act_by,
   :new.uenr_origcrtr,
   :new.uenr_origcrtrlogdin,
   :new.uenr_las_act_by_logdin,
   :new.uenr_univid,
   :new.uenr_um_extn,
   :new.uenr_ntcercts, 
   :new.uenr_id, 
   :new.uenr_las_act_tim, 
   NULL, 
   u_um_extnntcercts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
252
</td>
<td>
THH_C4C
</td>
<td>
TRG_UENR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_EXTNNTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_uenr_auditupdate BEFORE
  UPDATE
    ON T_UM_EXTNNTCERCTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        uenr_audid
      INTO
        last_audid
      FROM
        a_um_extnntcercts
      WHERE
        uenr_id            = :old.uenr_id
      AND uenr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.uenr_las_act_tim = :new.uenr_las_act_tim THEN
      UPDATE
        a_um_extnntcercts
      SET
        classtype              = :new.classtype,
        uenr_c4c_id            = :new.uenr_c4c_id,
        uenr_crtd              = :new.uenr_crtd,
        uenr_las_act           = :new.uenr_las_act,
        uenr_las_act_actrtyp   = :new.uenr_las_act_actrtyp,
        uenr_obj_stt           = :new.uenr_obj_stt,
        uenr_vers              = :new.uenr_vers,
        uenr_vsbt              = :new.uenr_vsbt,
        uenr_dltddt            = :new.uenr_dltddt,
        uenr_las_act_by        = :new.uenr_las_act_by,
        uenr_origcrtr          = :new.uenr_origcrtr,
        uenr_origcrtrlogdin    = :new.uenr_origcrtrlogdin,
        uenr_las_act_by_logdin = :new.uenr_las_act_by_logdin,
        uenr_univid            = :new.uenr_univid,
        uenr_um_extn           = :new.uenr_um_extn,
        uenr_ntcercts          = :new.uenr_ntcercts
      WHERE
        uenr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_um_extnntcercts
        (
          classtype,
          uenr_c4c_id,
          uenr_crtd,
          uenr_las_act,
          uenr_las_act_actrtyp,
          uenr_obj_stt,
          uenr_vers,
          uenr_vsbt,
          uenr_dltddt,
          uenr_las_act_by,
          uenr_origcrtr,
          uenr_origcrtrlogdin,
          uenr_las_
act_by_logdin,
          uenr_univid,
          uenr_um_extn,
          uenr_ntcercts,
          uenr_id,
          valid_from,
          valid_to,
          uenr_audid,
          uenr_prev_audid,
          uenr_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.uenr_c4c_id,
          :new.uenr_crtd,
          :new.uenr_las_act,
          :new.uenr_las_act_actrtyp,
          :new.uenr_obj_stt,
          :new.uenr_vers,
          :new.uenr_vsbt,
          :new.uenr_dltddt,
          :new.uenr_las_act_by,
          :new.uenr_origcrtr,
          :new.uenr_origcrtrlogdin,
          :new.uenr_las_act_by_logdin,
          :new.uenr_univid,
          :new.uenr_um_extn,
          :new.uenr_ntcercts,
          :new.uenr_id,
          :new.uenr_las_act_tim,
          NULL,
          u_um_extnntcercts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_um_extnntcercts
      SET
        valid_to        = :new.uenr_las_act_tim,
        uenr_next_audid = u_um_extnntcercts.CURRVAL
      WHERE
        uenr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
253
</td>
<td>
THH_C4C
</td>
<td>
TRG_UMNR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_NTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UMNR_AUDITINSERT&quot; BEFORE INSERT ON T_UM_NTCERCTS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.umnr_crtd IS NULL THEN 
    :new.umnr_crtd := curr_date; 
  END IF; 

  IF :new.umnr_las_act_tim IS NULL THEN 
    :new.umnr_las_act_tim := curr_date; 
  END IF; 

  IF :new.umnr_las_act IS NULL THEN 
    :new.umnr_las_act := 1; 
  END IF; 

  IF :new.umnr_obj_stt IS NULL THEN 
    :new.umnr_obj_stt := 1; 
  END IF; 

  IF :new.umnr_vers IS NULL THEN 
    :new.umnr_vers := 0; 
  END IF; 

  IF :new.umnr_vsbt IS NULL THEN 
    :new.umnr_vsbt := 1001; 
  END IF; 

  IF :new.umnr_las_act_by IS NULL THEN 
    :new.umnr_las_act_by := 1; 
  END IF; 

  IF :new.umnr_origcrtr IS NULL THEN 
    :new.umnr_origcrtr := 1; 
  END IF; 

  IF :new.umnr_origcrtrlogdin IS NULL THEN 
    :new.umnr_origcrtrlogdin := 1; 
  END IF; 

  IF :new.umnr_las_act_by_logdin IS NULL THEN 
    :new.umnr_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_um_ntcercts 
  ( 
   umnr_c4c_id, 
   umnr_crtd, 
   umnr_las_act, 
   umnr_las_act_actrtyp, 
   umnr_obj_stt, 
   umnr_vers, 
   umnr_vsbt, 
   umnr_dltddt, 
   umnr_las_act_by, 
   umnr_origcrtr, 
   umnr_origcrtrlogdin, 
   umnr_las_act_by_logdin, 
   umnr_univid, 
   umnr_ntceum_base, 
   umnr_ntcercts, 
   classtype, 
   umnr_id, 
   valid_from, 
   valid_to , 
   umnr_audid, 
   umnr_prev_audid, 
   umnr_next_audid
  ) 
  VALUES 
  ( 
   :new.umnr_c4c_id,
   :new.umnr_crtd,
   :new.umnr_las_act,
   :new.umnr_las_act_actrtyp,
   :new.umnr_obj_stt,
   :new.umnr_vers,
   :new.umnr_vsbt,
   :new.umnr_dltddt,
   :new.umnr_las_act_by,
   :new.umnr_origcrtr,
   :new.umnr_origcrtrlogdin,
   :new.umnr_las_act_by_logdin,
   :new.umnr_univid,
   :new.umnr_ntceum_base,
   :new.umnr_ntcercts,
   :new.classtype, 
   :new.umnr_id, 
   :new.umnr_las_act_tim, 
   NULL, 
   u_um_ntcercts.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
254
</td>
<td>
THH_C4C
</td>
<td>
TRG_UMNR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_UM_NTCERCTS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_umnr_auditupdate BEFORE
  UPDATE
    ON T_UM_NTCERCTS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        umnr_audid
      INTO
        last_audid
      FROM
        a_um_ntcercts
      WHERE
        umnr_id            = :old.umnr_id
      AND umnr_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.umnr_las_act_tim = :new.umnr_las_act_tim THEN
      UPDATE
        a_um_ntcercts
      SET
        umnr_ntceum_base       = :new.umnr_ntceum_base,
        umnr_ntcercts          = :new.umnr_ntcercts,
        classtype              = :new.classtype,
        umnr_c4c_id            = :new.umnr_c4c_id,
        umnr_crtd              = :new.umnr_crtd,
        umnr_las_act           = :new.umnr_las_act,
        umnr_las_act_actrtyp   = :new.umnr_las_act_actrtyp,
        umnr_obj_stt           = :new.umnr_obj_stt,
        umnr_vers              = :new.umnr_vers,
        umnr_vsbt              = :new.umnr_vsbt,
        umnr_dltddt            = :new.umnr_dltddt,
        umnr_las_act_by        = :new.umnr_las_act_by,
        umnr_origcrtr          = :new.umnr_origcrtr,
        umnr_origcrtrlogdin    = :new.umnr_origcrtrlogdin,
        umnr_las_act_by_logdin = :new.umnr_las_act_by_logdin,
        umnr_univid            = :new.umnr_univid
      WHERE
        umnr_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_um_ntcercts
        (
          umnr_ntceum_base,
          umnr_ntcercts,
          classtype,
          umnr_c4c_id,
          umnr_crtd,
          umnr_las_act,
          umnr_las_act_actrtyp,
          umnr_obj_stt,
          umnr_vers,
          umnr_vsbt,
          umnr_dltddt,
          umnr_las_act_by,
          umnr_origcrtr,

     umnr_origcrtrlogdin,
          umnr_las_act_by_logdin,
          umnr_univid,
          umnr_id,
          valid_from,
          valid_to,
          umnr_audid,
          umnr_prev_audid,
          umnr_next_audid
        )
        VALUES
        (
          :new.umnr_ntceum_base,
          :new.umnr_ntcercts,
          :new.classtype,
          :new.umnr_c4c_id,
          :new.umnr_crtd,
          :new.umnr_las_act,
          :new.umnr_las_act_actrtyp,
          :new.umnr_obj_stt,
          :new.umnr_vers,
          :new.umnr_vsbt,
          :new.umnr_dltddt,
          :new.umnr_las_act_by,
          :new.umnr_origcrtr,
          :new.umnr_origcrtrlogdin,
          :new.umnr_las_act_by_logdin,
          :new.umnr_univid,
          :new.umnr_id,
          :new.umnr_las_act_tim,
          NULL,
          u_um_ntcercts.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_um_ntcercts
      SET
        valid_to        = :new.umnr_las_act_tim,
        umnr_next_audid = u_um_ntcercts.CURRVAL
      WHERE
        umnr_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
255
</td>
<td>
THH_C4C
</td>
<td>
TRG_CM_ACL_INVALIDATE_MEMBER
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_CM_ACL_INVALIDATE_MEMBER BEFORE
   UPDATE ON T_USR FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  BEGIN
    BEGIN
       DELETE FROM umv_dac_cm_acl
       WHERE CMBS_ID IN (SELECT cmbs_id FROM t_cm_basebase WHERE cmbs_memb=:NEW.mbur_id);
    END;
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
256
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_usr_auditinsert before insert on t_usr	for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
	curr_date date;

begin
	curr_date := current_date;

	if :new.usr_crtd is null then
		:new.usr_crtd  := curr_date;
	end if;

	if :new.usr_las_act_tim is null then
		:new.usr_las_act_tim  := curr_date;
	end if;

	if :new.usr_las_act is null then
		:new.usr_las_act  := 1;
	end if;

	if :new.usr_obj_stt is null then
		:new.usr_obj_stt  := 1;
	end if;

	if :new.usr_vers is null then
		:new.usr_vers  := 0;
	end if;

	if :new.usr_vsbt is null then
		:new.usr_vsbt  := 1001;
	end if;

	if :new.usr_las_act_by is null then
		:new.usr_las_act_by  := 1;
	end if;

	if :new.usr_origcrtr is null then
		:new.usr_origcrtr  := 1;
	end if;

	if :new.usr_origcrtrlogdin is null then
		:new.usr_origcrtrlogdin  := 1;
	end if;

	if :new.usr_las_act_by_logdin is null then
		:new.usr_las_act_by_logdin  := 1;
	end if;

	if :new.prv_is_adm is null and :new.classtype = 'Provider' then
		:new.prv_is_adm  := 0;
	end if;

	insert into a_usr (
		mbur_endangered,
		mbur_safeword,
		mbur_medicaid_recert_date,
		mbur_restricted_rcpnt_prgrm,
		payr_thnkhlthend_dt,
		payr_wkldlmitby_all_usr_rols,
		payr_wkldlmitby_pmryusr_role,
		payr_wkldlmitby,
		payr_wkldlmitfnaldcdr,
		payr_wkldlmitby_roleby_svty,
		payr_wkldlmitby_totlwkld,
		payr_wkldlmtdby_worktyp,
		payr_reg_dy_off_mon,
		payr_reg_dy_off_tues,
		payr_reg_dy_off_wed,
		payr_reg_dy_off_thrs,
		payr_reg_dy_off_fri,
		payr_reg_dy_off_sat,
		payr_reg_dy_off_sun,
		payr_svtyidx,
		payr_totlwkld,
		payr_caserqts,
		payr_cass,
		payr_um_rqts,
		payr_um_evts,
		payr_cm_prj_rqts,
		payr_cm_prjs,
		payr_revwrqts,
		payr_id,
		usr_las_dctdby,
		usr_frstatvdby,
		usr_las_atvdby,
		usr_ratnapvl,
		usr_rfngwkfwtsk,
		usr_prvsrfngtsk,
		usr_prvsrfngtsk_prmn,
		usr_ownr,
		usr_prvsownr,
		usr_prvssndr,
		usr_prvsownrprmn,
		usr_tnfr,
		usr_prvstnfr,
		usr_sbtdby,
		mbur_rcpttrkg,
		mbur_las_revw,
		usr_cstmflds,
		prv_pcp_cat,
		prv_pvdrtyp,
		usr_ecty,
		usr_nam_sfix,
		usr_nam_prfx,
		mbur_rlspto_sbcr,
		payr_cstmwkldlmit,
		payr_actlwkld,
		usr_cnctin
fo,
		usr_mrgemstr,
		prv_pvdrpayrdat,
		mbur_sbcr,
		payr_payrpayrdat,
		payr_bck1,
		payr_svsr,
		payr_bck2,
		payr_bck3,
		payr_rgnlsngs,
		payr_stcynoteprps,
		mbur_membpayrdat,
		usr_pmrylang,
		classtype,
		usr_c4c_id,
		usr_crtd,
		usr_las_act,
		usr_las_act_actrtyp,
		usr_obj_stt,
		usr_vers,
		usr_vsbt,
		usr_dltddt,
		usr_las_act_by,
		usr_origcrtr,
		usr_origcrtrlogdin,
		usr_las_act_by_logdin,
		usr_univid,
		usr_frstnam,
		usr_mdlenam,
		usr_las_nam,
		usr_dt_of_brth,
		usr_gndrcode,
		usr_frstatvd,
		usr_las_atvd,
		usr_las_dctd,
		usr_wkfwistcid,
		usr_cnv_id,
		usr_ownrchndflag,
		usr_ownrchndcnt,
		usr_sbtdat,
		prv_pln_id,
		prv_upn_id,
		prv_fed_tax,
		prv_totlpnts,
		prv_totlpntsin_pctc,
		prv_totlpayrmems,
		prv_totlpayrmemsin_pctc,
		prv_acngnew_pnts,
		prv_athdfor_aumtdtmn,
		prv_inscid,
		prv_is_adm,
		prv_pcp_ind,
		prv_id,
		mbur_dt_of_dth,
		mbur_elbl,
		mbur_cob,
		mbur_cob_nam,
		mbur_inscid_at_othrinsr,
		mbur_pmryinsr,
		mbur_crdtind,
		mbur_inscid,
		mbur_medicaid,
		mbur_hicnid,
		mbur_mbi,
		mbur_scl_sctynmbr,
		mbur_cnftcnct,
		mbur_dnf_code,
		mbur_id,
		ff_id,
		payr_empeid,
		payr_scl_sctynmbr,
		payr_strtof_yr,
		payr_hreddt,
		payr_tmtddt,
		payr_thnkhlthstrtdt,
		prv_splrtyp,
		usr_id,
		valid_from,
		valid_to ,
		usr_audid,
		usr_prev_audid,
		usr_next_audid
	) values (
		:new.mbur_endangered,
		:new.mbur_safeword,
		:new.mbur_medicaid_recert_date,
		:new.mbur_restricted_rcpnt_prgrm,
		:new.payr_thnkhlthend_dt,
		:new.payr_wkldlmitby_all_usr_rols,
		:new.payr_wkldlmitby_pmryusr_role,
		:new.payr_wkldlmitby,
		:new.payr_wkldlmitfnaldcdr,
		:new.payr_wkldlmitby_roleby_svty,
		:new.payr_wkldlmitby_totlwkld,
		:new.payr_wkldlmtdby_worktyp,
		:new.payr_reg_dy_off_mon,
		:new.payr_reg_dy_off_tues,
		:new.payr_reg_dy_off_wed,
		:new.payr_reg_dy_off_thrs,
		:new.payr_reg_dy_off_fri,
		:new.payr_reg_dy_off_sat,
		:new.payr_reg_dy_off_sun,
		:new.payr_svtyidx,
		:new.payr_totlwkld,
		:new.payr_caserqts,
		:new.payr_cass,
		:new.payr_u
m_rqts,
		:new.payr_um_evts,
		:new.payr_cm_prj_rqts,
		:new.payr_cm_prjs,
		:new.payr_revwrqts,
		:new.payr_id,
		:new.usr_las_dctdby,
		:new.usr_frstatvdby,
		:new.usr_las_atvdby,
		:new.usr_ratnapvl,
		:new.usr_rfngwkfwtsk,
		:new.usr_prvsrfngtsk,
		:new.usr_prvsrfngtsk_prmn,
		:new.usr_ownr,
		:new.usr_prvsownr,
		:new.usr_prvssndr,
		:new.usr_prvsownrprmn,
		:new.usr_tnfr,
		:new.usr_prvstnfr,
		:new.usr_sbtdby,
		:new.mbur_rcpttrkg,
		:new.mbur_las_revw,
		:new.usr_cstmflds,
		:new.prv_pcp_cat,
		:new.prv_pvdrtyp,
		:new.usr_ecty,
		:new.usr_nam_sfix,
		:new.usr_nam_prfx,
		:new.mbur_rlspto_sbcr,
		:new.payr_cstmwkldlmit,
		:new.payr_actlwkld,
		:new.usr_cnctinfo,
		:new.usr_mrgemstr,
		:new.prv_pvdrpayrdat,
		:new.mbur_sbcr,
		:new.payr_payrpayrdat,
		:new.payr_bck1,
		:new.payr_svsr,
		:new.payr_bck2,
		:new.payr_bck3,
		:new.payr_rgnlsngs,
		:new.payr_stcynoteprps,
		:new.mbur_membpayrdat,
		:new.usr_pmrylang,
		:new.classtype,
		:new.usr_c4c_id,
		:new.usr_crtd,
		:new.usr_las_act,
		:new.usr_las_act_actrtyp,
		:new.usr_obj_stt,
		:new.usr_vers,
		:new.usr_vsbt,
		:new.usr_dltddt,
		:new.usr_las_act_by,
		:new.usr_origcrtr,
		:new.usr_origcrtrlogdin,
		:new.usr_las_act_by_logdin,
		:new.usr_univid,
		:new.usr_frstnam,
		:new.usr_mdlenam,
		:new.usr_las_nam,
		:new.usr_dt_of_brth,
		:new.usr_gndrcode,
		:new.usr_frstatvd,
		:new.usr_las_atvd,
		:new.usr_las_dctd,
		:new.usr_wkfwistcid,
		:new.usr_cnv_id,
		:new.usr_ownrchndflag,
		:new.usr_ownrchndcnt,
		:new.usr_sbtdat,
		:new.prv_pln_id,
		:new.prv_upn_id,
		:new.prv_fed_tax,
		:new.prv_totlpnts,
		:new.prv_totlpntsin_pctc,
		:new.prv_totlpayrmems,
		:new.prv_totlpayrmemsin_pctc,
		:new.prv_acngnew_pnts,
		:new.prv_athdfor_aumtdtmn,
		:new.prv_inscid,
		:new.prv_is_adm,
		:new.prv_pcp_ind,
		:new.prv_id,
		:new.mbur_dt_of_dth,
		:new.mbur_elbl,
		:new.mbur_cob,
		:new.mbur_cob_nam,
		:new.mbur_inscid_at_othrinsr,
		:new.mbur_pmryinsr,
		:new.mbur_crdtind,
		:new.mbur_inscid,
		:new.mbur_medicaid,
		:new.m
bur_hicnid,
		:new.mbur_mbi,
		:new.mbur_scl_sctynmbr,
		:new.mbur_cnftcnct,
		:new.mbur_dnf_code,
		:new.mbur_id,
		:new.ff_id,
		:new.payr_empeid,
		:new.payr_scl_sctynmbr,
		:new.payr_strtof_yr,
		:new.payr_hreddt,
		:new.payr_tmtddt,
		:new.payr_thnkhlthstrtdt,
		:new.prv_splrtyp,
		:new.usr_id,
		:new.usr_las_act_tim,
		null,
		u_usr.nextval,
		null,
		null
	);
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
257
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_usr_auditupdate before update on t_usr for each row


</td>
<td>
PL/SQL
</td>
<td>
declare
	last_audid number;

begin

	begin

		select usr_audid into last_audid
		from a_usr
		where
			usr_id = :old.usr_id
			and
			usr_next_audid is null
			and
			rownum &lt; 2 for update;
		exception
			when no_data_found then
				last_audid := null;
	end;

	/* LastActionTime has not changed - no new transaction */
	if :old.usr_las_act_tim = :new.usr_las_act_tim then
		update a_usr
		set
			mbur_endangered						= :new.mbur_endangered,
			mbur_safeword						= :new.mbur_safeword,
			mbur_medicaid_recert_date			= :new.mbur_medicaid_recert_date,
			mbur_restricted_rcpnt_prgrm		=	:new.mbur_restricted_rcpnt_prgrm,
			prv_is_adm										= :new.prv_is_adm,
			prv_pcp_ind										= :new.prv_pcp_ind,
			prv_id												= :new.prv_id,
			mbur_dt_of_dth								= :new.mbur_dt_of_dth,
			mbur_elbl											= :new.mbur_elbl,
			mbur_cob											= :new.mbur_cob,
			mbur_cob_nam									= :new.mbur_cob_nam,
			mbur_inscid_at_othrinsr				= :new.mbur_inscid_at_othrinsr,
			mbur_pmryinsr									= :new.mbur_pmryinsr,
			mbur_crdtind									= :new.mbur_crdtind,
			mbur_inscid										= :new.mbur_inscid,
			mbur_medicaid									= :new.mbur_medicaid,
			mbur_hicnid										= :new.mbur_hicnid,
			mbur_mbi										= :new.mbur_mbi,
			mbur_scl_sctynmbr							= :new.mbur_scl_sctynmbr,
			mbur_cnftcnct									= :new.mbur_cnftcnct,
			mbur_dnf_code									= :new.mbur_dnf_code,
			mbur_id												= :new.mbur_id,
			ff_id													= :new.ff_id,
			payr_empeid										= :new.payr_empeid,
			payr_scl_sctynmbr							= :new.payr_scl_sctynmbr,
			payr_strtof_yr								= :new.payr_strtof_yr,
			payr_hreddt										= :new.payr_hreddt,
			payr_tmtddt										= :new.payr_tmtddt,
			payr_thnkhlthstrtdt						= :new.payr_thnkhlthstrtdt,
			payr_thnkhlthend_dt						= :new.payr_thnkhlthend_dt,
			payr_wkldlmitby_all_usr_rols	=	:new.payr_wkldlmitby_all_usr_rols,
			payr_wkldlmitby_pmryusr_role	= :new.payr_wkldlmitby_pmryusr_role,
			payr_wkldlmitby								= :new.payr_wkldlmitby,
			payr
_wkldlmitfnaldcdr					= :new.payr_wkldlmitfnaldcdr,
			payr_wkldlmitby_roleby_svty		= :new.payr_wkldlmitby_roleby_svty,
			payr_wkldlmitby_totlwkld			= :new.payr_wkldlmitby_totlwkld,
			payr_wkldlmtdby_worktyp				= :new.payr_wkldlmtdby_worktyp,
			payr_reg_dy_off_mon						= :new.payr_reg_dy_off_mon,
			payr_reg_dy_off_tues					= :new.payr_reg_dy_off_tues,
			payr_reg_dy_off_wed						= :new.payr_reg_dy_off_wed,
			payr_reg_dy_off_thrs					= :new.payr_reg_dy_off_thrs,
			payr_reg_dy_off_fri						= :new.payr_reg_dy_off_fri,
			payr_reg_dy_off_sat						= :new.payr_reg_dy_off_sat,
			payr_reg_dy_off_sun						= :new.payr_reg_dy_off_sun,
			payr_svtyidx									= :new.payr_svtyidx,
			payr_totlwkld									= :new.payr_totlwkld,
			payr_caserqts									= :new.payr_caserqts,
			payr_cass											= :new.payr_cass,
			payr_um_rqts									= :new.payr_um_rqts,
			payr_um_evts									= :new.payr_um_evts,
			payr_cm_prj_rqts							= :new.payr_cm_prj_rqts,
			payr_cm_prjs									= :new.payr_cm_prjs,
			payr_revwrqts									= :new.payr_revwrqts,
			payr_id												= :new.payr_id,
			usr_las_dctdby								= :new.usr_las_dctdby,
			usr_frstatvdby								= :new.usr_frstatvdby,
			usr_las_atvdby								= :new.usr_las_atvdby,
			usr_ratnapvl									= :new.usr_ratnapvl,
			usr_rfngwkfwtsk								= :new.usr_rfngwkfwtsk,
			usr_prvsrfngtsk								= :new.usr_prvsrfngtsk,
			usr_prvsrfngtsk_prmn					= :new.usr_prvsrfngtsk_prmn,
			usr_ownr											= :new.usr_ownr,
			usr_prvsownr									= :new.usr_prvsownr,
			usr_prvssndr									= :new.usr_prvssndr,
			usr_prvsownrprmn							= :new.usr_prvsownrprmn,
			usr_tnfr											= :new.usr_tnfr,
			usr_prvstnfr									= :new.usr_prvstnfr,
			usr_sbtdby										= :new.usr_sbtdby,
			mbur_rcpttrkg									= :new.mbur_rcpttrkg,
			mbur_las_revw									= :new.mbur_las_revw,
			usr_cstmflds									= :new.usr_cstmflds,
			prv_pcp_cat										= :new.prv_pcp_cat,
			prv_pvdrtyp										= :new.prv_pvdrtyp,
			usr_ecty											= :new.us
r_ecty,
			usr_nam_sfix									= :new.usr_nam_sfix,
			usr_nam_prfx									= :new.usr_nam_prfx,
			mbur_rlspto_sbcr							= :new.mbur_rlspto_sbcr,
			payr_cstmwkldlmit							= :new.payr_cstmwkldlmit,
			payr_actlwkld									= :new.payr_actlwkld,
			usr_cnctinfo									= :new.usr_cnctinfo,
			usr_mrgemstr									= :new.usr_mrgemstr,
			prv_pvdrpayrdat								= :new.prv_pvdrpayrdat,
			mbur_sbcr											= :new.mbur_sbcr,
			payr_payrpayrdat							= :new.payr_payrpayrdat,
			payr_bck1											= :new.payr_bck1,
			payr_svsr											= :new.payr_svsr,
			payr_bck2											= :new.payr_bck2,
			payr_bck3											= :new.payr_bck3,
			payr_rgnlsngs									= :new.payr_rgnlsngs,
			payr_stcynoteprps							= :new.payr_stcynoteprps,
			mbur_membpayrdat							= :new.mbur_membpayrdat,
			usr_pmrylang									= :new.usr_pmrylang,
			classtype											= :new.classtype,
			usr_c4c_id										= :new.usr_c4c_id,
			usr_crtd											= :new.usr_crtd,
			usr_las_act										= :new.usr_las_act,
			usr_las_act_actrtyp						= :new.usr_las_act_actrtyp,
			usr_obj_stt										= :new.usr_obj_stt,
			usr_vers											= :new.usr_vers,
			usr_vsbt											= :new.usr_vsbt,
			usr_dltddt										= :new.usr_dltddt,
			usr_las_act_by								= :new.usr_las_act_by,
			usr_origcrtr									= :new.usr_origcrtr,
			usr_origcrtrlogdin						= :new.usr_origcrtrlogdin,
			usr_las_act_by_logdin					= :new.usr_las_act_by_logdin,
			usr_univid										= :new.usr_univid,
			usr_frstnam										= :new.usr_frstnam,
			usr_mdlenam										= :new.usr_mdlenam,
			usr_las_nam										= :new.usr_las_nam,
			usr_dt_of_brth								= :new.usr_dt_of_brth,
			usr_gndrcode									= :new.usr_gndrcode,
			usr_frstatvd									= :new.usr_frstatvd,
			usr_las_atvd									= :new.usr_las_atvd,
			usr_las_dctd									= :new.usr_las_dctd,
			usr_wkfwistcid								= :new.usr_wkfwistcid,
			usr_cnv_id										= :new.usr_cnv_id,
			usr_ownrchndflag							= :new.usr_ownrchndflag,
			usr_ownrchndcnt						
		= :new.usr_ownrchndcnt,
			usr_sbtdat										= :new.usr_sbtdat,
			prv_pln_id										= :new.prv_pln_id,
			prv_upn_id										= :new.prv_upn_id,
			prv_fed_tax										= :new.prv_fed_tax,
			prv_totlpnts									= :new.prv_totlpnts,
			prv_totlpntsin_pctc						= :new.prv_totlpntsin_pctc,
			prv_totlpayrmems							= :new.prv_totlpayrmems,
			prv_totlpayrmemsin_pctc				= :new.prv_totlpayrmemsin_pctc,
			prv_acngnew_pnts							= :new.prv_acngnew_pnts,
			prv_athdfor_aumtdtmn					= :new.prv_athdfor_aumtdtmn,
			prv_inscid										= :new.prv_inscid,
			prv_splrtyp										= :new.prv_splrtyp
		where
			usr_audid = last_audid;
	/* LastActionTime has changed - new transaction in place */
	else
		/* insert new values introduced by new transaction */
		insert into a_usr (
			mbur_endangered,
			mbur_safeword,
			mbur_medicaid_recert_date,
			mbur_restricted_rcpnt_prgrm,
			prv_is_adm,
			prv_pcp_ind,
			prv_id,
			mbur_dt_of_dth,
			mbur_elbl,
			mbur_cob,
			mbur_cob_nam,
			mbur_inscid_at_othrinsr,
			mbur_pmryinsr,
			mbur_crdtind,
			mbur_inscid,
			mbur_medicaid,
			mbur_hicnid,
			mbur_mbi,
			mbur_scl_sctynmbr,
			mbur_cnftcnct,
			mbur_dnf_code,
			mbur_id,
			ff_id,
			payr_empeid,
			payr_scl_sctynmbr,
			payr_strtof_yr,
			payr_hreddt,
			payr_tmtddt,
			payr_thnkhlthstrtdt,
			payr_thnkhlthend_dt,
			payr_wkldlmitby_all_usr_rols,
			payr_wkldlmitby_pmryusr_role,
			payr_wkldlmitby,
			payr_wkldlmitfnaldcdr,
			payr_wkldlmitby_roleby_svty,
			payr_wkldlmitby_totlwkld,
			payr_wkldlmtdby_worktyp,
			payr_reg_dy_off_mon,
			payr_reg_dy_off_tues,
			payr_reg_dy_off_wed,
			payr_reg_dy_off_thrs,
			payr_reg_dy_off_fri,
			payr_reg_dy_off_sat,
			payr_reg_dy_off_sun,
			payr_svtyidx,
			payr_totlwkld,
			payr_caserqts,
			payr_cass,
			payr_um_rqts,
			payr_um_evts,
			payr_cm_prj_rqts,
			payr_cm_prjs,
			payr_revwrqts,
			payr_id,
			usr_las_dctdby,
			usr_frstatvdby,
			usr_las_atvdby,
			usr_ratnapvl,
			usr_rfngwkfwtsk,
			usr_prvsrfngtsk,
			usr_prvsrfng
tsk_prmn,
			usr_ownr,
			usr_prvsownr,
			usr_prvssndr,
			usr_prvsownrprmn,
			usr_tnfr,
			usr_prvstnfr,
			usr_sbtdby,
			mbur_rcpttrkg,
			mbur_las_revw,
			usr_cstmflds,
			prv_pcp_cat,
			prv_pvdrtyp,
			usr_ecty,
			usr_nam_sfix,
			usr_nam_prfx,
			mbur_rlspto_sbcr,
			payr_cstmwkldlmit,
			payr_actlwkld,
			usr_cnctinfo,
			usr_mrgemstr,
			prv_pvdrpayrdat,
			mbur_sbcr,
			payr_payrpayrdat,
			payr_bck1,
			payr_svsr,
			payr_bck2,
			payr_bck3,
			payr_rgnlsngs,
			payr_stcynoteprps,
			mbur_membpayrdat,
			usr_pmrylang,
			classtype,
			usr_c4c_id,
			usr_crtd,
			usr_las_act,
			usr_las_act_actrtyp,
			usr_obj_stt,
			usr_vers,
			usr_vsbt,
			usr_dltddt,
			usr_las_act_by,
			usr_origcrtr,
			usr_origcrtrlogdin,
			usr_las_act_by_logdin,
			usr_univid,
			usr_frstnam,
			usr_mdlenam,
			usr_las_nam,
			usr_dt_of_brth,
			usr_gndrcode,
			usr_frstatvd,
			usr_las_atvd,
			usr_las_dctd,
			usr_wkfwistcid,
			usr_cnv_id,
			usr_ownrchndflag,
			usr_ownrchndcnt,
			usr_sbtdat,
			prv_pln_id,
			prv_upn_id,
			prv_fed_tax,
			prv_totlpnts,
			prv_totlpntsin_pctc,
			prv_totlpayrmems,
			prv_totlpayrmemsin_pctc,
			prv_acngnew_pnts,
			prv_athdfor_aumtdtmn,
			prv_inscid,
			prv_splrtyp,
			usr_id,
			valid_from,
			valid_to,
			usr_audid,
			usr_prev_audid,
			usr_next_audid
		) values (
			:new.mbur_endangered,
			:new.mbur_safeword,
			:new.mbur_medicaid_recert_date,
			:new.mbur_restricted_rcpnt_prgrm,
			:new.prv_is_adm,
			:new.prv_pcp_ind,
			:new.prv_id,
			:new.mbur_dt_of_dth,
			:new.mbur_elbl,
			:new.mbur_cob,
			:new.mbur_cob_nam,
			:new.mbur_inscid_at_othrinsr,
			:new.mbur_pmryinsr,
			:new.mbur_crdtind,
			:new.mbur_inscid,
			:new.mbur_medicaid,
			:new.mbur_hicnid,
			:new.mbur_mbi,
			:new.mbur_scl_sctynmbr,
			:new.mbur_cnftcnct,
			:new.mbur_dnf_code,
			:new.mbur_id,
			:new.ff_id,
			:new.payr_empeid,
			:new.payr_scl_sctynmbr,
			:new.payr_strtof_yr,
			:new.payr_hreddt,
			:new.payr_tmtddt,
			:new.payr_thnkhlthstrtdt,
			:new.payr
_thnkhlthend_dt,
			:new.payr_wkldlmitby_all_usr_rols,
			:new.payr_wkldlmitby_pmryusr_role,
			:new.payr_wkldlmitby,
			:new.payr_wkldlmitfnaldcdr,
			:new.payr_wkldlmitby_roleby_svty,
			:new.payr_wkldlmitby_totlwkld,
			:new.payr_wkldlmtdby_worktyp,
			:new.payr_reg_dy_off_mon,
			:new.payr_reg_dy_off_tues,
			:new.payr_reg_dy_off_wed,
			:new.payr_reg_dy_off_thrs,
			:new.payr_reg_dy_off_fri,
			:new.payr_reg_dy_off_sat,
			:new.payr_reg_dy_off_sun,
			:new.payr_svtyidx,
			:new.payr_totlwkld,
			:new.payr_caserqts,
			:new.payr_cass,
			:new.payr_um_rqts,
			:new.payr_um_evts,
			:new.payr_cm_prj_rqts,
			:new.payr_cm_prjs,
			:new.payr_revwrqts,
			:new.payr_id,
			:new.usr_las_dctdby,
			:new.usr_frstatvdby,
			:new.usr_las_atvdby,
			:new.usr_ratnapvl,
			:new.usr_rfngwkfwtsk,
			:new.usr_prvsrfngtsk,
			:new.usr_prvsrfngtsk_prmn,
			:new.usr_ownr,
			:new.usr_prvsownr,
			:new.usr_prvssndr,
			:new.usr_prvsownrprmn,
			:new.usr_tnfr,
			:new.usr_prvstnfr,
			:new.usr_sbtdby,
			:new.mbur_rcpttrkg,
			:new.mbur_las_revw,
			:new.usr_cstmflds,
			:new.prv_pcp_cat,
			:new.prv_pvdrtyp,
			:new.usr_ecty,
			:new.usr_nam_sfix,
			:new.usr_nam_prfx,
			:new.mbur_rlspto_sbcr,
			:new.payr_cstmwkldlmit,
			:new.payr_actlwkld,
			:new.usr_cnctinfo,
			:new.usr_mrgemstr,
			:new.prv_pvdrpayrdat,
			:new.mbur_sbcr,
			:new.payr_payrpayrdat,
			:new.payr_bck1,
			:new.payr_svsr,
			:new.payr_bck2,
			:new.payr_bck3,
			:new.payr_rgnlsngs,
			:new.payr_stcynoteprps,
			:new.mbur_membpayrdat,
			:new.usr_pmrylang,
			:new.classtype,
			:new.usr_c4c_id,
			:new.usr_crtd,
			:new.usr_las_act,
			:new.usr_las_act_actrtyp,
			:new.usr_obj_stt,
			:new.usr_vers,
			:new.usr_vsbt,
			:new.usr_dltddt,
			:new.usr_las_act_by,
			:new.usr_origcrtr,
			:new.usr_origcrtrlogdin,
			:new.usr_las_act_by_logdin,
			:new.usr_univid,
			:new.usr_frstnam,
			:new.usr_mdlenam,
			:new.usr_las_nam,
			:new.usr_dt_of_brth,
			:new.usr_gndrcode,
			:new.usr_frstatvd,
			:new.usr_las_atvd,
			
:new.usr_las_dctd,
			:new.usr_wkfwistcid,
			:new.usr_cnv_id,
			:new.usr_ownrchndflag,
			:new.usr_ownrchndcnt,
			:new.usr_sbtdat,
			:new.prv_pln_id,
			:new.prv_upn_id,
			:new.prv_fed_tax,
			:new.prv_totlpnts,
			:new.prv_totlpntsin_pctc,
			:new.prv_totlpayrmems,
			:new.prv_totlpayrmemsin_pctc,
			:new.prv_acngnew_pnts,
			:new.prv_athdfor_aumtdtmn,
			:new.prv_inscid,
			:new.prv_splrtyp,
			:new.usr_id,
			:new.usr_las_act_tim,
			null,
			u_usr.nextval,
			last_audid,
			null
		);

		/* update last audit record valid_to to new LastActionTime	and next audit ID to newly inserted record sequence number */
		update a_usr
		set
			valid_to = :new.usr_las_act_tim,
			usr_next_audid = u_usr.currval
		where
			usr_audid = last_audid;
	end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
258
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_DACMEMBER
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>

      (NVL(new.USR_OBJ_STT,-1)  &lt;&gt; NVL(old.USR_OBJ_STT,-1)
      AND (new.USR_OBJ_STT       = 2
        OR old.USR_OBJ_STT       = 2) )
    OR NVL(new.USR_CNCTINFO,-1) &lt;&gt; NVL(old.USR_CNCTINFO,-1)
    OR NVL(new.USR_MRGEMSTR,-1) &lt;&gt; NVL(old.USR_MRGEMSTR,-1)
</td>
<td>
ENABLED
</td>
<td>
trg_usr_dacmember AFTER
    INSERT OR
    DELETE OR
    UPDATE OF USR_OBJ_STT,
              USR_CNCTINFO,
              USR_MRGEMSTR
    ON T_USR FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
	t_usr_NEW_rec t_usr%rowtype;
    t_usr_OLD_rec t_usr%rowtype;

BEGIN
  t_usr_NEW_rec.&quot;USR_FRSTATVD&quot;                 := :new.&quot;USR_FRSTATVD&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ATVD&quot;                 := :new.&quot;USR_LAS_ATVD&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_DCTD&quot;                 := :new.&quot;USR_LAS_DCTD&quot;;
  t_usr_NEW_rec.&quot;USR_WKFWISTCID&quot;               := :new.&quot;USR_WKFWISTCID&quot;;
  t_usr_NEW_rec.&quot;USR_CNV_ID&quot;                   := :new.&quot;USR_CNV_ID&quot;;
  t_usr_NEW_rec.&quot;USR_OWNRCHNDFLAG&quot;             := :new.&quot;USR_OWNRCHNDFLAG&quot;;
  t_usr_NEW_rec.&quot;USR_OWNRCHNDCNT&quot;              := :new.&quot;USR_OWNRCHNDCNT&quot;;
  t_usr_NEW_rec.&quot;USR_SBTDAT&quot;                   := :new.&quot;USR_SBTDAT&quot;;
  t_usr_NEW_rec.&quot;USR_ID&quot;                       := :new.&quot;USR_ID&quot;;
  t_usr_NEW_rec.&quot;PRV_PLN_ID&quot;                   := :new.&quot;PRV_PLN_ID&quot;;
  t_usr_NEW_rec.&quot;PRV_UPN_ID&quot;                   := :new.&quot;PRV_UPN_ID&quot;;
  t_usr_NEW_rec.&quot;PRV_FED_TAX&quot;                  := :new.&quot;PRV_FED_TAX&quot;;
  t_usr_NEW_rec.&quot;PRV_TOTLPNTS&quot;                 := :new.&quot;PRV_TOTLPNTS&quot;;
  t_usr_NEW_rec.&quot;PRV_TOTLPNTSIN_PCTC&quot;          := :new.&quot;PRV_TOTLPNTSIN_PCTC&quot;;
  t_usr_NEW_rec.&quot;PRV_TOTLPAYRMEMS&quot;             := :new.&quot;PRV_TOTLPAYRMEMS&quot;;
  t_usr_NEW_rec.&quot;PRV_TOTLPAYRMEMSIN_PCTC&quot;      := :new.&quot;PRV_TOTLPAYRMEMSIN_PCTC&quot;;
  t_usr_NEW_rec.&quot;PRV_ACNGNEW_PNTS&quot;             := :new.&quot;PRV_ACNGNEW_PNTS&quot;;
  t_usr_NEW_rec.&quot;PRV_ATHDFOR_AUMTDTMN&quot;         := :new.&quot;PRV_ATHDFOR_AUMTDTMN&quot;;
  t_usr_NEW_rec.&quot;PRV_INSCID&quot;                   := :new.&quot;PRV_INSCID&quot;;
  t_usr_NEW_rec.&quot;PRV_IS_ADM&quot;                   := :new.&quot;PRV_IS_ADM&quot;;
  t_usr_NEW_rec.&quot;PRV_PCP_IND&quot;                  := :new.&quot;PRV_PCP_IND&quot;;
  t_usr_NEW_rec.&quot;PRV_ID&quot;                       := :new.&quot;PRV_ID&quot;;
  t_usr_NEW_rec.&quot;MBUR_DT_OF_DTH&quot;               := :new.&quot;MBUR_DT_OF_DTH&quot;;
  t_usr_NEW_rec.&quot;MBUR_ELBL&quot;                    := :new.&quot;MBUR_ELBL&quot;;
  t_usr_NEW_rec.&quot;MBUR_COB&quot;                     := :new.&quot;MBUR_COB&quot;;
  t_usr_NEW_rec.&quot;MBUR_COB_NAM&quot;                 := :new.&quot;MBUR_COB_NAM&quot;;
  t_usr_NEW_rec.&quot;MBUR_INSCID_AT_OTHRINSR&quot;      := :new.&quot;MBUR_INS
CID_AT_OTHRINSR&quot;;
  t_usr_NEW_rec.&quot;MBUR_PMRYINSR&quot;                := :new.&quot;MBUR_PMRYINSR&quot;;
  t_usr_NEW_rec.&quot;MBUR_CRDTIND&quot;                 := :new.&quot;MBUR_CRDTIND&quot;;
  t_usr_NEW_rec.&quot;MBUR_INSCID&quot;                  := :new.&quot;MBUR_INSCID&quot;;
  t_usr_NEW_rec.&quot;MBUR_SCL_SCTYNMBR&quot;            := :new.&quot;MBUR_SCL_SCTYNMBR&quot;;
  t_usr_NEW_rec.&quot;MBUR_CNFTCNCT&quot;                := :new.&quot;MBUR_CNFTCNCT&quot;;
  t_usr_NEW_rec.&quot;MBUR_DNF_CODE&quot;                := :new.&quot;MBUR_DNF_CODE&quot;;
  t_usr_NEW_rec.&quot;MBUR_ID&quot;                      := :new.&quot;MBUR_ID&quot;;
  t_usr_NEW_rec.&quot;FF_ID&quot;                        := :new.&quot;FF_ID&quot;;
  t_usr_NEW_rec.&quot;PAYR_EMPEID&quot;                  := :new.&quot;PAYR_EMPEID&quot;;
  t_usr_NEW_rec.&quot;PAYR_SCL_SCTYNMBR&quot;            := :new.&quot;PAYR_SCL_SCTYNMBR&quot;;
  t_usr_NEW_rec.&quot;PAYR_STRTOF_YR&quot;               := :new.&quot;PAYR_STRTOF_YR&quot;;
  t_usr_NEW_rec.&quot;PAYR_HREDDT&quot;                  := :new.&quot;PAYR_HREDDT&quot;;
  t_usr_NEW_rec.&quot;PAYR_TMTDDT&quot;                  := :new.&quot;PAYR_TMTDDT&quot;;
  t_usr_NEW_rec.&quot;PAYR_THNKHLTHSTRTDT&quot;          := :new.&quot;PAYR_THNKHLTHSTRTDT&quot;;
  t_usr_NEW_rec.&quot;PAYR_THNKHLTHEND_DT&quot;          := :new.&quot;PAYR_THNKHLTHEND_DT&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITBY_ALL_USR_ROLS&quot; := :new.&quot;PAYR_WKLDLMITBY_ALL_USR_ROLS&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITBY_PMRYUSR_ROLE&quot; := :new.&quot;PAYR_WKLDLMITBY_PMRYUSR_ROLE&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITBY&quot;              := :new.&quot;PAYR_WKLDLMITBY&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITFNALDCDR&quot;        := :new.&quot;PAYR_WKLDLMITFNALDCDR&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITBY_ROLEBY_SVTY&quot;  := :new.&quot;PAYR_WKLDLMITBY_ROLEBY_SVTY&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMITBY_TOTLWKLD&quot;     := :new.&quot;PAYR_WKLDLMITBY_TOTLWKLD&quot;;
  t_usr_NEW_rec.&quot;PAYR_WKLDLMTDBY_WORKTYP&quot;      := :new.&quot;PAYR_WKLDLMTDBY_WORKTYP&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_MON&quot;          := :new.&quot;PAYR_REG_DY_OFF_MON&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_TUES&quot;         := :new.&quot;PAYR_REG_DY_OFF_TUES&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_WED&quot;          := :new.&quot;PAYR_REG_DY_OFF_WED&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_THRS&quot;         := :new.&quot;PAYR_REG_DY_OFF_THRS&quot;;
  t_usr_NEW
_rec.&quot;PAYR_REG_DY_OFF_FRI&quot;          := :new.&quot;PAYR_REG_DY_OFF_FRI&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_SAT&quot;          := :new.&quot;PAYR_REG_DY_OFF_SAT&quot;;
  t_usr_NEW_rec.&quot;PAYR_REG_DY_OFF_SUN&quot;          := :new.&quot;PAYR_REG_DY_OFF_SUN&quot;;
  t_usr_NEW_rec.&quot;PAYR_SVTYIDX&quot;                 := :new.&quot;PAYR_SVTYIDX&quot;;
  t_usr_NEW_rec.&quot;PAYR_TOTLWKLD&quot;                := :new.&quot;PAYR_TOTLWKLD&quot;;
  t_usr_NEW_rec.&quot;PAYR_CASERQTS&quot;                := :new.&quot;PAYR_CASERQTS&quot;;
  t_usr_NEW_rec.&quot;PAYR_CASS&quot;                    := :new.&quot;PAYR_CASS&quot;;
  t_usr_NEW_rec.&quot;PAYR_UM_RQTS&quot;                 := :new.&quot;PAYR_UM_RQTS&quot;;
  t_usr_NEW_rec.&quot;PAYR_UM_EVTS&quot;                 := :new.&quot;PAYR_UM_EVTS&quot;;
  t_usr_NEW_rec.&quot;PAYR_CM_PRJ_RQTS&quot;             := :new.&quot;PAYR_CM_PRJ_RQTS&quot;;
  t_usr_NEW_rec.&quot;PAYR_CM_PRJS&quot;                 := :new.&quot;PAYR_CM_PRJS&quot;;
  t_usr_NEW_rec.&quot;PAYR_REVWRQTS&quot;                := :new.&quot;PAYR_REVWRQTS&quot;;
  t_usr_NEW_rec.&quot;PAYR_ID&quot;                      := :new.&quot;PAYR_ID&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_DCTDBY&quot;               := :new.&quot;USR_LAS_DCTDBY&quot;;
  t_usr_NEW_rec.&quot;USR_FRSTATVDBY&quot;               := :new.&quot;USR_FRSTATVDBY&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ATVDBY&quot;               := :new.&quot;USR_LAS_ATVDBY&quot;;
  t_usr_NEW_rec.&quot;USR_RATNAPVL&quot;                 := :new.&quot;USR_RATNAPVL&quot;;
  t_usr_NEW_rec.&quot;USR_RFNGWKFWTSK&quot;              := :new.&quot;USR_RFNGWKFWTSK&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSRFNGTSK&quot;              := :new.&quot;USR_PRVSRFNGTSK&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSRFNGTSK_PRMN&quot;         := :new.&quot;USR_PRVSRFNGTSK_PRMN&quot;;
  t_usr_NEW_rec.&quot;USR_OWNR&quot;                     := :new.&quot;USR_OWNR&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSOWNR&quot;                 := :new.&quot;USR_PRVSOWNR&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSSNDR&quot;                 := :new.&quot;USR_PRVSSNDR&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSOWNRPRMN&quot;             := :new.&quot;USR_PRVSOWNRPRMN&quot;;
  t_usr_NEW_rec.&quot;USR_TNFR&quot;                     := :new.&quot;USR_TNFR&quot;;
  t_usr_NEW_rec.&quot;USR_PRVSTNFR&quot;                 := :new.&quot;USR_PRVSTNFR&quot;;
  t_usr_NEW_rec.&quot;USR_SBTDBY&quot;                   := :new.&quot;USR_SBTDBY&quot;;
  t_usr_NEW_rec.&quot;MBUR_RCPTTRKG&quot;                := :new.&quot;MBUR
_RCPTTRKG&quot;;
  t_usr_NEW_rec.&quot;MBUR_LAS_REVW&quot;                := :new.&quot;MBUR_LAS_REVW&quot;;
  t_usr_NEW_rec.&quot;PRV_PCP_CAT&quot;                  := :new.&quot;PRV_PCP_CAT&quot;;
  t_usr_NEW_rec.&quot;PRV_PVDRTYP&quot;                  := :new.&quot;PRV_PVDRTYP&quot;;
  t_usr_NEW_rec.&quot;PRV_SPLRTYP&quot;                  := :new.&quot;PRV_SPLRTYP&quot;;
  t_usr_NEW_rec.&quot;USR_ECTY&quot;                     := :new.&quot;USR_ECTY&quot;;
  t_usr_NEW_rec.&quot;USR_NAM_SFIX&quot;                 := :new.&quot;USR_NAM_SFIX&quot;;
  t_usr_NEW_rec.&quot;USR_NAM_PRFX&quot;                 := :new.&quot;USR_NAM_PRFX&quot;;
  t_usr_NEW_rec.&quot;MBUR_RLSPTO_SBCR&quot;             := :new.&quot;MBUR_RLSPTO_SBCR&quot;;
  t_usr_NEW_rec.&quot;PAYR_CSTMWKLDLMIT&quot;            := :new.&quot;PAYR_CSTMWKLDLMIT&quot;;
  t_usr_NEW_rec.&quot;PAYR_ACTLWKLD&quot;                := :new.&quot;PAYR_ACTLWKLD&quot;;
  t_usr_NEW_rec.&quot;USR_CNCTINFO&quot;                 := :new.&quot;USR_CNCTINFO&quot;;
  t_usr_NEW_rec.&quot;USR_MRGEMSTR&quot;                 := :new.&quot;USR_MRGEMSTR&quot;;
  t_usr_NEW_rec.&quot;PRV_PVDRPAYRDAT&quot;              := :new.&quot;PRV_PVDRPAYRDAT&quot;;
  t_usr_NEW_rec.&quot;MBUR_SBCR&quot;                    := :new.&quot;MBUR_SBCR&quot;;
  t_usr_NEW_rec.&quot;PAYR_PAYRPAYRDAT&quot;             := :new.&quot;PAYR_PAYRPAYRDAT&quot;;
  t_usr_NEW_rec.&quot;PAYR_BCK1&quot;                    := :new.&quot;PAYR_BCK1&quot;;
  t_usr_NEW_rec.&quot;PAYR_SVSR&quot;                    := :new.&quot;PAYR_SVSR&quot;;
  t_usr_NEW_rec.&quot;PAYR_BCK2&quot;                    := :new.&quot;PAYR_BCK2&quot;;
  t_usr_NEW_rec.&quot;PAYR_BCK3&quot;                    := :new.&quot;PAYR_BCK3&quot;;
  t_usr_NEW_rec.&quot;PAYR_RGNLSNGS&quot;                := :new.&quot;PAYR_RGNLSNGS&quot;;
  t_usr_NEW_rec.&quot;PAYR_STCYNOTEPRPS&quot;            := :new.&quot;PAYR_STCYNOTEPRPS&quot;;
  t_usr_NEW_rec.&quot;MBUR_MEMBPAYRDAT&quot;             := :new.&quot;MBUR_MEMBPAYRDAT&quot;;
  t_usr_NEW_rec.&quot;CLASSTYPE&quot;                    := :new.&quot;CLASSTYPE&quot;;
  t_usr_NEW_rec.&quot;USR_C4C_ID&quot;                   := :new.&quot;USR_C4C_ID&quot;;
  t_usr_NEW_rec.&quot;USR_CRTD&quot;                     := :new.&quot;USR_CRTD&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ACT&quot;                  := :new.&quot;USR_LAS_ACT&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ACT_ACTRTYP&quot;          := :new.&quot;USR_LAS_ACT_ACTRTYP&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ACT_TIM&quot;              := :new.&quot;USR_LAS_ACT_
TIM&quot;;
  t_usr_NEW_rec.&quot;USR_OBJ_STT&quot;                  := :new.&quot;USR_OBJ_STT&quot;;
  t_usr_NEW_rec.&quot;USR_VERS&quot;                     := :new.&quot;USR_VERS&quot;;
  t_usr_NEW_rec.&quot;USR_VSBT&quot;                     := :new.&quot;USR_VSBT&quot;;
  t_usr_NEW_rec.&quot;USR_DLTDDT&quot;                   := :new.&quot;USR_DLTDDT&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ACT_BY&quot;               := :new.&quot;USR_LAS_ACT_BY&quot;;
  t_usr_NEW_rec.&quot;USR_ORIGCRTR&quot;                 := :new.&quot;USR_ORIGCRTR&quot;;
  t_usr_NEW_rec.&quot;USR_ORIGCRTRLOGDIN&quot;           := :new.&quot;USR_ORIGCRTRLOGDIN&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_ACT_BY_LOGDIN&quot;        := :new.&quot;USR_LAS_ACT_BY_LOGDIN&quot;;
  t_usr_NEW_rec.&quot;USR_UNIVID&quot;                   := :new.&quot;USR_UNIVID&quot;;
  t_usr_NEW_rec.&quot;USR_FRSTNAM&quot;                  := :new.&quot;USR_FRSTNAM&quot;;
  t_usr_NEW_rec.&quot;USR_MDLENAM&quot;                  := :new.&quot;USR_MDLENAM&quot;;
  t_usr_NEW_rec.&quot;USR_LAS_NAM&quot;                  := :new.&quot;USR_LAS_NAM&quot;;
  t_usr_NEW_rec.&quot;USR_DT_OF_BRTH&quot;               := :new.&quot;USR_DT_OF_BRTH&quot;;
  t_usr_NEW_rec.&quot;USR_GNDRCODE&quot;                 := :new.&quot;USR_GNDRCODE&quot;;
  t_usr_NEW_rec.&quot;USR_PMRYLANG&quot;                 := :new.&quot;USR_PMRYLANG&quot;;
  t_usr_NEW_rec.&quot;MBUR_MEDICAID&quot;                := :new.&quot;MBUR_MEDICAID&quot;;
  t_usr_NEW_rec.&quot;MBUR_HICNID&quot;                  := :new.&quot;MBUR_HICNID&quot;;
  t_usr_OLD_rec.&quot;USR_FRSTATVD&quot;                 := :old.&quot;USR_FRSTATVD&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ATVD&quot;                 := :old.&quot;USR_LAS_ATVD&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_DCTD&quot;                 := :old.&quot;USR_LAS_DCTD&quot;;
  t_usr_OLD_rec.&quot;USR_WKFWISTCID&quot;               := :old.&quot;USR_WKFWISTCID&quot;;
  t_usr_OLD_rec.&quot;USR_CNV_ID&quot;                   := :old.&quot;USR_CNV_ID&quot;;
  t_usr_OLD_rec.&quot;USR_OWNRCHNDFLAG&quot;             := :old.&quot;USR_OWNRCHNDFLAG&quot;;
  t_usr_OLD_rec.&quot;USR_OWNRCHNDCNT&quot;              := :old.&quot;USR_OWNRCHNDCNT&quot;;
  t_usr_OLD_rec.&quot;USR_SBTDAT&quot;                   := :old.&quot;USR_SBTDAT&quot;;
  t_usr_OLD_rec.&quot;USR_ID&quot;                       := :old.&quot;USR_ID&quot;;
  t_usr_OLD_rec.&quot;PRV_PLN_ID&quot;                   := :old.&quot;PRV_PLN_ID&quot;;
  t_usr_OLD_rec.&quot;PRV_UPN_ID&quot;                   := :old.&quot;PRV_UPN_ID&quot;;
  t_usr_
OLD_rec.&quot;PRV_FED_TAX&quot;                  := :old.&quot;PRV_FED_TAX&quot;;
  t_usr_OLD_rec.&quot;PRV_TOTLPNTS&quot;                 := :old.&quot;PRV_TOTLPNTS&quot;;
  t_usr_OLD_rec.&quot;PRV_TOTLPNTSIN_PCTC&quot;          := :old.&quot;PRV_TOTLPNTSIN_PCTC&quot;;
  t_usr_OLD_rec.&quot;PRV_TOTLPAYRMEMS&quot;             := :old.&quot;PRV_TOTLPAYRMEMS&quot;;
  t_usr_OLD_rec.&quot;PRV_TOTLPAYRMEMSIN_PCTC&quot;      := :old.&quot;PRV_TOTLPAYRMEMSIN_PCTC&quot;;
  t_usr_OLD_rec.&quot;PRV_ACNGNEW_PNTS&quot;             := :old.&quot;PRV_ACNGNEW_PNTS&quot;;
  t_usr_OLD_rec.&quot;PRV_ATHDFOR_AUMTDTMN&quot;         := :old.&quot;PRV_ATHDFOR_AUMTDTMN&quot;;
  t_usr_OLD_rec.&quot;PRV_INSCID&quot;                   := :old.&quot;PRV_INSCID&quot;;
  t_usr_OLD_rec.&quot;PRV_IS_ADM&quot;                   := :old.&quot;PRV_IS_ADM&quot;;
  t_usr_OLD_rec.&quot;PRV_PCP_IND&quot;                  := :old.&quot;PRV_PCP_IND&quot;;
  t_usr_OLD_rec.&quot;PRV_ID&quot;                       := :old.&quot;PRV_ID&quot;;
  t_usr_OLD_rec.&quot;MBUR_DT_OF_DTH&quot;               := :old.&quot;MBUR_DT_OF_DTH&quot;;
  t_usr_OLD_rec.&quot;MBUR_ELBL&quot;                    := :old.&quot;MBUR_ELBL&quot;;
  t_usr_OLD_rec.&quot;MBUR_COB&quot;                     := :old.&quot;MBUR_COB&quot;;
  t_usr_OLD_rec.&quot;MBUR_COB_NAM&quot;                 := :old.&quot;MBUR_COB_NAM&quot;;
  t_usr_OLD_rec.&quot;MBUR_INSCID_AT_OTHRINSR&quot;      := :old.&quot;MBUR_INSCID_AT_OTHRINSR&quot;;
  t_usr_OLD_rec.&quot;MBUR_PMRYINSR&quot;                := :old.&quot;MBUR_PMRYINSR&quot;;
  t_usr_OLD_rec.&quot;MBUR_CRDTIND&quot;                 := :old.&quot;MBUR_CRDTIND&quot;;
  t_usr_OLD_rec.&quot;MBUR_INSCID&quot;                  := :old.&quot;MBUR_INSCID&quot;;
  t_usr_OLD_rec.&quot;MBUR_SCL_SCTYNMBR&quot;            := :old.&quot;MBUR_SCL_SCTYNMBR&quot;;
  t_usr_OLD_rec.&quot;MBUR_CNFTCNCT&quot;                := :old.&quot;MBUR_CNFTCNCT&quot;;
  t_usr_OLD_rec.&quot;MBUR_DNF_CODE&quot;                := :old.&quot;MBUR_DNF_CODE&quot;;
  t_usr_OLD_rec.&quot;MBUR_ID&quot;                      := :old.&quot;MBUR_ID&quot;;
  t_usr_OLD_rec.&quot;FF_ID&quot;                        := :old.&quot;FF_ID&quot;;
  t_usr_OLD_rec.&quot;PAYR_EMPEID&quot;                  := :old.&quot;PAYR_EMPEID&quot;;
  t_usr_OLD_rec.&quot;PAYR_SCL_SCTYNMBR&quot;            := :old.&quot;PAYR_SCL_SCTYNMBR&quot;;
  t_usr_OLD_rec.&quot;PAYR_STRTOF_YR&quot;               := :old.&quot;PAYR_STRTOF_YR&quot;;
  t_usr_OLD_rec.&quot;PAYR_HREDDT&quot;                  := :old.&quot;PAYR_H
REDDT&quot;;
  t_usr_OLD_rec.&quot;PAYR_TMTDDT&quot;                  := :old.&quot;PAYR_TMTDDT&quot;;
  t_usr_OLD_rec.&quot;PAYR_THNKHLTHSTRTDT&quot;          := :old.&quot;PAYR_THNKHLTHSTRTDT&quot;;
  t_usr_OLD_rec.&quot;PAYR_THNKHLTHEND_DT&quot;          := :old.&quot;PAYR_THNKHLTHEND_DT&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITBY_ALL_USR_ROLS&quot; := :old.&quot;PAYR_WKLDLMITBY_ALL_USR_ROLS&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITBY_PMRYUSR_ROLE&quot; := :old.&quot;PAYR_WKLDLMITBY_PMRYUSR_ROLE&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITBY&quot;              := :old.&quot;PAYR_WKLDLMITBY&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITFNALDCDR&quot;        := :old.&quot;PAYR_WKLDLMITFNALDCDR&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITBY_ROLEBY_SVTY&quot;  := :old.&quot;PAYR_WKLDLMITBY_ROLEBY_SVTY&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMITBY_TOTLWKLD&quot;     := :old.&quot;PAYR_WKLDLMITBY_TOTLWKLD&quot;;
  t_usr_OLD_rec.&quot;PAYR_WKLDLMTDBY_WORKTYP&quot;      := :old.&quot;PAYR_WKLDLMTDBY_WORKTYP&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_MON&quot;          := :old.&quot;PAYR_REG_DY_OFF_MON&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_TUES&quot;         := :old.&quot;PAYR_REG_DY_OFF_TUES&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_WED&quot;          := :old.&quot;PAYR_REG_DY_OFF_WED&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_THRS&quot;         := :old.&quot;PAYR_REG_DY_OFF_THRS&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_FRI&quot;          := :old.&quot;PAYR_REG_DY_OFF_FRI&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_SAT&quot;          := :old.&quot;PAYR_REG_DY_OFF_SAT&quot;;
  t_usr_OLD_rec.&quot;PAYR_REG_DY_OFF_SUN&quot;          := :old.&quot;PAYR_REG_DY_OFF_SUN&quot;;
  t_usr_OLD_rec.&quot;PAYR_SVTYIDX&quot;                 := :old.&quot;PAYR_SVTYIDX&quot;;
  t_usr_OLD_rec.&quot;PAYR_TOTLWKLD&quot;                := :old.&quot;PAYR_TOTLWKLD&quot;;
  t_usr_OLD_rec.&quot;PAYR_CASERQTS&quot;                := :old.&quot;PAYR_CASERQTS&quot;;
  t_usr_OLD_rec.&quot;PAYR_CASS&quot;                    := :old.&quot;PAYR_CASS&quot;;
  t_usr_OLD_rec.&quot;PAYR_UM_RQTS&quot;                 := :old.&quot;PAYR_UM_RQTS&quot;;
  t_usr_OLD_rec.&quot;PAYR_UM_EVTS&quot;                 := :old.&quot;PAYR_UM_EVTS&quot;;
  t_usr_OLD_rec.&quot;PAYR_CM_PRJ_RQTS&quot;             := :old.&quot;PAYR_CM_PRJ_RQTS&quot;;
  t_usr_OLD_rec.&quot;PAYR_CM_PRJS&quot;                 := :old.&quot;PAYR_CM_PRJS&quot;;
  t_usr_OLD_rec.&quot;PAYR_REVWRQTS&quot;                := :old.&quot;PAYR_REVWRQT
S&quot;;
  t_usr_OLD_rec.&quot;PAYR_ID&quot;                      := :old.&quot;PAYR_ID&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_DCTDBY&quot;               := :old.&quot;USR_LAS_DCTDBY&quot;;
  t_usr_OLD_rec.&quot;USR_FRSTATVDBY&quot;               := :old.&quot;USR_FRSTATVDBY&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ATVDBY&quot;               := :old.&quot;USR_LAS_ATVDBY&quot;;
  t_usr_OLD_rec.&quot;USR_RATNAPVL&quot;                 := :old.&quot;USR_RATNAPVL&quot;;
  t_usr_OLD_rec.&quot;USR_RFNGWKFWTSK&quot;              := :old.&quot;USR_RFNGWKFWTSK&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSRFNGTSK&quot;              := :old.&quot;USR_PRVSRFNGTSK&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSRFNGTSK_PRMN&quot;         := :old.&quot;USR_PRVSRFNGTSK_PRMN&quot;;
  t_usr_OLD_rec.&quot;USR_OWNR&quot;                     := :old.&quot;USR_OWNR&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSOWNR&quot;                 := :old.&quot;USR_PRVSOWNR&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSSNDR&quot;                 := :old.&quot;USR_PRVSSNDR&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSOWNRPRMN&quot;             := :old.&quot;USR_PRVSOWNRPRMN&quot;;
  t_usr_OLD_rec.&quot;USR_TNFR&quot;                     := :old.&quot;USR_TNFR&quot;;
  t_usr_OLD_rec.&quot;USR_PRVSTNFR&quot;                 := :old.&quot;USR_PRVSTNFR&quot;;
  t_usr_OLD_rec.&quot;USR_SBTDBY&quot;                   := :old.&quot;USR_SBTDBY&quot;;
  t_usr_OLD_rec.&quot;MBUR_RCPTTRKG&quot;                := :old.&quot;MBUR_RCPTTRKG&quot;;
  t_usr_OLD_rec.&quot;MBUR_LAS_REVW&quot;                := :old.&quot;MBUR_LAS_REVW&quot;;
  t_usr_OLD_rec.&quot;PRV_PCP_CAT&quot;                  := :old.&quot;PRV_PCP_CAT&quot;;
  t_usr_OLD_rec.&quot;PRV_PVDRTYP&quot;                  := :old.&quot;PRV_PVDRTYP&quot;;
  t_usr_NEW_rec.&quot;PRV_SPLRTYP&quot;                  := :new.&quot;PRV_SPLRTYP&quot;;
  t_usr_OLD_rec.&quot;USR_ECTY&quot;                     := :old.&quot;USR_ECTY&quot;;
  t_usr_OLD_rec.&quot;USR_NAM_SFIX&quot;                 := :old.&quot;USR_NAM_SFIX&quot;;
  t_usr_OLD_rec.&quot;USR_NAM_PRFX&quot;                 := :old.&quot;USR_NAM_PRFX&quot;;
  t_usr_OLD_rec.&quot;MBUR_RLSPTO_SBCR&quot;             := :old.&quot;MBUR_RLSPTO_SBCR&quot;;
  t_usr_OLD_rec.&quot;PAYR_CSTMWKLDLMIT&quot;            := :old.&quot;PAYR_CSTMWKLDLMIT&quot;;
  t_usr_OLD_rec.&quot;PAYR_ACTLWKLD&quot;                := :old.&quot;PAYR_ACTLWKLD&quot;;
  t_usr_OLD_rec.&quot;USR_CNCTINFO&quot;                 := :old.&quot;USR_CNCTINFO&quot;;
  t_usr_OLD_rec.&quot;USR_MRGEMSTR&quot;                 := :old.&quot;USR_MRGEM
STR&quot;;
  t_usr_OLD_rec.&quot;PRV_PVDRPAYRDAT&quot;              := :old.&quot;PRV_PVDRPAYRDAT&quot;;
  t_usr_OLD_rec.&quot;MBUR_SBCR&quot;                    := :old.&quot;MBUR_SBCR&quot;;
  t_usr_OLD_rec.&quot;PAYR_PAYRPAYRDAT&quot;             := :old.&quot;PAYR_PAYRPAYRDAT&quot;;
  t_usr_OLD_rec.&quot;PAYR_BCK1&quot;                    := :old.&quot;PAYR_BCK1&quot;;
  t_usr_OLD_rec.&quot;PAYR_SVSR&quot;                    := :old.&quot;PAYR_SVSR&quot;;
  t_usr_OLD_rec.&quot;PAYR_BCK2&quot;                    := :old.&quot;PAYR_BCK2&quot;;
  t_usr_OLD_rec.&quot;PAYR_BCK3&quot;                    := :old.&quot;PAYR_BCK3&quot;;
  t_usr_OLD_rec.&quot;PAYR_RGNLSNGS&quot;                := :old.&quot;PAYR_RGNLSNGS&quot;;
  t_usr_OLD_rec.&quot;PAYR_STCYNOTEPRPS&quot;            := :old.&quot;PAYR_STCYNOTEPRPS&quot;;
  t_usr_OLD_rec.&quot;MBUR_MEMBPAYRDAT&quot;             := :old.&quot;MBUR_MEMBPAYRDAT&quot;;
  t_usr_OLD_rec.&quot;CLASSTYPE&quot;                    := :old.&quot;CLASSTYPE&quot;;
  t_usr_OLD_rec.&quot;USR_C4C_ID&quot;                   := :old.&quot;USR_C4C_ID&quot;;
  t_usr_OLD_rec.&quot;USR_CRTD&quot;                     := :old.&quot;USR_CRTD&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ACT&quot;                  := :old.&quot;USR_LAS_ACT&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ACT_ACTRTYP&quot;          := :old.&quot;USR_LAS_ACT_ACTRTYP&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ACT_TIM&quot;              := :old.&quot;USR_LAS_ACT_TIM&quot;;
  t_usr_OLD_rec.&quot;USR_OBJ_STT&quot;                  := :old.&quot;USR_OBJ_STT&quot;;
  t_usr_OLD_rec.&quot;USR_VERS&quot;                     := :old.&quot;USR_VERS&quot;;
  t_usr_OLD_rec.&quot;USR_VSBT&quot;                     := :old.&quot;USR_VSBT&quot;;
  t_usr_OLD_rec.&quot;USR_DLTDDT&quot;                   := :old.&quot;USR_DLTDDT&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ACT_BY&quot;               := :old.&quot;USR_LAS_ACT_BY&quot;;
  t_usr_OLD_rec.&quot;USR_ORIGCRTR&quot;                 := :old.&quot;USR_ORIGCRTR&quot;;
  t_usr_OLD_rec.&quot;USR_ORIGCRTRLOGDIN&quot;           := :old.&quot;USR_ORIGCRTRLOGDIN&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_ACT_BY_LOGDIN&quot;        := :old.&quot;USR_LAS_ACT_BY_LOGDIN&quot;;
  t_usr_OLD_rec.&quot;USR_UNIVID&quot;                   := :old.&quot;USR_UNIVID&quot;;
  t_usr_OLD_rec.&quot;USR_FRSTNAM&quot;                  := :old.&quot;USR_FRSTNAM&quot;;
  t_usr_OLD_rec.&quot;USR_MDLENAM&quot;                  := :old.&quot;USR_MDLENAM&quot;;
  t_usr_OLD_rec.&quot;USR_LAS_NAM&quot;                  := :old.&quot;USR_LAS_NAM&quot;;
  t
_usr_OLD_rec.&quot;USR_DT_OF_BRTH&quot;               := :old.&quot;USR_DT_OF_BRTH&quot;;
  t_usr_OLD_rec.&quot;USR_GNDRCODE&quot;                 := :old.&quot;USR_GNDRCODE&quot;;
  t_usr_OLD_rec.&quot;USR_PMRYLANG&quot;                 := :old.&quot;USR_PMRYLANG&quot;;
  t_usr_OLD_rec.&quot;MBUR_MEDICAID&quot;                := :old.&quot;MBUR_MEDICAID&quot;;
  t_usr_OLD_rec.&quot;MBUR_HICNID&quot;                  := :old.&quot;MBUR_HICNID&quot;;
  pkg_dac_aggr.RowProcessForUSR(t_usr_OLD_rec,t_usr_NEW_rec);
END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
259
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_TZBUFFER
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_usr_tzbuffer before insert or update on t_usr
for each row

</td>
<td>
PL/SQL
</td>
<td>
begin
  if :new.usr_dt_of_brth is not null then
    :new.usr_dt_of_brth := trunc(:new.usr_dt_of_brth) + 12/24;
  end if;
  if :new.mbur_dt_of_dth is not null then
    :new.mbur_dt_of_dth := trunc(:new.mbur_dt_of_dth) + 12/24;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
260
</td>
<td>
THH_C4C
</td>
<td>
TRG_UBIO_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_BIOS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UBIO_AUDITINSERT&quot; BEFORE INSERT ON T_USR_BIOS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.ubio_crtd IS NULL THEN 
    :new.ubio_crtd := curr_date; 
  END IF; 

  IF :new.ubio_las_act_tim IS NULL THEN 
    :new.ubio_las_act_tim := curr_date; 
  END IF; 

  IF :new.ubio_las_act IS NULL THEN 
    :new.ubio_las_act := 1; 
  END IF; 

  IF :new.ubio_obj_stt IS NULL THEN 
    :new.ubio_obj_stt := 1; 
  END IF; 

  IF :new.ubio_vers IS NULL THEN 
    :new.ubio_vers := 0; 
  END IF; 

  IF :new.ubio_vsbt IS NULL THEN 
    :new.ubio_vsbt := 1001; 
  END IF; 

  IF :new.ubio_las_act_by IS NULL THEN 
    :new.ubio_las_act_by := 1; 
  END IF; 

  IF :new.ubio_origcrtr IS NULL THEN 
    :new.ubio_origcrtr := 1; 
  END IF; 

  IF :new.ubio_origcrtrlogdin IS NULL THEN 
    :new.ubio_origcrtrlogdin := 1; 
  END IF; 

  IF :new.ubio_las_act_by_logdin IS NULL THEN 
    :new.ubio_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_usr_bios 
  ( 
   classtype, 
   ubio_c4c_id, 
   ubio_crtd, 
   ubio_las_act, 
   ubio_las_act_actrtyp, 
   ubio_obj_stt, 
   ubio_vers, 
   ubio_vsbt, 
   ubio_dltddt, 
   ubio_las_act_by, 
   ubio_origcrtr, 
   ubio_origcrtrlogdin, 
   ubio_las_act_by_logdin, 
   ubio_univid, 
   ubio_actlval, 
   ubio_msredt_tim, 
   ubio_err_cmmt, 
   ubio_typ_sbty, 
   ubio_inp_by, 
   ubio_memb, 
   ubio_id, 
   valid_from, 
   valid_to , 
   ubio_audid, 
   ubio_prev_audid, 
   ubio_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.ubio_c4c_id,
   :new.ubio_crtd,
   :new.ubio_las_act,
   :new.ubio_las_act_actrtyp,
   :new.ubio_obj_stt,
   :new.ubio_vers,
   :new.ubio_vsbt,
   :new.ubio_dltddt,
   :new.ubio_las_act_by,
   :new.ubio_origcrtr,
   :new.ubio_origcrtrlogdin,
   :new.ubio_las_act_by_logdin,
   :new.ubio_univid,
   :new.ubio_actlval,
   :new.ubio_msredt_tim,
   :new.ubio_err_cmmt,
   :new.ubio_typ_sbty,
   :new.ubio_inp_by,
   :new.ubio_memb, 
   :new.ubio_id, 
   :new.ubio_las_act_tim, 
   NULL, 
   u_usr_bios.NEXTVAL, 
   NULL, 
   NULL

 );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
261
</td>
<td>
THH_C4C
</td>
<td>
TRG_UBIO_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_BIOS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ubio_auditupdate BEFORE
  UPDATE
    ON T_USR_BIOS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ubio_audid
      INTO
        last_audid
      FROM
        a_usr_bios
      WHERE
        ubio_id            = :old.ubio_id
      AND ubio_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ubio_las_act_tim = :new.ubio_las_act_tim THEN
      UPDATE
        a_usr_bios
      SET
        classtype              = :new.classtype,
        ubio_c4c_id            = :new.ubio_c4c_id,
        ubio_crtd              = :new.ubio_crtd,
        ubio_las_act           = :new.ubio_las_act,
        ubio_las_act_actrtyp   = :new.ubio_las_act_actrtyp,
        ubio_obj_stt           = :new.ubio_obj_stt,
        ubio_vers              = :new.ubio_vers,
        ubio_vsbt              = :new.ubio_vsbt,
        ubio_dltddt            = :new.ubio_dltddt,
        ubio_las_act_by        = :new.ubio_las_act_by,
        ubio_origcrtr          = :new.ubio_origcrtr,
        ubio_origcrtrlogdin    = :new.ubio_origcrtrlogdin,
        ubio_las_act_by_logdin = :new.ubio_las_act_by_logdin,
        ubio_univid            = :new.ubio_univid,
        ubio_actlval           = :new.ubio_actlval,
        ubio_msredt_tim        = :new.ubio_msredt_tim,
        ubio_err_cmmt          = :new.ubio_err_cmmt,
        ubio_typ_sbty          = :new.ubio_typ_sbty,
        ubio_inp_by            = :new.ubio_inp_by,
        ubio_memb              = :new.ubio_memb
      WHERE
        ubio_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_usr_bios
        (
          classtype,
          ubio_c4c_id,
          ubio_crtd,
          ubio_las_act,
          ubio_las_act_actrtyp,

      ubio_obj_stt,
          ubio_vers,
          ubio_vsbt,
          ubio_dltddt,
          ubio_las_act_by,
          ubio_origcrtr,
          ubio_origcrtrlogdin,
          ubio_las_act_by_logdin,
          ubio_univid,
          ubio_actlval,
          ubio_msredt_tim,
          ubio_err_cmmt,
          ubio_typ_sbty,
          ubio_inp_by,
          ubio_memb,
          ubio_id,
          valid_from,
          valid_to,
          ubio_audid,
          ubio_prev_audid,
          ubio_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ubio_c4c_id,
          :new.ubio_crtd,
          :new.ubio_las_act,
          :new.ubio_las_act_actrtyp,
          :new.ubio_obj_stt,
          :new.ubio_vers,
          :new.ubio_vsbt,
          :new.ubio_dltddt,
          :new.ubio_las_act_by,
          :new.ubio_origcrtr,
          :new.ubio_origcrtrlogdin,
          :new.ubio_las_act_by_logdin,
          :new.ubio_univid,
          :new.ubio_actlval,
          :new.ubio_msredt_tim,
          :new.ubio_err_cmmt,
          :new.ubio_typ_sbty,
          :new.ubio_inp_by,
          :new.ubio_memb,
          :new.ubio_id,
          :new.ubio_las_act_tim,
          NULL,
          u_usr_bios.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_usr_bios
      SET
        valid_to        = :new.ubio_las_act_tim,
        ubio_next_audid = u_usr_bios.CURRVAL
      WHERE
        ubio_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
262
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCTI_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_CNCTINFO
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ucti_auditinsert before insert on t_usr_cnctinfo
for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
    /* save current date */
    curr_date date;
  begin
    curr_date := current_date;

    if :new.ucti_crtd is null then
      :new.ucti_crtd := curr_date;
    end if;

    if :new.ucti_las_act_tim is null then
      :new.ucti_las_act_tim := curr_date;
    end if;

    if :new.ucti_las_act is null then
      :new.ucti_las_act := 1;
    end if;

    if :new.ucti_obj_stt is null then
      :new.ucti_obj_stt := 1;
    end if;

    if :new.ucti_vers is null then
      :new.ucti_vers := 0;
    end if;

    if :new.ucti_vsbt is null then
      :new.ucti_vsbt := 1001;
    end if;

    if :new.ucti_las_act_by is null then
      :new.ucti_las_act_by := 1;
    end if;

    if :new.ucti_origcrtr is null then
      :new.ucti_origcrtr := 1;
    end if;

    if :new.ucti_origcrtrlogdin is null then
      :new.ucti_origcrtrlogdin := 1;
    end if;

    if :new.ucti_las_act_by_logdin is null then
      :new.ucti_las_act_by_logdin := 1;
    end if;

    insert into a_usr_cnctinfo (
      classtype,
      ucti_c4c_id,
      ucti_crtd,
      ucti_las_act,
      ucti_las_act_actrtyp,
      ucti_obj_stt,
      ucti_vers,
      ucti_vsbt,
      ucti_dltddt,
      ucti_las_act_by,
      ucti_origcrtr,
      ucti_origcrtrlogdin,
      ucti_las_act_by_logdin,
      ucti_univid,
      ucti_cllrphne,
      ucti_pagr,
      ucti_emcyphne,
      ucti_emaladd1,
      ucti_emaladd2,
      ucti_wbst,
      ucti_offchors,
      ucti_cnctmthd,
      ucti_prfsemal,
      ucti_prfsphne,
      ucti_prfsmail,
      ucti_payrdat,
      ucti_biz_add,
      ucti_hom_add,
      ucti_emaladd3,
      ucti_emaladd4,
      ucti_id,
      valid_from,
      valid_to,
      ucti_audid,
      ucti_prev_audid,
      ucti_next_audid,
      do_not_contact,
      ucti_conf_email,
      ucti_conf_addr
    )
    values (
      :new.classtype,
      :new.ucti_c4c_id,
      :new.ucti_crtd,
      :new.ucti_las_act,
      :new.ucti_las_act_actrtyp,
      :new.ucti_obj_stt,
      :new.ucti_vers,
      :new.ucti_vsbt
,
      :new.ucti_dltddt,
      :new.ucti_las_act_by,
      :new.ucti_origcrtr,
      :new.ucti_origcrtrlogdin,
      :new.ucti_las_act_by_logdin,
      :new.ucti_univid,
      :new.ucti_cllrphne,
      :new.ucti_pagr,
      :new.ucti_emcyphne,
      :new.ucti_emaladd1,
      :new.ucti_emaladd2,
      :new.ucti_wbst,
      :new.ucti_offchors,
      :new.ucti_cnctmthd,
      :new.ucti_prfsemal,
      :new.ucti_prfsphne,
      :new.ucti_prfsmail,
      :new.ucti_payrdat,
      :new.ucti_biz_add,
      :new.ucti_hom_add,
      :new.ucti_emaladd3,
      :new.ucti_emaladd4,
      :new.ucti_id,
      :new.ucti_las_act_tim,
      null,
      u_usr_cnctinfo.nextval,
      null,
      null,
      :new.do_not_contact,
      :new.ucti_conf_email,
      :new.ucti_conf_addr
    );
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
263
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCTI_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_CNCTINFO
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ucti_auditupdate before update on t_usr_cnctinfo
for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
    /* last audit ID of record */
    last_audid number;
  begin
    /* retrieve last audit ID of record */
    begin
      select
        ucti_audid
      into
        last_audid
      from
        a_usr_cnctinfo
      where
        ucti_id            = :old.ucti_id
      and ucti_next_audid is null
      and rownum           &lt; 2 for update;
    exception
    when no_data_found then
      last_audid := null;
    end;
    /* LastActionTime has not changed - no new transaction */
    if :old.ucti_las_act_tim = :new.ucti_las_act_tim then
      update
        a_usr_cnctinfo
      set
        classtype              = :new.classtype,
        ucti_c4c_id            = :new.ucti_c4c_id,
        ucti_crtd              = :new.ucti_crtd,
        ucti_las_act           = :new.ucti_las_act,
        ucti_las_act_actrtyp   = :new.ucti_las_act_actrtyp,
        ucti_obj_stt           = :new.ucti_obj_stt,
        ucti_vers              = :new.ucti_vers,
        ucti_vsbt              = :new.ucti_vsbt,
        ucti_dltddt            = :new.ucti_dltddt,
        ucti_las_act_by        = :new.ucti_las_act_by,
        ucti_origcrtr          = :new.ucti_origcrtr,
        ucti_origcrtrlogdin    = :new.ucti_origcrtrlogdin,
        ucti_las_act_by_logdin = :new.ucti_las_act_by_logdin,
        ucti_univid            = :new.ucti_univid,
        ucti_cllrphne          = :new.ucti_cllrphne,
        ucti_pagr              = :new.ucti_pagr,
        ucti_emcyphne          = :new.ucti_emcyphne,
        ucti_emaladd1          = :new.ucti_emaladd1,
        ucti_emaladd2          = :new.ucti_emaladd2,
        ucti_wbst              = :new.ucti_wbst,
        ucti_offchors          = :new.ucti_offchors,
        ucti_cnctmthd          = :new.ucti_cnctmthd,
        ucti_prfsemal          = :new.ucti_prfsemal,
        ucti_prfsphne          = :new.ucti_prfsphne,
        ucti_prfsmail          = :new.ucti_prfsmail,
        ucti_payrdat           = :new.ucti_payrdat,
        ucti_biz_add           = :n
ew.ucti_biz_add,
        ucti_hom_add           = :new.ucti_hom_add,
        ucti_emaladd3          = :new.ucti_emaladd3,
        ucti_emaladd4          = :new.ucti_emaladd4,
        do_not_contact         = :new.do_not_contact,
        ucti_conf_email        = :new.ucti_conf_email,
        ucti_conf_addr         = :new.ucti_conf_addr
      where
        ucti_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    else
      /* insert new values introduced by new transaction */
      insert
      into
        a_usr_cnctinfo (
          classtype,
          ucti_c4c_id,
          ucti_crtd,
          ucti_las_act,
          ucti_las_act_actrtyp,
          ucti_obj_stt,
          ucti_vers,
          ucti_vsbt,
          ucti_dltddt,
          ucti_las_act_by,
          ucti_origcrtr,
          ucti_origcrtrlogdin,
          ucti_las_act_by_logdin,
          ucti_univid,
          ucti_cllrphne,
          ucti_pagr,
          ucti_emcyphne,
          ucti_emaladd1,
          ucti_emaladd2,
          ucti_wbst,
          ucti_offchors,
          ucti_cnctmthd,
          ucti_prfsemal,
          ucti_prfsphne,
          ucti_prfsmail,
          ucti_payrdat,
          ucti_biz_add,
          ucti_hom_add,
          ucti_emaladd3,
          ucti_emaladd4,
          ucti_id,
          valid_from,
          valid_to,
          ucti_audid,
          ucti_prev_audid,
          ucti_next_audid,
          do_not_contact,
          ucti_conf_email,
          ucti_conf_addr
        )
        values (
          :new.classtype,
          :new.ucti_c4c_id,
          :new.ucti_crtd,
          :new.ucti_las_act,
          :new.ucti_las_act_actrtyp,
          :new.ucti_obj_stt,
          :new.ucti_vers,
          :new.ucti_vsbt,
          :new.ucti_dltddt,
          :new.ucti_las_act_by,
          :new.ucti_origcrtr,
          :new.ucti_origcrtrlogdin,
          :new.ucti_las_act_by_logdin,
          :new.ucti_univid,
          :new.ucti_cllrphne,

       :new.ucti_pagr,
          :new.ucti_emcyphne,
          :new.ucti_emaladd1,
          :new.ucti_emaladd2,
          :new.ucti_wbst,
          :new.ucti_offchors,
          :new.ucti_cnctmthd,
          :new.ucti_prfsemal,
          :new.ucti_prfsphne,
          :new.ucti_prfsmail,
          :new.ucti_payrdat,
          :new.ucti_biz_add,
          :new.ucti_hom_add,
          :new.ucti_emaladd3,
          :new.ucti_emaladd4,
          :new.ucti_id,
          :new.ucti_las_act_tim,
          null,
          u_usr_cnctinfo.nextval,
          last_audid,
          null,
          :new.do_not_contact,
          :new.ucti_conf_email,
          :new.ucti_conf_addr
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      update
        a_usr_cnctinfo
      set
        valid_to        = :new.ucti_las_act_tim,
        ucti_next_audid = u_usr_cnctinfo.currval
      where
        ucti_audid = last_audid;
    end if;
  end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
264
</td>
<td>
THH_C4C
</td>
<td>
TRG_UCTI_DACMEMBER
</td>
<td>
AFTER EACH ROW
</td>
<td>
INSERT OR UPDATE OR DELETE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_CNCTINFO
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
 (nvl(new.UCTI_OBJ_STT,-1) &lt;&gt; nvl(old.UCTI_OBJ_STT,-1) and (new.UCTI_OBJ_STT =2 or old.UCTI_OBJ_STT=2) )
            or nvl(new.UCTI_BIZ_ADD,-1) &lt;&gt; nvl(old.UCTI_BIZ_ADD,-1)
            or nvl(new.UCTI_HOM_ADD,-1) &lt;&gt; nvl(old.UCTI_HOM_ADD,-1)
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_UCTI_DACMEMBER&quot; 
   AFTER INSERT OR DELETE OR UPDATE OF UCTI_OBJ_STT,UCTI_BIZ_ADD,UCTI_HOM_ADD
   ON t_usr_cnctinfo
   FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
declare
    t_usr_cnctinfo_NEW_rec t_usr_cnctinfo%rowtype;
    t_usr_cnctinfo_OLD_rec t_usr_cnctinfo%rowtype;
   begin
    t_usr_cnctinfo_NEW_rec.&quot;CLASSTYPE&quot; := :new.&quot;CLASSTYPE&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_C4C_ID&quot; := :new.&quot;UCTI_C4C_ID&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_CRTD&quot; := :new.&quot;UCTI_CRTD&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_LAS_ACT&quot; := :new.&quot;UCTI_LAS_ACT&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_LAS_ACT_ACTRTYP&quot; := :new.&quot;UCTI_LAS_ACT_ACTRTYP&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_LAS_ACT_TIM&quot; := :new.&quot;UCTI_LAS_ACT_TIM&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_OBJ_STT&quot; := :new.&quot;UCTI_OBJ_STT&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_VERS&quot; := :new.&quot;UCTI_VERS&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_VSBT&quot; := :new.&quot;UCTI_VSBT&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_DLTDDT&quot; := :new.&quot;UCTI_DLTDDT&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_LAS_ACT_BY&quot; := :new.&quot;UCTI_LAS_ACT_BY&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_ORIGCRTR&quot; := :new.&quot;UCTI_ORIGCRTR&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_ORIGCRTRLOGDIN&quot; := :new.&quot;UCTI_ORIGCRTRLOGDIN&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_LAS_ACT_BY_LOGDIN&quot; := :new.&quot;UCTI_LAS_ACT_BY_LOGDIN&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_UNIVID&quot; := :new.&quot;UCTI_UNIVID&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_CLLRPHNE&quot; := :new.&quot;UCTI_CLLRPHNE&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_PAGR&quot; := :new.&quot;UCTI_PAGR&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_EMCYPHNE&quot; := :new.&quot;UCTI_EMCYPHNE&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_EMALADD1&quot; := :new.&quot;UCTI_EMALADD1&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_EMALADD2&quot; := :new.&quot;UCTI_EMALADD2&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_WBST&quot; := :new.&quot;UCTI_WBST&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_OFFCHORS&quot; := :new.&quot;UCTI_OFFCHORS&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_ID&quot; := :new.&quot;UCTI_ID&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_CNCTMTHD&quot; := :new.&quot;UCTI_CNCTMTHD&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_PRFSEMAL&quot; := :new.&quot;UCTI_PRFSEMAL&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_PRFSPHNE&quot; := :new.&quot;UCTI_PRFSPHNE&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_PRFSMAIL&quot; := :new.&quot;UCTI_PRFSMAIL&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_PAYRDAT&quot; := :new.&quot;UCTI_PAYRDAT&quot;;

   t_usr_cnctinfo_NEW_rec.&quot;UCTI_BIZ_ADD&quot; := :new.&quot;UCTI_BIZ_ADD&quot;;
    t_usr_cnctinfo_NEW_rec.&quot;UCTI_HOM_ADD&quot; := :new.&quot;UCTI_HOM_ADD&quot;;

    t_usr_cnctinfo_OLD_rec.&quot;CLASSTYPE&quot; := :old.&quot;CLASSTYPE&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_C4C_ID&quot; := :old.&quot;UCTI_C4C_ID&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_CRTD&quot; := :old.&quot;UCTI_CRTD&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_LAS_ACT&quot; := :old.&quot;UCTI_LAS_ACT&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_LAS_ACT_ACTRTYP&quot; := :old.&quot;UCTI_LAS_ACT_ACTRTYP&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_LAS_ACT_TIM&quot; := :old.&quot;UCTI_LAS_ACT_TIM&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_OBJ_STT&quot; := :old.&quot;UCTI_OBJ_STT&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_VERS&quot; := :old.&quot;UCTI_VERS&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_VSBT&quot; := :old.&quot;UCTI_VSBT&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_DLTDDT&quot; := :old.&quot;UCTI_DLTDDT&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_LAS_ACT_BY&quot; := :old.&quot;UCTI_LAS_ACT_BY&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_ORIGCRTR&quot; := :old.&quot;UCTI_ORIGCRTR&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_ORIGCRTRLOGDIN&quot; := :old.&quot;UCTI_ORIGCRTRLOGDIN&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_LAS_ACT_BY_LOGDIN&quot; := :old.&quot;UCTI_LAS_ACT_BY_LOGDIN&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_UNIVID&quot; := :old.&quot;UCTI_UNIVID&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_CLLRPHNE&quot; := :old.&quot;UCTI_CLLRPHNE&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_PAGR&quot; := :old.&quot;UCTI_PAGR&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_EMCYPHNE&quot; := :old.&quot;UCTI_EMCYPHNE&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_EMALADD1&quot; := :old.&quot;UCTI_EMALADD1&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_EMALADD2&quot; := :old.&quot;UCTI_EMALADD2&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_WBST&quot; := :old.&quot;UCTI_WBST&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_OFFCHORS&quot; := :old.&quot;UCTI_OFFCHORS&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_ID&quot; := :old.&quot;UCTI_ID&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_CNCTMTHD&quot; := :old.&quot;UCTI_CNCTMTHD&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_PRFSEMAL&quot; := :old.&quot;UCTI_PRFSEMAL&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_PRFSPHNE&quot; := :old.&quot;UCTI_PRFSPHNE&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_PRFSMAIL&quot; := :old.&quot;UCTI_PRFSMAIL&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_PAYRDAT&quot; := :old.&quot;UCT
I_PAYRDAT&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_BIZ_ADD&quot; := :old.&quot;UCTI_BIZ_ADD&quot;;
    t_usr_cnctinfo_OLD_rec.&quot;UCTI_HOM_ADD&quot; := :old.&quot;UCTI_HOM_ADD&quot;;

    pkg_dac_aggr.RowProcessForUSR_CTI(t_usr_cnctinfo_OLD_rec,t_usr_cnctinfo_NEW_rec);
end;









</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
265
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_DEVICE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_DEVICE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_usr_device before insert or update on t_usr_device for each row

</td>
<td>
PL/SQL
</td>
<td>
declare
  /* save current date */
  curr_date date;
  /* last audit ID of record */
  last_audid number;
begin

  curr_date := current_date;
  if inserting then
    insert into a_usr_device
      (
      &quot;UDVC_ID&quot;,
      &quot;UDVC_USR_ID&quot;,
      &quot;UDVC_DEVICE_TOKEN&quot;,
      &quot;UDVC_DEVICE_OS&quot;,
      &quot;UDVC_DEVICE_HARDWARE&quot;,
      &quot;UDVC_APPLICATION&quot;,
      &quot;UDVC_APP_VERSION&quot;,
      &quot;UDVC_MESSAGE_PENDING&quot;,
      &quot;UDVC_DISABLED&quot;,
      &quot;CLASSTYPE&quot;,
      &quot;UDVC_CRTD&quot;,
      &quot;UDVC_LAS_ACT_TIM&quot;,
      &quot;UDVC_VERS&quot;,
      &quot;UDVC_LAS_ACT_BY&quot;,
      &quot;UDVC_ORIGCRTRLOGDIN&quot;,
      &quot;UDVC_LAS_ACT_BY_LOGDIN&quot;,
      &quot;UDVC_REGISTERED&quot;,
      &quot;VALID_FROM&quot;,
      &quot;VALID_TO&quot;,
      &quot;UDVC_AUDID&quot;,
      &quot;UDVC_PREV_AUDID&quot;,
      &quot;UDVC_NEXT_AUDID&quot;
      )
    values
      (
      :new.udvc_id,
      :new.udvc_usr_id,
      :new.udvc_device_token,
      :new.udvc_device_os,
      :new.udvc_device_hardware,
      :new.udvc_application,
      :new.udvc_app_version,
      :new.udvc_message_pending,
      :new.udvc_disabled,
      :new.classtype,
      :new.udvc_crtd,
      :new.udvc_las_act_tim,
      :new.udvc_vers,
      :new.udvc_las_act_by,
      :new.udvc_origcrtrlogdin,
      :new.udvc_las_act_by_logdin,
      :new.udvc_registered,
      :new.udvc_las_act_tim,
      null,
      u_usr_device.nextval,
      null,
      null
      );
  else
    begin
      select udvc_audid into last_audid
      from a_usr_device
      where udvc_id =  :old.udvc_id
      and
      udvc_next_audid is null
      for update;
      exception when no_data_found then last_audid := null;
    end;

    /* LastActionTime has not changed - no new transaction */
    if :old.udvc_las_act_tim = :new.udvc_las_act_tim then
      update a_usr_device
      set
        udvc_id                = :new.udvc_id,
        udvc_usr_id            = :new.udvc_usr_id,
        udvc_device_token      = :new.udvc_device_token,
        udvc_device_os         = :new.udvc_device_os,
        udvc_device_hardware	 = :new.udvc_device_hardware,
        udv
c_application       = :new.udvc_application,
        udvc_app_version       = :new.udvc_app_version,
        udvc_message_pending   = :new.udvc_message_pending,
        udvc_disabled          = :new.udvc_disabled,
        classtype              = :new.classtype,
        udvc_crtd              = :new.udvc_crtd,
        udvc_las_act_tim       = :new.udvc_las_act_tim,
        udvc_vers              = :new.udvc_vers,
        udvc_las_act_by        = :new.udvc_las_act_by,
        udvc_origcrtrlogdin    = :new.udvc_origcrtrlogdin,
        udvc_las_act_by_logdin = :new.udvc_las_act_by_logdin,
        udvc_registered        = :new.udvc_registered
      where udvc_audid = last_audid;

    /* LastActionTime has changed - new transaction in place */
    else
      /* insert new values introduced by new transaction */
      insert into a_usr_device
        (
        &quot;UDVC_ID&quot;,
        &quot;UDVC_USR_ID&quot;,
        &quot;UDVC_DEVICE_TOKEN&quot;,
        &quot;UDVC_DEVICE_OS&quot;,
        &quot;UDVC_DEVICE_HARDWARE&quot;,
        &quot;UDVC_APPLICATION&quot;,
        &quot;UDVC_APP_VERSION&quot;,
        &quot;UDVC_MESSAGE_PENDING&quot;,
        &quot;UDVC_DISABLED&quot;,
        &quot;CLASSTYPE&quot;,
        &quot;UDVC_CRTD&quot;,
        &quot;UDVC_LAS_ACT_TIM&quot;,
        &quot;UDVC_VERS&quot;,
        &quot;UDVC_LAS_ACT_BY&quot;,
        &quot;UDVC_ORIGCRTRLOGDIN&quot;,
        &quot;UDVC_LAS_ACT_BY_LOGDIN&quot;,
        &quot;UDVC_REGISTERED&quot;,
        valid_from,
        valid_to ,
        udvc_audid,
        udvc_prev_audid,
        udvc_next_audid
        )
        values
        (
        :new.udvc_id,
        :new.udvc_usr_id,
        :new.udvc_device_token,
        :new.udvc_device_os,
        :new.udvc_device_hardware,
        :new.udvc_application,
        :new.udvc_app_version,
        :new.udvc_message_pending,
        :new.udvc_disabled,
        :new.classtype,
        :new.udvc_crtd,
        :new.udvc_las_act_tim,
        :new.udvc_vers,
        :new.udvc_las_act_by,
        :new.udvc_origcrtrlogdin,
        :new.udvc_las_act_by_logdin,
        :new.udvc_registered,
        :new.udvc_las_act_tim,
         nul
l,
         u_usr_device.nextval,
         last_audid,
         null
         );

      /* update last audit record's valid_to to new LastActionTime
         and next audit ID to newly inserted record's sequence number
       */
      update a_usr_device set
        valid_to = :new.udvc_las_act_tim,
        udvc_next_audid = u_usr_device.currval
      where udvc_audid = last_audid;
    end if;
  end if;
end;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
266
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_GRANT_DGIS_XREF
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_GRANT_DGIS_XREF
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_USR_GRANT_DGIS_XREF BEFORE INSERT OR UPDATE ON T_USR_GRANT_DGIS_XREF FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
/* save current date */
    curr_date  DATE;
/* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    IF inserting
    THEN
      curr_date := current_date;
      IF :new.ugdx_crtd IS NULL
      THEN
        :new.ugdx_crtd := curr_date;
      END IF;
      IF :new.ugdx_las_act_tim IS NULL
      THEN
        :new.ugdx_las_act_tim := curr_date;
      END IF;
      IF :new.ugdx_obj_stt IS NULL
      THEN
        :new.ugdx_obj_stt := 1;
      END IF;
      IF :new.ugdx_vers IS NULL
      THEN
        :new.ugdx_vers := 0;
      END IF;
      IF :new.ugdx_origcrtr IS NULL
      THEN
        :new.ugdx_origcrtr := :new.ugdx_las_act_by;
      END IF;
      INSERT INTO A_USR_GRANT_DGIS_XREF
      (
        UGDX_UNIVID,
        UGDX_CRTD,
        UGDX_LAS_ACT_TIM,
        UGDX_OBJ_STT,
        UGDX_VERS,
        UGDX_DLTDT,
        UGDX_LAS_ACT_BY,
        UGDX_ORIGCRTR,
        UGDX_ORIGCRTRLOGDIN,
        UGDX_LAS_ACT_BY_LOGDIN,
        UGDX_USR_UNIVID,
        UGDX_USR_ID,
        UGDX_MEMBER_ID,
        UGDX_MEMBER_UNIVID,
        UGDX_DGIS_ID,

        valid_from,
        valid_to,
        ugdx_audid,
        ugdx_prev_audid,
        ugdx_next_audid
      )
      VALUES
        (
          :new.UGDX_UNIVID,
          :new.UGDX_CRTD,
          :new.UGDX_LAS_ACT_TIM,
          :new.UGDX_OBJ_STT,
          :new.UGDX_VERS,
          :new.UGDX_DLTDT,
          :new.UGDX_LAS_ACT_BY,
          :new.UGDX_ORIGCRTR,
          :new.UGDX_ORIGCRTRLOGDIN,
          :new.UGDX_LAS_ACT_BY_LOGDIN,
          :new.UGDX_USR_UNIVID,
          :new.UGDX_USR_ID,
          :new.UGDX_MEMBER_ID,
          :new.UGDX_MEMBER_UNIVID,
          :new.UGDX_DGIS_ID,

          curr_date,
          NULL,
          u_usrgrantxref.nextval,
          NULL,
          NULL
        );
    ELSE
      BEGIN
        SELECT
          ugdx_audid
        INTO last_audid
        FROM A_USR_GRANT_DGIS_XREF
        WHERE ugdx_member_id = :old.ugdx_member_id and ugdx_usr_id = :old.ugdx_usr_id and ugdx_dgis_
id = :old.ugdx_dgis_id
              AND
              ugdx_next_audid IS NULL
        FOR UPDATE;
        EXCEPTION WHEN no_data_found THEN last_audid := NULL;
      END;
/* LastActionTime has not changed - no new transaction */
      IF :old.ugdx_las_act_tim = :new.ugdx_las_act_tim
      THEN
        UPDATE A_USR_GRANT_DGIS_XREF
        SET

          UGDX_UNIVID            = :new.UGDX_univid,
          UGDX_CRTD              = :new.UGDX_CRTD,
          UGDX_LAS_ACT_TIM       = :new.UGDX_LAS_ACT_TIM,
          UGDX_OBJ_STT           = :new.UGDX_OBJ_STT,
          UGDX_VERS              = :new.UGDX_VERS,
          UGDX_DLTDT             = :new.UGDX_DLTDT,
          UGDX_LAS_ACT_BY        = :new.UGDX_LAS_ACT_BY,
          UGDX_ORIGCRTR          = :new.UGDX_ORIGCRTR,
          UGDX_ORIGCRTRLOGDIN    = :new.UGDX_ORIGCRTRLOGDIN,
          UGDX_LAS_ACT_BY_LOGDIN = :new.UGDX_LAS_ACT_BY_LOGDIN,
          UGDX_USR_UNIVID        = :new.UGDX_USR_UNIVID,
          UGDX_USR_ID            = :new.UGDX_USR_ID,
          UGDX_MEMBER_ID         = :new.UGDX_MEMBER_ID,
          UGDX_MEMBER_UNIVID     = :new.UGDX_MEMBER_UNIVID,
          UGDX_DGIS_ID           = :new.UGDX_DGIS_ID

        WHERE ugdx_audid = last_audid;
/* LastActionTime has changed - new transaction in place */
      ELSE
/* insert new values introduced by new transaction */
        INSERT INTO A_USR_GRANT_DGIS_XREF
        (
          UGDX_UNIVID,
          UGDX_CRTD,
          UGDX_LAS_ACT_TIM,
          UGDX_OBJ_STT,
          UGDX_VERS,
          UGDX_DLTDT,
          UGDX_LAS_ACT_BY,
          UGDX_ORIGCRTR,
          UGDX_ORIGCRTRLOGDIN,
          UGDX_LAS_ACT_BY_LOGDIN,
          UGDX_USR_UNIVID,
          UGDX_USR_ID,
          UGDX_MEMBER_ID,
          UGDX_MEMBER_UNIVID,
          UGDX_DGIS_ID,

          valid_from,
          valid_to,
          ugdx_audid,
          ugdx_prev_audid,
          ugdx_next_audid)
        VALUES
          (
            :new.UGDX_UNIVID,
            :new.UGDX_CRTD,

:new.UGDX_LAS_ACT_TIM,
            :new.UGDX_OBJ_STT,
            :new.UGDX_VERS,
            :new.UGDX_DLTDT,
            :new.UGDX_LAS_ACT_BY,
            :new.UGDX_ORIGCRTR,
            :new.UGDX_ORIGCRTRLOGDIN,
            :new.UGDX_LAS_ACT_BY_LOGDIN,
            :new.UGDX_USR_UNIVID,
            :new.UGDX_USR_ID,
            :new.UGDX_MEMBER_ID,
            :new.UGDX_MEMBER_UNIVID,
            :new.UGDX_DGIS_ID,

            curr_date,
            NULL,
            u_usrgrantxref.nextval,
            last_audid,
            NULL
          );
/* update last audit record's valid_to to new LastActionTime
   and next audit ID to newly inserted record's sequence number
 */
        UPDATE A_USR_GRANT_DGIS_XREF
        SET
          valid_to        = :new.ugdx_las_act_tim,
          ugdx_next_audid = u_usrgrantxref.currval
        WHERE ugdx_audid = last_audid;
      END IF;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
267
</td>
<td>
THH_C4C
</td>
<td>
TRG_USR_GRANT_RESTRICTED_XREF
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT OR UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_GRANT_RESTRICTED_XREF
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
TRG_USR_GRANT_RESTRICTED_XREF BEFORE INSERT OR UPDATE ON T_USR_GRANT_RESTRICTED_XREF FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
/* save current date */
    curr_date  DATE;
/* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    IF inserting
    THEN
      curr_date := current_date;
      IF :new.ugrx_crtd IS NULL
      THEN
        :new.ugrx_crtd := curr_date;
      END IF;
      IF :new.ugrx_las_act_tim IS NULL
      THEN
        :new.ugrx_las_act_tim := curr_date;
      END IF;
      IF :new.ugrx_obj_stt IS NULL
      THEN
        :new.ugrx_obj_stt := 1;
      END IF;
      IF :new.ugrx_vers IS NULL
      THEN
        :new.ugrx_vers := 0;
      END IF;
      IF :new.ugrx_origcrtr IS NULL
      THEN
        :new.ugrx_origcrtr := :new.ugrx_las_act_by;
      END IF;
      INSERT INTO A_USR_GRANT_RESTRICTED_XREF
      (
        UGRX_UNIVID,
        UGRX_CRTD,
        UGRX_LAS_ACT_TIM,
        UGRX_OBJ_STT,
        UGRX_VERS,
        UGRX_DLTDT,
        UGRX_LAS_ACT_BY,
        UGRX_ORIGCRTR,
        UGRX_ORIGCRTRLOGDIN,
        UGRX_LAS_ACT_BY_LOGDIN,
        UGRX_USR_UNIVID,
        UGRX_USR_ID,
        UGRX_MEMBER_ID,
        UGRX_MEMBER_UNIVID,
        UGRX_RESTR_ID,

        valid_from,
        valid_to,
        ugrx_audid,
        ugrx_prev_audid,
        ugrx_next_audid
      )
      VALUES
        (
          :new.UGRX_UNIVID,
          :new.UGRX_CRTD,
          :new.UGRX_LAS_ACT_TIM,
          :new.UGRX_OBJ_STT,
          :new.UGRX_VERS,
          :new.UGRX_DLTDT,
          :new.UGRX_LAS_ACT_BY,
          :new.UGRX_ORIGCRTR,
          :new.UGRX_ORIGCRTRLOGDIN,
          :new.UGRX_LAS_ACT_BY_LOGDIN,
          :new.UGRX_USR_UNIVID,
          :new.UGRX_USR_ID,
          :new.UGRX_MEMBER_ID,
          :new.UGRX_MEMBER_UNIVID,
          :new.UGRX_RESTR_ID,

          curr_date,
          NULL,
          u_usrgrantxref.nextval,
          NULL,
          NULL
        );
    ELSE
      BEGIN
        SELECT
          ugrx_audid
        INTO last_audid
        FROM A_USR_GRANT_RESTRICTED_XREF
        WHERE ugrx_member_id = :old.ugrx_member_id and ugrx_usr_id = :old.ugrx_usr_id
and ugrx_restr_id = :old.ugrx_restr_id
              AND
              ugrx_next_audid IS NULL
        FOR UPDATE;
        EXCEPTION WHEN no_data_found THEN last_audid := NULL;
      END;
/* LastActionTime has not changed - no new transaction */
      IF :old.ugrx_las_act_tim = :new.ugrx_las_act_tim
      THEN
        UPDATE A_USR_GRANT_RESTRICTED_XREF
        SET

          UGRX_UNIVID            = :new.ugrx_univid,
          UGRX_CRTD              = :new.UGRX_CRTD,
          UGRX_LAS_ACT_TIM       = :new.UGRX_LAS_ACT_TIM,
          UGRX_OBJ_STT           = :new.UGRX_OBJ_STT,
          UGRX_VERS              = :new.UGRX_VERS,
          UGRX_DLTDT             = :new.UGRX_DLTDT,
          UGRX_LAS_ACT_BY        = :new.UGRX_LAS_ACT_BY,
          UGRX_ORIGCRTR          = :new.UGRX_ORIGCRTR,
          UGRX_ORIGCRTRLOGDIN    = :new.UGRX_ORIGCRTRLOGDIN,
          UGRX_LAS_ACT_BY_LOGDIN = :new.UGRX_LAS_ACT_BY_LOGDIN,
          UGRX_USR_UNIVID        = :new.UGRX_USR_UNIVID,
          UGRX_USR_ID            = :new.UGRX_USR_ID,
          UGRX_MEMBER_ID         = :new.UGRX_MEMBER_ID,
          UGRX_MEMBER_UNIVID     = :new.UGRX_MEMBER_UNIVID,
          UGRX_RESTR_ID          = :new.UGRX_RESTR_ID

        WHERE ugrx_audid = last_audid;
/* LastActionTime has changed - new transaction in place */
      ELSE
/* insert new values introduced by new transaction */
        INSERT INTO A_USR_GRANT_RESTRICTED_XREF
        (
          UGRX_UNIVID,
          UGRX_CRTD,
          UGRX_LAS_ACT_TIM,
          UGRX_OBJ_STT,
          UGRX_VERS,
          UGRX_DLTDT,
          UGRX_LAS_ACT_BY,
          UGRX_ORIGCRTR,
          UGRX_ORIGCRTRLOGDIN,
          UGRX_LAS_ACT_BY_LOGDIN,
          UGRX_USR_UNIVID,
          UGRX_USR_ID,
          UGRX_MEMBER_ID,
          UGRX_MEMBER_UNIVID,
          UGRX_RESTR_ID,

          valid_from,
          valid_to,
          ugrx_audid,
          ugrx_prev_audid,
          ugrx_next_audid)
        VALUES
          (
            :new.UGRX_UNIVID,

  :new.UGRX_CRTD,
            :new.UGRX_LAS_ACT_TIM,
            :new.UGRX_OBJ_STT,
            :new.UGRX_VERS,
            :new.UGRX_DLTDT,
            :new.UGRX_LAS_ACT_BY,
            :new.UGRX_ORIGCRTR,
            :new.UGRX_ORIGCRTRLOGDIN,
            :new.UGRX_LAS_ACT_BY_LOGDIN,
            :new.UGRX_USR_UNIVID,
            :new.UGRX_USR_ID,
            :new.UGRX_MEMBER_ID,
            :new.UGRX_MEMBER_UNIVID,
            :new.UGRX_RESTR_ID,

            curr_date,
            NULL,
            u_usrgrantxref.nextval,
            last_audid,
            NULL
          );
/* update last audit record's valid_to to new LastActionTime
   and next audit ID to newly inserted record's sequence number
 */
        UPDATE A_USR_GRANT_RESTRICTED_XREF
        SET
          valid_to        = :new.ugrx_las_act_tim,
          ugrx_next_audid = u_usrgrantxref.currval
        WHERE ugrx_audid = last_audid;
      END IF;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
268
</td>
<td>
THH_C4C
</td>
<td>
TRG_ULGN_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_LOGN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
THH_C4C.TRG_ULGN_AUDITINSERT BEFORE INSERT ON T_USR_LOGN FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
   l_inscid   	VARCHAR2(4000);
   l_plan     	VARCHAR2(4000);
   l_classtype	VARCHAR2(4000);
   l_name 	VARCHAR2(4000);
   l_cnt	NUMBER := 0;
   l_usrid      NUMBER := 0;
BEGIN
  curr_date := current_date;

  IF :new.ulgn_crtd IS NULL THEN
    :new.ulgn_crtd := curr_date;
  END IF;

  IF :new.ulgn_las_act_tim IS NULL THEN
    :new.ulgn_las_act_tim := curr_date;
  END IF;

  IF :new.ulgn_las_act IS NULL THEN
    :new.ulgn_las_act := 1;
  END IF;

  IF :new.ulgn_obj_stt IS NULL THEN
    :new.ulgn_obj_stt := 1;
  END IF;

  IF :new.ulgn_vers IS NULL THEN
    :new.ulgn_vers := 0;
  END IF;

  IF :new.ulgn_vsbt IS NULL THEN
    :new.ulgn_vsbt := 1001;
  END IF;

  IF :new.ulgn_las_act_by IS NULL THEN
    :new.ulgn_las_act_by := 1;
  END IF;

  IF :new.ulgn_origcrtr IS NULL THEN
    :new.ulgn_origcrtr := 1;
  END IF;

  IF :new.ulgn_origcrtrlogdin IS NULL THEN
    :new.ulgn_origcrtrlogdin := 1;
  END IF;

  IF :new.ulgn_las_act_by_logdin IS NULL THEN
    :new.ulgn_las_act_by_logdin := 1;
  END IF;

--Proces only if ULGN_ID &gt; 1000000
IF :new.ulgn_id &gt; 1000000 THEN
 BEGIN

   l_name := lower(substr(:new.ulgn_usrm,1,1)||substr(:new.ulgn_usrm,instr(:new.ulgn_usrm,'.')+1));

   SELECT max(usr_id) INTO l_usrid FROM t_usr WHERE lower(substr(usr_frstnam,1,1)||usr_las_nam) = l_name;
   SELECT count(*) into l_cnt FROM t_usr WHERE lower(substr(usr_frstnam,1,1)||usr_las_nam) = l_name;
   SELECT classtype,mbur_inscid, prv_pln_id INTO l_classtype, l_inscid, l_plan FROM t_usr WHERE usr_id = l_usrid;

   IF l_classtype = 'MemberUser'
    THEN IF :new.ulgn_usrm != l_inscid THEN :new.ulgn_usrm := l_inscid; END IF;
   ELSIF l_classtype = 'Provider'
    THEN IF :new.ulgn_usrm != l_plan THEN :new.ulgn_usrm := l_plan; END IF;
    ELSE SELECT count(*) into l_cnt FROM t_usr
          WHERE lower(substr(usr_frstnam,1,1)||usr_las_nam) = l_name and classtype = 'Payer';
          IF l_classtype = 'Payer'
           THEN IF l_cnt IN (0,1)

      THEN :new.ulgn_usrm := l_name;
                ELSE :new.ulgn_usrm := l_name||to_char(l_cnt-1);
                END IF;
          END IF;
   END IF;

   EXCEPTION WHEN NO_DATA_FOUND THEN  NULL;
 END;
END IF;

  INSERT INTO a_usr_logn
  (
   ulgn_crtd,
   ulgn_las_act,
   ulgn_las_act_actrtyp,
   ulgn_obj_stt,
   ulgn_vers,
   ulgn_vsbt,
   ulgn_dltddt,
   ulgn_las_act_by,
   ulgn_origcrtr,
   ulgn_origcrtrlogdin,
   ulgn_las_act_by_logdin,
   ulgn_univid,
   ulgn_usrm,
   ulgn_pwd,
   ulgn_mrblphrsrspe,
   ulgn_lognatps,
   ulgn_pwd_hintatps,
   ulgn_enbd,
   ulgn_lckd,
   ulgn_las_ssfllogn,
   ulgn_las_pwd_cnge,
   ulgn_mrblphrschng,
   ulgn_usr,
   classtype,
   ulgn_c4c_id,
   ulgn_id,
   valid_from,
   valid_to ,
   ulgn_audid,
   ulgn_prev_audid,
   ulgn_next_audid
  )
  VALUES
  (
   :new.ulgn_crtd,
   :new.ulgn_las_act,
   :new.ulgn_las_act_actrtyp,
   :new.ulgn_obj_stt,
   :new.ulgn_vers,
   :new.ulgn_vsbt,
   :new.ulgn_dltddt,
   :new.ulgn_las_act_by,
   :new.ulgn_origcrtr,
   :new.ulgn_origcrtrlogdin,
   :new.ulgn_las_act_by_logdin,
   :new.ulgn_univid,
   :new.ulgn_usrm,
   :new.ulgn_pwd,
   :new.ulgn_mrblphrsrspe,
   :new.ulgn_lognatps,
   :new.ulgn_pwd_hintatps,
   :new.ulgn_enbd,
   :new.ulgn_lckd,
   :new.ulgn_las_ssfllogn,
   :new.ulgn_las_pwd_cnge,
   :new.ulgn_mrblphrschng,
   :new.ulgn_usr,
   :new.classtype,
   :new.ulgn_c4c_id,
   :new.ulgn_id,
   :new.ulgn_las_act_tim,
   NULL,
   u_usr_logn.NEXTVAL,
   NULL,
   NULL
  );
END;

</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
269
</td>
<td>
THH_C4C
</td>
<td>
TRG_ULGN_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_USR_LOGN
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_ulgn_auditupdate BEFORE
  UPDATE
    ON T_USR_LOGN FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        ulgn_audid
      INTO
        last_audid
      FROM
        a_usr_logn
      WHERE
        ulgn_id            = :old.ulgn_id
      AND ulgn_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.ulgn_las_act_tim = :new.ulgn_las_act_tim THEN
      UPDATE
        a_usr_logn
      SET
        classtype              = :new.classtype,
        ulgn_c4c_id            = :new.ulgn_c4c_id,
        ulgn_crtd              = :new.ulgn_crtd,
        ulgn_las_act           = :new.ulgn_las_act,
        ulgn_las_act_actrtyp   = :new.ulgn_las_act_actrtyp,
        ulgn_obj_stt           = :new.ulgn_obj_stt,
        ulgn_vers              = :new.ulgn_vers,
        ulgn_vsbt              = :new.ulgn_vsbt,
        ulgn_dltddt            = :new.ulgn_dltddt,
        ulgn_las_act_by        = :new.ulgn_las_act_by,
        ulgn_origcrtr          = :new.ulgn_origcrtr,
        ulgn_origcrtrlogdin    = :new.ulgn_origcrtrlogdin,
        ulgn_las_act_by_logdin = :new.ulgn_las_act_by_logdin,
        ulgn_univid            = :new.ulgn_univid,
        ulgn_usrm              = :new.ulgn_usrm,
        ulgn_pwd               = :new.ulgn_pwd,
        ulgn_mrblphrsrspe      = :new.ulgn_mrblphrsrspe,
        ulgn_lognatps          = :new.ulgn_lognatps,
        ulgn_pwd_hintatps      = :new.ulgn_pwd_hintatps,
        ulgn_enbd              = :new.ulgn_enbd,
        ulgn_lckd              = :new.ulgn_lckd,
        ulgn_las_ssfllogn      = :new.ulgn_las_ssfllogn,
        ulgn_las_pwd_cnge      = :new.ulgn_las_pwd_cnge,
        ulgn_ntlm              = :new.ulgn_ntlm,
        ulgn_mrblphrschng      = :new.ulgn_mrblphrschng,
        ulgn_usr               = :new.ulgn_usr
      WHERE
        ulgn_audid = last_aud
id;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_usr_logn
        (
          classtype,
          ulgn_c4c_id,
          ulgn_crtd,
          ulgn_las_act,
          ulgn_las_act_actrtyp,
          ulgn_obj_stt,
          ulgn_vers,
          ulgn_vsbt,
          ulgn_dltddt,
          ulgn_las_act_by,
          ulgn_origcrtr,
          ulgn_origcrtrlogdin,
          ulgn_las_act_by_logdin,
          ulgn_univid,
          ulgn_usrm,
          ulgn_pwd,
          ulgn_mrblphrsrspe,
          ulgn_lognatps,
          ulgn_pwd_hintatps,
          ulgn_enbd,
          ulgn_lckd,
          ulgn_las_ssfllogn,
          ulgn_las_pwd_cnge,
          ulgn_ntlm,
          ulgn_mrblphrschng,
          ulgn_usr,
          ulgn_id,
          valid_from,
          valid_to,
          ulgn_audid,
          ulgn_prev_audid,
          ulgn_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.ulgn_c4c_id,
          :new.ulgn_crtd,
          :new.ulgn_las_act,
          :new.ulgn_las_act_actrtyp,
          :new.ulgn_obj_stt,
          :new.ulgn_vers,
          :new.ulgn_vsbt,
          :new.ulgn_dltddt,
          :new.ulgn_las_act_by,
          :new.ulgn_origcrtr,
          :new.ulgn_origcrtrlogdin,
          :new.ulgn_las_act_by_logdin,
          :new.ulgn_univid,
          :new.ulgn_usrm,
          :new.ulgn_pwd,
          :new.ulgn_mrblphrsrspe,
          :new.ulgn_lognatps,
          :new.ulgn_pwd_hintatps,
          :new.ulgn_enbd,
          :new.ulgn_lckd,
          :new.ulgn_las_ssfllogn,
          :new.ulgn_las_pwd_cnge,
          :new.ulgn_ntlm,
          :new.ulgn_mrblphrschng,
          :new.ulgn_usr,
          :new.ulgn_id,
          :new.ulgn_las_act_tim,
          NULL,
          u_usr_logn.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime

     and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_usr_logn
      SET
        valid_to        = :new.ulgn_las_act_tim,
        ulgn_next_audid = u_usr_logn.CURRVAL
      WHERE
        ulgn_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
270
</td>
<td>
THH_C4C
</td>
<td>
TRG_WTSK_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_WKFWTSK
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_WTSK_AUDITINSERT&quot; BEFORE INSERT ON T_WKFWTSK FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.wtsk_crtd IS NULL THEN 
    :new.wtsk_crtd := curr_date; 
  END IF; 

  IF :new.wtsk_las_act_tim IS NULL THEN 
    :new.wtsk_las_act_tim := curr_date; 
  END IF; 

  IF :new.wtsk_las_act IS NULL THEN 
    :new.wtsk_las_act := 1; 
  END IF; 

  IF :new.wtsk_obj_stt IS NULL THEN 
    :new.wtsk_obj_stt := 1; 
  END IF; 

  IF :new.wtsk_vers IS NULL THEN 
    :new.wtsk_vers := 0; 
  END IF; 

  IF :new.wtsk_vsbt IS NULL THEN 
    :new.wtsk_vsbt := 1001; 
  END IF; 

  IF :new.wtsk_las_act_by IS NULL THEN 
    :new.wtsk_las_act_by := 1; 
  END IF; 

  IF :new.wtsk_origcrtr IS NULL THEN 
    :new.wtsk_origcrtr := 1; 
  END IF; 

  IF :new.wtsk_origcrtrlogdin IS NULL THEN 
    :new.wtsk_origcrtrlogdin := 1; 
  END IF; 

  IF :new.wtsk_las_act_by_logdin IS NULL THEN 
    :new.wtsk_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_wkfwtsk 
  ( 
   classtype, 
   wtsk_c4c_id, 
   wtsk_crtd, 
   wtsk_las_act, 
   wtsk_las_act_actrtyp, 
   wtsk_obj_stt, 
   wtsk_vers, 
   wtsk_vsbt, 
   wtsk_dltddt, 
   wtsk_las_act_by, 
   wtsk_origcrtr, 
   wtsk_origcrtrlogdin, 
   wtsk_las_act_by_logdin, 
   wtsk_univid, 
   wtsk_wkfwtsk_typ, 
   wtsk_tsk_nam, 
   wtsk_tsk_dscn, 
   wtsk_rfrdobj_id, 
   wtsk_rfrdobj_typ, 
   wtsk_wkfwistcid, 
   wtsk_cnv_id, 
   wtsk_ddln_dt, 
   wtsk_ddln_tim_in_dy, 
   wtsk_ddlnact, 
   wtsk_currstt, 
   wtsk_tsk_grp, 
   wtsk_tnfr, 
   wtsk_prvstnfr, 
   wtsk_id, 
   valid_from, 
   valid_to , 
   wtsk_audid, 
   wtsk_prev_audid, 
   wtsk_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.wtsk_c4c_id,
   :new.wtsk_crtd,
   :new.wtsk_las_act,
   :new.wtsk_las_act_actrtyp,
   :new.wtsk_obj_stt,
   :new.wtsk_vers,
   :new.wtsk_vsbt,
   :new.wtsk_dltddt,
   :new.wtsk_las_act_by,
   :new.wtsk_origcrtr,
   :new.wtsk_origcrtrlogdin,
   :new.wtsk_las_act_by_logdin,
   :new.wtsk_univid,
   :new.wtsk_wkfwtsk_typ,
   :new.wtsk_tsk_nam,
   :new.wtsk_tsk_dscn,

   :new.wtsk_rfrdobj_id,
   :new.wtsk_rfrdobj_typ,
   :new.wtsk_wkfwistcid,
   :new.wtsk_cnv_id,
   :new.wtsk_ddln_dt,
   :new.wtsk_ddln_tim_in_dy,
   :new.wtsk_ddlnact,
   :new.wtsk_currstt,
   :new.wtsk_tsk_grp,
   :new.wtsk_tnfr,
   :new.wtsk_prvstnfr, 
   :new.wtsk_id, 
   :new.wtsk_las_act_tim, 
   NULL, 
   u_wkfwtsk.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
271
</td>
<td>
THH_C4C
</td>
<td>
TRG_WTSK_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_WKFWTSK
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_wtsk_auditupdate BEFORE
  UPDATE
    ON T_WKFWTSK FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        wtsk_audid
      INTO
        last_audid
      FROM
        a_wkfwtsk
      WHERE
        wtsk_id            = :old.wtsk_id
      AND wtsk_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.wtsk_las_act_tim = :new.wtsk_las_act_tim THEN
      UPDATE
        a_wkfwtsk
      SET
        classtype              = :new.classtype,
        wtsk_c4c_id            = :new.wtsk_c4c_id,
        wtsk_crtd              = :new.wtsk_crtd,
        wtsk_las_act           = :new.wtsk_las_act,
        wtsk_las_act_actrtyp   = :new.wtsk_las_act_actrtyp,
        wtsk_obj_stt           = :new.wtsk_obj_stt,
        wtsk_vers              = :new.wtsk_vers,
        wtsk_vsbt              = :new.wtsk_vsbt,
        wtsk_dltddt            = :new.wtsk_dltddt,
        wtsk_las_act_by        = :new.wtsk_las_act_by,
        wtsk_origcrtr          = :new.wtsk_origcrtr,
        wtsk_origcrtrlogdin    = :new.wtsk_origcrtrlogdin,
        wtsk_las_act_by_logdin = :new.wtsk_las_act_by_logdin,
        wtsk_univid            = :new.wtsk_univid,
        wtsk_wkfwtsk_typ       = :new.wtsk_wkfwtsk_typ,
        wtsk_tsk_nam           = :new.wtsk_tsk_nam,
        wtsk_tsk_dscn          = :new.wtsk_tsk_dscn,
        wtsk_rfrdobj_id        = :new.wtsk_rfrdobj_id,
        wtsk_rfrdobj_typ       = :new.wtsk_rfrdobj_typ,
        wtsk_wkfwistcid        = :new.wtsk_wkfwistcid,
        wtsk_cnv_id            = :new.wtsk_cnv_id,
        wtsk_ddln_dt           = :new.wtsk_ddln_dt,
        wtsk_ddln_tim_in_dy    = :new.wtsk_ddln_tim_in_dy,
        wtsk_ddlnact           = :new.wtsk_ddlnact,
        wtsk_currstt           = :new.wtsk_currstt,
        wtsk_tsk_grp           = :new.wtsk_tsk_grp,
        wtsk_tnfr
    = :new.wtsk_tnfr,
        wtsk_prvstnfr          = :new.wtsk_prvstnfr
      WHERE
        wtsk_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_wkfwtsk
        (
          classtype,
          wtsk_c4c_id,
          wtsk_crtd,
          wtsk_las_act,
          wtsk_las_act_actrtyp,
          wtsk_obj_stt,
          wtsk_vers,
          wtsk_vsbt,
          wtsk_dltddt,
          wtsk_las_act_by,
          wtsk_origcrtr,
          wtsk_origcrtrlogdin,
          wtsk_las_act_by_logdin,
          wtsk_univid,
          wtsk_wkfwtsk_typ,
          wtsk_tsk_nam,
          wtsk_tsk_dscn,
          wtsk_rfrdobj_id,
          wtsk_rfrdobj_typ,
          wtsk_wkfwistcid,
          wtsk_cnv_id,
          wtsk_ddln_dt,
          wtsk_ddln_tim_in_dy,
          wtsk_ddlnact,
          wtsk_currstt,
          wtsk_tsk_grp,
          wtsk_tnfr,
          wtsk_prvstnfr,
          wtsk_id,
          valid_from,
          valid_to,
          wtsk_audid,
          wtsk_prev_audid,
          wtsk_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.wtsk_c4c_id,
          :new.wtsk_crtd,
          :new.wtsk_las_act,
          :new.wtsk_las_act_actrtyp,
          :new.wtsk_obj_stt,
          :new.wtsk_vers,
          :new.wtsk_vsbt,
          :new.wtsk_dltddt,
          :new.wtsk_las_act_by,
          :new.wtsk_origcrtr,
          :new.wtsk_origcrtrlogdin,
          :new.wtsk_las_act_by_logdin,
          :new.wtsk_univid,
          :new.wtsk_wkfwtsk_typ,
          :new.wtsk_tsk_nam,
          :new.wtsk_tsk_dscn,
          :new.wtsk_rfrdobj_id,
          :new.wtsk_rfrdobj_typ,
          :new.wtsk_wkfwistcid,
          :new.wtsk_cnv_id,
          :new.wtsk_ddln_dt,
          :new.wtsk_ddln_tim_in_dy,
          :new.wtsk_ddlnact,
          :new.wtsk_currstt,
          :new.wtsk_tsk_grp,
          :new.wtsk_tnfr,

       :new.wtsk_prvstnfr,
          :new.wtsk_id,
          :new.wtsk_las_act_tim,
          NULL,
          u_wkfwtsk.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_wkfwtsk
      SET
        valid_to        = :new.wtsk_las_act_tim,
        wtsk_next_audid = u_wkfwtsk.CURRVAL
      WHERE
        wtsk_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
272
</td>
<td>
THH_C4C
</td>
<td>
TRG_WTSC_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_WKFWTSK_STT_CNGE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_WTSC_AUDITINSERT&quot; BEFORE INSERT ON T_WKFWTSK_STT_CNGE FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.wtsc_crtd IS NULL THEN 
    :new.wtsc_crtd := curr_date; 
  END IF; 

  IF :new.wtsc_las_act_tim IS NULL THEN 
    :new.wtsc_las_act_tim := curr_date; 
  END IF; 

  IF :new.wtsc_las_act IS NULL THEN 
    :new.wtsc_las_act := 1; 
  END IF; 

  IF :new.wtsc_obj_stt IS NULL THEN 
    :new.wtsc_obj_stt := 1; 
  END IF; 

  IF :new.wtsc_vers IS NULL THEN 
    :new.wtsc_vers := 0; 
  END IF; 

  IF :new.wtsc_vsbt IS NULL THEN 
    :new.wtsc_vsbt := 1001; 
  END IF; 

  IF :new.wtsc_las_act_by IS NULL THEN 
    :new.wtsc_las_act_by := 1; 
  END IF; 

  IF :new.wtsc_origcrtr IS NULL THEN 
    :new.wtsc_origcrtr := 1; 
  END IF; 

  IF :new.wtsc_origcrtrlogdin IS NULL THEN 
    :new.wtsc_origcrtrlogdin := 1; 
  END IF; 

  IF :new.wtsc_las_act_by_logdin IS NULL THEN 
    :new.wtsc_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_wkfwtsk_stt_cnge 
  ( 
   classtype, 
   wtsc_c4c_id, 
   wtsc_crtd, 
   wtsc_las_act, 
   wtsc_las_act_actrtyp, 
   wtsc_obj_stt, 
   wtsc_vers, 
   wtsc_vsbt, 
   wtsc_dltddt, 
   wtsc_las_act_by, 
   wtsc_origcrtr, 
   wtsc_origcrtrlogdin, 
   wtsc_las_act_by_logdin, 
   wtsc_univid, 
   wtsc_cnge, 
   wtsc_tpnt, 
   wtsc_ownrchndflag, 
   wtsc_dat__cmmt, 
   wtsc_dat__longprm, 
   wtsc_dat__strgprm, 
   wtsc_ogtr, 
   wtsc_ownr, 
   wtsc_prvsownr, 
   wtsc_prvsownrprmn, 
   wtsc_tsk, 
   wtsc_prvsstt, 
   wtsc_id, 
   valid_from, 
   valid_to , 
   wtsc_audid, 
   wtsc_prev_audid, 
   wtsc_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.wtsc_c4c_id,
   :new.wtsc_crtd,
   :new.wtsc_las_act,
   :new.wtsc_las_act_actrtyp,
   :new.wtsc_obj_stt,
   :new.wtsc_vers,
   :new.wtsc_vsbt,
   :new.wtsc_dltddt,
   :new.wtsc_las_act_by,
   :new.wtsc_origcrtr,
   :new.wtsc_origcrtrlogdin,
   :new.wtsc_las_act_by_logdin,
   :new.wtsc_univid,
   :new.wtsc_cnge,
   :new.wtsc_tpnt,
   :new.wtsc_ownrchndflag,
   :new.wtsc_dat__cmmt,
   :new.wtsc_dat__lon
gprm,
   :new.wtsc_dat__strgprm,
   :new.wtsc_ogtr,
   :new.wtsc_ownr,
   :new.wtsc_prvsownr,
   :new.wtsc_prvsownrprmn,
   :new.wtsc_tsk,
   :new.wtsc_prvsstt, 
   :new.wtsc_id, 
   :new.wtsc_las_act_tim, 
   NULL, 
   u_wkfwtsk_stt_cnge.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
273
</td>
<td>
THH_C4C
</td>
<td>
TRG_WTSC_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_WKFWTSK_STT_CNGE
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_wtsc_auditupdate BEFORE
  UPDATE
    ON T_WKFWTSK_STT_CNGE FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        wtsc_audid
      INTO
        last_audid
      FROM
        a_wkfwtsk_stt_cnge
      WHERE
        wtsc_id            = :old.wtsc_id
      AND wtsc_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.wtsc_las_act_tim = :new.wtsc_las_act_tim THEN
      UPDATE
        a_wkfwtsk_stt_cnge
      SET
        classtype              = :new.classtype,
        wtsc_c4c_id            = :new.wtsc_c4c_id,
        wtsc_crtd              = :new.wtsc_crtd,
        wtsc_las_act           = :new.wtsc_las_act,
        wtsc_las_act_actrtyp   = :new.wtsc_las_act_actrtyp,
        wtsc_obj_stt           = :new.wtsc_obj_stt,
        wtsc_vers              = :new.wtsc_vers,
        wtsc_vsbt              = :new.wtsc_vsbt,
        wtsc_dltddt            = :new.wtsc_dltddt,
        wtsc_las_act_by        = :new.wtsc_las_act_by,
        wtsc_origcrtr          = :new.wtsc_origcrtr,
        wtsc_origcrtrlogdin    = :new.wtsc_origcrtrlogdin,
        wtsc_las_act_by_logdin = :new.wtsc_las_act_by_logdin,
        wtsc_univid            = :new.wtsc_univid,
        wtsc_cnge              = :new.wtsc_cnge,
        wtsc_tpnt              = :new.wtsc_tpnt,
        wtsc_ownrchndflag      = :new.wtsc_ownrchndflag,
        wtsc_dat__cmmt         = :new.wtsc_dat__cmmt,
        wtsc_dat__longprm      = :new.wtsc_dat__longprm,
        wtsc_dat__strgprm      = :new.wtsc_dat__strgprm,
        wtsc_ogtr              = :new.wtsc_ogtr,
        wtsc_ownr              = :new.wtsc_ownr,
        wtsc_prvsownr          = :new.wtsc_prvsownr,
        wtsc_prvsownrprmn      = :new.wtsc_prvsownrprmn,
        wtsc_tsk               = :new.wtsc_tsk,
        wtsc_prvsstt           = :new.wtsc_prvsstt
      WHERE
        wtsc
_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_wkfwtsk_stt_cnge
        (
          classtype,
          wtsc_c4c_id,
          wtsc_crtd,
          wtsc_las_act,
          wtsc_las_act_actrtyp,
          wtsc_obj_stt,
          wtsc_vers,
          wtsc_vsbt,
          wtsc_dltddt,
          wtsc_las_act_by,
          wtsc_origcrtr,
          wtsc_origcrtrlogdin,
          wtsc_las_act_by_logdin,
          wtsc_univid,
          wtsc_cnge,
          wtsc_tpnt,
          wtsc_ownrchndflag,
          wtsc_dat__cmmt,
          wtsc_dat__longprm,
          wtsc_dat__strgprm,
          wtsc_ogtr,
          wtsc_ownr,
          wtsc_prvsownr,
          wtsc_prvsownrprmn,
          wtsc_tsk,
          wtsc_prvsstt,
          wtsc_id,
          valid_from,
          valid_to,
          wtsc_audid,
          wtsc_prev_audid,
          wtsc_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.wtsc_c4c_id,
          :new.wtsc_crtd,
          :new.wtsc_las_act,
          :new.wtsc_las_act_actrtyp,
          :new.wtsc_obj_stt,
          :new.wtsc_vers,
          :new.wtsc_vsbt,
          :new.wtsc_dltddt,
          :new.wtsc_las_act_by,
          :new.wtsc_origcrtr,
          :new.wtsc_origcrtrlogdin,
          :new.wtsc_las_act_by_logdin,
          :new.wtsc_univid,
          :new.wtsc_cnge,
          :new.wtsc_tpnt,
          :new.wtsc_ownrchndflag,
          :new.wtsc_dat__cmmt,
          :new.wtsc_dat__longprm,
          :new.wtsc_dat__strgprm,
          :new.wtsc_ogtr,
          :new.wtsc_ownr,
          :new.wtsc_prvsownr,
          :new.wtsc_prvsownrprmn,
          :new.wtsc_tsk,
          :new.wtsc_prvsstt,
          :new.wtsc_id,
          :new.wtsc_las_act_tim,
          NULL,
          u_wkfwtsk_stt_cnge.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record
's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_wkfwtsk_stt_cnge
      SET
        valid_to        = :new.wtsc_las_act_tim,
        wtsc_next_audid = u_wkfwtsk_stt_cnge.CURRVAL
      WHERE
        wtsc_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
274
</td>
<td>
THH_C4C
</td>
<td>
TRG_EXPS_AUDITINSERT
</td>
<td>
BEFORE EACH ROW
</td>
<td>
INSERT
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_XMPTPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
&quot;THH_C4C&quot;.&quot;TRG_EXPS_AUDITINSERT&quot; BEFORE INSERT ON T_XMPTPVRS FOR EACH ROW

</td>
<td>
PL/SQL
</td>
<td>
DECLARE
  /* save current date */
  curr_date DATE;
BEGIN 
  curr_date := current_date;

  IF :new.exps_crtd IS NULL THEN 
    :new.exps_crtd := curr_date; 
  END IF; 

  IF :new.exps_las_act_tim IS NULL THEN 
    :new.exps_las_act_tim := curr_date; 
  END IF; 

  IF :new.exps_las_act IS NULL THEN 
    :new.exps_las_act := 1; 
  END IF; 

  IF :new.exps_obj_stt IS NULL THEN 
    :new.exps_obj_stt := 1; 
  END IF; 

  IF :new.exps_vers IS NULL THEN 
    :new.exps_vers := 0; 
  END IF; 

  IF :new.exps_vsbt IS NULL THEN 
    :new.exps_vsbt := 1001; 
  END IF; 

  IF :new.exps_las_act_by IS NULL THEN 
    :new.exps_las_act_by := 1; 
  END IF; 

  IF :new.exps_origcrtr IS NULL THEN 
    :new.exps_origcrtr := 1; 
  END IF; 

  IF :new.exps_origcrtrlogdin IS NULL THEN 
    :new.exps_origcrtrlogdin := 1; 
  END IF; 

  IF :new.exps_las_act_by_logdin IS NULL THEN 
    :new.exps_las_act_by_logdin := 1; 
  END IF; 

  INSERT INTO a_xmptpvrs 
  ( 
   classtype, 
   exps_c4c_id, 
   exps_crtd, 
   exps_las_act, 
   exps_las_act_actrtyp, 
   exps_obj_stt, 
   exps_vers, 
   exps_vsbt, 
   exps_dltddt, 
   exps_las_act_by, 
   exps_origcrtr, 
   exps_origcrtrlogdin, 
   exps_las_act_by_logdin, 
   exps_univid, 
   exps_athddvns, 
   exps_xmptpvrs, 
   exps_pvdr, 
   exps_id, 
   valid_from, 
   valid_to , 
   exps_audid, 
   exps_prev_audid, 
   exps_next_audid
  ) 
  VALUES 
  ( 
   :new.classtype,
   :new.exps_c4c_id,
   :new.exps_crtd,
   :new.exps_las_act,
   :new.exps_las_act_actrtyp,
   :new.exps_obj_stt,
   :new.exps_vers,
   :new.exps_vsbt,
   :new.exps_dltddt,
   :new.exps_las_act_by,
   :new.exps_origcrtr,
   :new.exps_origcrtrlogdin,
   :new.exps_las_act_by_logdin,
   :new.exps_univid,
   :new.exps_athddvns,
   :new.exps_xmptpvrs,
   :new.exps_pvdr, 
   :new.exps_id, 
   :new.exps_las_act_tim, 
   NULL, 
   u_xmptpvrs.NEXTVAL, 
   NULL, 
   NULL
  );
END;










</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
<tr>
<td>
275
</td>
<td>
THH_C4C
</td>
<td>
TRG_EXPS_AUDITUPDATE
</td>
<td>
BEFORE EACH ROW
</td>
<td>
UPDATE
</td>
<td>
THH_C4C
</td>
<td>
TABLE
</td>
<td>
T_XMPTPVRS
</td>
<td>
&nbsp;
</td>
<td>
REFERENCING NEW AS NEW OLD AS OLD
</td>
<td>
&nbsp;
</td>
<td>
ENABLED
</td>
<td>
trg_exps_auditupdate BEFORE
  UPDATE
    ON T_XMPTPVRS FOR EACH ROW
</td>
<td>
PL/SQL
</td>
<td>
DECLARE
    /* last audit ID of record */
    last_audid NUMBER;
  BEGIN
    /* retrieve last audit ID of record */
    BEGIN
      SELECT
        exps_audid
      INTO
        last_audid
      FROM
        a_xmptpvrs
      WHERE
        exps_id            = :old.exps_id
      AND exps_next_audid IS NULL
      AND rownum           &lt; 2 FOR UPDATE;
    EXCEPTION
    WHEN NO_DATA_FOUND THEN
      last_audid := NULL;
    END;
    /* LastActionTime has not changed - no new transaction */
    IF :old.exps_las_act_tim = :new.exps_las_act_tim THEN
      UPDATE
        a_xmptpvrs
      SET
        classtype              = :new.classtype,
        exps_c4c_id            = :new.exps_c4c_id,
        exps_crtd              = :new.exps_crtd,
        exps_las_act           = :new.exps_las_act,
        exps_las_act_actrtyp   = :new.exps_las_act_actrtyp,
        exps_obj_stt           = :new.exps_obj_stt,
        exps_vers              = :new.exps_vers,
        exps_vsbt              = :new.exps_vsbt,
        exps_dltddt            = :new.exps_dltddt,
        exps_las_act_by        = :new.exps_las_act_by,
        exps_origcrtr          = :new.exps_origcrtr,
        exps_origcrtrlogdin    = :new.exps_origcrtrlogdin,
        exps_las_act_by_logdin = :new.exps_las_act_by_logdin,
        exps_univid            = :new.exps_univid,
        exps_athddvns          = :new.exps_athddvns,
        exps_xmptpvrs          = :new.exps_xmptpvrs,
        exps_pvdr              = :new.exps_pvdr
      WHERE
        exps_audid = last_audid;
      /* LastActionTime has changed - new transaction in place */
    ELSE
      /* insert new values introduced by new transaction */
      INSERT
      INTO
        a_xmptpvrs
        (
          classtype,
          exps_c4c_id,
          exps_crtd,
          exps_las_act,
          exps_las_act_actrtyp,
          exps_obj_stt,
          exps_vers,
          exps_vsbt,
          exps_dltddt,
          exps_las_act_by,
          exps_origcrtr,
          exps_origcr
trlogdin,
          exps_las_act_by_logdin,
          exps_univid,
          exps_athddvns,
          exps_xmptpvrs,
          exps_pvdr,
          exps_id,
          valid_from,
          valid_to,
          exps_audid,
          exps_prev_audid,
          exps_next_audid
        )
        VALUES
        (
          :new.classtype,
          :new.exps_c4c_id,
          :new.exps_crtd,
          :new.exps_las_act,
          :new.exps_las_act_actrtyp,
          :new.exps_obj_stt,
          :new.exps_vers,
          :new.exps_vsbt,
          :new.exps_dltddt,
          :new.exps_las_act_by,
          :new.exps_origcrtr,
          :new.exps_origcrtrlogdin,
          :new.exps_las_act_by_logdin,
          :new.exps_univid,
          :new.exps_athddvns,
          :new.exps_xmptpvrs,
          :new.exps_pvdr,
          :new.exps_id,
          :new.exps_las_act_tim,
          NULL,
          u_xmptpvrs.NEXTVAL,
          last_audid,
          NULL
        );
      /* update last audit record's valid_to to new LastActionTime
      and next audit ID to newly inserted record's sequence number
      */
      UPDATE
        a_xmptpvrs
      SET
        valid_to        = :new.exps_las_act_tim,
        exps_next_audid = u_xmptpvrs.CURRVAL
      WHERE
        exps_audid = last_audid;
    END IF;
  END;
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
NO
</td>
<td>
YES
</td>
<td>
NO
</td>
</tr>
</table>
<p>

#: click on a column heading to sort on it

<pre>
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 OWNER                                              VARCHAR2(128)
 TRIGGER_NAME                                       VARCHAR2(128)
 TRIGGER_TYPE                                       VARCHAR2(16)
 TRIGGERING_EVENT                                   VARCHAR2(246)
 TABLE_OWNER                                        VARCHAR2(128)
 BASE_OBJECT_TYPE                                   VARCHAR2(18)
 TABLE_NAME                                         VARCHAR2(128)
 COLUMN_NAME                                        VARCHAR2(4000)
 REFERENCING_NAMES                                  VARCHAR2(422)
 WHEN_CLAUSE                                        VARCHAR2(4000)
 STATUS                                             VARCHAR2(8)
 DESCRIPTION                                        VARCHAR2(4000)
 ACTION_TYPE                                        VARCHAR2(11)
 TRIGGER_BODY                                       LONG
 CROSSEDITION                                       VARCHAR2(7)
 BEFORE_STATEMENT                                   VARCHAR2(3)
 BEFORE_ROW                                         VARCHAR2(3)
 AFTER_ROW                                          VARCHAR2(3)
 AFTER_STATEMENT                                    VARCHAR2(3)
 INSTEAD_OF_ROW                                     VARCHAR2(3)
 FIRE_ONCE                                          VARCHAR2(3)
 APPLY_SERVER_ONLY                                  VARCHAR2(3)

SELECT /*+ NO_MERGE */
       *
  FROM dba_triggers
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                       FROM plan_table
                                      WHERE statement_id = 'LIST_OF_TABLES'
                                        AND remarks = '3hwq5m5h3gkaq')
 ORDER BY table_owner, table_name, trigger_name;

275 rows selected.
</pre>

<br>
<font class="f">sqld360 (c) 2015. Version v192 (2019-03-23). Report executed on 2020-11-06/17:07:21 for SQL ID 3hwq5m5h3gkaq (UPDATE T_USR SET "CLASSTYPE" = :B1 ,"USR_C4C_ID" = :B2 ,"USR_CRTD" = :B3 ,"USR_L) </font>
</body>
</html>
