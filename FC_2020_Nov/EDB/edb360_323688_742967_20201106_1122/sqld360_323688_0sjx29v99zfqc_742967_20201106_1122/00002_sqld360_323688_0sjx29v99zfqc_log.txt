begin log


DEFINE _DATE           = "2020-11-06/17:15:11" (CHAR)
DEFINE _CONNECT_IDENTIFIER = "PRD1" (CHAR)
DEFINE _USER           = "SYS" (CHAR)
DEFINE _PRIVILEGE      = "AS SYSDBA" (CHAR)
DEFINE _SQLPLUS_RELEASE = "1201000200" (CHAR)
DEFINE _EDITOR         = "ed" (CHAR)
DEFINE _O_VERSION      = "Oracle Database 12c EE Extreme Perf Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, Oracle Label Security,
OLAP, Advanced Analytics and Real Application Testing options" (CHAR)
DEFINE _O_RELEASE      = "1201000200" (CHAR)
DEFINE ASH_VALIDATION  = "" (CHAR)
DEFINE V_DOLLAR        = "V$" (CHAR)
DEFINE MY_SID          = "5432" (CHAR)
DEFINE LICENSE_PACK    = "T" (CHAR)
DEFINE DIAGNOSTICS_PACK = "Y" (CHAR)
DEFINE SKIP_DIAGNOSTICS = "" (CHAR)
DEFINE TUNING_PACK     = "Y" (CHAR)
DEFINE SKIP_TUNING     = "" (CHAR)
DEFINE CUSTOM_CONFIG_FILENAME = "null" (CHAR)
DEFINE EDB360_ESTIMATED_HRS = "1" (CHAR)
DEFINE ASH_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE MY_SPOOL_FILENAME = "awr_ash_pre_check_PRD.txt" (CHAR)
DEFINE ASH_EDB360_DAYS = "31" (CHAR)
DEFINE ASH_FTS_ON_EDB360 = "250" (CHAR)
DEFINE ASH_DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE NUMBER_OF_INSTANCES =                    2 (NUMBER)
DEFINE THIS_DBID       =           2109323688 (NUMBER)
DEFINE ASH_MIN_SNAP_ID = "0" (CHAR)
DEFINE ASH_MAX_SNAP_ID = "0" (CHAR)
DEFINE LAST_PURGE_TIME = "2020-09-18T00:28:18" (CHAR)
DEFINE DAYS_SINCE_PURGE = "49.5" (CHAR)
DEFINE ASH_LAST_ANALYZED = "2020-09-19T06:58:17" (CHAR)
DEFINE ASH_CBO_STATS_AGE_DAYS = "48.2" (CHAR)
DEFINE PERCENT_OF_INSERTS = "" (CHAR)
DEFINE ASH_SIZE_GB     = "2.6 GBs" (CHAR)
DEFINE LAST_DDL_TIME   = "2020-09-18T21:40:39" (CHAR)
DEFINE SEG_LAST_DDL_TIME = "2020-09-18T21:40:39" (CHAR)
DEFINE LAST_DDL_AGE_DAYS = "48.6" (CHAR)
DEFINE ASH_FTS_SECONDS = "122" (CHAR)
DEFINE ASH_DAYS_OF_HISTORY = "92.8" (CHAR)
DEFINE ASH_MED_SAMPLE_DATE = "2020-07-08T03:20:17" (CHAR)
DEFINE ASH_MEDIAN_AGE_DAYS = "121.3" (CHAR)
DEFINE IGNORE_THIS     =                    0 (NUMBER)
DEFINE EDB360_FTS_SECONDS = "1" (CHAR)
DEFINE _RC             = "10" (CHAR)
DEFINE EDB360_SECTIONS = "" (CHAR)
DEFINE SQL_TRACE_LEVEL = "1" (CHAR)
DEFINE EDB360_CONF_DAYS = "31" (CHAR)
DEFINE EDB360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_FROM = "0730" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_TO = "1930" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_FROM = "2" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_TO = "6" (CHAR)
DEFINE EDB360_CONF_MAX_HOURS = "24" (CHAR)
DEFINE EDB360_CHART_WIDTH = "809px" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_INDEX = "N" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_FILE = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_MEM = "N" (CHAR)
DEFINE EDB360_CONF_INCL_SQL_MON = "N" (CHAR)
DEFINE EDB360_CONF_INCL_STAT_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PX_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SEGMENTS = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SOURCE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE EDB360_EADAM_ROW_LIMIT = "10000000" (CHAR)
DEFINE TOOL_REPO_USER  = "" (CHAR)
DEFINE EDB360_OUTPUT_DIRECTORY = "" (CHAR)
DEFINE EDB360_MOVE_DIRECTORY = "" (CHAR)
DEFINE SKIP_ESP_AND_ESCP = "" (CHAR)
DEFINE EDB360_CONFIG_DBID = "" (CHAR)
DEFINE EDB360_HOST_NAME_SEPARATOR = "" (CHAR)
DEFINE EDB360_HOST_NAME_POSITION = "" (CHAR)
DEFINE EDB360_HOST_NAME_OCCURRENCE = "" (CHAR)
DEFINE EDB360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_XML = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_CSV = "N" (CHAR)
DEFINE EDB360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PERFHUB = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_DIFF_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RANGE_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ADDM_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_ANALY_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TKPROF = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PLOT_AWR = "N" (CHAR)
DEFINE EDB360_CONF_SERIES_SELECTION = "N" (CHAR)
DEFINE EDB360_MAX_WORK_DAYS_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_WORK_DAYS_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_HISTORY_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_HISTORY = "1" (CHAR)
DEFINE EDB360_MAX_5WD_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_5WD_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_7D_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_7D   = "1" (CHAR)
DEFINE EDB360_CONF_TOP_SQL = "16" (CHAR)
DEFINE EDB360_CONF_TOP_CUR = "2" (CHAR)
DEFINE EDB360_CONF_TOP_SIG = "2" (CHAR)
DEFINE EDB360_CONF_PLANX_TOP = "16" (CHAR)
DEFINE EDB360_CONF_SQLMON_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLASH_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLHC_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP = "8" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP_TC = "0" (CHAR)
DEFINE TOOL_PREFIX_1   = "dba_hist#" (CHAR)
DEFINE TOOL_PREFIX_2   = "dba#" (CHAR)
DEFINE TOOL_PREFIX_3   = "gv#" (CHAR)
DEFINE TOOL_PREFIX_4   = "v#" (CHAR)
DEFINE EDB360_CONF_TOOL_PAGE = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank">" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_ICON = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank"><img src="database.jpg" alt="eDB360" height="33" width="52" /></a>" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE EDB360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE EDB360_VYYNN    = "v192" (CHAR)
DEFINE EDB360_VRSN     = "v192 (2019-03-23)" (CHAR)
DEFINE EDB360_COPYRIGHT = " (c) 2019" (CHAR)
DEFINE EDB360_BYPASS   = "" (CHAR)
DEFINE AWR_HIST_PREFIX = "DBA_HIST_" (CHAR)
DEFINE AWR_OBJECT_PREFIX = "dba_hist_" (CHAR)
DEFINE DVA_VIEW_PREFIX = "DBA_" (CHAR)
DEFINE DVA_OBJECT_PREFIX = "dba_" (CHAR)
DEFINE GV_VIEW_PREFIX  = "GV$" (CHAR)
DEFINE GV_OBJECT_PREFIX = "gv$" (CHAR)
DEFINE V_VIEW_PREFIX   = "V$" (CHAR)
DEFINE V_OBJECT_PREFIX = "v$" (CHAR)
DEFINE EDB360_DBID     = "2109323688" (CHAR)
DEFINE HISTORY_DAYS    = "31" (CHAR)
DEFINE EDB360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE EDB360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE EDB360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE EDB360_DATE_FROM = "2020-10-06T11:22:16" (CHAR)
DEFINE EDB360_DATE_TO  = "2020-11-06T11:22:16" (CHAR)
DEFINE HIST_WORK_DAYS  = "23" (CHAR)
DEFINE SKIP_EXTRAS     = "" (CHAR)
DEFINE EDB360_0G       = "edb360_0g_" (CHAR)
DEFINE EDB360_1A       = "edb360_1a_" (CHAR)
DEFINE EDB360_1B       = "edb360_1b_" (CHAR)
DEFINE EDB360_1C       = "edb360_1c_" (CHAR)
DEFINE EDB360_1D       = "edb360_1d_" (CHAR)
DEFINE EDB360_1E       = "edb360_1e_" (CHAR)
DEFINE EDB360_1F       = "edb360_1f_" (CHAR)
DEFINE EDB360_1G       = "edb360_1g_" (CHAR)
DEFINE EDB360_2A       = "edb360_2a_" (CHAR)
DEFINE EDB360_2B       = "edb360_2b_" (CHAR)
DEFINE EDB360_2C       = "edb360_2c_" (CHAR)
DEFINE EDB360_2D       = "edb360_2d_" (CHAR)
DEFINE EDB360_2E       = "edb360_2e_" (CHAR)
DEFINE EDB360_3A       = "edb360_3a_" (CHAR)
DEFINE EDB360_3B       = "edb360_3b_" (CHAR)
DEFINE EDB360_3C       = "edb360_3c_" (CHAR)
DEFINE EDB360_3D       = "edb360_3d_" (CHAR)
DEFINE EDB360_3E       = "edb360_3e_" (CHAR)
DEFINE EDB360_3F       = "edb360_3f_" (CHAR)
DEFINE EDB360_3G       = "edb360_3g_" (CHAR)
DEFINE EDB360_3H       = "edb360_3h_" (CHAR)
DEFINE EDB360_3I       = "edb360_3i_" (CHAR)
DEFINE EDB360_3J       = "edb360_3j_" (CHAR)
DEFINE EDB360_4A       = "edb360_4a_" (CHAR)
DEFINE EDB360_4B       = "edb360_4b_" (CHAR)
DEFINE EDB360_4C       = "edb360_4c_" (CHAR)
DEFINE EDB360_4D       = "edb360_4d_" (CHAR)
DEFINE EDB360_4E       = "edb360_4e_" (CHAR)
DEFINE EDB360_4F       = "edb360_4f_" (CHAR)
DEFINE EDB360_4G       = "edb360_4g_" (CHAR)
DEFINE EDB360_4H       = "edb360_4h_" (CHAR)
DEFINE EDB360_4I       = "edb360_4i_" (CHAR)
DEFINE EDB360_4J       = "edb360_4j_" (CHAR)
DEFINE EDB360_4K       = "edb360_4k_" (CHAR)
DEFINE EDB360_4L       = "edb360_4l_" (CHAR)
DEFINE EDB360_5A       = "edb360_5a_" (CHAR)
DEFINE EDB360_5B       = "edb360_5b_" (CHAR)
DEFINE EDB360_5C       = "edb360_5c_" (CHAR)
DEFINE EDB360_5D       = "edb360_5d_" (CHAR)
DEFINE EDB360_5E       = "edb360_5e_" (CHAR)
DEFINE EDB360_5F       = "edb360_5f_" (CHAR)
DEFINE EDB360_5G       = "edb360_5g_" (CHAR)
DEFINE EDB360_6A       = "edb360_6a_" (CHAR)
DEFINE EDB360_6B       = "edb360_6b_" (CHAR)
DEFINE EDB360_6C       = "edb360_6c_" (CHAR)
DEFINE EDB360_6D       = "edb360_6d_" (CHAR)
DEFINE EDB360_6E       = "edb360_6e_" (CHAR)
DEFINE EDB360_6F       = "edb360_6f_" (CHAR)
DEFINE EDB360_6G       = "edb360_6g_" (CHAR)
DEFINE EDB360_6H       = "edb360_6h_" (CHAR)
DEFINE EDB360_6I       = "edb360_6i_" (CHAR)
DEFINE EDB360_6J       = "edb360_6j_" (CHAR)
DEFINE EDB360_6K       = "edb360_6k_" (CHAR)
DEFINE EDB360_6L       = "edb360_6l_" (CHAR)
DEFINE EDB360_6M       = "edb360_6m_" (CHAR)
DEFINE EDB360_6N       = "edb360_6n_" (CHAR)
DEFINE EDB360_7A       = "edb360_7a_" (CHAR)
DEFINE EDB360_7B       = "edb360_7b_" (CHAR)
DEFINE EDB360_7C       = "edb360_7c_" (CHAR)
DEFINE EDB360_PREFIX   = "edb360" (CHAR)
DEFINE ECR_COLLECTION_KEY = "PRD1219183590" (CHAR)
DEFINE SKIP_SCRIPT     = "sql/edb360_0f_skip_script.sql " (CHAR)
DEFINE EDB360_CON_ID   = "4" (CHAR)
DEFINE EDB360_PDB_NAME = "FRSTPROD" (CHAR)
DEFINE EDB360_DBMOD    = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NUMBER = "1" (CHAR)
DEFINE DATABASE_NAME_SHORT = "prd" (CHAR)
DEFINE HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_NAME_SUFFIX = "" (CHAR)
DEFINE ESP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_HASH       = "742967" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD = "20201106" (CHAR)
DEFINE MAIN_TABLE      = "" (CHAR)
DEFINE TITLE           = "" (CHAR)
DEFINE TITLE_NO_SPACES = "" (CHAR)
DEFINE TITLE_SUFFIX    = "" (CHAR)
DEFINE EDB360_FILE_TIME = "20201106_1122" (CHAR)
DEFINE COMMON_EDB360_PREFIX = "edb360_323688" (CHAR)
DEFINE EDB360_MAIN_REPORT = "00001_edb360_323688_index" (CHAR)
DEFINE EDB360_LOG      = "00002_edb360_323688_log" (CHAR)
DEFINE EDB360_LOG2     = "00003_edb360_323688_log2" (CHAR)
DEFINE EDB360_LOG3     = "00004_edb360_323688_log3" (CHAR)
DEFINE EDB360_TKPROF   = "00005_edb360_323688_tkprof" (CHAR)
DEFINE EDB360_MAIN_FILENAME = "edb360_323688_742967" (CHAR)
DEFINE EDB360_ZIP_FILENAME = "edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_TRACEFILE_IDENTIFIER = "edb360_323688" (CHAR)
DEFINE EDB360_TAR_FILENAME = "00008_edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_MV_HOST_COMMAND = "" (CHAR)
DEFINE DB_VERS_OFE     = "12.1.0.2" (CHAR)
DEFINE SKIP_AWR        = "" (CHAR)
DEFINE SKIP_STATSPACK  = "--skip--" (CHAR)
DEFINE ESP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_MAX_DAYS   = "365" (CHAR)
DEFINE ESCP_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE ESCP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE ESCP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_COLLECTION_YYYYMMDD_HHMI = "20201106_1122" (CHAR)
DEFINE ESCP_COLLECTION_DAYS = "8" (CHAR)
DEFINE ESCP_THIS_DBID  = "2109323688" (CHAR)
DEFINE ESCP_THIS_INST_NUM = "1" (CHAR)
DEFINE ESCP_MIN_SNAP_ID = "4578" (CHAR)
DEFINE MAX_DAYS        = "365" (CHAR)
DEFINE INCLUDE_IC      = "Y" (CHAR)
DEFINE INCLUDE_NETW    = "Y" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD_HHMI = "20201106_1128" (CHAR)
DEFINE COLLECTION_DAYS = "8" (CHAR)
DEFINE SKIP_ON_10G     = "" (CHAR)
DEFINE ECR_SQ_FACT_HINTS = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE ECR_DATE_FORMAT = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE ECR_DBID        = "2109323688" (CHAR)
DEFINE ECR_INSTANCE_NUMBER = "1" (CHAR)
DEFINE ECR_MIN_SNAP_ID = "4578" (CHAR)
DEFINE ECR_COLLECTION_HOST = "aupp-hroradb-f9exx1" (CHAR)
DEFINE USE_ON_10G      = "--" (CHAR)
DEFINE DB_VERSION      = "12.1.0.2.0" (CHAR)
DEFINE SKIP_10G_COLUMN = "" (CHAR)
DEFINE SKIP_10G_SCRIPT = "" (CHAR)
DEFINE SKIP_11G_COLUMN = "" (CHAR)
DEFINE SKIP_11G_SCRIPT = "" (CHAR)
DEFINE SKIP_11R1_COLUMN = "" (CHAR)
DEFINE SKIP_11R1_SCRIPT = "" (CHAR)
DEFINE SKIP_NON_REPO_COLUMN = "" (CHAR)
DEFINE SKIP_NON_REPO_SCRIPT = "" (CHAR)
DEFINE SKIP_12C_COLUMN = " -- skip 12c " (CHAR)
DEFINE SKIP_12C_SCRIPT = " echo skip 12c " (CHAR)
DEFINE SKIP_12R2_COLUMN = "" (CHAR)
DEFINE SKIP_12R2_SCRIPT = "" (CHAR)
DEFINE SKIP_18C_COLUMN = "" (CHAR)
DEFINE SKIP_18C_SCRIPT = "" (CHAR)
DEFINE SKIP_19C_COLUMN = "" (CHAR)
DEFINE SKIP_19C_SCRIPT = "" (CHAR)
DEFINE AVG_CPU_COUNT   =                   16 (NUMBER)
DEFINE SUM_CPU_COUNT   =                   32 (NUMBER)
DEFINE AVG_CORE_COUNT  = "16" (CHAR)
DEFINE AVG_THREAD_COUNT = "16" (CHAR)
DEFINE CPU_LOAD_THRESHOLD =                   32 (NUMBER)
DEFINE HOSTS_COUNT     = "2" (CHAR)
DEFINE CORES_THREADS_HOSTS = "cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE TOOL_SYSDATE    = "20201106171511" (CHAR)
DEFINE BETWEEN_DATES   = ", between 2020-10-06T17:15:11 and 2020-11-06T17:15:11" (CHAR)
DEFINE MINIMUM_SNAP_ID = "3485" (CHAR)
DEFINE MAXIMUM_SNAP_ID = "4974" (CHAR)
DEFINE INST1_PRESENT   = "1" (CHAR)
DEFINE INST2_PRESENT   = "2" (CHAR)
DEFINE INST3_PRESENT   = "" (CHAR)
DEFINE INST4_PRESENT   = "" (CHAR)
DEFINE INST5_PRESENT   = "" (CHAR)
DEFINE INST6_PRESENT   = "" (CHAR)
DEFINE INST7_PRESENT   = "" (CHAR)
DEFINE INST8_PRESENT   = "" (CHAR)
DEFINE IS_SINGLE_INSTANCE = "" (CHAR)
DEFINE SKIP_INST1      = "" (CHAR)
DEFINE SKIP_INST2      = "" (CHAR)
DEFINE SKIP_INST3      = "-- skip inst3" (CHAR)
DEFINE SKIP_INST4      = "-- skip inst4" (CHAR)
DEFINE SKIP_INST5      = "-- skip inst5" (CHAR)
DEFINE SKIP_INST6      = "-- skip inst6" (CHAR)
DEFINE SKIP_INST7      = "-- skip inst7" (CHAR)
DEFINE SKIP_INST8      = "-- skip inst8" (CHAR)
DEFINE CHART_SETUP_DRIVER = "99800_edb360_323688_chart_setup_driver1.sql" (CHAR)
DEFINE EDB360_EADAM_SNAPS = "-666, 4925, 4869, 4821, 4887, 4839, 4791, 3948, 3900, 3852, 3996, 3804, 3756" (CHAR)
DEFINE EBS_RELEASE     = "" (CHAR)
DEFINE EBS_SYSTEM_NAME = "" (CHAR)
DEFINE SIEBEL_SCHEMA   = "" (CHAR)
DEFINE SIEBEL_APP_VER  = "" (CHAR)
DEFINE PSFT_SCHEMA     = "" (CHAR)
DEFINE PSFT_TOOLS_REL  = "" (CHAR)
DEFINE EDB360_SKIP_HTML = "" (CHAR)
DEFINE EDB360_SKIP_XML = " echo skip xml " (CHAR)
DEFINE EDB360_SKIP_TEXT = " echo skip text " (CHAR)
DEFINE EDB360_SKIP_CSV = " echo skip csv " (CHAR)
DEFINE EDB360_SKIP_LINE = "" (CHAR)
DEFINE EDB360_SKIP_PIE = "" (CHAR)
DEFINE EDB360_SKIP_BAR = "" (CHAR)
DEFINE EDB360_SKIP_METADATA = "" (CHAR)
DEFINE EDB360_SKIP_ASH_MEM = " echo skip ash mem " (CHAR)
DEFINE EDB360_SKIP_SQL_MON = " echo skip sql mon " (CHAR)
DEFINE EDB360_SKIP_STAT_MEM = "" (CHAR)
DEFINE EDB360_SKIP_PX_MEM = "" (CHAR)
DEFINE TOP_LEVEL_HINTS = "NO_MERGE" (CHAR)
DEFINE SQ_FACT_HINTS   = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE DS_HINT         = "DYNAMIC_SAMPLING(4)" (CHAR)
DEFINE ASH_HINTS1      = " FULL(h.ash) FULL(h.evt) FULL(h.sn) USE_HASH(h.sn h.ash h.evt) " (CHAR)
DEFINE ASH_HINTS2      = " FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.ash) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE ASH_HINTS3      = " USE_HASH(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn h.INT$DBA_HIST_ACT_SESS_HISTORY.ash h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE DEF_MAX_ROWS    = "50000" (CHAR)
DEFINE MAX_ROWS        = "5e4" (CHAR)
DEFINE EXCLUSION_LIST  = "('ANONYMOUS','APEX_030200','APEX_040000','APEX_040200','APEX_SSO','APPQOSSYS','CTXSYS','DBSNMP','DIP','EXFSYS','FLOWS_FILES','MDSYS','OLAPSYS','ORACLE_OCM','ORDDATA','ORDPLUGINS','ORDSYS','OUTLN','OWBSYS')" (CHAR)
DEFINE EXCLUSION_LIST2 = "('SI_INFORMTN_SCHEMA','SQLTXADMIN','SQLTXPLAIN','SYS','SYSMAN','SYSTEM','TRCANLZR','WMSYS','XDB','XS$NULL','PERFSTAT','STDBYPERF','MGDSYS','OJVMSYS')" (CHAR)
DEFINE SKIP_HTML       = "" (CHAR)
DEFINE SKIP_TEXT       = "" (CHAR)
DEFINE SKIP_CSV        = "" (CHAR)
DEFINE SKIP_LCH        = "Y" (CHAR)
DEFINE SKIP_LCH2       = "--skip--" (CHAR)
DEFINE SKIP_PCH        = "Y" (CHAR)
DEFINE SKIP_BCH        = "Y" (CHAR)
DEFINE SKIP_ALL        = "" (CHAR)
DEFINE ABSTRACT        = "" (CHAR)
DEFINE ABSTRACT2       = "" (CHAR)
DEFINE FOOT            = "" (CHAR)
DEFINE ABSTRACT_UOM    = "Memory is accounted as power of two (binary) while storage and network traffic as power of ten (decimal). <br />" (CHAR)
DEFINE CHARTYPE        = "" (CHAR)
DEFINE STACKED         = "" (CHAR)
DEFINE HAXIS           = "0sjx29v99zfqc 12.1.0.2.0 cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE VAXIS           = "" (CHAR)
DEFINE VBASELINE       = "" (CHAR)
DEFINE BAR_HEIGHT      = "45%" (CHAR)
DEFINE TIT_01          = "" (CHAR)
DEFINE TIT_02          = "" (CHAR)
DEFINE TIT_03          = "" (CHAR)
DEFINE TIT_04          = "" (CHAR)
DEFINE TIT_05          = "" (CHAR)
DEFINE TIT_06          = "" (CHAR)
DEFINE TIT_07          = "" (CHAR)
DEFINE TIT_08          = "" (CHAR)
DEFINE TIT_09          = "" (CHAR)
DEFINE TIT_10          = "" (CHAR)
DEFINE TIT_11          = "" (CHAR)
DEFINE TIT_12          = "" (CHAR)
DEFINE TIT_13          = "" (CHAR)
DEFINE TIT_14          = "" (CHAR)
DEFINE TIT_15          = "" (CHAR)
DEFINE CONT_01         = "-1" (CHAR)
DEFINE CONT_02         =                   -1 (NUMBER)
DEFINE CONT_03         =                   -1 (NUMBER)
DEFINE CONT_04         =                   -1 (NUMBER)
DEFINE CONT_05         =                   -1 (NUMBER)
DEFINE CONT_06         =                   -1 (NUMBER)
DEFINE CONT_07         =                   -1 (NUMBER)
DEFINE CONT_08         =                   -1 (NUMBER)
DEFINE CONT_09         =                   -1 (NUMBER)
DEFINE CONT_10         =                   -1 (NUMBER)
DEFINE CONT_11         =                   -1 (NUMBER)
DEFINE CONT_12         =                   -1 (NUMBER)
DEFINE CONT_13         =                   -1 (NUMBER)
DEFINE CONT_14         =                   -1 (NUMBER)
DEFINE CONT_15         =                   -1 (NUMBER)
DEFINE WAIT_CLASS_01   = "Application" (CHAR)
DEFINE EVENT_NAME_01   = "enq: TM - contention" (CHAR)
DEFINE WAIT_CLASS_02   = "User I/O" (CHAR)
DEFINE EVENT_NAME_02   = "cell single block physical read" (CHAR)
DEFINE WAIT_CLASS_03   = "Network" (CHAR)
DEFINE EVENT_NAME_03   = "SQL*Net more data to client" (CHAR)
DEFINE WAIT_CLASS_04   = "Administrative" (CHAR)
DEFINE EVENT_NAME_04   = "Backup: MML write backup piece" (CHAR)
DEFINE WAIT_CLASS_05   = "Cluster" (CHAR)
DEFINE EVENT_NAME_05   = "gc cr disk read" (CHAR)
DEFINE WAIT_CLASS_06   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_06   = "cursor: pin S wait on X" (CHAR)
DEFINE WAIT_CLASS_07   = "User I/O" (CHAR)
DEFINE EVENT_NAME_07   = "direct path read" (CHAR)
DEFINE WAIT_CLASS_08   = "Other" (CHAR)
DEFINE EVENT_NAME_08   = "rdbms ipc reply" (CHAR)
DEFINE WAIT_CLASS_09   = "Application" (CHAR)
DEFINE EVENT_NAME_09   = "enq: TX - row lock contention" (CHAR)
DEFINE WAIT_CLASS_10   = "User I/O" (CHAR)
DEFINE EVENT_NAME_10   = "cell multiblock read request" (CHAR)
DEFINE WAIT_CLASS_11   = "User I/O" (CHAR)
DEFINE EVENT_NAME_11   = "cell multiblock physical read" (CHAR)
DEFINE WAIT_CLASS_12   = "Cluster" (CHAR)
DEFINE EVENT_NAME_12   = "gc current block 2-way" (CHAR)
DEFINE EXADATA         = "" (CHAR)
DEFINE MAX_COL_NUMBER  = "1" (CHAR)
DEFINE COLUMN_NUMBER   = "1" (CHAR)
DEFINE RECOVERY        = "& recovery" (CHAR)
DEFINE TOTAL_HOURS     = "" (CHAR)
DEFINE EDB360_TIME_STAMP = "2020-11-06T13:52:14" (CHAR)
DEFINE REPORT_SEQUENCE = "1" (CHAR)
DEFINE CURRENT_TIME    = "17:15:10" (CHAR)
DEFINE EXACT_MATCHING_SIGNATURE =  5491120282710359353 (NUMBER)
DEFINE FORCE_MATCHING_SIGNATURE =  5491120282710359353 (NUMBER)
DEFINE WAIT_CLASS_COLORS = "CASE wait_class WHEN ''CPU'' THEN ''34CF27'' WHEN ''Scheduler'' THEN ''9FFA9D'' WHEN ''User I/O'' THEN ''0252D7'' WHEN ''System I/O'' THEN ''1E96DD'' " (CHAR)
DEFINE WAIT_CLASS_COLORS2 = " WHEN ''Concurrency'' THEN ''871C12'' WHEN ''Application'' THEN ''C42A05'' WHEN ''Commit'' THEN ''EA6A05'' WHEN ''Configuration'' THEN ''594611''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3 = " WHEN ''Administrative'' THEN ''75763E''  WHEN ''Network'' THEN ''989779'' WHEN ''Other'' THEN ''F571A0'' " (CHAR)
DEFINE WAIT_CLASS_COLORS4 = " WHEN ''Cluster'' THEN ''CEC3B5'' WHEN ''Queueing'' THEN ''C6BAA5'' END" (CHAR)
DEFINE SERIES_01       = "" (CHAR)
DEFINE SERIES_02       = "" (CHAR)
DEFINE SERIES_03       = "" (CHAR)
DEFINE SERIES_04       = "" (CHAR)
DEFINE SERIES_05       = "" (CHAR)
DEFINE SERIES_06       = "" (CHAR)
DEFINE SERIES_07       = "" (CHAR)
DEFINE SERIES_08       = "" (CHAR)
DEFINE SERIES_09       = "" (CHAR)
DEFINE SERIES_10       = "" (CHAR)
DEFINE SERIES_11       = "" (CHAR)
DEFINE SERIES_12       = "" (CHAR)
DEFINE SERIES_13       = "" (CHAR)
DEFINE SERIES_14       = "" (CHAR)
DEFINE SERIES_15       = "" (CHAR)
DEFINE SKIP_LCHP       = "--skip--" (CHAR)
DEFINE EDB360_UDUMP_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE EDB360_SPID     = "274417" (CHAR)
DEFINE REPORT_DBNAME   = "" (CHAR)
DEFINE SECTION_ID      = "5h" (CHAR)
DEFINE SECTION_NAME    = "SQL Tuning Advisor" (CHAR)
DEFINE PROCESSOR_MODEL = "Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz" (CHAR)
DEFINE HH_MM_SS        = "17:15:10" (CHAR)
DEFINE SPOOL_FILENAME  = "sqld360_323688_17vjd1aast5q7_5h_204_sta_report" (CHAR)
DEFINE ROW_NUM         = "2980" (CHAR)
DEFINE EDB360_PREV_SQL_ID = "7uwhxftumj625" (CHAR)
DEFINE EDB360_PREV_CHILD_NUMBER = "0" (CHAR)
DEFINE ONE_SPOOL_FILENAME = "00936_sqld360_323688_17vjd1aast5q7_5h_204_sta_report" (CHAR)
DEFINE EDB360_TUNING_PACK_FOR_SQLMON = "N" (CHAR)
DEFINE SKIP_SQLMON_EXEC = " echo skip sqlmon" (CHAR)
DEFINE EDB360_SQL_TEXT_100 = "SELECT TO_CHAR(ROWNUM) row_num, v0.* FROM /* 4b.455 */ ( WITH pgastat_denorm_1 AS ( SELECT /*+  MATE" (CHAR)
DEFINE STATSPACK_USER  = "perfstat" (CHAR)
DEFINE SP_MINIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SP_MAXIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SKIP_IF_MISSING = " echo skip " (CHAR)
DEFINE TOTAL_BUFFER_GETS =          20276118710 (NUMBER)
DEFINE TOTAL_DISK_READS =            123439198 (NUMBER)
DEFINE REPORT_DATE     = "2020-11-06T11:45:41" (CHAR)
DEFINE DAYS_OF_HISTORY_ACCESSED = "31" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_TIMES = "10" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_DAYS_APART = "5" (CHAR)
DEFINE MED_ELAP_MICROSECS_THRESHOLD = "1e4" (CHAR)
DEFINE MIN_SLOPE_THRESHOLD = "0.1" (CHAR)
DEFINE MAX_NUM_ROWS_X  = "20" (CHAR)
DEFINE SKIP_INST       = "" (CHAR)
DEFINE CORES_OVER_THREADS = "" (CHAR)
DEFINE SUBPOOL_01      = "SQLA" (CHAR)
DEFINE SUBPOOL_02      = "Result Cache" (CHAR)
DEFINE SUBPOOL_03      = "KGLH0" (CHAR)
DEFINE SUBPOOL_04      = "gcs resources" (CHAR)
DEFINE SUBPOOL_05      = "gcs shadows" (CHAR)
DEFINE SUBPOOL_06      = "" (CHAR)
DEFINE SUBPOOL_07      = "" (CHAR)
DEFINE SUBPOOL_08      = "" (CHAR)
DEFINE SUBPOOL_09      = "" (CHAR)
DEFINE SUBPOOL_10      = "" (CHAR)
DEFINE TEXT            = "Y" (CHAR)
DEFINE ACTIVE          = "Y" (CHAR)
DEFINE MAX_REPORTS     = "12" (CHAR)
DEFINE INPUT_LICENSE   = "Y" (CHAR)
DEFINE SQL_ID          = "1wjt2ut7cah6k" (CHAR)
DEFINE DATE_MASK       = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE WAIT_CLASS_13   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_13   = "row cache lock" (CHAR)
DEFINE WAIT_CLASS_14   = "Cluster" (CHAR)
DEFINE EVENT_NAME_14   = "gc cr multi block request" (CHAR)
DEFINE WAIT_CLASS_15   = "Cluster" (CHAR)
DEFINE EVENT_NAME_15   = "gc cr grant 2-way" (CHAR)
DEFINE WAIT_CLASS_16   = "Cluster" (CHAR)
DEFINE EVENT_NAME_16   = "gc current grant 2-way" (CHAR)
DEFINE WAIT_CLASS_17   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_17   = "library cache lock" (CHAR)
DEFINE WAIT_CLASS_18   = "Other" (CHAR)
DEFINE EVENT_NAME_18   = "DFS lock handle" (CHAR)
DEFINE WAIT_CLASS_19   = "User I/O" (CHAR)
DEFINE EVENT_NAME_19   = "cell smart table scan" (CHAR)
DEFINE WAIT_CLASS_20   = "User I/O" (CHAR)
DEFINE EVENT_NAME_20   = "direct path read temp" (CHAR)
DEFINE WAIT_CLASS_21   = "Scheduler" (CHAR)
DEFINE EVENT_NAME_21   = "resmgr:cpu quantum" (CHAR)
DEFINE WAIT_CLASS_22   = "User I/O" (CHAR)
DEFINE EVENT_NAME_22   = "cell single block read request" (CHAR)
DEFINE WAIT_CLASS_23   = "Cluster" (CHAR)
DEFINE EVENT_NAME_23   = "gc cr block busy" (CHAR)
DEFINE WAIT_CLASS_24   = "Other" (CHAR)
DEFINE EVENT_NAME_24   = "gcs drm freeze in enter server mode" (CHAR)
DEFINE ONE_MS_COMP     = "<=" (CHAR)
DEFINE TWO_MS_COMP     = ">" (CHAR)
DEFINE VAXIS1          = "Waits Count" (CHAR)
DEFINE VAXIS2          = "" (CHAR)
DEFINE 7               = "edb360_9a_pre_one.sql" (CHAR)
DEFINE BETWEEN_TIMES   = ", between 2020-10-06T11:22:16 and 2020-11-06T11:22:16" (CHAR)
DEFINE FILTER_PREDICATE = "instance_number = 8" (CHAR)
DEFINE CALL_SQLD360_BITMASK = "110031" (CHAR)
DEFINE CALL_SQLD360_BITMASK_TC = "111031" (CHAR)
DEFINE FILES_PREFIX    = "" (CHAR)
DEFINE SQ_FACT_SQL_SAMPLE_HINTS = " MATERIALIZE NO_MERGE " (CHAR)
DEFINE IS_10G          = "" (CHAR)
DEFINE IS_11R1         = "" (CHAR)
DEFINE IS_11R2         = "" (CHAR)
DEFINE X_MINIMUM_SNAP_ID = "3483" (CHAR)
DEFINE X_MAXIMUM_SNAP_ID = "4973" (CHAR)
DEFINE X_MINIMUM_DATE  = "2020-10-06T16:30:07" (CHAR)
DEFINE X_MAXIMUM_DATE  = "2020-11-06T16:30:43" (CHAR)
DEFINE SIGNATURE       = "9380065298533696050" (CHAR)
DEFINE SIGNATUREF      = "9380065298533696050" (CHAR)
DEFINE X_HOST_NAME     = "aupp-hroradb-f9exx1" (CHAR)
DEFINE X_DB_NAME       = "PRD" (CHAR)
DEFINE X_CONTAINER     = "FRSTPROD" (CHAR)
DEFINE SQL_HANDLE      = "" (CHAR)
DEFINE X_SLICES        = "20" (CHAR)
DEFINE X_DAYS          = "31" (CHAR)
DEFINE TABLES_LIST     = "(('THH_C4C','A_APBL'),('THH_C4C','A_APBLSRVC'),('THH_C4C','A_MEMBDGISBASE'),('THH_C4C','A_USR'),('THH_C4C','MV_PATID_CLINIC_COND_SRVCD'),('THH_C4C','T_DRUGCLM'),('THH_C4C','T_MDCLCLM'),('THH_C4C','T_MDCT'),('THH_C4C','T_SRVC'),('THH_C4C','T_USR'))" (CHAR)
DEFINE TIMESTAMP_MASK  = "YYYY-MM-DD/HH24:MI:SS.FF6" (CHAR)
DEFINE FIELDS_DELIMITER = "<,>" (CHAR)
DEFINE EADAM_CURRENT_TIME = "20201106163916" (CHAR)
DEFINE EDB360_SECS2GO  = "67310" (CHAR)
DEFINE DRIVER_TIME     = "164026" (CHAR)
DEFINE FROM_EDB360     = "--" (CHAR)
DEFINE SKIP_TCB        = "--" (CHAR)
DEFINE SQLD360_FROMEDB360_DAYS = "31" (CHAR)
DEFINE SECS2GO_STARTTIME = "20201106171510" (CHAR)
DEFINE SKIP_SQLD360    = "" (CHAR)
DEFINE SQLD360_CONTAINER = "FRSTPROD" (CHAR)
DEFINE SQLD360_CONF_DAYS = "61" (CHAR)
DEFINE SQLD360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_CSV = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_XML = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TREE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BUBBLE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SCATT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SQLMON = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_ASH_HIST = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_AWRRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_ASHRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_RAWASH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS_H = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_FMATCH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TCB = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_STA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_CBOENV = "N" (CHAR)
DEFINE SQLD360_CONF_TCB_SAMPLE = "0" (CHAR)
DEFINE SQLD360_CONF_TRANSLATE_LOWHIGH = "Y" (CHAR)
DEFINE SQLD360_CONF_FIRST_PART = "10" (CHAR)
DEFINE SQLD360_CONF_LAST_PART = "10" (CHAR)
DEFINE SQLD360_NUM_PLAN_DETAILS = "20" (CHAR)
DEFINE SQLD360_CONF_NUM_TOP_EXECS = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_AWRRPT = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_SQLMON_REP = "12" (CHAR)
DEFINE SQLD360_CONF_AVG_ET_PERCTH = "90" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_DEPT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_ASHBASED = "N" (CHAR)
DEFINE SQLD360_SQLTRACE_LEVEL = "0" (CHAR)
DEFINE SQLD360_CONF_DBID = "" (CHAR)
DEFINE SQLD360_CONF_AWR_TIMESCALE = "ms" (CHAR)
DEFINE SQLD360_CONF_TOOL_PAGE = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank">" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_ICON = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank"><img src="SQLd360_img.jpg" alt="SQLd360" height="33" width="52"></a>" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE SQLD360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE SQLD360_VYYNN   = "v192" (CHAR)
DEFINE SQLD360_VRSN    = "v192 (2019-03-23)" (CHAR)
DEFINE SQLD360_PREFIX  = "sqld360" (CHAR)
DEFINE SQLD360_SQLID   = "0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_DBID    = "2109323688" (CHAR)
DEFINE SQLD360_DBMOD   = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NAME = "PRD1" (CHAR)
DEFINE SQLD360_DB_BLOCK_SIZE = "8192" (CHAR)
DEFINE SQLD360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE SQLD360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE SQLD360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE SQLD360_DATE_FROM = "2020-10-06T17:15:11" (CHAR)
DEFINE SQLD360_DATE_TO = "2020-11-06T17:15:11" (CHAR)
DEFINE SKIP_10G        = "" (CHAR)
DEFINE SKIP_11G        = "" (CHAR)
DEFINE SKIP_11R1       = "" (CHAR)
DEFINE SKIP_11R201     = "" (CHAR)
DEFINE SKIP_11R203     = "" (CHAR)
DEFINE SKIP_12C        = "--" (CHAR)
DEFINE SKIP_12R101     = "" (CHAR)
DEFINE SKIP_12R1       = "--" (CHAR)
DEFINE SKIP_18C        = "" (CHAR)
DEFINE SKIP_19C        = "" (CHAR)
DEFINE SQLD360_FILE_TIME = "20201106_1715" (CHAR)
DEFINE AS_OF_DATE      = ", as of Fri Nov 06 @05:15PM" (CHAR)
DEFINE SQLD360_ASHDISKFILTER =                   10 (NUMBER)
DEFINE SQLD360_ASHSAMPLE =                    1 (NUMBER)
DEFINE SQLD360_ASHTIMEVALUE =                   10 (NUMBER)
DEFINE SQLD360_REMOTE_EXEC = "--" (CHAR)
DEFINE SQLD360_LOCAL_EXEC = "" (CHAR)
DEFINE SQLD360_UDUMP_PATH = "/u02/app/oracle/product/12.1.0/dbhome_3/rdbms/log/" (CHAR)
DEFINE SQLD360_DIAGTRACE_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE SQLD360_SPID    = "274417" (CHAR)
DEFINE SQLD360_SQLTXT  = "SELECT INFO_WITH_MEMBER_ID.*,
    enrollment.ELNS_INSCPRSRGRP ipgGroupId,
    be" (CHAR)
DEFINE SQLD360_IS_INSERT = "N" (CHAR)
DEFINE XPLAN_USER      = "THH_C4C" (CHAR)
DEFINE CURRENT_USER    = "SYS" (CHAR)
DEFINE XPLAN_SQL       = "SELECT INFO_WITH_MEMBER_ID.*,
    enrollment.ELNS_INSCPRSRGRP ipgGroupId,
    be" (CHAR)
DEFINE SQLD360_XPLAN_SQLID = "9babjv8yq8ru3" (CHAR)
DEFINE SKIP_FORCE_MATCH = "--" (CHAR)
DEFINE SQLD360_SKIP_HTML = "" (CHAR)
DEFINE SQLD360_SKIP_XML = "--" (CHAR)
DEFINE SQLD360_SKIP_TEXT = "--" (CHAR)
DEFINE SQLD360_SKIP_CSV = "--" (CHAR)
DEFINE SQLD360_SKIP_LINE = "" (CHAR)
DEFINE SQLD360_SKIP_PIE = "" (CHAR)
DEFINE SQLD360_SKIP_BAR = "" (CHAR)
DEFINE SQLD360_SKIP_TREE = "" (CHAR)
DEFINE SQLD360_SKIP_BUBBLE = "" (CHAR)
DEFINE SQLD360_SKIP_SCATT = "" (CHAR)
DEFINE SQLD360_SKIP_AWRRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_ASHRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_SQLMON = "" (CHAR)
DEFINE SQLD360_SKIP_STA = "" (CHAR)
DEFINE SQLD360_SKIP_EADAM = "" (CHAR)
DEFINE SQLD360_SKIP_RAWASH = "" (CHAR)
DEFINE SQLD360_SKIP_STATS_H = "" (CHAR)
DEFINE SQLD360_SKIP_FMATCH = "" (CHAR)
DEFINE SQLD360_SKIP_METADATA = "" (CHAR)
DEFINE SQLD360_SKIP_STATS = "" (CHAR)
DEFINE SQLD360_SKIP_TCB = "--" (CHAR)
DEFINE SQLD360_SKIP_CBOENV = "--" (CHAR)
DEFINE SQLD360_TCB_EXP_DATA = "FALSE" (CHAR)
DEFINE SQLD360_TCB_EXP_SAMPLE =                    0 (NUMBER)
DEFINE SQLD360_SKIP_OBJD = "" (CHAR)
DEFINE SQLD360_SKIP_OBJ_ASHBASED = "--" (CHAR)
DEFINE SQLD360_SKIP_LOWHIGH = "" (CHAR)
DEFINE SQLD360_HAS_PLSQL = "" (CHAR)
DEFINE SQLD360_NO_READ_STATS_H = "" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_D = "1e3" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_L = "ms" (CHAR)
DEFINE COMMON_SQLD360_PREFIX = "sqld360_323688_0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_MAIN_REPORT = "00001_sqld360_323688_0sjx29v99zfqc_index" (CHAR)
DEFINE SQLD360_LOG     = "00002_sqld360_323688_0sjx29v99zfqc_log" (CHAR)
DEFINE SQLD360_TKPROF  = "00003_sqld360_323688_0sjx29v99zfqc_tkprof" (CHAR)
DEFINE SQLD360_MAIN_FILENAME = "sqld360_323688_0sjx29v99zfqc_742967" (CHAR)
DEFINE SQLD360_LOG2    = "00004_sqld360_323688_0sjx29v99zfqc_log2" (CHAR)
DEFINE SQLD360_TRACEFILE_IDENTIFIER = "sqld360_323688_0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_COPYRIGHT = " (c) 2015" (CHAR)
DEFINE NUM_PARTS       = "100" (CHAR)
DEFINE DEFAULT_DIR     = "SQLD360_DIR" (CHAR)
DEFINE SQLMON_DATE_MASK = "YYYYMMDDHH24MISS" (CHAR)
DEFINE SQLMON_TEXT     = "Y" (CHAR)
DEFINE SQLMON_ACTIVE   = "Y" (CHAR)
DEFINE SQLMON_HIST     = "Y" (CHAR)
DEFINE ASH_DATE_MASK   = "YYYYMMDDHH24MISS" (CHAR)
DEFINE ASH_TEXT        = "Y" (CHAR)
DEFINE ASH_HTML        = "Y" (CHAR)
DEFINE ASH_MEM         = "Y" (CHAR)
DEFINE ASH_AWR         = "Y" (CHAR)
DEFINE ASH_MAX_REPORTS = "12" (CHAR)
DEFINE WAIT_CLASS_COLORS_S = "CASE wait_class WHEN ''CPU'' THEN ''color: ''''#34CF27'''''' WHEN ''Scheduler'' THEN ''color: ''''#9FFA9D'''''' WHEN ''User I/O'' THEN ''color: ''''#0252D7'''''' WHEN ''System I/O'' THEN ''color: ''''#1E96DD'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS2_S = " WHEN ''Concurrency'' THEN ''color: ''''#871C12'''''' WHEN ''Application'' THEN ''color: ''''#C42A05'''''' WHEN ''Commit'' THEN ''color: ''''#EA6A05'''''' WHEN ''Configuration'' THEN ''color: ''''#594611''''''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3_S = " WHEN ''Administrative'' THEN ''color: ''''#75763E''''''  WHEN ''Network'' THEN ''color: ''''#989779'''''' WHEN ''Other'' THEN ''color: ''''#F571A0'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS4_S = " WHEN ''Cluster'' THEN ''color: ''''#CEC3B5'''''' WHEN ''Queueing'' THEN ''color: ''''#C6BAA5'''''' END" (CHAR)
DEFINE SKIP_XML        = "" (CHAR)
DEFINE SKIP_TCH        = "Y" (CHAR)
DEFINE SKIP_UCH        = "Y" (CHAR)
DEFINE SKIP_SCH        = "Y" (CHAR)
DEFINE TREECOLOR       = "" (CHAR)
DEFINE BUBBLEMAXVALUE  = "" (CHAR)
DEFINE BUBBLESERIES    = "series: {'CPU': {color: '#34CF27'}, 'I/O': {color: '#0252D7'}, 'Concurrency': {color: '#871C12'}, 'Cluster': {color: '#CEC3B5'}, 'Other': {color: '#C6BAA5'}, 'Multiple': {color: '#CCFFFF'}}," (CHAR)
DEFINE BUBBLESDETAILS  = "" (CHAR)
DEFINE SQL_TEXT        = "" (CHAR)
DEFINE SQLD360_TIME_STAMP = "2020-11-06/17:15:11" (CHAR)
DEFINE NUM_PLANS       = "8" (CHAR)
DEFINE SQLD360_MAIN_REPORT_BCK = "00001_sqld360_323688_17vjd1aast5q7_index" (CHAR)
DEFINE NUM_BINDS       = "1" (CHAR)
DEFINE NUM_HISTOGRAMS  = "3" (CHAR)
DEFINE COLS_FROM_PART_TABLES = "0" (CHAR)
DEFINE PART_TABLES     = "0" (CHAR)
DEFINE TIT_01_AWR      = "2157031554" (CHAR)
DEFINE TIT_02_AWR      = "2283497611" (CHAR)
DEFINE TIT_03_AWR      = "1631436210" (CHAR)
DEFINE TIT_04_AWR      = "585197806" (CHAR)
DEFINE TIT_05_AWR      = "878120166" (CHAR)
DEFINE TIT_06_AWR      = "3954730776" (CHAR)
DEFINE TIT_07_AWR      = "1553667503" (CHAR)
DEFINE TIT_08_AWR      = "" (CHAR)
DEFINE TIT_09_AWR      = "" (CHAR)
DEFINE TIT_10_AWR      = "" (CHAR)
DEFINE TIT_11_AWR      = "" (CHAR)
DEFINE TIT_12_AWR      = "" (CHAR)
DEFINE TIT_13_AWR      = "" (CHAR)
DEFINE TIT_14_AWR      = "" (CHAR)
DEFINE TIT_15_AWR      = "" (CHAR)
DEFINE PHV_01_AWR      =           2157031554 (NUMBER)
DEFINE PHV_02_AWR      =           2283497611 (NUMBER)
DEFINE PHV_03_AWR      =           1631436210 (NUMBER)
DEFINE PHV_04_AWR      =            585197806 (NUMBER)
DEFINE PHV_05_AWR      =            878120166 (NUMBER)
DEFINE PHV_06_AWR      =           3954730776 (NUMBER)
DEFINE PHV_07_AWR      =           1553667503 (NUMBER)
DEFINE PHV_08_AWR      =                   -1 (NUMBER)
DEFINE PHV_09_AWR      =                   -1 (NUMBER)
DEFINE PHV_10_AWR      =                   -1 (NUMBER)
DEFINE PHV_11_AWR      =                   -1 (NUMBER)
DEFINE PHV_12_AWR      =                   -1 (NUMBER)
DEFINE PHV_13_AWR      =                   -1 (NUMBER)
DEFINE PHV_14_AWR      =                   -1 (NUMBER)
DEFINE PHV_15_AWR      =                   -1 (NUMBER)
DEFINE PHV_01          =           2157031554 (NUMBER)
DEFINE PHV_02          =           1631436210 (NUMBER)
DEFINE PHV_03          =           2283497611 (NUMBER)
DEFINE PHV_04          =            585197806 (NUMBER)
DEFINE PHV_05          =            878120166 (NUMBER)
DEFINE PHV_06          =           3954730776 (NUMBER)
DEFINE PHV_07          =           1553667503 (NUMBER)
DEFINE PHV_08          =                   -1 (NUMBER)
DEFINE PHV_09          =                   -1 (NUMBER)
DEFINE PHV_10          =                   -1 (NUMBER)
DEFINE PHV_11          =                   -1 (NUMBER)
DEFINE PHV_12          =                   -1 (NUMBER)
DEFINE PHV_13          =                   -1 (NUMBER)
DEFINE PHV_14          =                   -1 (NUMBER)
DEFINE PHV_15          =                   -1 (NUMBER)
DEFINE 1               = "0sjx29v99zfqc" (CHAR)
DEFINE 2               = "T" (CHAR)
DEFINE 3               = "null" (CHAR)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:11
Extracting ASH data
11205 rows extracted.
2020-11-06/17:15:12
17:15:12
Done exctrating ASH data

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:12
Extracting table list
2020-11-06/17:15:16
17:15:16
Done extracting table list
17:15:16

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:16 col:1of5 "Database Configuration"
17:15:16 System Under Observation

WITH
rac AS (SELECT /*+ MATERIALIZE NO_MERGE */ COUNT(*) instances, CASE COUNT(*) WHEN 1 THEN 'Single-instance' ELSE COUNT(*)||'-node RAC cluster' END db_type FROM gv$instance),
hrac AS (SELECT /*+ MATERIALIZE NO_MERGE */ CASE 2 WHEN 1 THEN ' (historically Single-instance in AWR)' ELSE ' (historicly 2-node RAC cluster in AWR)' END db_type
           FROM rac WHERE TO_CHAR(RAC.instances)<>2),
mem AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'memory_target'),
sga AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'sga_target'),
pga AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'pga_aggregate_target'),
db_block AS (SELECT /*+ MATERIALIZE NO_MERGE */ value bytes FROM v$system_parameter2 WHERE name = 'db_block_size'),
db AS (SELECT /*+ MATERIALIZE NO_MERGE */ name, platform_name FROM v$database),
  pdbs AS (SELECT /*+ MATERIALIZE NO_MERGE */ * FROM v$pdbs), -- need 12c flag
inst AS (SELECT /*+ MATERIALIZE NO_MERGE */ host_name, version db_version FROM v$instance),
data AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) bytes, COUNT(*) files, COUNT(DISTINCT ts#) tablespaces FROM v$datafile),
temp AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) bytes FROM v$tempfile),
log AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) * MAX(members) bytes FROM v$log),
control AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(block_size * file_size_blks) bytes FROM v$controlfile),
 cell AS (SELECT /*+ MATERIALIZE NO_MERGE */ COUNT(DISTINCT cell_name) cnt FROM v$cell_state),
core AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) cnt FROM gv$osstat WHERE stat_name = 'NUM_CPU_CORES'),
cpu AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) cnt FROM gv$osstat WHERE stat_name = 'NUM_CPUS'),
pmem AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) bytes FROM gv$osstat WHERE stat_name = 'PHYSICAL_MEMORY_BYTES')
SELECT /*+ NO_MERGE */ 'Database name:' system_item, db.name system_value FROM db
 UNION ALL
 SELECT '    pdb:'||name, 'Open Mode:'||open_mode FROM pdbs -- need 12c flag
 UNION ALL
SELECT 'Oracle Database version:', inst.db_version FROM inst
 UNION ALL
SELECT 'Database block size:', TRIM(TO_CHAR(db_block.bytes / POWER(2,10), '90'))||' KB' FROM db_block
 UNION ALL
SELECT 'Database size:', TRIM(TO_CHAR(ROUND((data.bytes + temp.bytes + log.bytes + control.bytes) / POWER(10,12), 3), '999,999,990.000'))||' TB'
  FROM db, data, temp, log, control
 UNION ALL
SELECT 'Datafiles:', data.files||' (on '||data.tablespaces||' tablespaces)' FROM data
 UNION ALL
SELECT 'Instance configuration:', rac.db_type||(select hrac.db_type FROM hrac ) FROM rac
 UNION ALL
SELECT 'Database memory:',
       CASE WHEN mem.target > 0 THEN 'MEMORY'  ||TRIM(TO_CHAR(ROUND(mem.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN sga.target > 0 THEN 'SGA '   ||TRIM(TO_CHAR(ROUND(sga.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN pga.target > 0 THEN 'PGA '   ||TRIM(TO_CHAR(ROUND(pga.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN mem.target > 0 THEN 'AMM ' ELSE CASE WHEN sga.target > 0 THEN 'ASMM' ELSE 'MANUAL' END END
  FROM mem, sga, pga
 UNION ALL
SELECT 'Hardware:', CASE WHEN cell.cnt > 0 THEN 'Engineered System '||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%5675%' THEN 'X2-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2690%' THEN 'X3-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2697%' THEN 'X4-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2699%' THEN 'X5-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%8870%' THEN 'X3-8 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%8895%' THEN 'X4-8 or X5-8 ' END||
        'with '||cell.cnt||' storage servers'
        ELSE 'Unknown' END FROM cell
 UNION ALL
SELECT 'Processor:', 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' FROM DUAL
 UNION ALL
SELECT 'Physical CPUs:', core.cnt||' cores'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, core
 UNION ALL
SELECT 'Oracle CPUs:', cpu.cnt||' CPUs (threads)'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, cpu
 UNION ALL
SELECT 'Physical RAM:', TRIM(TO_CHAR(ROUND(pmem.bytes / POWER(2,30), 1), '999,990.0'))||' GB'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, pmem
 UNION ALL
SELECT 'Operating system:', db.platform_name FROM db

17:15:16 col:1of5.

17:15:16 col:1of5 "00006_sqld360_323688_0sjx29v99zfqc_1a_1_system_under_observation.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Identification

SELECT d.dbid,
       d.name dbname,
       d.db_unique_name,
       d.platform_name,
       i.version,
       i.inst_id,
       i.instance_number,
       i.instance_name,
       LOWER(SUBSTR(i.host_name||'.', 1, INSTR(i.host_name||'.', '.') - 1)) host_name,
       LPAD(ORA_HASH(LOWER(SUBSTR(i.host_name||'.', 1, INSTR(i.host_name||'.', '.') - 1)),999999),6,'6') host_hv,
       p.value cpu_count,
       '' ebs_release,
       '' ebs_system_name,
       '' siebel_schema,
       '' siebel_app_ver,
       '' psft_schema,
       '' psft_tools_rel
  FROM v$database d,
       gv$instance i,
       gv$system_parameter2 p
 WHERE p.inst_id = i.inst_id
   AND p.name = 'cpu_count'

17:15:17 col:1of5.

17:15:17 col:1of5 "00007_sqld360_323688_0sjx29v99zfqc_1a_2_identification.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Version

SELECT /*+ NO_MERGE */
       *
  FROM v$version

17:15:17 col:1of5.

17:15:17 col:1of5 "00008_sqld360_323688_0sjx29v99zfqc_1a_3_version.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Database

SELECT /*+ NO_MERGE */
       *
  FROM v$database

17:15:17 col:1of5.

17:15:17 col:1of5 "00009_sqld360_323688_0sjx29v99zfqc_1a_4_database.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Instance

SELECT /*+ NO_MERGE */
       *
  FROM gv$instance
 ORDER BY
       inst_id

17:15:17 col:1of5.

17:15:17 col:1of5 "00010_sqld360_323688_0sjx29v99zfqc_1a_5_instance.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Modified Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 WHERE ismodified = 'MODIFIED'
 ORDER BY
       name,
       inst_id,
       ordinal

17:15:17 col:1of5.

17:15:17 col:1of5 "00011_sqld360_323688_0sjx29v99zfqc_1a_6_modified_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:17 col:1of5 "Database Configuration"
17:15:17 Non-default Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 WHERE isdefault = 'FALSE'
 ORDER BY
       name,
       inst_id,
       ordinal

17:15:17 col:1of5.

17:15:17 col:1of5 "00012_sqld360_323688_0sjx29v99zfqc_1a_7_nondefault_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 All Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 ORDER BY
       name,
       inst_id,
       ordinal

17:15:18 col:1of5.

17:15:18 col:1of5 "00013_sqld360_323688_0sjx29v99zfqc_1a_8_all_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 Parameter File

SELECT /*+ NO_MERGE */
       *
  FROM v$spparameter
 WHERE isspecified = 'TRUE'
 ORDER BY
       name,
       sid,
       ordinal

17:15:18 col:1of5.

17:15:18 col:1of5 "00014_sqld360_323688_0sjx29v99zfqc_1a_9_parameter_file.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 System Stats

SELECT /*+ NO_MERGE */
       *
  FROM sys.aux_stats$

17:15:18 col:1of5.

17:15:18 col:1of5 "00015_sqld360_323688_0sjx29v99zfqc_1a_10_system_stats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 IO Calibration

SELECT /*+ NO_MERGE */
       *
  FROM dba_rsrc_io_calibrate

17:15:18 col:1of5.

17:15:18 col:1of5 "00016_sqld360_323688_0sjx29v99zfqc_1a_11_io_calibration.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 Non-default Fix Controls

SELECT /*+ NO_MERGE */
       *
  FROM v$system_fix_control
 WHERE is_default = 0
 ORDER BY bugno

17:15:18 col:1of5.

17:15:18 col:1of5 "00017_sqld360_323688_0sjx29v99zfqc_1a_12_nondefault_fix_controls.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 All Fix Controls

SELECT /*+ NO_MERGE */
       *
  FROM v$system_fix_control
 ORDER BY bugno

17:15:18 col:1of5.

17:15:18 col:1of5 "00018_sqld360_323688_0sjx29v99zfqc_1a_13_all_fix_controls.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Database Configuration"
17:15:18 Optimizer Processing Rate

SELECT /*+ NO_MERGE */
       *
  FROM v$optimizer_processing_rate
 ORDER BY operation_name

17:15:18 col:1of5.

17:15:18 col:1of5 "00019_sqld360_323688_0sjx29v99zfqc_1a_14_optimizer_processing_rate.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "NLS Settings"
17:15:18 Session Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_session_parameters
 ORDER BY parameter

17:15:18 col:1of5.

17:15:18 col:1of5 "00020_sqld360_323688_0sjx29v99zfqc_1e_15_session_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "NLS Settings"
17:15:18 Instance Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_instance_parameters
 ORDER BY parameter

17:15:18 col:1of5.

17:15:18 col:1of5 "00021_sqld360_323688_0sjx29v99zfqc_1e_16_instance_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "NLS Settings"
17:15:18 Database Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_database_parameters
 ORDER BY parameter

17:15:18 col:1of5.

17:15:18 col:1of5 "00022_sqld360_323688_0sjx29v99zfqc_1e_17_database_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Observations"
17:15:18 System-wide observations

WITH cbo_parameters AS (SELECT /*+ MATERIALIZE */ inst_id, name, value, isdefault FROM gv$sys_optimizer_env),
     fix_controls   AS (SELECT /*+ MATERIALIZE */ inst_id, bugno, value, is_default FROM gv$system_fix_control),
     instances      AS (SELECT /*+ MATERIALIZE */ inst_id, version FROM gv$instance),
     systemstats    AS (SELECT /*+ MATERIALIZE */ MAX(CASE WHEN pname = 'CPUSPEED' THEN pval1 ELSE NULL END) cpuspeed, -- used to determine if workload ss in place
                                                  MAX(CASE WHEN pname = 'CPUSPEEDN' THEN pval1 ELSE NULL END) cpuspeednw,
                                                  MAX(CASE WHEN pname = 'SREADTIM' THEN pval1 ELSE NULL END) sreadtim,
                                                  MAX(CASE WHEN pname = 'MREADTIM' THEN pval1 ELSE NULL END) mreadtim,
                                                  MAX(CASE WHEN pname = 'MBRC' THEN pval1 ELSE NULL END) mbrc
                          FROM sys.aux_stats$)
SELECT inst_id instance, scope, message
  FROM (SELECT inst_id, 'SYSTEM' scope, 'There are '||num_nondef_fixc||' CBO-related parameters set to non-default value' message
           FROM (SELECT COUNT(*) num_nondef_fixc, inst_id
                   FROM cbo_parameters
                  WHERE isdefault = 'NO'
                  GROUP BY inst_id)
          WHERE num_nondef_fixc > 0
        UNION ALL
        SELECT inst_id, 'PARAMETER', 'Parameter '||name||' is set to non-default value of '||value
          FROM cbo_parameters
         WHERE isdefault = 'NO'
        UNION ALL
        SELECT inst_id, 'SYSTEM', 'There are '||num_nondef_fixc||' fix_controls set to non-default value'
          FROM (SELECT COUNT(*) num_nondef_fixc, inst_id
                  FROM fix_controls
                 WHERE is_default = 0
                 GROUP BY inst_id)
         WHERE num_nondef_fixc > 0
        UNION ALL
        SELECT inst_id, 'FIX_CONTROL', 'Fix control '||bugno||' is set to non-default value of '||value
          FROM fix_controls
         WHERE is_default = 0
        UNION ALL
        SELECT cbo_parameters.inst_id, 'OFE', 'OPTIMIZER_FEATURES_ENABLE set to a value ('||cbo_parameters.value||') different than RDBMS version ('||db_version.version||')'
          FROM cbo_parameters,
               (SELECT inst_id, version
                  FROM instances) db_version
         WHERE cbo_parameters.name = 'optimizer_features_enable'
           AND cbo_parameters.value <> SUBSTR(version,1,INSTR(version,'.',1,4)-1)
           AND cbo_parameters.inst_id = db_version.inst_id
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'SREADTIM is not null ('||sreadtim||') while MREADTIME is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND sreadtim IS NOT NULL
           AND mreadtim IS NULL
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'MREADTIM is not null ('||mreadtim||') while SREADTIME is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND sreadtim IS NULL
           AND mreadtim IS NOT NULL
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'Workload system stats gathered but MBRC is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND mbrc IS NULL
        )
 ORDER BY inst_id, scope, message

17:15:18 col:1of5.

17:15:18 col:1of5 "00023_sqld360_323688_0sjx29v99zfqc_1f_18_systemwide_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:18 col:1of5 "Observations"
17:15:18 Cursors and Plans specific observations

WITH vsql           AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, optimizer_env_hash_value FROM gv$sql WHERE sql_id = '0sjx29v99zfqc'),
     vsqlplan       AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, id, operation, object_owner, object_name, cost, cardinality, filter_predicates FROM gv$sql_plan WHERE sql_id = '0sjx29v99zfqc'),
     dbahistsql     AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, optimizer_env_hash_value FROM dba_hist_sqlstat WHERE sql_id = '0sjx29v99zfqc' AND 'Y' = 'Y'),
     dbahistsqlplan AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, id, operation, object_owner, object_name, cost, cardinality, filter_predicates FROM dba_hist_sql_plan WHERE sql_id = '0sjx29v99zfqc' AND 'Y' = 'Y'),
     indexes        AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, owner, index_name, degree FROM dba_indexes WHERE (table_owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')),
     ashdata        AS (SELECT /*+ INLINE */ cost sql_plan_hash_value,
                               operation sql_plan_operation,
                               options sql_plan_options,
                               object_node event,
                               other_tag wait_class,
                               id sql_plan_line_id,
                               partition_id sql_exec_id,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
                               object_instance obj#
                          FROM plan_table
                         WHERE statement_id
                          LIKE 'SQLD360_ASH_DATA%'
                          AND remarks = '0sjx29v99zfqc'),
    list_of_plans AS (SELECT plan_hash_value FROM vsql UNION SELECT plan_hash_value FROM dbahistsql UNION SELECT sql_plan_hash_value FROM ashdata)
SELECT scope, message
  FROM (SELECT 'OPTIMIZER_ENV' scope, 'There is/are '||COUNT(DISTINCT optimizer_env_hash_value)||' distinct CBO environments between memory and history for this SQL' message
         FROM (SELECT optimizer_env_hash_value
                 FROM vsql
                UNION ALL
               SELECT optimizer_env_hash_value
                 FROM dbahistsql)
         UNION ALL
        SELECT 'INTERNAL_FUNCTION', 'Filter predicate potentially include implicit data-type conversion (might be a red herring in case of long in-list)'
          FROM (SELECT 1
                  FROM vsqlplan
                 WHERE filter_predicates LIKE '%INTERNAL FUNCTION%'
                   AND ROWNUM < 2
                 UNION ALL
                SELECT 1
                  FROM dbahistsqlplan
                 WHERE filter_predicates LIKE '%INTERNAL FUNCTION%'
                   AND ROWNUM < 2)
         WHERE ROWNUM < 2
         UNION ALL
        SELECT 'COST_OF_0', 'Plan Hash Value '||plan_hash_value||' includes operation with a cost of 0, VERY suspicious'
          FROM (SELECT plan_hash_value
                  FROM vsqlplan
                 WHERE cost = 0
                   AND cardinality >= 1 -- always true, btw
                 UNION
                SELECT plan_hash_value
                  FROM dbahistsqlplan
                 WHERE cost = 0
                   AND cardinality >= 1 -- always true, btw
                )
         UNION ALL
        SELECT DISTINCT 'INDEX_NOT_FOUND', 'Plan Hash Value '||plan_hash_value||' refences an index that was not found anymore, maybe dropped?'
          FROM (SELECT plan_hash_value, object_owner, object_name
                  FROM vsqlplan
                 WHERE operation = 'INDEX'
                 UNION
                SELECT plan_hash_value, object_owner, object_name
                  FROM dbahistsqlplan
                 WHERE operation = 'INDEX'
                ) plans,
               indexes
         WHERE plans.object_owner = indexes.owner(+)
           AND plans.object_name = indexes.index_name(+)
           AND indexes.index_name IS NULL
         UNION ALL
        SELECT 'FULL_SCAN_DOING_SINGLE_READS', 'From the ASH *sampled* data for physical reads, Plan Hash Value '||sql_plan_hash_value||' issued single block reads during full scan operations '||TRUNC(num_single_block_reads/num_samples,3)*100||'% of the times'
          FROM (SELECT sql_plan_hash_value,
                       COUNT(*) num_samples,
                       SUM(CASE WHEN event IN ('db file sequential read', 'cell single block physical read') THEN 1 ELSE 0 END) num_single_block_reads
                  FROM ashdata
                 WHERE sql_plan_operation IN ('TABLE ACCESS','INDEX')
                   AND (sql_plan_options LIKE 'FULL%' OR sql_plan_options LIKE 'STORAGE FULL%')
                   AND wait_class = 'User I/O'
                 GROUP BY sql_plan_hash_value)
         WHERE TRUNC(num_single_block_reads/num_samples,3) >= 0.02 -- 2%
         UNION ALL
        SELECT 'FULL_SCAN_READING_FEW_BLOCKS', 'From the ASH *sampled* data for physical reads, Plan Hash Value '||sql_plan_hash_value||' spends most of its time ('||percent_per_phv_and_p3||'%) reading '||p3||' blocks at a time instead of '||POWER(1024,2)/8192||' during full scans'
          FROM (SELECT sql_plan_hash_value,
                       p3,
                       TRUNC(RATIO_TO_REPORT(COUNT(*)) OVER ()*100,3) percent_per_phv_and_p3,
                       ROW_NUMBER() OVER (PARTITION BY sql_plan_hash_value ORDER BY COUNT(*) DESC) rwn
                  FROM ashdata
                 WHERE sql_plan_operation IN ('TABLE ACCESS','INDEX')
                   AND sql_plan_options LIKE 'FULL%'
                   AND event IN ('db file scattered read', 'direct path read')
                 GROUP BY sql_plan_hash_value, p3)
         WHERE rwn = 1
           AND p3 < (POWER(1024,2)/8192)
         UNION ALL
        SELECT 'SQL_MOSTLY_NOT_ON_CPU', 'From the ASH *sampled* data, Plan Hash Value '||sql_plan_hash_value||' spends '||TRUNC(num_samples_per_class/total_samples_per_phv*100,3)||'% of the time on '||wait_class||'-related wait events instead of CPU (usually preferrable, with exceptions :-)'
          FROM (SELECT sql_plan_hash_value,
                       wait_class,
                       num_samples_per_class,
                       ROW_NUMBER() OVER (PARTITION BY sql_plan_hash_value ORDER BY num_samples_per_class DESC) rwn,
                       SUM(num_samples_per_class) OVER(PARTITION BY sql_plan_hash_value) total_samples_per_phv
                  FROM (SELECT sql_plan_hash_value,
                               wait_class,
                               COUNT(*) num_samples_per_class
                          FROM ashdata
                         GROUP BY sql_plan_hash_value, wait_class))
         WHERE rwn = 1
           AND wait_class <> 'CPU' -- so not on CPU
         UNION ALL
        SELECT 'MULTIPLE_PLANS','This SQL has/had '||COUNT(*)||' distinct execution plan(s)'
               ||', list of PHV is ('||LISTAGG(plan_hash_value, ',') WITHIN GROUP (ORDER BY plan_hash_value)||')'
          FROM list_of_plans
         UNION ALL
        SELECT 'POTENTIAL_PARSE_TIME', 'From the ASH *sampled* data, Plan Hash Value '||sql_plan_hash_value||' spent '||potential_parse_time||'% of the time not executing (SQL_EXEC_ID NULL), which usually is parse time'
          FROM (SELECT sql_plan_hash_value,
                       TRUNC(SUM(CASE WHEN sql_exec_id IS NULL THEN 1 ELSE 0 END)/COUNT(*),3) potential_parse_time
                  FROM ashdata
                 GROUP BY sql_plan_hash_value)
         WHERE potential_parse_time >= 0.1
         UNION ALL
        SELECT 'POTENTIAL_HWM_DESYNC', 'Object#: '||obj#||' block class#: '||p3||' sampled '||COUNT(*)||' times'
          FROM ashdata,
               (SELECT name
                  FROM v$event_name
                 WHERE parameter3 = 'class#'
                    OR (name LIKE '%-way' AND parameter3 IS NULL) --parameter3 not named even though it is populated
               ) e
         WHERE e.name = ashdata.event
           AND p3 IN (8,9,10,11,12)
         GROUP BY obj#, p3
         UNION ALL
        SELECT 'LARGE_PERC_PHV0', 'Large number of ASH samples ('||perc_0||'%) have PHV 0 with a valid SQL_EXEC_ID, very likely unresolved adaptive plan (some info based on ASH could be misleading)'
          FROM (SELECT TRUNC(SUM(CASE WHEN sql_plan_hash_value = 0 AND sql_exec_id IS NOT NULL THEN 1 ELSE 0 END)/COUNT(*),3)*100 perc_0
                  FROM ashdata
                 WHERE 'N' <> 'Y')
         WHERE perc_0 >= 2
        )
 ORDER BY scope, message

17:15:18 col:1of5.

17:15:18 col:1of5 "00024_sqld360_323688_0sjx29v99zfqc_1f_19_cursors_and_plans_specific_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:20 col:1of5 "Observations"
17:15:20 Table-level observations

WITH tablespaces AS (SELECT /*+ MATERIALIZE */ tablespace_name, block_size
                       FROM dba_tablespaces),
     tables    AS (SELECT /*+ MATERIALIZE */ owner, table_name, tablespace_name, num_rows, blocks, last_analyzed, degree
                     FROM dba_tables
                    WHERE (owner, table_name) IN (SELECT object_owner, object_name
                                                    FROM plan_table
                                                   WHERE statement_id = 'LIST_OF_TABLES'
                                                     AND remarks = '0sjx29v99zfqc')),
     partitions AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, partition_name, num_rows, blocks, last_analyzed
                      FROM dba_tab_partitions
                     WHERE (table_owner, table_name) IN (SELECT object_owner, object_name
                                                           FROM plan_table
                                                          WHERE statement_id = 'LIST_OF_TABLES'
                                                            AND remarks = '0sjx29v99zfqc')),
     table_and_part_stats AS (SELECT /*+ MATERIALIZE */ owner, table_name, partition_name, stale_stats, stattype_locked
                                FROM dba_tab_statistics
                               WHERE (owner, table_name) IN (SELECT object_owner, object_name
                                                               FROM plan_table
                                                              WHERE statement_id = 'LIST_OF_TABLES'
                                                                AND remarks = '0sjx29v99zfqc')
                                 AND subpartition_name IS NULL),
     indexes    AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, index_name, degree
                      FROM dba_indexes
                     WHERE (table_owner, table_name) IN (SELECT object_owner, object_name
                                                           FROM plan_table
                                                          WHERE statement_id = 'LIST_OF_TABLES'
                                                            AND remarks = '0sjx29v99zfqc')),
     ind_cols AS (SELECT col.index_owner, col.index_name, col.table_owner, col.table_name, idx.index_type, idx.uniqueness,
                         MAX(CASE col.column_position WHEN 01 THEN      col.column_name END)||
                         MAX(CASE col.column_position WHEN 02 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 03 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 04 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 05 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 06 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 07 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 08 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 09 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 10 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 11 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 12 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 13 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 14 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 15 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 16 THEN ':'||col.column_name END) indexed_columns
                    FROM dba_ind_columns col,
                         dba_indexes idx
                   WHERE (idx.table_owner, idx.table_name) IN (SELECT object_owner, object_name
                                                                 FROM plan_table
                                                                WHERE statement_id = 'LIST_OF_TABLES'
                                                                  AND remarks = '0sjx29v99zfqc')
                     AND idx.owner = col.index_owner
                     AND idx.index_name = col.index_name
                   GROUP BY col.index_owner,col.index_name,col.table_owner,col.table_name,idx.index_type,idx.uniqueness)
     , tab_stats_history AS (SELECT o.owner, o.object_name, h.analyzetime, h.rowcnt
                               FROM sys.wri$_optstat_tab_history h,
                                    dba_objects o
                              WHERE (o.owner, o.object_name) IN (SELECT object_owner, object_name
                                                                   FROM plan_table
                                                                  WHERE statement_id = 'LIST_OF_TABLES'
                                                                    AND remarks = '0sjx29v99zfqc')
                                AND o.object_type = 'TABLE'
                                AND o.object_id = h.obj#
                                AND 'Y' = 'Y'
                              UNION ALL
                             SELECT owner, table_name, last_analyzed, num_rows
                               FROM tables
                            )
SELECT scope, owner, table_name, message
  FROM (SELECT 'TABLE_STATS' scope, owner, table_name,  'Table '||table_name||' has statistics more than a month old ('||TRUNC(SYSDATE-last_analyzed)||' days old)' message
          FROM tables
         WHERE last_analyzed < ADD_MONTHS(TRUNC(SYSDATE),-1)
         UNION ALL
        SELECT 'TABLE_STALE_STATS', owner, table_name,  'Table '||table_name||' has stale stats'
          FROM table_and_part_stats
         WHERE stale_stats = 'YES'
           AND partition_name IS NULL
         UNION ALL
        SELECT 'TABLE_LOCKED_STATS', owner, table_name,  'Table '||table_name||' has locked stats'
          FROM table_and_part_stats
         WHERE stattype_locked IN ('ALL','DATA')
           AND partition_name IS NULL
         UNION ALL
        SELECT 'TABLE_MISSING_STATS', owner, table_name,  'Table '||table_name||' has no stats'
          FROM tables
         WHERE num_rows IS NULL
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name,  'Table '||table_name||' has '||num_old_parts||' partition(s) with statistics more than a month old'
          FROM (SELECT COUNT(*) num_old_parts, table_owner, table_name
                  FROM partitions
                 WHERE last_analyzed < ADD_MONTHS(TRUNC(SYSDATE),-1)
                 GROUP BY table_owner, table_name)
         WHERE num_old_parts > 0
         UNION ALL
        SELECT 'PARTITION_STALE_STATS', owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has stale stats'
          FROM table_and_part_stats
         WHERE stale_stats = 'YES'
           AND partition_name IS NOT NULL
         UNION ALL
        SELECT 'PARTITION_LOCKED_STATS', owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has locked stats'
          FROM table_and_part_stats
         WHERE stattype_locked IN ('ALL','DATA')
           AND partition_name IS NOT NULL
         UNION ALL
        SELECT 'PARTITION_MISSING_STATS', table_owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has no stats'
          FROM partitions
         WHERE num_rows IS NULL
         UNION ALL
        SELECT 'TABLE_STATS', owner, table_name,  'Table '||table_name||' stores 0 rows but accounts for more than 0 blocks'
          FROM tables
         WHERE num_rows = 0 and blocks > 0
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name||'.'||partition_name,  'Table partition '||table_name||'.'||partition_name||' stores 0 rows but accounts for more than 0 blocks'
          FROM partitions
         WHERE num_rows = 0 and blocks > 0
         UNION ALL
        SELECT 'TABLE_STATS', owner, table_name,  'Table '||table_name||' seems empty (0 rows and 0 blocks)'
          FROM tables
         WHERE num_rows = 0 and blocks = 0
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name||'.'||partition_name,  'Table partition '||table_name||'.'||partition_name||' seems empty (0 rows and 0 blocks)'
          FROM partitions
         WHERE num_rows = 0 and blocks = 0
         UNION ALL
        SELECT 'TABLE_DEGREE', owner, table_name,  'Table '||table_name||' has a non-default DEGREE ('||TRIM(degree)||')'
          FROM tables
         WHERE TRIM(degree) <> '1'
         UNION ALL
        SELECT 'TABLE_DEGREE', owner, table_name,  'Table '||table_name||' is smaller than 1G in size ('||TRUNC((tbs.block_size * t.blocks)/POWER(10,9),3)||'G) but has DEGREE different than 1 ('||TRIM(degree)||')'
          FROM tables t, tablespaces tbs
         WHERE t.tablespace_name = tbs.tablespace_name
           AND TRIM(degree) <> '1'
           AND (tbs.block_size * t.blocks)/POWER(10,9) <= 1
         UNION ALL
        SELECT 'INDEX_DEGREE', tables.owner, tables.table_name, 'Table '||tables.table_name||' has '||COUNT(*)||' indexes with DEGREE different than the table itself'
          FROM tables,
               indexes
         WHERE tables.owner = indexes.table_owner
           AND tables.table_name = indexes.table_name
           AND TRIM(tables.degree) <> TRIM(indexes.degree)
         GROUP BY tables.owner, tables.table_name
         HAVING COUNT(*) > 0
         UNION ALL
        SELECT 'REDUNDANT_INDEX', r.table_owner, r.table_name, 'Index '||r.index_name||' ('||r.indexed_columns||') is redundant because of '||i.index_name||' ('||i.indexed_columns||')'
          FROM ind_cols r,
               ind_cols i
         WHERE i.table_owner = r.table_owner
           AND i.table_name = r.table_name
           AND i.index_type = r.index_type
           AND i.index_name != r.index_name
           AND i.indexed_columns LIKE r.indexed_columns||':%'
           AND r.uniqueness = 'NONUNIQUE'
         UNION ALL
         SELECT 'TABLE_STATS_HISTORY', owner, table_name, 'Stats were 0 at some point, starting '||init_zero||' up until stats gathering on '||end_zero
           FROM (SELECT owner, object_name table_name, to_char(init_zero,'YYYY-MM-DD/HH24:MI:SS') init_zero, to_char(end_zero,'YYYY-MM-DD/HH24:MI:SS') end_zero
                   FROM tab_stats_history
                   MATCH_RECOGNIZE (
                     PARTITION BY owner, object_name ORDER BY analyzetime
                     MEASURES FIRST(iszero.analyzetime) init_zero,
                              FIRST(a_nonzero.analyzetime) end_zero
                     --ALL ROWS PER MATCH
                     AFTER MATCH SKIP TO FIRST a_nonzero
                     PATTERN (b_nonzero+ iszero+ a_nonzero+)
                     DEFINE b_nonzero AS rowcnt <> 0,
                            iszero  AS rowcnt = 0,
                            a_nonzero AS rowcnt <> 0
                   )
                )
        )
 ORDER BY owner, table_name, scope DESC

17:15:20 col:1of5.

17:15:20 col:1of5 "00025_sqld360_323688_0sjx29v99zfqc_1f_20_tablelevel_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:21 col:2of5 "Identification"
17:15:21 Formatted SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:21 col:2of5 "Identification"
17:15:21 Standalone SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Identification"
17:15:24 Expanded SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Identification"
17:15:24 SQL Text

SELECT /*+ NO_MERGE */
       *
  FROM v$sqltext_with_newlines
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY piece

17:15:24 col:2of5.

17:15:24 col:2of5 "00029_sqld360_323688_0sjx29v99zfqc_2a_25_sql_text.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Identification"
17:15:24 SQL Text from AWR

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sqltext
 WHERE sql_id = '0sjx29v99zfqc'

17:15:24 col:2of5.

17:15:24 col:2of5 "00030_sqld360_323688_0sjx29v99zfqc_2a_26_sql_text_from_awr.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Performance"
17:15:24 SQL Performance Summary

 SELECT /*+ NO_MERGE */
       source, plan_hash_value, force_matching_signature, SUM(executions) execs, SUM(end_of_fetch_count) eof_count, ROUND(SUM(buffer_gets)/DECODE(SUM(executions),0,1,SUM(executions))) avg_buffer_gets,
       ROUND(SUM(elapsed_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_elapsed_time_secs, ROUND(SUM(cpu_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_cpu_time_secs,
       ROUND(SUM(io_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_io_time_secs, ROUND(SUM(rows_processed)/DECODE(SUM(executions),0,1,SUM(executions)),3) avg_rows_processed,
       ROUND(SUM(rows_processed)/DECODE(SUM(fetches),0,1,SUM(fetches)),3) avg_rows_per_fetch,
       sql_profile,
       sql_plan_baseline, sql_patch,
       ROUND(AVG(cost)) avg_cost, MIN(cost) min_cost, MAX(cost) max_cost,
       MIN(first_load_time) first_load_time, MAX(last_load_time) last_load_time,
       MIN(optimizer_env_hash_value) min_cbo_env, max(optimizer_env_hash_value) max_cbo_env,
       MIN(min_dop) min_req_dop, MAX(max_dop) max_req_dop
  FROM (SELECT 'MEM' source, a.plan_hash_value, a.force_matching_signature, a.sql_profile,
                a.sql_plan_baseline, a.sql_patch,
                executions, fetches, end_of_fetch_count, elapsed_time, cpu_time, rows_processed, buffer_gets, first_load_time, last_load_time, optimizer_cost cost, optimizer_env_hash_value, min_dop, max_dop, user_io_wait_time io_time
          FROM gv$sql a,
               (SELECT plan_hash_value, MIN(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) min_dop,
                       MAX(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) max_dop
                  FROM gv$sql_plan
                 WHERE sql_id = '0sjx29v99zfqc'
                   AND other_xml IS NOT NULL
                 GROUP BY plan_hash_value) dop
         WHERE sql_id = '0sjx29v99zfqc'
           AND a.plan_hash_value = dop.plan_hash_value(+)
        UNION ALL
        SELECT 'HIST' source, a.plan_hash_value, a.force_matching_signature, a.sql_profile,
               'N/A' sql_plan_baseline, 'N/A' sql_patch,
               executions_delta executions, fetches_delta fetches,  end_of_fetch_count_delta end_of_fetch_count, elapsed_time_delta elapsed_time, cpu_time_delta cpu_time, rows_processed_delta rows_processed,
               buffer_gets_delta buffer_gets, null first_load_time, null last_load_time, optimizer_cost, optimizer_env_hash_value, min_dop, max_dop, iowait_delta
          FROM dba_hist_sqlstat a,
               (SELECT plan_hash_value, MIN(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) min_dop,
                       MAX(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) max_dop
                  FROM dba_hist_sql_plan
                 WHERE sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND other_xml IS NOT NULL
                 GROUP BY plan_hash_value) dop
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND snap_id BETWEEN 3485 AND 4974
           AND a.plan_hash_value = dop.plan_hash_value(+))
 GROUP BY source, plan_hash_value, force_matching_signature,
          sql_plan_baseline, sql_patch,
          sql_profile

17:15:24 col:2of5.

17:15:24 col:2of5 "00031_sqld360_323688_0sjx29v99zfqc_2b_27_sql_performance_summary.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Performance"
17:15:24 SQL Statistics from Memory


17:15:24 col:2of5.

17:15:24 col:2of5 "00032_sqld360_323688_0sjx29v99zfqc_2b_28_sql_statistics_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Performance"
17:15:24 SQL Statistics from Memory (SQLSTATS)


17:15:24 col:2of5.

17:15:24 col:2of5 "00033_sqld360_323688_0sjx29v99zfqc_2b_29_sql_statistics_from_memory_sqlstats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:24 col:2of5 "Performance"
17:15:24 SQL Plan Statistics from Memory

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_plan_statistics_all
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, plan_hash_value, child_number, id

17:15:24 col:2of5.

17:15:24 col:2of5 "00034_sqld360_323688_0sjx29v99zfqc_2b_30_sql_plan_statistics_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:29 col:2of5 "Performance"
17:15:29 SQL Plan Statistics from Memory (SQLSTATS)


17:15:29 col:2of5.

17:15:29 col:2of5 "00035_sqld360_323688_0sjx29v99zfqc_2b_31_sql_plan_statistics_from_memory_sqlstats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:29 col:2of5 "Performance"
17:15:29 SQL Statistics from History

SELECT /*+ NO_MERGE */
       sn.begin_interval_time, sn.end_interval_time,
       s.*
  FROM dba_hist_sqlstat s,
       dba_hist_snapshot sn
 WHERE s.snap_id = sn.snap_id
   AND s.instance_number = sn.instance_number
   AND s.sql_id = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND s.snap_id BETWEEN 3485 AND 4974
 ORDER BY s.snap_id desc, s.instance_number, s.plan_hash_value

17:15:29 col:2of5.

17:15:29 col:2of5 "00036_sqld360_323688_0sjx29v99zfqc_2b_32_sql_statistics_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:31 col:2of5 "Performance"
17:15:31 SQL Plan Statistics from History

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sql_plan
 WHERE sql_id = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
 ORDER BY plan_hash_value, id

17:15:31 col:2of5.

17:15:31 col:2of5 "00037_sqld360_323688_0sjx29v99zfqc_2b_33_sql_plan_statistics_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:35 col:2of5 "Execution Plans"
17:15:35 Plan Details

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:39 col:2of5 "Execution Plans"
17:15:39 Plan Tree for PHV 312717859 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =312717859
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:39 col:2of5.

17:15:39 col:2of5 "00039_sqld360_323688_0sjx29v99zfqc_2d_1_plan_tree_for_phv_312717859_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:40 col:2of5 "Execution Plans"
17:15:40 Plan from Memory for PHV 312717859
Completed: 17:15:40


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:40 col:2of5 "Execution Plans"
17:15:40 Plan from History for PHV 312717859
Completed: 17:15:40


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:40 col:2of5 "Execution Plans"
17:15:40 Avg et/exec for recent execs for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:15:40 col:2of5.

17:15:40 col:2of5 "00042_sqld360_323688_0sjx29v99zfqc_2d_2_avg_etexec_for_recent_execs_for_phv_312717859.html"
17:15:40 col:2of5 "00043_sqld360_323688_0sjx29v99zfqc_2d_2_avg_etexec_for_recent_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:40 col:2of5 "Execution Plans"
17:15:40 Avg et/exec for historical execs for PHV 312717859

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:15:40 col:2of5.

17:15:40 col:2of5 "00044_sqld360_323688_0sjx29v99zfqc_2d_3_avg_etexec_for_historical_execs_for_phv_312717859.html"
17:15:41 col:2of5 "00045_sqld360_323688_0sjx29v99zfqc_2d_3_avg_etexec_for_historical_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:41 col:2of5 "Execution Plans"
17:15:41 Peak PGA and TEMP usage for recent execs for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:15:41 col:2of5.

17:15:41 col:2of5 "00046_sqld360_323688_0sjx29v99zfqc_2d_4_peak_pga_and_temp_usage_for_recent_execs_for_phv_312717859.html"
17:15:41 col:2of5 "00047_sqld360_323688_0sjx29v99zfqc_2d_4_peak_pga_and_temp_usage_for_recent_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:41 col:2of5 "Execution Plans"
17:15:41 Peak PGA and TEMP usage for historical execs for PHV 312717859

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:15:41 col:2of5.

17:15:41 col:2of5 "00048_sqld360_323688_0sjx29v99zfqc_2d_5_peak_pga_and_temp_usage_for_historical_execs_for_phv_312717859.html"
17:15:41 col:2of5 "00049_sqld360_323688_0sjx29v99zfqc_2d_5_peak_pga_and_temp_usage_for_historical_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:41 col:2of5 "Execution Plans"
17:15:41 Peak Read and Write I/O requests for recent execs for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:15:41 col:2of5.

17:15:41 col:2of5 "00050_sqld360_323688_0sjx29v99zfqc_2d_6_peak_read_and_write_io_requests_for_recent_execs_for_phv_312717859.html"
17:15:41 col:2of5 "00051_sqld360_323688_0sjx29v99zfqc_2d_6_peak_read_and_write_io_requests_for_recent_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:41 col:2of5 "Execution Plans"
17:15:41 Peak Read and Write I/O requests for historical execs for PHV 312717859

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:15:41 col:2of5.

17:15:41 col:2of5 "00052_sqld360_323688_0sjx29v99zfqc_2d_7_peak_read_and_write_io_requests_for_historical_execs_for_phv_312717859.html"
17:15:41 col:2of5 "00053_sqld360_323688_0sjx29v99zfqc_2d_7_peak_read_and_write_io_requests_for_historical_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:15:42 col:2of5.

17:15:42 col:2of5 "00054_sqld360_323688_0sjx29v99zfqc_2d_8_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_312717859.html"
17:15:42 col:2of5 "00055_sqld360_323688_0sjx29v99zfqc_2d_8_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 312717859

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:15:42 col:2of5.

17:15:42 col:2of5 "00056_sqld360_323688_0sjx29v99zfqc_2d_9_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_312717859.html"
17:15:42 col:2of5 "00057_sqld360_323688_0sjx29v99zfqc_2d_9_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Top Wait events for PHV 312717859

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:15:42 col:2of5.

17:15:42 col:2of5 "00058_sqld360_323688_0sjx29v99zfqc_2d_10_top_wait_events_for_phv_312717859.html"
17:15:42 col:2of5 "00059_sqld360_323688_0sjx29v99zfqc_2d_10_top_wait_events_for_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Top Objects accessed by PHV 312717859

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  312717859
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:15:42 col:2of5.

17:15:42 col:2of5 "00060_sqld360_323688_0sjx29v99zfqc_2d_11_top_objects_accessed_by_phv_312717859.html"
17:15:42 col:2of5 "00061_sqld360_323688_0sjx29v99zfqc_2d_11_top_objects_accessed_by_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Top Plan Steps for PHV 312717859

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:15:42 col:2of5.

17:15:42 col:2of5 "00062_sqld360_323688_0sjx29v99zfqc_2d_12_top_plan_steps_for_phv_312717859.html"
17:15:42 col:2of5 "00063_sqld360_323688_0sjx29v99zfqc_2d_12_top_plan_steps_for_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:42 col:2of5 "Execution Plans"
17:15:42 Top Step/Event/Obj for PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  312717859
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:42 col:2of5.

17:15:42 col:2of5 "00064_sqld360_323688_0sjx29v99zfqc_2d_13_top_stepeventobj_for_phv_312717859.html"
17:15:42 col:2of5 "00065_sqld360_323688_0sjx29v99zfqc_2d_13_top_stepeventobj_for_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:43 col:2of5 "Execution Plans"
17:15:43 Top 15 Wait events over recent time for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03gc cr request" ,
NVL(aas_04,0) "e04gc cr multi block request" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr request' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND object_node IN ('ON CPU','gc current block 2-way','gc cr request','gc cr multi block request','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:15:43 col:2of5.

17:15:43 col:2of5 "00066_sqld360_323688_0sjx29v99zfqc_2d_14_top_15_wait_events_over_recent_time_for_phv_312717859.html"
17:15:43 col:2of5 "00067_sqld360_323688_0sjx29v99zfqc_2d_14_top_15_wait_events_over_recent_time_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:43 col:2of5 "Execution Plans"
17:15:43 Top 15 Wait events over historical time for PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04gc buffer busy acquire" ,
NVL(aas_05,0) "e05cell multiblock physical re" ,
NVL(aas_06,0) "e06read by other session" ,
NVL(aas_07,0) "e07gc cr multi block request" ,
NVL(aas_08,0) "e08gc cr block 2-way" ,
NVL(aas_09,0) "e09gc cr grant 2-way" ,
NVL(aas_10,0) "e10gc cr block busy" ,
NVL(aas_11,0) "e11cursor: pin S wait on X" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc buffer busy acquire' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = 'read by other session' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = 'gc cr block 2-way' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = 'gc cr block busy' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = 'cursor: pin S wait on X' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND object_node IN ('ON CPU','gc current block 2-way','cell single block physical read','gc buffer busy acquire','cell multiblock physical read','read by other session',
'gc cr multi block request','gc cr block 2-way','gc cr grant 2-way','gc cr block busy','cursor: pin S wait on X','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:15:43 col:2of5.

17:15:43 col:2of5 "00068_sqld360_323688_0sjx29v99zfqc_2d_15_top_15_wait_events_over_historical_time_for_phv_312717859.html"
17:15:43 col:2of5 "00069_sqld360_323688_0sjx29v99zfqc_2d_15_top_15_wait_events_over_historical_time_for_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:43 col:2of5 "Execution Plans"
17:15:43 Plan Tree with subtree for SQL_EXEC_ID 33556373 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:43 col:2of5.

17:15:43 col:2of5 "00070_sqld360_323688_0sjx29v99zfqc_2d_16_plan_tree_with_subtree_for_sqlexecid_33556373_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:44 col:2of5 "Execution Plans"
17:15:44 Plan with rowsource statistics SQL_EXEC_ID 33556373 of PHV 312717859

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 33556373
AND sql_exec_start = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:15:44 col:2of5.

17:15:44 col:2of5 "00071_sqld360_323688_0sjx29v99zfqc_2d_17_plan_with_rowsource_statistics_sqlexecid_33556373_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:44 col:2of5 "Execution Plans"
17:15:44 Plan Step IDs timeline for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:44 col:2of5.

17:15:44 col:2of5 "00072_sqld360_323688_0sjx29v99zfqc_2d_18_plan_step_ids_timeline_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:44 col:2of5 "00073_sqld360_323688_0sjx29v99zfqc_2d_18_plan_step_ids_timeline_for_sqlexecid_33556373_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:44 col:2of5 "Execution Plans"
17:15:44 Top Step/Event/Obj for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:44 col:2of5.

17:15:44 col:2of5 "00074_sqld360_323688_0sjx29v99zfqc_2d_19_top_stepeventobj_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:44 col:2of5 "00075_sqld360_323688_0sjx29v99zfqc_2d_19_top_stepeventobj_for_sqlexecid_33556373_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:44 col:2of5 "Execution Plans"
17:15:44 Top 15 Wait events timeline for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03gc cr request" ,
NVL(num_sess_04,0) "e04gc cr multi block request" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr request' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','gc cr request','gc cr multi block request','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:44 col:2of5.

17:15:44 col:2of5 "00076_sqld360_323688_0sjx29v99zfqc_2d_20_top_15_wait_events_timeline_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:44 col:2of5 "00077_sqld360_323688_0sjx29v99zfqc_2d_20_top_15_wait_events_timeline_for_sqlexecid_33556373_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:45 col:2of5 "Execution Plans"
17:15:45 DB Time by PX process for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:45 col:2of5.

17:15:45 col:2of5 "00078_sqld360_323688_0sjx29v99zfqc_2d_21_db_time_by_px_process_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:45 col:2of5 "00079_sqld360_323688_0sjx29v99zfqc_2d_21_db_time_by_px_process_for_sqlexecid_33556373_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:45 col:2of5 "Execution Plans"
17:15:45 PGA and TEMP usage for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:45 col:2of5.

17:15:45 col:2of5 "00080_sqld360_323688_0sjx29v99zfqc_2d_22_pga_and_temp_usage_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:45 col:2of5 "00081_sqld360_323688_0sjx29v99zfqc_2d_22_pga_and_temp_usage_for_sqlexecid_33556373_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:45 col:2of5 "Execution Plans"
17:15:45 Read and Write I/O requests for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:45 col:2of5.

17:15:45 col:2of5 "00082_sqld360_323688_0sjx29v99zfqc_2d_23_read_and_write_io_requests_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:45 col:2of5 "00083_sqld360_323688_0sjx29v99zfqc_2d_23_read_and_write_io_requests_for_sqlexecid_33556373_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:45 col:2of5 "Execution Plans"
17:15:45 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:45 col:2of5.

17:15:45 col:2of5 "00084_sqld360_323688_0sjx29v99zfqc_2d_24_read_write_and_interconnect_io_bytes_for_sqlexecid_33556373_of_phv_312717859.html"
17:15:45 col:2of5 "00085_sqld360_323688_0sjx29v99zfqc_2d_24_read_write_and_interconnect_io_bytes_for_sqlexecid_33556373_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:45 col:2of5 "Execution Plans"
17:15:45 Raw Data for SQL_EXEC_ID 33556373 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54258
AND timestamp BETWEEN TO_DATE('20201106063854', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106064000', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556373) = 33556373
AND NVL(distribution, TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106063856', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:15:45 col:2of5.

17:15:45 col:2of5 "00086_sqld360_323688_0sjx29v99zfqc_2d_25_raw_data_for_sqlexecid_33556373_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:46 col:2of5 "Execution Plans"
17:15:46 Plan Tree with subtree for SQL_EXEC_ID 16778648 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:46 col:2of5.

17:15:46 col:2of5 "00087_sqld360_323688_0sjx29v99zfqc_2d_26_plan_tree_with_subtree_for_sqlexecid_16778648_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:46 col:2of5 "Execution Plans"
17:15:46 Plan with rowsource statistics SQL_EXEC_ID 16778648 of PHV 312717859

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 16778648
AND sql_exec_start = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:15:46 col:2of5.

17:15:47 col:2of5 "00088_sqld360_323688_0sjx29v99zfqc_2d_27_plan_with_rowsource_statistics_sqlexecid_16778648_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 Plan Step IDs timeline for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:47 col:2of5.

17:15:47 col:2of5 "00089_sqld360_323688_0sjx29v99zfqc_2d_28_plan_step_ids_timeline_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00090_sqld360_323688_0sjx29v99zfqc_2d_28_plan_step_ids_timeline_for_sqlexecid_16778648_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 Top Step/Event/Obj for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:47 col:2of5.

17:15:47 col:2of5 "00091_sqld360_323688_0sjx29v99zfqc_2d_29_top_stepeventobj_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00092_sqld360_323688_0sjx29v99zfqc_2d_29_top_stepeventobj_for_sqlexecid_16778648_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 Top 15 Wait events timeline for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:47 col:2of5.

17:15:47 col:2of5 "00093_sqld360_323688_0sjx29v99zfqc_2d_30_top_15_wait_events_timeline_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00094_sqld360_323688_0sjx29v99zfqc_2d_30_top_15_wait_events_timeline_for_sqlexecid_16778648_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 DB Time by PX process for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:47 col:2of5.

17:15:47 col:2of5 "00095_sqld360_323688_0sjx29v99zfqc_2d_31_db_time_by_px_process_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00096_sqld360_323688_0sjx29v99zfqc_2d_31_db_time_by_px_process_for_sqlexecid_16778648_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 PGA and TEMP usage for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:47 col:2of5.

17:15:47 col:2of5 "00097_sqld360_323688_0sjx29v99zfqc_2d_32_pga_and_temp_usage_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00098_sqld360_323688_0sjx29v99zfqc_2d_32_pga_and_temp_usage_for_sqlexecid_16778648_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 Read and Write I/O requests for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:47 col:2of5.

17:15:47 col:2of5 "00099_sqld360_323688_0sjx29v99zfqc_2d_33_read_and_write_io_requests_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00100_sqld360_323688_0sjx29v99zfqc_2d_33_read_and_write_io_requests_for_sqlexecid_16778648_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:47 col:2of5 "Execution Plans"
17:15:47 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:47 col:2of5.

17:15:47 col:2of5 "00101_sqld360_323688_0sjx29v99zfqc_2d_34_read_write_and_interconnect_io_bytes_for_sqlexecid_16778648_of_phv_312717859.html"
17:15:47 col:2of5 "00102_sqld360_323688_0sjx29v99zfqc_2d_34_read_write_and_interconnect_io_bytes_for_sqlexecid_16778648_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:48 col:2of5 "Execution Plans"
17:15:48 Raw Data for SQL_EXEC_ID 16778648 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 14768
AND timestamp BETWEEN TO_DATE('20201106161548', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161608', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778648) = 16778648
AND NVL(distribution, TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:15:48 col:2of5.

17:15:48 col:2of5 "00103_sqld360_323688_0sjx29v99zfqc_2d_35_raw_data_for_sqlexecid_16778648_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:48 col:2of5 "Execution Plans"
17:15:48 Plan Tree with subtree for SQL_EXEC_ID 16778632 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:48 col:2of5.

17:15:48 col:2of5 "00104_sqld360_323688_0sjx29v99zfqc_2d_36_plan_tree_with_subtree_for_sqlexecid_16778632_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:49 col:2of5 "Execution Plans"
17:15:49 Plan with rowsource statistics SQL_EXEC_ID 16778632 of PHV 312717859

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 16778632
AND sql_exec_start = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:15:49 col:2of5.

17:15:49 col:2of5 "00105_sqld360_323688_0sjx29v99zfqc_2d_37_plan_with_rowsource_statistics_sqlexecid_16778632_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:49 col:2of5 "Execution Plans"
17:15:49 Plan Step IDs timeline for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:49 col:2of5.

17:15:49 col:2of5 "00106_sqld360_323688_0sjx29v99zfqc_2d_38_plan_step_ids_timeline_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:49 col:2of5 "00107_sqld360_323688_0sjx29v99zfqc_2d_38_plan_step_ids_timeline_for_sqlexecid_16778632_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:49 col:2of5 "Execution Plans"
17:15:49 Top Step/Event/Obj for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:49 col:2of5.

17:15:49 col:2of5 "00108_sqld360_323688_0sjx29v99zfqc_2d_39_top_stepeventobj_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:49 col:2of5 "00109_sqld360_323688_0sjx29v99zfqc_2d_39_top_stepeventobj_for_sqlexecid_16778632_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:49 col:2of5 "Execution Plans"
17:15:49 Top 15 Wait events timeline for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:49 col:2of5.

17:15:49 col:2of5 "00110_sqld360_323688_0sjx29v99zfqc_2d_40_top_15_wait_events_timeline_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:49 col:2of5 "00111_sqld360_323688_0sjx29v99zfqc_2d_40_top_15_wait_events_timeline_for_sqlexecid_16778632_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:49 col:2of5 "Execution Plans"
17:15:49 DB Time by PX process for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:49 col:2of5.

17:15:50 col:2of5 "00112_sqld360_323688_0sjx29v99zfqc_2d_41_db_time_by_px_process_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:50 col:2of5 "00113_sqld360_323688_0sjx29v99zfqc_2d_41_db_time_by_px_process_for_sqlexecid_16778632_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:50 col:2of5 "Execution Plans"
17:15:50 PGA and TEMP usage for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:50 col:2of5.

17:15:50 col:2of5 "00114_sqld360_323688_0sjx29v99zfqc_2d_42_pga_and_temp_usage_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:50 col:2of5 "00115_sqld360_323688_0sjx29v99zfqc_2d_42_pga_and_temp_usage_for_sqlexecid_16778632_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:50 col:2of5 "Execution Plans"
17:15:50 Read and Write I/O requests for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:50 col:2of5.

17:15:50 col:2of5 "00116_sqld360_323688_0sjx29v99zfqc_2d_43_read_and_write_io_requests_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:50 col:2of5 "00117_sqld360_323688_0sjx29v99zfqc_2d_43_read_and_write_io_requests_for_sqlexecid_16778632_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:50 col:2of5 "Execution Plans"
17:15:50 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:50 col:2of5.

17:15:50 col:2of5 "00118_sqld360_323688_0sjx29v99zfqc_2d_44_read_write_and_interconnect_io_bytes_for_sqlexecid_16778632_of_phv_312717859.html"
17:15:50 col:2of5 "00119_sqld360_323688_0sjx29v99zfqc_2d_44_read_write_and_interconnect_io_bytes_for_sqlexecid_16778632_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:50 col:2of5 "Execution Plans"
17:15:50 Raw Data for SQL_EXEC_ID 16778632 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3508
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 33322
AND timestamp BETWEEN TO_DATE('20201106142746', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106142805', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778632) = 16778632
AND NVL(distribution, TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106142745', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:15:50 col:2of5.

17:15:50 col:2of5 "00120_sqld360_323688_0sjx29v99zfqc_2d_45_raw_data_for_sqlexecid_16778632_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:51 col:2of5 "Execution Plans"
17:15:51 Plan Tree with subtree for SQL_EXEC_ID 16778451 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:51 col:2of5.

17:15:51 col:2of5 "00121_sqld360_323688_0sjx29v99zfqc_2d_46_plan_tree_with_subtree_for_sqlexecid_16778451_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:51 col:2of5 "Execution Plans"
17:15:51 Plan Step IDs timeline for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:51 col:2of5.

17:15:51 col:2of5 "00122_sqld360_323688_0sjx29v99zfqc_2d_47_plan_step_ids_timeline_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:51 col:2of5 "00123_sqld360_323688_0sjx29v99zfqc_2d_47_plan_step_ids_timeline_for_sqlexecid_16778451_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:51 col:2of5 "Execution Plans"
17:15:51 Top Step/Event/Obj for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:51 col:2of5.

17:15:51 col:2of5 "00124_sqld360_323688_0sjx29v99zfqc_2d_48_top_stepeventobj_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00125_sqld360_323688_0sjx29v99zfqc_2d_48_top_stepeventobj_for_sqlexecid_16778451_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 Top 15 Wait events timeline SQL_EXEC_ID 16778451 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02gc cr grant 2-way" ,
NVL(num_sess_03,0) "e03ON CPU" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','gc cr grant 2-way','ON CPU','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:52 col:2of5.

17:15:52 col:2of5 "00126_sqld360_323688_0sjx29v99zfqc_2d_49_top_15_wait_events_timeline_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00127_sqld360_323688_0sjx29v99zfqc_2d_49_top_15_wait_events_timeline_sqlexecid_16778451_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 DB Time by PX process for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:52 col:2of5.

17:15:52 col:2of5 "00128_sqld360_323688_0sjx29v99zfqc_2d_50_db_time_by_px_process_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00129_sqld360_323688_0sjx29v99zfqc_2d_50_db_time_by_px_process_for_sqlexecid_16778451_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 PGA and TEMP usage for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:52 col:2of5.

17:15:52 col:2of5 "00130_sqld360_323688_0sjx29v99zfqc_2d_51_pga_and_temp_usage_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00131_sqld360_323688_0sjx29v99zfqc_2d_51_pga_and_temp_usage_for_sqlexecid_16778451_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 Read and Write I/O requests for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:52 col:2of5.

17:15:52 col:2of5 "00132_sqld360_323688_0sjx29v99zfqc_2d_52_read_and_write_io_requests_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00133_sqld360_323688_0sjx29v99zfqc_2d_52_read_and_write_io_requests_for_sqlexecid_16778451_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:52 col:2of5.

17:15:52 col:2of5 "00134_sqld360_323688_0sjx29v99zfqc_2d_53_read_write_and_interconnect_io_bytes_for_sqlexecid_16778451_of_phv_312717859.html"
17:15:52 col:2of5 "00135_sqld360_323688_0sjx29v99zfqc_2d_53_read_write_and_interconnect_io_bytes_for_sqlexecid_16778451_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:52 col:2of5 "Execution Plans"
17:15:52 Raw Data for SQL_EXEC_ID 16778451 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12972
AND timestamp BETWEEN TO_DATE('20201103060552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103060802', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778451) = 16778451
AND NVL(distribution, TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103060550', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:15:52 col:2of5.

17:15:52 col:2of5 "00136_sqld360_323688_0sjx29v99zfqc_2d_54_raw_data_for_sqlexecid_16778451_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:53 col:2of5 "Execution Plans"
17:15:53 Plan Tree with subtree for SQL_EXEC_ID 16777452 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:53 col:2of5.

17:15:53 col:2of5 "00137_sqld360_323688_0sjx29v99zfqc_2d_55_plan_tree_with_subtree_for_sqlexecid_16777452_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Plan Step IDs timeline for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:54 col:2of5.

17:15:54 col:2of5 "00138_sqld360_323688_0sjx29v99zfqc_2d_56_plan_step_ids_timeline_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00139_sqld360_323688_0sjx29v99zfqc_2d_56_plan_step_ids_timeline_for_sqlexecid_16777452_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Top Step/Event/Obj for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:54 col:2of5.

17:15:54 col:2of5 "00140_sqld360_323688_0sjx29v99zfqc_2d_57_top_stepeventobj_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00141_sqld360_323688_0sjx29v99zfqc_2d_57_top_stepeventobj_for_sqlexecid_16777452_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Top 15 Wait events timeline SQL_EXEC_ID 16777452 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:54 col:2of5.

17:15:54 col:2of5 "00142_sqld360_323688_0sjx29v99zfqc_2d_58_top_15_wait_events_timeline_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00143_sqld360_323688_0sjx29v99zfqc_2d_58_top_15_wait_events_timeline_sqlexecid_16777452_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 DB Time by PX process for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:54 col:2of5.

17:15:54 col:2of5 "00144_sqld360_323688_0sjx29v99zfqc_2d_59_db_time_by_px_process_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00145_sqld360_323688_0sjx29v99zfqc_2d_59_db_time_by_px_process_for_sqlexecid_16777452_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 PGA and TEMP usage for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:54 col:2of5.

17:15:54 col:2of5 "00146_sqld360_323688_0sjx29v99zfqc_2d_60_pga_and_temp_usage_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00147_sqld360_323688_0sjx29v99zfqc_2d_60_pga_and_temp_usage_for_sqlexecid_16777452_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Read and Write I/O requests for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:54 col:2of5.

17:15:54 col:2of5 "00148_sqld360_323688_0sjx29v99zfqc_2d_61_read_and_write_io_requests_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00149_sqld360_323688_0sjx29v99zfqc_2d_61_read_and_write_io_requests_for_sqlexecid_16777452_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:54 col:2of5.

17:15:54 col:2of5 "00150_sqld360_323688_0sjx29v99zfqc_2d_62_read_write_and_interconnect_io_bytes_for_sqlexecid_16777452_of_phv_312717859.html"
17:15:54 col:2of5 "00151_sqld360_323688_0sjx29v99zfqc_2d_62_read_write_and_interconnect_io_bytes_for_sqlexecid_16777452_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:54 col:2of5 "Execution Plans"
17:15:54 Raw Data for SQL_EXEC_ID 16777452 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5432
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53109
AND timestamp BETWEEN TO_DATE('20201021072108', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021072238', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777452) = 16777452
AND NVL(distribution, TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021072107', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:15:54 col:2of5.

17:15:54 col:2of5 "00152_sqld360_323688_0sjx29v99zfqc_2d_63_raw_data_for_sqlexecid_16777452_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:55 col:2of5 "Execution Plans"
17:15:55 Plan Tree with subtree for SQL_EXEC_ID 33554530 of PHV 312717859

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =312717859
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =312717859
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:55 col:2of5.

17:15:55 col:2of5 "00153_sqld360_323688_0sjx29v99zfqc_2d_64_plan_tree_with_subtree_for_sqlexecid_33554530_of_phv_312717859_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 Plan Step IDs timeline for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:15:56 col:2of5.

17:15:56 col:2of5 "00154_sqld360_323688_0sjx29v99zfqc_2d_65_plan_step_ids_timeline_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:56 col:2of5 "00155_sqld360_323688_0sjx29v99zfqc_2d_65_plan_step_ids_timeline_for_sqlexecid_33554530_of_phv_312717859_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 Top Step/Event/Obj for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:15:56 col:2of5.

17:15:56 col:2of5 "00156_sqld360_323688_0sjx29v99zfqc_2d_66_top_stepeventobj_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:56 col:2of5 "00157_sqld360_323688_0sjx29v99zfqc_2d_66_top_stepeventobj_for_sqlexecid_33554530_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 Top 15 Wait events timeline SQL_EXEC_ID 33554530 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03gc current block 2-way" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','ON CPU','gc current block 2-way','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:15:56 col:2of5.

17:15:56 col:2of5 "00158_sqld360_323688_0sjx29v99zfqc_2d_67_top_15_wait_events_timeline_sqlexecid_33554530_of_phv_312717859.html"
17:15:56 col:2of5 "00159_sqld360_323688_0sjx29v99zfqc_2d_67_top_15_wait_events_timeline_sqlexecid_33554530_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 DB Time by PX process for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:15:56 col:2of5.

17:15:56 col:2of5 "00160_sqld360_323688_0sjx29v99zfqc_2d_68_db_time_by_px_process_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:56 col:2of5 "00161_sqld360_323688_0sjx29v99zfqc_2d_68_db_time_by_px_process_for_sqlexecid_33554530_of_phv_312717859_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 PGA and TEMP usage for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:56 col:2of5.

17:15:56 col:2of5 "00162_sqld360_323688_0sjx29v99zfqc_2d_69_pga_and_temp_usage_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:56 col:2of5 "00163_sqld360_323688_0sjx29v99zfqc_2d_69_pga_and_temp_usage_for_sqlexecid_33554530_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:56 col:2of5 "Execution Plans"
17:15:56 Read and Write I/O requests for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:56 col:2of5.

17:15:56 col:2of5 "00164_sqld360_323688_0sjx29v99zfqc_2d_70_read_and_write_io_requests_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:57 col:2of5 "00165_sqld360_323688_0sjx29v99zfqc_2d_70_read_and_write_io_requests_for_sqlexecid_33554530_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:57 col:2of5 "Execution Plans"
17:15:57 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:15:57 col:2of5.

17:15:57 col:2of5 "00166_sqld360_323688_0sjx29v99zfqc_2d_71_read_write_and_interconnect_io_bytes_for_sqlexecid_33554530_of_phv_312717859.html"
17:15:57 col:2of5 "00167_sqld360_323688_0sjx29v99zfqc_2d_71_read_write_and_interconnect_io_bytes_for_sqlexecid_33554530_of_phv_312717859_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:57 col:2of5 "Execution Plans"
17:15:57 Raw Data for SQL_EXEC_ID 33554530 of PHV 312717859

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  312717859
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3881
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5564
AND timestamp BETWEEN TO_DATE('20201020070844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020071014', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554530) = 33554530
AND NVL(distribution, TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020070841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:15:57 col:2of5.

17:15:57 col:2of5 "00168_sqld360_323688_0sjx29v99zfqc_2d_72_raw_data_for_sqlexecid_33554530_of_phv_312717859.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:57 col:2of5 "Execution Plans"
17:15:57 Plan Tree for PHV 4066339909 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =4066339909
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:15:57 col:2of5.

17:15:57 col:2of5 "00169_sqld360_323688_0sjx29v99zfqc_2d_73_plan_tree_for_phv_4066339909_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:58 col:2of5 "Execution Plans"
17:15:58 Plan from Memory for PHV 4066339909
Completed: 17:15:59


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:59 col:2of5 "Execution Plans"
17:15:59 Plan from History for PHV 4066339909
Completed: 17:15:59


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:59 col:2of5 "Execution Plans"
17:15:59 Avg et/exec for recent execs for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:15:59 col:2of5.

17:15:59 col:2of5 "00172_sqld360_323688_0sjx29v99zfqc_2d_74_avg_etexec_for_recent_execs_for_phv_4066339909.html"
17:15:59 col:2of5 "00173_sqld360_323688_0sjx29v99zfqc_2d_74_avg_etexec_for_recent_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:59 col:2of5 "Execution Plans"
17:15:59 Avg et/exec for historical execs for PHV 4066339909

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:15:59 col:2of5.

17:15:59 col:2of5 "00174_sqld360_323688_0sjx29v99zfqc_2d_75_avg_etexec_for_historical_execs_for_phv_4066339909.html"
17:16:00 col:2of5 "00175_sqld360_323688_0sjx29v99zfqc_2d_75_avg_etexec_for_historical_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:00 col:2of5 "Execution Plans"
17:16:00 Peak PGA and TEMP usage for recent execs for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:00 col:2of5.

17:16:00 col:2of5 "00176_sqld360_323688_0sjx29v99zfqc_2d_76_peak_pga_and_temp_usage_for_recent_execs_for_phv_4066339909.html"
17:16:00 col:2of5 "00177_sqld360_323688_0sjx29v99zfqc_2d_76_peak_pga_and_temp_usage_for_recent_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:00 col:2of5 "Execution Plans"
17:16:00 Peak PGA and TEMP usage for historical execs for PHV 4066339909

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:00 col:2of5.

17:16:00 col:2of5 "00178_sqld360_323688_0sjx29v99zfqc_2d_77_peak_pga_and_temp_usage_for_historical_execs_for_phv_4066339909.html"
17:16:00 col:2of5 "00179_sqld360_323688_0sjx29v99zfqc_2d_77_peak_pga_and_temp_usage_for_historical_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:00 col:2of5 "Execution Plans"
17:16:00 Peak Read and Write I/O requests for recent execs for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:00 col:2of5.

17:16:00 col:2of5 "00180_sqld360_323688_0sjx29v99zfqc_2d_78_peak_read_and_write_io_requests_for_recent_execs_for_phv_4066339909.html"
17:16:00 col:2of5 "00181_sqld360_323688_0sjx29v99zfqc_2d_78_peak_read_and_write_io_requests_for_recent_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:00 col:2of5 "Execution Plans"
17:16:00 Peak Read and Write I/O requests for historical execs for PHV 4066339909

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:00 col:2of5.

17:16:00 col:2of5 "00182_sqld360_323688_0sjx29v99zfqc_2d_79_peak_read_and_write_io_requests_for_historical_execs_for_phv_4066339909.html"
17:16:00 col:2of5 "00183_sqld360_323688_0sjx29v99zfqc_2d_79_peak_read_and_write_io_requests_for_historical_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:01 col:2of5.

17:16:01 col:2of5 "00184_sqld360_323688_0sjx29v99zfqc_2d_80_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_4066339909.html"
17:16:01 col:2of5 "00185_sqld360_323688_0sjx29v99zfqc_2d_80_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 4066339909

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:01 col:2of5.

17:16:01 col:2of5 "00186_sqld360_323688_0sjx29v99zfqc_2d_81_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_4066339909.html"
17:16:01 col:2of5 "00187_sqld360_323688_0sjx29v99zfqc_2d_81_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Top Wait events for PHV 4066339909

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:16:01 col:2of5.

17:16:01 col:2of5 "00188_sqld360_323688_0sjx29v99zfqc_2d_82_top_wait_events_for_phv_4066339909.html"
17:16:01 col:2of5 "00189_sqld360_323688_0sjx29v99zfqc_2d_82_top_wait_events_for_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Top Objects accessed by PHV 4066339909

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  4066339909
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:16:01 col:2of5.

17:16:01 col:2of5 "00190_sqld360_323688_0sjx29v99zfqc_2d_83_top_objects_accessed_by_phv_4066339909.html"
17:16:01 col:2of5 "00191_sqld360_323688_0sjx29v99zfqc_2d_83_top_objects_accessed_by_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Top Plan Steps for PHV 4066339909

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:16:01 col:2of5.

17:16:01 col:2of5 "00192_sqld360_323688_0sjx29v99zfqc_2d_84_top_plan_steps_for_phv_4066339909.html"
17:16:01 col:2of5 "00193_sqld360_323688_0sjx29v99zfqc_2d_84_top_plan_steps_for_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Top Step/Event/Obj for PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  4066339909
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:01 col:2of5.

17:16:01 col:2of5 "00194_sqld360_323688_0sjx29v99zfqc_2d_85_top_stepeventobj_for_phv_4066339909.html"
17:16:01 col:2of5 "00195_sqld360_323688_0sjx29v99zfqc_2d_85_top_stepeventobj_for_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:01 col:2of5 "Execution Plans"
17:16:01 Top 15 Wait events over recent time for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03gc cr block busy" ,
NVL(aas_04,0) "e04gc cr multi block request" ,
NVL(aas_05,0) "e05cell single block physical " ,
NVL(aas_06,0) "e06gc cr request" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr block busy' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = 'gc cr request' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND object_node IN ('ON CPU','gc current block 2-way','gc cr block busy','gc cr multi block request','cell single block physical read','gc cr request',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:01 col:2of5.

17:16:02 col:2of5 "00196_sqld360_323688_0sjx29v99zfqc_2d_86_top_15_wait_events_over_recent_time_for_phv_4066339909.html"
17:16:02 col:2of5 "00197_sqld360_323688_0sjx29v99zfqc_2d_86_top_15_wait_events_over_recent_time_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:02 col:2of5 "Execution Plans"
17:16:02 Top 15 Wait events over historical time for PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04gc buffer busy acquire" ,
NVL(aas_05,0) "e05gc cr multi block request" ,
NVL(aas_06,0) "e06gc cr grant 2-way" ,
NVL(aas_07,0) "e07cell multiblock physical re" ,
NVL(aas_08,0) "e08gc cr block 2-way" ,
NVL(aas_09,0) "e09resmgr:cpu quantum" ,
NVL(aas_10,0) "e10latch: gc element" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc buffer busy acquire' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = 'gc cr block 2-way' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = 'resmgr:cpu quantum' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = 'latch: gc element' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND object_node IN ('ON CPU','gc current block 2-way','cell single block physical read','gc buffer busy acquire','gc cr multi block request','gc cr grant 2-way',
'cell multiblock physical read','gc cr block 2-way','resmgr:cpu quantum','latch: gc element','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:02 col:2of5.

17:16:02 col:2of5 "00198_sqld360_323688_0sjx29v99zfqc_2d_87_top_15_wait_events_over_historical_time_for_phv_4066339909.html"
17:16:02 col:2of5 "00199_sqld360_323688_0sjx29v99zfqc_2d_87_top_15_wait_events_over_historical_time_for_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:02 col:2of5 "Execution Plans"
17:16:02 Plan Tree with subtree for SQL_EXEC_ID 33556374 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:02 col:2of5.

17:16:02 col:2of5 "00200_sqld360_323688_0sjx29v99zfqc_2d_88_plan_tree_with_subtree_for_sqlexecid_33556374_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:03 col:2of5 "Execution Plans"
17:16:03 Plan with rowsource statistics SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 33556374
AND sql_exec_start = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:16:03 col:2of5.

17:16:03 col:2of5 "00201_sqld360_323688_0sjx29v99zfqc_2d_89_plan_with_rowsource_statistics_sqlexecid_33556374_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:03 col:2of5 "Execution Plans"
17:16:03 Plan Step IDs timeline for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:03 col:2of5.

17:16:03 col:2of5 "00202_sqld360_323688_0sjx29v99zfqc_2d_90_plan_step_ids_timeline_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:03 col:2of5 "00203_sqld360_323688_0sjx29v99zfqc_2d_90_plan_step_ids_timeline_for_sqlexecid_33556374_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:03 col:2of5 "Execution Plans"
17:16:03 Top Step/Event/Obj for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:03 col:2of5.

17:16:03 col:2of5 "00204_sqld360_323688_0sjx29v99zfqc_2d_91_top_stepeventobj_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:03 col:2of5 "00205_sqld360_323688_0sjx29v99zfqc_2d_91_top_stepeventobj_for_sqlexecid_33556374_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:03 col:2of5 "Execution Plans"
17:16:03 Top 15 Wait events timeline for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03gc cr multi block request" ,
NVL(num_sess_04,0) "e04gc cr request" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr request' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','gc cr multi block request','gc cr request','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:03 col:2of5.

17:16:03 col:2of5 "00206_sqld360_323688_0sjx29v99zfqc_2d_92_top_15_wait_events_timeline_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:04 col:2of5 "00207_sqld360_323688_0sjx29v99zfqc_2d_92_top_15_wait_events_timeline_for_sqlexecid_33556374_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:04 col:2of5 "Execution Plans"
17:16:04 DB Time by PX process for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:04 col:2of5.

17:16:04 col:2of5 "00208_sqld360_323688_0sjx29v99zfqc_2d_93_db_time_by_px_process_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:04 col:2of5 "00209_sqld360_323688_0sjx29v99zfqc_2d_93_db_time_by_px_process_for_sqlexecid_33556374_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:04 col:2of5 "Execution Plans"
17:16:04 PGA and TEMP usage for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:04 col:2of5.

17:16:04 col:2of5 "00210_sqld360_323688_0sjx29v99zfqc_2d_94_pga_and_temp_usage_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:04 col:2of5 "00211_sqld360_323688_0sjx29v99zfqc_2d_94_pga_and_temp_usage_for_sqlexecid_33556374_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:04 col:2of5 "Execution Plans"
17:16:04 Read and Write I/O requests for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:04 col:2of5.

17:16:04 col:2of5 "00212_sqld360_323688_0sjx29v99zfqc_2d_95_read_and_write_io_requests_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:04 col:2of5 "00213_sqld360_323688_0sjx29v99zfqc_2d_95_read_and_write_io_requests_for_sqlexecid_33556374_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:04 col:2of5 "Execution Plans"
17:16:04 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:04 col:2of5.

17:16:04 col:2of5 "00214_sqld360_323688_0sjx29v99zfqc_2d_96_read_write_and_interconnect_io_bytes_for_sqlexecid_33556374_of_phv_4066339909.html"
17:16:04 col:2of5 "00215_sqld360_323688_0sjx29v99zfqc_2d_96_read_write_and_interconnect_io_bytes_for_sqlexecid_33556374_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:04 col:2of5 "Execution Plans"
17:16:04 Raw Data for SQL_EXEC_ID 33556374 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4279
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 60849
AND timestamp BETWEEN TO_DATE('20201106074617', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106074649', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556374) = 33556374
AND NVL(distribution, TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106074618', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:16:04 col:2of5.

17:16:04 col:2of5 "00216_sqld360_323688_0sjx29v99zfqc_2d_97_raw_data_for_sqlexecid_33556374_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:05 col:2of5 "Execution Plans"
17:16:05 Plan Tree with subtree for SQL_EXEC_ID 33556452 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:05 col:2of5.

17:16:05 col:2of5 "00217_sqld360_323688_0sjx29v99zfqc_2d_98_plan_tree_with_subtree_for_sqlexecid_33556452_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Plan with rowsource statistics SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 33556452
AND sql_exec_start = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:16:06 col:2of5.

17:16:06 col:2of5 "00218_sqld360_323688_0sjx29v99zfqc_2d_99_plan_with_rowsource_statistics_sqlexecid_33556452_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Plan Step IDs timeline for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:06 col:2of5.

17:16:06 col:2of5 "00219_sqld360_323688_0sjx29v99zfqc_2d_100_plan_step_ids_timeline_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00220_sqld360_323688_0sjx29v99zfqc_2d_100_plan_step_ids_timeline_for_sqlexecid_33556452_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Top Step/Event/Obj for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:06 col:2of5.

17:16:06 col:2of5 "00221_sqld360_323688_0sjx29v99zfqc_2d_101_top_stepeventobj_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00222_sqld360_323688_0sjx29v99zfqc_2d_101_top_stepeventobj_for_sqlexecid_33556452_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Top 15 Wait events timeline for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02cell single block physical " ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','cell single block physical read','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:06 col:2of5.

17:16:06 col:2of5 "00223_sqld360_323688_0sjx29v99zfqc_2d_102_top_15_wait_events_timeline_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00224_sqld360_323688_0sjx29v99zfqc_2d_102_top_15_wait_events_timeline_for_sqlexecid_33556452_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 DB Time by PX process for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:06 col:2of5.

17:16:06 col:2of5 "00225_sqld360_323688_0sjx29v99zfqc_2d_103_db_time_by_px_process_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00226_sqld360_323688_0sjx29v99zfqc_2d_103_db_time_by_px_process_for_sqlexecid_33556452_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 PGA and TEMP usage for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:06 col:2of5.

17:16:06 col:2of5 "00227_sqld360_323688_0sjx29v99zfqc_2d_104_pga_and_temp_usage_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00228_sqld360_323688_0sjx29v99zfqc_2d_104_pga_and_temp_usage_for_sqlexecid_33556452_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Read and Write I/O requests for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:06 col:2of5.

17:16:06 col:2of5 "00229_sqld360_323688_0sjx29v99zfqc_2d_105_read_and_write_io_requests_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:06 col:2of5 "00230_sqld360_323688_0sjx29v99zfqc_2d_105_read_and_write_io_requests_for_sqlexecid_33556452_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:06 col:2of5 "Execution Plans"
17:16:06 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:06 col:2of5.

17:16:06 col:2of5 "00231_sqld360_323688_0sjx29v99zfqc_2d_106_read_write_and_interconnect_io_bytes_for_sqlexecid_33556452_of_phv_4066339909.html"
17:16:07 col:2of5 "00232_sqld360_323688_0sjx29v99zfqc_2d_106_read_write_and_interconnect_io_bytes_for_sqlexecid_33556452_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:07 col:2of5 "Execution Plans"
17:16:07 Raw Data for SQL_EXEC_ID 33556452 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4642
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 56249
AND timestamp BETWEEN TO_DATE('20201106150839', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106150900', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556452) = 33556452
AND NVL(distribution, TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106150841', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:16:07 col:2of5.

17:16:07 col:2of5 "00233_sqld360_323688_0sjx29v99zfqc_2d_107_raw_data_for_sqlexecid_33556452_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:07 col:2of5 "Execution Plans"
17:16:07 Plan Tree with subtree for SQL_EXEC_ID 16778645 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:07 col:2of5.

17:16:07 col:2of5 "00234_sqld360_323688_0sjx29v99zfqc_2d_108_plan_tree_with_subtree_for_sqlexecid_16778645_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:08 col:2of5 "Execution Plans"
17:16:08 Plan with rowsource statistics SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 16778645
AND sql_exec_start = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:16:08 col:2of5.

17:16:08 col:2of5 "00235_sqld360_323688_0sjx29v99zfqc_2d_109_plan_with_rowsource_statistics_sqlexecid_16778645_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:08 col:2of5 "Execution Plans"
17:16:08 Plan Step IDs timeline for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:08 col:2of5.

17:16:08 col:2of5 "00236_sqld360_323688_0sjx29v99zfqc_2d_110_plan_step_ids_timeline_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:08 col:2of5 "00237_sqld360_323688_0sjx29v99zfqc_2d_110_plan_step_ids_timeline_for_sqlexecid_16778645_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:08 col:2of5 "Execution Plans"
17:16:08 Top Step/Event/Obj for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC


17:16:08 col:2of5.

17:16:08 col:2of5 "00238_sqld360_323688_0sjx29v99zfqc_2d_111_top_stepeventobj_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:08 col:2of5 "00239_sqld360_323688_0sjx29v99zfqc_2d_111_top_stepeventobj_for_sqlexecid_16778645_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:08 col:2of5 "Execution Plans"
17:16:08 Top 15 Wait events timeline for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:08 col:2of5.

17:16:08 col:2of5 "00240_sqld360_323688_0sjx29v99zfqc_2d_112_top_15_wait_events_timeline_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:09 col:2of5 "00241_sqld360_323688_0sjx29v99zfqc_2d_112_top_15_wait_events_timeline_for_sqlexecid_16778645_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:09 col:2of5 "Execution Plans"
17:16:09 DB Time by PX process for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:09 col:2of5.

17:16:09 col:2of5 "00242_sqld360_323688_0sjx29v99zfqc_2d_113_db_time_by_px_process_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:09 col:2of5 "00243_sqld360_323688_0sjx29v99zfqc_2d_113_db_time_by_px_process_for_sqlexecid_16778645_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:09 col:2of5 "Execution Plans"
17:16:09 PGA and TEMP usage for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:09 col:2of5.

17:16:09 col:2of5 "00244_sqld360_323688_0sjx29v99zfqc_2d_114_pga_and_temp_usage_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:09 col:2of5 "00245_sqld360_323688_0sjx29v99zfqc_2d_114_pga_and_temp_usage_for_sqlexecid_16778645_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:09 col:2of5 "Execution Plans"
17:16:09 Read and Write I/O requests for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:09 col:2of5.

17:16:09 col:2of5 "00246_sqld360_323688_0sjx29v99zfqc_2d_115_read_and_write_io_requests_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:09 col:2of5 "00247_sqld360_323688_0sjx29v99zfqc_2d_115_read_and_write_io_requests_for_sqlexecid_16778645_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:09 col:2of5 "Execution Plans"
17:16:09 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:09 col:2of5.

17:16:09 col:2of5 "00248_sqld360_323688_0sjx29v99zfqc_2d_116_read_write_and_interconnect_io_bytes_for_sqlexecid_16778645_of_phv_4066339909.html"
17:16:09 col:2of5 "00249_sqld360_323688_0sjx29v99zfqc_2d_116_read_write_and_interconnect_io_bytes_for_sqlexecid_16778645_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:09 col:2of5 "Execution Plans"
17:16:09 Raw Data for SQL_EXEC_ID 16778645 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 395
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2953
AND timestamp BETWEEN TO_DATE('20201106161346', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106161408', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778645) = 16778645
AND NVL(distribution, TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106161345', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:16:09 col:2of5.

17:16:09 col:2of5 "00250_sqld360_323688_0sjx29v99zfqc_2d_117_raw_data_for_sqlexecid_16778645_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:10 col:2of5 "Execution Plans"
17:16:10 Plan Tree with subtree for SQL_EXEC_ID 16777668 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:10 col:2of5.

17:16:10 col:2of5 "00251_sqld360_323688_0sjx29v99zfqc_2d_118_plan_tree_with_subtree_for_sqlexecid_16777668_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 Plan Step IDs timeline for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:11 col:2of5.

17:16:11 col:2of5 "00252_sqld360_323688_0sjx29v99zfqc_2d_119_plan_step_ids_timeline_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00253_sqld360_323688_0sjx29v99zfqc_2d_119_plan_step_ids_timeline_for_sqlexecid_16777668_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 Top Step/Event/Obj for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:11 col:2of5.

17:16:11 col:2of5 "00254_sqld360_323688_0sjx29v99zfqc_2d_120_top_stepeventobj_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00255_sqld360_323688_0sjx29v99zfqc_2d_120_top_stepeventobj_for_sqlexecid_16777668_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 Top 15 Wait events timeline SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03gc cr grant 2-way" ,
NVL(num_sess_04,0) "e04gc current block 2-way" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','ON CPU','gc cr grant 2-way','gc current block 2-way','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:11 col:2of5.

17:16:11 col:2of5 "00256_sqld360_323688_0sjx29v99zfqc_2d_121_top_15_wait_events_timeline_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00257_sqld360_323688_0sjx29v99zfqc_2d_121_top_15_wait_events_timeline_sqlexecid_16777668_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 DB Time by PX process for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:11 col:2of5.

17:16:11 col:2of5 "00258_sqld360_323688_0sjx29v99zfqc_2d_122_db_time_by_px_process_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00259_sqld360_323688_0sjx29v99zfqc_2d_122_db_time_by_px_process_for_sqlexecid_16777668_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 PGA and TEMP usage for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:11 col:2of5.

17:16:11 col:2of5 "00260_sqld360_323688_0sjx29v99zfqc_2d_123_pga_and_temp_usage_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00261_sqld360_323688_0sjx29v99zfqc_2d_123_pga_and_temp_usage_for_sqlexecid_16777668_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 Read and Write I/O requests for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:11 col:2of5.

17:16:11 col:2of5 "00262_sqld360_323688_0sjx29v99zfqc_2d_124_read_and_write_io_requests_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00263_sqld360_323688_0sjx29v99zfqc_2d_124_read_and_write_io_requests_for_sqlexecid_16777668_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:11 col:2of5 "Execution Plans"
17:16:11 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:11 col:2of5.

17:16:11 col:2of5 "00264_sqld360_323688_0sjx29v99zfqc_2d_125_read_write_and_interconnect_io_bytes_for_sqlexecid_16777668_of_phv_4066339909.html"
17:16:11 col:2of5 "00265_sqld360_323688_0sjx29v99zfqc_2d_125_read_write_and_interconnect_io_bytes_for_sqlexecid_16777668_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:12 col:2of5 "Execution Plans"
17:16:12 Raw Data for SQL_EXEC_ID 16777668 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201022234959', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022235229', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777668) = 16777668
AND NVL(distribution, TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022234955', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:12 col:2of5.

17:16:12 col:2of5 "00266_sqld360_323688_0sjx29v99zfqc_2d_126_raw_data_for_sqlexecid_16777668_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:12 col:2of5 "Execution Plans"
17:16:12 Plan Tree with subtree for SQL_EXEC_ID 16777669 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:12 col:2of5.

17:16:12 col:2of5 "00267_sqld360_323688_0sjx29v99zfqc_2d_127_plan_tree_with_subtree_for_sqlexecid_16777669_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:13 col:2of5 "Execution Plans"
17:16:13 Plan Step IDs timeline for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:13 col:2of5.

17:16:13 col:2of5 "00268_sqld360_323688_0sjx29v99zfqc_2d_128_plan_step_ids_timeline_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:13 col:2of5 "00269_sqld360_323688_0sjx29v99zfqc_2d_128_plan_step_ids_timeline_for_sqlexecid_16777669_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:13 col:2of5 "Execution Plans"
17:16:13 Top Step/Event/Obj for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:13 col:2of5.

17:16:13 col:2of5 "00270_sqld360_323688_0sjx29v99zfqc_2d_129_top_stepeventobj_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:13 col:2of5 "00271_sqld360_323688_0sjx29v99zfqc_2d_129_top_stepeventobj_for_sqlexecid_16777669_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:13 col:2of5 "Execution Plans"
17:16:13 Top 15 Wait events timeline SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02cell single block physical " ,
NVL(num_sess_03,0) "e03gc current block 2-way" ,
NVL(num_sess_04,0) "e04gc cr grant 2-way" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','cell single block physical read','gc current block 2-way','gc cr grant 2-way','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:13 col:2of5.

17:16:13 col:2of5 "00272_sqld360_323688_0sjx29v99zfqc_2d_130_top_15_wait_events_timeline_sqlexecid_16777669_of_phv_4066339909.html"
17:16:13 col:2of5 "00273_sqld360_323688_0sjx29v99zfqc_2d_130_top_15_wait_events_timeline_sqlexecid_16777669_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:14 col:2of5 "Execution Plans"
17:16:14 DB Time by PX process for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:14 col:2of5.

17:16:14 col:2of5 "00274_sqld360_323688_0sjx29v99zfqc_2d_131_db_time_by_px_process_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:14 col:2of5 "00275_sqld360_323688_0sjx29v99zfqc_2d_131_db_time_by_px_process_for_sqlexecid_16777669_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:14 col:2of5 "Execution Plans"
17:16:14 PGA and TEMP usage for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:14 col:2of5.

17:16:14 col:2of5 "00276_sqld360_323688_0sjx29v99zfqc_2d_132_pga_and_temp_usage_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:14 col:2of5 "00277_sqld360_323688_0sjx29v99zfqc_2d_132_pga_and_temp_usage_for_sqlexecid_16777669_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:14 col:2of5 "Execution Plans"
17:16:14 Read and Write I/O requests for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:14 col:2of5.

17:16:14 col:2of5 "00278_sqld360_323688_0sjx29v99zfqc_2d_133_read_and_write_io_requests_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:14 col:2of5 "00279_sqld360_323688_0sjx29v99zfqc_2d_133_read_and_write_io_requests_for_sqlexecid_16777669_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:14 col:2of5 "Execution Plans"
17:16:14 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:14 col:2of5.

17:16:14 col:2of5 "00280_sqld360_323688_0sjx29v99zfqc_2d_134_read_write_and_interconnect_io_bytes_for_sqlexecid_16777669_of_phv_4066339909.html"
17:16:14 col:2of5 "00281_sqld360_323688_0sjx29v99zfqc_2d_134_read_write_and_interconnect_io_bytes_for_sqlexecid_16777669_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:14 col:2of5 "Execution Plans"
17:16:14 Raw Data for SQL_EXEC_ID 16777669 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 4325
AND timestamp BETWEEN TO_DATE('20201023064844', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023065024', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777669) = 16777669
AND NVL(distribution, TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023064836', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:14 col:2of5.

17:16:14 col:2of5 "00282_sqld360_323688_0sjx29v99zfqc_2d_135_raw_data_for_sqlexecid_16777669_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:15 col:2of5 "Execution Plans"
17:16:15 Plan Tree with subtree for SQL_EXEC_ID 33554674 of PHV 4066339909

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =4066339909
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =4066339909
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:15 col:2of5.

17:16:15 col:2of5 "00283_sqld360_323688_0sjx29v99zfqc_2d_136_plan_tree_with_subtree_for_sqlexecid_33554674_of_phv_4066339909_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:15 col:2of5 "Execution Plans"
17:16:15 Plan Step IDs timeline for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:15 col:2of5.

17:16:15 col:2of5 "00284_sqld360_323688_0sjx29v99zfqc_2d_137_plan_step_ids_timeline_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:15 col:2of5 "00285_sqld360_323688_0sjx29v99zfqc_2d_137_plan_step_ids_timeline_for_sqlexecid_33554674_of_phv_4066339909_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 Top Step/Event/Obj for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:16 col:2of5.

17:16:16 col:2of5 "00286_sqld360_323688_0sjx29v99zfqc_2d_138_top_stepeventobj_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00287_sqld360_323688_0sjx29v99zfqc_2d_138_top_stepeventobj_for_sqlexecid_33554674_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 Top 15 Wait events timeline SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03cell multiblock physical re" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','ON CPU','cell multiblock physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:16 col:2of5.

17:16:16 col:2of5 "00288_sqld360_323688_0sjx29v99zfqc_2d_139_top_15_wait_events_timeline_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00289_sqld360_323688_0sjx29v99zfqc_2d_139_top_15_wait_events_timeline_sqlexecid_33554674_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 DB Time by PX process for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:16 col:2of5.

17:16:16 col:2of5 "00290_sqld360_323688_0sjx29v99zfqc_2d_140_db_time_by_px_process_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00291_sqld360_323688_0sjx29v99zfqc_2d_140_db_time_by_px_process_for_sqlexecid_33554674_of_phv_4066339909_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 PGA and TEMP usage for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:16 col:2of5.

17:16:16 col:2of5 "00292_sqld360_323688_0sjx29v99zfqc_2d_141_pga_and_temp_usage_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00293_sqld360_323688_0sjx29v99zfqc_2d_141_pga_and_temp_usage_for_sqlexecid_33554674_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 Read and Write I/O requests for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:16 col:2of5.

17:16:16 col:2of5 "00294_sqld360_323688_0sjx29v99zfqc_2d_142_read_and_write_io_requests_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00295_sqld360_323688_0sjx29v99zfqc_2d_142_read_and_write_io_requests_for_sqlexecid_33554674_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:16 col:2of5.

17:16:16 col:2of5 "00296_sqld360_323688_0sjx29v99zfqc_2d_143_read_write_and_interconnect_io_bytes_for_sqlexecid_33554674_of_phv_4066339909.html"
17:16:16 col:2of5 "00297_sqld360_323688_0sjx29v99zfqc_2d_143_read_write_and_interconnect_io_bytes_for_sqlexecid_33554674_of_phv_4066339909_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:16 col:2of5 "Execution Plans"
17:16:16 Raw Data for SQL_EXEC_ID 33554674 of PHV 4066339909

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  4066339909
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1957
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 64468
AND timestamp BETWEEN TO_DATE('20201021065401', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021065522', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554674) = 33554674
AND NVL(distribution, TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021065403', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:16 col:2of5.

17:16:16 col:2of5 "00298_sqld360_323688_0sjx29v99zfqc_2d_144_raw_data_for_sqlexecid_33554674_of_phv_4066339909.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:17 col:2of5 "Execution Plans"
17:16:17 Plan Tree for PHV 1707006562 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1707006562
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1707006562
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:17 col:2of5.

17:16:17 col:2of5 "00299_sqld360_323688_0sjx29v99zfqc_2d_145_plan_tree_for_phv_1707006562_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:18 col:2of5 "Execution Plans"
17:16:18 Plan from Memory for PHV 1707006562
Completed: 17:16:18


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:18 col:2of5 "Execution Plans"
17:16:18 Plan from History for PHV 1707006562
Completed: 17:16:18


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:18 col:2of5 "Execution Plans"
17:16:18 Avg et/exec for recent execs for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:16:18 col:2of5.

17:16:18 col:2of5 "00302_sqld360_323688_0sjx29v99zfqc_2d_146_avg_etexec_for_recent_execs_for_phv_1707006562.html"
17:16:18 col:2of5 "00303_sqld360_323688_0sjx29v99zfqc_2d_146_avg_etexec_for_recent_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:18 col:2of5 "Execution Plans"
17:16:18 Avg et/exec for historical execs for PHV 1707006562

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:18 col:2of5.

17:16:18 col:2of5 "00304_sqld360_323688_0sjx29v99zfqc_2d_147_avg_etexec_for_historical_execs_for_phv_1707006562.html"
17:16:18 col:2of5 "00305_sqld360_323688_0sjx29v99zfqc_2d_147_avg_etexec_for_historical_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:18 col:2of5 "Execution Plans"
17:16:18 Peak PGA and TEMP usage for recent execs for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:18 col:2of5.

17:16:19 col:2of5 "00306_sqld360_323688_0sjx29v99zfqc_2d_148_peak_pga_and_temp_usage_for_recent_execs_for_phv_1707006562.html"
17:16:19 col:2of5 "00307_sqld360_323688_0sjx29v99zfqc_2d_148_peak_pga_and_temp_usage_for_recent_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:19 col:2of5 "Execution Plans"
17:16:19 Peak PGA and TEMP usage for historical execs for PHV 1707006562

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:19 col:2of5.

17:16:19 col:2of5 "00308_sqld360_323688_0sjx29v99zfqc_2d_149_peak_pga_and_temp_usage_for_historical_execs_for_phv_1707006562.html"
17:16:19 col:2of5 "00309_sqld360_323688_0sjx29v99zfqc_2d_149_peak_pga_and_temp_usage_for_historical_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:19 col:2of5 "Execution Plans"
17:16:19 Peak Read and Write I/O requests for recent execs for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:19 col:2of5.

17:16:19 col:2of5 "00310_sqld360_323688_0sjx29v99zfqc_2d_150_peak_read_and_write_io_requests_for_recent_execs_for_phv_1707006562.html"
17:16:19 col:2of5 "00311_sqld360_323688_0sjx29v99zfqc_2d_150_peak_read_and_write_io_requests_for_recent_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:19 col:2of5 "Execution Plans"
17:16:19 Peak Read and Write I/O requests for historical execs for PHV 1707006562

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:19 col:2of5.

17:16:19 col:2of5 "00312_sqld360_323688_0sjx29v99zfqc_2d_151_peak_read_and_write_io_requests_for_historical_execs_for_phv_1707006562.html"
17:16:19 col:2of5 "00313_sqld360_323688_0sjx29v99zfqc_2d_151_peak_read_and_write_io_requests_for_historical_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:19 col:2of5 "Execution Plans"
17:16:19 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:19 col:2of5.

17:16:19 col:2of5 "00314_sqld360_323688_0sjx29v99zfqc_2d_152_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1707006562.html"
17:16:19 col:2of5 "00315_sqld360_323688_0sjx29v99zfqc_2d_152_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:19 col:2of5 "Execution Plans"
17:16:19 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1707006562

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:19 col:2of5.

17:16:19 col:2of5 "00316_sqld360_323688_0sjx29v99zfqc_2d_153_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1707006562.html"
17:16:20 col:2of5 "00317_sqld360_323688_0sjx29v99zfqc_2d_153_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:20 col:2of5 "Execution Plans"
17:16:20 Top Wait events for PHV 1707006562

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:16:20 col:2of5.

17:16:20 col:2of5 "00318_sqld360_323688_0sjx29v99zfqc_2d_154_top_wait_events_for_phv_1707006562.html"
17:16:20 col:2of5 "00319_sqld360_323688_0sjx29v99zfqc_2d_154_top_wait_events_for_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:20 col:2of5 "Execution Plans"
17:16:20 Top Objects accessed by PHV 1707006562

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1707006562
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:16:20 col:2of5.

17:16:20 col:2of5 "00320_sqld360_323688_0sjx29v99zfqc_2d_155_top_objects_accessed_by_phv_1707006562.html"
17:16:20 col:2of5 "00321_sqld360_323688_0sjx29v99zfqc_2d_155_top_objects_accessed_by_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:20 col:2of5 "Execution Plans"
17:16:20 Top Plan Steps for PHV 1707006562

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:16:20 col:2of5.

17:16:20 col:2of5 "00322_sqld360_323688_0sjx29v99zfqc_2d_156_top_plan_steps_for_phv_1707006562.html"
17:16:20 col:2of5 "00323_sqld360_323688_0sjx29v99zfqc_2d_156_top_plan_steps_for_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:20 col:2of5 "Execution Plans"
17:16:20 Top Step/Event/Obj for PHV 1707006562

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1707006562
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:20 col:2of5.

17:16:20 col:2of5 "00324_sqld360_323688_0sjx29v99zfqc_2d_157_top_stepeventobj_for_phv_1707006562.html"
17:16:20 col:2of5 "00325_sqld360_323688_0sjx29v99zfqc_2d_157_top_stepeventobj_for_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:20 col:2of5 "Execution Plans"
17:16:20 Top 15 Wait events over recent time for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1707006562
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:20 col:2of5.

17:16:20 col:2of5 "00326_sqld360_323688_0sjx29v99zfqc_2d_158_top_15_wait_events_over_recent_time_for_phv_1707006562.html"
17:16:20 col:2of5 "00327_sqld360_323688_0sjx29v99zfqc_2d_158_top_15_wait_events_over_recent_time_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:21 col:2of5 "Execution Plans"
17:16:21 Top 15 Wait events over historical time for PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04gc cr multi block request" ,
NVL(aas_05,0) "e05gc cr block busy" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'gc cr block busy' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1707006562
AND object_node IN ('ON CPU','gc current block 2-way','cell single block physical read','gc cr multi block request','gc cr block busy','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:21 col:2of5.

17:16:21 col:2of5 "00328_sqld360_323688_0sjx29v99zfqc_2d_159_top_15_wait_events_over_historical_time_for_phv_1707006562.html"
17:16:21 col:2of5 "00329_sqld360_323688_0sjx29v99zfqc_2d_159_top_15_wait_events_over_historical_time_for_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:21 col:2of5 "Execution Plans"
17:16:21 Plan Tree with subtree for SQL_EXEC_ID 33554575 of PHV 1707006562

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1707006562
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:21 col:2of5.

17:16:21 col:2of5 "00330_sqld360_323688_0sjx29v99zfqc_2d_160_plan_tree_with_subtree_for_sqlexecid_33554575_of_phv_1707006562_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:22 col:2of5 "Execution Plans"
17:16:22 Plan Step IDs timeline for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:22 col:2of5.

17:16:22 col:2of5 "00331_sqld360_323688_0sjx29v99zfqc_2d_161_plan_step_ids_timeline_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:22 col:2of5 "00332_sqld360_323688_0sjx29v99zfqc_2d_161_plan_step_ids_timeline_for_sqlexecid_33554575_of_phv_1707006562_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:22 col:2of5 "Execution Plans"
17:16:22 Top Step/Event/Obj for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:22 col:2of5.

17:16:22 col:2of5 "00333_sqld360_323688_0sjx29v99zfqc_2d_162_top_stepeventobj_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:22 col:2of5 "00334_sqld360_323688_0sjx29v99zfqc_2d_162_top_stepeventobj_for_sqlexecid_33554575_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:22 col:2of5 "Execution Plans"
17:16:22 Top 15 Wait events timeline SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03cell single block physical " ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:22 col:2of5.

17:16:22 col:2of5 "00335_sqld360_323688_0sjx29v99zfqc_2d_163_top_15_wait_events_timeline_sqlexecid_33554575_of_phv_1707006562.html"
17:16:22 col:2of5 "00336_sqld360_323688_0sjx29v99zfqc_2d_163_top_15_wait_events_timeline_sqlexecid_33554575_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:22 col:2of5 "Execution Plans"
17:16:22 DB Time by PX process for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:22 col:2of5.

17:16:22 col:2of5 "00337_sqld360_323688_0sjx29v99zfqc_2d_164_db_time_by_px_process_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:22 col:2of5 "00338_sqld360_323688_0sjx29v99zfqc_2d_164_db_time_by_px_process_for_sqlexecid_33554575_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:23 col:2of5 "Execution Plans"
17:16:23 PGA and TEMP usage for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:23 col:2of5.

17:16:23 col:2of5 "00339_sqld360_323688_0sjx29v99zfqc_2d_165_pga_and_temp_usage_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:23 col:2of5 "00340_sqld360_323688_0sjx29v99zfqc_2d_165_pga_and_temp_usage_for_sqlexecid_33554575_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:23 col:2of5 "Execution Plans"
17:16:23 Read and Write I/O requests for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:23 col:2of5.

17:16:23 col:2of5 "00341_sqld360_323688_0sjx29v99zfqc_2d_166_read_and_write_io_requests_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:23 col:2of5 "00342_sqld360_323688_0sjx29v99zfqc_2d_166_read_and_write_io_requests_for_sqlexecid_33554575_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:23 col:2of5 "Execution Plans"
17:16:23 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:23 col:2of5.

17:16:23 col:2of5 "00343_sqld360_323688_0sjx29v99zfqc_2d_167_read_write_and_interconnect_io_bytes_for_sqlexecid_33554575_of_phv_1707006562.html"
17:16:23 col:2of5 "00344_sqld360_323688_0sjx29v99zfqc_2d_167_read_write_and_interconnect_io_bytes_for_sqlexecid_33554575_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:23 col:2of5 "Execution Plans"
17:16:23 Raw Data for SQL_EXEC_ID 33554575 of PHV 1707006562

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013064636', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013064816', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554575) = 33554575
AND NVL(distribution, TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013064635', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:23 col:2of5.

17:16:23 col:2of5 "00345_sqld360_323688_0sjx29v99zfqc_2d_168_raw_data_for_sqlexecid_33554575_of_phv_1707006562.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:24 col:2of5 "Execution Plans"
17:16:24 Plan Tree with subtree for SQL_EXEC_ID 33554574 of PHV 1707006562

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1707006562
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:24 col:2of5.

17:16:24 col:2of5 "00346_sqld360_323688_0sjx29v99zfqc_2d_169_plan_tree_with_subtree_for_sqlexecid_33554574_of_phv_1707006562_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:24 col:2of5 "Execution Plans"
17:16:24 Plan Step IDs timeline for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:24 col:2of5.

17:16:24 col:2of5 "00347_sqld360_323688_0sjx29v99zfqc_2d_170_plan_step_ids_timeline_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:24 col:2of5 "00348_sqld360_323688_0sjx29v99zfqc_2d_170_plan_step_ids_timeline_for_sqlexecid_33554574_of_phv_1707006562_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 Top Step/Event/Obj for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:25 col:2of5.

17:16:25 col:2of5 "00349_sqld360_323688_0sjx29v99zfqc_2d_171_top_stepeventobj_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00350_sqld360_323688_0sjx29v99zfqc_2d_171_top_stepeventobj_for_sqlexecid_33554574_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 Top 15 Wait events timeline SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:25 col:2of5.

17:16:25 col:2of5 "00351_sqld360_323688_0sjx29v99zfqc_2d_172_top_15_wait_events_timeline_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00352_sqld360_323688_0sjx29v99zfqc_2d_172_top_15_wait_events_timeline_sqlexecid_33554574_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 DB Time by PX process for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:25 col:2of5.

17:16:25 col:2of5 "00353_sqld360_323688_0sjx29v99zfqc_2d_173_db_time_by_px_process_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00354_sqld360_323688_0sjx29v99zfqc_2d_173_db_time_by_px_process_for_sqlexecid_33554574_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 PGA and TEMP usage for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:25 col:2of5.

17:16:25 col:2of5 "00355_sqld360_323688_0sjx29v99zfqc_2d_174_pga_and_temp_usage_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00356_sqld360_323688_0sjx29v99zfqc_2d_174_pga_and_temp_usage_for_sqlexecid_33554574_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 Read and Write I/O requests for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:25 col:2of5.

17:16:25 col:2of5 "00357_sqld360_323688_0sjx29v99zfqc_2d_175_read_and_write_io_requests_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00358_sqld360_323688_0sjx29v99zfqc_2d_175_read_and_write_io_requests_for_sqlexecid_33554574_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:25 col:2of5.

17:16:25 col:2of5 "00359_sqld360_323688_0sjx29v99zfqc_2d_176_read_write_and_interconnect_io_bytes_for_sqlexecid_33554574_of_phv_1707006562.html"
17:16:25 col:2of5 "00360_sqld360_323688_0sjx29v99zfqc_2d_176_read_write_and_interconnect_io_bytes_for_sqlexecid_33554574_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:25 col:2of5 "Execution Plans"
17:16:25 Raw Data for SQL_EXEC_ID 33554574 of PHV 1707006562

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 61781
AND timestamp BETWEEN TO_DATE('20201013001041', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013001202', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554574) = 33554574
AND NVL(distribution, TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013001042', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:25 col:2of5.

17:16:25 col:2of5 "00361_sqld360_323688_0sjx29v99zfqc_2d_177_raw_data_for_sqlexecid_33554574_of_phv_1707006562.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:26 col:2of5 "Execution Plans"
17:16:26 Plan Tree with subtree for SQL_EXEC_ID 33556311 of PHV 1707006562

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1707006562
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1707006562
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:26 col:2of5.

17:16:26 col:2of5 "00362_sqld360_323688_0sjx29v99zfqc_2d_178_plan_tree_with_subtree_for_sqlexecid_33556311_of_phv_1707006562_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 Plan Step IDs timeline for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:27 col:2of5.

17:16:27 col:2of5 "00363_sqld360_323688_0sjx29v99zfqc_2d_179_plan_step_ids_timeline_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00364_sqld360_323688_0sjx29v99zfqc_2d_179_plan_step_ids_timeline_for_sqlexecid_33556311_of_phv_1707006562_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 Top Step/Event/Obj for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:27 col:2of5.

17:16:27 col:2of5 "00365_sqld360_323688_0sjx29v99zfqc_2d_180_top_stepeventobj_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00366_sqld360_323688_0sjx29v99zfqc_2d_180_top_stepeventobj_for_sqlexecid_33556311_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 Top 15 Wait events timeline SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:27 col:2of5.

17:16:27 col:2of5 "00367_sqld360_323688_0sjx29v99zfqc_2d_181_top_15_wait_events_timeline_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00368_sqld360_323688_0sjx29v99zfqc_2d_181_top_15_wait_events_timeline_sqlexecid_33556311_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 DB Time by PX process for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:27 col:2of5.

17:16:27 col:2of5 "00369_sqld360_323688_0sjx29v99zfqc_2d_182_db_time_by_px_process_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00370_sqld360_323688_0sjx29v99zfqc_2d_182_db_time_by_px_process_for_sqlexecid_33556311_of_phv_1707006562_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 PGA and TEMP usage for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:27 col:2of5.

17:16:27 col:2of5 "00371_sqld360_323688_0sjx29v99zfqc_2d_183_pga_and_temp_usage_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00372_sqld360_323688_0sjx29v99zfqc_2d_183_pga_and_temp_usage_for_sqlexecid_33556311_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:27 col:2of5 "Execution Plans"
17:16:27 Read and Write I/O requests for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:27 col:2of5.

17:16:27 col:2of5 "00373_sqld360_323688_0sjx29v99zfqc_2d_184_read_and_write_io_requests_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:27 col:2of5 "00374_sqld360_323688_0sjx29v99zfqc_2d_184_read_and_write_io_requests_for_sqlexecid_33556311_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:28 col:2of5 "Execution Plans"
17:16:28 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:28 col:2of5.

17:16:28 col:2of5 "00375_sqld360_323688_0sjx29v99zfqc_2d_185_read_write_and_interconnect_io_bytes_for_sqlexecid_33556311_of_phv_1707006562.html"
17:16:28 col:2of5 "00376_sqld360_323688_0sjx29v99zfqc_2d_185_read_write_and_interconnect_io_bytes_for_sqlexecid_33556311_of_phv_1707006562_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:28 col:2of5 "Execution Plans"
17:16:28 Raw Data for SQL_EXEC_ID 33556311 of PHV 1707006562

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1707006562
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3895
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 20828
AND timestamp BETWEEN TO_DATE('20201007074601', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007074712', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556311) = 33556311
AND NVL(distribution, TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007074557', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:28 col:2of5.

17:16:28 col:2of5 "00377_sqld360_323688_0sjx29v99zfqc_2d_186_raw_data_for_sqlexecid_33556311_of_phv_1707006562.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:28 col:2of5 "Execution Plans"
17:16:28 Plan Tree for PHV 1370721523 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1370721523
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1370721523)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1370721523
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1370721523
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:28 col:2of5.

17:16:28 col:2of5 "00378_sqld360_323688_0sjx29v99zfqc_2d_187_plan_tree_for_phv_1370721523_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:29 col:2of5 "Execution Plans"
17:16:29 Plan from Memory for PHV 1370721523
Completed: 17:16:30


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:30 col:2of5 "Execution Plans"
17:16:30 Plan from History for PHV 1370721523
Completed: 17:16:30


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:30 col:2of5 "Execution Plans"
17:16:30 Avg et/exec for recent execs for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:16:30 col:2of5.

17:16:30 col:2of5 "00381_sqld360_323688_0sjx29v99zfqc_2d_188_avg_etexec_for_recent_execs_for_phv_1370721523.html"
17:16:30 col:2of5 "00382_sqld360_323688_0sjx29v99zfqc_2d_188_avg_etexec_for_recent_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:30 col:2of5 "Execution Plans"
17:16:30 Avg et/exec for historical execs for PHV 1370721523

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:30 col:2of5.

17:16:30 col:2of5 "00383_sqld360_323688_0sjx29v99zfqc_2d_189_avg_etexec_for_historical_execs_for_phv_1370721523.html"
17:16:30 col:2of5 "00384_sqld360_323688_0sjx29v99zfqc_2d_189_avg_etexec_for_historical_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:31 col:2of5 "Execution Plans"
17:16:31 Peak PGA and TEMP usage for recent execs for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:31 col:2of5.

17:16:31 col:2of5 "00385_sqld360_323688_0sjx29v99zfqc_2d_190_peak_pga_and_temp_usage_for_recent_execs_for_phv_1370721523.html"
17:16:31 col:2of5 "00386_sqld360_323688_0sjx29v99zfqc_2d_190_peak_pga_and_temp_usage_for_recent_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:31 col:2of5 "Execution Plans"
17:16:31 Peak PGA and TEMP usage for historical execs for PHV 1370721523

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:31 col:2of5.

17:16:31 col:2of5 "00387_sqld360_323688_0sjx29v99zfqc_2d_191_peak_pga_and_temp_usage_for_historical_execs_for_phv_1370721523.html"
17:16:31 col:2of5 "00388_sqld360_323688_0sjx29v99zfqc_2d_191_peak_pga_and_temp_usage_for_historical_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:31 col:2of5 "Execution Plans"
17:16:31 Peak Read and Write I/O requests for recent execs for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:31 col:2of5.

17:16:31 col:2of5 "00389_sqld360_323688_0sjx29v99zfqc_2d_192_peak_read_and_write_io_requests_for_recent_execs_for_phv_1370721523.html"
17:16:31 col:2of5 "00390_sqld360_323688_0sjx29v99zfqc_2d_192_peak_read_and_write_io_requests_for_recent_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:31 col:2of5 "Execution Plans"
17:16:31 Peak Read and Write I/O requests for historical execs for PHV 1370721523

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:31 col:2of5.

17:16:31 col:2of5 "00391_sqld360_323688_0sjx29v99zfqc_2d_193_peak_read_and_write_io_requests_for_historical_execs_for_phv_1370721523.html"
17:16:31 col:2of5 "00392_sqld360_323688_0sjx29v99zfqc_2d_193_peak_read_and_write_io_requests_for_historical_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:31 col:2of5 "Execution Plans"
17:16:31 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:31 col:2of5.

17:16:31 col:2of5 "00393_sqld360_323688_0sjx29v99zfqc_2d_194_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1370721523.html"
17:16:31 col:2of5 "00394_sqld360_323688_0sjx29v99zfqc_2d_194_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1370721523

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:32 col:2of5.

17:16:32 col:2of5 "00395_sqld360_323688_0sjx29v99zfqc_2d_195_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1370721523.html"
17:16:32 col:2of5 "00396_sqld360_323688_0sjx29v99zfqc_2d_195_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top Wait events for PHV 1370721523

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:16:32 col:2of5.

17:16:32 col:2of5 "00397_sqld360_323688_0sjx29v99zfqc_2d_196_top_wait_events_for_phv_1370721523.html"
17:16:32 col:2of5 "00398_sqld360_323688_0sjx29v99zfqc_2d_196_top_wait_events_for_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top Objects accessed by PHV 1370721523

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1370721523
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:16:32 col:2of5.

17:16:32 col:2of5 "00399_sqld360_323688_0sjx29v99zfqc_2d_197_top_objects_accessed_by_phv_1370721523.html"
17:16:32 col:2of5 "00400_sqld360_323688_0sjx29v99zfqc_2d_197_top_objects_accessed_by_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top Plan Steps for PHV 1370721523

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:16:32 col:2of5.

17:16:32 col:2of5 "00401_sqld360_323688_0sjx29v99zfqc_2d_198_top_plan_steps_for_phv_1370721523.html"
17:16:32 col:2of5 "00402_sqld360_323688_0sjx29v99zfqc_2d_198_top_plan_steps_for_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top Step/Event/Obj for PHV 1370721523

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1370721523
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:32 col:2of5.

17:16:32 col:2of5 "00403_sqld360_323688_0sjx29v99zfqc_2d_199_top_stepeventobj_for_phv_1370721523.html"
17:16:32 col:2of5 "00404_sqld360_323688_0sjx29v99zfqc_2d_199_top_stepeventobj_for_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top 15 Wait events over recent time for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cursor: pin S wait on X" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cursor: pin S wait on X' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1370721523
AND object_node IN ('ON CPU','cursor: pin S wait on X','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:32 col:2of5.

17:16:32 col:2of5 "00405_sqld360_323688_0sjx29v99zfqc_2d_200_top_15_wait_events_over_recent_time_for_phv_1370721523.html"
17:16:32 col:2of5 "00406_sqld360_323688_0sjx29v99zfqc_2d_200_top_15_wait_events_over_recent_time_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:32 col:2of5 "Execution Plans"
17:16:32 Top 15 Wait events over historical time for PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell single block physical " ,
NVL(aas_03,0) "e03cursor: pin S wait on X" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cursor: pin S wait on X' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1370721523
AND object_node IN ('ON CPU','cell single block physical read','cursor: pin S wait on X','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:32 col:2of5.

17:16:33 col:2of5 "00407_sqld360_323688_0sjx29v99zfqc_2d_201_top_15_wait_events_over_historical_time_for_phv_1370721523.html"
17:16:33 col:2of5 "00408_sqld360_323688_0sjx29v99zfqc_2d_201_top_15_wait_events_over_historical_time_for_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:33 col:2of5 "Execution Plans"
17:16:33 Plan Tree with subtree for SQL_EXEC_ID 16778604 of PHV 1370721523

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1370721523)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1370721523
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1370721523
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:33 col:2of5.

17:16:33 col:2of5 "00409_sqld360_323688_0sjx29v99zfqc_2d_202_plan_tree_with_subtree_for_sqlexecid_16778604_of_phv_1370721523_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:34 col:2of5 "Execution Plans"
17:16:34 Plan with rowsource statistics SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT plan_line_id,
LPAD('.',MAX(plan_depth),'.')||plan_operation||' '||plan_options||' '||MAX(plan_object_owner)||NVL2(MAX(plan_object_name),'.','')||MAX(plan_object_name) step,
SUM(starts) starts,
MAX(plan_cardinality) e_rows,
SUM(output_rows) a_rows,
MAX(plan_cost) cost,
MAX(plan_bytes) e_bytes,
MAX(plan_time) e_time,
MAX(plan_partition_start) pstart,
MAX(plan_partition_stop) pstop,
SUM(physical_read_requests) io_read_req,
SUM(physical_read_bytes) io_read_bytes,
SUM(physical_write_requests) io_write_req,
SUM(physical_write_bytes) io_write_bytes,
SUM(workarea_mem) workarea_mem,
SUM(workarea_max_mem) workarea_max_mem,
SUM(workarea_tempseg) workarea_tempseg,
SUM(workarea_max_tempseg) workarea_max_tempseg
FROM gv$sql_plan_monitor
WHERE sql_id = '0sjx29v99zfqc'
AND sql_exec_id = 16778604
AND sql_exec_start = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
GROUP BY plan_line_id, plan_operation, plan_options
ORDER BY plan_line_id

17:16:34 col:2of5.

17:16:34 col:2of5 "00410_sqld360_323688_0sjx29v99zfqc_2d_203_plan_with_rowsource_statistics_sqlexecid_16778604_of_phv_1370721523.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:34 col:2of5 "Execution Plans"
17:16:34 Plan Step IDs timeline for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) =                        1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) =                     5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =                 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END
)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:34 col:2of5.

17:16:34 col:2of5 "00411_sqld360_323688_0sjx29v99zfqc_2d_204_plan_step_ids_timeline_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:34 col:2of5 "00412_sqld360_323688_0sjx29v99zfqc_2d_204_plan_step_ids_timeline_for_sqlexecid_16778604_of_phv_1370721523_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:34 col:2of5 "Execution Plans"
17:16:34 Top Step/Event/Obj for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:34 col:2of5.

17:16:34 col:2of5 "00413_sqld360_323688_0sjx29v99zfqc_2d_205_top_stepeventobj_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:34 col:2of5 "00414_sqld360_323688_0sjx29v99zfqc_2d_205_top_stepeventobj_for_sqlexecid_16778604_of_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 Top 15 Wait events timeline for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:35 col:2of5.

17:16:35 col:2of5 "00415_sqld360_323688_0sjx29v99zfqc_2d_206_top_15_wait_events_timeline_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:35 col:2of5 "00416_sqld360_323688_0sjx29v99zfqc_2d_206_top_15_wait_events_timeline_for_sqlexecid_16778604_of_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 DB Time by PX process for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:35 col:2of5.

17:16:35 col:2of5 "00417_sqld360_323688_0sjx29v99zfqc_2d_207_db_time_by_px_process_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:35 col:2of5 "00418_sqld360_323688_0sjx29v99zfqc_2d_207_db_time_by_px_process_for_sqlexecid_16778604_of_phv_1370721523_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 PGA and TEMP usage for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:35 col:2of5.

17:16:35 col:2of5 "00419_sqld360_323688_0sjx29v99zfqc_2d_208_pga_and_temp_usage_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:35 col:2of5 "00420_sqld360_323688_0sjx29v99zfqc_2d_208_pga_and_temp_usage_for_sqlexecid_16778604_of_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 Read and Write I/O requests for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:35 col:2of5.

17:16:35 col:2of5 "00421_sqld360_323688_0sjx29v99zfqc_2d_209_read_and_write_io_requests_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:35 col:2of5 "00422_sqld360_323688_0sjx29v99zfqc_2d_209_read_and_write_io_requests_for_sqlexecid_16778604_of_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:35 col:2of5.

17:16:35 col:2of5 "00423_sqld360_323688_0sjx29v99zfqc_2d_210_read_write_and_interconnect_io_bytes_for_sqlexecid_16778604_of_phv_1370721523.html"
17:16:35 col:2of5 "00424_sqld360_323688_0sjx29v99zfqc_2d_210_read_write_and_interconnect_io_bytes_for_sqlexecid_16778604_of_phv_1370721523_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:35 col:2of5 "Execution Plans"
17:16:35 Raw Data for SQL_EXEC_ID 16778604 of PHV 1370721523

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1370721523
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5040
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59605
AND timestamp BETWEEN TO_DATE('20201106093831', 'YYYYMMDDHH24MISS') AND TO_DATE('20201106093831', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778604) = 16778604
AND NVL(distribution, TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')) = TO_DATE('20201106093830', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY timestamp,position

17:16:35 col:2of5.

17:16:35 col:2of5 "00425_sqld360_323688_0sjx29v99zfqc_2d_211_raw_data_for_sqlexecid_16778604_of_phv_1370721523.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:36 col:2of5 "Execution Plans"
17:16:36 Plan Tree for PHV 2646870572 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2646870572
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2646870572
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:36 col:2of5.

17:16:36 col:2of5 "00426_sqld360_323688_0sjx29v99zfqc_2d_212_plan_tree_for_phv_2646870572_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Plan from Memory for PHV 2646870572
Completed: 17:16:37


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Plan from History for PHV 2646870572
Completed: 17:16:37


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Avg et/exec for recent execs for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:16:37 col:2of5.

17:16:37 col:2of5 "00429_sqld360_323688_0sjx29v99zfqc_2d_213_avg_etexec_for_recent_execs_for_phv_2646870572.html"
17:16:37 col:2of5 "00430_sqld360_323688_0sjx29v99zfqc_2d_213_avg_etexec_for_recent_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Avg et/exec for historical execs for PHV 2646870572

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:37 col:2of5.

17:16:37 col:2of5 "00431_sqld360_323688_0sjx29v99zfqc_2d_214_avg_etexec_for_historical_execs_for_phv_2646870572.html"
17:16:37 col:2of5 "00432_sqld360_323688_0sjx29v99zfqc_2d_214_avg_etexec_for_historical_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Peak PGA and TEMP usage for recent execs for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:37 col:2of5.

17:16:37 col:2of5 "00433_sqld360_323688_0sjx29v99zfqc_2d_215_peak_pga_and_temp_usage_for_recent_execs_for_phv_2646870572.html"
17:16:37 col:2of5 "00434_sqld360_323688_0sjx29v99zfqc_2d_215_peak_pga_and_temp_usage_for_recent_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:37 col:2of5 "Execution Plans"
17:16:37 Peak PGA and TEMP usage for historical execs for PHV 2646870572

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:37 col:2of5.

17:16:37 col:2of5 "00435_sqld360_323688_0sjx29v99zfqc_2d_216_peak_pga_and_temp_usage_for_historical_execs_for_phv_2646870572.html"
17:16:38 col:2of5 "00436_sqld360_323688_0sjx29v99zfqc_2d_216_peak_pga_and_temp_usage_for_historical_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:38 col:2of5 "Execution Plans"
17:16:38 Peak Read and Write I/O requests for recent execs for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:38 col:2of5.

17:16:38 col:2of5 "00437_sqld360_323688_0sjx29v99zfqc_2d_217_peak_read_and_write_io_requests_for_recent_execs_for_phv_2646870572.html"
17:16:38 col:2of5 "00438_sqld360_323688_0sjx29v99zfqc_2d_217_peak_read_and_write_io_requests_for_recent_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:38 col:2of5 "Execution Plans"
17:16:38 Peak Read and Write I/O requests for historical execs for PHV 2646870572

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:38 col:2of5.

17:16:38 col:2of5 "00439_sqld360_323688_0sjx29v99zfqc_2d_218_peak_read_and_write_io_requests_for_historical_execs_for_phv_2646870572.html"
17:16:38 col:2of5 "00440_sqld360_323688_0sjx29v99zfqc_2d_218_peak_read_and_write_io_requests_for_historical_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:38 col:2of5 "Execution Plans"
17:16:38 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:38 col:2of5.

17:16:38 col:2of5 "00441_sqld360_323688_0sjx29v99zfqc_2d_219_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2646870572.html"
17:16:38 col:2of5 "00442_sqld360_323688_0sjx29v99zfqc_2d_219_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:38 col:2of5 "Execution Plans"
17:16:38 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2646870572

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:38 col:2of5.

17:16:38 col:2of5 "00443_sqld360_323688_0sjx29v99zfqc_2d_220_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2646870572.html"
17:16:38 col:2of5 "00444_sqld360_323688_0sjx29v99zfqc_2d_220_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:38 col:2of5 "Execution Plans"
17:16:38 Top Wait events for PHV 2646870572

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:16:38 col:2of5.

17:16:39 col:2of5 "00445_sqld360_323688_0sjx29v99zfqc_2d_221_top_wait_events_for_phv_2646870572.html"
17:16:39 col:2of5 "00446_sqld360_323688_0sjx29v99zfqc_2d_221_top_wait_events_for_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:39 col:2of5 "Execution Plans"
17:16:39 Top Objects accessed by PHV 2646870572

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2646870572
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:16:39 col:2of5.

17:16:39 col:2of5 "00447_sqld360_323688_0sjx29v99zfqc_2d_222_top_objects_accessed_by_phv_2646870572.html"
17:16:39 col:2of5 "00448_sqld360_323688_0sjx29v99zfqc_2d_222_top_objects_accessed_by_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:39 col:2of5 "Execution Plans"
17:16:39 Top Plan Steps for PHV 2646870572

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:16:39 col:2of5.

17:16:39 col:2of5 "00449_sqld360_323688_0sjx29v99zfqc_2d_223_top_plan_steps_for_phv_2646870572.html"
17:16:39 col:2of5 "00450_sqld360_323688_0sjx29v99zfqc_2d_223_top_plan_steps_for_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:39 col:2of5 "Execution Plans"
17:16:39 Top Step/Event/Obj for PHV 2646870572

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2646870572
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:39 col:2of5.

17:16:39 col:2of5 "00451_sqld360_323688_0sjx29v99zfqc_2d_224_top_stepeventobj_for_phv_2646870572.html"
17:16:39 col:2of5 "00452_sqld360_323688_0sjx29v99zfqc_2d_224_top_stepeventobj_for_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:39 col:2of5 "Execution Plans"
17:16:39 Top 15 Wait events over recent time for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2646870572
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:39 col:2of5.

17:16:39 col:2of5 "00453_sqld360_323688_0sjx29v99zfqc_2d_225_top_15_wait_events_over_recent_time_for_phv_2646870572.html"
17:16:39 col:2of5 "00454_sqld360_323688_0sjx29v99zfqc_2d_225_top_15_wait_events_over_recent_time_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:39 col:2of5 "Execution Plans"
17:16:39 Top 15 Wait events over historical time for PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02gc current block 2-way" ,
NVL(aas_03,0) "e03gc cr multi block request" ,
NVL(aas_04,0) "e04cell single block physical " ,
NVL(aas_05,0) "e05cell multiblock physical re" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2646870572
AND object_node IN ('ON CPU','gc current block 2-way','gc cr multi block request','cell single block physical read','cell multiblock physical read','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:39 col:2of5.

17:16:39 col:2of5 "00455_sqld360_323688_0sjx29v99zfqc_2d_226_top_15_wait_events_over_historical_time_for_phv_2646870572.html"
17:16:39 col:2of5 "00456_sqld360_323688_0sjx29v99zfqc_2d_226_top_15_wait_events_over_historical_time_for_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:40 col:2of5 "Execution Plans"
17:16:40 Plan Tree with subtree for SQL_EXEC_ID 33555870 of PHV 2646870572

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2646870572
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:40 col:2of5.

17:16:40 col:2of5 "00457_sqld360_323688_0sjx29v99zfqc_2d_227_plan_tree_with_subtree_for_sqlexecid_33555870_of_phv_2646870572_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 Plan Step IDs timeline for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:41 col:2of5.

17:16:41 col:2of5 "00458_sqld360_323688_0sjx29v99zfqc_2d_228_plan_step_ids_timeline_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00459_sqld360_323688_0sjx29v99zfqc_2d_228_plan_step_ids_timeline_for_sqlexecid_33555870_of_phv_2646870572_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 Top Step/Event/Obj for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:41 col:2of5.

17:16:41 col:2of5 "00460_sqld360_323688_0sjx29v99zfqc_2d_229_top_stepeventobj_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00461_sqld360_323688_0sjx29v99zfqc_2d_229_top_stepeventobj_for_sqlexecid_33555870_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 Top 15 Wait events timeline SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03cell single block physical " ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:41 col:2of5.

17:16:41 col:2of5 "00462_sqld360_323688_0sjx29v99zfqc_2d_230_top_15_wait_events_timeline_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00463_sqld360_323688_0sjx29v99zfqc_2d_230_top_15_wait_events_timeline_sqlexecid_33555870_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 DB Time by PX process for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:41 col:2of5.

17:16:41 col:2of5 "00464_sqld360_323688_0sjx29v99zfqc_2d_231_db_time_by_px_process_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00465_sqld360_323688_0sjx29v99zfqc_2d_231_db_time_by_px_process_for_sqlexecid_33555870_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 PGA and TEMP usage for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:41 col:2of5.

17:16:41 col:2of5 "00466_sqld360_323688_0sjx29v99zfqc_2d_232_pga_and_temp_usage_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00467_sqld360_323688_0sjx29v99zfqc_2d_232_pga_and_temp_usage_for_sqlexecid_33555870_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:41 col:2of5 "Execution Plans"
17:16:41 Read and Write I/O requests for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:41 col:2of5.

17:16:41 col:2of5 "00468_sqld360_323688_0sjx29v99zfqc_2d_233_read_and_write_io_requests_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:41 col:2of5 "00469_sqld360_323688_0sjx29v99zfqc_2d_233_read_and_write_io_requests_for_sqlexecid_33555870_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:42 col:2of5 "Execution Plans"
17:16:42 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:42 col:2of5.

17:16:42 col:2of5 "00470_sqld360_323688_0sjx29v99zfqc_2d_234_read_write_and_interconnect_io_bytes_for_sqlexecid_33555870_of_phv_2646870572.html"
17:16:42 col:2of5 "00471_sqld360_323688_0sjx29v99zfqc_2d_234_read_write_and_interconnect_io_bytes_for_sqlexecid_33555870_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:42 col:2of5 "Execution Plans"
17:16:42 Raw Data for SQL_EXEC_ID 33555870 of PHV 2646870572

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5026
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 24443
AND timestamp BETWEEN TO_DATE('20201103071313', 'YYYYMMDDHH24MISS') AND TO_DATE('20201103071433', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555870) = 33555870
AND NVL(distribution, TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')) = TO_DATE('20201103071310', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:42 col:2of5.

17:16:42 col:2of5 "00472_sqld360_323688_0sjx29v99zfqc_2d_235_raw_data_for_sqlexecid_33555870_of_phv_2646870572.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:42 col:2of5 "Execution Plans"
17:16:42 Plan Tree with subtree for SQL_EXEC_ID 33555610 of PHV 2646870572

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2646870572
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:42 col:2of5.

17:16:42 col:2of5 "00473_sqld360_323688_0sjx29v99zfqc_2d_236_plan_tree_with_subtree_for_sqlexecid_33555610_of_phv_2646870572_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:43 col:2of5 "Execution Plans"
17:16:43 Plan Step IDs timeline for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:43 col:2of5.

17:16:43 col:2of5 "00474_sqld360_323688_0sjx29v99zfqc_2d_237_plan_step_ids_timeline_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:43 col:2of5 "00475_sqld360_323688_0sjx29v99zfqc_2d_237_plan_step_ids_timeline_for_sqlexecid_33555610_of_phv_2646870572_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:43 col:2of5 "Execution Plans"
17:16:43 Top Step/Event/Obj for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:43 col:2of5.

17:16:43 col:2of5 "00476_sqld360_323688_0sjx29v99zfqc_2d_238_top_stepeventobj_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:43 col:2of5 "00477_sqld360_323688_0sjx29v99zfqc_2d_238_top_stepeventobj_for_sqlexecid_33555610_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:43 col:2of5 "Execution Plans"
17:16:43 Top 15 Wait events timeline SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:43 col:2of5.

17:16:43 col:2of5 "00478_sqld360_323688_0sjx29v99zfqc_2d_239_top_15_wait_events_timeline_sqlexecid_33555610_of_phv_2646870572.html"
17:16:43 col:2of5 "00479_sqld360_323688_0sjx29v99zfqc_2d_239_top_15_wait_events_timeline_sqlexecid_33555610_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:44 col:2of5 "Execution Plans"
17:16:44 DB Time by PX process for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:44 col:2of5.

17:16:44 col:2of5 "00480_sqld360_323688_0sjx29v99zfqc_2d_240_db_time_by_px_process_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:44 col:2of5 "00481_sqld360_323688_0sjx29v99zfqc_2d_240_db_time_by_px_process_for_sqlexecid_33555610_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:44 col:2of5 "Execution Plans"
17:16:44 PGA and TEMP usage for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:44 col:2of5.

17:16:44 col:2of5 "00482_sqld360_323688_0sjx29v99zfqc_2d_241_pga_and_temp_usage_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:44 col:2of5 "00483_sqld360_323688_0sjx29v99zfqc_2d_241_pga_and_temp_usage_for_sqlexecid_33555610_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:44 col:2of5 "Execution Plans"
17:16:44 Read and Write I/O requests for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:44 col:2of5.

17:16:44 col:2of5 "00484_sqld360_323688_0sjx29v99zfqc_2d_242_read_and_write_io_requests_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:44 col:2of5 "00485_sqld360_323688_0sjx29v99zfqc_2d_242_read_and_write_io_requests_for_sqlexecid_33555610_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:44 col:2of5 "Execution Plans"
17:16:44 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:44 col:2of5.

17:16:44 col:2of5 "00486_sqld360_323688_0sjx29v99zfqc_2d_243_read_write_and_interconnect_io_bytes_for_sqlexecid_33555610_of_phv_2646870572.html"
17:16:44 col:2of5 "00487_sqld360_323688_0sjx29v99zfqc_2d_243_read_write_and_interconnect_io_bytes_for_sqlexecid_33555610_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:44 col:2of5 "Execution Plans"
17:16:44 Raw Data for SQL_EXEC_ID 33555610 of PHV 2646870572

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1576
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 34335
AND timestamp BETWEEN TO_DATE('20201029080535', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029080635', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555610) = 33555610
AND NVL(distribution, TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029080529', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:44 col:2of5.

17:16:44 col:2of5 "00488_sqld360_323688_0sjx29v99zfqc_2d_244_raw_data_for_sqlexecid_33555610_of_phv_2646870572.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:45 col:2of5 "Execution Plans"
17:16:45 Plan Tree with subtree for SQL_EXEC_ID 16778528 of PHV 2646870572

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2646870572
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2646870572
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:45 col:2of5.

17:16:45 col:2of5 "00489_sqld360_323688_0sjx29v99zfqc_2d_245_plan_tree_with_subtree_for_sqlexecid_16778528_of_phv_2646870572_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 Plan Step IDs timeline for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:46 col:2of5.

17:16:46 col:2of5 "00490_sqld360_323688_0sjx29v99zfqc_2d_246_plan_step_ids_timeline_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00491_sqld360_323688_0sjx29v99zfqc_2d_246_plan_step_ids_timeline_for_sqlexecid_16778528_of_phv_2646870572_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 Top Step/Event/Obj for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:46 col:2of5.

17:16:46 col:2of5 "00492_sqld360_323688_0sjx29v99zfqc_2d_247_top_stepeventobj_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00493_sqld360_323688_0sjx29v99zfqc_2d_247_top_stepeventobj_for_sqlexecid_16778528_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 Top 15 Wait events timeline SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:46 col:2of5.

17:16:46 col:2of5 "00494_sqld360_323688_0sjx29v99zfqc_2d_248_top_15_wait_events_timeline_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00495_sqld360_323688_0sjx29v99zfqc_2d_248_top_15_wait_events_timeline_sqlexecid_16778528_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 DB Time by PX process for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:46 col:2of5.

17:16:46 col:2of5 "00496_sqld360_323688_0sjx29v99zfqc_2d_249_db_time_by_px_process_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00497_sqld360_323688_0sjx29v99zfqc_2d_249_db_time_by_px_process_for_sqlexecid_16778528_of_phv_2646870572_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 PGA and TEMP usage for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:46 col:2of5.

17:16:46 col:2of5 "00498_sqld360_323688_0sjx29v99zfqc_2d_250_pga_and_temp_usage_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00499_sqld360_323688_0sjx29v99zfqc_2d_250_pga_and_temp_usage_for_sqlexecid_16778528_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 Read and Write I/O requests for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:46 col:2of5.

17:16:46 col:2of5 "00500_sqld360_323688_0sjx29v99zfqc_2d_251_read_and_write_io_requests_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00501_sqld360_323688_0sjx29v99zfqc_2d_251_read_and_write_io_requests_for_sqlexecid_16778528_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:46 col:2of5 "Execution Plans"
17:16:46 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:46 col:2of5.

17:16:46 col:2of5 "00502_sqld360_323688_0sjx29v99zfqc_2d_252_read_write_and_interconnect_io_bytes_for_sqlexecid_16778528_of_phv_2646870572.html"
17:16:46 col:2of5 "00503_sqld360_323688_0sjx29v99zfqc_2d_252_read_write_and_interconnect_io_bytes_for_sqlexecid_16778528_of_phv_2646870572_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:47 col:2of5 "Execution Plans"
17:16:47 Raw Data for SQL_EXEC_ID 16778528 of PHV 2646870572

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2646870572
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 12035
AND timestamp BETWEEN TO_DATE('20201105080409', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105080509', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16778528) = 16778528
AND NVL(distribution, TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105080405', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:47 col:2of5.

17:16:47 col:2of5 "00504_sqld360_323688_0sjx29v99zfqc_2d_253_raw_data_for_sqlexecid_16778528_of_phv_2646870572.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:47 col:2of5 "Execution Plans"
17:16:47 Plan Tree for PHV 3910764974 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =3910764974
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3910764974
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:47 col:2of5.

17:16:47 col:2of5 "00505_sqld360_323688_0sjx29v99zfqc_2d_254_plan_tree_for_phv_3910764974_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:48 col:2of5 "Execution Plans"
17:16:48 Plan from Memory for PHV 3910764974
Completed: 17:16:48


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:48 col:2of5 "Execution Plans"
17:16:48 Plan from History for PHV 3910764974
Completed: 17:16:48


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:48 col:2of5 "Execution Plans"
17:16:48 Avg et/exec for recent execs for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:16:48 col:2of5.

17:16:48 col:2of5 "00508_sqld360_323688_0sjx29v99zfqc_2d_255_avg_etexec_for_recent_execs_for_phv_3910764974.html"
17:16:48 col:2of5 "00509_sqld360_323688_0sjx29v99zfqc_2d_255_avg_etexec_for_recent_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:48 col:2of5 "Execution Plans"
17:16:48 Avg et/exec for historical execs for PHV 3910764974

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:48 col:2of5.

17:16:48 col:2of5 "00510_sqld360_323688_0sjx29v99zfqc_2d_256_avg_etexec_for_historical_execs_for_phv_3910764974.html"
17:16:49 col:2of5 "00511_sqld360_323688_0sjx29v99zfqc_2d_256_avg_etexec_for_historical_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:49 col:2of5 "Execution Plans"
17:16:49 Peak PGA and TEMP usage for recent execs for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:49 col:2of5.

17:16:49 col:2of5 "00512_sqld360_323688_0sjx29v99zfqc_2d_257_peak_pga_and_temp_usage_for_recent_execs_for_phv_3910764974.html"
17:16:49 col:2of5 "00513_sqld360_323688_0sjx29v99zfqc_2d_257_peak_pga_and_temp_usage_for_recent_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:49 col:2of5 "Execution Plans"
17:16:49 Peak PGA and TEMP usage for historical execs for PHV 3910764974

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:49 col:2of5.

17:16:49 col:2of5 "00514_sqld360_323688_0sjx29v99zfqc_2d_258_peak_pga_and_temp_usage_for_historical_execs_for_phv_3910764974.html"
17:16:49 col:2of5 "00515_sqld360_323688_0sjx29v99zfqc_2d_258_peak_pga_and_temp_usage_for_historical_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:49 col:2of5 "Execution Plans"
17:16:49 Peak Read and Write I/O requests for recent execs for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:49 col:2of5.

17:16:49 col:2of5 "00516_sqld360_323688_0sjx29v99zfqc_2d_259_peak_read_and_write_io_requests_for_recent_execs_for_phv_3910764974.html"
17:16:49 col:2of5 "00517_sqld360_323688_0sjx29v99zfqc_2d_259_peak_read_and_write_io_requests_for_recent_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:49 col:2of5 "Execution Plans"
17:16:49 Peak Read and Write I/O requests for historical execs for PHV 3910764974

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:49 col:2of5.

17:16:49 col:2of5 "00518_sqld360_323688_0sjx29v99zfqc_2d_260_peak_read_and_write_io_requests_for_historical_execs_for_phv_3910764974.html"
17:16:49 col:2of5 "00519_sqld360_323688_0sjx29v99zfqc_2d_260_peak_read_and_write_io_requests_for_historical_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:16:50 col:2of5.

17:16:50 col:2of5 "00520_sqld360_323688_0sjx29v99zfqc_2d_261_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3910764974.html"
17:16:50 col:2of5 "00521_sqld360_323688_0sjx29v99zfqc_2d_261_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 3910764974

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:16:50 col:2of5.

17:16:50 col:2of5 "00522_sqld360_323688_0sjx29v99zfqc_2d_262_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3910764974.html"
17:16:50 col:2of5 "00523_sqld360_323688_0sjx29v99zfqc_2d_262_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Top Wait events for PHV 3910764974

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:16:50 col:2of5.

17:16:50 col:2of5 "00524_sqld360_323688_0sjx29v99zfqc_2d_263_top_wait_events_for_phv_3910764974.html"
17:16:50 col:2of5 "00525_sqld360_323688_0sjx29v99zfqc_2d_263_top_wait_events_for_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Top Objects accessed by PHV 3910764974

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  3910764974
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:16:50 col:2of5.

17:16:50 col:2of5 "00526_sqld360_323688_0sjx29v99zfqc_2d_264_top_objects_accessed_by_phv_3910764974.html"
17:16:50 col:2of5 "00527_sqld360_323688_0sjx29v99zfqc_2d_264_top_objects_accessed_by_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Top Plan Steps for PHV 3910764974

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:16:50 col:2of5.

17:16:50 col:2of5 "00528_sqld360_323688_0sjx29v99zfqc_2d_265_top_plan_steps_for_phv_3910764974.html"
17:16:50 col:2of5 "00529_sqld360_323688_0sjx29v99zfqc_2d_265_top_plan_steps_for_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:50 col:2of5 "Execution Plans"
17:16:50 Top Step/Event/Obj for PHV 3910764974

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3910764974
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:50 col:2of5.

17:16:50 col:2of5 "00530_sqld360_323688_0sjx29v99zfqc_2d_266_top_stepeventobj_for_phv_3910764974.html"
17:16:51 col:2of5 "00531_sqld360_323688_0sjx29v99zfqc_2d_266_top_stepeventobj_for_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:51 col:2of5 "Execution Plans"
17:16:51 Top 15 Wait events over recent time for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3910764974
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:51 col:2of5.

17:16:51 col:2of5 "00532_sqld360_323688_0sjx29v99zfqc_2d_267_top_15_wait_events_over_recent_time_for_phv_3910764974.html"
17:16:51 col:2of5 "00533_sqld360_323688_0sjx29v99zfqc_2d_267_top_15_wait_events_over_recent_time_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:51 col:2of5 "Execution Plans"
17:16:51 Top 15 Wait events over historical time for PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3910764974
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:16:51 col:2of5.

17:16:51 col:2of5 "00534_sqld360_323688_0sjx29v99zfqc_2d_268_top_15_wait_events_over_historical_time_for_phv_3910764974.html"
17:16:51 col:2of5 "00535_sqld360_323688_0sjx29v99zfqc_2d_268_top_15_wait_events_over_historical_time_for_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:52 col:2of5 "Execution Plans"
17:16:52 Plan Tree with subtree for SQL_EXEC_ID 33555606 of PHV 3910764974

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3910764974
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:52 col:2of5.

17:16:52 col:2of5 "00536_sqld360_323688_0sjx29v99zfqc_2d_269_plan_tree_with_subtree_for_sqlexecid_33555606_of_phv_3910764974_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 Plan Step IDs timeline for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:53 col:2of5.

17:16:53 col:2of5 "00537_sqld360_323688_0sjx29v99zfqc_2d_270_plan_step_ids_timeline_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00538_sqld360_323688_0sjx29v99zfqc_2d_270_plan_step_ids_timeline_for_sqlexecid_33555606_of_phv_3910764974_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 Top Step/Event/Obj for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:53 col:2of5.

17:16:53 col:2of5 "00539_sqld360_323688_0sjx29v99zfqc_2d_271_top_stepeventobj_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00540_sqld360_323688_0sjx29v99zfqc_2d_271_top_stepeventobj_for_sqlexecid_33555606_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 Top 15 Wait events timeline SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:53 col:2of5.

17:16:53 col:2of5 "00541_sqld360_323688_0sjx29v99zfqc_2d_272_top_15_wait_events_timeline_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00542_sqld360_323688_0sjx29v99zfqc_2d_272_top_15_wait_events_timeline_sqlexecid_33555606_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 DB Time by PX process for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:53 col:2of5.

17:16:53 col:2of5 "00543_sqld360_323688_0sjx29v99zfqc_2d_273_db_time_by_px_process_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00544_sqld360_323688_0sjx29v99zfqc_2d_273_db_time_by_px_process_for_sqlexecid_33555606_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 PGA and TEMP usage for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:53 col:2of5.

17:16:53 col:2of5 "00545_sqld360_323688_0sjx29v99zfqc_2d_274_pga_and_temp_usage_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00546_sqld360_323688_0sjx29v99zfqc_2d_274_pga_and_temp_usage_for_sqlexecid_33555606_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 Read and Write I/O requests for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:53 col:2of5.

17:16:53 col:2of5 "00547_sqld360_323688_0sjx29v99zfqc_2d_275_read_and_write_io_requests_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00548_sqld360_323688_0sjx29v99zfqc_2d_275_read_and_write_io_requests_for_sqlexecid_33555606_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:53 col:2of5 "Execution Plans"
17:16:53 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:53 col:2of5.

17:16:53 col:2of5 "00549_sqld360_323688_0sjx29v99zfqc_2d_276_read_write_and_interconnect_io_bytes_for_sqlexecid_33555606_of_phv_3910764974.html"
17:16:53 col:2of5 "00550_sqld360_323688_0sjx29v99zfqc_2d_276_read_write_and_interconnect_io_bytes_for_sqlexecid_33555606_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:54 col:2of5 "Execution Plans"
17:16:54 Raw Data for SQL_EXEC_ID 33555606 of PHV 3910764974

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028180019', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028180039', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555606) = 33555606
AND NVL(distribution, TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028180013', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:54 col:2of5.

17:16:54 col:2of5 "00551_sqld360_323688_0sjx29v99zfqc_2d_277_raw_data_for_sqlexecid_33555606_of_phv_3910764974.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:54 col:2of5 "Execution Plans"
17:16:54 Plan Tree with subtree for SQL_EXEC_ID 33555607 of PHV 3910764974

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3910764974
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:54 col:2of5.

17:16:54 col:2of5 "00552_sqld360_323688_0sjx29v99zfqc_2d_278_plan_tree_with_subtree_for_sqlexecid_33555607_of_phv_3910764974_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:55 col:2of5 "Execution Plans"
17:16:55 Plan Step IDs timeline for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:55 col:2of5.

17:16:55 col:2of5 "00553_sqld360_323688_0sjx29v99zfqc_2d_279_plan_step_ids_timeline_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:55 col:2of5 "00554_sqld360_323688_0sjx29v99zfqc_2d_279_plan_step_ids_timeline_for_sqlexecid_33555607_of_phv_3910764974_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:55 col:2of5 "Execution Plans"
17:16:55 Top Step/Event/Obj for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:55 col:2of5.

17:16:55 col:2of5 "00555_sqld360_323688_0sjx29v99zfqc_2d_280_top_stepeventobj_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:55 col:2of5 "00556_sqld360_323688_0sjx29v99zfqc_2d_280_top_stepeventobj_for_sqlexecid_33555607_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:55 col:2of5 "Execution Plans"
17:16:55 Top 15 Wait events timeline SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:55 col:2of5.

17:16:55 col:2of5 "00557_sqld360_323688_0sjx29v99zfqc_2d_281_top_15_wait_events_timeline_sqlexecid_33555607_of_phv_3910764974.html"
17:16:55 col:2of5 "00558_sqld360_323688_0sjx29v99zfqc_2d_281_top_15_wait_events_timeline_sqlexecid_33555607_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:55 col:2of5 "Execution Plans"
17:16:55 DB Time by PX process for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:55 col:2of5.

17:16:55 col:2of5 "00559_sqld360_323688_0sjx29v99zfqc_2d_282_db_time_by_px_process_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:56 col:2of5 "00560_sqld360_323688_0sjx29v99zfqc_2d_282_db_time_by_px_process_for_sqlexecid_33555607_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:56 col:2of5 "Execution Plans"
17:16:56 PGA and TEMP usage for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:56 col:2of5.

17:16:56 col:2of5 "00561_sqld360_323688_0sjx29v99zfqc_2d_283_pga_and_temp_usage_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:56 col:2of5 "00562_sqld360_323688_0sjx29v99zfqc_2d_283_pga_and_temp_usage_for_sqlexecid_33555607_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:56 col:2of5 "Execution Plans"
17:16:56 Read and Write I/O requests for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:56 col:2of5.

17:16:56 col:2of5 "00563_sqld360_323688_0sjx29v99zfqc_2d_284_read_and_write_io_requests_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:56 col:2of5 "00564_sqld360_323688_0sjx29v99zfqc_2d_284_read_and_write_io_requests_for_sqlexecid_33555607_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:56 col:2of5 "Execution Plans"
17:16:56 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:56 col:2of5.

17:16:56 col:2of5 "00565_sqld360_323688_0sjx29v99zfqc_2d_285_read_write_and_interconnect_io_bytes_for_sqlexecid_33555607_of_phv_3910764974.html"
17:16:56 col:2of5 "00566_sqld360_323688_0sjx29v99zfqc_2d_285_read_write_and_interconnect_io_bytes_for_sqlexecid_33555607_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:56 col:2of5 "Execution Plans"
17:16:56 Raw Data for SQL_EXEC_ID 33555607 of PHV 3910764974

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4639
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36920
AND timestamp BETWEEN TO_DATE('20201028181232', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028181252', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555607) = 33555607
AND NVL(distribution, TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028181231', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:56 col:2of5.

17:16:56 col:2of5 "00567_sqld360_323688_0sjx29v99zfqc_2d_286_raw_data_for_sqlexecid_33555607_of_phv_3910764974.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:57 col:2of5 "Execution Plans"
17:16:57 Plan Tree with subtree for SQL_EXEC_ID 33555447 of PHV 3910764974

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3910764974
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3910764974
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:57 col:2of5.

17:16:57 col:2of5 "00568_sqld360_323688_0sjx29v99zfqc_2d_287_plan_tree_with_subtree_for_sqlexecid_33555447_of_phv_3910764974_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:57 col:2of5 "Execution Plans"
17:16:57 Plan Step IDs timeline for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:16:57 col:2of5.

17:16:57 col:2of5 "00569_sqld360_323688_0sjx29v99zfqc_2d_288_plan_step_ids_timeline_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:57 col:2of5 "00570_sqld360_323688_0sjx29v99zfqc_2d_288_plan_step_ids_timeline_for_sqlexecid_33555447_of_phv_3910764974_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:57 col:2of5 "Execution Plans"
17:16:57 Top Step/Event/Obj for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:16:57 col:2of5.

17:16:58 col:2of5 "00571_sqld360_323688_0sjx29v99zfqc_2d_289_top_stepeventobj_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00572_sqld360_323688_0sjx29v99zfqc_2d_289_top_stepeventobj_for_sqlexecid_33555447_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 Top 15 Wait events timeline SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:16:58 col:2of5.

17:16:58 col:2of5 "00573_sqld360_323688_0sjx29v99zfqc_2d_290_top_15_wait_events_timeline_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00574_sqld360_323688_0sjx29v99zfqc_2d_290_top_15_wait_events_timeline_sqlexecid_33555447_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 DB Time by PX process for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:16:58 col:2of5.

17:16:58 col:2of5 "00575_sqld360_323688_0sjx29v99zfqc_2d_291_db_time_by_px_process_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00576_sqld360_323688_0sjx29v99zfqc_2d_291_db_time_by_px_process_for_sqlexecid_33555447_of_phv_3910764974_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 PGA and TEMP usage for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:58 col:2of5.

17:16:58 col:2of5 "00577_sqld360_323688_0sjx29v99zfqc_2d_292_pga_and_temp_usage_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00578_sqld360_323688_0sjx29v99zfqc_2d_292_pga_and_temp_usage_for_sqlexecid_33555447_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 Read and Write I/O requests for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:58 col:2of5.

17:16:58 col:2of5 "00579_sqld360_323688_0sjx29v99zfqc_2d_293_read_and_write_io_requests_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00580_sqld360_323688_0sjx29v99zfqc_2d_293_read_and_write_io_requests_for_sqlexecid_33555447_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:16:58 col:2of5.

17:16:58 col:2of5 "00581_sqld360_323688_0sjx29v99zfqc_2d_294_read_write_and_interconnect_io_bytes_for_sqlexecid_33555447_of_phv_3910764974.html"
17:16:58 col:2of5 "00582_sqld360_323688_0sjx29v99zfqc_2d_294_read_write_and_interconnect_io_bytes_for_sqlexecid_33555447_of_phv_3910764974_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:58 col:2of5 "Execution Plans"
17:16:58 Raw Data for SQL_EXEC_ID 33555447 of PHV 3910764974

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3910764974
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2736
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11140
AND timestamp BETWEEN TO_DATE('20201028080859', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080919', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555447) = 33555447
AND NVL(distribution, TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080857', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:16:58 col:2of5.

17:16:58 col:2of5 "00583_sqld360_323688_0sjx29v99zfqc_2d_295_raw_data_for_sqlexecid_33555447_of_phv_3910764974.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:16:59 col:2of5 "Execution Plans"
17:16:59 Plan Tree for PHV 1870894448 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1870894448
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1870894448
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:16:59 col:2of5.

17:16:59 col:2of5 "00584_sqld360_323688_0sjx29v99zfqc_2d_296_plan_tree_for_phv_1870894448_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:00 col:2of5 "Execution Plans"
17:17:00 Plan from Memory for PHV 1870894448
Completed: 17:17:00


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:00 col:2of5 "Execution Plans"
17:17:00 Plan from History for PHV 1870894448
Completed: 17:17:00


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:00 col:2of5 "Execution Plans"
17:17:00 Avg et/exec for recent execs for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:00 col:2of5.

17:17:00 col:2of5 "00587_sqld360_323688_0sjx29v99zfqc_2d_297_avg_etexec_for_recent_execs_for_phv_1870894448.html"
17:17:00 col:2of5 "00588_sqld360_323688_0sjx29v99zfqc_2d_297_avg_etexec_for_recent_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:00 col:2of5 "Execution Plans"
17:17:00 Avg et/exec for historical execs for PHV 1870894448

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:00 col:2of5.

17:17:00 col:2of5 "00589_sqld360_323688_0sjx29v99zfqc_2d_298_avg_etexec_for_historical_execs_for_phv_1870894448.html"
17:17:00 col:2of5 "00590_sqld360_323688_0sjx29v99zfqc_2d_298_avg_etexec_for_historical_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:00 col:2of5 "Execution Plans"
17:17:00 Peak PGA and TEMP usage for recent execs for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:00 col:2of5.

17:17:00 col:2of5 "00591_sqld360_323688_0sjx29v99zfqc_2d_299_peak_pga_and_temp_usage_for_recent_execs_for_phv_1870894448.html"
17:17:01 col:2of5 "00592_sqld360_323688_0sjx29v99zfqc_2d_299_peak_pga_and_temp_usage_for_recent_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:01 col:2of5 "Execution Plans"
17:17:01 Peak PGA and TEMP usage for historical execs for PHV 1870894448

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:01 col:2of5.

17:17:01 col:2of5 "00593_sqld360_323688_0sjx29v99zfqc_2d_300_peak_pga_and_temp_usage_for_historical_execs_for_phv_1870894448.html"
17:17:01 col:2of5 "00594_sqld360_323688_0sjx29v99zfqc_2d_300_peak_pga_and_temp_usage_for_historical_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:01 col:2of5 "Execution Plans"
17:17:01 Peak Read and Write I/O requests for recent execs for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:01 col:2of5.

17:17:01 col:2of5 "00595_sqld360_323688_0sjx29v99zfqc_2d_301_peak_read_and_write_io_requests_for_recent_execs_for_phv_1870894448.html"
17:17:01 col:2of5 "00596_sqld360_323688_0sjx29v99zfqc_2d_301_peak_read_and_write_io_requests_for_recent_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:01 col:2of5 "Execution Plans"
17:17:01 Peak Read and Write I/O requests for historical execs for PHV 1870894448

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:01 col:2of5.

17:17:01 col:2of5 "00597_sqld360_323688_0sjx29v99zfqc_2d_302_peak_read_and_write_io_requests_for_historical_execs_for_phv_1870894448.html"
17:17:01 col:2of5 "00598_sqld360_323688_0sjx29v99zfqc_2d_302_peak_read_and_write_io_requests_for_historical_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:01 col:2of5 "Execution Plans"
17:17:01 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:01 col:2of5.

17:17:01 col:2of5 "00599_sqld360_323688_0sjx29v99zfqc_2d_303_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1870894448.html"
17:17:01 col:2of5 "00600_sqld360_323688_0sjx29v99zfqc_2d_303_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:01 col:2of5 "Execution Plans"
17:17:01 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1870894448

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:01 col:2of5.

17:17:01 col:2of5 "00601_sqld360_323688_0sjx29v99zfqc_2d_304_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1870894448.html"
17:17:02 col:2of5 "00602_sqld360_323688_0sjx29v99zfqc_2d_304_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top Wait events for PHV 1870894448

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:02 col:2of5.

17:17:02 col:2of5 "00603_sqld360_323688_0sjx29v99zfqc_2d_305_top_wait_events_for_phv_1870894448.html"
17:17:02 col:2of5 "00604_sqld360_323688_0sjx29v99zfqc_2d_305_top_wait_events_for_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top Objects accessed by PHV 1870894448

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1870894448
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:02 col:2of5.

17:17:02 col:2of5 "00605_sqld360_323688_0sjx29v99zfqc_2d_306_top_objects_accessed_by_phv_1870894448.html"
17:17:02 col:2of5 "00606_sqld360_323688_0sjx29v99zfqc_2d_306_top_objects_accessed_by_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top Plan Steps for PHV 1870894448

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:02 col:2of5.

17:17:02 col:2of5 "00607_sqld360_323688_0sjx29v99zfqc_2d_307_top_plan_steps_for_phv_1870894448.html"
17:17:02 col:2of5 "00608_sqld360_323688_0sjx29v99zfqc_2d_307_top_plan_steps_for_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top Step/Event/Obj for PHV 1870894448

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1870894448
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:02 col:2of5.

17:17:02 col:2of5 "00609_sqld360_323688_0sjx29v99zfqc_2d_308_top_stepeventobj_for_phv_1870894448.html"
17:17:02 col:2of5 "00610_sqld360_323688_0sjx29v99zfqc_2d_308_top_stepeventobj_for_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top 15 Wait events over recent time for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1870894448
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:02 col:2of5.

17:17:02 col:2of5 "00611_sqld360_323688_0sjx29v99zfqc_2d_309_top_15_wait_events_over_recent_time_for_phv_1870894448.html"
17:17:02 col:2of5 "00612_sqld360_323688_0sjx29v99zfqc_2d_309_top_15_wait_events_over_recent_time_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:02 col:2of5 "Execution Plans"
17:17:02 Top 15 Wait events over historical time for PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell single block physical " ,
NVL(aas_03,0) "e03gc cr grant 2-way" ,
NVL(aas_04,0) "e04cell multiblock physical re" ,
NVL(aas_05,0) "e05gc current block 2-way" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1870894448
AND object_node IN ('ON CPU','cell single block physical read','gc cr grant 2-way','cell multiblock physical read','gc current block 2-way','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:02 col:2of5.

17:17:03 col:2of5 "00613_sqld360_323688_0sjx29v99zfqc_2d_310_top_15_wait_events_over_historical_time_for_phv_1870894448.html"
17:17:03 col:2of5 "00614_sqld360_323688_0sjx29v99zfqc_2d_310_top_15_wait_events_over_historical_time_for_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:03 col:2of5 "Execution Plans"
17:17:03 Plan Tree with subtree for SQL_EXEC_ID 16777960 of PHV 1870894448

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1870894448
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:03 col:2of5.

17:17:03 col:2of5 "00615_sqld360_323688_0sjx29v99zfqc_2d_311_plan_tree_with_subtree_for_sqlexecid_16777960_of_phv_1870894448_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:04 col:2of5 "Execution Plans"
17:17:04 Plan Step IDs timeline for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:04 col:2of5.

17:17:04 col:2of5 "00616_sqld360_323688_0sjx29v99zfqc_2d_312_plan_step_ids_timeline_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:04 col:2of5 "00617_sqld360_323688_0sjx29v99zfqc_2d_312_plan_step_ids_timeline_for_sqlexecid_16777960_of_phv_1870894448_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:04 col:2of5 "Execution Plans"
17:17:04 Top Step/Event/Obj for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:04 col:2of5.

17:17:04 col:2of5 "00618_sqld360_323688_0sjx29v99zfqc_2d_313_top_stepeventobj_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:04 col:2of5 "00619_sqld360_323688_0sjx29v99zfqc_2d_313_top_stepeventobj_for_sqlexecid_16777960_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:04 col:2of5 "Execution Plans"
17:17:04 Top 15 Wait events timeline SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02gc cr grant 2-way" ,
NVL(num_sess_03,0) "e03ON CPU" ,
NVL(num_sess_04,0) "e04gc current block 2-way" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','gc cr grant 2-way','ON CPU','gc current block 2-way','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:04 col:2of5.

17:17:04 col:2of5 "00620_sqld360_323688_0sjx29v99zfqc_2d_314_top_15_wait_events_timeline_sqlexecid_16777960_of_phv_1870894448.html"
17:17:04 col:2of5 "00621_sqld360_323688_0sjx29v99zfqc_2d_314_top_15_wait_events_timeline_sqlexecid_16777960_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:04 col:2of5 "Execution Plans"
17:17:04 DB Time by PX process for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:04 col:2of5.

17:17:04 col:2of5 "00622_sqld360_323688_0sjx29v99zfqc_2d_315_db_time_by_px_process_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:04 col:2of5 "00623_sqld360_323688_0sjx29v99zfqc_2d_315_db_time_by_px_process_for_sqlexecid_16777960_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:05 col:2of5 "Execution Plans"
17:17:05 PGA and TEMP usage for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:05 col:2of5.

17:17:05 col:2of5 "00624_sqld360_323688_0sjx29v99zfqc_2d_316_pga_and_temp_usage_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:05 col:2of5 "00625_sqld360_323688_0sjx29v99zfqc_2d_316_pga_and_temp_usage_for_sqlexecid_16777960_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:05 col:2of5 "Execution Plans"
17:17:05 Read and Write I/O requests for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:05 col:2of5.

17:17:05 col:2of5 "00626_sqld360_323688_0sjx29v99zfqc_2d_317_read_and_write_io_requests_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:05 col:2of5 "00627_sqld360_323688_0sjx29v99zfqc_2d_317_read_and_write_io_requests_for_sqlexecid_16777960_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:05 col:2of5 "Execution Plans"
17:17:05 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:05 col:2of5.

17:17:05 col:2of5 "00628_sqld360_323688_0sjx29v99zfqc_2d_318_read_write_and_interconnect_io_bytes_for_sqlexecid_16777960_of_phv_1870894448.html"
17:17:05 col:2of5 "00629_sqld360_323688_0sjx29v99zfqc_2d_318_read_write_and_interconnect_io_bytes_for_sqlexecid_16777960_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:05 col:2of5 "Execution Plans"
17:17:05 Raw Data for SQL_EXEC_ID 16777960 of PHV 1870894448

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028074800', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075111', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777960) = 16777960
AND NVL(distribution, TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028074756', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:05 col:2of5.

17:17:05 col:2of5 "00630_sqld360_323688_0sjx29v99zfqc_2d_319_raw_data_for_sqlexecid_16777960_of_phv_1870894448.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:06 col:2of5 "Execution Plans"
17:17:06 Plan Tree with subtree for SQL_EXEC_ID 16777961 of PHV 1870894448

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1870894448
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:06 col:2of5.

17:17:06 col:2of5 "00631_sqld360_323688_0sjx29v99zfqc_2d_320_plan_tree_with_subtree_for_sqlexecid_16777961_of_phv_1870894448_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:06 col:2of5 "Execution Plans"
17:17:06 Plan Step IDs timeline for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:06 col:2of5.

17:17:06 col:2of5 "00632_sqld360_323688_0sjx29v99zfqc_2d_321_plan_step_ids_timeline_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:06 col:2of5 "00633_sqld360_323688_0sjx29v99zfqc_2d_321_plan_step_ids_timeline_for_sqlexecid_16777961_of_phv_1870894448_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:06 col:2of5 "Execution Plans"
17:17:06 Top Step/Event/Obj for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:06 col:2of5.

17:17:07 col:2of5 "00634_sqld360_323688_0sjx29v99zfqc_2d_322_top_stepeventobj_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00635_sqld360_323688_0sjx29v99zfqc_2d_322_top_stepeventobj_for_sqlexecid_16777961_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 Top 15 Wait events timeline SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell multiblock physical re" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell multiblock physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell multiblock physical read','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:07 col:2of5.

17:17:07 col:2of5 "00636_sqld360_323688_0sjx29v99zfqc_2d_323_top_15_wait_events_timeline_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00637_sqld360_323688_0sjx29v99zfqc_2d_323_top_15_wait_events_timeline_sqlexecid_16777961_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 DB Time by PX process for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:07 col:2of5.

17:17:07 col:2of5 "00638_sqld360_323688_0sjx29v99zfqc_2d_324_db_time_by_px_process_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00639_sqld360_323688_0sjx29v99zfqc_2d_324_db_time_by_px_process_for_sqlexecid_16777961_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 PGA and TEMP usage for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:07 col:2of5.

17:17:07 col:2of5 "00640_sqld360_323688_0sjx29v99zfqc_2d_325_pga_and_temp_usage_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00641_sqld360_323688_0sjx29v99zfqc_2d_325_pga_and_temp_usage_for_sqlexecid_16777961_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 Read and Write I/O requests for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:07 col:2of5.

17:17:07 col:2of5 "00642_sqld360_323688_0sjx29v99zfqc_2d_326_read_and_write_io_requests_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00643_sqld360_323688_0sjx29v99zfqc_2d_326_read_and_write_io_requests_for_sqlexecid_16777961_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:07 col:2of5.

17:17:07 col:2of5 "00644_sqld360_323688_0sjx29v99zfqc_2d_327_read_write_and_interconnect_io_bytes_for_sqlexecid_16777961_of_phv_1870894448.html"
17:17:07 col:2of5 "00645_sqld360_323688_0sjx29v99zfqc_2d_327_read_write_and_interconnect_io_bytes_for_sqlexecid_16777961_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:07 col:2of5 "Execution Plans"
17:17:07 Raw Data for SQL_EXEC_ID 16777961 of PHV 1870894448

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028075302', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028075342', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777961) = 16777961
AND NVL(distribution, TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028075256', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:07 col:2of5.

17:17:07 col:2of5 "00646_sqld360_323688_0sjx29v99zfqc_2d_328_raw_data_for_sqlexecid_16777961_of_phv_1870894448.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:08 col:2of5 "Execution Plans"
17:17:08 Plan Tree with subtree for SQL_EXEC_ID 16777963 of PHV 1870894448

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1870894448
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1870894448
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:08 col:2of5.

17:17:08 col:2of5 "00647_sqld360_323688_0sjx29v99zfqc_2d_329_plan_tree_with_subtree_for_sqlexecid_16777963_of_phv_1870894448_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:09 col:2of5 "Execution Plans"
17:17:09 Plan Step IDs timeline for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:09 col:2of5.

17:17:09 col:2of5 "00648_sqld360_323688_0sjx29v99zfqc_2d_330_plan_step_ids_timeline_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:09 col:2of5 "00649_sqld360_323688_0sjx29v99zfqc_2d_330_plan_step_ids_timeline_for_sqlexecid_16777963_of_phv_1870894448_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:09 col:2of5 "Execution Plans"
17:17:09 Top Step/Event/Obj for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:09 col:2of5.

17:17:09 col:2of5 "00650_sqld360_323688_0sjx29v99zfqc_2d_331_top_stepeventobj_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:09 col:2of5 "00651_sqld360_323688_0sjx29v99zfqc_2d_331_top_stepeventobj_for_sqlexecid_16777963_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:09 col:2of5 "Execution Plans"
17:17:09 Top 15 Wait events timeline SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:09 col:2of5.

17:17:09 col:2of5 "00652_sqld360_323688_0sjx29v99zfqc_2d_332_top_15_wait_events_timeline_sqlexecid_16777963_of_phv_1870894448.html"
17:17:09 col:2of5 "00653_sqld360_323688_0sjx29v99zfqc_2d_332_top_15_wait_events_timeline_sqlexecid_16777963_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:09 col:2of5 "Execution Plans"
17:17:09 DB Time by PX process for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:09 col:2of5.

17:17:09 col:2of5 "00654_sqld360_323688_0sjx29v99zfqc_2d_333_db_time_by_px_process_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:09 col:2of5 "00655_sqld360_323688_0sjx29v99zfqc_2d_333_db_time_by_px_process_for_sqlexecid_16777963_of_phv_1870894448_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:09 col:2of5 "Execution Plans"
17:17:09 PGA and TEMP usage for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:09 col:2of5.

17:17:09 col:2of5 "00656_sqld360_323688_0sjx29v99zfqc_2d_334_pga_and_temp_usage_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:10 col:2of5 "00657_sqld360_323688_0sjx29v99zfqc_2d_334_pga_and_temp_usage_for_sqlexecid_16777963_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:10 col:2of5 "Execution Plans"
17:17:10 Read and Write I/O requests for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:10 col:2of5.

17:17:10 col:2of5 "00658_sqld360_323688_0sjx29v99zfqc_2d_335_read_and_write_io_requests_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:10 col:2of5 "00659_sqld360_323688_0sjx29v99zfqc_2d_335_read_and_write_io_requests_for_sqlexecid_16777963_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:10 col:2of5 "Execution Plans"
17:17:10 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:10 col:2of5.

17:17:10 col:2of5 "00660_sqld360_323688_0sjx29v99zfqc_2d_336_read_write_and_interconnect_io_bytes_for_sqlexecid_16777963_of_phv_1870894448.html"
17:17:10 col:2of5 "00661_sqld360_323688_0sjx29v99zfqc_2d_336_read_write_and_interconnect_io_bytes_for_sqlexecid_16777963_of_phv_1870894448_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:10 col:2of5 "Execution Plans"
17:17:10 Raw Data for SQL_EXEC_ID 16777963 of PHV 1870894448

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1870894448
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3882
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 59711
AND timestamp BETWEEN TO_DATE('20201028080204', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028080224', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777963) = 16777963
AND NVL(distribution, TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028080206', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:10 col:2of5.

17:17:10 col:2of5 "00662_sqld360_323688_0sjx29v99zfqc_2d_337_raw_data_for_sqlexecid_16777963_of_phv_1870894448.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:11 col:2of5 "Execution Plans"
17:17:11 Plan Tree for PHV 2788351063 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2788351063
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2788351063
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:11 col:2of5.

17:17:11 col:2of5 "00663_sqld360_323688_0sjx29v99zfqc_2d_338_plan_tree_for_phv_2788351063_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:11 col:2of5 "Execution Plans"
17:17:11 Plan from Memory for PHV 2788351063
Completed: 17:17:11


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:11 col:2of5 "Execution Plans"
17:17:11 Plan from History for PHV 2788351063
Completed: 17:17:11


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:12 col:2of5 "Execution Plans"
17:17:12 Avg et/exec for recent execs for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:12 col:2of5.

17:17:12 col:2of5 "00666_sqld360_323688_0sjx29v99zfqc_2d_339_avg_etexec_for_recent_execs_for_phv_2788351063.html"
17:17:12 col:2of5 "00667_sqld360_323688_0sjx29v99zfqc_2d_339_avg_etexec_for_recent_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:12 col:2of5 "Execution Plans"
17:17:12 Avg et/exec for historical execs for PHV 2788351063

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:12 col:2of5.

17:17:12 col:2of5 "00668_sqld360_323688_0sjx29v99zfqc_2d_340_avg_etexec_for_historical_execs_for_phv_2788351063.html"
17:17:12 col:2of5 "00669_sqld360_323688_0sjx29v99zfqc_2d_340_avg_etexec_for_historical_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:12 col:2of5 "Execution Plans"
17:17:12 Peak PGA and TEMP usage for recent execs for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:12 col:2of5.

17:17:12 col:2of5 "00670_sqld360_323688_0sjx29v99zfqc_2d_341_peak_pga_and_temp_usage_for_recent_execs_for_phv_2788351063.html"
17:17:12 col:2of5 "00671_sqld360_323688_0sjx29v99zfqc_2d_341_peak_pga_and_temp_usage_for_recent_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:12 col:2of5 "Execution Plans"
17:17:12 Peak PGA and TEMP usage for historical execs for PHV 2788351063

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:12 col:2of5.

17:17:12 col:2of5 "00672_sqld360_323688_0sjx29v99zfqc_2d_342_peak_pga_and_temp_usage_for_historical_execs_for_phv_2788351063.html"
17:17:12 col:2of5 "00673_sqld360_323688_0sjx29v99zfqc_2d_342_peak_pga_and_temp_usage_for_historical_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:12 col:2of5 "Execution Plans"
17:17:12 Peak Read and Write I/O requests for recent execs for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:12 col:2of5.

17:17:12 col:2of5 "00674_sqld360_323688_0sjx29v99zfqc_2d_343_peak_read_and_write_io_requests_for_recent_execs_for_phv_2788351063.html"
17:17:12 col:2of5 "00675_sqld360_323688_0sjx29v99zfqc_2d_343_peak_read_and_write_io_requests_for_recent_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:13 col:2of5 "Execution Plans"
17:17:13 Peak Read and Write I/O requests for historical execs for PHV 2788351063

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:13 col:2of5.

17:17:13 col:2of5 "00676_sqld360_323688_0sjx29v99zfqc_2d_344_peak_read_and_write_io_requests_for_historical_execs_for_phv_2788351063.html"
17:17:13 col:2of5 "00677_sqld360_323688_0sjx29v99zfqc_2d_344_peak_read_and_write_io_requests_for_historical_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:13 col:2of5 "Execution Plans"
17:17:13 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:13 col:2of5.

17:17:13 col:2of5 "00678_sqld360_323688_0sjx29v99zfqc_2d_345_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2788351063.html"
17:17:13 col:2of5 "00679_sqld360_323688_0sjx29v99zfqc_2d_345_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:13 col:2of5 "Execution Plans"
17:17:13 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2788351063

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:13 col:2of5.

17:17:13 col:2of5 "00680_sqld360_323688_0sjx29v99zfqc_2d_346_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2788351063.html"
17:17:13 col:2of5 "00681_sqld360_323688_0sjx29v99zfqc_2d_346_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:13 col:2of5 "Execution Plans"
17:17:13 Top Wait events for PHV 2788351063

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:13 col:2of5.

17:17:13 col:2of5 "00682_sqld360_323688_0sjx29v99zfqc_2d_347_top_wait_events_for_phv_2788351063.html"
17:17:13 col:2of5 "00683_sqld360_323688_0sjx29v99zfqc_2d_347_top_wait_events_for_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:13 col:2of5 "Execution Plans"
17:17:13 Top Objects accessed by PHV 2788351063

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2788351063
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:13 col:2of5.

17:17:13 col:2of5 "00684_sqld360_323688_0sjx29v99zfqc_2d_348_top_objects_accessed_by_phv_2788351063.html"
17:17:13 col:2of5 "00685_sqld360_323688_0sjx29v99zfqc_2d_348_top_objects_accessed_by_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:14 col:2of5 "Execution Plans"
17:17:14 Top Plan Steps for PHV 2788351063

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:14 col:2of5.

17:17:14 col:2of5 "00686_sqld360_323688_0sjx29v99zfqc_2d_349_top_plan_steps_for_phv_2788351063.html"
17:17:14 col:2of5 "00687_sqld360_323688_0sjx29v99zfqc_2d_349_top_plan_steps_for_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:14 col:2of5 "Execution Plans"
17:17:14 Top Step/Event/Obj for PHV 2788351063

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2788351063
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:14 col:2of5.

17:17:14 col:2of5 "00688_sqld360_323688_0sjx29v99zfqc_2d_350_top_stepeventobj_for_phv_2788351063.html"
17:17:14 col:2of5 "00689_sqld360_323688_0sjx29v99zfqc_2d_350_top_stepeventobj_for_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:14 col:2of5 "Execution Plans"
17:17:14 Top 15 Wait events over recent time for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2788351063
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:14 col:2of5.

17:17:14 col:2of5 "00690_sqld360_323688_0sjx29v99zfqc_2d_351_top_15_wait_events_over_recent_time_for_phv_2788351063.html"
17:17:14 col:2of5 "00691_sqld360_323688_0sjx29v99zfqc_2d_351_top_15_wait_events_over_recent_time_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:14 col:2of5 "Execution Plans"
17:17:14 Top 15 Wait events over historical time for PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cursor: pin S wait on X" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cursor: pin S wait on X' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2788351063
AND object_node IN ('ON CPU','cursor: pin S wait on X','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:14 col:2of5.

17:17:14 col:2of5 "00692_sqld360_323688_0sjx29v99zfqc_2d_352_top_15_wait_events_over_historical_time_for_phv_2788351063.html"
17:17:14 col:2of5 "00693_sqld360_323688_0sjx29v99zfqc_2d_352_top_15_wait_events_over_historical_time_for_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:15 col:2of5 "Execution Plans"
17:17:15 Plan Tree with subtree for SQL_EXEC_ID 33555241 of PHV 2788351063

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2788351063
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:15 col:2of5.

17:17:15 col:2of5 "00694_sqld360_323688_0sjx29v99zfqc_2d_353_plan_tree_with_subtree_for_sqlexecid_33555241_of_phv_2788351063_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:15 col:2of5 "Execution Plans"
17:17:15 Plan Step IDs timeline for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:15 col:2of5.

17:17:15 col:2of5 "00695_sqld360_323688_0sjx29v99zfqc_2d_354_plan_step_ids_timeline_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:15 col:2of5 "00696_sqld360_323688_0sjx29v99zfqc_2d_354_plan_step_ids_timeline_for_sqlexecid_33555241_of_phv_2788351063_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 Top Step/Event/Obj for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:16 col:2of5.

17:17:16 col:2of5 "00697_sqld360_323688_0sjx29v99zfqc_2d_355_top_stepeventobj_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00698_sqld360_323688_0sjx29v99zfqc_2d_355_top_stepeventobj_for_sqlexecid_33555241_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 Top 15 Wait events timeline SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:16 col:2of5.

17:17:16 col:2of5 "00699_sqld360_323688_0sjx29v99zfqc_2d_356_top_15_wait_events_timeline_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00700_sqld360_323688_0sjx29v99zfqc_2d_356_top_15_wait_events_timeline_sqlexecid_33555241_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 DB Time by PX process for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:16 col:2of5.

17:17:16 col:2of5 "00701_sqld360_323688_0sjx29v99zfqc_2d_357_db_time_by_px_process_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00702_sqld360_323688_0sjx29v99zfqc_2d_357_db_time_by_px_process_for_sqlexecid_33555241_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 PGA and TEMP usage for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:16 col:2of5.

17:17:16 col:2of5 "00703_sqld360_323688_0sjx29v99zfqc_2d_358_pga_and_temp_usage_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00704_sqld360_323688_0sjx29v99zfqc_2d_358_pga_and_temp_usage_for_sqlexecid_33555241_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 Read and Write I/O requests for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:16 col:2of5.

17:17:16 col:2of5 "00705_sqld360_323688_0sjx29v99zfqc_2d_359_read_and_write_io_requests_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00706_sqld360_323688_0sjx29v99zfqc_2d_359_read_and_write_io_requests_for_sqlexecid_33555241_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:16 col:2of5.

17:17:16 col:2of5 "00707_sqld360_323688_0sjx29v99zfqc_2d_360_read_write_and_interconnect_io_bytes_for_sqlexecid_33555241_of_phv_2788351063.html"
17:17:16 col:2of5 "00708_sqld360_323688_0sjx29v99zfqc_2d_360_read_write_and_interconnect_io_bytes_for_sqlexecid_33555241_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:16 col:2of5 "Execution Plans"
17:17:16 Raw Data for SQL_EXEC_ID 33555241 of PHV 2788351063

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5434
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 23075
AND timestamp BETWEEN TO_DATE('20201027075300', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027075320', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555241) = 33555241
AND NVL(distribution, TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027075259', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:16 col:2of5.

17:17:17 col:2of5 "00709_sqld360_323688_0sjx29v99zfqc_2d_361_raw_data_for_sqlexecid_33555241_of_phv_2788351063.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:17 col:2of5 "Execution Plans"
17:17:17 Plan Tree with subtree for SQL_EXEC_ID 33556325 of PHV 2788351063

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2788351063
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:17 col:2of5.

17:17:17 col:2of5 "00710_sqld360_323688_0sjx29v99zfqc_2d_362_plan_tree_with_subtree_for_sqlexecid_33556325_of_phv_2788351063_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:18 col:2of5 "Execution Plans"
17:17:18 Plan Step IDs timeline for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:18 col:2of5.

17:17:18 col:2of5 "00711_sqld360_323688_0sjx29v99zfqc_2d_363_plan_step_ids_timeline_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:18 col:2of5 "00712_sqld360_323688_0sjx29v99zfqc_2d_363_plan_step_ids_timeline_for_sqlexecid_33556325_of_phv_2788351063_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:18 col:2of5 "Execution Plans"
17:17:18 Top Step/Event/Obj for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:18 col:2of5.

17:17:18 col:2of5 "00713_sqld360_323688_0sjx29v99zfqc_2d_364_top_stepeventobj_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:18 col:2of5 "00714_sqld360_323688_0sjx29v99zfqc_2d_364_top_stepeventobj_for_sqlexecid_33556325_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:18 col:2of5 "Execution Plans"
17:17:18 Top 15 Wait events timeline SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:18 col:2of5.

17:17:18 col:2of5 "00715_sqld360_323688_0sjx29v99zfqc_2d_365_top_15_wait_events_timeline_sqlexecid_33556325_of_phv_2788351063.html"
17:17:18 col:2of5 "00716_sqld360_323688_0sjx29v99zfqc_2d_365_top_15_wait_events_timeline_sqlexecid_33556325_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:18 col:2of5 "Execution Plans"
17:17:18 DB Time by PX process for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:18 col:2of5.

17:17:18 col:2of5 "00717_sqld360_323688_0sjx29v99zfqc_2d_366_db_time_by_px_process_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:18 col:2of5 "00718_sqld360_323688_0sjx29v99zfqc_2d_366_db_time_by_px_process_for_sqlexecid_33556325_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:18 col:2of5 "Execution Plans"
17:17:18 PGA and TEMP usage for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:18 col:2of5.

17:17:18 col:2of5 "00719_sqld360_323688_0sjx29v99zfqc_2d_367_pga_and_temp_usage_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:19 col:2of5 "00720_sqld360_323688_0sjx29v99zfqc_2d_367_pga_and_temp_usage_for_sqlexecid_33556325_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:19 col:2of5 "Execution Plans"
17:17:19 Read and Write I/O requests for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:19 col:2of5.

17:17:19 col:2of5 "00721_sqld360_323688_0sjx29v99zfqc_2d_368_read_and_write_io_requests_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:19 col:2of5 "00722_sqld360_323688_0sjx29v99zfqc_2d_368_read_and_write_io_requests_for_sqlexecid_33556325_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:19 col:2of5 "Execution Plans"
17:17:19 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:19 col:2of5.

17:17:19 col:2of5 "00723_sqld360_323688_0sjx29v99zfqc_2d_369_read_write_and_interconnect_io_bytes_for_sqlexecid_33556325_of_phv_2788351063.html"
17:17:19 col:2of5 "00724_sqld360_323688_0sjx29v99zfqc_2d_369_read_write_and_interconnect_io_bytes_for_sqlexecid_33556325_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:19 col:2of5 "Execution Plans"
17:17:19 Raw Data for SQL_EXEC_ID 33556325 of PHV 2788351063

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1196
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26023
AND timestamp BETWEEN TO_DATE('20201007080947', 'YYYYMMDDHH24MISS') AND TO_DATE('20201007081008', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556325) = 33556325
AND NVL(distribution, TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')) = TO_DATE('20201007080950', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:19 col:2of5.

17:17:19 col:2of5 "00725_sqld360_323688_0sjx29v99zfqc_2d_370_raw_data_for_sqlexecid_33556325_of_phv_2788351063.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:20 col:2of5 "Execution Plans"
17:17:20 Plan Tree with subtree for SQL_EXEC_ID 16777640 of PHV 2788351063

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2788351063
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2788351063
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:20 col:2of5.

17:17:20 col:2of5 "00726_sqld360_323688_0sjx29v99zfqc_2d_371_plan_tree_with_subtree_for_sqlexecid_16777640_of_phv_2788351063_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:20 col:2of5 "Execution Plans"
17:17:20 Plan Step IDs timeline for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:20 col:2of5.

17:17:20 col:2of5 "00727_sqld360_323688_0sjx29v99zfqc_2d_372_plan_step_ids_timeline_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:20 col:2of5 "00728_sqld360_323688_0sjx29v99zfqc_2d_372_plan_step_ids_timeline_for_sqlexecid_16777640_of_phv_2788351063_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 Top Step/Event/Obj for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:21 col:2of5.

17:17:21 col:2of5 "00729_sqld360_323688_0sjx29v99zfqc_2d_373_top_stepeventobj_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00730_sqld360_323688_0sjx29v99zfqc_2d_373_top_stepeventobj_for_sqlexecid_16777640_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 Top 15 Wait events timeline SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:21 col:2of5.

17:17:21 col:2of5 "00731_sqld360_323688_0sjx29v99zfqc_2d_374_top_15_wait_events_timeline_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00732_sqld360_323688_0sjx29v99zfqc_2d_374_top_15_wait_events_timeline_sqlexecid_16777640_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 DB Time by PX process for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:21 col:2of5.

17:17:21 col:2of5 "00733_sqld360_323688_0sjx29v99zfqc_2d_375_db_time_by_px_process_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00734_sqld360_323688_0sjx29v99zfqc_2d_375_db_time_by_px_process_for_sqlexecid_16777640_of_phv_2788351063_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 PGA and TEMP usage for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:21 col:2of5.

17:17:21 col:2of5 "00735_sqld360_323688_0sjx29v99zfqc_2d_376_pga_and_temp_usage_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00736_sqld360_323688_0sjx29v99zfqc_2d_376_pga_and_temp_usage_for_sqlexecid_16777640_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 Read and Write I/O requests for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:21 col:2of5.

17:17:21 col:2of5 "00737_sqld360_323688_0sjx29v99zfqc_2d_377_read_and_write_io_requests_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00738_sqld360_323688_0sjx29v99zfqc_2d_377_read_and_write_io_requests_for_sqlexecid_16777640_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:21 col:2of5.

17:17:21 col:2of5 "00739_sqld360_323688_0sjx29v99zfqc_2d_378_read_write_and_interconnect_io_bytes_for_sqlexecid_16777640_of_phv_2788351063.html"
17:17:21 col:2of5 "00740_sqld360_323688_0sjx29v99zfqc_2d_378_read_write_and_interconnect_io_bytes_for_sqlexecid_16777640_of_phv_2788351063_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:21 col:2of5 "Execution Plans"
17:17:21 Raw Data for SQL_EXEC_ID 16777640 of PHV 2788351063

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2788351063
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5820
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 63841
AND timestamp BETWEEN TO_DATE('20201022093445', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022093455', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777640) = 16777640
AND NVL(distribution, TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022093444', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:21 col:2of5.

17:17:21 col:2of5 "00741_sqld360_323688_0sjx29v99zfqc_2d_379_raw_data_for_sqlexecid_16777640_of_phv_2788351063.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:22 col:2of5 "Execution Plans"
17:17:22 Plan Tree for PHV 157137232 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =157137232
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =157137232)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =157137232
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =157137232
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:22 col:2of5.

17:17:22 col:2of5 "00742_sqld360_323688_0sjx29v99zfqc_2d_380_plan_tree_for_phv_157137232_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:23 col:2of5 "Execution Plans"
17:17:23 Plan from Memory for PHV 157137232
Completed: 17:17:23


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:23 col:2of5 "Execution Plans"
17:17:23 Plan from History for PHV 157137232
Completed: 17:17:23


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:23 col:2of5 "Execution Plans"
17:17:23 Avg et/exec for recent execs for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:23 col:2of5.

17:17:23 col:2of5 "00745_sqld360_323688_0sjx29v99zfqc_2d_381_avg_etexec_for_recent_execs_for_phv_157137232.html"
17:17:23 col:2of5 "00746_sqld360_323688_0sjx29v99zfqc_2d_381_avg_etexec_for_recent_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:23 col:2of5 "Execution Plans"
17:17:23 Avg et/exec for historical execs for PHV 157137232

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:23 col:2of5.

17:17:23 col:2of5 "00747_sqld360_323688_0sjx29v99zfqc_2d_382_avg_etexec_for_historical_execs_for_phv_157137232.html"
17:17:23 col:2of5 "00748_sqld360_323688_0sjx29v99zfqc_2d_382_avg_etexec_for_historical_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:24 col:2of5 "Execution Plans"
17:17:24 Peak PGA and TEMP usage for recent execs for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:24 col:2of5.

17:17:24 col:2of5 "00749_sqld360_323688_0sjx29v99zfqc_2d_383_peak_pga_and_temp_usage_for_recent_execs_for_phv_157137232.html"
17:17:24 col:2of5 "00750_sqld360_323688_0sjx29v99zfqc_2d_383_peak_pga_and_temp_usage_for_recent_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:24 col:2of5 "Execution Plans"
17:17:24 Peak PGA and TEMP usage for historical execs for PHV 157137232

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:24 col:2of5.

17:17:24 col:2of5 "00751_sqld360_323688_0sjx29v99zfqc_2d_384_peak_pga_and_temp_usage_for_historical_execs_for_phv_157137232.html"
17:17:24 col:2of5 "00752_sqld360_323688_0sjx29v99zfqc_2d_384_peak_pga_and_temp_usage_for_historical_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:24 col:2of5 "Execution Plans"
17:17:24 Peak Read and Write I/O requests for recent execs for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:24 col:2of5.

17:17:24 col:2of5 "00753_sqld360_323688_0sjx29v99zfqc_2d_385_peak_read_and_write_io_requests_for_recent_execs_for_phv_157137232.html"
17:17:24 col:2of5 "00754_sqld360_323688_0sjx29v99zfqc_2d_385_peak_read_and_write_io_requests_for_recent_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:24 col:2of5 "Execution Plans"
17:17:24 Peak Read and Write I/O requests for historical execs for PHV 157137232

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:24 col:2of5.

17:17:24 col:2of5 "00755_sqld360_323688_0sjx29v99zfqc_2d_386_peak_read_and_write_io_requests_for_historical_execs_for_phv_157137232.html"
17:17:24 col:2of5 "00756_sqld360_323688_0sjx29v99zfqc_2d_386_peak_read_and_write_io_requests_for_historical_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:24 col:2of5 "Execution Plans"
17:17:24 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:24 col:2of5.

17:17:25 col:2of5 "00757_sqld360_323688_0sjx29v99zfqc_2d_387_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_157137232.html"
17:17:25 col:2of5 "00758_sqld360_323688_0sjx29v99zfqc_2d_387_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:25 col:2of5 "Execution Plans"
17:17:25 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 157137232

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:25 col:2of5.

17:17:25 col:2of5 "00759_sqld360_323688_0sjx29v99zfqc_2d_388_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_157137232.html"
17:17:25 col:2of5 "00760_sqld360_323688_0sjx29v99zfqc_2d_388_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:25 col:2of5 "Execution Plans"
17:17:25 Top Wait events for PHV 157137232

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:25 col:2of5.

17:17:25 col:2of5 "00761_sqld360_323688_0sjx29v99zfqc_2d_389_top_wait_events_for_phv_157137232.html"
17:17:25 col:2of5 "00762_sqld360_323688_0sjx29v99zfqc_2d_389_top_wait_events_for_phv_157137232_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:25 col:2of5 "Execution Plans"
17:17:25 Top Objects accessed by PHV 157137232

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  157137232
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:25 col:2of5.

17:17:25 col:2of5 "00763_sqld360_323688_0sjx29v99zfqc_2d_390_top_objects_accessed_by_phv_157137232.html"
17:17:25 col:2of5 "00764_sqld360_323688_0sjx29v99zfqc_2d_390_top_objects_accessed_by_phv_157137232_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:25 col:2of5 "Execution Plans"
17:17:25 Top Plan Steps for PHV 157137232

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:25 col:2of5.

17:17:25 col:2of5 "00765_sqld360_323688_0sjx29v99zfqc_2d_391_top_plan_steps_for_phv_157137232.html"
17:17:25 col:2of5 "00766_sqld360_323688_0sjx29v99zfqc_2d_391_top_plan_steps_for_phv_157137232_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:25 col:2of5 "Execution Plans"
17:17:25 Top Step/Event/Obj for PHV 157137232

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  157137232
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:25 col:2of5.

17:17:25 col:2of5 "00767_sqld360_323688_0sjx29v99zfqc_2d_392_top_stepeventobj_for_phv_157137232.html"
17:17:25 col:2of5 "00768_sqld360_323688_0sjx29v99zfqc_2d_392_top_stepeventobj_for_phv_157137232_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:26 col:2of5 "Execution Plans"
17:17:26 Top 15 Wait events over recent time for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 157137232
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:26 col:2of5.

17:17:26 col:2of5 "00769_sqld360_323688_0sjx29v99zfqc_2d_393_top_15_wait_events_over_recent_time_for_phv_157137232.html"
17:17:26 col:2of5 "00770_sqld360_323688_0sjx29v99zfqc_2d_393_top_15_wait_events_over_recent_time_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:26 col:2of5 "Execution Plans"
17:17:26 Top 15 Wait events over historical time for PHV 157137232

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 157137232
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:26 col:2of5.

17:17:26 col:2of5 "00771_sqld360_323688_0sjx29v99zfqc_2d_394_top_15_wait_events_over_historical_time_for_phv_157137232.html"
17:17:26 col:2of5 "00772_sqld360_323688_0sjx29v99zfqc_2d_394_top_15_wait_events_over_historical_time_for_phv_157137232_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:26 col:2of5 "Execution Plans"
17:17:26 Plan Tree for PHV 1705091248 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1705091248
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1705091248
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:26 col:2of5.

17:17:26 col:2of5 "00773_sqld360_323688_0sjx29v99zfqc_2d_395_plan_tree_for_phv_1705091248_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:27 col:2of5 "Execution Plans"
17:17:27 Plan from Memory for PHV 1705091248
Completed: 17:17:27


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:27 col:2of5 "Execution Plans"
17:17:27 Plan from History for PHV 1705091248
Completed: 17:17:27


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:27 col:2of5 "Execution Plans"
17:17:27 Avg et/exec for recent execs for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:27 col:2of5.

17:17:27 col:2of5 "00776_sqld360_323688_0sjx29v99zfqc_2d_396_avg_etexec_for_recent_execs_for_phv_1705091248.html"
17:17:27 col:2of5 "00777_sqld360_323688_0sjx29v99zfqc_2d_396_avg_etexec_for_recent_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:28 col:2of5 "Execution Plans"
17:17:28 Avg et/exec for historical execs for PHV 1705091248

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:28 col:2of5.

17:17:28 col:2of5 "00778_sqld360_323688_0sjx29v99zfqc_2d_397_avg_etexec_for_historical_execs_for_phv_1705091248.html"
17:17:28 col:2of5 "00779_sqld360_323688_0sjx29v99zfqc_2d_397_avg_etexec_for_historical_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:28 col:2of5 "Execution Plans"
17:17:28 Peak PGA and TEMP usage for recent execs for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:28 col:2of5.

17:17:28 col:2of5 "00780_sqld360_323688_0sjx29v99zfqc_2d_398_peak_pga_and_temp_usage_for_recent_execs_for_phv_1705091248.html"
17:17:28 col:2of5 "00781_sqld360_323688_0sjx29v99zfqc_2d_398_peak_pga_and_temp_usage_for_recent_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:28 col:2of5 "Execution Plans"
17:17:28 Peak PGA and TEMP usage for historical execs for PHV 1705091248

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:28 col:2of5.

17:17:28 col:2of5 "00782_sqld360_323688_0sjx29v99zfqc_2d_399_peak_pga_and_temp_usage_for_historical_execs_for_phv_1705091248.html"
17:17:28 col:2of5 "00783_sqld360_323688_0sjx29v99zfqc_2d_399_peak_pga_and_temp_usage_for_historical_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:28 col:2of5 "Execution Plans"
17:17:28 Peak Read and Write I/O requests for recent execs for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:28 col:2of5.

17:17:28 col:2of5 "00784_sqld360_323688_0sjx29v99zfqc_2d_400_peak_read_and_write_io_requests_for_recent_execs_for_phv_1705091248.html"
17:17:28 col:2of5 "00785_sqld360_323688_0sjx29v99zfqc_2d_400_peak_read_and_write_io_requests_for_recent_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:28 col:2of5 "Execution Plans"
17:17:28 Peak Read and Write I/O requests for historical execs for PHV 1705091248

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:28 col:2of5.

17:17:29 col:2of5 "00786_sqld360_323688_0sjx29v99zfqc_2d_401_peak_read_and_write_io_requests_for_historical_execs_for_phv_1705091248.html"
17:17:29 col:2of5 "00787_sqld360_323688_0sjx29v99zfqc_2d_401_peak_read_and_write_io_requests_for_historical_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:29 col:2of5 "Execution Plans"
17:17:29 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:29 col:2of5.

17:17:29 col:2of5 "00788_sqld360_323688_0sjx29v99zfqc_2d_402_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1705091248.html"
17:17:29 col:2of5 "00789_sqld360_323688_0sjx29v99zfqc_2d_402_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:29 col:2of5 "Execution Plans"
17:17:29 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1705091248

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:29 col:2of5.

17:17:29 col:2of5 "00790_sqld360_323688_0sjx29v99zfqc_2d_403_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1705091248.html"
17:17:29 col:2of5 "00791_sqld360_323688_0sjx29v99zfqc_2d_403_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:29 col:2of5 "Execution Plans"
17:17:29 Top Wait events for PHV 1705091248

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:29 col:2of5.

17:17:29 col:2of5 "00792_sqld360_323688_0sjx29v99zfqc_2d_404_top_wait_events_for_phv_1705091248.html"
17:17:29 col:2of5 "00793_sqld360_323688_0sjx29v99zfqc_2d_404_top_wait_events_for_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:29 col:2of5 "Execution Plans"
17:17:29 Top Objects accessed by PHV 1705091248

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1705091248
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:29 col:2of5.

17:17:29 col:2of5 "00794_sqld360_323688_0sjx29v99zfqc_2d_405_top_objects_accessed_by_phv_1705091248.html"
17:17:30 col:2of5 "00795_sqld360_323688_0sjx29v99zfqc_2d_405_top_objects_accessed_by_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:30 col:2of5 "Execution Plans"
17:17:30 Top Plan Steps for PHV 1705091248

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:30 col:2of5.

17:17:30 col:2of5 "00796_sqld360_323688_0sjx29v99zfqc_2d_406_top_plan_steps_for_phv_1705091248.html"
17:17:30 col:2of5 "00797_sqld360_323688_0sjx29v99zfqc_2d_406_top_plan_steps_for_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:30 col:2of5 "Execution Plans"
17:17:30 Top Step/Event/Obj for PHV 1705091248

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1705091248
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:30 col:2of5.

17:17:30 col:2of5 "00798_sqld360_323688_0sjx29v99zfqc_2d_407_top_stepeventobj_for_phv_1705091248.html"
17:17:30 col:2of5 "00799_sqld360_323688_0sjx29v99zfqc_2d_407_top_stepeventobj_for_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:30 col:2of5 "Execution Plans"
17:17:30 Top 15 Wait events over recent time for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1705091248
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:30 col:2of5.

17:17:30 col:2of5 "00800_sqld360_323688_0sjx29v99zfqc_2d_408_top_15_wait_events_over_recent_time_for_phv_1705091248.html"
17:17:30 col:2of5 "00801_sqld360_323688_0sjx29v99zfqc_2d_408_top_15_wait_events_over_recent_time_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:30 col:2of5 "Execution Plans"
17:17:30 Top 15 Wait events over historical time for PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell single block physical " ,
NVL(aas_03,0) "e03gc current block 2-way" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1705091248
AND object_node IN ('ON CPU','cell single block physical read','gc current block 2-way','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:30 col:2of5.

17:17:30 col:2of5 "00802_sqld360_323688_0sjx29v99zfqc_2d_409_top_15_wait_events_over_historical_time_for_phv_1705091248.html"
17:17:30 col:2of5 "00803_sqld360_323688_0sjx29v99zfqc_2d_409_top_15_wait_events_over_historical_time_for_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:31 col:2of5 "Execution Plans"
17:17:31 Plan Tree with subtree for SQL_EXEC_ID 33554662 of PHV 1705091248

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1705091248
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:31 col:2of5.

17:17:31 col:2of5 "00804_sqld360_323688_0sjx29v99zfqc_2d_410_plan_tree_with_subtree_for_sqlexecid_33554662_of_phv_1705091248_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 Plan Step IDs timeline for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:32 col:2of5.

17:17:32 col:2of5 "00805_sqld360_323688_0sjx29v99zfqc_2d_411_plan_step_ids_timeline_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00806_sqld360_323688_0sjx29v99zfqc_2d_411_plan_step_ids_timeline_for_sqlexecid_33554662_of_phv_1705091248_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 Top Step/Event/Obj for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:32 col:2of5.

17:17:32 col:2of5 "00807_sqld360_323688_0sjx29v99zfqc_2d_412_top_stepeventobj_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00808_sqld360_323688_0sjx29v99zfqc_2d_412_top_stepeventobj_for_sqlexecid_33554662_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 Top 15 Wait events timeline SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03ON CPU" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','gc current block 2-way','ON CPU','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:32 col:2of5.

17:17:32 col:2of5 "00809_sqld360_323688_0sjx29v99zfqc_2d_413_top_15_wait_events_timeline_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00810_sqld360_323688_0sjx29v99zfqc_2d_413_top_15_wait_events_timeline_sqlexecid_33554662_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 DB Time by PX process for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:32 col:2of5.

17:17:32 col:2of5 "00811_sqld360_323688_0sjx29v99zfqc_2d_414_db_time_by_px_process_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00812_sqld360_323688_0sjx29v99zfqc_2d_414_db_time_by_px_process_for_sqlexecid_33554662_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 PGA and TEMP usage for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:32 col:2of5.

17:17:32 col:2of5 "00813_sqld360_323688_0sjx29v99zfqc_2d_415_pga_and_temp_usage_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00814_sqld360_323688_0sjx29v99zfqc_2d_415_pga_and_temp_usage_for_sqlexecid_33554662_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:32 col:2of5 "Execution Plans"
17:17:32 Read and Write I/O requests for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:32 col:2of5.

17:17:32 col:2of5 "00815_sqld360_323688_0sjx29v99zfqc_2d_416_read_and_write_io_requests_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:32 col:2of5 "00816_sqld360_323688_0sjx29v99zfqc_2d_416_read_and_write_io_requests_for_sqlexecid_33554662_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:33 col:2of5 "Execution Plans"
17:17:33 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:33 col:2of5.

17:17:33 col:2of5 "00817_sqld360_323688_0sjx29v99zfqc_2d_417_read_write_and_interconnect_io_bytes_for_sqlexecid_33554662_of_phv_1705091248.html"
17:17:33 col:2of5 "00818_sqld360_323688_0sjx29v99zfqc_2d_417_read_write_and_interconnect_io_bytes_for_sqlexecid_33554662_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:33 col:2of5 "Execution Plans"
17:17:33 Raw Data for SQL_EXEC_ID 33554662 of PHV 1705091248

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5425
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46365
AND timestamp BETWEEN TO_DATE('20201014065613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201014065803', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554662) = 33554662
AND NVL(distribution, TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')) = TO_DATE('20201014065608', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:33 col:2of5.

17:17:33 col:2of5 "00819_sqld360_323688_0sjx29v99zfqc_2d_418_raw_data_for_sqlexecid_33554662_of_phv_1705091248.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:33 col:2of5 "Execution Plans"
17:17:33 Plan Tree with subtree for SQL_EXEC_ID 33555564 of PHV 1705091248

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1705091248
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:33 col:2of5.

17:17:33 col:2of5 "00820_sqld360_323688_0sjx29v99zfqc_2d_419_plan_tree_with_subtree_for_sqlexecid_33555564_of_phv_1705091248_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:34 col:2of5 "Execution Plans"
17:17:34 Plan Step IDs timeline for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:34 col:2of5.

17:17:34 col:2of5 "00821_sqld360_323688_0sjx29v99zfqc_2d_420_plan_step_ids_timeline_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:34 col:2of5 "00822_sqld360_323688_0sjx29v99zfqc_2d_420_plan_step_ids_timeline_for_sqlexecid_33555564_of_phv_1705091248_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:34 col:2of5 "Execution Plans"
17:17:34 Top Step/Event/Obj for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:34 col:2of5.

17:17:34 col:2of5 "00823_sqld360_323688_0sjx29v99zfqc_2d_421_top_stepeventobj_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:34 col:2of5 "00824_sqld360_323688_0sjx29v99zfqc_2d_421_top_stepeventobj_for_sqlexecid_33555564_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:34 col:2of5 "Execution Plans"
17:17:34 Top 15 Wait events timeline SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:34 col:2of5.

17:17:34 col:2of5 "00825_sqld360_323688_0sjx29v99zfqc_2d_422_top_15_wait_events_timeline_sqlexecid_33555564_of_phv_1705091248.html"
17:17:35 col:2of5 "00826_sqld360_323688_0sjx29v99zfqc_2d_422_top_15_wait_events_timeline_sqlexecid_33555564_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:35 col:2of5 "Execution Plans"
17:17:35 DB Time by PX process for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:35 col:2of5.

17:17:35 col:2of5 "00827_sqld360_323688_0sjx29v99zfqc_2d_423_db_time_by_px_process_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:35 col:2of5 "00828_sqld360_323688_0sjx29v99zfqc_2d_423_db_time_by_px_process_for_sqlexecid_33555564_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:35 col:2of5 "Execution Plans"
17:17:35 PGA and TEMP usage for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:35 col:2of5.

17:17:35 col:2of5 "00829_sqld360_323688_0sjx29v99zfqc_2d_424_pga_and_temp_usage_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:35 col:2of5 "00830_sqld360_323688_0sjx29v99zfqc_2d_424_pga_and_temp_usage_for_sqlexecid_33555564_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:35 col:2of5 "Execution Plans"
17:17:35 Read and Write I/O requests for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:35 col:2of5.

17:17:35 col:2of5 "00831_sqld360_323688_0sjx29v99zfqc_2d_425_read_and_write_io_requests_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:35 col:2of5 "00832_sqld360_323688_0sjx29v99zfqc_2d_425_read_and_write_io_requests_for_sqlexecid_33555564_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:35 col:2of5 "Execution Plans"
17:17:35 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:35 col:2of5.

17:17:35 col:2of5 "00833_sqld360_323688_0sjx29v99zfqc_2d_426_read_write_and_interconnect_io_bytes_for_sqlexecid_33555564_of_phv_1705091248.html"
17:17:35 col:2of5 "00834_sqld360_323688_0sjx29v99zfqc_2d_426_read_write_and_interconnect_io_bytes_for_sqlexecid_33555564_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:35 col:2of5 "Execution Plans"
17:17:35 Raw Data for SQL_EXEC_ID 33555564 of PHV 1705091248

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1579
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 13748
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555564) = 33555564
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:35 col:2of5.

17:17:35 col:2of5 "00835_sqld360_323688_0sjx29v99zfqc_2d_427_raw_data_for_sqlexecid_33555564_of_phv_1705091248.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:36 col:2of5 "Execution Plans"
17:17:36 Plan Tree with subtree for SQL_EXEC_ID 33555563 of PHV 1705091248

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1705091248
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1705091248
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:36 col:2of5.

17:17:36 col:2of5 "00836_sqld360_323688_0sjx29v99zfqc_2d_428_plan_tree_with_subtree_for_sqlexecid_33555563_of_phv_1705091248_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 Plan Step IDs timeline for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:37 col:2of5.

17:17:37 col:2of5 "00837_sqld360_323688_0sjx29v99zfqc_2d_429_plan_step_ids_timeline_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:37 col:2of5 "00838_sqld360_323688_0sjx29v99zfqc_2d_429_plan_step_ids_timeline_for_sqlexecid_33555563_of_phv_1705091248_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 Top Step/Event/Obj for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:37 col:2of5.

17:17:37 col:2of5 "00839_sqld360_323688_0sjx29v99zfqc_2d_430_top_stepeventobj_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:37 col:2of5 "00840_sqld360_323688_0sjx29v99zfqc_2d_430_top_stepeventobj_for_sqlexecid_33555563_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 Top 15 Wait events timeline SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:37 col:2of5.

17:17:37 col:2of5 "00841_sqld360_323688_0sjx29v99zfqc_2d_431_top_15_wait_events_timeline_sqlexecid_33555563_of_phv_1705091248.html"
17:17:37 col:2of5 "00842_sqld360_323688_0sjx29v99zfqc_2d_431_top_15_wait_events_timeline_sqlexecid_33555563_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 DB Time by PX process for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:37 col:2of5.

17:17:37 col:2of5 "00843_sqld360_323688_0sjx29v99zfqc_2d_432_db_time_by_px_process_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:37 col:2of5 "00844_sqld360_323688_0sjx29v99zfqc_2d_432_db_time_by_px_process_for_sqlexecid_33555563_of_phv_1705091248_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 PGA and TEMP usage for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:37 col:2of5.

17:17:37 col:2of5 "00845_sqld360_323688_0sjx29v99zfqc_2d_433_pga_and_temp_usage_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:37 col:2of5 "00846_sqld360_323688_0sjx29v99zfqc_2d_433_pga_and_temp_usage_for_sqlexecid_33555563_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:37 col:2of5 "Execution Plans"
17:17:37 Read and Write I/O requests for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:37 col:2of5.

17:17:38 col:2of5 "00847_sqld360_323688_0sjx29v99zfqc_2d_434_read_and_write_io_requests_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:38 col:2of5 "00848_sqld360_323688_0sjx29v99zfqc_2d_434_read_and_write_io_requests_for_sqlexecid_33555563_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:38 col:2of5 "Execution Plans"
17:17:38 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:38 col:2of5.

17:17:38 col:2of5 "00849_sqld360_323688_0sjx29v99zfqc_2d_435_read_write_and_interconnect_io_bytes_for_sqlexecid_33555563_of_phv_1705091248.html"
17:17:38 col:2of5 "00850_sqld360_323688_0sjx29v99zfqc_2d_435_read_write_and_interconnect_io_bytes_for_sqlexecid_33555563_of_phv_1705091248_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:38 col:2of5 "Execution Plans"
17:17:38 Raw Data for SQL_EXEC_ID 33555563 of PHV 1705091248

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1705091248
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 36409
AND timestamp BETWEEN TO_DATE('20201028142835', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028142845', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555563) = 33555563
AND NVL(distribution, TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')) = TO_DATE('20201028142829', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:38 col:2of5.

17:17:38 col:2of5 "00851_sqld360_323688_0sjx29v99zfqc_2d_436_raw_data_for_sqlexecid_33555563_of_phv_1705091248.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:38 col:2of5 "Execution Plans"
17:17:38 Plan Tree for PHV 1592253080 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1592253080
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1592253080)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1592253080
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1592253080
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:38 col:2of5.

17:17:39 col:2of5 "00852_sqld360_323688_0sjx29v99zfqc_2d_437_plan_tree_for_phv_1592253080_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:39 col:2of5 "Execution Plans"
17:17:39 Plan from Memory for PHV 1592253080
Completed: 17:17:39


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:39 col:2of5 "Execution Plans"
17:17:39 Plan from History for PHV 1592253080
Completed: 17:17:40


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:40 col:2of5 "Execution Plans"
17:17:40 Avg et/exec for recent execs for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:40 col:2of5.

17:17:40 col:2of5 "00855_sqld360_323688_0sjx29v99zfqc_2d_438_avg_etexec_for_recent_execs_for_phv_1592253080.html"
17:17:40 col:2of5 "00856_sqld360_323688_0sjx29v99zfqc_2d_438_avg_etexec_for_recent_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:40 col:2of5 "Execution Plans"
17:17:40 Avg et/exec for historical execs for PHV 1592253080

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:40 col:2of5.

17:17:40 col:2of5 "00857_sqld360_323688_0sjx29v99zfqc_2d_439_avg_etexec_for_historical_execs_for_phv_1592253080.html"
17:17:40 col:2of5 "00858_sqld360_323688_0sjx29v99zfqc_2d_439_avg_etexec_for_historical_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:40 col:2of5 "Execution Plans"
17:17:40 Peak PGA and TEMP usage for recent execs for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:40 col:2of5.

17:17:40 col:2of5 "00859_sqld360_323688_0sjx29v99zfqc_2d_440_peak_pga_and_temp_usage_for_recent_execs_for_phv_1592253080.html"
17:17:40 col:2of5 "00860_sqld360_323688_0sjx29v99zfqc_2d_440_peak_pga_and_temp_usage_for_recent_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:40 col:2of5 "Execution Plans"
17:17:40 Peak PGA and TEMP usage for historical execs for PHV 1592253080

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:40 col:2of5.

17:17:40 col:2of5 "00861_sqld360_323688_0sjx29v99zfqc_2d_441_peak_pga_and_temp_usage_for_historical_execs_for_phv_1592253080.html"
17:17:40 col:2of5 "00862_sqld360_323688_0sjx29v99zfqc_2d_441_peak_pga_and_temp_usage_for_historical_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:41 col:2of5 "Execution Plans"
17:17:41 Peak Read and Write I/O requests for recent execs for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:41 col:2of5.

17:17:41 col:2of5 "00863_sqld360_323688_0sjx29v99zfqc_2d_442_peak_read_and_write_io_requests_for_recent_execs_for_phv_1592253080.html"
17:17:41 col:2of5 "00864_sqld360_323688_0sjx29v99zfqc_2d_442_peak_read_and_write_io_requests_for_recent_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:41 col:2of5 "Execution Plans"
17:17:41 Peak Read and Write I/O requests for historical execs for PHV 1592253080

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:41 col:2of5.

17:17:41 col:2of5 "00865_sqld360_323688_0sjx29v99zfqc_2d_443_peak_read_and_write_io_requests_for_historical_execs_for_phv_1592253080.html"
17:17:41 col:2of5 "00866_sqld360_323688_0sjx29v99zfqc_2d_443_peak_read_and_write_io_requests_for_historical_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:41 col:2of5 "Execution Plans"
17:17:41 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:41 col:2of5.

17:17:41 col:2of5 "00867_sqld360_323688_0sjx29v99zfqc_2d_444_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1592253080.html"
17:17:41 col:2of5 "00868_sqld360_323688_0sjx29v99zfqc_2d_444_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:41 col:2of5 "Execution Plans"
17:17:41 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1592253080

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:41 col:2of5.

17:17:41 col:2of5 "00869_sqld360_323688_0sjx29v99zfqc_2d_445_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1592253080.html"
17:17:41 col:2of5 "00870_sqld360_323688_0sjx29v99zfqc_2d_445_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top Wait events for PHV 1592253080

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:42 col:2of5.

17:17:42 col:2of5 "00871_sqld360_323688_0sjx29v99zfqc_2d_446_top_wait_events_for_phv_1592253080.html"
17:17:42 col:2of5 "00872_sqld360_323688_0sjx29v99zfqc_2d_446_top_wait_events_for_phv_1592253080_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top Objects accessed by PHV 1592253080

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1592253080
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:42 col:2of5.

17:17:42 col:2of5 "00873_sqld360_323688_0sjx29v99zfqc_2d_447_top_objects_accessed_by_phv_1592253080.html"
17:17:42 col:2of5 "00874_sqld360_323688_0sjx29v99zfqc_2d_447_top_objects_accessed_by_phv_1592253080_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top Plan Steps for PHV 1592253080

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:42 col:2of5.

17:17:42 col:2of5 "00875_sqld360_323688_0sjx29v99zfqc_2d_448_top_plan_steps_for_phv_1592253080.html"
17:17:42 col:2of5 "00876_sqld360_323688_0sjx29v99zfqc_2d_448_top_plan_steps_for_phv_1592253080_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top Step/Event/Obj for PHV 1592253080

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1592253080
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:42 col:2of5.

17:17:42 col:2of5 "00877_sqld360_323688_0sjx29v99zfqc_2d_449_top_stepeventobj_for_phv_1592253080.html"
17:17:42 col:2of5 "00878_sqld360_323688_0sjx29v99zfqc_2d_449_top_stepeventobj_for_phv_1592253080_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top 15 Wait events over recent time for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1592253080
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:42 col:2of5.

17:17:42 col:2of5 "00879_sqld360_323688_0sjx29v99zfqc_2d_450_top_15_wait_events_over_recent_time_for_phv_1592253080.html"
17:17:42 col:2of5 "00880_sqld360_323688_0sjx29v99zfqc_2d_450_top_15_wait_events_over_recent_time_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:42 col:2of5 "Execution Plans"
17:17:42 Top 15 Wait events over historical time for PHV 1592253080

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1592253080
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:42 col:2of5.

17:17:43 col:2of5 "00881_sqld360_323688_0sjx29v99zfqc_2d_451_top_15_wait_events_over_historical_time_for_phv_1592253080.html"
17:17:43 col:2of5 "00882_sqld360_323688_0sjx29v99zfqc_2d_451_top_15_wait_events_over_historical_time_for_phv_1592253080_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:43 col:2of5 "Execution Plans"
17:17:43 Plan Tree for PHV 2644118522 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2644118522
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2644118522
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:43 col:2of5.

17:17:43 col:2of5 "00883_sqld360_323688_0sjx29v99zfqc_2d_452_plan_tree_for_phv_2644118522_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:44 col:2of5 "Execution Plans"
17:17:44 Plan from Memory for PHV 2644118522
Completed: 17:17:44


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:44 col:2of5 "Execution Plans"
17:17:44 Plan from History for PHV 2644118522
Completed: 17:17:44


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:44 col:2of5 "Execution Plans"
17:17:44 Avg et/exec for recent execs for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:44 col:2of5.

17:17:44 col:2of5 "00886_sqld360_323688_0sjx29v99zfqc_2d_453_avg_etexec_for_recent_execs_for_phv_2644118522.html"
17:17:44 col:2of5 "00887_sqld360_323688_0sjx29v99zfqc_2d_453_avg_etexec_for_recent_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:45 col:2of5 "Execution Plans"
17:17:45 Avg et/exec for historical execs for PHV 2644118522

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:45 col:2of5.

17:17:45 col:2of5 "00888_sqld360_323688_0sjx29v99zfqc_2d_454_avg_etexec_for_historical_execs_for_phv_2644118522.html"
17:17:45 col:2of5 "00889_sqld360_323688_0sjx29v99zfqc_2d_454_avg_etexec_for_historical_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:45 col:2of5 "Execution Plans"
17:17:45 Peak PGA and TEMP usage for recent execs for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:45 col:2of5.

17:17:45 col:2of5 "00890_sqld360_323688_0sjx29v99zfqc_2d_455_peak_pga_and_temp_usage_for_recent_execs_for_phv_2644118522.html"
17:17:45 col:2of5 "00891_sqld360_323688_0sjx29v99zfqc_2d_455_peak_pga_and_temp_usage_for_recent_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:45 col:2of5 "Execution Plans"
17:17:45 Peak PGA and TEMP usage for historical execs for PHV 2644118522

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:45 col:2of5.

17:17:45 col:2of5 "00892_sqld360_323688_0sjx29v99zfqc_2d_456_peak_pga_and_temp_usage_for_historical_execs_for_phv_2644118522.html"
17:17:45 col:2of5 "00893_sqld360_323688_0sjx29v99zfqc_2d_456_peak_pga_and_temp_usage_for_historical_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:45 col:2of5 "Execution Plans"
17:17:45 Peak Read and Write I/O requests for recent execs for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:45 col:2of5.

17:17:45 col:2of5 "00894_sqld360_323688_0sjx29v99zfqc_2d_457_peak_read_and_write_io_requests_for_recent_execs_for_phv_2644118522.html"
17:17:45 col:2of5 "00895_sqld360_323688_0sjx29v99zfqc_2d_457_peak_read_and_write_io_requests_for_recent_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:46 col:2of5 "Execution Plans"
17:17:46 Peak Read and Write I/O requests for historical execs for PHV 2644118522

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:46 col:2of5.

17:17:46 col:2of5 "00896_sqld360_323688_0sjx29v99zfqc_2d_458_peak_read_and_write_io_requests_for_historical_execs_for_phv_2644118522.html"
17:17:46 col:2of5 "00897_sqld360_323688_0sjx29v99zfqc_2d_458_peak_read_and_write_io_requests_for_historical_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:46 col:2of5 "Execution Plans"
17:17:46 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:46 col:2of5.

17:17:46 col:2of5 "00898_sqld360_323688_0sjx29v99zfqc_2d_459_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2644118522.html"
17:17:46 col:2of5 "00899_sqld360_323688_0sjx29v99zfqc_2d_459_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:46 col:2of5 "Execution Plans"
17:17:46 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2644118522

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:46 col:2of5.

17:17:46 col:2of5 "00900_sqld360_323688_0sjx29v99zfqc_2d_460_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2644118522.html"
17:17:46 col:2of5 "00901_sqld360_323688_0sjx29v99zfqc_2d_460_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:46 col:2of5 "Execution Plans"
17:17:46 Top Wait events for PHV 2644118522

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:46 col:2of5.

17:17:46 col:2of5 "00902_sqld360_323688_0sjx29v99zfqc_2d_461_top_wait_events_for_phv_2644118522.html"
17:17:46 col:2of5 "00903_sqld360_323688_0sjx29v99zfqc_2d_461_top_wait_events_for_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:46 col:2of5 "Execution Plans"
17:17:46 Top Objects accessed by PHV 2644118522

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2644118522
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:46 col:2of5.

17:17:47 col:2of5 "00904_sqld360_323688_0sjx29v99zfqc_2d_462_top_objects_accessed_by_phv_2644118522.html"
17:17:47 col:2of5 "00905_sqld360_323688_0sjx29v99zfqc_2d_462_top_objects_accessed_by_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:47 col:2of5 "Execution Plans"
17:17:47 Top Plan Steps for PHV 2644118522

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:47 col:2of5.

17:17:47 col:2of5 "00906_sqld360_323688_0sjx29v99zfqc_2d_463_top_plan_steps_for_phv_2644118522.html"
17:17:47 col:2of5 "00907_sqld360_323688_0sjx29v99zfqc_2d_463_top_plan_steps_for_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:47 col:2of5 "Execution Plans"
17:17:47 Top Step/Event/Obj for PHV 2644118522

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2644118522
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:47 col:2of5.

17:17:47 col:2of5 "00908_sqld360_323688_0sjx29v99zfqc_2d_464_top_stepeventobj_for_phv_2644118522.html"
17:17:47 col:2of5 "00909_sqld360_323688_0sjx29v99zfqc_2d_464_top_stepeventobj_for_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:47 col:2of5 "Execution Plans"
17:17:47 Top 15 Wait events over recent time for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2644118522
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:47 col:2of5.

17:17:47 col:2of5 "00910_sqld360_323688_0sjx29v99zfqc_2d_465_top_15_wait_events_over_recent_time_for_phv_2644118522.html"
17:17:47 col:2of5 "00911_sqld360_323688_0sjx29v99zfqc_2d_465_top_15_wait_events_over_recent_time_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:47 col:2of5 "Execution Plans"
17:17:47 Top 15 Wait events over historical time for PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01gc current block 2-way" ,
NVL(aas_02,0) "e02ON CPU" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2644118522
AND object_node IN ('gc current block 2-way','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:47 col:2of5.

17:17:47 col:2of5 "00912_sqld360_323688_0sjx29v99zfqc_2d_466_top_15_wait_events_over_historical_time_for_phv_2644118522.html"
17:17:47 col:2of5 "00913_sqld360_323688_0sjx29v99zfqc_2d_466_top_15_wait_events_over_historical_time_for_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:48 col:2of5 "Execution Plans"
17:17:48 Plan Tree with subtree for SQL_EXEC_ID 33554820 of PHV 2644118522

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2644118522
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:48 col:2of5.

17:17:48 col:2of5 "00914_sqld360_323688_0sjx29v99zfqc_2d_467_plan_tree_with_subtree_for_sqlexecid_33554820_of_phv_2644118522_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 Plan Step IDs timeline for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:49 col:2of5.

17:17:49 col:2of5 "00915_sqld360_323688_0sjx29v99zfqc_2d_468_plan_step_ids_timeline_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:49 col:2of5 "00916_sqld360_323688_0sjx29v99zfqc_2d_468_plan_step_ids_timeline_for_sqlexecid_33554820_of_phv_2644118522_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 Top Step/Event/Obj for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:49 col:2of5.

17:17:49 col:2of5 "00917_sqld360_323688_0sjx29v99zfqc_2d_469_top_stepeventobj_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:49 col:2of5 "00918_sqld360_323688_0sjx29v99zfqc_2d_469_top_stepeventobj_for_sqlexecid_33554820_of_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 Top 15 Wait events timeline SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:49 col:2of5.

17:17:49 col:2of5 "00919_sqld360_323688_0sjx29v99zfqc_2d_470_top_15_wait_events_timeline_sqlexecid_33554820_of_phv_2644118522.html"
17:17:49 col:2of5 "00920_sqld360_323688_0sjx29v99zfqc_2d_470_top_15_wait_events_timeline_sqlexecid_33554820_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 DB Time by PX process for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:49 col:2of5.

17:17:49 col:2of5 "00921_sqld360_323688_0sjx29v99zfqc_2d_471_db_time_by_px_process_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:49 col:2of5 "00922_sqld360_323688_0sjx29v99zfqc_2d_471_db_time_by_px_process_for_sqlexecid_33554820_of_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 PGA and TEMP usage for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:49 col:2of5.

17:17:49 col:2of5 "00923_sqld360_323688_0sjx29v99zfqc_2d_472_pga_and_temp_usage_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:49 col:2of5 "00924_sqld360_323688_0sjx29v99zfqc_2d_472_pga_and_temp_usage_for_sqlexecid_33554820_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:49 col:2of5 "Execution Plans"
17:17:49 Read and Write I/O requests for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:49 col:2of5.

17:17:50 col:2of5 "00925_sqld360_323688_0sjx29v99zfqc_2d_473_read_and_write_io_requests_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:50 col:2of5 "00926_sqld360_323688_0sjx29v99zfqc_2d_473_read_and_write_io_requests_for_sqlexecid_33554820_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:50 col:2of5 "Execution Plans"
17:17:50 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:50 col:2of5.

17:17:50 col:2of5 "00927_sqld360_323688_0sjx29v99zfqc_2d_474_read_write_and_interconnect_io_bytes_for_sqlexecid_33554820_of_phv_2644118522.html"
17:17:50 col:2of5 "00928_sqld360_323688_0sjx29v99zfqc_2d_474_read_write_and_interconnect_io_bytes_for_sqlexecid_33554820_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:50 col:2of5 "Execution Plans"
17:17:50 Raw Data for SQL_EXEC_ID 33554820 of PHV 2644118522

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 22518
AND timestamp BETWEEN TO_DATE('20201015064311', 'YYYYMMDDHH24MISS') AND TO_DATE('20201015064431', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554820) = 33554820
AND NVL(distribution, TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')) = TO_DATE('20201015064306', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:50 col:2of5.

17:17:50 col:2of5 "00929_sqld360_323688_0sjx29v99zfqc_2d_475_raw_data_for_sqlexecid_33554820_of_phv_2644118522.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:51 col:2of5 "Execution Plans"
17:17:51 Plan Tree with subtree for SQL_EXEC_ID 33556615 of PHV 2644118522

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2644118522
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2644118522
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:51 col:2of5.

17:17:51 col:2of5 "00930_sqld360_323688_0sjx29v99zfqc_2d_476_plan_tree_with_subtree_for_sqlexecid_33556615_of_phv_2644118522_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:51 col:2of5 "Execution Plans"
17:17:51 Plan Step IDs timeline for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:51 col:2of5.

17:17:51 col:2of5 "00931_sqld360_323688_0sjx29v99zfqc_2d_477_plan_step_ids_timeline_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:51 col:2of5 "00932_sqld360_323688_0sjx29v99zfqc_2d_477_plan_step_ids_timeline_for_sqlexecid_33556615_of_phv_2644118522_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:51 col:2of5 "Execution Plans"
17:17:51 Top Step/Event/Obj for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:51 col:2of5.

17:17:51 col:2of5 "00933_sqld360_323688_0sjx29v99zfqc_2d_478_top_stepeventobj_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00934_sqld360_323688_0sjx29v99zfqc_2d_478_top_stepeventobj_for_sqlexecid_33556615_of_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 Top 15 Wait events timeline SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01gc current block 2-way" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND object_node IN ('gc current block 2-way','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:52 col:2of5.

17:17:52 col:2of5 "00935_sqld360_323688_0sjx29v99zfqc_2d_479_top_15_wait_events_timeline_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00936_sqld360_323688_0sjx29v99zfqc_2d_479_top_15_wait_events_timeline_sqlexecid_33556615_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 DB Time by PX process for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:52 col:2of5.

17:17:52 col:2of5 "00937_sqld360_323688_0sjx29v99zfqc_2d_480_db_time_by_px_process_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00938_sqld360_323688_0sjx29v99zfqc_2d_480_db_time_by_px_process_for_sqlexecid_33556615_of_phv_2644118522_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 PGA and TEMP usage for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:52 col:2of5.

17:17:52 col:2of5 "00939_sqld360_323688_0sjx29v99zfqc_2d_481_pga_and_temp_usage_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00940_sqld360_323688_0sjx29v99zfqc_2d_481_pga_and_temp_usage_for_sqlexecid_33556615_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 Read and Write I/O requests for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:52 col:2of5.

17:17:52 col:2of5 "00941_sqld360_323688_0sjx29v99zfqc_2d_482_read_and_write_io_requests_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00942_sqld360_323688_0sjx29v99zfqc_2d_482_read_and_write_io_requests_for_sqlexecid_33556615_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:52 col:2of5.

17:17:52 col:2of5 "00943_sqld360_323688_0sjx29v99zfqc_2d_483_read_write_and_interconnect_io_bytes_for_sqlexecid_33556615_of_phv_2644118522.html"
17:17:52 col:2of5 "00944_sqld360_323688_0sjx29v99zfqc_2d_483_read_write_and_interconnect_io_bytes_for_sqlexecid_33556615_of_phv_2644118522_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:52 col:2of5 "Execution Plans"
17:17:52 Raw Data for SQL_EXEC_ID 33556615 of PHV 2644118522

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2644118522
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3879
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8447
AND timestamp BETWEEN TO_DATE('20201009065512', 'YYYYMMDDHH24MISS') AND TO_DATE('20201009065633', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556615) = 33556615
AND NVL(distribution, TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')) = TO_DATE('20201009065507', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:17:52 col:2of5.

17:17:53 col:2of5 "00945_sqld360_323688_0sjx29v99zfqc_2d_484_raw_data_for_sqlexecid_33556615_of_phv_2644118522.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:53 col:2of5 "Execution Plans"
17:17:53 Plan Tree for PHV 1259275079 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1259275079
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1259275079
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:53 col:2of5.

17:17:53 col:2of5 "00946_sqld360_323688_0sjx29v99zfqc_2d_485_plan_tree_for_phv_1259275079_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:54 col:2of5 "Execution Plans"
17:17:54 Plan from Memory for PHV 1259275079
Completed: 17:17:54


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:54 col:2of5 "Execution Plans"
17:17:54 Plan from History for PHV 1259275079
Completed: 17:17:54


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:54 col:2of5 "Execution Plans"
17:17:54 Avg et/exec for recent execs for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:17:54 col:2of5.

17:17:54 col:2of5 "00949_sqld360_323688_0sjx29v99zfqc_2d_486_avg_etexec_for_recent_execs_for_phv_1259275079.html"
17:17:54 col:2of5 "00950_sqld360_323688_0sjx29v99zfqc_2d_486_avg_etexec_for_recent_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:54 col:2of5 "Execution Plans"
17:17:54 Avg et/exec for historical execs for PHV 1259275079

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:54 col:2of5.

17:17:54 col:2of5 "00951_sqld360_323688_0sjx29v99zfqc_2d_487_avg_etexec_for_historical_execs_for_phv_1259275079.html"
17:17:55 col:2of5 "00952_sqld360_323688_0sjx29v99zfqc_2d_487_avg_etexec_for_historical_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:55 col:2of5 "Execution Plans"
17:17:55 Peak PGA and TEMP usage for recent execs for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:55 col:2of5.

17:17:55 col:2of5 "00953_sqld360_323688_0sjx29v99zfqc_2d_488_peak_pga_and_temp_usage_for_recent_execs_for_phv_1259275079.html"
17:17:55 col:2of5 "00954_sqld360_323688_0sjx29v99zfqc_2d_488_peak_pga_and_temp_usage_for_recent_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:55 col:2of5 "Execution Plans"
17:17:55 Peak PGA and TEMP usage for historical execs for PHV 1259275079

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:55 col:2of5.

17:17:55 col:2of5 "00955_sqld360_323688_0sjx29v99zfqc_2d_489_peak_pga_and_temp_usage_for_historical_execs_for_phv_1259275079.html"
17:17:55 col:2of5 "00956_sqld360_323688_0sjx29v99zfqc_2d_489_peak_pga_and_temp_usage_for_historical_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:55 col:2of5 "Execution Plans"
17:17:55 Peak Read and Write I/O requests for recent execs for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:55 col:2of5.

17:17:55 col:2of5 "00957_sqld360_323688_0sjx29v99zfqc_2d_490_peak_read_and_write_io_requests_for_recent_execs_for_phv_1259275079.html"
17:17:55 col:2of5 "00958_sqld360_323688_0sjx29v99zfqc_2d_490_peak_read_and_write_io_requests_for_recent_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:55 col:2of5 "Execution Plans"
17:17:55 Peak Read and Write I/O requests for historical execs for PHV 1259275079

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:55 col:2of5.

17:17:55 col:2of5 "00959_sqld360_323688_0sjx29v99zfqc_2d_491_peak_read_and_write_io_requests_for_historical_execs_for_phv_1259275079.html"
17:17:56 col:2of5 "00960_sqld360_323688_0sjx29v99zfqc_2d_491_peak_read_and_write_io_requests_for_historical_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:56 col:2of5 "Execution Plans"
17:17:56 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:17:56 col:2of5.

17:17:56 col:2of5 "00961_sqld360_323688_0sjx29v99zfqc_2d_492_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1259275079.html"
17:17:56 col:2of5 "00962_sqld360_323688_0sjx29v99zfqc_2d_492_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:56 col:2of5 "Execution Plans"
17:17:56 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1259275079

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:17:56 col:2of5.

17:17:56 col:2of5 "00963_sqld360_323688_0sjx29v99zfqc_2d_493_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1259275079.html"
17:17:56 col:2of5 "00964_sqld360_323688_0sjx29v99zfqc_2d_493_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:56 col:2of5 "Execution Plans"
17:17:56 Top Wait events for PHV 1259275079

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:17:56 col:2of5.

17:17:56 col:2of5 "00965_sqld360_323688_0sjx29v99zfqc_2d_494_top_wait_events_for_phv_1259275079.html"
17:17:56 col:2of5 "00966_sqld360_323688_0sjx29v99zfqc_2d_494_top_wait_events_for_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:56 col:2of5 "Execution Plans"
17:17:56 Top Objects accessed by PHV 1259275079

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1259275079
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:17:56 col:2of5.

17:17:56 col:2of5 "00967_sqld360_323688_0sjx29v99zfqc_2d_495_top_objects_accessed_by_phv_1259275079.html"
17:17:56 col:2of5 "00968_sqld360_323688_0sjx29v99zfqc_2d_495_top_objects_accessed_by_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:56 col:2of5 "Execution Plans"
17:17:56 Top Plan Steps for PHV 1259275079

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:17:56 col:2of5.

17:17:57 col:2of5 "00969_sqld360_323688_0sjx29v99zfqc_2d_496_top_plan_steps_for_phv_1259275079.html"
17:17:57 col:2of5 "00970_sqld360_323688_0sjx29v99zfqc_2d_496_top_plan_steps_for_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:57 col:2of5 "Execution Plans"
17:17:57 Top Step/Event/Obj for PHV 1259275079

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1259275079
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:57 col:2of5.

17:17:57 col:2of5 "00971_sqld360_323688_0sjx29v99zfqc_2d_497_top_stepeventobj_for_phv_1259275079.html"
17:17:57 col:2of5 "00972_sqld360_323688_0sjx29v99zfqc_2d_497_top_stepeventobj_for_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:57 col:2of5 "Execution Plans"
17:17:57 Top 15 Wait events over recent time for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1259275079
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:57 col:2of5.

17:17:57 col:2of5 "00973_sqld360_323688_0sjx29v99zfqc_2d_498_top_15_wait_events_over_recent_time_for_phv_1259275079.html"
17:17:57 col:2of5 "00974_sqld360_323688_0sjx29v99zfqc_2d_498_top_15_wait_events_over_recent_time_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:57 col:2of5 "Execution Plans"
17:17:57 Top 15 Wait events over historical time for PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02library cache load lock" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'library cache load lock' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1259275079
AND object_node IN ('ON CPU','library cache load lock','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:17:57 col:2of5.

17:17:57 col:2of5 "00975_sqld360_323688_0sjx29v99zfqc_2d_499_top_15_wait_events_over_historical_time_for_phv_1259275079.html"
17:17:57 col:2of5 "00976_sqld360_323688_0sjx29v99zfqc_2d_499_top_15_wait_events_over_historical_time_for_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:58 col:2of5 "Execution Plans"
17:17:58 Plan Tree with subtree for SQL_EXEC_ID 16777449 of PHV 1259275079

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1259275079
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:17:58 col:2of5.

17:17:58 col:2of5 "00977_sqld360_323688_0sjx29v99zfqc_2d_500_plan_tree_with_subtree_for_sqlexecid_16777449_of_phv_1259275079_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:58 col:2of5 "Execution Plans"
17:17:58 Plan Step IDs timeline for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:17:58 col:2of5.

17:17:58 col:2of5 "00978_sqld360_323688_0sjx29v99zfqc_2d_501_plan_step_ids_timeline_for_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00979_sqld360_323688_0sjx29v99zfqc_2d_501_plan_step_ids_timeline_for_sqlexecid_16777449_of_phv_1259275079_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:59 col:2of5 "Execution Plans"
17:17:59 Top Step/Event/Obj for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:17:59 col:2of5.

17:17:59 col:2of5 "00980_sqld360_323688_0sjx29v99zfqc_2d_502_top_stepeventobj_for_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00981_sqld360_323688_0sjx29v99zfqc_2d_502_top_stepeventobj_for_sqlexecid_16777449_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:59 col:2of5 "Execution Plans"
17:17:59 Top 15 Wait events timeline SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02library cache load lock" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'library cache load lock' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','library cache load lock','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:17:59 col:2of5.

17:17:59 col:2of5 "00982_sqld360_323688_0sjx29v99zfqc_2d_503_top_15_wait_events_timeline_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00983_sqld360_323688_0sjx29v99zfqc_2d_503_top_15_wait_events_timeline_sqlexecid_16777449_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:59 col:2of5 "Execution Plans"
17:17:59 DB Time by PX process for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:17:59 col:2of5.

17:17:59 col:2of5 "00984_sqld360_323688_0sjx29v99zfqc_2d_504_db_time_by_px_process_for_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00985_sqld360_323688_0sjx29v99zfqc_2d_504_db_time_by_px_process_for_sqlexecid_16777449_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:59 col:2of5 "Execution Plans"
17:17:59 PGA and TEMP usage for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:59 col:2of5.

17:17:59 col:2of5 "00986_sqld360_323688_0sjx29v99zfqc_2d_505_pga_and_temp_usage_for_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00987_sqld360_323688_0sjx29v99zfqc_2d_505_pga_and_temp_usage_for_sqlexecid_16777449_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:17:59 col:2of5 "Execution Plans"
17:17:59 Read and Write I/O requests for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:17:59 col:2of5.

17:17:59 col:2of5 "00988_sqld360_323688_0sjx29v99zfqc_2d_506_read_and_write_io_requests_for_sqlexecid_16777449_of_phv_1259275079.html"
17:17:59 col:2of5 "00989_sqld360_323688_0sjx29v99zfqc_2d_506_read_and_write_io_requests_for_sqlexecid_16777449_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:00 col:2of5 "Execution Plans"
17:18:00 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:00 col:2of5.

17:18:00 col:2of5 "00990_sqld360_323688_0sjx29v99zfqc_2d_507_read_write_and_interconnect_io_bytes_for_sqlexecid_16777449_of_phv_1259275079.html"
17:18:00 col:2of5 "00991_sqld360_323688_0sjx29v99zfqc_2d_507_read_write_and_interconnect_io_bytes_for_sqlexecid_16777449_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:00 col:2of5 "Execution Plans"
17:18:00 Raw Data for SQL_EXEC_ID 16777449 of PHV 1259275079

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4277
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 37027
AND timestamp BETWEEN TO_DATE('20201020170242', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020170302', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777449) = 16777449
AND NVL(distribution, TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020170243', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:00 col:2of5.

17:18:00 col:2of5 "00992_sqld360_323688_0sjx29v99zfqc_2d_508_raw_data_for_sqlexecid_16777449_of_phv_1259275079.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:00 col:2of5 "Execution Plans"
17:18:00 Plan Tree with subtree for SQL_EXEC_ID 33554532 of PHV 1259275079

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1259275079
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:00 col:2of5.

17:18:01 col:2of5 "00993_sqld360_323688_0sjx29v99zfqc_2d_509_plan_tree_with_subtree_for_sqlexecid_33554532_of_phv_1259275079_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:01 col:2of5 "Execution Plans"
17:18:01 Plan Step IDs timeline for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:18:01 col:2of5.

17:18:01 col:2of5 "00994_sqld360_323688_0sjx29v99zfqc_2d_510_plan_step_ids_timeline_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:01 col:2of5 "00995_sqld360_323688_0sjx29v99zfqc_2d_510_plan_step_ids_timeline_for_sqlexecid_33554532_of_phv_1259275079_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:01 col:2of5 "Execution Plans"
17:18:01 Top Step/Event/Obj for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:01 col:2of5.

17:18:01 col:2of5 "00996_sqld360_323688_0sjx29v99zfqc_2d_511_top_stepeventobj_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:01 col:2of5 "00997_sqld360_323688_0sjx29v99zfqc_2d_511_top_stepeventobj_for_sqlexecid_33554532_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 Top 15 Wait events timeline SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:18:02 col:2of5.

17:18:02 col:2of5 "00998_sqld360_323688_0sjx29v99zfqc_2d_512_top_15_wait_events_timeline_sqlexecid_33554532_of_phv_1259275079.html"
17:18:02 col:2of5 "00999_sqld360_323688_0sjx29v99zfqc_2d_512_top_15_wait_events_timeline_sqlexecid_33554532_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 DB Time by PX process for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:18:02 col:2of5.

17:18:02 col:2of5 "01000_sqld360_323688_0sjx29v99zfqc_2d_513_db_time_by_px_process_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:02 col:2of5 "01001_sqld360_323688_0sjx29v99zfqc_2d_513_db_time_by_px_process_for_sqlexecid_33554532_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 PGA and TEMP usage for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:02 col:2of5.

17:18:02 col:2of5 "01002_sqld360_323688_0sjx29v99zfqc_2d_514_pga_and_temp_usage_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:02 col:2of5 "01003_sqld360_323688_0sjx29v99zfqc_2d_514_pga_and_temp_usage_for_sqlexecid_33554532_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 Read and Write I/O requests for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:02 col:2of5.

17:18:02 col:2of5 "01004_sqld360_323688_0sjx29v99zfqc_2d_515_read_and_write_io_requests_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:02 col:2of5 "01005_sqld360_323688_0sjx29v99zfqc_2d_515_read_and_write_io_requests_for_sqlexecid_33554532_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:02 col:2of5.

17:18:02 col:2of5 "01006_sqld360_323688_0sjx29v99zfqc_2d_516_read_write_and_interconnect_io_bytes_for_sqlexecid_33554532_of_phv_1259275079.html"
17:18:02 col:2of5 "01007_sqld360_323688_0sjx29v99zfqc_2d_516_read_write_and_interconnect_io_bytes_for_sqlexecid_33554532_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:02 col:2of5 "Execution Plans"
17:18:02 Raw Data for SQL_EXEC_ID 33554532 of PHV 1259275079

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5808
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 49157
AND timestamp BETWEEN TO_DATE('20201020080939', 'YYYYMMDDHH24MISS') AND TO_DATE('20201020080949', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554532) = 33554532
AND NVL(distribution, TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201020080939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:02 col:2of5.

17:18:02 col:2of5 "01008_sqld360_323688_0sjx29v99zfqc_2d_517_raw_data_for_sqlexecid_33554532_of_phv_1259275079.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:03 col:2of5 "Execution Plans"
17:18:03 Plan Tree with subtree for SQL_EXEC_ID 33556365 of PHV 1259275079

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1259275079
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1259275079
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:03 col:2of5.

17:18:03 col:2of5 "01009_sqld360_323688_0sjx29v99zfqc_2d_518_plan_tree_with_subtree_for_sqlexecid_33556365_of_phv_1259275079_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:04 col:2of5 "Execution Plans"
17:18:04 Plan Step IDs timeline for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:18:04 col:2of5.

17:18:04 col:2of5 "01010_sqld360_323688_0sjx29v99zfqc_2d_519_plan_step_ids_timeline_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:04 col:2of5 "01011_sqld360_323688_0sjx29v99zfqc_2d_519_plan_step_ids_timeline_for_sqlexecid_33556365_of_phv_1259275079_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:04 col:2of5 "Execution Plans"
17:18:04 Top Step/Event/Obj for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:04 col:2of5.

17:18:04 col:2of5 "01012_sqld360_323688_0sjx29v99zfqc_2d_520_top_stepeventobj_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:04 col:2of5 "01013_sqld360_323688_0sjx29v99zfqc_2d_520_top_stepeventobj_for_sqlexecid_33556365_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:04 col:2of5 "Execution Plans"
17:18:04 Top 15 Wait events timeline SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:18:04 col:2of5.

17:18:04 col:2of5 "01014_sqld360_323688_0sjx29v99zfqc_2d_521_top_15_wait_events_timeline_sqlexecid_33556365_of_phv_1259275079.html"
17:18:04 col:2of5 "01015_sqld360_323688_0sjx29v99zfqc_2d_521_top_15_wait_events_timeline_sqlexecid_33556365_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:04 col:2of5 "Execution Plans"
17:18:04 DB Time by PX process for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:18:04 col:2of5.

17:18:04 col:2of5 "01016_sqld360_323688_0sjx29v99zfqc_2d_522_db_time_by_px_process_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:04 col:2of5 "01017_sqld360_323688_0sjx29v99zfqc_2d_522_db_time_by_px_process_for_sqlexecid_33556365_of_phv_1259275079_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:04 col:2of5 "Execution Plans"
17:18:04 PGA and TEMP usage for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:04 col:2of5.

17:18:05 col:2of5 "01018_sqld360_323688_0sjx29v99zfqc_2d_523_pga_and_temp_usage_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:05 col:2of5 "01019_sqld360_323688_0sjx29v99zfqc_2d_523_pga_and_temp_usage_for_sqlexecid_33556365_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:05 col:2of5 "Execution Plans"
17:18:05 Read and Write I/O requests for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:05 col:2of5.

17:18:05 col:2of5 "01020_sqld360_323688_0sjx29v99zfqc_2d_524_read_and_write_io_requests_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:05 col:2of5 "01021_sqld360_323688_0sjx29v99zfqc_2d_524_read_and_write_io_requests_for_sqlexecid_33556365_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:05 col:2of5 "Execution Plans"
17:18:05 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:05 col:2of5.

17:18:05 col:2of5 "01022_sqld360_323688_0sjx29v99zfqc_2d_525_read_write_and_interconnect_io_bytes_for_sqlexecid_33556365_of_phv_1259275079.html"
17:18:05 col:2of5 "01023_sqld360_323688_0sjx29v99zfqc_2d_525_read_write_and_interconnect_io_bytes_for_sqlexecid_33556365_of_phv_1259275079_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:05 col:2of5 "Execution Plans"
17:18:05 Raw Data for SQL_EXEC_ID 33556365 of PHV 1259275079

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1259275079
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3506
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 50301
AND timestamp BETWEEN TO_DATE('20201105165611', 'YYYYMMDDHH24MISS') AND TO_DATE('20201105165621', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33556365) = 33556365
AND NVL(distribution, TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201105165611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:05 col:2of5.

17:18:05 col:2of5 "01024_sqld360_323688_0sjx29v99zfqc_2d_526_raw_data_for_sqlexecid_33556365_of_phv_1259275079.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:06 col:2of5 "Execution Plans"
17:18:06 Plan Tree for PHV 2320460704 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2320460704
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2320460704)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2320460704
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2320460704
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:06 col:2of5.

17:18:06 col:2of5 "01025_sqld360_323688_0sjx29v99zfqc_2d_527_plan_tree_for_phv_2320460704_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:06 col:2of5 "Execution Plans"
17:18:06 Plan from Memory for PHV 2320460704
Completed: 17:18:06


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:07 col:2of5 "Execution Plans"
17:18:07 Plan from History for PHV 2320460704
Completed: 17:18:07


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:07 col:2of5 "Execution Plans"
17:18:07 Avg et/exec for recent execs for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:07 col:2of5.

17:18:07 col:2of5 "01028_sqld360_323688_0sjx29v99zfqc_2d_528_avg_etexec_for_recent_execs_for_phv_2320460704.html"
17:18:07 col:2of5 "01029_sqld360_323688_0sjx29v99zfqc_2d_528_avg_etexec_for_recent_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:07 col:2of5 "Execution Plans"
17:18:07 Avg et/exec for historical execs for PHV 2320460704

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:07 col:2of5.

17:18:07 col:2of5 "01030_sqld360_323688_0sjx29v99zfqc_2d_529_avg_etexec_for_historical_execs_for_phv_2320460704.html"
17:18:07 col:2of5 "01031_sqld360_323688_0sjx29v99zfqc_2d_529_avg_etexec_for_historical_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:07 col:2of5 "Execution Plans"
17:18:07 Peak PGA and TEMP usage for recent execs for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:07 col:2of5.

17:18:07 col:2of5 "01032_sqld360_323688_0sjx29v99zfqc_2d_530_peak_pga_and_temp_usage_for_recent_execs_for_phv_2320460704.html"
17:18:07 col:2of5 "01033_sqld360_323688_0sjx29v99zfqc_2d_530_peak_pga_and_temp_usage_for_recent_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:07 col:2of5 "Execution Plans"
17:18:07 Peak PGA and TEMP usage for historical execs for PHV 2320460704

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:07 col:2of5.

17:18:07 col:2of5 "01034_sqld360_323688_0sjx29v99zfqc_2d_531_peak_pga_and_temp_usage_for_historical_execs_for_phv_2320460704.html"
17:18:08 col:2of5 "01035_sqld360_323688_0sjx29v99zfqc_2d_531_peak_pga_and_temp_usage_for_historical_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:08 col:2of5 "Execution Plans"
17:18:08 Peak Read and Write I/O requests for recent execs for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:08 col:2of5.

17:18:08 col:2of5 "01036_sqld360_323688_0sjx29v99zfqc_2d_532_peak_read_and_write_io_requests_for_recent_execs_for_phv_2320460704.html"
17:18:08 col:2of5 "01037_sqld360_323688_0sjx29v99zfqc_2d_532_peak_read_and_write_io_requests_for_recent_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:08 col:2of5 "Execution Plans"
17:18:08 Peak Read and Write I/O requests for historical execs for PHV 2320460704

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:08 col:2of5.

17:18:08 col:2of5 "01038_sqld360_323688_0sjx29v99zfqc_2d_533_peak_read_and_write_io_requests_for_historical_execs_for_phv_2320460704.html"
17:18:08 col:2of5 "01039_sqld360_323688_0sjx29v99zfqc_2d_533_peak_read_and_write_io_requests_for_historical_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:08 col:2of5 "Execution Plans"
17:18:08 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:08 col:2of5.

17:18:08 col:2of5 "01040_sqld360_323688_0sjx29v99zfqc_2d_534_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2320460704.html"
17:18:08 col:2of5 "01041_sqld360_323688_0sjx29v99zfqc_2d_534_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:08 col:2of5 "Execution Plans"
17:18:08 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2320460704

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:08 col:2of5.

17:18:09 col:2of5 "01042_sqld360_323688_0sjx29v99zfqc_2d_535_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2320460704.html"
17:18:09 col:2of5 "01043_sqld360_323688_0sjx29v99zfqc_2d_535_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:09 col:2of5 "Execution Plans"
17:18:09 Top Wait events for PHV 2320460704

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:09 col:2of5.

17:18:09 col:2of5 "01044_sqld360_323688_0sjx29v99zfqc_2d_536_top_wait_events_for_phv_2320460704.html"
17:18:09 col:2of5 "01045_sqld360_323688_0sjx29v99zfqc_2d_536_top_wait_events_for_phv_2320460704_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:09 col:2of5 "Execution Plans"
17:18:09 Top Objects accessed by PHV 2320460704

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2320460704
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:09 col:2of5.

17:18:09 col:2of5 "01046_sqld360_323688_0sjx29v99zfqc_2d_537_top_objects_accessed_by_phv_2320460704.html"
17:18:09 col:2of5 "01047_sqld360_323688_0sjx29v99zfqc_2d_537_top_objects_accessed_by_phv_2320460704_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:09 col:2of5 "Execution Plans"
17:18:09 Top Plan Steps for PHV 2320460704

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:09 col:2of5.

17:18:09 col:2of5 "01048_sqld360_323688_0sjx29v99zfqc_2d_538_top_plan_steps_for_phv_2320460704.html"
17:18:09 col:2of5 "01049_sqld360_323688_0sjx29v99zfqc_2d_538_top_plan_steps_for_phv_2320460704_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:09 col:2of5 "Execution Plans"
17:18:09 Top Step/Event/Obj for PHV 2320460704

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2320460704
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:09 col:2of5.

17:18:09 col:2of5 "01050_sqld360_323688_0sjx29v99zfqc_2d_539_top_stepeventobj_for_phv_2320460704.html"
17:18:09 col:2of5 "01051_sqld360_323688_0sjx29v99zfqc_2d_539_top_stepeventobj_for_phv_2320460704_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:10 col:2of5 "Execution Plans"
17:18:10 Top 15 Wait events over recent time for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2320460704
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:10 col:2of5.

17:18:10 col:2of5 "01052_sqld360_323688_0sjx29v99zfqc_2d_540_top_15_wait_events_over_recent_time_for_phv_2320460704.html"
17:18:10 col:2of5 "01053_sqld360_323688_0sjx29v99zfqc_2d_540_top_15_wait_events_over_recent_time_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:10 col:2of5 "Execution Plans"
17:18:10 Top 15 Wait events over historical time for PHV 2320460704

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2320460704
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:10 col:2of5.

17:18:10 col:2of5 "01054_sqld360_323688_0sjx29v99zfqc_2d_541_top_15_wait_events_over_historical_time_for_phv_2320460704.html"
17:18:10 col:2of5 "01055_sqld360_323688_0sjx29v99zfqc_2d_541_top_15_wait_events_over_historical_time_for_phv_2320460704_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:10 col:2of5 "Execution Plans"
17:18:10 Plan Tree for PHV 2541602941 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2541602941
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2541602941)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2541602941
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2541602941
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:10 col:2of5.

17:18:11 col:2of5 "01056_sqld360_323688_0sjx29v99zfqc_2d_542_plan_tree_for_phv_2541602941_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:11 col:2of5 "Execution Plans"
17:18:11 Plan from Memory for PHV 2541602941
Completed: 17:18:11


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:11 col:2of5 "Execution Plans"
17:18:11 Plan from History for PHV 2541602941
Completed: 17:18:11


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:12 col:2of5 "Execution Plans"
17:18:12 Avg et/exec for recent execs for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:12 col:2of5.

17:18:12 col:2of5 "01059_sqld360_323688_0sjx29v99zfqc_2d_543_avg_etexec_for_recent_execs_for_phv_2541602941.html"
17:18:12 col:2of5 "01060_sqld360_323688_0sjx29v99zfqc_2d_543_avg_etexec_for_recent_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:12 col:2of5 "Execution Plans"
17:18:12 Avg et/exec for historical execs for PHV 2541602941

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:12 col:2of5.

17:18:12 col:2of5 "01061_sqld360_323688_0sjx29v99zfqc_2d_544_avg_etexec_for_historical_execs_for_phv_2541602941.html"
17:18:12 col:2of5 "01062_sqld360_323688_0sjx29v99zfqc_2d_544_avg_etexec_for_historical_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:12 col:2of5 "Execution Plans"
17:18:12 Peak PGA and TEMP usage for recent execs for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:12 col:2of5.

17:18:12 col:2of5 "01063_sqld360_323688_0sjx29v99zfqc_2d_545_peak_pga_and_temp_usage_for_recent_execs_for_phv_2541602941.html"
17:18:12 col:2of5 "01064_sqld360_323688_0sjx29v99zfqc_2d_545_peak_pga_and_temp_usage_for_recent_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:12 col:2of5 "Execution Plans"
17:18:12 Peak PGA and TEMP usage for historical execs for PHV 2541602941

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:12 col:2of5.

17:18:12 col:2of5 "01065_sqld360_323688_0sjx29v99zfqc_2d_546_peak_pga_and_temp_usage_for_historical_execs_for_phv_2541602941.html"
17:18:12 col:2of5 "01066_sqld360_323688_0sjx29v99zfqc_2d_546_peak_pga_and_temp_usage_for_historical_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:13 col:2of5 "Execution Plans"
17:18:13 Peak Read and Write I/O requests for recent execs for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:13 col:2of5.

17:18:13 col:2of5 "01067_sqld360_323688_0sjx29v99zfqc_2d_547_peak_read_and_write_io_requests_for_recent_execs_for_phv_2541602941.html"
17:18:13 col:2of5 "01068_sqld360_323688_0sjx29v99zfqc_2d_547_peak_read_and_write_io_requests_for_recent_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:13 col:2of5 "Execution Plans"
17:18:13 Peak Read and Write I/O requests for historical execs for PHV 2541602941

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:13 col:2of5.

17:18:13 col:2of5 "01069_sqld360_323688_0sjx29v99zfqc_2d_548_peak_read_and_write_io_requests_for_historical_execs_for_phv_2541602941.html"
17:18:13 col:2of5 "01070_sqld360_323688_0sjx29v99zfqc_2d_548_peak_read_and_write_io_requests_for_historical_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:13 col:2of5 "Execution Plans"
17:18:13 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:13 col:2of5.

17:18:13 col:2of5 "01071_sqld360_323688_0sjx29v99zfqc_2d_549_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2541602941.html"
17:18:13 col:2of5 "01072_sqld360_323688_0sjx29v99zfqc_2d_549_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:13 col:2of5 "Execution Plans"
17:18:13 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2541602941

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:13 col:2of5.

17:18:13 col:2of5 "01073_sqld360_323688_0sjx29v99zfqc_2d_550_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2541602941.html"
17:18:13 col:2of5 "01074_sqld360_323688_0sjx29v99zfqc_2d_550_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top Wait events for PHV 2541602941

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:14 col:2of5.

17:18:14 col:2of5 "01075_sqld360_323688_0sjx29v99zfqc_2d_551_top_wait_events_for_phv_2541602941.html"
17:18:14 col:2of5 "01076_sqld360_323688_0sjx29v99zfqc_2d_551_top_wait_events_for_phv_2541602941_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top Objects accessed by PHV 2541602941

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2541602941
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:14 col:2of5.

17:18:14 col:2of5 "01077_sqld360_323688_0sjx29v99zfqc_2d_552_top_objects_accessed_by_phv_2541602941.html"
17:18:14 col:2of5 "01078_sqld360_323688_0sjx29v99zfqc_2d_552_top_objects_accessed_by_phv_2541602941_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top Plan Steps for PHV 2541602941

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:14 col:2of5.

17:18:14 col:2of5 "01079_sqld360_323688_0sjx29v99zfqc_2d_553_top_plan_steps_for_phv_2541602941.html"
17:18:14 col:2of5 "01080_sqld360_323688_0sjx29v99zfqc_2d_553_top_plan_steps_for_phv_2541602941_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top Step/Event/Obj for PHV 2541602941

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2541602941
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:14 col:2of5.

17:18:14 col:2of5 "01081_sqld360_323688_0sjx29v99zfqc_2d_554_top_stepeventobj_for_phv_2541602941.html"
17:18:14 col:2of5 "01082_sqld360_323688_0sjx29v99zfqc_2d_554_top_stepeventobj_for_phv_2541602941_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top 15 Wait events over recent time for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2541602941
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:14 col:2of5.

17:18:14 col:2of5 "01083_sqld360_323688_0sjx29v99zfqc_2d_555_top_15_wait_events_over_recent_time_for_phv_2541602941.html"
17:18:14 col:2of5 "01084_sqld360_323688_0sjx29v99zfqc_2d_555_top_15_wait_events_over_recent_time_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:14 col:2of5 "Execution Plans"
17:18:14 Top 15 Wait events over historical time for PHV 2541602941

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2541602941
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:14 col:2of5.

17:18:15 col:2of5 "01085_sqld360_323688_0sjx29v99zfqc_2d_556_top_15_wait_events_over_historical_time_for_phv_2541602941.html"
17:18:15 col:2of5 "01086_sqld360_323688_0sjx29v99zfqc_2d_556_top_15_wait_events_over_historical_time_for_phv_2541602941_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:15 col:2of5 "Execution Plans"
17:18:15 Plan Tree for PHV 2380592788 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2380592788
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2380592788)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2380592788
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2380592788
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:15 col:2of5.

17:18:15 col:2of5 "01087_sqld360_323688_0sjx29v99zfqc_2d_557_plan_tree_for_phv_2380592788_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:16 col:2of5 "Execution Plans"
17:18:16 Plan from Memory for PHV 2380592788
Completed: 17:18:16


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:16 col:2of5 "Execution Plans"
17:18:16 Plan from History for PHV 2380592788
Completed: 17:18:16


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:16 col:2of5 "Execution Plans"
17:18:16 Avg et/exec for recent execs for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:16 col:2of5.

17:18:16 col:2of5 "01090_sqld360_323688_0sjx29v99zfqc_2d_558_avg_etexec_for_recent_execs_for_phv_2380592788.html"
17:18:16 col:2of5 "01091_sqld360_323688_0sjx29v99zfqc_2d_558_avg_etexec_for_recent_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:16 col:2of5 "Execution Plans"
17:18:16 Avg et/exec for historical execs for PHV 2380592788

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:16 col:2of5.

17:18:16 col:2of5 "01092_sqld360_323688_0sjx29v99zfqc_2d_559_avg_etexec_for_historical_execs_for_phv_2380592788.html"
17:18:17 col:2of5 "01093_sqld360_323688_0sjx29v99zfqc_2d_559_avg_etexec_for_historical_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:17 col:2of5 "Execution Plans"
17:18:17 Peak PGA and TEMP usage for recent execs for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:17 col:2of5.

17:18:17 col:2of5 "01094_sqld360_323688_0sjx29v99zfqc_2d_560_peak_pga_and_temp_usage_for_recent_execs_for_phv_2380592788.html"
17:18:17 col:2of5 "01095_sqld360_323688_0sjx29v99zfqc_2d_560_peak_pga_and_temp_usage_for_recent_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:17 col:2of5 "Execution Plans"
17:18:17 Peak PGA and TEMP usage for historical execs for PHV 2380592788

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:17 col:2of5.

17:18:17 col:2of5 "01096_sqld360_323688_0sjx29v99zfqc_2d_561_peak_pga_and_temp_usage_for_historical_execs_for_phv_2380592788.html"
17:18:17 col:2of5 "01097_sqld360_323688_0sjx29v99zfqc_2d_561_peak_pga_and_temp_usage_for_historical_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:17 col:2of5 "Execution Plans"
17:18:17 Peak Read and Write I/O requests for recent execs for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:17 col:2of5.

17:18:17 col:2of5 "01098_sqld360_323688_0sjx29v99zfqc_2d_562_peak_read_and_write_io_requests_for_recent_execs_for_phv_2380592788.html"
17:18:17 col:2of5 "01099_sqld360_323688_0sjx29v99zfqc_2d_562_peak_read_and_write_io_requests_for_recent_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:17 col:2of5 "Execution Plans"
17:18:17 Peak Read and Write I/O requests for historical execs for PHV 2380592788

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:17 col:2of5.

17:18:17 col:2of5 "01100_sqld360_323688_0sjx29v99zfqc_2d_563_peak_read_and_write_io_requests_for_historical_execs_for_phv_2380592788.html"
17:18:18 col:2of5 "01101_sqld360_323688_0sjx29v99zfqc_2d_563_peak_read_and_write_io_requests_for_historical_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:18 col:2of5 "Execution Plans"
17:18:18 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:18 col:2of5.

17:18:18 col:2of5 "01102_sqld360_323688_0sjx29v99zfqc_2d_564_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2380592788.html"
17:18:18 col:2of5 "01103_sqld360_323688_0sjx29v99zfqc_2d_564_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:18 col:2of5 "Execution Plans"
17:18:18 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2380592788

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:18 col:2of5.

17:18:18 col:2of5 "01104_sqld360_323688_0sjx29v99zfqc_2d_565_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2380592788.html"
17:18:18 col:2of5 "01105_sqld360_323688_0sjx29v99zfqc_2d_565_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:18 col:2of5 "Execution Plans"
17:18:18 Top Wait events for PHV 2380592788

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:18 col:2of5.

17:18:18 col:2of5 "01106_sqld360_323688_0sjx29v99zfqc_2d_566_top_wait_events_for_phv_2380592788.html"
17:18:18 col:2of5 "01107_sqld360_323688_0sjx29v99zfqc_2d_566_top_wait_events_for_phv_2380592788_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:18 col:2of5 "Execution Plans"
17:18:18 Top Objects accessed by PHV 2380592788

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2380592788
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:18 col:2of5.

17:18:19 col:2of5 "01108_sqld360_323688_0sjx29v99zfqc_2d_567_top_objects_accessed_by_phv_2380592788.html"
17:18:19 col:2of5 "01109_sqld360_323688_0sjx29v99zfqc_2d_567_top_objects_accessed_by_phv_2380592788_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:19 col:2of5 "Execution Plans"
17:18:19 Top Plan Steps for PHV 2380592788

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:19 col:2of5.

17:18:19 col:2of5 "01110_sqld360_323688_0sjx29v99zfqc_2d_568_top_plan_steps_for_phv_2380592788.html"
17:18:19 col:2of5 "01111_sqld360_323688_0sjx29v99zfqc_2d_568_top_plan_steps_for_phv_2380592788_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:19 col:2of5 "Execution Plans"
17:18:19 Top Step/Event/Obj for PHV 2380592788

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2380592788
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:19 col:2of5.

17:18:19 col:2of5 "01112_sqld360_323688_0sjx29v99zfqc_2d_569_top_stepeventobj_for_phv_2380592788.html"
17:18:19 col:2of5 "01113_sqld360_323688_0sjx29v99zfqc_2d_569_top_stepeventobj_for_phv_2380592788_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:19 col:2of5 "Execution Plans"
17:18:19 Top 15 Wait events over recent time for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2380592788
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:19 col:2of5.

17:18:19 col:2of5 "01114_sqld360_323688_0sjx29v99zfqc_2d_570_top_15_wait_events_over_recent_time_for_phv_2380592788.html"
17:18:19 col:2of5 "01115_sqld360_323688_0sjx29v99zfqc_2d_570_top_15_wait_events_over_recent_time_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:19 col:2of5 "Execution Plans"
17:18:19 Top 15 Wait events over historical time for PHV 2380592788

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2380592788
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:19 col:2of5.

17:18:19 col:2of5 "01116_sqld360_323688_0sjx29v99zfqc_2d_571_top_15_wait_events_over_historical_time_for_phv_2380592788.html"
17:18:19 col:2of5 "01117_sqld360_323688_0sjx29v99zfqc_2d_571_top_15_wait_events_over_historical_time_for_phv_2380592788_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:20 col:2of5 "Execution Plans"
17:18:20 Plan Tree for PHV 1552707893 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1552707893
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1552707893)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =1552707893
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1552707893
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:20 col:2of5.

17:18:20 col:2of5 "01118_sqld360_323688_0sjx29v99zfqc_2d_572_plan_tree_for_phv_1552707893_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:21 col:2of5 "Execution Plans"
17:18:21 Plan from Memory for PHV 1552707893
Completed: 17:18:21


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:21 col:2of5 "Execution Plans"
17:18:21 Plan from History for PHV 1552707893
Completed: 17:18:21


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:21 col:2of5 "Execution Plans"
17:18:21 Avg et/exec for recent execs for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:21 col:2of5.

17:18:21 col:2of5 "01121_sqld360_323688_0sjx29v99zfqc_2d_573_avg_etexec_for_recent_execs_for_phv_1552707893.html"
17:18:21 col:2of5 "01122_sqld360_323688_0sjx29v99zfqc_2d_573_avg_etexec_for_recent_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:21 col:2of5 "Execution Plans"
17:18:21 Avg et/exec for historical execs for PHV 1552707893

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:21 col:2of5.

17:18:21 col:2of5 "01123_sqld360_323688_0sjx29v99zfqc_2d_574_avg_etexec_for_historical_execs_for_phv_1552707893.html"
17:18:21 col:2of5 "01124_sqld360_323688_0sjx29v99zfqc_2d_574_avg_etexec_for_historical_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:22 col:2of5 "Execution Plans"
17:18:22 Peak PGA and TEMP usage for recent execs for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:22 col:2of5.

17:18:22 col:2of5 "01125_sqld360_323688_0sjx29v99zfqc_2d_575_peak_pga_and_temp_usage_for_recent_execs_for_phv_1552707893.html"
17:18:22 col:2of5 "01126_sqld360_323688_0sjx29v99zfqc_2d_575_peak_pga_and_temp_usage_for_recent_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:22 col:2of5 "Execution Plans"
17:18:22 Peak PGA and TEMP usage for historical execs for PHV 1552707893

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:22 col:2of5.

17:18:22 col:2of5 "01127_sqld360_323688_0sjx29v99zfqc_2d_576_peak_pga_and_temp_usage_for_historical_execs_for_phv_1552707893.html"
17:18:22 col:2of5 "01128_sqld360_323688_0sjx29v99zfqc_2d_576_peak_pga_and_temp_usage_for_historical_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:22 col:2of5 "Execution Plans"
17:18:22 Peak Read and Write I/O requests for recent execs for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:22 col:2of5.

17:18:22 col:2of5 "01129_sqld360_323688_0sjx29v99zfqc_2d_577_peak_read_and_write_io_requests_for_recent_execs_for_phv_1552707893.html"
17:18:22 col:2of5 "01130_sqld360_323688_0sjx29v99zfqc_2d_577_peak_read_and_write_io_requests_for_recent_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:22 col:2of5 "Execution Plans"
17:18:22 Peak Read and Write I/O requests for historical execs for PHV 1552707893

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:22 col:2of5.

17:18:22 col:2of5 "01131_sqld360_323688_0sjx29v99zfqc_2d_578_peak_read_and_write_io_requests_for_historical_execs_for_phv_1552707893.html"
17:18:22 col:2of5 "01132_sqld360_323688_0sjx29v99zfqc_2d_578_peak_read_and_write_io_requests_for_historical_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:23 col:2of5 "Execution Plans"
17:18:23 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:23 col:2of5.

17:18:23 col:2of5 "01133_sqld360_323688_0sjx29v99zfqc_2d_579_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1552707893.html"
17:18:23 col:2of5 "01134_sqld360_323688_0sjx29v99zfqc_2d_579_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:23 col:2of5 "Execution Plans"
17:18:23 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1552707893

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:23 col:2of5.

17:18:23 col:2of5 "01135_sqld360_323688_0sjx29v99zfqc_2d_580_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1552707893.html"
17:18:23 col:2of5 "01136_sqld360_323688_0sjx29v99zfqc_2d_580_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:23 col:2of5 "Execution Plans"
17:18:23 Top Wait events for PHV 1552707893

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:23 col:2of5.

17:18:23 col:2of5 "01137_sqld360_323688_0sjx29v99zfqc_2d_581_top_wait_events_for_phv_1552707893.html"
17:18:23 col:2of5 "01138_sqld360_323688_0sjx29v99zfqc_2d_581_top_wait_events_for_phv_1552707893_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:23 col:2of5 "Execution Plans"
17:18:23 Top Objects accessed by PHV 1552707893

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1552707893
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:23 col:2of5.

17:18:23 col:2of5 "01139_sqld360_323688_0sjx29v99zfqc_2d_582_top_objects_accessed_by_phv_1552707893.html"
17:18:23 col:2of5 "01140_sqld360_323688_0sjx29v99zfqc_2d_582_top_objects_accessed_by_phv_1552707893_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:24 col:2of5 "Execution Plans"
17:18:24 Top Plan Steps for PHV 1552707893

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:24 col:2of5.

17:18:24 col:2of5 "01141_sqld360_323688_0sjx29v99zfqc_2d_583_top_plan_steps_for_phv_1552707893.html"
17:18:24 col:2of5 "01142_sqld360_323688_0sjx29v99zfqc_2d_583_top_plan_steps_for_phv_1552707893_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:24 col:2of5 "Execution Plans"
17:18:24 Top Step/Event/Obj for PHV 1552707893

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1552707893
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:24 col:2of5.

17:18:24 col:2of5 "01143_sqld360_323688_0sjx29v99zfqc_2d_584_top_stepeventobj_for_phv_1552707893.html"
17:18:24 col:2of5 "01144_sqld360_323688_0sjx29v99zfqc_2d_584_top_stepeventobj_for_phv_1552707893_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:24 col:2of5 "Execution Plans"
17:18:24 Top 15 Wait events over recent time for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1552707893
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:24 col:2of5.

17:18:24 col:2of5 "01145_sqld360_323688_0sjx29v99zfqc_2d_585_top_15_wait_events_over_recent_time_for_phv_1552707893.html"
17:18:24 col:2of5 "01146_sqld360_323688_0sjx29v99zfqc_2d_585_top_15_wait_events_over_recent_time_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:24 col:2of5 "Execution Plans"
17:18:24 Top 15 Wait events over historical time for PHV 1552707893

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1552707893
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:24 col:2of5.

17:18:24 col:2of5 "01147_sqld360_323688_0sjx29v99zfqc_2d_586_top_15_wait_events_over_historical_time_for_phv_1552707893.html"
17:18:24 col:2of5 "01148_sqld360_323688_0sjx29v99zfqc_2d_586_top_15_wait_events_over_historical_time_for_phv_1552707893_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:25 col:2of5 "Execution Plans"
17:18:25 Plan Tree for PHV 2031822258 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2031822258
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2031822258
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:25 col:2of5.

17:18:25 col:2of5 "01149_sqld360_323688_0sjx29v99zfqc_2d_587_plan_tree_for_phv_2031822258_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:26 col:2of5 "Execution Plans"
17:18:26 Plan from Memory for PHV 2031822258
Completed: 17:18:26


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:26 col:2of5 "Execution Plans"
17:18:26 Plan from History for PHV 2031822258
Completed: 17:18:26


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:26 col:2of5 "Execution Plans"
17:18:26 Avg et/exec for recent execs for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:26 col:2of5.

17:18:26 col:2of5 "01152_sqld360_323688_0sjx29v99zfqc_2d_588_avg_etexec_for_recent_execs_for_phv_2031822258.html"
17:18:26 col:2of5 "01153_sqld360_323688_0sjx29v99zfqc_2d_588_avg_etexec_for_recent_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:26 col:2of5 "Execution Plans"
17:18:26 Avg et/exec for historical execs for PHV 2031822258

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:26 col:2of5.

17:18:26 col:2of5 "01154_sqld360_323688_0sjx29v99zfqc_2d_589_avg_etexec_for_historical_execs_for_phv_2031822258.html"
17:18:26 col:2of5 "01155_sqld360_323688_0sjx29v99zfqc_2d_589_avg_etexec_for_historical_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:26 col:2of5 "Execution Plans"
17:18:26 Peak PGA and TEMP usage for recent execs for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:26 col:2of5.

17:18:27 col:2of5 "01156_sqld360_323688_0sjx29v99zfqc_2d_590_peak_pga_and_temp_usage_for_recent_execs_for_phv_2031822258.html"
17:18:27 col:2of5 "01157_sqld360_323688_0sjx29v99zfqc_2d_590_peak_pga_and_temp_usage_for_recent_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:27 col:2of5 "Execution Plans"
17:18:27 Peak PGA and TEMP usage for historical execs for PHV 2031822258

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:27 col:2of5.

17:18:27 col:2of5 "01158_sqld360_323688_0sjx29v99zfqc_2d_591_peak_pga_and_temp_usage_for_historical_execs_for_phv_2031822258.html"
17:18:27 col:2of5 "01159_sqld360_323688_0sjx29v99zfqc_2d_591_peak_pga_and_temp_usage_for_historical_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:27 col:2of5 "Execution Plans"
17:18:27 Peak Read and Write I/O requests for recent execs for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:27 col:2of5.

17:18:27 col:2of5 "01160_sqld360_323688_0sjx29v99zfqc_2d_592_peak_read_and_write_io_requests_for_recent_execs_for_phv_2031822258.html"
17:18:27 col:2of5 "01161_sqld360_323688_0sjx29v99zfqc_2d_592_peak_read_and_write_io_requests_for_recent_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:27 col:2of5 "Execution Plans"
17:18:27 Peak Read and Write I/O requests for historical execs for PHV 2031822258

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:27 col:2of5.

17:18:27 col:2of5 "01162_sqld360_323688_0sjx29v99zfqc_2d_593_peak_read_and_write_io_requests_for_historical_execs_for_phv_2031822258.html"
17:18:27 col:2of5 "01163_sqld360_323688_0sjx29v99zfqc_2d_593_peak_read_and_write_io_requests_for_historical_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:28 col:2of5 "Execution Plans"
17:18:28 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:28 col:2of5.

17:18:28 col:2of5 "01164_sqld360_323688_0sjx29v99zfqc_2d_594_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2031822258.html"
17:18:28 col:2of5 "01165_sqld360_323688_0sjx29v99zfqc_2d_594_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:28 col:2of5 "Execution Plans"
17:18:28 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2031822258

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:28 col:2of5.

17:18:28 col:2of5 "01166_sqld360_323688_0sjx29v99zfqc_2d_595_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2031822258.html"
17:18:28 col:2of5 "01167_sqld360_323688_0sjx29v99zfqc_2d_595_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:28 col:2of5 "Execution Plans"
17:18:28 Top Wait events for PHV 2031822258

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:28 col:2of5.

17:18:28 col:2of5 "01168_sqld360_323688_0sjx29v99zfqc_2d_596_top_wait_events_for_phv_2031822258.html"
17:18:28 col:2of5 "01169_sqld360_323688_0sjx29v99zfqc_2d_596_top_wait_events_for_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:28 col:2of5 "Execution Plans"
17:18:28 Top Objects accessed by PHV 2031822258

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2031822258
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:28 col:2of5.

17:18:28 col:2of5 "01170_sqld360_323688_0sjx29v99zfqc_2d_597_top_objects_accessed_by_phv_2031822258.html"
17:18:28 col:2of5 "01171_sqld360_323688_0sjx29v99zfqc_2d_597_top_objects_accessed_by_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:28 col:2of5 "Execution Plans"
17:18:28 Top Plan Steps for PHV 2031822258

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:28 col:2of5.

17:18:29 col:2of5 "01172_sqld360_323688_0sjx29v99zfqc_2d_598_top_plan_steps_for_phv_2031822258.html"
17:18:29 col:2of5 "01173_sqld360_323688_0sjx29v99zfqc_2d_598_top_plan_steps_for_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:29 col:2of5 "Execution Plans"
17:18:29 Top Step/Event/Obj for PHV 2031822258

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2031822258
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:29 col:2of5.

17:18:29 col:2of5 "01174_sqld360_323688_0sjx29v99zfqc_2d_599_top_stepeventobj_for_phv_2031822258.html"
17:18:29 col:2of5 "01175_sqld360_323688_0sjx29v99zfqc_2d_599_top_stepeventobj_for_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:29 col:2of5 "Execution Plans"
17:18:29 Top 15 Wait events over recent time for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2031822258
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:29 col:2of5.

17:18:29 col:2of5 "01176_sqld360_323688_0sjx29v99zfqc_2d_600_top_15_wait_events_over_recent_time_for_phv_2031822258.html"
17:18:29 col:2of5 "01177_sqld360_323688_0sjx29v99zfqc_2d_600_top_15_wait_events_over_recent_time_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:29 col:2of5 "Execution Plans"
17:18:29 Top 15 Wait events over historical time for PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01cell single block physical " ,
NVL(aas_02,0) "e02ON CPU" ,
NVL(aas_03,0) "e03gc cr grant 2-way" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2031822258
AND object_node IN ('cell single block physical read','ON CPU','gc cr grant 2-way','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:29 col:2of5.

17:18:29 col:2of5 "01178_sqld360_323688_0sjx29v99zfqc_2d_601_top_15_wait_events_over_historical_time_for_phv_2031822258.html"
17:18:29 col:2of5 "01179_sqld360_323688_0sjx29v99zfqc_2d_601_top_15_wait_events_over_historical_time_for_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:30 col:2of5 "Execution Plans"
17:18:30 Plan Tree with subtree for SQL_EXEC_ID 33555024 of PHV 2031822258

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2031822258
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:30 col:2of5.

17:18:30 col:2of5 "01180_sqld360_323688_0sjx29v99zfqc_2d_602_plan_tree_with_subtree_for_sqlexecid_33555024_of_phv_2031822258_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:31 col:2of5 "Execution Plans"
17:18:31 Plan Step IDs timeline for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:18:31 col:2of5.

17:18:31 col:2of5 "01181_sqld360_323688_0sjx29v99zfqc_2d_603_plan_step_ids_timeline_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:31 col:2of5 "01182_sqld360_323688_0sjx29v99zfqc_2d_603_plan_step_ids_timeline_for_sqlexecid_33555024_of_phv_2031822258_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:31 col:2of5 "Execution Plans"
17:18:31 Top Step/Event/Obj for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:31 col:2of5.

17:18:31 col:2of5 "01183_sqld360_323688_0sjx29v99zfqc_2d_604_top_stepeventobj_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:31 col:2of5 "01184_sqld360_323688_0sjx29v99zfqc_2d_604_top_stepeventobj_for_sqlexecid_33555024_of_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:31 col:2of5 "Execution Plans"
17:18:31 Top 15 Wait events timeline SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02ON CPU" ,
NVL(num_sess_03,0) "e03gc cr grant 2-way" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','ON CPU','gc cr grant 2-way','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:18:31 col:2of5.

17:18:31 col:2of5 "01185_sqld360_323688_0sjx29v99zfqc_2d_605_top_15_wait_events_timeline_sqlexecid_33555024_of_phv_2031822258.html"
17:18:31 col:2of5 "01186_sqld360_323688_0sjx29v99zfqc_2d_605_top_15_wait_events_timeline_sqlexecid_33555024_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:31 col:2of5 "Execution Plans"
17:18:31 DB Time by PX process for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:18:31 col:2of5.

17:18:31 col:2of5 "01187_sqld360_323688_0sjx29v99zfqc_2d_606_db_time_by_px_process_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:31 col:2of5 "01188_sqld360_323688_0sjx29v99zfqc_2d_606_db_time_by_px_process_for_sqlexecid_33555024_of_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:31 col:2of5 "Execution Plans"
17:18:31 PGA and TEMP usage for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:31 col:2of5.

17:18:31 col:2of5 "01189_sqld360_323688_0sjx29v99zfqc_2d_607_pga_and_temp_usage_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:32 col:2of5 "01190_sqld360_323688_0sjx29v99zfqc_2d_607_pga_and_temp_usage_for_sqlexecid_33555024_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:32 col:2of5 "Execution Plans"
17:18:32 Read and Write I/O requests for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:32 col:2of5.

17:18:32 col:2of5 "01191_sqld360_323688_0sjx29v99zfqc_2d_608_read_and_write_io_requests_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:32 col:2of5 "01192_sqld360_323688_0sjx29v99zfqc_2d_608_read_and_write_io_requests_for_sqlexecid_33555024_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:32 col:2of5 "Execution Plans"
17:18:32 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:32 col:2of5.

17:18:32 col:2of5 "01193_sqld360_323688_0sjx29v99zfqc_2d_609_read_write_and_interconnect_io_bytes_for_sqlexecid_33555024_of_phv_2031822258.html"
17:18:32 col:2of5 "01194_sqld360_323688_0sjx29v99zfqc_2d_609_read_write_and_interconnect_io_bytes_for_sqlexecid_33555024_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:32 col:2of5 "Execution Plans"
17:18:32 Raw Data for SQL_EXEC_ID 33555024 of PHV 2031822258

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1170
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 53336
AND timestamp BETWEEN TO_DATE('20201026064444', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026064725', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33555024) = 33555024
AND NVL(distribution, TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026064438', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:32 col:2of5.

17:18:32 col:2of5 "01195_sqld360_323688_0sjx29v99zfqc_2d_610_raw_data_for_sqlexecid_33555024_of_phv_2031822258.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:33 col:2of5 "Execution Plans"
17:18:33 Plan Tree with subtree for SQL_EXEC_ID 16777627 of PHV 2031822258

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2031822258
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2031822258
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:33 col:2of5.

17:18:33 col:2of5 "01196_sqld360_323688_0sjx29v99zfqc_2d_611_plan_tree_with_subtree_for_sqlexecid_16777627_of_phv_2031822258_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:34 col:2of5 "Execution Plans"
17:18:34 Plan Step IDs timeline for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:18:34 col:2of5.

17:18:34 col:2of5 "01197_sqld360_323688_0sjx29v99zfqc_2d_612_plan_step_ids_timeline_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:34 col:2of5 "01198_sqld360_323688_0sjx29v99zfqc_2d_612_plan_step_ids_timeline_for_sqlexecid_16777627_of_phv_2031822258_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:34 col:2of5 "Execution Plans"
17:18:34 Top Step/Event/Obj for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:34 col:2of5.

17:18:34 col:2of5 "01199_sqld360_323688_0sjx29v99zfqc_2d_613_top_stepeventobj_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:34 col:2of5 "01200_sqld360_323688_0sjx29v99zfqc_2d_613_top_stepeventobj_for_sqlexecid_16777627_of_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:34 col:2of5 "Execution Plans"
17:18:34 Top 15 Wait events timeline SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:18:34 col:2of5.

17:18:34 col:2of5 "01201_sqld360_323688_0sjx29v99zfqc_2d_614_top_15_wait_events_timeline_sqlexecid_16777627_of_phv_2031822258.html"
17:18:34 col:2of5 "01202_sqld360_323688_0sjx29v99zfqc_2d_614_top_15_wait_events_timeline_sqlexecid_16777627_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:34 col:2of5 "Execution Plans"
17:18:34 DB Time by PX process for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:18:34 col:2of5.

17:18:34 col:2of5 "01203_sqld360_323688_0sjx29v99zfqc_2d_615_db_time_by_px_process_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:34 col:2of5 "01204_sqld360_323688_0sjx29v99zfqc_2d_615_db_time_by_px_process_for_sqlexecid_16777627_of_phv_2031822258_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:34 col:2of5 "Execution Plans"
17:18:34 PGA and TEMP usage for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:34 col:2of5.

17:18:35 col:2of5 "01205_sqld360_323688_0sjx29v99zfqc_2d_616_pga_and_temp_usage_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:35 col:2of5 "01206_sqld360_323688_0sjx29v99zfqc_2d_616_pga_and_temp_usage_for_sqlexecid_16777627_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:35 col:2of5 "Execution Plans"
17:18:35 Read and Write I/O requests for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:35 col:2of5.

17:18:35 col:2of5 "01207_sqld360_323688_0sjx29v99zfqc_2d_617_read_and_write_io_requests_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:35 col:2of5 "01208_sqld360_323688_0sjx29v99zfqc_2d_617_read_and_write_io_requests_for_sqlexecid_16777627_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:35 col:2of5 "Execution Plans"
17:18:35 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:35 col:2of5.

17:18:35 col:2of5 "01209_sqld360_323688_0sjx29v99zfqc_2d_618_read_write_and_interconnect_io_bytes_for_sqlexecid_16777627_of_phv_2031822258.html"
17:18:35 col:2of5 "01210_sqld360_323688_0sjx29v99zfqc_2d_618_read_write_and_interconnect_io_bytes_for_sqlexecid_16777627_of_phv_2031822258_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:35 col:2of5 "Execution Plans"
17:18:35 Raw Data for SQL_EXEC_ID 16777627 of PHV 2031822258

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2031822258
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5044
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17674
AND timestamp BETWEEN TO_DATE('20201022064941', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022065011', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777627) = 16777627
AND NVL(distribution, TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022064941', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:35 col:2of5.

17:18:35 col:2of5 "01211_sqld360_323688_0sjx29v99zfqc_2d_619_raw_data_for_sqlexecid_16777627_of_phv_2031822258.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:36 col:2of5 "Execution Plans"
17:18:36 Plan Tree for PHV 3435103059 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =3435103059
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3435103059)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =3435103059
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3435103059
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:36 col:2of5.

17:18:36 col:2of5 "01212_sqld360_323688_0sjx29v99zfqc_2d_620_plan_tree_for_phv_3435103059_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:37 col:2of5 "Execution Plans"
17:18:37 Plan from Memory for PHV 3435103059
Completed: 17:18:37


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:37 col:2of5 "Execution Plans"
17:18:37 Plan from History for PHV 3435103059
Completed: 17:18:37


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:37 col:2of5 "Execution Plans"
17:18:37 Avg et/exec for recent execs for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:37 col:2of5.

17:18:37 col:2of5 "01215_sqld360_323688_0sjx29v99zfqc_2d_621_avg_etexec_for_recent_execs_for_phv_3435103059.html"
17:18:37 col:2of5 "01216_sqld360_323688_0sjx29v99zfqc_2d_621_avg_etexec_for_recent_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:37 col:2of5 "Execution Plans"
17:18:37 Avg et/exec for historical execs for PHV 3435103059

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:37 col:2of5.

17:18:37 col:2of5 "01217_sqld360_323688_0sjx29v99zfqc_2d_622_avg_etexec_for_historical_execs_for_phv_3435103059.html"
17:18:37 col:2of5 "01218_sqld360_323688_0sjx29v99zfqc_2d_622_avg_etexec_for_historical_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:37 col:2of5 "Execution Plans"
17:18:37 Peak PGA and TEMP usage for recent execs for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:37 col:2of5.

17:18:38 col:2of5 "01219_sqld360_323688_0sjx29v99zfqc_2d_623_peak_pga_and_temp_usage_for_recent_execs_for_phv_3435103059.html"
17:18:38 col:2of5 "01220_sqld360_323688_0sjx29v99zfqc_2d_623_peak_pga_and_temp_usage_for_recent_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:38 col:2of5 "Execution Plans"
17:18:38 Peak PGA and TEMP usage for historical execs for PHV 3435103059

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:38 col:2of5.

17:18:38 col:2of5 "01221_sqld360_323688_0sjx29v99zfqc_2d_624_peak_pga_and_temp_usage_for_historical_execs_for_phv_3435103059.html"
17:18:38 col:2of5 "01222_sqld360_323688_0sjx29v99zfqc_2d_624_peak_pga_and_temp_usage_for_historical_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:38 col:2of5 "Execution Plans"
17:18:38 Peak Read and Write I/O requests for recent execs for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:38 col:2of5.

17:18:38 col:2of5 "01223_sqld360_323688_0sjx29v99zfqc_2d_625_peak_read_and_write_io_requests_for_recent_execs_for_phv_3435103059.html"
17:18:38 col:2of5 "01224_sqld360_323688_0sjx29v99zfqc_2d_625_peak_read_and_write_io_requests_for_recent_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:38 col:2of5 "Execution Plans"
17:18:38 Peak Read and Write I/O requests for historical execs for PHV 3435103059

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:38 col:2of5.

17:18:38 col:2of5 "01225_sqld360_323688_0sjx29v99zfqc_2d_626_peak_read_and_write_io_requests_for_historical_execs_for_phv_3435103059.html"
17:18:38 col:2of5 "01226_sqld360_323688_0sjx29v99zfqc_2d_626_peak_read_and_write_io_requests_for_historical_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:39 col:2of5 "Execution Plans"
17:18:39 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:39 col:2of5.

17:18:39 col:2of5 "01227_sqld360_323688_0sjx29v99zfqc_2d_627_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3435103059.html"
17:18:39 col:2of5 "01228_sqld360_323688_0sjx29v99zfqc_2d_627_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:39 col:2of5 "Execution Plans"
17:18:39 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 3435103059

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:39 col:2of5.

17:18:39 col:2of5 "01229_sqld360_323688_0sjx29v99zfqc_2d_628_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3435103059.html"
17:18:39 col:2of5 "01230_sqld360_323688_0sjx29v99zfqc_2d_628_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:39 col:2of5 "Execution Plans"
17:18:39 Top Wait events for PHV 3435103059

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:39 col:2of5.

17:18:39 col:2of5 "01231_sqld360_323688_0sjx29v99zfqc_2d_629_top_wait_events_for_phv_3435103059.html"
17:18:39 col:2of5 "01232_sqld360_323688_0sjx29v99zfqc_2d_629_top_wait_events_for_phv_3435103059_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:39 col:2of5 "Execution Plans"
17:18:39 Top Objects accessed by PHV 3435103059

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  3435103059
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:39 col:2of5.

17:18:39 col:2of5 "01233_sqld360_323688_0sjx29v99zfqc_2d_630_top_objects_accessed_by_phv_3435103059.html"
17:18:39 col:2of5 "01234_sqld360_323688_0sjx29v99zfqc_2d_630_top_objects_accessed_by_phv_3435103059_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:40 col:2of5 "Execution Plans"
17:18:40 Top Plan Steps for PHV 3435103059

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:40 col:2of5.

17:18:40 col:2of5 "01235_sqld360_323688_0sjx29v99zfqc_2d_631_top_plan_steps_for_phv_3435103059.html"
17:18:40 col:2of5 "01236_sqld360_323688_0sjx29v99zfqc_2d_631_top_plan_steps_for_phv_3435103059_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:40 col:2of5 "Execution Plans"
17:18:40 Top Step/Event/Obj for PHV 3435103059

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3435103059
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:40 col:2of5.

17:18:40 col:2of5 "01237_sqld360_323688_0sjx29v99zfqc_2d_632_top_stepeventobj_for_phv_3435103059.html"
17:18:40 col:2of5 "01238_sqld360_323688_0sjx29v99zfqc_2d_632_top_stepeventobj_for_phv_3435103059_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:40 col:2of5 "Execution Plans"
17:18:40 Top 15 Wait events over recent time for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3435103059
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:40 col:2of5.

17:18:40 col:2of5 "01239_sqld360_323688_0sjx29v99zfqc_2d_633_top_15_wait_events_over_recent_time_for_phv_3435103059.html"
17:18:40 col:2of5 "01240_sqld360_323688_0sjx29v99zfqc_2d_633_top_15_wait_events_over_recent_time_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:40 col:2of5 "Execution Plans"
17:18:40 Top 15 Wait events over historical time for PHV 3435103059

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3435103059
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:40 col:2of5.

17:18:40 col:2of5 "01241_sqld360_323688_0sjx29v99zfqc_2d_634_top_15_wait_events_over_historical_time_for_phv_3435103059.html"
17:18:40 col:2of5 "01242_sqld360_323688_0sjx29v99zfqc_2d_634_top_15_wait_events_over_historical_time_for_phv_3435103059_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:41 col:2of5 "Execution Plans"
17:18:41 Plan Tree for PHV 2835568740 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2835568740
AND remarks = '0sjx29v99zfqc'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2835568740)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2835568740
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2835568740
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:41 col:2of5.

17:18:41 col:2of5 "01243_sqld360_323688_0sjx29v99zfqc_2d_635_plan_tree_for_phv_2835568740_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:42 col:2of5 "Execution Plans"
17:18:42 Plan from Memory for PHV 2835568740
Completed: 17:18:42


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:42 col:2of5 "Execution Plans"
17:18:42 Plan from History for PHV 2835568740
Completed: 17:18:42


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:42 col:2of5 "Execution Plans"
17:18:42 Avg et/exec for recent execs for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:18:42 col:2of5.

17:18:42 col:2of5 "01246_sqld360_323688_0sjx29v99zfqc_2d_636_avg_etexec_for_recent_execs_for_phv_2835568740.html"
17:18:42 col:2of5 "01247_sqld360_323688_0sjx29v99zfqc_2d_636_avg_etexec_for_recent_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:42 col:2of5 "Execution Plans"
17:18:42 Avg et/exec for historical execs for PHV 2835568740

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:42 col:2of5.

17:18:42 col:2of5 "01248_sqld360_323688_0sjx29v99zfqc_2d_637_avg_etexec_for_historical_execs_for_phv_2835568740.html"
17:18:42 col:2of5 "01249_sqld360_323688_0sjx29v99zfqc_2d_637_avg_etexec_for_historical_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:43 col:2of5 "Execution Plans"
17:18:43 Peak PGA and TEMP usage for recent execs for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:43 col:2of5.

17:18:43 col:2of5 "01250_sqld360_323688_0sjx29v99zfqc_2d_638_peak_pga_and_temp_usage_for_recent_execs_for_phv_2835568740.html"
17:18:43 col:2of5 "01251_sqld360_323688_0sjx29v99zfqc_2d_638_peak_pga_and_temp_usage_for_recent_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:43 col:2of5 "Execution Plans"
17:18:43 Peak PGA and TEMP usage for historical execs for PHV 2835568740

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:43 col:2of5.

17:18:43 col:2of5 "01252_sqld360_323688_0sjx29v99zfqc_2d_639_peak_pga_and_temp_usage_for_historical_execs_for_phv_2835568740.html"
17:18:43 col:2of5 "01253_sqld360_323688_0sjx29v99zfqc_2d_639_peak_pga_and_temp_usage_for_historical_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:43 col:2of5 "Execution Plans"
17:18:43 Peak Read and Write I/O requests for recent execs for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:43 col:2of5.

17:18:43 col:2of5 "01254_sqld360_323688_0sjx29v99zfqc_2d_640_peak_read_and_write_io_requests_for_recent_execs_for_phv_2835568740.html"
17:18:43 col:2of5 "01255_sqld360_323688_0sjx29v99zfqc_2d_640_peak_read_and_write_io_requests_for_recent_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:43 col:2of5 "Execution Plans"
17:18:43 Peak Read and Write I/O requests for historical execs for PHV 2835568740

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:43 col:2of5.

17:18:43 col:2of5 "01256_sqld360_323688_0sjx29v99zfqc_2d_641_peak_read_and_write_io_requests_for_historical_execs_for_phv_2835568740.html"
17:18:43 col:2of5 "01257_sqld360_323688_0sjx29v99zfqc_2d_641_peak_read_and_write_io_requests_for_historical_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:44 col:2of5 "Execution Plans"
17:18:44 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:18:44 col:2of5.

17:18:44 col:2of5 "01258_sqld360_323688_0sjx29v99zfqc_2d_642_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2835568740.html"
17:18:44 col:2of5 "01259_sqld360_323688_0sjx29v99zfqc_2d_642_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:44 col:2of5 "Execution Plans"
17:18:44 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2835568740

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:18:44 col:2of5.

17:18:44 col:2of5 "01260_sqld360_323688_0sjx29v99zfqc_2d_643_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2835568740.html"
17:18:44 col:2of5 "01261_sqld360_323688_0sjx29v99zfqc_2d_643_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:44 col:2of5 "Execution Plans"
17:18:44 Top Wait events for PHV 2835568740

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:18:44 col:2of5.

17:18:44 col:2of5 "01262_sqld360_323688_0sjx29v99zfqc_2d_644_top_wait_events_for_phv_2835568740.html"
17:18:44 col:2of5 "01263_sqld360_323688_0sjx29v99zfqc_2d_644_top_wait_events_for_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:44 col:2of5 "Execution Plans"
17:18:44 Top Objects accessed by PHV 2835568740

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2835568740
AND a.remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:18:44 col:2of5.

17:18:44 col:2of5 "01264_sqld360_323688_0sjx29v99zfqc_2d_645_top_objects_accessed_by_phv_2835568740.html"
17:18:44 col:2of5 "01265_sqld360_323688_0sjx29v99zfqc_2d_645_top_objects_accessed_by_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:45 col:2of5 "Execution Plans"
17:18:45 Top Plan Steps for PHV 2835568740

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:18:45 col:2of5.

17:18:45 col:2of5 "01266_sqld360_323688_0sjx29v99zfqc_2d_646_top_plan_steps_for_phv_2835568740.html"
17:18:45 col:2of5 "01267_sqld360_323688_0sjx29v99zfqc_2d_646_top_plan_steps_for_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:45 col:2of5 "Execution Plans"
17:18:45 Top Step/Event/Obj for PHV 2835568740

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2835568740
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:45 col:2of5.

17:18:45 col:2of5 "01268_sqld360_323688_0sjx29v99zfqc_2d_647_top_stepeventobj_for_phv_2835568740.html"
17:18:45 col:2of5 "01269_sqld360_323688_0sjx29v99zfqc_2d_647_top_stepeventobj_for_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:45 col:2of5 "Execution Plans"
17:18:45 Top 15 Wait events over recent time for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2835568740
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:45 col:2of5.

17:18:45 col:2of5 "01270_sqld360_323688_0sjx29v99zfqc_2d_648_top_15_wait_events_over_recent_time_for_phv_2835568740.html"
17:18:45 col:2of5 "01271_sqld360_323688_0sjx29v99zfqc_2d_648_top_15_wait_events_over_recent_time_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:45 col:2of5 "Execution Plans"
17:18:45 Top 15 Wait events over historical time for PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2835568740
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:18:45 col:2of5.

17:18:45 col:2of5 "01272_sqld360_323688_0sjx29v99zfqc_2d_649_top_15_wait_events_over_historical_time_for_phv_2835568740.html"
17:18:45 col:2of5 "01273_sqld360_323688_0sjx29v99zfqc_2d_649_top_15_wait_events_over_historical_time_for_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:46 col:2of5 "Execution Plans"
17:18:46 Plan Tree with subtree for SQL_EXEC_ID 16779556 of PHV 2835568740

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2835568740)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '0sjx29v99zfqc'
AND plan_hash_value =2835568740
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2835568740
AND sql_id = '0sjx29v99zfqc'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '0sjx29v99zfqc'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:18:46 col:2of5.

17:18:46 col:2of5 "01274_sqld360_323688_0sjx29v99zfqc_2d_650_plan_tree_with_subtree_for_sqlexecid_16779556_of_phv_2835568740_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:47 col:2of5 "Execution Plans"
17:18:47 Plan Step IDs timeline for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:18:47 col:2of5.

17:18:47 col:2of5 "01275_sqld360_323688_0sjx29v99zfqc_2d_651_plan_step_ids_timeline_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:47 col:2of5 "01276_sqld360_323688_0sjx29v99zfqc_2d_651_plan_step_ids_timeline_for_sqlexecid_16779556_of_phv_2835568740_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:47 col:2of5 "Execution Plans"
17:18:47 Top Step/Event/Obj for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:18:47 col:2of5.

17:18:47 col:2of5 "01277_sqld360_323688_0sjx29v99zfqc_2d_652_top_stepeventobj_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:47 col:2of5 "01278_sqld360_323688_0sjx29v99zfqc_2d_652_top_stepeventobj_for_sqlexecid_16779556_of_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:47 col:2of5 "Execution Plans"
17:18:47 Top 15 Wait events timeline SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '0sjx29v99zfqc'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:18:47 col:2of5.

17:18:47 col:2of5 "01279_sqld360_323688_0sjx29v99zfqc_2d_653_top_15_wait_events_timeline_sqlexecid_16779556_of_phv_2835568740.html"
17:18:47 col:2of5 "01280_sqld360_323688_0sjx29v99zfqc_2d_653_top_15_wait_events_timeline_sqlexecid_16779556_of_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:47 col:2of5 "Execution Plans"
17:18:47 DB Time by PX process for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:18:47 col:2of5.

17:18:47 col:2of5 "01281_sqld360_323688_0sjx29v99zfqc_2d_654_db_time_by_px_process_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:47 col:2of5 "01282_sqld360_323688_0sjx29v99zfqc_2d_654_db_time_by_px_process_for_sqlexecid_16779556_of_phv_2835568740_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:48 col:2of5 "Execution Plans"
17:18:48 PGA and TEMP usage for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:48 col:2of5.

17:18:48 col:2of5 "01283_sqld360_323688_0sjx29v99zfqc_2d_655_pga_and_temp_usage_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:48 col:2of5 "01284_sqld360_323688_0sjx29v99zfqc_2d_655_pga_and_temp_usage_for_sqlexecid_16779556_of_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:48 col:2of5 "Execution Plans"
17:18:48 Read and Write I/O requests for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:48 col:2of5.

17:18:48 col:2of5 "01285_sqld360_323688_0sjx29v99zfqc_2d_656_read_and_write_io_requests_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:48 col:2of5 "01286_sqld360_323688_0sjx29v99zfqc_2d_656_read_and_write_io_requests_for_sqlexecid_16779556_of_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:48 col:2of5 "Execution Plans"
17:18:48 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND remarks = '0sjx29v99zfqc'
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:18:48 col:2of5.

17:18:48 col:2of5 "01287_sqld360_323688_0sjx29v99zfqc_2d_657_read_write_and_interconnect_io_bytes_for_sqlexecid_16779556_of_phv_2835568740.html"
17:18:48 col:2of5 "01288_sqld360_323688_0sjx29v99zfqc_2d_657_read_write_and_interconnect_io_bytes_for_sqlexecid_16779556_of_phv_2835568740_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:48 col:2of5 "Execution Plans"
17:18:48 Raw Data for SQL_EXEC_ID 16779556 of PHV 2835568740

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '0sjx29v99zfqc'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2835568740
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2340
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 52190
AND timestamp BETWEEN TO_DATE('20201016055126', 'YYYYMMDDHH24MISS') AND TO_DATE('20201016055216', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16779556) = 16779556
AND NVL(distribution, TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')) = TO_DATE('20201016055125', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:18:48 col:2of5.

17:18:48 col:2of5 "01289_sqld360_323688_0sjx29v99zfqc_2d_658_raw_data_for_sqlexecid_16779556_of_phv_2835568740.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:48 col:2of5 "Execution Plans"
17:18:48 Plans from Memory
Completed: 17:18:51


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:52 col:2of5 "Execution Plans"
17:18:52 Plans from History
Completed: 17:18:56


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:56 col:2of5 "Execution Plans"
17:18:56 Plan from Plan Table
Completed: 17:18:56


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:56 col:2of5 "Execution Plans"
17:18:56 Plans from Baseline
Completed: 17:18:56


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:56 col:2of5 "Execution Plans"
17:18:56 Plans from SQL Tuning Sets
Completed: 17:18:56


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:56 col:2of5 "Plan Control"
17:18:56 SQL Profiles


17:18:56 col:2of5.

17:18:56 col:2of5 "01295_sqld360_323688_0sjx29v99zfqc_2e_40_sql_profiles.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:56 col:2of5 "Plan Control"
17:18:56 SQL Profile Data

SELECT /*+ NO_MERGE */
       *
  FROM dbmshsxp_sql_profile_attr
 WHERE profile_name IN (SELECT name
                          FROM dba_sql_profiles
                         WHERE signature IN ( 15063275149933877428 , 15063275149933877428 ))
   AND 'Y' = 'Y'
 ORDER BY profile_name

17:18:56 col:2of5.

17:18:56 col:2of5 "01296_sqld360_323688_0sjx29v99zfqc_2e_41_sql_profile_data.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:57 col:2of5 "Plan Control"
17:18:57 SQL Plan Baselines


17:18:57 col:2of5.

17:18:57 col:2of5 "01297_sqld360_323688_0sjx29v99zfqc_2e_42_sql_plan_baselines.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:57 col:2of5 "Plan Control"
17:18:57 SQL Patches


17:18:57 col:2of5.

17:18:57 col:2of5 "01298_sqld360_323688_0sjx29v99zfqc_2e_43_sql_patches.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:18:57 col:2of5 "Plan Control"
17:18:57 SQL Plan Directives

SELECT /*+ NO_MERGE */
       *
  FROM (SELECT d.dir_id directive_id,
               d.type,
               d.enabled,
               (CASE WHEN d.internal_state = 'HAS_STATS' OR d.redundant = 'YES' THEN 'SUPERSEDED'
                     WHEN d.internal_state IN ('NEW', 'MISSING_STATS', 'PERMANENT') THEN 'USABLE'
                     ELSE 'UNKNOWN'
                 END) state,
               d.auto_drop,
               f.reason,
               d.created,
               d.last_modified,
               d.last_used,
               d.internal_state,
               d.redundant
          FROM sys."_BASE_OPT_DIRECTIVE" d,
               sys."_BASE_OPT_FINDING" f
          WHERE d.f_id = f.f_id)
 WHERE directive_id IN (SELECT directive_id
                          FROM dba_sql_plan_dir_objects
                         WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc'))
 ORDER BY directive_id

17:18:57 col:2of5.

17:18:57 col:2of5 "01299_sqld360_323688_0sjx29v99zfqc_2e_44_sql_plan_directives.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:02 col:2of5 "Plan Control"
17:19:02 SQL Plan Directives Objects

WITH dir_id AS (SELECT directive_id
                  FROM dba_sql_plan_dir_objects
                 WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc'))
SELECT /*+ NO_MERGE */ *
  FROM dba_sql_plan_dir_objects
 WHERE directive_id IN (SELECT directive_id FROM dir_id)
 ORDER BY owner, object_name, directive_id

17:19:02 col:2of5.

17:19:02 col:2of5 "01300_sqld360_323688_0sjx29v99zfqc_2e_45_sql_plan_directives_objects.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:14 col:2of5 "Plan Control"
17:19:14 SQL ReOptimization Hints

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_reoptimization_hints
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, child_number, hint_id

17:19:14 col:2of5.

17:19:14 col:2of5 "01301_sqld360_323688_0sjx29v99zfqc_2e_46_sql_reoptimization_hints.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:14 col:2of5 "Plan Control"
17:19:14 Mapped SQL

SELECT /*+ NO_MERGE */
       *
  FROM gv$mapped_sql
 WHERE mapped_sql_id = '0sjx29v99zfqc' OR sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id

17:19:14 col:2of5.

17:19:14 col:2of5 "01302_sqld360_323688_0sjx29v99zfqc_2e_47_mapped_sql.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:15 col:2of5 "SQL Monitor"
17:19:15 SQL Monitor


17:19:15 col:2of5.

17:19:15 col:2of5 "01303_sqld360_323688_0sjx29v99zfqc_2f_48_sql_monitor.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:15 col:2of5 "SQL Monitor"
17:19:15 SQL Plan Monitor

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_plan_monitor
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, sid, sql_exec_id desc, sql_exec_start desc, plan_line_id

17:19:15 col:2of5.

17:19:15 col:2of5 "01304_sqld360_323688_0sjx29v99zfqc_2f_49_sql_plan_monitor.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:47 col:2of5 "Binds"
17:19:47 Binds Summary from Memory

SELECT /*+ NO_MERGE */
       inst_id, child_number, name, position, datatype_string, MIN(value_string) min_value, MAX(value_string) max_value, COUNT(DISTINCT value_string) distinct_combinations
  FROM gv$sql_bind_capture
 WHERE sql_id = '0sjx29v99zfqc'
 GROUP BY inst_id, child_number, name, position, datatype_string
 ORDER BY inst_id, child_number, name, position, datatype_string

17:19:47 col:2of5.

17:19:47 col:2of5 "01305_sqld360_323688_0sjx29v99zfqc_2g_50_binds_summary_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:47 col:2of5 "Binds"
17:19:47 Binds List from Memory

SELECT /*+ NO_MERGE */
       sbc.*,
       s.plan_hash_value
  FROM gv$sql_bind_capture sbc,
       gv$sql s
 WHERE sbc.sql_id = '0sjx29v99zfqc'
   AND sbc.inst_id = s.inst_id
   AND sbc.child_number = s.child_number
   AND sbc.sql_id = s.sql_id
 ORDER BY sbc.inst_id, sbc.child_number, sbc.position

17:19:47 col:2of5.

17:19:47 col:2of5 "01306_sqld360_323688_0sjx29v99zfqc_2g_51_binds_list_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:47 col:2of5 "Binds"
17:19:47 Binds Summary from History

SELECT /*+ NO_MERGE */
       instance_number, name, position, datatype_string, MIN(value_string) min_value, MAX(value_string) max_value, COUNT(DISTINCT value_string) distinct_combinations
  FROM dba_hist_sqlbind
 WHERE sql_id = '0sjx29v99zfqc'
   AND snap_id BETWEEN 3485 AND 4974
   AND 'Y' = 'Y'
 GROUP BY instance_number, name, position, datatype_string
 ORDER BY instance_number, name, position, datatype_string

17:19:47 col:2of5.

17:19:47 col:2of5 "01307_sqld360_323688_0sjx29v99zfqc_2g_52_binds_summary_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:48 col:2of5 "Binds"
17:19:48 Binds List from History

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sqlbind
 WHERE sql_id = '0sjx29v99zfqc'
   AND snap_id BETWEEN 3485 AND 4974
   AND 'Y' = 'Y'
 ORDER BY snap_id desc, instance_number, position

17:19:48 col:2of5.

17:19:48 col:2of5 "01308_sqld360_323688_0sjx29v99zfqc_2g_53_binds_list_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:48 col:2of5 "Binds"
17:19:48 Captured Binds Details

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:48 col:2of5 "Binds"
17:19:48 Bind :1 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:48 col:2of5.

17:19:48 col:2of5 "01310_sqld360_323688_0sjx29v99zfqc_2g_54_bind_1_values_over_time_from_memory.html"
17:19:48 col:2of5 "01311_sqld360_323688_0sjx29v99zfqc_2g_54_bind_1_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:48 col:2of5 "Binds"
17:19:48 Bind :1 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:48 col:2of5.

17:19:48 col:2of5 "01312_sqld360_323688_0sjx29v99zfqc_2g_55_bind_1_values_over_time_from_history.html"
17:19:48 col:2of5 "01313_sqld360_323688_0sjx29v99zfqc_2g_55_bind_1_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:48 col:2of5 "Binds"
17:19:48 Top 15 bind :1 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:48 col:2of5.

17:19:48 col:2of5 "01314_sqld360_323688_0sjx29v99zfqc_2g_56_top_15_bind_1_values_used.html"
17:19:49 col:2of5 "01315_sqld360_323688_0sjx29v99zfqc_2g_56_top_15_bind_1_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:49 col:2of5 "Binds"
17:19:49 Bind :10 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':10'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:49 col:2of5.

17:19:49 col:2of5 "01316_sqld360_323688_0sjx29v99zfqc_2g_57_bind_10_values_over_time_from_memory.html"
17:19:49 col:2of5 "01317_sqld360_323688_0sjx29v99zfqc_2g_57_bind_10_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:49 col:2of5 "Binds"
17:19:49 Bind :10 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':10'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:49 col:2of5.

17:19:49 col:2of5 "01318_sqld360_323688_0sjx29v99zfqc_2g_58_bind_10_values_over_time_from_history.html"
17:19:49 col:2of5 "01319_sqld360_323688_0sjx29v99zfqc_2g_58_bind_10_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:49 col:2of5 "Binds"
17:19:49 Top 15 bind :10 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':10'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':10'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:49 col:2of5.

17:19:49 col:2of5 "01320_sqld360_323688_0sjx29v99zfqc_2g_59_top_15_bind_10_values_used.html"
17:19:49 col:2of5 "01321_sqld360_323688_0sjx29v99zfqc_2g_59_top_15_bind_10_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:50 col:2of5 "Binds"
17:19:50 Bind :11 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':11'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:50 col:2of5.

17:19:50 col:2of5 "01322_sqld360_323688_0sjx29v99zfqc_2g_60_bind_11_values_over_time_from_memory.html"
17:19:50 col:2of5 "01323_sqld360_323688_0sjx29v99zfqc_2g_60_bind_11_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:50 col:2of5 "Binds"
17:19:50 Bind :11 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':11'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:50 col:2of5.

17:19:50 col:2of5 "01324_sqld360_323688_0sjx29v99zfqc_2g_61_bind_11_values_over_time_from_history.html"
17:19:50 col:2of5 "01325_sqld360_323688_0sjx29v99zfqc_2g_61_bind_11_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:50 col:2of5 "Binds"
17:19:50 Top 15 bind :11 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':11'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':11'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:50 col:2of5.

17:19:50 col:2of5 "01326_sqld360_323688_0sjx29v99zfqc_2g_62_top_15_bind_11_values_used.html"
17:19:50 col:2of5 "01327_sqld360_323688_0sjx29v99zfqc_2g_62_top_15_bind_11_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:50 col:2of5 "Binds"
17:19:50 Bind :2 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':2'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:50 col:2of5.

17:19:50 col:2of5 "01328_sqld360_323688_0sjx29v99zfqc_2g_63_bind_2_values_over_time_from_memory.html"
17:19:50 col:2of5 "01329_sqld360_323688_0sjx29v99zfqc_2g_63_bind_2_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:51 col:2of5 "Binds"
17:19:51 Bind :2 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':2'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:51 col:2of5.

17:19:51 col:2of5 "01330_sqld360_323688_0sjx29v99zfqc_2g_64_bind_2_values_over_time_from_history.html"
17:19:51 col:2of5 "01331_sqld360_323688_0sjx29v99zfqc_2g_64_bind_2_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:51 col:2of5 "Binds"
17:19:51 Top 15 bind :2 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':2'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':2'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:51 col:2of5.

17:19:51 col:2of5 "01332_sqld360_323688_0sjx29v99zfqc_2g_65_top_15_bind_2_values_used.html"
17:19:51 col:2of5 "01333_sqld360_323688_0sjx29v99zfqc_2g_65_top_15_bind_2_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:51 col:2of5 "Binds"
17:19:51 Bind :3 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':3'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:51 col:2of5.

17:19:51 col:2of5 "01334_sqld360_323688_0sjx29v99zfqc_2g_66_bind_3_values_over_time_from_memory.html"
17:19:51 col:2of5 "01335_sqld360_323688_0sjx29v99zfqc_2g_66_bind_3_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:51 col:2of5 "Binds"
17:19:51 Bind :3 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':3'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:51 col:2of5.

17:19:51 col:2of5 "01336_sqld360_323688_0sjx29v99zfqc_2g_67_bind_3_values_over_time_from_history.html"
17:19:51 col:2of5 "01337_sqld360_323688_0sjx29v99zfqc_2g_67_bind_3_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:52 col:2of5 "Binds"
17:19:52 Top 15 bind :3 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':3'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':3'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:52 col:2of5.

17:19:52 col:2of5 "01338_sqld360_323688_0sjx29v99zfqc_2g_68_top_15_bind_3_values_used.html"
17:19:52 col:2of5 "01339_sqld360_323688_0sjx29v99zfqc_2g_68_top_15_bind_3_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:52 col:2of5 "Binds"
17:19:52 Bind :4 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:52 col:2of5.

17:19:52 col:2of5 "01340_sqld360_323688_0sjx29v99zfqc_2g_69_bind_4_values_over_time_from_memory.html"
17:19:52 col:2of5 "01341_sqld360_323688_0sjx29v99zfqc_2g_69_bind_4_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:52 col:2of5 "Binds"
17:19:52 Bind :4 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:52 col:2of5.

17:19:52 col:2of5 "01342_sqld360_323688_0sjx29v99zfqc_2g_70_bind_4_values_over_time_from_history.html"
17:19:52 col:2of5 "01343_sqld360_323688_0sjx29v99zfqc_2g_70_bind_4_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:52 col:2of5 "Binds"
17:19:52 Top 15 bind :4 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:52 col:2of5.

17:19:52 col:2of5 "01344_sqld360_323688_0sjx29v99zfqc_2g_71_top_15_bind_4_values_used.html"
17:19:52 col:2of5 "01345_sqld360_323688_0sjx29v99zfqc_2g_71_top_15_bind_4_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:53 col:2of5 "Binds"
17:19:53 Bind :5 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':5'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:53 col:2of5.

17:19:53 col:2of5 "01346_sqld360_323688_0sjx29v99zfqc_2g_72_bind_5_values_over_time_from_memory.html"
17:19:53 col:2of5 "01347_sqld360_323688_0sjx29v99zfqc_2g_72_bind_5_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:53 col:2of5 "Binds"
17:19:53 Bind :5 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':5'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:53 col:2of5.

17:19:53 col:2of5 "01348_sqld360_323688_0sjx29v99zfqc_2g_73_bind_5_values_over_time_from_history.html"
17:19:53 col:2of5 "01349_sqld360_323688_0sjx29v99zfqc_2g_73_bind_5_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:53 col:2of5 "Binds"
17:19:53 Top 15 bind :5 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':5'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':5'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:53 col:2of5.

17:19:53 col:2of5 "01350_sqld360_323688_0sjx29v99zfqc_2g_74_top_15_bind_5_values_used.html"
17:19:53 col:2of5 "01351_sqld360_323688_0sjx29v99zfqc_2g_74_top_15_bind_5_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:53 col:2of5 "Binds"
17:19:53 Bind :6 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':6'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:53 col:2of5.

17:19:53 col:2of5 "01352_sqld360_323688_0sjx29v99zfqc_2g_75_bind_6_values_over_time_from_memory.html"
17:19:54 col:2of5 "01353_sqld360_323688_0sjx29v99zfqc_2g_75_bind_6_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:54 col:2of5 "Binds"
17:19:54 Bind :6 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':6'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:54 col:2of5.

17:19:54 col:2of5 "01354_sqld360_323688_0sjx29v99zfqc_2g_76_bind_6_values_over_time_from_history.html"
17:19:54 col:2of5 "01355_sqld360_323688_0sjx29v99zfqc_2g_76_bind_6_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:54 col:2of5 "Binds"
17:19:54 Top 15 bind :6 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':6'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':6'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:54 col:2of5.

17:19:54 col:2of5 "01356_sqld360_323688_0sjx29v99zfqc_2g_77_top_15_bind_6_values_used.html"
17:19:54 col:2of5 "01357_sqld360_323688_0sjx29v99zfqc_2g_77_top_15_bind_6_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:54 col:2of5 "Binds"
17:19:54 Bind :7 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':7'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:54 col:2of5.

17:19:54 col:2of5 "01358_sqld360_323688_0sjx29v99zfqc_2g_78_bind_7_values_over_time_from_memory.html"
17:19:54 col:2of5 "01359_sqld360_323688_0sjx29v99zfqc_2g_78_bind_7_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:54 col:2of5 "Binds"
17:19:54 Bind :7 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':7'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:54 col:2of5.

17:19:55 col:2of5 "01360_sqld360_323688_0sjx29v99zfqc_2g_79_bind_7_values_over_time_from_history.html"
17:19:55 col:2of5 "01361_sqld360_323688_0sjx29v99zfqc_2g_79_bind_7_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:55 col:2of5 "Binds"
17:19:55 Top 15 bind :7 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':7'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':7'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:55 col:2of5.

17:19:55 col:2of5 "01362_sqld360_323688_0sjx29v99zfqc_2g_80_top_15_bind_7_values_used.html"
17:19:55 col:2of5 "01363_sqld360_323688_0sjx29v99zfqc_2g_80_top_15_bind_7_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:55 col:2of5 "Binds"
17:19:55 Bind :8 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':8'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:55 col:2of5.

17:19:55 col:2of5 "01364_sqld360_323688_0sjx29v99zfqc_2g_81_bind_8_values_over_time_from_memory.html"
17:19:55 col:2of5 "01365_sqld360_323688_0sjx29v99zfqc_2g_81_bind_8_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:55 col:2of5 "Binds"
17:19:55 Bind :8 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':8'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:55 col:2of5.

17:19:55 col:2of5 "01366_sqld360_323688_0sjx29v99zfqc_2g_82_bind_8_values_over_time_from_history.html"
17:19:55 col:2of5 "01367_sqld360_323688_0sjx29v99zfqc_2g_82_bind_8_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:56 col:2of5 "Binds"
17:19:56 Top 15 bind :8 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':8'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':8'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:56 col:2of5.

17:19:56 col:2of5 "01368_sqld360_323688_0sjx29v99zfqc_2g_83_top_15_bind_8_values_used.html"
17:19:56 col:2of5 "01369_sqld360_323688_0sjx29v99zfqc_2g_83_top_15_bind_8_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:56 col:2of5 "Binds"
17:19:56 Bind :9 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':9'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:56 col:2of5.

17:19:56 col:2of5 "01370_sqld360_323688_0sjx29v99zfqc_2g_84_bind_9_values_over_time_from_memory.html"
17:19:56 col:2of5 "01371_sqld360_323688_0sjx29v99zfqc_2g_84_bind_9_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:56 col:2of5 "Binds"
17:19:56 Bind :9 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':9'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:56 col:2of5.

17:19:56 col:2of5 "01372_sqld360_323688_0sjx29v99zfqc_2g_85_bind_9_values_over_time_from_history.html"
17:19:56 col:2of5 "01373_sqld360_323688_0sjx29v99zfqc_2g_85_bind_9_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:56 col:2of5 "Binds"
17:19:56 Top 15 bind :9 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':9'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':9'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:56 col:2of5.

17:19:56 col:2of5 "01374_sqld360_323688_0sjx29v99zfqc_2g_86_top_15_bind_9_values_used.html"
17:19:57 col:2of5 "01375_sqld360_323688_0sjx29v99zfqc_2g_86_top_15_bind_9_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:57 col:2of5 "Binds"
17:19:57 Bind :SYS_B_0 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_0'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:57 col:2of5.

17:19:57 col:2of5 "01376_sqld360_323688_0sjx29v99zfqc_2g_87_bind_sysb0_values_over_time_from_memory.html"
17:19:57 col:2of5 "01377_sqld360_323688_0sjx29v99zfqc_2g_87_bind_sysb0_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:57 col:2of5 "Binds"
17:19:57 Bind :SYS_B_0 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_0'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:57 col:2of5.

17:19:57 col:2of5 "01378_sqld360_323688_0sjx29v99zfqc_2g_88_bind_sysb0_values_over_time_from_history.html"
17:19:57 col:2of5 "01379_sqld360_323688_0sjx29v99zfqc_2g_88_bind_sysb0_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:57 col:2of5 "Binds"
17:19:57 Top 15 bind :SYS_B_0 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_0'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_0'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:57 col:2of5.

17:19:57 col:2of5 "01380_sqld360_323688_0sjx29v99zfqc_2g_89_top_15_bind_sysb0_values_used.html"
17:19:57 col:2of5 "01381_sqld360_323688_0sjx29v99zfqc_2g_89_top_15_bind_sysb0_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:58 col:2of5 "Binds"
17:19:58 Bind :SYS_B_1 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:58 col:2of5.

17:19:58 col:2of5 "01382_sqld360_323688_0sjx29v99zfqc_2g_90_bind_sysb1_values_over_time_from_memory.html"
17:19:58 col:2of5 "01383_sqld360_323688_0sjx29v99zfqc_2g_90_bind_sysb1_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:58 col:2of5 "Binds"
17:19:58 Bind :SYS_B_1 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:58 col:2of5.

17:19:58 col:2of5 "01384_sqld360_323688_0sjx29v99zfqc_2g_91_bind_sysb1_values_over_time_from_history.html"
17:19:58 col:2of5 "01385_sqld360_323688_0sjx29v99zfqc_2g_91_bind_sysb1_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:58 col:2of5 "Binds"
17:19:58 Top 15 bind :SYS_B_1 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_1'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:58 col:2of5.

17:19:58 col:2of5 "01386_sqld360_323688_0sjx29v99zfqc_2g_92_top_15_bind_sysb1_values_used.html"
17:19:58 col:2of5 "01387_sqld360_323688_0sjx29v99zfqc_2g_92_top_15_bind_sysb1_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:58 col:2of5 "Binds"
17:19:58 Top 15 bind :SYS_B_2 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_2'
AND datatype_string = 'VARCHAR2(32)'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_2'
AND datatype_string = 'VARCHAR2(32)'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:58 col:2of5.

17:19:58 col:2of5 "01388_sqld360_323688_0sjx29v99zfqc_2g_93_top_15_bind_sysb2_values_used.html"
17:19:59 col:2of5 "01389_sqld360_323688_0sjx29v99zfqc_2g_93_top_15_bind_sysb2_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:59 col:2of5 "Binds"
17:19:59 Top 15 bind :SYS_B_3 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_3'
AND datatype_string = 'VARCHAR2(32)'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_3'
AND datatype_string = 'VARCHAR2(32)'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:59 col:2of5.

17:19:59 col:2of5 "01390_sqld360_323688_0sjx29v99zfqc_2g_94_top_15_bind_sysb3_values_used.html"
17:19:59 col:2of5 "01391_sqld360_323688_0sjx29v99zfqc_2g_94_top_15_bind_sysb3_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:59 col:2of5 "Binds"
17:19:59 Bind :SYS_B_4 values over time from memory

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
ORDER BY last_captured

17:19:59 col:2of5.

17:19:59 col:2of5 "01392_sqld360_323688_0sjx29v99zfqc_2g_95_bind_sysb4_values_over_time_from_memory.html"
17:19:59 col:2of5 "01393_sqld360_323688_0sjx29v99zfqc_2g_95_bind_sysb4_values_over_time_from_memory_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:59 col:2of5 "Binds"
17:19:59 Bind :SYS_B_4 values over time from history

SELECT /*+ NO_MERGE */ DISTINCT
TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS') last_captured,
value_string,
datatype_string,
'Captured: '||TO_CHAR(last_captured, 'YYYY-MM-DD HH24:MI:SS')||', Value: '||value_string tooltip
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND snap_id BETWEEN 3485 AND 4974
AND last_captured IS NOT NULL
AND 'Y' = 'Y'
ORDER BY last_captured

17:19:59 col:2of5.

17:19:59 col:2of5 "01394_sqld360_323688_0sjx29v99zfqc_2g_96_bind_sysb4_values_over_time_from_history.html"
17:19:59 col:2of5 "01395_sqld360_323688_0sjx29v99zfqc_2g_96_bind_sysb4_values_over_time_from_history_scatter_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:19:59 col:2of5 "Binds"
17:19:59 Top 15 bind :SYS_B_4 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':SYS_B_4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':SYS_B_4'
AND datatype_string = 'NUMBER'
AND sql_id = '0sjx29v99zfqc'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:19:59 col:2of5.

17:20:00 col:2of5 "01396_sqld360_323688_0sjx29v99zfqc_2g_97_top_15_bind_sysb4_values_used.html"
17:20:00 col:2of5 "01397_sqld360_323688_0sjx29v99zfqc_2g_97_top_15_bind_sysb4_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:00 col:2of5 "Binds"
17:20:00 Binds with unstable datatype

SELECT name, position, COUNT(DISTINCT datatype_string) DISTINCT_DATATYPE, MIN(datatype_string) MIN_DATATYPE, MAX(datatype_string) MAX_DATATYPE
  FROM (SELECT name, position, datatype_string
          FROM gv$sql_bind_capture
         WHERE sql_id = '0sjx29v99zfqc'
         UNION
         SELECT name, position, datatype_string
           FROM dba_hist_sqlbind
          WHERE sql_id = '0sjx29v99zfqc'
            AND snap_id BETWEEN 3485 AND 4974
            AND 'Y' = 'Y' )
 GROUP BY name, position
 HAVING COUNT(*) > 1

17:20:00 col:2of5.

17:20:00 col:2of5 "01398_sqld360_323688_0sjx29v99zfqc_2g_98_binds_with_unstable_datatype.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:00 col:2of5 "Cursor Sharing"
17:20:00 Non-sharing reasons summary
SELECT COUNT(*) cursors, inst_id, reason_not_shared FROM gv$sql_shared_cursor UNPIVOT (value FOR reason_not_shared IN
( BIND_LENGTH_UPGRADEABLE
, USE_FEEDBACK_STATS
, UNBOUND_CURSOR
, SQL_TYPE_MISMATCH
, OPTIMIZER_MISMATCH
, OUTLINE_MISMATCH
, STATS_ROW_MISMATCH
, LITERAL_MISMATCH
, FORCE_HARD_PARSE
, EXPLAIN_PLAN_CURSOR
, BUFFERED_DML_MISMATCH
, PDML_ENV_MISMATCH
, INST_DRTLD_MISMATCH
, SLAVE_QC_MISMATCH
, TYPECHECK_MISMATCH
, AUTH_CHECK_MISMATCH
, BIND_MISMATCH
, DESCRIBE_MISMATCH
, LANGUAGE_MISMATCH
, TRANSLATION_MISMATCH
, BIND_EQUIV_FAILURE
, INSUFF_PRIVS
, INSUFF_PRIVS_REM
, REMOTE_TRANS_MISMATCH
, LOGMINER_SESSION_MISMATCH
, INCOMP_LTRL_MISMATCH
, OVERLAP_TIME_MISMATCH
, EDITION_MISMATCH
, MV_QUERY_GEN_MISMATCH
, USER_BIND_PEEK_MISMATCH
, TYPCHK_DEP_MISMATCH
, NO_TRIGGER_MISMATCH
, FLASHBACK_CURSOR
, ANYDATA_TRANSFORMATION
, PDDL_ENV_MISMATCH
, TOP_LEVEL_RPI_CURSOR
, DIFFERENT_LONG_LENGTH
, LOGICAL_STANDBY_APPLY
, DIFF_CALL_DURN
, BIND_UACS_DIFF
, PLSQL_CMP_SWITCHS_DIFF
, CURSOR_PARTS_MISMATCH
, STB_OBJECT_MISMATCH
, CROSSEDITION_TRIGGER_MISMATCH
, PQ_SLAVE_MISMATCH
, TOP_LEVEL_DDL_MISMATCH
, MULTI_PX_MISMATCH
, BIND_PEEKED_PQ_MISMATCH
, MV_REWRITE_MISMATCH
, ROLL_INVALID_MISMATCH
, OPTIMIZER_MODE_MISMATCH
, PX_MISMATCH
, MV_STALEOBJ_MISMATCH
, FLASHBACK_TABLE_MISMATCH
, LITREP_COMP_MISMATCH
, PLSQL_DEBUG
, LOAD_OPTIMIZER_STATS
, ACL_MISMATCH
, FLASHBACK_ARCHIVE_MISMATCH
, LOCK_USER_SCHEMA_FAILED
, REMOTE_MAPPING_MISMATCH
, LOAD_RUNTIME_HEAP_FAILED
, HASH_MATCH_FAILED
, PURGED_CURSOR )) WHERE value = 'Y' AND sql_id = '0sjx29v99zfqc' GROUP BY inst_id,reason_not_shared ORDER BY inst_id, cursors DESC, reason_not_shared

17:20:00 col:2of5.

17:20:00 col:2of5 "01399_sqld360_323688_0sjx29v99zfqc_2h_56_nonsharing_reasons_summary.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:01 col:2of5 "Cursor Sharing"
17:20:01 Non-sharing reasons details

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_shared_cursor
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, child_number

17:20:01 col:2of5.

17:20:01 col:2of5 "01400_sqld360_323688_0sjx29v99zfqc_2h_57_nonsharing_reasons_details.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:01 col:2of5 "Cursor Sharing"
17:20:01 ACS Histogram

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_histogram
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, child_number, bucket_id

17:20:01 col:2of5.

17:20:01 col:2of5 "01401_sqld360_323688_0sjx29v99zfqc_2h_58_acs_histogram.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:01 col:2of5 "Cursor Sharing"
17:20:01 ACS Statistics

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_statistics
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, child_number

17:20:01 col:2of5.

17:20:01 col:2of5 "01402_sqld360_323688_0sjx29v99zfqc_2h_59_acs_statistics.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:01 col:2of5 "Cursor Sharing"
17:20:01 ACS Selectivity

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_selectivity
 WHERE sql_id = '0sjx29v99zfqc'
 ORDER BY inst_id, child_number, range_id, predicate

17:20:01 col:2of5.

17:20:01 col:2of5 "01403_sqld360_323688_0sjx29v99zfqc_2h_60_acs_selectivity.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:01 col:3of5 "Objects"
17:20:01 Tables

SELECT /*+ NO_MERGE */
       *
  FROM dba_tables
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, table_name

17:20:01 col:3of5.

17:20:01 col:3of5 "01404_sqld360_323688_0sjx29v99zfqc_3a_61_tables.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:02 col:3of5 "Objects"
17:20:02 Indexes

SELECT /*+ NO_MERGE */
       *
  FROM dba_indexes
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, index_name

17:20:02 col:3of5.

17:20:02 col:3of5 "01405_sqld360_323688_0sjx29v99zfqc_3a_62_indexes.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:03 col:3of5 "Objects"
17:20:03 Index Columns

SELECT /*+ NO_MERGE */
       *
  FROM dba_ind_columns
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, index_name, column_position

17:20:03 col:3of5.

17:20:03 col:3of5 "01406_sqld360_323688_0sjx29v99zfqc_3a_63_index_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:03 col:3of5 "Objects"
17:20:03 Columns

SELECT /*+ NO_MERGE */
       a.*
      ,CASE WHEN data_type = 'NUMBER' THEN TO_CHAR(utl_raw.cast_TO_NUMBER(low_value))
        WHEN data_type IN ('VARCHAR2', 'CHAR') THEN SUBSTR(to_char(utl_raw.cast_to_varchar2(low_value)),1,32)
        WHEN data_type IN ('NVARCHAR2','NCHAR') THEN SUBSTR(to_char(utl_raw.cast_to_nvarchar2(low_value)),1,32)
        WHEN data_type = 'BINARY_DOUBLE' THEN TO_CHAR(utl_raw.cast_to_binary_double(low_value))
        WHEN data_type = 'BINARY_FLOAT' THEN TO_CHAR(utl_raw.cast_to_binary_float(low_value))
        WHEN data_type = 'DATE' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(low_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(low_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,13,2),'XX')-1,'00')))
        WHEN data_type LIKE 'TIMESTAMP%' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(low_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(low_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,13,2),'XX')-1,'00'))||'.'||
                    TO_NUMBER(SUBSTR(low_value,15,8),'XXXXXXXX'))
       END low_value_translated,
       CASE WHEN data_type = 'NUMBER' THEN TO_CHAR(utl_raw.cast_TO_NUMBER(high_value))
        WHEN data_type IN ('VARCHAR2', 'CHAR') THEN SUBSTR(to_char(utl_raw.cast_to_varchar2(high_value)),1,32)
        WHEN data_type IN ('NVARCHAR2','NCHAR') THEN SUBSTR(to_char(utl_raw.cast_to_nvarchar2(high_value)),1,32)
        WHEN data_type = 'BINARY_DOUBLE' THEN TO_CHAR(utl_raw.cast_to_binary_double(high_value))
        WHEN data_type = 'BINARY_FLOAT' THEN TO_CHAR(utl_raw.cast_to_binary_float(high_value))
        WHEN data_type = 'DATE' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(high_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(high_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,13,2),'XX')-1,'00')))
        WHEN data_type LIKE 'TIMESTAMP%' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(high_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(high_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,13,2),'XX')-1,'00'))||'.'||
                    TO_NUMBER(SUBSTR(high_value,15,8),'XXXXXXXX'))
        END high_value_translated
  FROM dba_tab_cols a,
       dba_tables c  -- this is to filter out views
 WHERE (a.owner, a.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND a.owner = c.owner
   AND a.table_name = c.table_name
 ORDER BY a.owner, a.table_name, a.column_id

17:20:03 col:3of5.

17:20:03 col:3of5 "01407_sqld360_323688_0sjx29v99zfqc_3a_64_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:06 col:3of5 "Objects"
17:20:06 Columns Usage

SELECT o.object_name, c.column_name, cu.*
  FROM sys.col_usage$ cu,
       dba_objects o,
       dba_tab_cols c
 WHERE cu.obj# = o.object_id
   AND o.owner = c.owner
   AND o.object_name = c.table_name
   AND cu.intcol# = c.column_id
   AND o.object_type = 'TABLE'
   AND (o.owner, o.object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY o.object_name, cu.intcol#

17:20:06 col:3of5.

17:20:06 col:3of5 "01408_sqld360_323688_0sjx29v99zfqc_3a_65_columns_usage.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:08 col:3of5 "Objects"
17:20:08 Column Stats Extensions

SELECT *
  FROM dba_stat_extensions
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, table_name

17:20:08 col:3of5.

17:20:08 col:3of5 "01409_sqld360_323688_0sjx29v99zfqc_3a_66_column_stats_extensions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:09 col:3of5 "Objects"
17:20:09 Histograms

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:10 col:3of5 "Objects"
17:20:10 Frequency histogram on Column T_BENSPKG.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 * 71257) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 * 71257)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:10 col:3of5.

17:20:10 col:3of5 "01411_sqld360_323688_0sjx29v99zfqc_3a_67_frequency_histogram_on_column_tbenspkgclasstype.html"
17:20:10 col:3of5 "01412_sqld360_323688_0sjx29v99zfqc_3a_67_frequency_histogram_on_column_tbenspkgclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:10 col:3of5 "Objects"
17:20:10 Frequency histogram on Column T_BENSPKG.BENP_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 * 71257) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 * 71257)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 71257 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'BENP_OBJ_STT'
ORDER BY a.endpoint_number

17:20:10 col:3of5.

17:20:10 col:3of5 "01413_sqld360_323688_0sjx29v99zfqc_3a_68_frequency_histogram_on_column_tbenspkgbenpobjstt.html"
17:20:10 col:3of5 "01414_sqld360_323688_0sjx29v99zfqc_3a_68_frequency_histogram_on_column_tbenspkgbenpobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:10 col:3of5 "Objects"
17:20:10 Height Balanced histogram on Column T_BENSPKG.BENP_UNIVID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 67687) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 67687)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'BENP_UNIVID'
ORDER BY a.endpoint_number

17:20:10 col:3of5.

17:20:10 col:3of5 "01415_sqld360_323688_0sjx29v99zfqc_3a_69_height_balanced_histogram_on_column_tbenspkgbenpunivid.html"
17:20:11 col:3of5 "01416_sqld360_323688_0sjx29v99zfqc_3a_69_height_balanced_histogram_on_column_tbenspkgbenpunivid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:11 col:3of5 "Objects"
17:20:11 Height Balanced histogram on Column T_BENSPKG.BENP_NAM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'BENP_NAM'
ORDER BY a.endpoint_number

17:20:11 col:3of5.

17:20:11 col:3of5 "01417_sqld360_323688_0sjx29v99zfqc_3a_70_height_balanced_histogram_on_column_tbenspkgbenpnam.html"
17:20:11 col:3of5 "01418_sqld360_323688_0sjx29v99zfqc_3a_70_height_balanced_histogram_on_column_tbenspkgbenpnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:11 col:3of5 "Objects"
17:20:11 Height Balanced histogram on Column T_BENSPKG.BENP_DSCN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'BENP_DSCN'
ORDER BY a.endpoint_number

17:20:11 col:3of5.

17:20:11 col:3of5 "01419_sqld360_323688_0sjx29v99zfqc_3a_71_height_balanced_histogram_on_column_tbenspkgbenpdscn.html"
17:20:11 col:3of5 "01420_sqld360_323688_0sjx29v99zfqc_3a_71_height_balanced_histogram_on_column_tbenspkgbenpdscn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:11 col:3of5 "Objects"
17:20:11 Height Balanced histogram on Column T_BENSPKG.(UPPER("BENP_NAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 71257)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_BENSPKG'
AND a.column_name = 'SYS_NC00027$'
ORDER BY a.endpoint_number

17:20:11 col:3of5.

17:20:11 col:3of5 "01421_sqld360_323688_0sjx29v99zfqc_3a_72_height_balanced_histogram_on_column_tbenspkgupperbenpnam.html"
17:20:11 col:3of5 "01422_sqld360_323688_0sjx29v99zfqc_3a_72_height_balanced_histogram_on_column_tbenspkgupperbenpnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:12 col:3of5 "Objects"
17:20:12 Frequency histogram on Column T_CM_BASEBASE.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:12 col:3of5.

17:20:12 col:3of5 "01423_sqld360_323688_0sjx29v99zfqc_3a_73_frequency_histogram_on_column_tcmbasebaseclasstype.html"
17:20:12 col:3of5 "01424_sqld360_323688_0sjx29v99zfqc_3a_73_frequency_histogram_on_column_tcmbasebaseclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:12 col:3of5 "Objects"
17:20:12 Height Balanced histogram on Column T_CM_BASEBASE.CMBB_CRTD

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_CRTD'
ORDER BY a.endpoint_number

17:20:12 col:3of5.

17:20:12 col:3of5 "01425_sqld360_323688_0sjx29v99zfqc_3a_74_height_balanced_histogram_on_column_tcmbasebasecmbbcrtd.html"
17:20:12 col:3of5 "01426_sqld360_323688_0sjx29v99zfqc_3a_74_height_balanced_histogram_on_column_tcmbasebasecmbbcrtd_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:12 col:3of5 "Objects"
17:20:12 Frequency histogram on Column T_CM_BASEBASE.CMBB_LAS_ACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_LAS_ACT'
ORDER BY a.endpoint_number

17:20:12 col:3of5.

17:20:12 col:3of5 "01427_sqld360_323688_0sjx29v99zfqc_3a_75_frequency_histogram_on_column_tcmbasebasecmbblasact.html"
17:20:12 col:3of5 "01428_sqld360_323688_0sjx29v99zfqc_3a_75_frequency_histogram_on_column_tcmbasebasecmbblasact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:12 col:3of5 "Objects"
17:20:12 Height Balanced histogram on Column T_CM_BASEBASE.CMBB_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:12 col:3of5.

17:20:12 col:3of5 "01429_sqld360_323688_0sjx29v99zfqc_3a_76_height_balanced_histogram_on_column_tcmbasebasecmbblasacttim.html"
17:20:13 col:3of5 "01430_sqld360_323688_0sjx29v99zfqc_3a_76_height_balanced_histogram_on_column_tcmbasebasecmbblasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:13 col:3of5 "Objects"
17:20:13 Frequency histogram on Column T_CM_BASEBASE.CMBB_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_OBJ_STT'
ORDER BY a.endpoint_number

17:20:13 col:3of5.

17:20:13 col:3of5 "01431_sqld360_323688_0sjx29v99zfqc_3a_77_frequency_histogram_on_column_tcmbasebasecmbbobjstt.html"
17:20:13 col:3of5 "01432_sqld360_323688_0sjx29v99zfqc_3a_77_frequency_histogram_on_column_tcmbasebasecmbbobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:13 col:3of5 "Objects"
17:20:13 Frequency histogram on Column T_CM_BASEBASE.CMBB_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:20:13 col:3of5.

17:20:13 col:3of5 "01433_sqld360_323688_0sjx29v99zfqc_3a_78_frequency_histogram_on_column_tcmbasebasecmbblasactby.html"
17:20:13 col:3of5 "01434_sqld360_323688_0sjx29v99zfqc_3a_78_frequency_histogram_on_column_tcmbasebasecmbblasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:13 col:3of5 "Objects"
17:20:13 Frequency histogram on Column T_CM_BASEBASE.CMBB_ORIGCRTR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 425035 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_ORIGCRTR'
ORDER BY a.endpoint_number

17:20:13 col:3of5.

17:20:13 col:3of5 "01435_sqld360_323688_0sjx29v99zfqc_3a_79_frequency_histogram_on_column_tcmbasebasecmbborigcrtr.html"
17:20:13 col:3of5 "01436_sqld360_323688_0sjx29v99zfqc_3a_79_frequency_histogram_on_column_tcmbasebasecmbborigcrtr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:14 col:3of5 "Objects"
17:20:14 Frequency histogram on Column T_CM_BASEBASE.CSRQ_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44416 * 44416) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44416,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44416 * 44416)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44416 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CSRQ_OWNR'
ORDER BY a.endpoint_number

17:20:14 col:3of5.

17:20:14 col:3of5 "01437_sqld360_323688_0sjx29v99zfqc_3a_80_frequency_histogram_on_column_tcmbasebasecsrqownr.html"
17:20:14 col:3of5 "01438_sqld360_323688_0sjx29v99zfqc_3a_80_frequency_histogram_on_column_tcmbasebasecsrqownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:14 col:3of5 "Objects"
17:20:14 Frequency histogram on Column T_CM_BASEBASE.CASE_CLSRRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 232376 * 232376) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 232376,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 232376 * 232376)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 232376 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CASE_CLSRRESN'
ORDER BY a.endpoint_number

17:20:14 col:3of5.

17:20:14 col:3of5 "01439_sqld360_323688_0sjx29v99zfqc_3a_81_frequency_histogram_on_column_tcmbasebasecaseclsrresn.html"
17:20:14 col:3of5 "01440_sqld360_323688_0sjx29v99zfqc_3a_81_frequency_histogram_on_column_tcmbasebasecaseclsrresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:14 col:3of5 "Objects"
17:20:14 Frequency histogram on Column T_CM_BASEBASE.CASE_PRJ_OTCM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 33273 * 33273) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 33273,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 33273 * 33273)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 33273 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CASE_PRJ_OTCM'
ORDER BY a.endpoint_number

17:20:14 col:3of5.

17:20:14 col:3of5 "01441_sqld360_323688_0sjx29v99zfqc_3a_82_frequency_histogram_on_column_tcmbasebasecaseprjotcm.html"
17:20:14 col:3of5 "01442_sqld360_323688_0sjx29v99zfqc_3a_82_frequency_histogram_on_column_tcmbasebasecaseprjotcm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:14 col:3of5 "Objects"
17:20:14 Frequency histogram on Column T_CM_BASEBASE.CASE_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 130145 * 130145) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 130145,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 130145 * 130145)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 130145 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CASE_OWNR'
ORDER BY a.endpoint_number

17:20:14 col:3of5.

17:20:15 col:3of5 "01443_sqld360_323688_0sjx29v99zfqc_3a_83_frequency_histogram_on_column_tcmbasebasecaseownr.html"
17:20:15 col:3of5 "01444_sqld360_323688_0sjx29v99zfqc_3a_83_frequency_histogram_on_column_tcmbasebasecaseownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:15 col:3of5 "Objects"
17:20:15 Frequency histogram on Column T_CM_BASEBASE.CASE_PRVSOWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 80761 * 80761) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 80761,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 80761 * 80761)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 80761 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CASE_PRVSOWNR'
ORDER BY a.endpoint_number

17:20:15 col:3of5.

17:20:15 col:3of5 "01445_sqld360_323688_0sjx29v99zfqc_3a_84_frequency_histogram_on_column_tcmbasebasecaseprvsownr.html"
17:20:15 col:3of5 "01446_sqld360_323688_0sjx29v99zfqc_3a_84_frequency_histogram_on_column_tcmbasebasecaseprvsownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:15 col:3of5 "Objects"
17:20:15 Frequency histogram on Column T_CM_BASEBASE.CASE_REONRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 520 * 520) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 520,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 520 * 520)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 520 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CASE_REONRESN'
ORDER BY a.endpoint_number

17:20:15 col:3of5.

17:20:15 col:3of5 "01447_sqld360_323688_0sjx29v99zfqc_3a_85_frequency_histogram_on_column_tcmbasebasecasereonresn.html"
17:20:15 col:3of5 "01448_sqld360_323688_0sjx29v99zfqc_3a_85_frequency_histogram_on_column_tcmbasebasecasereonresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:15 col:3of5 "Objects"
17:20:15 Frequency histogram on Column T_CM_BASEBASE.CMPQ_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 18 * 18) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 18,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 18 * 18)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 18 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMPQ_OWNR'
ORDER BY a.endpoint_number

17:20:15 col:3of5.

17:20:15 col:3of5 "01449_sqld360_323688_0sjx29v99zfqc_3a_86_frequency_histogram_on_column_tcmbasebasecmpqownr.html"
17:20:16 col:3of5 "01450_sqld360_323688_0sjx29v99zfqc_3a_86_frequency_histogram_on_column_tcmbasebasecmpqownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:16 col:3of5 "Objects"
17:20:16 Frequency histogram on Column T_CM_BASEBASE.CMPR_CLSRRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 838 * 838) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 838,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 838 * 838)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 838 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMPR_CLSRRESN'
ORDER BY a.endpoint_number

17:20:16 col:3of5.

17:20:16 col:3of5 "01451_sqld360_323688_0sjx29v99zfqc_3a_87_frequency_histogram_on_column_tcmbasebasecmprclsrresn.html"
17:20:16 col:3of5 "01452_sqld360_323688_0sjx29v99zfqc_3a_87_frequency_histogram_on_column_tcmbasebasecmprclsrresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:16 col:3of5 "Objects"
17:20:16 Frequency histogram on Column T_CM_BASEBASE.CMPR_PRJ_OTCM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMPR_PRJ_OTCM'
ORDER BY a.endpoint_number

17:20:16 col:3of5.

17:20:16 col:3of5 "01453_sqld360_323688_0sjx29v99zfqc_3a_88_frequency_histogram_on_column_tcmbasebasecmprprjotcm.html"
17:20:16 col:3of5 "01454_sqld360_323688_0sjx29v99zfqc_3a_88_frequency_histogram_on_column_tcmbasebasecmprprjotcm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:16 col:3of5 "Objects"
17:20:16 Frequency histogram on Column T_CM_BASEBASE.CMPR_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250452 * 250452) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250452,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250452 * 250452)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250452 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMPR_OWNR'
ORDER BY a.endpoint_number

17:20:16 col:3of5.

17:20:16 col:3of5 "01455_sqld360_323688_0sjx29v99zfqc_3a_89_frequency_histogram_on_column_tcmbasebasecmprownr.html"
17:20:16 col:3of5 "01456_sqld360_323688_0sjx29v99zfqc_3a_89_frequency_histogram_on_column_tcmbasebasecmprownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:17 col:3of5 "Objects"
17:20:17 Frequency histogram on Column T_CM_BASEBASE.CMBB_SRC

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 169598 * 169598) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 169598,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 169598 * 169598)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 169598 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_SRC'
ORDER BY a.endpoint_number

17:20:17 col:3of5.

17:20:17 col:3of5 "01457_sqld360_323688_0sjx29v99zfqc_3a_90_frequency_histogram_on_column_tcmbasebasecmbbsrc.html"
17:20:17 col:3of5 "01458_sqld360_323688_0sjx29v99zfqc_3a_90_frequency_histogram_on_column_tcmbasebasecmbbsrc_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:17 col:3of5 "Objects"
17:20:17 Frequency histogram on Column T_CM_BASEBASE.CMBB_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 414074 * 414074) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 414074,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 414074 * 414074)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 414074 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_TYP'
ORDER BY a.endpoint_number

17:20:17 col:3of5.

17:20:17 col:3of5 "01459_sqld360_323688_0sjx29v99zfqc_3a_91_frequency_histogram_on_column_tcmbasebasecmbbtyp.html"
17:20:17 col:3of5 "01460_sqld360_323688_0sjx29v99zfqc_3a_91_frequency_histogram_on_column_tcmbasebasecmbbtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:17 col:3of5 "Objects"
17:20:17 Frequency histogram on Column T_CM_BASEBASE.CMBB_RESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 412742 * 412742) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 412742,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 412742 * 412742)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 412742 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_RESN'
ORDER BY a.endpoint_number

17:20:17 col:3of5.

17:20:17 col:3of5 "01461_sqld360_323688_0sjx29v99zfqc_3a_92_frequency_histogram_on_column_tcmbasebasecmbbresn.html"
17:20:17 col:3of5 "01462_sqld360_323688_0sjx29v99zfqc_3a_92_frequency_histogram_on_column_tcmbasebasecmbbresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:17 col:3of5 "Objects"
17:20:17 Frequency histogram on Column T_CM_BASEBASE.CMBB_PITY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 353002 * 353002) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 353002,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 353002 * 353002)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 353002 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_PITY'
ORDER BY a.endpoint_number

17:20:17 col:3of5.

17:20:18 col:3of5 "01463_sqld360_323688_0sjx29v99zfqc_3a_93_frequency_histogram_on_column_tcmbasebasecmbbpity.html"
17:20:18 col:3of5 "01464_sqld360_323688_0sjx29v99zfqc_3a_93_frequency_histogram_on_column_tcmbasebasecmbbpity_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:18 col:3of5 "Objects"
17:20:18 Frequency histogram on Column T_CM_BASEBASE.CMBB_SVTY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 377918 * 377918) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 377918,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 377918 * 377918)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 377918 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBB_SVTY'
ORDER BY a.endpoint_number

17:20:18 col:3of5.

17:20:18 col:3of5 "01465_sqld360_323688_0sjx29v99zfqc_3a_94_frequency_histogram_on_column_tcmbasebasecmbbsvty.html"
17:20:18 col:3of5 "01466_sqld360_323688_0sjx29v99zfqc_3a_94_frequency_histogram_on_column_tcmbasebasecmbbsvty_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:18 col:3of5 "Objects"
17:20:18 Height Balanced histogram on Column T_CM_BASEBASE.CMBS_MEMB

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'CMBS_MEMB'
ORDER BY a.endpoint_number

17:20:18 col:3of5.

17:20:18 col:3of5 "01467_sqld360_323688_0sjx29v99zfqc_3a_95_height_balanced_histogram_on_column_tcmbasebasecmbsmemb.html"
17:20:18 col:3of5 "01468_sqld360_323688_0sjx29v99zfqc_3a_95_height_balanced_histogram_on_column_tcmbasebasecmbsmemb_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:18 col:3of5 "Objects"
17:20:18 Frequency histogram on Column T_CM_BASEBASE.PARTICIPATION

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 41351 * 41351) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 41351,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 41351 * 41351)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 41351 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'PARTICIPATION'
ORDER BY a.endpoint_number

17:20:18 col:3of5.

17:20:18 col:3of5 "01469_sqld360_323688_0sjx29v99zfqc_3a_96_frequency_histogram_on_column_tcmbasebaseparticipation.html"
17:20:19 col:3of5 "01470_sqld360_323688_0sjx29v99zfqc_3a_96_frequency_histogram_on_column_tcmbasebaseparticipation_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:19 col:3of5 "Objects"
17:20:19 Frequency histogram on Column T_CM_BASEBASE.REQUESTOR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44160 * 44160) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44160,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44160 * 44160)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44160 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'REQUESTOR'
ORDER BY a.endpoint_number

17:20:19 col:3of5.

17:20:19 col:3of5 "01471_sqld360_323688_0sjx29v99zfqc_3a_97_frequency_histogram_on_column_tcmbasebaserequestor.html"
17:20:19 col:3of5 "01472_sqld360_323688_0sjx29v99zfqc_3a_97_frequency_histogram_on_column_tcmbasebaserequestor_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:19 col:3of5 "Objects"
17:20:19 Frequency histogram on Column T_CM_BASEBASE.STAGE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 47916 * 47916) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 47916,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 47916 * 47916)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 47916 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'STAGE'
ORDER BY a.endpoint_number

17:20:19 col:3of5.

17:20:19 col:3of5 "01473_sqld360_323688_0sjx29v99zfqc_3a_98_frequency_histogram_on_column_tcmbasebasestage.html"
17:20:19 col:3of5 "01474_sqld360_323688_0sjx29v99zfqc_3a_98_frequency_histogram_on_column_tcmbasebasestage_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:19 col:3of5 "Objects"
17:20:19 Frequency histogram on Column T_CM_BASEBASE.TGT_INTERVENTION

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44298 * 44298) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44298,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44298 * 44298)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 44298 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'TGT_INTERVENTION'
ORDER BY a.endpoint_number

17:20:19 col:3of5.

17:20:19 col:3of5 "01475_sqld360_323688_0sjx29v99zfqc_3a_99_frequency_histogram_on_column_tcmbasebasetgtintervention.html"
17:20:19 col:3of5 "01476_sqld360_323688_0sjx29v99zfqc_3a_99_frequency_histogram_on_column_tcmbasebasetgtintervention_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:20 col:3of5 "Objects"
17:20:20 Frequency histogram on Column T_CM_BASEBASE.PARTICIPATIONSTATUS

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 43590 * 43590) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 43590,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 43590 * 43590)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 43590 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'PARTICIPATIONSTATUS'
ORDER BY a.endpoint_number

17:20:20 col:3of5.

17:20:20 col:3of5 "01477_sqld360_323688_0sjx29v99zfqc_3a_100_frequency_histogram_on_column_tcmbasebaseparticipationstatus.html"
17:20:20 col:3of5 "01478_sqld360_323688_0sjx29v99zfqc_3a_100_frequency_histogram_on_column_tcmbasebaseparticipationstatus_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:20 col:3of5 "Objects"
17:20:20 Height Balanced histogram on Column T_CM_BASEBASE.(UPPER("CMBB_C4C_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 425035)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_CM_BASEBASE'
AND a.column_name = 'SYS_NC00176$'
ORDER BY a.endpoint_number

17:20:20 col:3of5.

17:20:20 col:3of5 "01479_sqld360_323688_0sjx29v99zfqc_3a_101_height_balanced_histogram_on_column_tcmbasebaseuppercmbbc4cid.html"
17:20:20 col:3of5 "01480_sqld360_323688_0sjx29v99zfqc_3a_101_height_balanced_histogram_on_column_tcmbasebaseuppercmbbc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:20 col:3of5 "Objects"
17:20:20 Frequency histogram on Column T_DDL_ITEM.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:20 col:3of5.

17:20:20 col:3of5 "01481_sqld360_323688_0sjx29v99zfqc_3a_102_frequency_histogram_on_column_tddlitemclasstype.html"
17:20:20 col:3of5 "01482_sqld360_323688_0sjx29v99zfqc_3a_102_frequency_histogram_on_column_tddlitemclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:20 col:3of5 "Objects"
17:20:20 Height Balanced histogram on Column T_DDL_ITEM.DDLI_CRTD

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10192) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10192)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_CRTD'
ORDER BY a.endpoint_number

17:20:20 col:3of5.

17:20:20 col:3of5 "01483_sqld360_323688_0sjx29v99zfqc_3a_103_height_balanced_histogram_on_column_tddlitemddlicrtd.html"
17:20:21 col:3of5 "01484_sqld360_323688_0sjx29v99zfqc_3a_103_height_balanced_histogram_on_column_tddlitemddlicrtd_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:21 col:3of5 "Objects"
17:20:21 Height Balanced histogram on Column T_DDL_ITEM.DDLI_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10229) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10229)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:21 col:3of5.

17:20:21 col:3of5 "01485_sqld360_323688_0sjx29v99zfqc_3a_104_height_balanced_histogram_on_column_tddlitemddlilasacttim.html"
17:20:21 col:3of5 "01486_sqld360_323688_0sjx29v99zfqc_3a_104_height_balanced_histogram_on_column_tddlitemddlilasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:21 col:3of5 "Objects"
17:20:21 Frequency histogram on Column T_DDL_ITEM.DDLI_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_OBJ_STT'
ORDER BY a.endpoint_number

17:20:21 col:3of5.

17:20:21 col:3of5 "01487_sqld360_323688_0sjx29v99zfqc_3a_105_frequency_histogram_on_column_tddlitemddliobjstt.html"
17:20:21 col:3of5 "01488_sqld360_323688_0sjx29v99zfqc_3a_105_frequency_histogram_on_column_tddlitemddliobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:21 col:3of5 "Objects"
17:20:21 Frequency histogram on Column T_DDL_ITEM.DDLI_VSBT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_VSBT'
ORDER BY a.endpoint_number

17:20:21 col:3of5.

17:20:21 col:3of5 "01489_sqld360_323688_0sjx29v99zfqc_3a_106_frequency_histogram_on_column_tddlitemddlivsbt.html"
17:20:21 col:3of5 "01490_sqld360_323688_0sjx29v99zfqc_3a_106_frequency_histogram_on_column_tddlitemddlivsbt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:21 col:3of5 "Objects"
17:20:21 Height Balanced histogram on Column T_DDL_ITEM.DDLI_UNIVID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_UNIVID'
ORDER BY a.endpoint_number

17:20:21 col:3of5.

17:20:21 col:3of5 "01491_sqld360_323688_0sjx29v99zfqc_3a_107_height_balanced_histogram_on_column_tddlitemddliunivid.html"
17:20:22 col:3of5 "01492_sqld360_323688_0sjx29v99zfqc_3a_107_height_balanced_histogram_on_column_tddlitemddliunivid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:22 col:3of5 "Objects"
17:20:22 Height Balanced histogram on Column T_DDL_ITEM.DDLI_LBL

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_LBL'
ORDER BY a.endpoint_number

17:20:22 col:3of5.

17:20:22 col:3of5 "01493_sqld360_323688_0sjx29v99zfqc_3a_108_height_balanced_histogram_on_column_tddlitemddlilbl.html"
17:20:22 col:3of5 "01494_sqld360_323688_0sjx29v99zfqc_3a_108_height_balanced_histogram_on_column_tddlitemddlilbl_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:22 col:3of5 "Objects"
17:20:22 Height Balanced histogram on Column T_DDL_ITEM.DDLI_VAL

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_VAL'
ORDER BY a.endpoint_number

17:20:22 col:3of5.

17:20:22 col:3of5 "01495_sqld360_323688_0sjx29v99zfqc_3a_109_height_balanced_histogram_on_column_tddlitemddlival.html"
17:20:22 col:3of5 "01496_sqld360_323688_0sjx29v99zfqc_3a_109_height_balanced_histogram_on_column_tddlitemddlival_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:22 col:3of5 "Objects"
17:20:22 Frequency histogram on Column T_DDL_ITEM.DDLI_SYTM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10172 * 10172) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10172,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10172 * 10172)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10172 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_SYTM'
ORDER BY a.endpoint_number

17:20:22 col:3of5.

17:20:22 col:3of5 "01497_sqld360_323688_0sjx29v99zfqc_3a_110_frequency_histogram_on_column_tddlitemddlisytm.html"
17:20:22 col:3of5 "01498_sqld360_323688_0sjx29v99zfqc_3a_110_frequency_histogram_on_column_tddlitemddlisytm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:22 col:3of5 "Objects"
17:20:22 Height Balanced histogram on Column T_DDL_ITEM.DDLI_DDL_ITEMCONSID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 3398) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 3398)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_DDL_ITEMCONSID'
ORDER BY a.endpoint_number

17:20:22 col:3of5.

17:20:23 col:3of5 "01499_sqld360_323688_0sjx29v99zfqc_3a_111_height_balanced_histogram_on_column_tddlitemddliddlitemconsid.html"
17:20:23 col:3of5 "01500_sqld360_323688_0sjx29v99zfqc_3a_111_height_balanced_histogram_on_column_tddlitemddliddlitemconsid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:23 col:3of5 "Objects"
17:20:23 Height Balanced histogram on Column T_DDL_ITEM.DDLI_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_ID'
ORDER BY a.endpoint_number

17:20:23 col:3of5.

17:20:23 col:3of5 "01501_sqld360_323688_0sjx29v99zfqc_3a_112_height_balanced_histogram_on_column_tddlitemddliid.html"
17:20:23 col:3of5 "01502_sqld360_323688_0sjx29v99zfqc_3a_112_height_balanced_histogram_on_column_tddlitemddliid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:23 col:3of5 "Objects"
17:20:23 Frequency histogram on Column T_DDL_ITEM.TSKT_RCPTTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 217 * 217) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 217,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 217 * 217)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 217 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'TSKT_RCPTTYP'
ORDER BY a.endpoint_number

17:20:23 col:3of5.

17:20:23 col:3of5 "01503_sqld360_323688_0sjx29v99zfqc_3a_113_frequency_histogram_on_column_tddlitemtsktrcpttyp.html"
17:20:23 col:3of5 "01504_sqld360_323688_0sjx29v99zfqc_3a_113_frequency_histogram_on_column_tddlitemtsktrcpttyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:23 col:3of5 "Objects"
17:20:23 Height Balanced histogram on Column T_DDL_ITEM.DDLI_PRNT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 2301) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 2301)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_PRNT'
ORDER BY a.endpoint_number

17:20:23 col:3of5.

17:20:23 col:3of5 "01505_sqld360_323688_0sjx29v99zfqc_3a_114_height_balanced_histogram_on_column_tddlitemddliprnt.html"
17:20:23 col:3of5 "01506_sqld360_323688_0sjx29v99zfqc_3a_114_height_balanced_histogram_on_column_tddlitemddliprnt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:23 col:3of5 "Objects"
17:20:23 Height Balanced histogram on Column T_DDL_ITEM.DDLI_DDL

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7763)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'DDLI_DDL'
ORDER BY a.endpoint_number

17:20:23 col:3of5.

17:20:24 col:3of5 "01507_sqld360_323688_0sjx29v99zfqc_3a_115_height_balanced_histogram_on_column_tddlitemddliddl.html"
17:20:24 col:3of5 "01508_sqld360_323688_0sjx29v99zfqc_3a_115_height_balanced_histogram_on_column_tddlitemddliddl_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:24 col:3of5 "Objects"
17:20:24 Frequency histogram on Column T_DDL_ITEM.("CLASSTYPE","DDLI_OBJ_STT")

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 * 10372)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10372 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_DDL_ITEM'
AND a.column_name = 'SYS_STS7_DOW3Y4SQ96_QSG9DVBTHW'
ORDER BY a.endpoint_number

17:20:24 col:3of5.

17:20:24 col:3of5 "01509_sqld360_323688_0sjx29v99zfqc_3a_116_frequency_histogram_on_column_tddlitemclasstypeddliobjstt.html"
17:20:24 col:3of5 "01510_sqld360_323688_0sjx29v99zfqc_3a_116_frequency_histogram_on_column_tddlitemclasstypeddliobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:24 col:3of5 "Objects"
17:20:24 Frequency histogram on Column T_ENNS.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 * 14686026) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 * 14686026)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:24 col:3of5.

17:20:24 col:3of5 "01511_sqld360_323688_0sjx29v99zfqc_3a_117_frequency_histogram_on_column_tennsclasstype.html"
17:20:24 col:3of5 "01512_sqld360_323688_0sjx29v99zfqc_3a_117_frequency_histogram_on_column_tennsclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:24 col:3of5 "Objects"
17:20:24 Height Balanced histogram on Column T_ENNS.ELNS_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:24 col:3of5.

17:20:24 col:3of5 "01513_sqld360_323688_0sjx29v99zfqc_3a_118_height_balanced_histogram_on_column_tennselnslasacttim.html"
17:20:24 col:3of5 "01514_sqld360_323688_0sjx29v99zfqc_3a_118_height_balanced_histogram_on_column_tennselnslasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:24 col:3of5 "Objects"
17:20:24 Frequency histogram on Column T_ENNS.ELNS_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 * 14686026) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 * 14686026)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 14686026 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_OBJ_STT'
ORDER BY a.endpoint_number

17:20:24 col:3of5.

17:20:24 col:3of5 "01515_sqld360_323688_0sjx29v99zfqc_3a_119_frequency_histogram_on_column_tennselnsobjstt.html"
17:20:25 col:3of5 "01516_sqld360_323688_0sjx29v99zfqc_3a_119_frequency_histogram_on_column_tennselnsobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:25 col:3of5 "Objects"
17:20:25 Height Balanced histogram on Column T_ENNS.ELNS_UNIVID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_UNIVID'
ORDER BY a.endpoint_number

17:20:25 col:3of5.

17:20:25 col:3of5 "01517_sqld360_323688_0sjx29v99zfqc_3a_120_height_balanced_histogram_on_column_tennselnsunivid.html"
17:20:25 col:3of5 "01518_sqld360_323688_0sjx29v99zfqc_3a_120_height_balanced_histogram_on_column_tennselnsunivid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:25 col:3of5 "Objects"
17:20:25 Height Balanced histogram on Column T_ENNS.ELNS_ENLTDT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_ENLTDT'
ORDER BY a.endpoint_number

17:20:25 col:3of5.

17:20:25 col:3of5 "01519_sqld360_323688_0sjx29v99zfqc_3a_121_height_balanced_histogram_on_column_tennselnsenltdt.html"
17:20:25 col:3of5 "01520_sqld360_323688_0sjx29v99zfqc_3a_121_height_balanced_histogram_on_column_tennselnsenltdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:25 col:3of5 "Objects"
17:20:25 Height Balanced histogram on Column T_ENNS.ELNS_EFTVDT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_EFTVDT'
ORDER BY a.endpoint_number

17:20:25 col:3of5.

17:20:25 col:3of5 "01521_sqld360_323688_0sjx29v99zfqc_3a_122_height_balanced_histogram_on_column_tennselnseftvdt.html"
17:20:25 col:3of5 "01522_sqld360_323688_0sjx29v99zfqc_3a_122_height_balanced_histogram_on_column_tennselnseftvdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:26 col:3of5 "Objects"
17:20:26 Height Balanced histogram on Column T_ENNS.ELNS_DSNTDT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 12939444) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 12939444)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_DSNTDT'
ORDER BY a.endpoint_number

17:20:26 col:3of5.

17:20:26 col:3of5 "01523_sqld360_323688_0sjx29v99zfqc_3a_123_height_balanced_histogram_on_column_tennselnsdsntdt.html"
17:20:26 col:3of5 "01524_sqld360_323688_0sjx29v99zfqc_3a_123_height_balanced_histogram_on_column_tennselnsdsntdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:26 col:3of5 "Objects"
17:20:26 Height Balanced histogram on Column T_ENNS.ELNS_TERMDT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 12977424) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 12977424)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_TERMDT'
ORDER BY a.endpoint_number

17:20:26 col:3of5.

17:20:26 col:3of5 "01525_sqld360_323688_0sjx29v99zfqc_3a_124_height_balanced_histogram_on_column_tennselnstermdt.html"
17:20:26 col:3of5 "01526_sqld360_323688_0sjx29v99zfqc_3a_124_height_balanced_histogram_on_column_tennselnstermdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:26 col:3of5 "Objects"
17:20:26 Height Balanced histogram on Column T_ENNS.ELNS_BENSPKG

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14634256) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14634256)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_BENSPKG'
ORDER BY a.endpoint_number

17:20:26 col:3of5.

17:20:26 col:3of5 "01527_sqld360_323688_0sjx29v99zfqc_3a_125_height_balanced_histogram_on_column_tennselnsbenspkg.html"
17:20:26 col:3of5 "01528_sqld360_323688_0sjx29v99zfqc_3a_125_height_balanced_histogram_on_column_tennselnsbenspkg_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:26 col:3of5 "Objects"
17:20:26 Height Balanced histogram on Column T_ENNS.ELNS_INSCPRSRGRP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_INSCPRSRGRP'
ORDER BY a.endpoint_number

17:20:26 col:3of5.

17:20:26 col:3of5 "01529_sqld360_323688_0sjx29v99zfqc_3a_126_height_balanced_histogram_on_column_tennselnsinscprsrgrp.html"
17:20:26 col:3of5 "01530_sqld360_323688_0sjx29v99zfqc_3a_126_height_balanced_histogram_on_column_tennselnsinscprsrgrp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:27 col:3of5 "Objects"
17:20:27 Height Balanced histogram on Column T_ENNS.ELNS_PVDR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7208368) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 7208368)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'ELNS_PVDR'
ORDER BY a.endpoint_number

17:20:27 col:3of5.

17:20:27 col:3of5 "01531_sqld360_323688_0sjx29v99zfqc_3a_127_height_balanced_histogram_on_column_tennselnspvdr.html"
17:20:27 col:3of5 "01532_sqld360_323688_0sjx29v99zfqc_3a_127_height_balanced_histogram_on_column_tennselnspvdr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:27 col:3of5 "Objects"
17:20:27 Height Balanced histogram on Column T_ENNS.(TRUNC("ELNS_ENLTDT"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686025)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'SYS_NC00030$'
ORDER BY a.endpoint_number

17:20:27 col:3of5.

17:20:27 col:3of5 "01533_sqld360_323688_0sjx29v99zfqc_3a_128_height_balanced_histogram_on_column_tennstruncelnsenltdt.html"
17:20:27 col:3of5 "01534_sqld360_323688_0sjx29v99zfqc_3a_128_height_balanced_histogram_on_column_tennstruncelnsenltdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:27 col:3of5 "Objects"
17:20:27 Height Balanced histogram on Column T_ENNS.(TRUNC(NVL("ELNS_DSNTDT",TO_DATE(

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 14686026)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'SYS_NC00031$'
ORDER BY a.endpoint_number

17:20:27 col:3of5.

17:20:27 col:3of5 "01535_sqld360_323688_0sjx29v99zfqc_3a_129_height_balanced_histogram_on_column_tennstruncnvlelnsdsntdttodate.html"
17:20:27 col:3of5 "01536_sqld360_323688_0sjx29v99zfqc_3a_129_height_balanced_histogram_on_column_tennstruncnvlelnsdsntdttodate_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:27 col:3of5 "Objects"
17:20:27 Frequency histogram on Column T_ENNS.(DECODE("ELNS_OBJ_STT",2,NULL,

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2380606 * 2380606) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2380606,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2380606 * 2380606)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2380606 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_ENNS'
AND a.column_name = 'SYS_NC00032$'
ORDER BY a.endpoint_number

17:20:27 col:3of5.

17:20:27 col:3of5 "01537_sqld360_323688_0sjx29v99zfqc_3a_130_frequency_histogram_on_column_tennsdecodeelnsobjstt2null.html"
17:20:27 col:3of5 "01538_sqld360_323688_0sjx29v99zfqc_3a_130_frequency_histogram_on_column_tennsdecodeelnsobjstt2null_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:28 col:3of5 "Objects"
17:20:28 Frequency histogram on Column T_SENTTSK.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 7285 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 7285,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 7285 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 7285 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:28 col:3of5.

17:20:28 col:3of5 "01539_sqld360_323688_0sjx29v99zfqc_3a_131_frequency_histogram_on_column_tsenttskclasstype.html"
17:20:28 col:3of5 "01540_sqld360_323688_0sjx29v99zfqc_3a_131_frequency_histogram_on_column_tsenttskclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:28 col:3of5 "Objects"
17:20:28 Hybrid histogram on Column T_SENTTSK.SETK_CRTD

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7287 * 224260) rows_per_bucket,
trunc(endpoint_repeat_count / 7287,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7287 * 224260)||' Sel: '||trunc(endpoint_repeat_count / 7287,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_CRTD'
ORDER BY a.endpoint_number

17:20:28 col:3of5.

17:20:28 col:3of5 "01541_sqld360_323688_0sjx29v99zfqc_3a_132_hybrid_histogram_on_column_tsenttsksetkcrtd.html"
17:20:28 col:3of5 "01542_sqld360_323688_0sjx29v99zfqc_3a_132_hybrid_histogram_on_column_tsenttsksetkcrtd_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:28 col:3of5 "Objects"
17:20:28 Frequency histogram on Column T_SENTTSK.SETK_LAS_ACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_LAS_ACT'
ORDER BY a.endpoint_number

17:20:28 col:3of5.

17:20:28 col:3of5 "01543_sqld360_323688_0sjx29v99zfqc_3a_133_frequency_histogram_on_column_tsenttsksetklasact.html"
17:20:28 col:3of5 "01544_sqld360_323688_0sjx29v99zfqc_3a_133_frequency_histogram_on_column_tsenttsksetklasact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:28 col:3of5 "Objects"
17:20:28 Hybrid histogram on Column T_SENTTSK.SETK_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7287 * 224260) rows_per_bucket,
trunc(endpoint_repeat_count / 7287,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7287 * 224260)||' Sel: '||trunc(endpoint_repeat_count / 7287,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:28 col:3of5.

17:20:28 col:3of5 "01545_sqld360_323688_0sjx29v99zfqc_3a_134_hybrid_histogram_on_column_tsenttsksetklasacttim.html"
17:20:28 col:3of5 "01546_sqld360_323688_0sjx29v99zfqc_3a_134_hybrid_histogram_on_column_tsenttsksetklasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:28 col:3of5 "Objects"
17:20:28 Frequency histogram on Column T_SENTTSK.SETK_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_OBJ_STT'
ORDER BY a.endpoint_number

17:20:28 col:3of5.

17:20:29 col:3of5 "01547_sqld360_323688_0sjx29v99zfqc_3a_135_frequency_histogram_on_column_tsenttsksetkobjstt.html"
17:20:29 col:3of5 "01548_sqld360_323688_0sjx29v99zfqc_3a_135_frequency_histogram_on_column_tsenttsksetkobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:29 col:3of5 "Objects"
17:20:29 Frequency histogram on Column T_SENTTSK.SETK_VERS

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_VERS'
ORDER BY a.endpoint_number

17:20:29 col:3of5.

17:20:29 col:3of5 "01549_sqld360_323688_0sjx29v99zfqc_3a_136_frequency_histogram_on_column_tsenttsksetkvers.html"
17:20:29 col:3of5 "01550_sqld360_323688_0sjx29v99zfqc_3a_136_frequency_histogram_on_column_tsenttsksetkvers_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:29 col:3of5 "Objects"
17:20:29 Frequency histogram on Column T_SENTTSK.SETK_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:20:29 col:3of5.

17:20:29 col:3of5 "01551_sqld360_323688_0sjx29v99zfqc_3a_137_frequency_histogram_on_column_tsenttsksetklasactby.html"
17:20:29 col:3of5 "01552_sqld360_323688_0sjx29v99zfqc_3a_137_frequency_histogram_on_column_tsenttsksetklasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:29 col:3of5 "Objects"
17:20:29 Frequency histogram on Column T_SENTTSK.SETK_ORIGCRTR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_ORIGCRTR'
ORDER BY a.endpoint_number

17:20:29 col:3of5.

17:20:29 col:3of5 "01553_sqld360_323688_0sjx29v99zfqc_3a_138_frequency_histogram_on_column_tsenttsksetkorigcrtr.html"
17:20:29 col:3of5 "01554_sqld360_323688_0sjx29v99zfqc_3a_138_frequency_histogram_on_column_tsenttsksetkorigcrtr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:29 col:3of5 "Objects"
17:20:29 Frequency histogram on Column T_SENTTSK.SETK_DRTN_UNIT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2876 * 2876) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2876,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2876 * 2876)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2876 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_DRTN_UNIT'
ORDER BY a.endpoint_number

17:20:29 col:3of5.

17:20:30 col:3of5 "01555_sqld360_323688_0sjx29v99zfqc_3a_139_frequency_histogram_on_column_tsenttsksetkdrtnunit.html"
17:20:30 col:3of5 "01556_sqld360_323688_0sjx29v99zfqc_3a_139_frequency_histogram_on_column_tsenttsksetkdrtnunit_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:30 col:3of5 "Objects"
17:20:30 Frequency histogram on Column T_SENTTSK.SETK_RMDRPRCDWTH__UNIT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 39 * 39) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 39,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 39 * 39)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 39 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_RMDRPRCDWTH__UNIT'
ORDER BY a.endpoint_number

17:20:30 col:3of5.

17:20:30 col:3of5 "01557_sqld360_323688_0sjx29v99zfqc_3a_140_frequency_histogram_on_column_tsenttsksetkrmdrprcdwthunit.html"
17:20:30 col:3of5 "01558_sqld360_323688_0sjx29v99zfqc_3a_140_frequency_histogram_on_column_tsenttsksetkrmdrprcdwthunit_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:30 col:3of5 "Objects"
17:20:30 Hybrid histogram on Column T_SENTTSK.SETK_CMPD

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 5915 * 180929) rows_per_bucket,
trunc(endpoint_repeat_count / 5915,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 5915 * 180929)||' Sel: '||trunc(endpoint_repeat_count / 5915,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_CMPD'
ORDER BY a.endpoint_number

17:20:30 col:3of5.

17:20:30 col:3of5 "01559_sqld360_323688_0sjx29v99zfqc_3a_141_hybrid_histogram_on_column_tsenttsksetkcmpd.html"
17:20:30 col:3of5 "01560_sqld360_323688_0sjx29v99zfqc_3a_141_hybrid_histogram_on_column_tsenttsksetkcmpd_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:30 col:3of5 "Objects"
17:20:30 Hybrid histogram on Column T_SENTTSK.SETK_TSK_TIMG_DDLN_DT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 2364 * 2364) rows_per_bucket,
trunc(endpoint_repeat_count / 2364,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 2364 * 2364)||' Sel: '||trunc(endpoint_repeat_count / 2364,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_TSK_TIMG_DDLN_DT'
ORDER BY a.endpoint_number

17:20:30 col:3of5.

17:20:30 col:3of5 "01561_sqld360_323688_0sjx29v99zfqc_3a_142_hybrid_histogram_on_column_tsenttsksetktsktimgddlndt.html"
17:20:30 col:3of5 "01562_sqld360_323688_0sjx29v99zfqc_3a_142_hybrid_histogram_on_column_tsenttsksetktsktimgddlndt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:30 col:3of5 "Objects"
17:20:30 Frequency histogram on Column T_SENTTSK.SETK_TSK_TIMG_DDLNACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 49159 * 49159) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 49159,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 49159 * 49159)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 49159 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_TSK_TIMG_DDLNACT'
ORDER BY a.endpoint_number

17:20:30 col:3of5.

17:20:30 col:3of5 "01563_sqld360_323688_0sjx29v99zfqc_3a_143_frequency_histogram_on_column_tsenttsksetktsktimgddlnact.html"
17:20:31 col:3of5 "01564_sqld360_323688_0sjx29v99zfqc_3a_143_frequency_histogram_on_column_tsenttsksetktsktimgddlnact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:31 col:3of5 "Objects"
17:20:31 Hybrid histogram on Column T_SENTTSK.SETK_TSK_TIMG_STRTDT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 5399 * 54587) rows_per_bucket,
trunc(endpoint_repeat_count / 5399,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 5399 * 54587)||' Sel: '||trunc(endpoint_repeat_count / 5399,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_TSK_TIMG_STRTDT'
ORDER BY a.endpoint_number

17:20:31 col:3of5.

17:20:31 col:3of5 "01565_sqld360_323688_0sjx29v99zfqc_3a_144_hybrid_histogram_on_column_tsenttsksetktsktimgstrtdt.html"
17:20:31 col:3of5 "01566_sqld360_323688_0sjx29v99zfqc_3a_144_hybrid_histogram_on_column_tsenttsksetktsktimgstrtdt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:31 col:3of5 "Objects"
17:20:31 Frequency histogram on Column T_SENTTSK.SETK_AFFN_UM_EVNT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 21 * 21) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 21,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 21 * 21)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 21 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_AFFN_UM_EVNT'
ORDER BY a.endpoint_number

17:20:31 col:3of5.

17:20:31 col:3of5 "01567_sqld360_323688_0sjx29v99zfqc_3a_145_frequency_histogram_on_column_tsenttsksetkaffnumevnt.html"
17:20:31 col:3of5 "01568_sqld360_323688_0sjx29v99zfqc_3a_145_frequency_histogram_on_column_tsenttsksetkaffnumevnt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:31 col:3of5 "Objects"
17:20:31 Hybrid histogram on Column T_SENTTSK.SETK_ORIGRCPT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7286 * 224260) rows_per_bucket,
trunc(endpoint_repeat_count / 7286,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7286 * 224260)||' Sel: '||trunc(endpoint_repeat_count / 7286,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_ORIGRCPT'
ORDER BY a.endpoint_number

17:20:31 col:3of5.

17:20:31 col:3of5 "01569_sqld360_323688_0sjx29v99zfqc_3a_146_hybrid_histogram_on_column_tsenttsksetkorigrcpt.html"
17:20:31 col:3of5 "01570_sqld360_323688_0sjx29v99zfqc_3a_146_hybrid_histogram_on_column_tsenttsksetkorigrcpt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:31 col:3of5 "Objects"
17:20:31 Frequency histogram on Column T_SENTTSK.SETK_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 219979 * 219979) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 219979,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 219979 * 219979)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 219979 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_OWNR'
ORDER BY a.endpoint_number

17:20:31 col:3of5.

17:20:32 col:3of5 "01571_sqld360_323688_0sjx29v99zfqc_3a_147_frequency_histogram_on_column_tsenttsksetkownr.html"
17:20:32 col:3of5 "01572_sqld360_323688_0sjx29v99zfqc_3a_147_frequency_histogram_on_column_tsenttsksetkownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:32 col:3of5 "Objects"
17:20:32 Frequency histogram on Column T_SENTTSK.SETK_PRVSOWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 * 64678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 * 64678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_PRVSOWNR'
ORDER BY a.endpoint_number

17:20:32 col:3of5.

17:20:32 col:3of5 "01573_sqld360_323688_0sjx29v99zfqc_3a_148_frequency_histogram_on_column_tsenttsksetkprvsownr.html"
17:20:32 col:3of5 "01574_sqld360_323688_0sjx29v99zfqc_3a_148_frequency_histogram_on_column_tsenttsksetkprvsownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:32 col:3of5 "Objects"
17:20:32 Frequency histogram on Column T_SENTTSK.SETK_PRVSSNDR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 * 64678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 * 64678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 64678 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_PRVSSNDR'
ORDER BY a.endpoint_number

17:20:32 col:3of5.

17:20:32 col:3of5 "01575_sqld360_323688_0sjx29v99zfqc_3a_149_frequency_histogram_on_column_tsenttsksetkprvssndr.html"
17:20:32 col:3of5 "01576_sqld360_323688_0sjx29v99zfqc_3a_149_frequency_histogram_on_column_tsenttsksetkprvssndr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:32 col:3of5 "Objects"
17:20:32 Frequency histogram on Column T_SENTTSK.SETK_CNCLRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 35441 * 35441) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 35441,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 35441 * 35441)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 35441 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_CNCLRESN'
ORDER BY a.endpoint_number

17:20:32 col:3of5.

17:20:32 col:3of5 "01577_sqld360_323688_0sjx29v99zfqc_3a_150_frequency_histogram_on_column_tsenttsksetkcnclresn.html"
17:20:32 col:3of5 "01578_sqld360_323688_0sjx29v99zfqc_3a_150_frequency_histogram_on_column_tsenttsksetkcnclresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:32 col:3of5 "Objects"
17:20:32 Frequency histogram on Column T_SENTTSK.SETK_TSK_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_TSK_TYP'
ORDER BY a.endpoint_number

17:20:32 col:3of5.

17:20:33 col:3of5 "01579_sqld360_323688_0sjx29v99zfqc_3a_151_frequency_histogram_on_column_tsenttsksetktsktyp.html"
17:20:33 col:3of5 "01580_sqld360_323688_0sjx29v99zfqc_3a_151_frequency_histogram_on_column_tsenttsksetktsktyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:33 col:3of5 "Objects"
17:20:33 Frequency histogram on Column T_SENTTSK.SETK_RESCHEDULE_REASON

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9495 * 9495) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9495,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9495 * 9495)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9495 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SETK_RESCHEDULE_REASON'
ORDER BY a.endpoint_number

17:20:33 col:3of5.

17:20:33 col:3of5 "01581_sqld360_323688_0sjx29v99zfqc_3a_152_frequency_histogram_on_column_tsenttsksetkreschedulereason.html"
17:20:33 col:3of5 "01582_sqld360_323688_0sjx29v99zfqc_3a_152_frequency_histogram_on_column_tsenttsksetkreschedulereason_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:33 col:3of5 "Objects"
17:20:33 Hybrid histogram on Column T_SENTTSK.("SETK_OBJ_STT","SETK_AFFN_MEMB")

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7285 * 224260) rows_per_bucket,
trunc(endpoint_repeat_count / 7285,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7285 * 224260)||' Sel: '||trunc(endpoint_repeat_count / 7285,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SYS_STSU99E0JHXWDB$#3#GYFFGPVG'
ORDER BY a.endpoint_number

17:20:33 col:3of5.

17:20:33 col:3of5 "01583_sqld360_323688_0sjx29v99zfqc_3a_153_hybrid_histogram_on_column_tsenttsksetkobjsttsetkaffnmemb.html"
17:20:33 col:3of5 "01584_sqld360_323688_0sjx29v99zfqc_3a_153_hybrid_histogram_on_column_tsenttsksetkobjsttsetkaffnmemb_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:33 col:3of5 "Objects"
17:20:33 Frequency histogram on Column T_SENTTSK.(NVL("SETK_PRNL",0))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 * 224260)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 224260 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SYS_NC00086$'
ORDER BY a.endpoint_number

17:20:33 col:3of5.

17:20:33 col:3of5 "01585_sqld360_323688_0sjx29v99zfqc_3a_154_frequency_histogram_on_column_tsenttsknvlsetkprnl0.html"
17:20:33 col:3of5 "01586_sqld360_323688_0sjx29v99zfqc_3a_154_frequency_histogram_on_column_tsenttsknvlsetkprnl0_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:33 col:3of5 "Objects"
17:20:33 Hybrid histogram on Column T_SENTTSK.(NVL("SETK_OWNR","SETK_ORIGRCPT"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7286 * 224260) rows_per_bucket,
trunc(endpoint_repeat_count / 7286,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7286 * 224260)||' Sel: '||trunc(endpoint_repeat_count / 7286,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SYS_NC00087$'
ORDER BY a.endpoint_number

17:20:33 col:3of5.

17:20:33 col:3of5 "01587_sqld360_323688_0sjx29v99zfqc_3a_155_hybrid_histogram_on_column_tsenttsknvlsetkownrsetkorigrcpt.html"
17:20:34 col:3of5 "01588_sqld360_323688_0sjx29v99zfqc_3a_155_hybrid_histogram_on_column_tsenttsknvlsetkownrsetkorigrcpt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:34 col:3of5 "Objects"
17:20:34 Hybrid histogram on Column T_SENTTSK.(TRUNC("SETK_SENT"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round(endpoint_repeat_count / 7151 * 219979) rows_per_bucket,
trunc(endpoint_repeat_count / 7151,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round(endpoint_repeat_count / 7151 * 219979)||' Sel: '||trunc(endpoint_repeat_count / 7151,6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_SENTTSK'
AND a.column_name = 'SYS_NC00088$'
ORDER BY a.endpoint_number

17:20:34 col:3of5.

17:20:34 col:3of5 "01589_sqld360_323688_0sjx29v99zfqc_3a_156_hybrid_histogram_on_column_tsenttsktruncsetksent.html"
17:20:34 col:3of5 "01590_sqld360_323688_0sjx29v99zfqc_3a_156_hybrid_histogram_on_column_tsenttsktruncsetksent_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:34 col:3of5 "Objects"
17:20:34 Frequency histogram on Column T_UM_BASE.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:34 col:3of5.

17:20:34 col:3of5 "01591_sqld360_323688_0sjx29v99zfqc_3a_157_frequency_histogram_on_column_tumbaseclasstype.html"
17:20:34 col:3of5 "01592_sqld360_323688_0sjx29v99zfqc_3a_157_frequency_histogram_on_column_tumbaseclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:34 col:3of5 "Objects"
17:20:34 Frequency histogram on Column T_UM_BASE.UMBS_LAS_ACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_LAS_ACT'
ORDER BY a.endpoint_number

17:20:34 col:3of5.

17:20:34 col:3of5 "01593_sqld360_323688_0sjx29v99zfqc_3a_158_frequency_histogram_on_column_tumbaseumbslasact.html"
17:20:34 col:3of5 "01594_sqld360_323688_0sjx29v99zfqc_3a_158_frequency_histogram_on_column_tumbaseumbslasact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:35 col:3of5 "Objects"
17:20:35 Height Balanced histogram on Column T_UM_BASE.UMBS_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:35 col:3of5.

17:20:35 col:3of5 "01595_sqld360_323688_0sjx29v99zfqc_3a_159_height_balanced_histogram_on_column_tumbaseumbslasacttim.html"
17:20:35 col:3of5 "01596_sqld360_323688_0sjx29v99zfqc_3a_159_height_balanced_histogram_on_column_tumbaseumbslasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:35 col:3of5 "Objects"
17:20:35 Frequency histogram on Column T_UM_BASE.UMBS_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_OBJ_STT'
ORDER BY a.endpoint_number

17:20:35 col:3of5.

17:20:35 col:3of5 "01597_sqld360_323688_0sjx29v99zfqc_3a_160_frequency_histogram_on_column_tumbaseumbsobjstt.html"
17:20:35 col:3of5 "01598_sqld360_323688_0sjx29v99zfqc_3a_160_frequency_histogram_on_column_tumbaseumbsobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:35 col:3of5 "Objects"
17:20:35 Frequency histogram on Column T_UM_BASE.UMBS_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:20:35 col:3of5.

17:20:35 col:3of5 "01599_sqld360_323688_0sjx29v99zfqc_3a_161_frequency_histogram_on_column_tumbaseumbslasactby.html"
17:20:35 col:3of5 "01600_sqld360_323688_0sjx29v99zfqc_3a_161_frequency_histogram_on_column_tumbaseumbslasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:35 col:3of5 "Objects"
17:20:35 Frequency histogram on Column T_UM_BASE.UMBS_DDLNTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83746 * 83746) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83746,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83746 * 83746)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83746 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_DDLNTYP'
ORDER BY a.endpoint_number

17:20:35 col:3of5.

17:20:36 col:3of5 "01601_sqld360_323688_0sjx29v99zfqc_3a_162_frequency_histogram_on_column_tumbaseumbsddlntyp.html"
17:20:36 col:3of5 "01602_sqld360_323688_0sjx29v99zfqc_3a_162_frequency_histogram_on_column_tumbaseumbsddlntyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:36 col:3of5 "Objects"
17:20:36 Frequency histogram on Column T_UM_BASE.UMBS_REQTTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250690 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_REQTTYP'
ORDER BY a.endpoint_number

17:20:36 col:3of5.

17:20:36 col:3of5 "01603_sqld360_323688_0sjx29v99zfqc_3a_163_frequency_histogram_on_column_tumbaseumbsreqttyp.html"
17:20:36 col:3of5 "01604_sqld360_323688_0sjx29v99zfqc_3a_163_frequency_histogram_on_column_tumbaseumbsreqttyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:36 col:3of5 "Objects"
17:20:36 Frequency histogram on Column T_UM_BASE.UMBS_DRVDDTMNSTT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250689 * 250689) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250689,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250689 * 250689)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250689 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_DRVDDTMNSTT'
ORDER BY a.endpoint_number

17:20:36 col:3of5.

17:20:36 col:3of5 "01605_sqld360_323688_0sjx29v99zfqc_3a_164_frequency_histogram_on_column_tumbaseumbsdrvddtmnstt.html"
17:20:36 col:3of5 "01606_sqld360_323688_0sjx29v99zfqc_3a_164_frequency_histogram_on_column_tumbaseumbsdrvddtmnstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:36 col:3of5 "Objects"
17:20:36 Frequency histogram on Column T_UM_BASE.UMET_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250602 * 250602) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250602,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250602 * 250602)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 250602 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMET_OWNR'
ORDER BY a.endpoint_number

17:20:36 col:3of5.

17:20:36 col:3of5 "01607_sqld360_323688_0sjx29v99zfqc_3a_165_frequency_histogram_on_column_tumbaseumetownr.html"
17:20:37 col:3of5 "01608_sqld360_323688_0sjx29v99zfqc_3a_165_frequency_histogram_on_column_tumbaseumetownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:37 col:3of5 "Objects"
17:20:37 Frequency histogram on Column T_UM_BASE.UMER_OWNR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 84 * 84) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 84,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 84 * 84)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 84 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMER_OWNR'
ORDER BY a.endpoint_number

17:20:37 col:3of5.

17:20:37 col:3of5 "01609_sqld360_323688_0sjx29v99zfqc_3a_166_frequency_histogram_on_column_tumbaseumerownr.html"
17:20:37 col:3of5 "01610_sqld360_323688_0sjx29v99zfqc_3a_166_frequency_histogram_on_column_tumbaseumerownr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:37 col:3of5 "Objects"
17:20:37 Frequency histogram on Column T_UM_BASE.UMET_UM_EVNTOTCM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10226 * 10226) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10226,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10226 * 10226)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 10226 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMET_UM_EVNTOTCM'
ORDER BY a.endpoint_number

17:20:37 col:3of5.

17:20:37 col:3of5 "01611_sqld360_323688_0sjx29v99zfqc_3a_167_frequency_histogram_on_column_tumbaseumetumevntotcm.html"
17:20:37 col:3of5 "01612_sqld360_323688_0sjx29v99zfqc_3a_167_frequency_histogram_on_column_tumbaseumetumevntotcm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:37 col:3of5 "Objects"
17:20:37 Frequency histogram on Column T_UM_BASE.UMET_CLSRRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249838 * 249838) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249838,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249838 * 249838)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249838 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMET_CLSRRESN'
ORDER BY a.endpoint_number

17:20:37 col:3of5.

17:20:37 col:3of5 "01613_sqld360_323688_0sjx29v99zfqc_3a_168_frequency_histogram_on_column_tumbaseumetclsrresn.html"
17:20:37 col:3of5 "01614_sqld360_323688_0sjx29v99zfqc_3a_168_frequency_histogram_on_column_tumbaseumetclsrresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:38 col:3of5 "Objects"
17:20:38 Frequency histogram on Column T_UM_BASE.UMBS_SVTY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 27 * 27) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 27,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 27 * 27)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 27 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_SVTY'
ORDER BY a.endpoint_number

17:20:38 col:3of5.

17:20:38 col:3of5 "01615_sqld360_323688_0sjx29v99zfqc_3a_169_frequency_histogram_on_column_tumbaseumbssvty.html"
17:20:38 col:3of5 "01616_sqld360_323688_0sjx29v99zfqc_3a_169_frequency_histogram_on_column_tumbaseumbssvty_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:38 col:3of5 "Objects"
17:20:38 Frequency histogram on Column T_UM_BASE.UMBS_PITY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 524 * 524) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 524,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 524 * 524)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 524 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_PITY'
ORDER BY a.endpoint_number

17:20:38 col:3of5.

17:20:38 col:3of5 "01617_sqld360_323688_0sjx29v99zfqc_3a_170_frequency_histogram_on_column_tumbaseumbspity.html"
17:20:38 col:3of5 "01618_sqld360_323688_0sjx29v99zfqc_3a_170_frequency_histogram_on_column_tumbaseumbspity_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:38 col:3of5 "Objects"
17:20:38 Frequency histogram on Column T_UM_BASE.UMBS_SRC

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83480 * 83480) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83480,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83480 * 83480)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 83480 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_SRC'
ORDER BY a.endpoint_number

17:20:38 col:3of5.

17:20:38 col:3of5 "01619_sqld360_323688_0sjx29v99zfqc_3a_171_frequency_histogram_on_column_tumbaseumbssrc.html"
17:20:38 col:3of5 "01620_sqld360_323688_0sjx29v99zfqc_3a_171_frequency_histogram_on_column_tumbaseumbssrc_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:38 col:3of5 "Objects"
17:20:38 Frequency histogram on Column T_UM_BASE.UMET_REONRESN

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9112 * 9112) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9112,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9112 * 9112)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 9112 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMET_REONRESN'
ORDER BY a.endpoint_number

17:20:38 col:3of5.

17:20:39 col:3of5 "01621_sqld360_323688_0sjx29v99zfqc_3a_172_frequency_histogram_on_column_tumbaseumetreonresn.html"
17:20:39 col:3of5 "01622_sqld360_323688_0sjx29v99zfqc_3a_172_frequency_histogram_on_column_tumbaseumetreonresn_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:39 col:3of5 "Objects"
17:20:39 Frequency histogram on Column T_UM_BASE.UMBS_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249340 * 249340) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249340,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249340 * 249340)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 249340 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_TYP'
ORDER BY a.endpoint_number

17:20:39 col:3of5.

17:20:39 col:3of5 "01623_sqld360_323688_0sjx29v99zfqc_3a_173_frequency_histogram_on_column_tumbaseumbstyp.html"
17:20:39 col:3of5 "01624_sqld360_323688_0sjx29v99zfqc_3a_173_frequency_histogram_on_column_tumbaseumbstyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:39 col:3of5 "Objects"
17:20:39 Frequency histogram on Column T_UM_BASE.UMBS_RQTR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 69961 * 69961) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 69961,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 69961 * 69961)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 69961 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_RQTR'
ORDER BY a.endpoint_number

17:20:39 col:3of5.

17:20:39 col:3of5 "01625_sqld360_323688_0sjx29v99zfqc_3a_174_frequency_histogram_on_column_tumbaseumbsrqtr.html"
17:20:39 col:3of5 "01626_sqld360_323688_0sjx29v99zfqc_3a_174_frequency_histogram_on_column_tumbaseumbsrqtr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:39 col:3of5 "Objects"
17:20:39 Height Balanced histogram on Column T_UM_BASE.UMBS_PFNGPVDR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250663) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250663)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_PFNGPVDR'
ORDER BY a.endpoint_number

17:20:39 col:3of5.

17:20:39 col:3of5 "01627_sqld360_323688_0sjx29v99zfqc_3a_175_height_balanced_histogram_on_column_tumbaseumbspfngpvdr.html"
17:20:40 col:3of5 "01628_sqld360_323688_0sjx29v99zfqc_3a_175_height_balanced_histogram_on_column_tumbaseumbspfngpvdr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:40 col:3of5 "Objects"
17:20:40 Height Balanced histogram on Column T_UM_BASE.UMBS_RQNGPVDR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 53487) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 53487)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_RQNGPVDR'
ORDER BY a.endpoint_number

17:20:40 col:3of5.

17:20:40 col:3of5 "01629_sqld360_323688_0sjx29v99zfqc_3a_176_height_balanced_histogram_on_column_tumbaseumbsrqngpvdr.html"
17:20:40 col:3of5 "01630_sqld360_323688_0sjx29v99zfqc_3a_176_height_balanced_histogram_on_column_tumbaseumbsrqngpvdr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:40 col:3of5 "Objects"
17:20:40 Frequency histogram on Column T_UM_BASE.UMBS_AUTH_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 * 3) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 * 3)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_AUTH_TYP'
ORDER BY a.endpoint_number

17:20:40 col:3of5.

17:20:40 col:3of5 "01631_sqld360_323688_0sjx29v99zfqc_3a_177_frequency_histogram_on_column_tumbaseumbsauthtyp.html"
17:20:40 col:3of5 "01632_sqld360_323688_0sjx29v99zfqc_3a_177_frequency_histogram_on_column_tumbaseumbsauthtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:40 col:3of5 "Objects"
17:20:40 Frequency histogram on Column T_UM_BASE.UMBS_AUTH_SRC

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 * 3) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 * 3)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 3 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'UMBS_AUTH_SRC'
ORDER BY a.endpoint_number

17:20:40 col:3of5.

17:20:40 col:3of5 "01633_sqld360_323688_0sjx29v99zfqc_3a_178_frequency_histogram_on_column_tumbaseumbsauthsrc.html"
17:20:40 col:3of5 "01634_sqld360_323688_0sjx29v99zfqc_3a_178_frequency_histogram_on_column_tumbaseumbsauthsrc_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:41 col:3of5 "Objects"
17:20:41 Height Balanced histogram on Column T_UM_BASE.(UPPER("UMBS_C4C_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250690) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 250690)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_UM_BASE'
AND a.column_name = 'SYS_NC00123$'
ORDER BY a.endpoint_number

17:20:41 col:3of5.

17:20:41 col:3of5 "01635_sqld360_323688_0sjx29v99zfqc_3a_179_height_balanced_histogram_on_column_tumbaseupperumbsc4cid.html"
17:20:41 col:3of5 "01636_sqld360_323688_0sjx29v99zfqc_3a_179_height_balanced_histogram_on_column_tumbaseupperumbsc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:41 col:3of5 "Objects"
17:20:41 Frequency histogram on Column T_USR.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 * 1986002) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 * 1986002)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:20:41 col:3of5.

17:20:41 col:3of5 "01637_sqld360_323688_0sjx29v99zfqc_3a_180_frequency_histogram_on_column_tusrclasstype.html"
17:20:41 col:3of5 "01638_sqld360_323688_0sjx29v99zfqc_3a_180_frequency_histogram_on_column_tusrclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:41 col:3of5 "Objects"
17:20:41 Height Balanced histogram on Column T_USR.USR_C4C_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_C4C_ID'
ORDER BY a.endpoint_number

17:20:41 col:3of5.

17:20:41 col:3of5 "01639_sqld360_323688_0sjx29v99zfqc_3a_181_height_balanced_histogram_on_column_tusrusrc4cid.html"
17:20:41 col:3of5 "01640_sqld360_323688_0sjx29v99zfqc_3a_181_height_balanced_histogram_on_column_tusrusrc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:42 col:3of5 "Objects"
17:20:42 Frequency histogram on Column T_USR.USR_LAS_ACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT'
ORDER BY a.endpoint_number

17:20:42 col:3of5.

17:20:42 col:3of5 "01641_sqld360_323688_0sjx29v99zfqc_3a_182_frequency_histogram_on_column_tusrusrlasact.html"
17:20:42 col:3of5 "01642_sqld360_323688_0sjx29v99zfqc_3a_182_frequency_histogram_on_column_tusrusrlasact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:42 col:3of5 "Objects"
17:20:42 Height Balanced histogram on Column T_USR.USR_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:20:42 col:3of5.

17:20:42 col:3of5 "01643_sqld360_323688_0sjx29v99zfqc_3a_183_height_balanced_histogram_on_column_tusrusrlasacttim.html"
17:20:42 col:3of5 "01644_sqld360_323688_0sjx29v99zfqc_3a_183_height_balanced_histogram_on_column_tusrusrlasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:42 col:3of5 "Objects"
17:20:42 Frequency histogram on Column T_USR.USR_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_OBJ_STT'
ORDER BY a.endpoint_number

17:20:42 col:3of5.

17:20:42 col:3of5 "01645_sqld360_323688_0sjx29v99zfqc_3a_184_frequency_histogram_on_column_tusrusrobjstt.html"
17:20:42 col:3of5 "01646_sqld360_323688_0sjx29v99zfqc_3a_184_frequency_histogram_on_column_tusrusrobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:43 col:3of5 "Objects"
17:20:43 Frequency histogram on Column T_USR.USR_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:20:43 col:3of5.

17:20:43 col:3of5 "01647_sqld360_323688_0sjx29v99zfqc_3a_185_frequency_histogram_on_column_tusrusrlasactby.html"
17:20:43 col:3of5 "01648_sqld360_323688_0sjx29v99zfqc_3a_185_frequency_histogram_on_column_tusrusrlasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:43 col:3of5 "Objects"
17:20:43 Height Balanced histogram on Column T_USR.USR_UNIVID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1981511) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1981511)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_UNIVID'
ORDER BY a.endpoint_number

17:20:43 col:3of5.

17:20:43 col:3of5 "01649_sqld360_323688_0sjx29v99zfqc_3a_186_height_balanced_histogram_on_column_tusrusrunivid.html"
17:20:43 col:3of5 "01650_sqld360_323688_0sjx29v99zfqc_3a_186_height_balanced_histogram_on_column_tusrusrunivid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:43 col:3of5 "Objects"
17:20:43 Height Balanced histogram on Column T_USR.USR_FRSTNAM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_FRSTNAM'
ORDER BY a.endpoint_number

17:20:43 col:3of5.

17:20:43 col:3of5 "01651_sqld360_323688_0sjx29v99zfqc_3a_187_height_balanced_histogram_on_column_tusrusrfrstnam.html"
17:20:43 col:3of5 "01652_sqld360_323688_0sjx29v99zfqc_3a_187_height_balanced_histogram_on_column_tusrusrfrstnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:44 col:3of5 "Objects"
17:20:44 Height Balanced histogram on Column T_USR.USR_LAS_NAM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_NAM'
ORDER BY a.endpoint_number

17:20:44 col:3of5.

17:20:44 col:3of5 "01653_sqld360_323688_0sjx29v99zfqc_3a_188_height_balanced_histogram_on_column_tusrusrlasnam.html"
17:20:44 col:3of5 "01654_sqld360_323688_0sjx29v99zfqc_3a_188_height_balanced_histogram_on_column_tusrusrlasnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:44 col:3of5 "Objects"
17:20:44 Height Balanced histogram on Column T_USR.USR_DT_OF_BRTH

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1077282) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1077282)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_DT_OF_BRTH'
ORDER BY a.endpoint_number

17:20:44 col:3of5.

17:20:44 col:3of5 "01655_sqld360_323688_0sjx29v99zfqc_3a_189_height_balanced_histogram_on_column_tusrusrdtofbrth.html"
17:20:44 col:3of5 "01656_sqld360_323688_0sjx29v99zfqc_3a_189_height_balanced_histogram_on_column_tusrusrdtofbrth_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:44 col:3of5 "Objects"
17:20:44 Frequency histogram on Column T_USR.USR_GNDRCODE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 * 1097041) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 * 1097041)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_GNDRCODE'
ORDER BY a.endpoint_number

17:20:44 col:3of5.

17:20:44 col:3of5 "01657_sqld360_323688_0sjx29v99zfqc_3a_190_frequency_histogram_on_column_tusrusrgndrcode.html"
17:20:44 col:3of5 "01658_sqld360_323688_0sjx29v99zfqc_3a_190_frequency_histogram_on_column_tusrusrgndrcode_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:45 col:3of5 "Objects"
17:20:45 Height Balanced histogram on Column T_USR.USR_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_ID'
ORDER BY a.endpoint_number

17:20:45 col:3of5.

17:20:45 col:3of5 "01659_sqld360_323688_0sjx29v99zfqc_3a_191_height_balanced_histogram_on_column_tusrusrid.html"
17:20:45 col:3of5 "01660_sqld360_323688_0sjx29v99zfqc_3a_191_height_balanced_histogram_on_column_tusrusrid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:45 col:3of5 "Objects"
17:20:45 Frequency histogram on Column T_USR.PRV_IS_ADM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 * 1985667) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 * 1985667)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_IS_ADM'
ORDER BY a.endpoint_number

17:20:45 col:3of5.

17:20:45 col:3of5 "01661_sqld360_323688_0sjx29v99zfqc_3a_192_frequency_histogram_on_column_tusrprvisadm.html"
17:20:45 col:3of5 "01662_sqld360_323688_0sjx29v99zfqc_3a_192_frequency_histogram_on_column_tusrprvisadm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:45 col:3of5 "Objects"
17:20:45 Frequency histogram on Column T_USR.MBUR_ELBL

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 * 985202) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 * 985202)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_ELBL'
ORDER BY a.endpoint_number

17:20:45 col:3of5.

17:20:45 col:3of5 "01663_sqld360_323688_0sjx29v99zfqc_3a_193_frequency_histogram_on_column_tusrmburelbl.html"
17:20:45 col:3of5 "01664_sqld360_323688_0sjx29v99zfqc_3a_193_frequency_histogram_on_column_tusrmburelbl_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:46 col:3of5 "Objects"
17:20:46 Frequency histogram on Column T_USR.MBUR_PMRYINSR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 * 985215) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 * 985215)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_PMRYINSR'
ORDER BY a.endpoint_number

17:20:46 col:3of5.

17:20:46 col:3of5 "01665_sqld360_323688_0sjx29v99zfqc_3a_194_frequency_histogram_on_column_tusrmburpmryinsr.html"
17:20:46 col:3of5 "01666_sqld360_323688_0sjx29v99zfqc_3a_194_frequency_histogram_on_column_tusrmburpmryinsr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:46 col:3of5 "Objects"
17:20:46 Height Balanced histogram on Column T_USR.MBUR_INSCID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_INSCID'
ORDER BY a.endpoint_number

17:20:46 col:3of5.

17:20:46 col:3of5 "01667_sqld360_323688_0sjx29v99zfqc_3a_195_height_balanced_histogram_on_column_tusrmburinscid.html"
17:20:46 col:3of5 "01668_sqld360_323688_0sjx29v99zfqc_3a_195_height_balanced_histogram_on_column_tusrmburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:46 col:3of5 "Objects"
17:20:46 Frequency histogram on Column T_USR.MBUR_CNFTCNCT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 * 980211) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 * 980211)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_CNFTCNCT'
ORDER BY a.endpoint_number

17:20:46 col:3of5.

17:20:46 col:3of5 "01669_sqld360_323688_0sjx29v99zfqc_3a_196_frequency_histogram_on_column_tusrmburcnftcnct.html"
17:20:46 col:3of5 "01670_sqld360_323688_0sjx29v99zfqc_3a_196_frequency_histogram_on_column_tusrmburcnftcnct_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:47 col:3of5 "Objects"
17:20:47 Frequency histogram on Column T_USR.PAYR_WKLDLMITBY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 * 782) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 * 782)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_WKLDLMITBY'
ORDER BY a.endpoint_number

17:20:47 col:3of5.

17:20:47 col:3of5 "01671_sqld360_323688_0sjx29v99zfqc_3a_197_frequency_histogram_on_column_tusrpayrwkldlmitby.html"
17:20:47 col:3of5 "01672_sqld360_323688_0sjx29v99zfqc_3a_197_frequency_histogram_on_column_tusrpayrwkldlmitby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:47 col:3of5 "Objects"
17:20:47 Height Balanced histogram on Column T_USR.PAYR_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 785) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 785)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_ID'
ORDER BY a.endpoint_number

17:20:47 col:3of5.

17:20:47 col:3of5 "01673_sqld360_323688_0sjx29v99zfqc_3a_198_height_balanced_histogram_on_column_tusrpayrid.html"
17:20:47 col:3of5 "01674_sqld360_323688_0sjx29v99zfqc_3a_198_height_balanced_histogram_on_column_tusrpayrid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:47 col:3of5 "Objects"
17:20:47 Frequency histogram on Column T_USR.PRV_PVDRTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 * 209963) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 * 209963)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_PVDRTYP'
ORDER BY a.endpoint_number

17:20:47 col:3of5.

17:20:47 col:3of5 "01675_sqld360_323688_0sjx29v99zfqc_3a_199_frequency_histogram_on_column_tusrprvpvdrtyp.html"
17:20:47 col:3of5 "01676_sqld360_323688_0sjx29v99zfqc_3a_199_frequency_histogram_on_column_tusrprvpvdrtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:48 col:3of5 "Objects"
17:20:48 Frequency histogram on Column T_USR.USR_ECTY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 * 654489) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 * 654489)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_ECTY'
ORDER BY a.endpoint_number

17:20:48 col:3of5.

17:20:48 col:3of5 "01677_sqld360_323688_0sjx29v99zfqc_3a_200_frequency_histogram_on_column_tusrusrecty.html"
17:20:48 col:3of5 "01678_sqld360_323688_0sjx29v99zfqc_3a_200_frequency_histogram_on_column_tusrusrecty_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:48 col:3of5 "Objects"
17:20:48 Frequency histogram on Column T_USR.USR_NAM_SFIX

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 * 87833) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 * 87833)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_NAM_SFIX'
ORDER BY a.endpoint_number

17:20:48 col:3of5.

17:20:48 col:3of5 "01679_sqld360_323688_0sjx29v99zfqc_3a_201_frequency_histogram_on_column_tusrusrnamsfix.html"
17:20:48 col:3of5 "01680_sqld360_323688_0sjx29v99zfqc_3a_201_frequency_histogram_on_column_tusrusrnamsfix_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:48 col:3of5 "Objects"
17:20:48 Frequency histogram on Column T_USR.USR_NAM_PRFX

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 * 629770) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 * 629770)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_NAM_PRFX'
ORDER BY a.endpoint_number

17:20:48 col:3of5.

17:20:48 col:3of5 "01681_sqld360_323688_0sjx29v99zfqc_3a_202_frequency_histogram_on_column_tusrusrnamprfx.html"
17:20:49 col:3of5 "01682_sqld360_323688_0sjx29v99zfqc_3a_202_frequency_histogram_on_column_tusrusrnamprfx_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:49 col:3of5 "Objects"
17:20:49 Frequency histogram on Column T_USR.MBUR_RLSPTO_SBCR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 * 983812) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 * 983812)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_RLSPTO_SBCR'
ORDER BY a.endpoint_number

17:20:49 col:3of5.

17:20:49 col:3of5 "01683_sqld360_323688_0sjx29v99zfqc_3a_203_frequency_histogram_on_column_tusrmburrlsptosbcr.html"
17:20:49 col:3of5 "01684_sqld360_323688_0sjx29v99zfqc_3a_203_frequency_histogram_on_column_tusrmburrlsptosbcr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:49 col:3of5 "Objects"
17:20:49 Height Balanced histogram on Column T_USR.USR_MRGEMSTR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 419) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 419)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_MRGEMSTR'
ORDER BY a.endpoint_number

17:20:49 col:3of5.

17:20:49 col:3of5 "01685_sqld360_323688_0sjx29v99zfqc_3a_204_height_balanced_histogram_on_column_tusrusrmrgemstr.html"
17:20:49 col:3of5 "01686_sqld360_323688_0sjx29v99zfqc_3a_204_height_balanced_histogram_on_column_tusrusrmrgemstr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:49 col:3of5 "Objects"
17:20:49 Frequency histogram on Column T_USR.PAYR_BCK1

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 * 155) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 * 155)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK1'
ORDER BY a.endpoint_number

17:20:49 col:3of5.

17:20:50 col:3of5 "01687_sqld360_323688_0sjx29v99zfqc_3a_205_frequency_histogram_on_column_tusrpayrbck1.html"
17:20:50 col:3of5 "01688_sqld360_323688_0sjx29v99zfqc_3a_205_frequency_histogram_on_column_tusrpayrbck1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:50 col:3of5 "Objects"
17:20:50 Frequency histogram on Column T_USR.PAYR_SVSR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_SVSR'
ORDER BY a.endpoint_number

17:20:50 col:3of5.

17:20:50 col:3of5 "01689_sqld360_323688_0sjx29v99zfqc_3a_206_frequency_histogram_on_column_tusrpayrsvsr.html"
17:20:50 col:3of5 "01690_sqld360_323688_0sjx29v99zfqc_3a_206_frequency_histogram_on_column_tusrpayrsvsr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:50 col:3of5 "Objects"
17:20:50 Frequency histogram on Column T_USR.PAYR_BCK2

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 * 15) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 * 15)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK2'
ORDER BY a.endpoint_number

17:20:50 col:3of5.

17:20:50 col:3of5 "01691_sqld360_323688_0sjx29v99zfqc_3a_207_frequency_histogram_on_column_tusrpayrbck2.html"
17:20:50 col:3of5 "01692_sqld360_323688_0sjx29v99zfqc_3a_207_frequency_histogram_on_column_tusrpayrbck2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:51 col:3of5 "Objects"
17:20:51 Frequency histogram on Column T_USR.PAYR_BCK3

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 * 4) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 * 4)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK3'
ORDER BY a.endpoint_number

17:20:51 col:3of5.

17:20:51 col:3of5 "01693_sqld360_323688_0sjx29v99zfqc_3a_208_frequency_histogram_on_column_tusrpayrbck3.html"
17:20:51 col:3of5 "01694_sqld360_323688_0sjx29v99zfqc_3a_208_frequency_histogram_on_column_tusrpayrbck3_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:51 col:3of5 "Objects"
17:20:51 Frequency histogram on Column T_USR.PRV_SPLRTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 * 209942) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 * 209942)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_SPLRTYP'
ORDER BY a.endpoint_number

17:20:51 col:3of5.

17:20:51 col:3of5 "01695_sqld360_323688_0sjx29v99zfqc_3a_209_frequency_histogram_on_column_tusrprvsplrtyp.html"
17:20:51 col:3of5 "01696_sqld360_323688_0sjx29v99zfqc_3a_209_frequency_histogram_on_column_tusrprvsplrtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:51 col:3of5 "Objects"
17:20:51 Height Balanced histogram on Column T_USR.USR_IPGROUPID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193841) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193841)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_IPGROUPID'
ORDER BY a.endpoint_number

17:20:51 col:3of5.

17:20:51 col:3of5 "01697_sqld360_323688_0sjx29v99zfqc_3a_210_height_balanced_histogram_on_column_tusrusripgroupid.html"
17:20:51 col:3of5 "01698_sqld360_323688_0sjx29v99zfqc_3a_210_height_balanced_histogram_on_column_tusrusripgroupid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:52 col:3of5 "Objects"
17:20:52 Height Balanced histogram on Column T_USR.USR_PRODUCTCATEGORYID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193576) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193576)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_PRODUCTCATEGORYID'
ORDER BY a.endpoint_number

17:20:52 col:3of5.

17:20:52 col:3of5 "01699_sqld360_323688_0sjx29v99zfqc_3a_211_height_balanced_histogram_on_column_tusrusrproductcategoryid.html"
17:20:52 col:3of5 "01700_sqld360_323688_0sjx29v99zfqc_3a_211_height_balanced_histogram_on_column_tusrusrproductcategoryid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:52 col:3of5 "Objects"
17:20:52 Height Balanced histogram on Column T_USR.(UPPER("PRV_PLN_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 209961) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 209961)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00130$'
ORDER BY a.endpoint_number

17:20:52 col:3of5.

17:20:52 col:3of5 "01701_sqld360_323688_0sjx29v99zfqc_3a_212_height_balanced_histogram_on_column_tusrupperprvplnid.html"
17:20:52 col:3of5 "01702_sqld360_323688_0sjx29v99zfqc_3a_212_height_balanced_histogram_on_column_tusrupperprvplnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:52 col:3of5 "Objects"
17:20:52 Height Balanced histogram on Column T_USR.(UPPER("PRV_UPN_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 177258) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 177258)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00131$'
ORDER BY a.endpoint_number

17:20:52 col:3of5.

17:20:52 col:3of5 "01703_sqld360_323688_0sjx29v99zfqc_3a_213_height_balanced_histogram_on_column_tusrupperprvupnid.html"
17:20:52 col:3of5 "01704_sqld360_323688_0sjx29v99zfqc_3a_213_height_balanced_histogram_on_column_tusrupperprvupnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:53 col:3of5 "Objects"
17:20:53 Height Balanced histogram on Column T_USR.(UPPER("USR_LAS_NAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00132$'
ORDER BY a.endpoint_number

17:20:53 col:3of5.

17:20:53 col:3of5 "01705_sqld360_323688_0sjx29v99zfqc_3a_214_height_balanced_histogram_on_column_tusrupperusrlasnam.html"
17:20:53 col:3of5 "01706_sqld360_323688_0sjx29v99zfqc_3a_214_height_balanced_histogram_on_column_tusrupperusrlasnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:53 col:3of5 "Objects"
17:20:53 Height Balanced histogram on Column T_USR.(UPPER("USR_MDLENAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 790191) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 790191)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00138$'
ORDER BY a.endpoint_number

17:20:53 col:3of5.

17:20:53 col:3of5 "01707_sqld360_323688_0sjx29v99zfqc_3a_215_height_balanced_histogram_on_column_tusrupperusrmdlenam.html"
17:20:53 col:3of5 "01708_sqld360_323688_0sjx29v99zfqc_3a_215_height_balanced_histogram_on_column_tusrupperusrmdlenam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:53 col:3of5 "Objects"
17:20:53 Height Balanced histogram on Column T_USR.(UPPER("USR_C4C_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00139$'
ORDER BY a.endpoint_number

17:20:53 col:3of5.

17:20:53 col:3of5 "01709_sqld360_323688_0sjx29v99zfqc_3a_216_height_balanced_histogram_on_column_tusrupperusrc4cid.html"
17:20:53 col:3of5 "01710_sqld360_323688_0sjx29v99zfqc_3a_216_height_balanced_histogram_on_column_tusrupperusrc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:54 col:3of5 "Objects"
17:20:54 Frequency histogram on Column T_USR.(CASE "USR_OBJ_STT" WHEN 2 THEN 0 ELSE CASE  WHEN "USR_MRGEMSTR" IS NULL THEN 1 ELSE 0 END  END )

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00140$'
ORDER BY a.endpoint_number

17:20:54 col:3of5.

17:20:54 col:3of5 "01711_sqld360_323688_0sjx29v99zfqc_3a_217_frequency_histogram_on_column_tusrcase_usrobjstt_when_2_then_0_else_case_when_usrmrgemstr_is_null_then_1_else_0_end_end_.html"
17:20:54 col:3of5 "01712_sqld360_323688_0sjx29v99zfqc_3a_217_frequency_histogram_on_column_tusrcase_usrobjstt_when_2_then_0_else_case_when_usrmrgemstr_is_null_then_1_else_0_end_end__bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:54 col:3of5 "Objects"
17:20:54 Frequency histogram on Column T_USR.(UPPER("MBUR_MEDICAID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 * 11) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 * 11)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00159$'
ORDER BY a.endpoint_number

17:20:54 col:3of5.

17:20:54 col:3of5 "01713_sqld360_323688_0sjx29v99zfqc_3a_218_frequency_histogram_on_column_tusruppermburmedicaid.html"
17:20:54 col:3of5 "01714_sqld360_323688_0sjx29v99zfqc_3a_218_frequency_histogram_on_column_tusruppermburmedicaid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:54 col:3of5 "Objects"
17:20:54 Height Balanced histogram on Column T_USR.(UPPER("MBUR_HICNID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 391) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 391)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00161$'
ORDER BY a.endpoint_number

17:20:54 col:3of5.

17:20:54 col:3of5 "01715_sqld360_323688_0sjx29v99zfqc_3a_219_height_balanced_histogram_on_column_tusruppermburhicnid.html"
17:20:54 col:3of5 "01716_sqld360_323688_0sjx29v99zfqc_3a_219_height_balanced_histogram_on_column_tusruppermburhicnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:55 col:3of5 "Objects"
17:20:55 Height Balanced histogram on Column T_USR.(UPPER("MBUR_INSCID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00148$'
ORDER BY a.endpoint_number

17:20:55 col:3of5.

17:20:55 col:3of5 "01717_sqld360_323688_0sjx29v99zfqc_3a_220_height_balanced_histogram_on_column_tusruppermburinscid.html"
17:20:55 col:3of5 "01718_sqld360_323688_0sjx29v99zfqc_3a_220_height_balanced_histogram_on_column_tusruppermburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:55 col:3of5 "Objects"
17:20:55 Frequency histogram on Column T_USR.(UPPER("PAYR_EMPEID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 * 34) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 * 34)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00150$'
ORDER BY a.endpoint_number

17:20:55 col:3of5.

17:20:55 col:3of5 "01719_sqld360_323688_0sjx29v99zfqc_3a_221_frequency_histogram_on_column_tusrupperpayrempeid.html"
17:20:55 col:3of5 "01720_sqld360_323688_0sjx29v99zfqc_3a_221_frequency_histogram_on_column_tusrupperpayrempeid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:55 col:3of5 "Objects"
17:20:55 Height Balanced histogram on Column T_USR.(UPPER("USR_FRSTNAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00151$'
ORDER BY a.endpoint_number

17:20:55 col:3of5.

17:20:55 col:3of5 "01721_sqld360_323688_0sjx29v99zfqc_3a_222_height_balanced_histogram_on_column_tusrupperusrfrstnam.html"
17:20:56 col:3of5 "01722_sqld360_323688_0sjx29v99zfqc_3a_222_height_balanced_histogram_on_column_tusrupperusrfrstnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:56 col:3of5 "Objects"
17:20:56 Height Balanced histogram on Column T_USR.(UPPER("THH_C4C"."REVERSE_STR"("MBUR_INSCID")))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00155$'
ORDER BY a.endpoint_number

17:20:56 col:3of5.

17:20:56 col:3of5 "01723_sqld360_323688_0sjx29v99zfqc_3a_223_height_balanced_histogram_on_column_tusrupperthhc4creversestrmburinscid.html"
17:20:56 col:3of5 "01724_sqld360_323688_0sjx29v99zfqc_3a_223_height_balanced_histogram_on_column_tusrupperthhc4creversestrmburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:56 col:3of5 "Objects"
17:20:56 Histograms on long strings

SELECT /*+ NO_MERGE */
       owner, table_name, column_name, data_type, data_length, num_buckets, avg_col_len, char_length
  FROM dba_tab_cols
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND num_buckets <= 253
   AND histogram <> 'NONE'
   --AND char_length > 32
   --AND data_length > 32
   AND char_length > 64
   AND data_length > 64
   AND avg_col_len > 6
 ORDER BY owner, table_name, column_id

17:20:56 col:3of5.

17:20:56 col:3of5 "01725_sqld360_323688_0sjx29v99zfqc_3a_224_histograms_on_long_strings.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:20:57 col:3of5 "Objects"
17:20:57 Constraints

SELECT /*+ NO_MERGE */
       *
  FROM dba_constraints
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, table_name, constraint_type

17:20:57 col:3of5.

17:20:57 col:3of5 "01726_sqld360_323688_0sjx29v99zfqc_3a_69_constraints.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:00 col:3of5 "Objects"
17:21:00 Views

SELECT /*+ NO_MERGE */
       *
  FROM dba_views
 WHERE (owner, view_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, view_name

17:21:00 col:3of5.

17:21:00 col:3of5 "01727_sqld360_323688_0sjx29v99zfqc_3a_70_views.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:03 col:3of5 "Objects"
17:21:03 LOBs

SELECT /*+ NO_MERGE */
       *
  FROM dba_lobs
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, table_name

17:21:03 col:3of5.

17:21:03 col:3of5 "01728_sqld360_323688_0sjx29v99zfqc_3a_71_lobs.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:04 col:3of5 "Objects"
17:21:04 Materialized Views

SELECT /*+ NO_MERGE */
       *
  FROM dba_mviews
 WHERE (owner, mview_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, mview_name

17:21:04 col:3of5.

17:21:04 col:3of5 "01729_sqld360_323688_0sjx29v99zfqc_3a_72_materialized_views.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:04 col:3of5 "Objects"
17:21:04 Clusters

SELECT /*+ NO_MERGE */
       *
  FROM dba_clusters
 WHERE cluster_name IN (select cluster_name
                          from dba_tables
                         where (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
                           and cluster_name is not null)
 ORDER BY owner, cluster_name

17:21:04 col:3of5.

17:21:04 col:3of5 "01730_sqld360_323688_0sjx29v99zfqc_3a_73_clusters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:04 col:3of5 "Objects"
17:21:04 Partition Key Columns

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_key_columns
 WHERE (owner, name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, name, column_position

17:21:04 col:3of5.

17:21:04 col:3of5 "01731_sqld360_323688_0sjx29v99zfqc_3a_74_partition_key_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:04 col:3of5 "Objects"
17:21:04 Unindexed Partition Key Columns

with k as (
select 	k.*, 'Partition' part_level
from 	dba_part_key_columns k
union all
select 	k.*, 'Subpartition'
from 	dba_subpart_key_columns k
)
SELECT  /*+ NO_MERGE */
	i.table_owner, i.table_name
, 	i.owner index_owner
, 	i.index_name
, 	i.index_type
,	'Partition' part_level
,	p.locality
,	p.partitioning_type
,	p.partition_count
, 	k.column_position part_column_position
,	k.column_name part_column_name
,	(	SELECT  LISTAGG(NVL(ie.extension,ic.column_name),',') WITHIN GROUP (ORDER BY ic.column_position)
		FROM	dba_ind_columns ic
			LEFT OUTER JOIN dba_stat_extensions ie
			ON ie.owner = ic.table_owner
			AND ie.table_name = ic.table_name
			AND ie.extension_name = ic.column_name
		where	i.owner = ic.index_owner
		and 	i.index_name = ic.index_name
		and	i.table_owner = ic.table_owner
		and	i.table_name = ic.table_name
	) column_list
from	dba_indexes i
,	dba_part_indexes p
,	k
where	i.index_type NOT IN('LOB')
AND     k.owner = i.owner
and	k.name = i.index_name
and 	k.object_type = 'INDEX'
and	i.partitioned = 'YES'
and	p.owner = i.owner
and	p.index_name = i.index_name
and	p.table_name = i.table_name
and     (i.table_owner, i.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
and not exists (
	select 'x'
	from 	dba_ind_columns ic
	where	i.owner = ic.index_owner
	and 	i.index_name = ic.index_name
	and	i.table_owner = ic.table_owner
	and	i.table_name = ic.table_name
	and	ic.column_name = k.column_name)
order by 1,2,3,4,5,6

17:21:04 col:3of5.

17:21:04 col:3of5 "01732_sqld360_323688_0sjx29v99zfqc_3a_75_unindexed_partition_key_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:05 col:3of5 "Objects"
17:21:05 Table Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_tables
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, table_name

17:21:05 col:3of5.

17:21:05 col:3of5 "01733_sqld360_323688_0sjx29v99zfqc_3a_76_table_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:05 col:3of5 "Objects"
17:21:05 Table Partitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_partitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, partition_position

17:21:05 col:3of5.

17:21:05 col:3of5 "01734_sqld360_323688_0sjx29v99zfqc_3a_77_table_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:05 col:3of5 "Objects"
17:21:05 Index Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_indexes
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY owner, index_name

17:21:05 col:3of5.

17:21:05 col:3of5 "01735_sqld360_323688_0sjx29v99zfqc_3a_78_index_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:06 col:3of5 "Objects"
17:21:06 Index Partitions

SELECT /*+ NO_MERGE */
       a.*
  FROM dba_ind_partitions a,
       dba_indexes b
 WHERE (b.table_owner, b.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND a.index_owner = b.owner
   AND a.index_name = b.index_name
 ORDER BY a.index_owner, a.index_name, a.partition_position

17:21:06 col:3of5.

17:21:06 col:3of5 "01736_sqld360_323688_0sjx29v99zfqc_3a_79_index_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:06 col:3of5 "Objects"
17:21:06 LOB Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_lobs
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, column_name

17:21:06 col:3of5.

17:21:06 col:3of5 "01737_sqld360_323688_0sjx29v99zfqc_3a_80_lob_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:06 col:3of5 "Objects"
17:21:06 LOB Partitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_lob_partitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, partition_position

17:21:06 col:3of5.

17:21:07 col:3of5 "01738_sqld360_323688_0sjx29v99zfqc_3a_81_lob_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:07 col:3of5 "Objects"
17:21:07 Partitions Columns

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:07 col:3of5 "Objects"
17:21:07 Table Subpartitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_subpartitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, subpartition_position

17:21:07 col:3of5.

17:21:07 col:3of5 "01740_sqld360_323688_0sjx29v99zfqc_3a_82_table_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:07 col:3of5 "Objects"
17:21:07 Index Subpartitions

SELECT /*+ NO_MERGE */
       a.*
  FROM dba_ind_subpartitions a,
       dba_indexes b
 WHERE (b.table_owner, b.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND a.index_owner = b.owner
   AND a.index_name = b.index_name
 ORDER BY a.index_owner, a.index_name, a.subpartition_position

17:21:07 col:3of5.

17:21:08 col:3of5 "01741_sqld360_323688_0sjx29v99zfqc_3a_84_index_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:08 col:3of5 "Objects"
17:21:08 LOB Subpartitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_lob_subpartitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, subpartition_position

17:21:08 col:3of5.

17:21:08 col:3of5 "01742_sqld360_323688_0sjx29v99zfqc_3a_85_lob_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:08 col:3of5 "Objects"
17:21:08 Table Modifications

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_modifications
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, partition_name, subpartition_name

17:21:08 col:3of5.

17:21:08 col:3of5 "01743_sqld360_323688_0sjx29v99zfqc_3a_86_table_modifications.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:08 col:3of5 "Objects"
17:21:08 Table Stats Preferences

SELECT /*+ NO_MERGE */
       o.owner, o.object_name, pref.*
  FROM sys.optstat_user_prefs$ pref,
       dba_objects o
 WHERE pref.obj# = o.object_id
   AND o.object_type = 'TABLE'
   AND (o.owner, o.object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY o.owner, o.object_name, pref.pname

17:21:08 col:3of5.

17:21:08 col:3of5 "01744_sqld360_323688_0sjx29v99zfqc_3a_87_table_stats_preferences.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:09 col:3of5 "Objects"
17:21:09 Triggers

SELECT /*+ NO_MERGE */
       *
  FROM dba_triggers
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                       FROM plan_table
                                      WHERE statement_id = 'LIST_OF_TABLES'
                                        AND remarks = '0sjx29v99zfqc')
 ORDER BY table_owner, table_name, trigger_name

17:21:09 col:3of5.

17:21:09 col:3of5 "01745_sqld360_323688_0sjx29v99zfqc_3a_88_triggers.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:09 col:3of5 "Objects"
17:21:09 Policies

SELECT /*+ NO_MERGE */
       *
  FROM dba_policies
 WHERE (object_owner, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                         FROM plan_table
                                        WHERE statement_id = 'LIST_OF_TABLES'
                                          AND remarks = '0sjx29v99zfqc')
 ORDER BY object_owner, object_name, policy_group, policy_name

17:21:09 col:3of5.

17:21:09 col:3of5 "01746_sqld360_323688_0sjx29v99zfqc_3a_89_policies.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:09 col:3of5 "Objects"
17:21:09 Audit Policies

SELECT /*+ NO_MERGE */
       *
  FROM dba_audit_policies
 WHERE (object_schema, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                          FROM plan_table
                                         WHERE statement_id = 'LIST_OF_TABLES'
                                           AND remarks = '0sjx29v99zfqc')
 ORDER BY object_schema, object_name, policy_owner, policy_name

17:21:09 col:3of5.

17:21:09 col:3of5 "01747_sqld360_323688_0sjx29v99zfqc_3a_90_audit_policies.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:10 col:3of5 "Objects"
17:21:10 Segments

SELECT /*+ NO_MERGE */ *
  FROM dba_segments
 WHERE (owner, segment_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                   FROM plan_table
                                  WHERE statement_id = 'LIST_OF_TABLES'
                                    AND remarks = '0sjx29v99zfqc'
                                  UNION ALL
                                 SELECT owner, index_name
                                   FROM dba_indexes
                                  WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                        FROM plan_table
                                                                       WHERE statement_id = 'LIST_OF_TABLES'
                                                                         AND remarks = '0sjx29v99zfqc')
                                  UNION ALL
                                 SELECT owner, segment_name
                                   FROM dba_lobs
                                  WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                  FROM plan_table
                                                                 WHERE statement_id = 'LIST_OF_TABLES'
                                                                   AND remarks = '0sjx29v99zfqc')
                                 )
 ORDER BY owner, segment_name, segment_type DESC

17:21:10 col:3of5.

17:21:10 col:3of5 "01748_sqld360_323688_0sjx29v99zfqc_3a_91_segments.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:11 col:3of5 "Objects"
17:21:11 Objects

SELECT /*+ NO_MERGE */ *
  FROM dba_objects
 WHERE (owner, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                   FROM plan_table
                                  WHERE statement_id = 'LIST_OF_TABLES'
                                    AND remarks = '0sjx29v99zfqc'
                                  UNION ALL
                                 SELECT owner, index_name
                                   FROM dba_indexes
                                  WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                        FROM plan_table
                                                                       WHERE statement_id = 'LIST_OF_TABLES'
                                                                         AND remarks = '0sjx29v99zfqc')
                                  UNION ALL
                                 SELECT owner, segment_name
                                   FROM dba_lobs
                                  WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                  FROM plan_table
                                                                 WHERE statement_id = 'LIST_OF_TABLES'
                                                                   AND remarks = '0sjx29v99zfqc')
                                 )
 ORDER BY owner, object_name, object_type DESC

17:21:11 col:3of5.

17:21:11 col:3of5 "01749_sqld360_323688_0sjx29v99zfqc_3a_92_objects.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:12 col:3of5 "Objects"
17:21:12 Tablespaces

SELECT /*+ NO_MERGE */ *
  FROM dba_tablespaces
 WHERE tablespace_name IN (SELECT /*+ UNNEST */ tablespace_name
                             FROM dba_segments
                            WHERE (owner, segment_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                              FROM plan_table
                                                             WHERE statement_id = 'LIST_OF_TABLES'
                                                               AND remarks = '0sjx29v99zfqc'
                                                             UNION ALL
                                                            SELECT owner, index_name
                                                              FROM dba_indexes
                                                             WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                                                   FROM plan_table
                                                                                                  WHERE statement_id = 'LIST_OF_TABLES'
                                                                                                    AND remarks = '0sjx29v99zfqc')
                                                             UNION ALL
                                                            SELECT owner, segment_name
                                                              FROM dba_lobs
                                                             WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                                             FROM plan_table
                                                                                            WHERE statement_id = 'LIST_OF_TABLES'
                                                                                              AND remarks = '0sjx29v99zfqc')
                                                            )
                           )
 ORDER BY tablespace_name

17:21:12 col:3of5.

17:21:12 col:3of5 "01750_sqld360_323688_0sjx29v99zfqc_3a_93_tablespaces.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:14 col:3of5 "Statistics History"
17:21:14 System Statistics History

SELECT /*+ NO_MERGE */
       h.*
  FROM sys.wri$_optstat_aux_history h
 ORDER BY h.savtime desc, sname

17:21:14 col:3of5.

17:21:14 col:3of5 "01751_sqld360_323688_0sjx29v99zfqc_3c_94_system_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:14 col:3of5 "Statistics History"
17:21:14 Tables Statistics History

SELECT /*+ NO_MERGE */
       o.owner owner,
       o.object_name table_name,
       TRUNC((h.rowcnt - LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 rowcnt_change_perc,
       TRUNC((h.blkcnt - LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blkcnt_change_perc,
       h.*
  FROM sys.wri$_optstat_tab_history h,
       dba_objects o
 WHERE (o.owner, o.object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND o.object_type = 'TABLE'
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY o.owner, o.object_name, h.savtime desc

17:21:14 col:3of5.

17:21:14 col:3of5 "01752_sqld360_323688_0sjx29v99zfqc_3c_95_tables_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:14 col:3of5 "Statistics History"
17:21:14 Indexes Statistics History

SELECT /*+ NO_MERGE */
       i.owner,
       i.table_name,
       i.index_name,
       TRUNC((h.blevel - LAG(h.blevel,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blevel,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blevel_change_perc,
       TRUNC((h.leafcnt - LAG(h.leafcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.leafcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 leafcnt_change_perc,
       TRUNC((h.clufac - LAG(h.clufac,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.clufac,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 clufac_change_perc,
       h.*
  FROM sys.wri$_optstat_ind_history h,
       dba_objects o,
       dba_indexes i
 WHERE (i.table_owner, i.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND i.index_name = o.object_name
   AND i.owner = o.owner
   AND o.object_type = 'INDEX'
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY i.table_owner, i.table_name, i.index_name, h.savtime desc

17:21:14 col:3of5.

17:21:14 col:3of5 "01753_sqld360_323688_0sjx29v99zfqc_3c_96_indexes_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:15 col:3of5 "Statistics History"
17:21:15 Columns Statistics History

SELECT /*+ NO_MERGE */
       c.owner,
       c.table_name,
       c.column_name,
       TRUNC((h.null_cnt - LAG(h.null_cnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name ORDER BY h.savtime)) / NULLIF(LAG(h.null_cnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name  ORDER BY h.savtime),0),2)*100 nullcnt_change_perc,
       TRUNC((h.distcnt - LAG(h.distcnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name ORDER BY h.savtime)) / NULLIF(LAG(h.distcnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name  ORDER BY h.savtime),0),2)*100 distcnt_change_perc,
       CASE WHEN h.flags > 64 THEN 'YES' ELSE 'NO' END had_histogram,
       h.*
  FROM sys.wri$_optstat_histhead_history h,
       dba_objects o,
       dba_tab_cols c
 WHERE (c.owner, c.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
   AND c.table_name = o.object_name
   AND c.owner = o.owner
   AND o.object_type = 'TABLE'
   AND o.object_id = h.obj#
   AND c.column_id = h.intcol#
   AND 'Y' = 'Y'
 ORDER BY c.owner, c.table_name, c.column_id, h.savtime desc

17:21:15 col:3of5.

17:21:15 col:3of5 "01754_sqld360_323688_0sjx29v99zfqc_3c_97_columns_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:18 col:3of5 "Statistics History"
17:21:18 Partitions Statistics History

SELECT /*+ NO_MERGE */
        p.table_owner,
        p.table_name,
        p.partition_name,
        p.partition_position,
        TRUNC((h.rowcnt - LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 rowcnt_change_perc,
        TRUNC((h.blkcnt - LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blkcnt_change_perc,
        h.*
  FROM (SELECT table_owner, table_name, partition_name, partition_position,
               ROW_NUMBER() OVER (ORDER BY partition_position) rn, COUNT(*) OVER () num_part
          FROM dba_tab_partitions
         WHERE (table_owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
       ) p,
       dba_objects o,
       sys.wri$_optstat_tab_history h
 WHERE (p.rn <= 10 OR p.rn >= num_part-10)
   AND o.object_type = 'TABLE PARTITION'
   AND p.table_owner = o.owner
   AND p.table_name = o.object_name
   AND p.partition_name = o.subobject_name
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY p.table_owner, p.table_name, p.partition_name, p.partition_position DESC, h.savtime desc

17:21:18 col:3of5.

17:21:18 col:3of5 "01755_sqld360_323688_0sjx29v99zfqc_3c_98_partitions_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:18 col:3of5 "In-Memory"
17:21:18 In-Memory Area

SELECT /*+ NO_MERGE */
       *
  FROM gv$inmemory_area
 ORDER BY inst_id, pool

17:21:18 col:3of5.

17:21:18 col:3of5 "01756_sqld360_323688_0sjx29v99zfqc_3d_99_inmemory_area.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:18 col:3of5 "In-Memory"
17:21:18 In-Memory Segments

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_segments
 WHERE (owner, segment_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY inst_id, owner, segment_name, partition_name, segment_type

17:21:18 col:3of5.

17:21:19 col:3of5 "01757_sqld360_323688_0sjx29v99zfqc_3d_100_inmemory_segments.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:19 col:3of5 "In-Memory"
17:21:19 In-Memory Header

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_header
 WHERE objd IN (SELECT object_id
                 FROM dba_objects
                WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc'))
 ORDER BY objd, inst_id

17:21:19 col:3of5.

17:21:19 col:3of5 "01758_sqld360_323688_0sjx29v99zfqc_3d_101_inmemory_header.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:19 col:3of5 "In-Memory"
17:21:19 In-Memory Column Level

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_column_level
 WHERE (owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY inst_id, owner, table_name, segment_column_id

17:21:19 col:3of5.

17:21:19 col:3of5 "01759_sqld360_323688_0sjx29v99zfqc_3d_102_inmemory_column_level.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:19 col:3of5 "Big Table Caching"
17:21:19 BT Scan Cache

SELECT /*+ NO_MERGE */
       *
  FROM gv$bt_scan_cache
 ORDER BY inst_id

17:21:19 col:3of5.

17:21:19 col:3of5 "01760_sqld360_323688_0sjx29v99zfqc_3e_103_bt_scan_cache.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:19 col:3of5 "Big Table Caching"
17:21:19 BT Scan Objects Temps

SELECT /*+ NO_MERGE */
       o.owner, o.object_name, o.subobject_name,
       bsc.*
  FROM gv$bt_scan_obj_temps bsc,
       dba_objects o
 WHERE bsc.dataobj# = o.data_object_id
   AND (o.owner, o.object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '0sjx29v99zfqc')
 ORDER BY bsc.inst_id, o.owner, o.object_name, o.subobject_name

17:21:19 col:3of5.

17:21:19 col:3of5 "01761_sqld360_323688_0sjx29v99zfqc_3e_104_bt_scan_objects_temps.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:20 col:3of5 "Metadata"
17:21:20 Metadata script
Completed: 17:21:38

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:38 col:4of5 "System Impact"
17:21:38 SQL Execute Time for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = a.instance_number
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:38 col:4of5.

17:21:38 col:4of5 "01763_sqld360_323688_0sjx29v99zfqc_4a_106_sql_execute_time_for_cluster.html"
17:21:39 col:4of5 "01764_sqld360_323688_0sjx29v99zfqc_4a_106_sql_execute_time_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:39 col:4of5 "System Impact"
17:21:39 SQL Execute Time for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = 1
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:39 col:4of5.

17:21:39 col:4of5 "01765_sqld360_323688_0sjx29v99zfqc_4a_107_sql_execute_time_for_instance_1.html"
17:21:39 col:4of5 "01766_sqld360_323688_0sjx29v99zfqc_4a_107_sql_execute_time_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:39 col:4of5 "System Impact"
17:21:39 SQL Execute Time for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = 2
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:39 col:4of5.

17:21:39 col:4of5 "01767_sqld360_323688_0sjx29v99zfqc_4a_108_sql_execute_time_for_instance_2.html"
17:21:39 col:4of5 "01768_sqld360_323688_0sjx29v99zfqc_4a_108_sql_execute_time_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:40 col:4of5 "System Impact"
17:21:40 Peak Demand for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  position
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:21:40 col:4of5.

17:21:40 col:4of5 "01769_sqld360_323688_0sjx29v99zfqc_4a_109_peak_demand_for_recent_executions_for_cluster.html"
17:21:40 col:4of5 "01770_sqld360_323688_0sjx29v99zfqc_4a_109_peak_demand_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:40 col:4of5 "System Impact"
17:21:40 Peak Demand for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  1
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:21:40 col:4of5.

17:21:40 col:4of5 "01771_sqld360_323688_0sjx29v99zfqc_4a_110_peak_demand_for_recent_executions_for_instance_1.html"
17:21:40 col:4of5 "01772_sqld360_323688_0sjx29v99zfqc_4a_110_peak_demand_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:40 col:4of5 "System Impact"
17:21:40 Peak Demand for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  2
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:21:40 col:4of5.

17:21:40 col:4of5 "01773_sqld360_323688_0sjx29v99zfqc_4a_111_peak_demand_for_recent_executions_for_instance_2.html"
17:21:40 col:4of5 "01774_sqld360_323688_0sjx29v99zfqc_4a_111_peak_demand_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:40 col:4of5 "System Impact"
17:21:40 Peak Demand for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  position
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:40 col:4of5.

17:21:41 col:4of5 "01775_sqld360_323688_0sjx29v99zfqc_4a_112_peak_demand_for_historical_executions_for_cluster.html"
17:21:41 col:4of5 "01776_sqld360_323688_0sjx29v99zfqc_4a_112_peak_demand_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:41 col:4of5 "System Impact"
17:21:41 Peak Demand for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  1
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:41 col:4of5.

17:21:41 col:4of5 "01777_sqld360_323688_0sjx29v99zfqc_4a_113_peak_demand_for_historical_executions_for_instance_1.html"
17:21:41 col:4of5 "01778_sqld360_323688_0sjx29v99zfqc_4a_113_peak_demand_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:41 col:4of5 "System Impact"
17:21:41 Peak Demand for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  2
                   AND remarks = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:41 col:4of5.

17:21:42 col:4of5 "01779_sqld360_323688_0sjx29v99zfqc_4a_114_peak_demand_for_historical_executions_for_instance_2.html"
17:21:42 col:4of5 "01780_sqld360_323688_0sjx29v99zfqc_4a_114_peak_demand_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:42 col:4of5 "System Impact"
17:21:42 Distinct number of sessions executing for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  position
           AND remarks = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:42 col:4of5.

17:21:42 col:4of5 "01781_sqld360_323688_0sjx29v99zfqc_4a_115_distinct_number_of_sessions_executing_for_cluster.html"
17:21:42 col:4of5 "01782_sqld360_323688_0sjx29v99zfqc_4a_115_distinct_number_of_sessions_executing_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:42 col:4of5 "System Impact"
17:21:42 Distinct number of sessions executing for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  1
           AND remarks = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:42 col:4of5.

17:21:43 col:4of5 "01783_sqld360_323688_0sjx29v99zfqc_4a_116_distinct_number_of_sessions_executing_for_instance_1.html"
17:21:43 col:4of5 "01784_sqld360_323688_0sjx29v99zfqc_4a_116_distinct_number_of_sessions_executing_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:43 col:4of5 "System Impact"
17:21:43 Distinct number of sessions executing for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  2
           AND remarks = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:21:43 col:4of5.

17:21:43 col:4of5 "01785_sqld360_323688_0sjx29v99zfqc_4a_117_distinct_number_of_sessions_executing_for_instance_2.html"
17:21:43 col:4of5 "01786_sqld360_323688_0sjx29v99zfqc_4a_117_distinct_number_of_sessions_executing_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:43 col:4of5 "System Impact"
17:21:43 Total Buffer Gets for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:43 col:4of5.

17:21:44 col:4of5 "01787_sqld360_323688_0sjx29v99zfqc_4a_118_total_buffer_gets_for_cluster.html"
17:21:44 col:4of5 "01788_sqld360_323688_0sjx29v99zfqc_4a_118_total_buffer_gets_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:44 col:4of5 "System Impact"
17:21:44 Total Buffer Gets for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:44 col:4of5.

17:21:44 col:4of5 "01789_sqld360_323688_0sjx29v99zfqc_4a_119_total_buffer_gets_for_instance_1.html"
17:21:44 col:4of5 "01790_sqld360_323688_0sjx29v99zfqc_4a_119_total_buffer_gets_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:44 col:4of5 "System Impact"
17:21:44 Total Buffer Gets for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:44 col:4of5.

17:21:44 col:4of5 "01791_sqld360_323688_0sjx29v99zfqc_4a_120_total_buffer_gets_for_instance_2.html"
17:21:44 col:4of5 "01792_sqld360_323688_0sjx29v99zfqc_4a_120_total_buffer_gets_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:45 col:4of5 "System Impact"
17:21:45 Total Rows Processed per for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:45 col:4of5.

17:21:45 col:4of5 "01793_sqld360_323688_0sjx29v99zfqc_4a_121_total_rows_processed_per_for_cluster.html"
17:21:45 col:4of5 "01794_sqld360_323688_0sjx29v99zfqc_4a_121_total_rows_processed_per_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:45 col:4of5 "System Impact"
17:21:45 Total Rows Processed per for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:45 col:4of5.

17:21:45 col:4of5 "01795_sqld360_323688_0sjx29v99zfqc_4a_122_total_rows_processed_per_for_instance_1.html"
17:21:45 col:4of5 "01796_sqld360_323688_0sjx29v99zfqc_4a_122_total_rows_processed_per_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:45 col:4of5 "System Impact"
17:21:45 Total Rows Processed per for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:45 col:4of5.

17:21:45 col:4of5 "01797_sqld360_323688_0sjx29v99zfqc_4a_123_total_rows_processed_per_for_instance_2.html"
17:21:46 col:4of5 "01798_sqld360_323688_0sjx29v99zfqc_4a_123_total_rows_processed_per_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:46 col:4of5 "System Impact"
17:21:46 Total number of Executions for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:46 col:4of5.

17:21:46 col:4of5 "01799_sqld360_323688_0sjx29v99zfqc_4a_124_total_number_of_executions_for_cluster.html"
17:21:46 col:4of5 "01800_sqld360_323688_0sjx29v99zfqc_4a_124_total_number_of_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:46 col:4of5 "System Impact"
17:21:46 Total number of Executions for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:46 col:4of5.

17:21:46 col:4of5 "01801_sqld360_323688_0sjx29v99zfqc_4a_125_total_number_of_executions_for_instance_1.html"
17:21:46 col:4of5 "01802_sqld360_323688_0sjx29v99zfqc_4a_125_total_number_of_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:46 col:4of5 "System Impact"
17:21:46 Total number of Executions for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:46 col:4of5.

17:21:47 col:4of5 "01803_sqld360_323688_0sjx29v99zfqc_4a_126_total_number_of_executions_for_instance_2.html"
17:21:47 col:4of5 "01804_sqld360_323688_0sjx29v99zfqc_4a_126_total_number_of_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:47 col:4of5 "System Impact"
17:21:47 Version Count and Sharable Memory for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:47 col:4of5.

17:21:47 col:4of5 "01805_sqld360_323688_0sjx29v99zfqc_4a_127_version_count_and_sharable_memory_for_cluster.html"
17:21:47 col:4of5 "01806_sqld360_323688_0sjx29v99zfqc_4a_127_version_count_and_sharable_memory_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:47 col:4of5 "System Impact"
17:21:47 Version Count and Sharable Memory for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:47 col:4of5.

17:21:47 col:4of5 "01807_sqld360_323688_0sjx29v99zfqc_4a_128_version_count_and_sharable_memory_for_instance_1.html"
17:21:47 col:4of5 "01808_sqld360_323688_0sjx29v99zfqc_4a_128_version_count_and_sharable_memory_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:48 col:4of5 "System Impact"
17:21:48 Version Count and Sharable Memory for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:48 col:4of5.

17:21:48 col:4of5 "01809_sqld360_323688_0sjx29v99zfqc_4a_129_version_count_and_sharable_memory_for_instance_2.html"
17:21:48 col:4of5 "01810_sqld360_323688_0sjx29v99zfqc_4a_129_version_count_and_sharable_memory_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:48 col:4of5 "Execution metrics"
17:21:48 SQL Execute Time by Wait Class for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:48 col:4of5.

17:21:48 col:4of5 "01811_sqld360_323688_0sjx29v99zfqc_4b_130_sql_execute_time_by_wait_class_for_cluster.html"
17:21:48 col:4of5 "01812_sqld360_323688_0sjx29v99zfqc_4b_130_sql_execute_time_by_wait_class_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:48 col:4of5 "Execution metrics"
17:21:48 SQL Execute Time by Wait Class for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:48 col:4of5.

17:21:48 col:4of5 "01813_sqld360_323688_0sjx29v99zfqc_4b_131_sql_execute_time_by_wait_class_for_instance_1.html"
17:21:49 col:4of5 "01814_sqld360_323688_0sjx29v99zfqc_4b_131_sql_execute_time_by_wait_class_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:49 col:4of5 "Execution metrics"
17:21:49 SQL Execute Time by Wait Class for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '0sjx29v99zfqc') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:49 col:4of5.

17:21:49 col:4of5 "01815_sqld360_323688_0sjx29v99zfqc_4b_132_sql_execute_time_by_wait_class_for_instance_2.html"
17:21:49 col:4of5 "01816_sqld360_323688_0sjx29v99zfqc_4b_132_sql_execute_time_by_wait_class_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:49 col:4of5 "Execution metrics"
17:21:49 Elapsed Time per recent executions for Cluster

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  position
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:49 col:4of5.

17:21:49 col:4of5 "01817_sqld360_323688_0sjx29v99zfqc_4b_133_elapsed_time_per_recent_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:49 col:4of5 "Execution metrics"
17:21:49 Elapsed Time per recent executions for Instance 1

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  1
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:49 col:4of5.

17:21:50 col:4of5 "01818_sqld360_323688_0sjx29v99zfqc_4b_134_elapsed_time_per_recent_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:50 col:4of5 "Execution metrics"
17:21:50 Elapsed Time per recent executions for Instance 2

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  2
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:50 col:4of5.

17:21:50 col:4of5 "01819_sqld360_323688_0sjx29v99zfqc_4b_135_elapsed_time_per_recent_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:50 col:4of5 "Execution metrics"
17:21:50 Elapsed Time per historical executions for Cluster

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  position
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:50 col:4of5.

17:21:50 col:4of5 "01820_sqld360_323688_0sjx29v99zfqc_4b_136_elapsed_time_per_historical_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:52 col:4of5 "Execution metrics"
17:21:52 Elapsed Time per historical executions for Instance 1

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  1
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:52 col:4of5.

17:21:52 col:4of5 "01821_sqld360_323688_0sjx29v99zfqc_4b_137_elapsed_time_per_historical_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:53 col:4of5 "Execution metrics"
17:21:53 Elapsed Time per historical executions for Instance 2

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '0sjx29v99zfqc'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  2
   AND remarks = '0sjx29v99zfqc'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:21:53 col:4of5.

17:21:53 col:4of5 "01822_sqld360_323688_0sjx29v99zfqc_4b_138_elapsed_time_per_historical_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:54 col:4of5 "Execution metrics"
17:21:54 Avg Buffer Gets/Execution for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = a.instance_number
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:54 col:4of5.

17:21:54 col:4of5 "01823_sqld360_323688_0sjx29v99zfqc_4b_139_avg_buffer_getsexecution_for_cluster.html"
17:21:54 col:4of5 "01824_sqld360_323688_0sjx29v99zfqc_4b_139_avg_buffer_getsexecution_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:55 col:4of5 "Execution metrics"
17:21:55 Avg Buffer Gets/Execution for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = 1
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:55 col:4of5.

17:21:55 col:4of5 "01825_sqld360_323688_0sjx29v99zfqc_4b_140_avg_buffer_getsexecution_for_instance_1.html"
17:21:55 col:4of5 "01826_sqld360_323688_0sjx29v99zfqc_4b_140_avg_buffer_getsexecution_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:55 col:4of5 "Execution metrics"
17:21:55 Avg Buffer Gets/Execution for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = 2
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:55 col:4of5.

17:21:55 col:4of5 "01827_sqld360_323688_0sjx29v99zfqc_4b_141_avg_buffer_getsexecution_for_instance_2.html"
17:21:55 col:4of5 "01828_sqld360_323688_0sjx29v99zfqc_4b_141_avg_buffer_getsexecution_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:55 col:4of5 "Execution metrics"
17:21:55 Avg Rows Processed/Execution for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:55 col:4of5.

17:21:56 col:4of5 "01829_sqld360_323688_0sjx29v99zfqc_4b_142_avg_rows_processedexecution_for_cluster.html"
17:21:56 col:4of5 "01830_sqld360_323688_0sjx29v99zfqc_4b_142_avg_rows_processedexecution_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:56 col:4of5 "Execution metrics"
17:21:56 Avg Rows Processed/Execution for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:56 col:4of5.

17:21:56 col:4of5 "01831_sqld360_323688_0sjx29v99zfqc_4b_143_avg_rows_processedexecution_for_instance_1.html"
17:21:56 col:4of5 "01832_sqld360_323688_0sjx29v99zfqc_4b_143_avg_rows_processedexecution_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:56 col:4of5 "Execution metrics"
17:21:56 Avg Rows Processed/Execution for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:56 col:4of5.

17:21:56 col:4of5 "01833_sqld360_323688_0sjx29v99zfqc_4b_144_avg_rows_processedexecution_for_instance_2.html"
17:21:56 col:4of5 "01834_sqld360_323688_0sjx29v99zfqc_4b_144_avg_rows_processedexecution_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:57 col:4of5 "Execution metrics"
17:21:57 Avg Elapsed Time/Execution (total) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:57 col:4of5.

17:21:57 col:4of5 "01835_sqld360_323688_0sjx29v99zfqc_4b_145_avg_elapsed_timeexecution_total_for_cluster.html"
17:21:57 col:4of5 "01836_sqld360_323688_0sjx29v99zfqc_4b_145_avg_elapsed_timeexecution_total_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:57 col:4of5 "Execution metrics"
17:21:57 Avg Elapsed Time/Execution (total) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:57 col:4of5.

17:21:57 col:4of5 "01837_sqld360_323688_0sjx29v99zfqc_4b_146_avg_elapsed_timeexecution_total_for_instance_1.html"
17:21:57 col:4of5 "01838_sqld360_323688_0sjx29v99zfqc_4b_146_avg_elapsed_timeexecution_total_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:57 col:4of5 "Execution metrics"
17:21:57 Avg Elapsed Time/Execution (total) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:57 col:4of5.

17:21:58 col:4of5 "01839_sqld360_323688_0sjx29v99zfqc_4b_147_avg_elapsed_timeexecution_total_for_instance_2.html"
17:21:58 col:4of5 "01840_sqld360_323688_0sjx29v99zfqc_4b_147_avg_elapsed_timeexecution_total_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:58 col:4of5 "Execution metrics"
17:21:58 Avg Elapsed Time/Execution (delta) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:58 col:4of5.

17:21:58 col:4of5 "01841_sqld360_323688_0sjx29v99zfqc_4b_148_avg_elapsed_timeexecution_delta_for_cluster.html"
17:21:58 col:4of5 "01842_sqld360_323688_0sjx29v99zfqc_4b_148_avg_elapsed_timeexecution_delta_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:58 col:4of5 "Execution metrics"
17:21:58 Avg Elapsed Time/Execution (delta) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:58 col:4of5.

17:21:58 col:4of5 "01843_sqld360_323688_0sjx29v99zfqc_4b_149_avg_elapsed_timeexecution_delta_for_instance_1.html"
17:21:58 col:4of5 "01844_sqld360_323688_0sjx29v99zfqc_4b_149_avg_elapsed_timeexecution_delta_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:59 col:4of5 "Execution metrics"
17:21:59 Avg Elapsed Time/Execution (delta) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:59 col:4of5.

17:21:59 col:4of5 "01845_sqld360_323688_0sjx29v99zfqc_4b_150_avg_elapsed_timeexecution_delta_for_instance_2.html"
17:21:59 col:4of5 "01846_sqld360_323688_0sjx29v99zfqc_4b_150_avg_elapsed_timeexecution_delta_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:59 col:4of5 "Execution metrics"
17:21:59 Avg Elapsed Time/Execution (moving 1d) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:59 col:4of5.

17:21:59 col:4of5 "01847_sqld360_323688_0sjx29v99zfqc_4b_151_avg_elapsed_timeexecution_moving_1d_for_cluster.html"
17:21:59 col:4of5 "01848_sqld360_323688_0sjx29v99zfqc_4b_151_avg_elapsed_timeexecution_moving_1d_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:21:59 col:4of5 "Execution metrics"
17:21:59 Avg Elapsed Time/Execution (moving 1d) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:21:59 col:4of5.

17:22:00 col:4of5 "01849_sqld360_323688_0sjx29v99zfqc_4b_152_avg_elapsed_timeexecution_moving_1d_for_instance_1.html"
17:22:00 col:4of5 "01850_sqld360_323688_0sjx29v99zfqc_4b_152_avg_elapsed_timeexecution_moving_1d_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:00 col:4of5 "Execution metrics"
17:22:00 Avg Elapsed Time/Execution (moving 1d) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '0sjx29v99zfqc') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:22:00 col:4of5.

17:22:00 col:4of5 "01851_sqld360_323688_0sjx29v99zfqc_4b_153_avg_elapsed_timeexecution_moving_1d_for_instance_2.html"
17:22:00 col:4of5 "01852_sqld360_323688_0sjx29v99zfqc_4b_153_avg_elapsed_timeexecution_moving_1d_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:00 col:4of5 "Execution metrics"
17:22:00 Avg and Median Elapsed Time/Execution for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  position
                   AND remarks = '0sjx29v99zfqc'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:22:00 col:4of5.

17:22:00 col:4of5 "01853_sqld360_323688_0sjx29v99zfqc_4b_154_avg_and_median_elapsed_timeexecution_for_recent_executions_for_cluster.html"
17:22:00 col:4of5 "01854_sqld360_323688_0sjx29v99zfqc_4b_154_avg_and_median_elapsed_timeexecution_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:01 col:4of5 "Execution metrics"
17:22:01 Avg and Median Elapsed Time/Execution for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  1
                   AND remarks = '0sjx29v99zfqc'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:22:01 col:4of5.

17:22:01 col:4of5 "01855_sqld360_323688_0sjx29v99zfqc_4b_155_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_1.html"
17:22:01 col:4of5 "01856_sqld360_323688_0sjx29v99zfqc_4b_155_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:01 col:4of5 "Execution metrics"
17:22:01 Avg and Median Elapsed Time/Execution for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  2
                   AND remarks = '0sjx29v99zfqc'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:22:01 col:4of5.

17:22:01 col:4of5 "01857_sqld360_323688_0sjx29v99zfqc_4b_156_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_2.html"
17:22:01 col:4of5 "01858_sqld360_323688_0sjx29v99zfqc_4b_156_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:01 col:4of5 "Execution metrics"
17:22:01 Avg and Median Elapsed Time/Execution for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  position
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:01 col:4of5.

17:22:01 col:4of5 "01859_sqld360_323688_0sjx29v99zfqc_4b_157_avg_and_median_elapsed_timeexecution_for_historical_executions_for_cluster.html"
17:22:01 col:4of5 "01860_sqld360_323688_0sjx29v99zfqc_4b_157_avg_and_median_elapsed_timeexecution_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:02 col:4of5 "Execution metrics"
17:22:02 Avg and Median Elapsed Time/Execution for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  1
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:02 col:4of5.

17:22:02 col:4of5 "01861_sqld360_323688_0sjx29v99zfqc_4b_158_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_1.html"
17:22:02 col:4of5 "01862_sqld360_323688_0sjx29v99zfqc_4b_158_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:02 col:4of5 "Execution metrics"
17:22:02 Avg and Median Elapsed Time/Execution for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  2
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:02 col:4of5.

17:22:03 col:4of5 "01863_sqld360_323688_0sjx29v99zfqc_4b_159_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_2.html"
17:22:03 col:4of5 "01864_sqld360_323688_0sjx29v99zfqc_4b_159_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:03 col:4of5 "Execution metrics"
17:22:03 Streak of non-executing SQL for recent executions for Cluster

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  position
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:03 col:4of5.

17:22:03 col:4of5 "01865_sqld360_323688_0sjx29v99zfqc_4b_160_streak_of_nonexecuting_sql_for_recent_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:03 col:4of5 "Execution metrics"
17:22:03 Streak of non-executing SQL for recent executions for Instance 1

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  1
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:03 col:4of5.

17:22:03 col:4of5 "01866_sqld360_323688_0sjx29v99zfqc_4b_161_streak_of_nonexecuting_sql_for_recent_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:03 col:4of5 "Execution metrics"
17:22:03 Streak of non-executing SQL for recent executions for Instance 2

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  2
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:03 col:4of5.

17:22:04 col:4of5 "01867_sqld360_323688_0sjx29v99zfqc_4b_162_streak_of_nonexecuting_sql_for_recent_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:04 col:4of5 "Execution metrics"
17:22:04 Streak of non-executing SQL for historical executions for Cluster

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  position
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:04 col:4of5.

17:22:04 col:4of5 "01868_sqld360_323688_0sjx29v99zfqc_4b_163_streak_of_nonexecuting_sql_for_historical_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:04 col:4of5 "Execution metrics"
17:22:04 Streak of non-executing SQL for historical executions for Instance 1

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  1
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:04 col:4of5.

17:22:04 col:4of5 "01869_sqld360_323688_0sjx29v99zfqc_4b_164_streak_of_nonexecuting_sql_for_historical_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:04 col:4of5 "Execution metrics"
17:22:04 Streak of non-executing SQL for historical executions for Instance 2

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '0sjx29v99zfqc'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  2
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:22:04 col:4of5.

17:22:04 col:4of5 "01870_sqld360_323688_0sjx29v99zfqc_4b_165_streak_of_nonexecuting_sql_for_historical_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:04 col:4of5 "Execution metrics per PHV"
17:22:04 Total number of Executions per PHV for Cluster

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:22:04 col:4of5.

17:22:04 col:4of5 "01871_sqld360_323688_0sjx29v99zfqc_4c_166_total_number_of_executions_per_phv_for_cluster.html"
17:22:04 col:4of5 "01872_sqld360_323688_0sjx29v99zfqc_4c_166_total_number_of_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:05 col:4of5 "Execution metrics per PHV"
17:22:05 Total number of Executions per PHV for Instance 1

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:22:05 col:4of5.

17:22:05 col:4of5 "01873_sqld360_323688_0sjx29v99zfqc_4c_167_total_number_of_executions_per_phv_for_instance_1.html"
17:22:05 col:4of5 "01874_sqld360_323688_0sjx29v99zfqc_4c_167_total_number_of_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:05 col:4of5 "Execution metrics per PHV"
17:22:05 Total number of Executions per PHV for Instance 2

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:22:05 col:4of5.

17:22:05 col:4of5 "01875_sqld360_323688_0sjx29v99zfqc_4c_168_total_number_of_executions_per_phv_for_instance_2.html"
17:22:05 col:4of5 "01876_sqld360_323688_0sjx29v99zfqc_4c_168_total_number_of_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:05 col:4of5 "Execution metrics per PHV"
17:22:05 Number of execution per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:05 col:4of5.

17:22:05 col:4of5 "01877_sqld360_323688_0sjx29v99zfqc_4c_169_number_of_execution_per_phv_from_awr_for_cluster.html"
17:22:06 col:4of5 "01878_sqld360_323688_0sjx29v99zfqc_4c_169_number_of_execution_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:06 col:4of5 "Execution metrics per PHV"
17:22:06 Number of execution per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:06 col:4of5.

17:22:06 col:4of5 "01879_sqld360_323688_0sjx29v99zfqc_4c_170_number_of_execution_per_phv_from_awr_for_instance_1.html"
17:22:06 col:4of5 "01880_sqld360_323688_0sjx29v99zfqc_4c_170_number_of_execution_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:06 col:4of5 "Execution metrics per PHV"
17:22:06 Number of execution per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:06 col:4of5.

17:22:07 col:4of5 "01881_sqld360_323688_0sjx29v99zfqc_4c_171_number_of_execution_per_phv_from_awr_for_instance_2.html"
17:22:07 col:4of5 "01882_sqld360_323688_0sjx29v99zfqc_4c_171_number_of_execution_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:07 col:4of5 "Execution metrics per PHV"
17:22:07 Total Elapsed Time for recent executions per PHV for Cluster

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:07 col:4of5.

17:22:07 col:4of5 "01883_sqld360_323688_0sjx29v99zfqc_4c_172_total_elapsed_time_for_recent_executions_per_phv_for_cluster.html"
17:22:07 col:4of5 "01884_sqld360_323688_0sjx29v99zfqc_4c_172_total_elapsed_time_for_recent_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:07 col:4of5 "Execution metrics per PHV"
17:22:07 Total Elapsed Time for recent executions per PHV for Instance 1

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:07 col:4of5.

17:22:07 col:4of5 "01885_sqld360_323688_0sjx29v99zfqc_4c_173_total_elapsed_time_for_recent_executions_per_phv_for_instance_1.html"
17:22:07 col:4of5 "01886_sqld360_323688_0sjx29v99zfqc_4c_173_total_elapsed_time_for_recent_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:08 col:4of5 "Execution metrics per PHV"
17:22:08 Total Elapsed Time for recent executions per PHV for Instance 2

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:08 col:4of5.

17:22:08 col:4of5 "01887_sqld360_323688_0sjx29v99zfqc_4c_174_total_elapsed_time_for_recent_executions_per_phv_for_instance_2.html"
17:22:08 col:4of5 "01888_sqld360_323688_0sjx29v99zfqc_4c_174_total_elapsed_time_for_recent_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:08 col:4of5 "Execution metrics per PHV"
17:22:08 Total Elapsed Time for historical executions per PHV for Cluster

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:08 col:4of5.

17:22:08 col:4of5 "01889_sqld360_323688_0sjx29v99zfqc_4c_175_total_elapsed_time_for_historical_executions_per_phv_for_cluster.html"
17:22:08 col:4of5 "01890_sqld360_323688_0sjx29v99zfqc_4c_175_total_elapsed_time_for_historical_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:08 col:4of5 "Execution metrics per PHV"
17:22:08 Total Elapsed Time for historical executions per PHV for Instance 1

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:08 col:4of5.

17:22:08 col:4of5 "01891_sqld360_323688_0sjx29v99zfqc_4c_176_total_elapsed_time_for_historical_executions_per_phv_for_instance_1.html"
17:22:08 col:4of5 "01892_sqld360_323688_0sjx29v99zfqc_4c_176_total_elapsed_time_for_historical_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:08 col:4of5 "Execution metrics per PHV"
17:22:08 Total Elapsed Time for historical executions per PHV for Instance 2

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '0sjx29v99zfqc'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:22:08 col:4of5.

17:22:08 col:4of5 "01893_sqld360_323688_0sjx29v99zfqc_4c_177_total_elapsed_time_for_historical_executions_per_phv_for_instance_2.html"
17:22:08 col:4of5 "01894_sqld360_323688_0sjx29v99zfqc_4c_177_total_elapsed_time_for_historical_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:09 col:4of5 "Execution metrics per PHV"
17:22:09 Total Elapsed Time per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:09 col:4of5.

17:22:09 col:4of5 "01895_sqld360_323688_0sjx29v99zfqc_4c_178_total_elapsed_time_per_phv_from_awr_for_cluster.html"
17:22:09 col:4of5 "01896_sqld360_323688_0sjx29v99zfqc_4c_178_total_elapsed_time_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:09 col:4of5 "Execution metrics per PHV"
17:22:09 Total Elapsed Time per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:09 col:4of5.

17:22:09 col:4of5 "01897_sqld360_323688_0sjx29v99zfqc_4c_179_total_elapsed_time_per_phv_from_awr_for_instance_1.html"
17:22:09 col:4of5 "01898_sqld360_323688_0sjx29v99zfqc_4c_179_total_elapsed_time_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:10 col:4of5 "Execution metrics per PHV"
17:22:10 Total Elapsed Time per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:10 col:4of5.

17:22:10 col:4of5 "01899_sqld360_323688_0sjx29v99zfqc_4c_180_total_elapsed_time_per_phv_from_awr_for_instance_2.html"
17:22:10 col:4of5 "01900_sqld360_323688_0sjx29v99zfqc_4c_180_total_elapsed_time_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:10 col:4of5 "Execution metrics per PHV"
17:22:10 Avg Elapsed Time/Execution per PHV for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_1370721523  ,
       NVL(phv2 ,0) phv2_4066339909  ,
       NVL(phv3 ,0) phv3_312717859  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  position
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (          1370721523,          4066339909,           312717859,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:22:10 col:4of5.

17:22:10 col:4of5 "01901_sqld360_323688_0sjx29v99zfqc_4c_181_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_cluster.html"
17:22:10 col:4of5 "01902_sqld360_323688_0sjx29v99zfqc_4c_181_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:11 col:4of5 "Execution metrics per PHV"
17:22:11 Avg Elapsed Time/Execution per PHV for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_1370721523  ,
       NVL(phv2 ,0) phv2_4066339909  ,
       NVL(phv3 ,0) phv3_312717859  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  1
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (          1370721523,          4066339909,           312717859,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:22:11 col:4of5.

17:22:11 col:4of5 "01903_sqld360_323688_0sjx29v99zfqc_4c_182_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_1.html"
17:22:11 col:4of5 "01904_sqld360_323688_0sjx29v99zfqc_4c_182_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:11 col:4of5 "Execution metrics per PHV"
17:22:11 Avg Elapsed Time/Execution per PHV for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_1370721523  ,
       NVL(phv2 ,0) phv2_4066339909  ,
       NVL(phv3 ,0) phv3_312717859  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  2
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (          1370721523,          4066339909,           312717859,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:22:11 col:4of5.

17:22:11 col:4of5 "01905_sqld360_323688_0sjx29v99zfqc_4c_183_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_2.html"
17:22:11 col:4of5 "01906_sqld360_323688_0sjx29v99zfqc_4c_183_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:11 col:4of5 "Execution metrics per PHV"
17:22:11 Avg Elapsed Time/Execution per PHV for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1259275079  ,
       NVL(phv2 ,0) phv2_3910764974  ,
       NVL(phv3 ,0) phv3_2646870572  ,
       NVL(phv4 ,0) phv4_1707006562  ,
       NVL(phv5 ,0) phv5_312717859  ,
       NVL(phv6 ,0) phv6_4066339909  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_4160728300  ,
       NVL(phv9 ,0) phv9_230548702  ,
       NVL(phv10,0) phv10_1870894448 ,
       NVL(phv11,0) phv11_1705091248 ,
       NVL(phv12,0) phv12_1169281721 ,
       NVL(phv13,0) phv13_2835568740 ,
       NVL(phv14,0) phv14_2644118522 ,
       NVL(phv15,0) phv15_2031822258
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           4160728300 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =            230548702 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           1169281721 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  position
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          1259275079,          3910764974,          2646870572,          1707006562,           312717859,          4066339909,
                                                  2788351063,          4160728300,           230548702,          1870894448,          1705091248,          1169281721,
                                                  2835568740,          2644118522,          2031822258)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:11 col:4of5.

17:22:11 col:4of5 "01907_sqld360_323688_0sjx29v99zfqc_4c_184_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_cluster.html"
17:22:12 col:4of5 "01908_sqld360_323688_0sjx29v99zfqc_4c_184_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:12 col:4of5 "Execution metrics per PHV"
17:22:12 Avg Elapsed Time/Execution per PHV for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1259275079  ,
       NVL(phv2 ,0) phv2_3910764974  ,
       NVL(phv3 ,0) phv3_2646870572  ,
       NVL(phv4 ,0) phv4_1707006562  ,
       NVL(phv5 ,0) phv5_312717859  ,
       NVL(phv6 ,0) phv6_4066339909  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_4160728300  ,
       NVL(phv9 ,0) phv9_230548702  ,
       NVL(phv10,0) phv10_1870894448 ,
       NVL(phv11,0) phv11_1705091248 ,
       NVL(phv12,0) phv12_1169281721 ,
       NVL(phv13,0) phv13_2835568740 ,
       NVL(phv14,0) phv14_2644118522 ,
       NVL(phv15,0) phv15_2031822258
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           4160728300 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =            230548702 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           1169281721 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  1
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          1259275079,          3910764974,          2646870572,          1707006562,           312717859,          4066339909,
                                                  2788351063,          4160728300,           230548702,          1870894448,          1705091248,          1169281721,
                                                  2835568740,          2644118522,          2031822258)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:12 col:4of5.

17:22:12 col:4of5 "01909_sqld360_323688_0sjx29v99zfqc_4c_185_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_1.html"
17:22:12 col:4of5 "01910_sqld360_323688_0sjx29v99zfqc_4c_185_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:12 col:4of5 "Execution metrics per PHV"
17:22:12 Avg Elapsed Time/Execution per PHV for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1259275079  ,
       NVL(phv2 ,0) phv2_3910764974  ,
       NVL(phv3 ,0) phv3_2646870572  ,
       NVL(phv4 ,0) phv4_1707006562  ,
       NVL(phv5 ,0) phv5_312717859  ,
       NVL(phv6 ,0) phv6_4066339909  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_4160728300  ,
       NVL(phv9 ,0) phv9_230548702  ,
       NVL(phv10,0) phv10_1870894448 ,
       NVL(phv11,0) phv11_1705091248 ,
       NVL(phv12,0) phv12_1169281721 ,
       NVL(phv13,0) phv13_2835568740 ,
       NVL(phv14,0) phv14_2644118522 ,
       NVL(phv15,0) phv15_2031822258
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            312717859 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           4160728300 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =            230548702 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           1169281721 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  2
                           AND remarks = '0sjx29v99zfqc'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          1259275079,          3910764974,          2646870572,          1707006562,           312717859,          4066339909,
                                                  2788351063,          4160728300,           230548702,          1870894448,          1705091248,          1169281721,
                                                  2835568740,          2644118522,          2031822258)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:12 col:4of5.

17:22:13 col:4of5 "01911_sqld360_323688_0sjx29v99zfqc_4c_186_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_2.html"
17:22:13 col:4of5 "01912_sqld360_323688_0sjx29v99zfqc_4c_186_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:13 col:4of5 "Execution metrics per PHV"
17:22:13 Avg Elapsed Time/Execution per PHV (total) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:13 col:4of5.

17:22:13 col:4of5 "01913_sqld360_323688_0sjx29v99zfqc_4c_187_avg_elapsed_timeexecution_per_phv_total_from_awr_for_cluster.html"
17:22:13 col:4of5 "01914_sqld360_323688_0sjx29v99zfqc_4c_187_avg_elapsed_timeexecution_per_phv_total_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:14 col:4of5 "Execution metrics per PHV"
17:22:14 Avg Elapsed Time/Execution per PHV (total) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:14 col:4of5.

17:22:14 col:4of5 "01915_sqld360_323688_0sjx29v99zfqc_4c_188_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_1.html"
17:22:14 col:4of5 "01916_sqld360_323688_0sjx29v99zfqc_4c_188_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:14 col:4of5 "Execution metrics per PHV"
17:22:14 Avg Elapsed Time/Execution per PHV (total) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:14 col:4of5.

17:22:14 col:4of5 "01917_sqld360_323688_0sjx29v99zfqc_4c_189_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_2.html"
17:22:15 col:4of5 "01918_sqld360_323688_0sjx29v99zfqc_4c_189_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:15 col:4of5 "Execution metrics per PHV"
17:22:15 Avg Elapsed Time/Execution per PHV (delta) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:15 col:4of5.

17:22:15 col:4of5 "01919_sqld360_323688_0sjx29v99zfqc_4c_190_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_cluster.html"
17:22:15 col:4of5 "01920_sqld360_323688_0sjx29v99zfqc_4c_190_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:16 col:4of5 "Execution metrics per PHV"
17:22:16 Avg Elapsed Time/Execution per PHV (delta) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:16 col:4of5.

17:22:16 col:4of5 "01921_sqld360_323688_0sjx29v99zfqc_4c_191_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_1.html"
17:22:16 col:4of5 "01922_sqld360_323688_0sjx29v99zfqc_4c_191_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:16 col:4of5 "Execution metrics per PHV"
17:22:16 Avg Elapsed Time/Execution per PHV (delta) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:16 col:4of5.

17:22:16 col:4of5 "01923_sqld360_323688_0sjx29v99zfqc_4c_192_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_2.html"
17:22:16 col:4of5 "01924_sqld360_323688_0sjx29v99zfqc_4c_192_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:17 col:4of5 "Execution metrics per PHV"
17:22:17 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_1592253080  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2380592788  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_157137232  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_1259275079  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_2835568740  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_1370721523  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_2788351063  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_2644118522  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_2031822258  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_1705091248 ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_1870894448 ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_3910764974 ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_2646870572 ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_1707006562 ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           1592253080 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2380592788 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =            157137232 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =           1259275079 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =           2835568740 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           1370721523 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           2788351063 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =           2644118522 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =           2031822258 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =           1705091248 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =           1870894448 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =           3910764974 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =           2646870572 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =           1707006562 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =           4066339909 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:17 col:4of5.

17:22:17 col:4of5 "01925_sqld360_323688_0sjx29v99zfqc_4c_193_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_cluster.html"
17:22:17 col:4of5 "01926_sqld360_323688_0sjx29v99zfqc_4c_193_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:17 col:4of5 "Execution metrics per PHV"
17:22:17 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_1592253080  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2380592788  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_157137232  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_1259275079  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_2835568740  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_1370721523  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_2788351063  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_2644118522  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_2031822258  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_1705091248 ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_1870894448 ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_3910764974 ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_2646870572 ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_1707006562 ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           1592253080 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2380592788 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =            157137232 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =           1259275079 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =           2835568740 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           1370721523 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           2788351063 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =           2644118522 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =           2031822258 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =           1705091248 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =           1870894448 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =           3910764974 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =           2646870572 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =           1707006562 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =           4066339909 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:17 col:4of5.

17:22:17 col:4of5 "01927_sqld360_323688_0sjx29v99zfqc_4c_194_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_1.html"
17:22:18 col:4of5 "01928_sqld360_323688_0sjx29v99zfqc_4c_194_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:18 col:4of5 "Execution metrics per PHV"
17:22:18 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_1592253080  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2380592788  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_157137232  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_1259275079  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_2835568740  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_1370721523  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_2788351063  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_2644118522  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_2031822258  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_1705091248 ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_1870894448 ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_3910764974 ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_2646870572 ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_1707006562 ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2380592788 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =            157137232 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =           1259275079 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =           2835568740 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           1370721523 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           2788351063 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =           2644118522 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =           2031822258 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =           1705091248 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =           1870894448 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =           3910764974 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =           2646870572 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =           1707006562 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =           4066339909 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           1592253080 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2380592788 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =            157137232 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =           1259275079 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =           2835568740 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           1370721523 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           2788351063 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =           2644118522 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =           2031822258 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =           1705091248 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =           1870894448 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =           3910764974 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =           2646870572 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =           1707006562 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =           4066339909 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:18 col:4of5.

17:22:18 col:4of5 "01929_sqld360_323688_0sjx29v99zfqc_4c_195_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_2.html"
17:22:18 col:4of5 "01930_sqld360_323688_0sjx29v99zfqc_4c_195_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:19 col:4of5 "Execution metrics per PHV"
17:22:19 Avg Buffer Gets/Row/Execution per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:19 col:4of5.

17:22:19 col:4of5 "01931_sqld360_323688_0sjx29v99zfqc_4c_196_avg_buffer_getsrowexecution_per_phv_from_awr_for_cluster.html"
17:22:19 col:4of5 "01932_sqld360_323688_0sjx29v99zfqc_4c_196_avg_buffer_getsrowexecution_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:19 col:4of5 "Execution metrics per PHV"
17:22:19 Avg Buffer Gets/Row/Execution per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:19 col:4of5.

17:22:19 col:4of5 "01933_sqld360_323688_0sjx29v99zfqc_4c_197_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_1.html"
17:22:20 col:4of5 "01934_sqld360_323688_0sjx29v99zfqc_4c_197_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:20 col:4of5 "Execution metrics per PHV"
17:22:20 Avg Buffer Gets/Row/Execution per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:20 col:4of5.

17:22:20 col:4of5 "01935_sqld360_323688_0sjx29v99zfqc_4c_198_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_2.html"
17:22:20 col:4of5 "01936_sqld360_323688_0sjx29v99zfqc_4c_198_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:20 col:4of5 "Execution metrics per PHV"
17:22:20 Execution Plan Cost per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:20 col:4of5.

17:22:20 col:4of5 "01937_sqld360_323688_0sjx29v99zfqc_4c_199_execution_plan_cost_per_phv_from_awr_for_cluster.html"
17:22:21 col:4of5 "01938_sqld360_323688_0sjx29v99zfqc_4c_199_execution_plan_cost_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:21 col:4of5 "Execution metrics per PHV"
17:22:21 Execution Plan Cost per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:21 col:4of5.

17:22:21 col:4of5 "01939_sqld360_323688_0sjx29v99zfqc_4c_200_execution_plan_cost_per_phv_from_awr_for_instance_1.html"
17:22:21 col:4of5 "01940_sqld360_323688_0sjx29v99zfqc_4c_200_execution_plan_cost_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:22 col:4of5 "Execution metrics per PHV"
17:22:22 Execution Plan Cost per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_1592253080  ,
       NVL(phv2 ,0) phv2_2380592788  ,
       NVL(phv3 ,0) phv3_157137232  ,
       NVL(phv4 ,0) phv4_1259275079  ,
       NVL(phv5 ,0) phv5_2835568740  ,
       NVL(phv6 ,0) phv6_1370721523  ,
       NVL(phv7 ,0) phv7_2788351063  ,
       NVL(phv8 ,0) phv8_2644118522  ,
       NVL(phv9 ,0) phv9_2031822258  ,
       NVL(phv10,0) phv10_1705091248 ,
       NVL(phv11,0) phv11_1870894448 ,
       NVL(phv12,0) phv12_3910764974 ,
       NVL(phv13,0) phv13_2646870572 ,
       NVL(phv14,0) phv14_1707006562 ,
       NVL(phv15,0) phv15_4066339909
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           1592253080 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2380592788 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =            157137232 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =           1259275079 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =           2835568740 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           1370721523 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           2788351063 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =           2644118522 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =           2031822258 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =           1705091248 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =           1870894448 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =           3910764974 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =           2646870572 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =           1707006562 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =           4066339909 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '0sjx29v99zfqc'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          1592253080,          2380592788,           157137232,          1259275079,          2835568740,          1370721523,
                                                     2788351063,          2644118522,          2031822258,          1705091248,          1870894448,          3910764974,
                                                     2646870572,          1707006562,          4066339909)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:22:22 col:4of5.

17:22:22 col:4of5 "01941_sqld360_323688_0sjx29v99zfqc_4c_201_execution_plan_cost_per_phv_from_awr_for_instance_2.html"
17:22:22 col:4of5 "01942_sqld360_323688_0sjx29v99zfqc_4c_201_execution_plan_cost_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:22 col:5of5 "10053 Trace"
17:22:22 10053 Trace


SP2-0310: unable to open file "sql/--sqld360_5g_remote_10053.sql"
203
Completed: 17:22:25

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:25 col:5of5 "SQL Monitor Reports"
17:22:25 SQL Monitor Reports
Completed: 17:22:40


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:40 col:5of5 "DDL"
17:22:40 Clean DDL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:22:57 col:5of5 "Stats"
17:22:57 Set Stats

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:23:01 col:5of5 "SQL Tuning Advisor"
17:23:01 STA report
Completed: 17:23:02

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

DEFINE _DATE           = "2020-11-06/17:23:02" (CHAR)
DEFINE _CONNECT_IDENTIFIER = "PRD1" (CHAR)
DEFINE _USER           = "SYS" (CHAR)
DEFINE _PRIVILEGE      = "AS SYSDBA" (CHAR)
DEFINE _SQLPLUS_RELEASE = "1201000200" (CHAR)
DEFINE _EDITOR         = "ed" (CHAR)
DEFINE _O_VERSION      = "Oracle Database 12c EE Extreme Perf Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, Oracle Label Security,
OLAP, Advanced Analytics and Real Application Testing options" (CHAR)
DEFINE _O_RELEASE      = "1201000200" (CHAR)
DEFINE ASH_VALIDATION  = "" (CHAR)
DEFINE V_DOLLAR        = "V$" (CHAR)
DEFINE MY_SID          = "5432" (CHAR)
DEFINE LICENSE_PACK    = "T" (CHAR)
DEFINE DIAGNOSTICS_PACK = "Y" (CHAR)
DEFINE SKIP_DIAGNOSTICS = "" (CHAR)
DEFINE TUNING_PACK     = "Y" (CHAR)
DEFINE SKIP_TUNING     = "" (CHAR)
DEFINE CUSTOM_CONFIG_FILENAME = "null" (CHAR)
DEFINE EDB360_ESTIMATED_HRS = "1" (CHAR)
DEFINE ASH_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE MY_SPOOL_FILENAME = "awr_ash_pre_check_PRD.txt" (CHAR)
DEFINE ASH_EDB360_DAYS = "31" (CHAR)
DEFINE ASH_FTS_ON_EDB360 = "250" (CHAR)
DEFINE ASH_DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE NUMBER_OF_INSTANCES =                    2 (NUMBER)
DEFINE THIS_DBID       =           2109323688 (NUMBER)
DEFINE ASH_MIN_SNAP_ID = "0" (CHAR)
DEFINE ASH_MAX_SNAP_ID = "0" (CHAR)
DEFINE LAST_PURGE_TIME = "2020-09-18T00:28:18" (CHAR)
DEFINE DAYS_SINCE_PURGE = "49.5" (CHAR)
DEFINE ASH_LAST_ANALYZED = "2020-09-19T06:58:17" (CHAR)
DEFINE ASH_CBO_STATS_AGE_DAYS = "48.2" (CHAR)
DEFINE PERCENT_OF_INSERTS = "" (CHAR)
DEFINE ASH_SIZE_GB     = "2.6 GBs" (CHAR)
DEFINE LAST_DDL_TIME   = "2020-09-18T21:40:39" (CHAR)
DEFINE SEG_LAST_DDL_TIME = "2020-09-18T21:40:39" (CHAR)
DEFINE LAST_DDL_AGE_DAYS = "48.6" (CHAR)
DEFINE ASH_FTS_SECONDS = "122" (CHAR)
DEFINE ASH_DAYS_OF_HISTORY = "92.8" (CHAR)
DEFINE ASH_MED_SAMPLE_DATE = "2020-07-08T03:20:17" (CHAR)
DEFINE ASH_MEDIAN_AGE_DAYS = "121.3" (CHAR)
DEFINE IGNORE_THIS     =                    0 (NUMBER)
DEFINE EDB360_FTS_SECONDS = "1" (CHAR)
DEFINE _RC             = "10" (CHAR)
DEFINE EDB360_SECTIONS = "" (CHAR)
DEFINE SQL_TRACE_LEVEL = "1" (CHAR)
DEFINE EDB360_CONF_DAYS = "31" (CHAR)
DEFINE EDB360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_FROM = "0730" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_TO = "1930" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_FROM = "2" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_TO = "6" (CHAR)
DEFINE EDB360_CONF_MAX_HOURS = "24" (CHAR)
DEFINE EDB360_CHART_WIDTH = "809px" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_INDEX = "N" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_FILE = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_MEM = "N" (CHAR)
DEFINE EDB360_CONF_INCL_SQL_MON = "N" (CHAR)
DEFINE EDB360_CONF_INCL_STAT_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PX_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SEGMENTS = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SOURCE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE EDB360_EADAM_ROW_LIMIT = "10000000" (CHAR)
DEFINE TOOL_REPO_USER  = "" (CHAR)
DEFINE EDB360_OUTPUT_DIRECTORY = "" (CHAR)
DEFINE EDB360_MOVE_DIRECTORY = "" (CHAR)
DEFINE SKIP_ESP_AND_ESCP = "" (CHAR)
DEFINE EDB360_CONFIG_DBID = "" (CHAR)
DEFINE EDB360_HOST_NAME_SEPARATOR = "" (CHAR)
DEFINE EDB360_HOST_NAME_POSITION = "" (CHAR)
DEFINE EDB360_HOST_NAME_OCCURRENCE = "" (CHAR)
DEFINE EDB360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_XML = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_CSV = "N" (CHAR)
DEFINE EDB360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PERFHUB = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_DIFF_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RANGE_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ADDM_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_ANALY_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TKPROF = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PLOT_AWR = "N" (CHAR)
DEFINE EDB360_CONF_SERIES_SELECTION = "N" (CHAR)
DEFINE EDB360_MAX_WORK_DAYS_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_WORK_DAYS_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_HISTORY_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_HISTORY = "1" (CHAR)
DEFINE EDB360_MAX_5WD_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_5WD_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_7D_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_7D   = "1" (CHAR)
DEFINE EDB360_CONF_TOP_SQL = "16" (CHAR)
DEFINE EDB360_CONF_TOP_CUR = "2" (CHAR)
DEFINE EDB360_CONF_TOP_SIG = "2" (CHAR)
DEFINE EDB360_CONF_PLANX_TOP = "16" (CHAR)
DEFINE EDB360_CONF_SQLMON_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLASH_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLHC_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP = "8" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP_TC = "0" (CHAR)
DEFINE TOOL_PREFIX_1   = "dba_hist#" (CHAR)
DEFINE TOOL_PREFIX_2   = "dba#" (CHAR)
DEFINE TOOL_PREFIX_3   = "gv#" (CHAR)
DEFINE TOOL_PREFIX_4   = "v#" (CHAR)
DEFINE EDB360_CONF_TOOL_PAGE = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank">" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_ICON = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank"><img src="database.jpg" alt="eDB360" height="33" width="52" /></a>" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE EDB360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE EDB360_VYYNN    = "v192" (CHAR)
DEFINE EDB360_VRSN     = "v192 (2019-03-23)" (CHAR)
DEFINE EDB360_COPYRIGHT = " (c) 2019" (CHAR)
DEFINE EDB360_BYPASS   = "" (CHAR)
DEFINE AWR_HIST_PREFIX = "DBA_HIST_" (CHAR)
DEFINE AWR_OBJECT_PREFIX = "dba_hist_" (CHAR)
DEFINE DVA_VIEW_PREFIX = "DBA_" (CHAR)
DEFINE DVA_OBJECT_PREFIX = "dba_" (CHAR)
DEFINE GV_VIEW_PREFIX  = "GV$" (CHAR)
DEFINE GV_OBJECT_PREFIX = "gv$" (CHAR)
DEFINE V_VIEW_PREFIX   = "V$" (CHAR)
DEFINE V_OBJECT_PREFIX = "v$" (CHAR)
DEFINE EDB360_DBID     = "2109323688" (CHAR)
DEFINE HISTORY_DAYS    = "31" (CHAR)
DEFINE EDB360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE EDB360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE EDB360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE EDB360_DATE_FROM = "2020-10-06T11:22:16" (CHAR)
DEFINE EDB360_DATE_TO  = "2020-11-06T11:22:16" (CHAR)
DEFINE HIST_WORK_DAYS  = "23" (CHAR)
DEFINE SKIP_EXTRAS     = "" (CHAR)
DEFINE EDB360_0G       = "edb360_0g_" (CHAR)
DEFINE EDB360_1A       = "edb360_1a_" (CHAR)
DEFINE EDB360_1B       = "edb360_1b_" (CHAR)
DEFINE EDB360_1C       = "edb360_1c_" (CHAR)
DEFINE EDB360_1D       = "edb360_1d_" (CHAR)
DEFINE EDB360_1E       = "edb360_1e_" (CHAR)
DEFINE EDB360_1F       = "edb360_1f_" (CHAR)
DEFINE EDB360_1G       = "edb360_1g_" (CHAR)
DEFINE EDB360_2A       = "edb360_2a_" (CHAR)
DEFINE EDB360_2B       = "edb360_2b_" (CHAR)
DEFINE EDB360_2C       = "edb360_2c_" (CHAR)
DEFINE EDB360_2D       = "edb360_2d_" (CHAR)
DEFINE EDB360_2E       = "edb360_2e_" (CHAR)
DEFINE EDB360_3A       = "edb360_3a_" (CHAR)
DEFINE EDB360_3B       = "edb360_3b_" (CHAR)
DEFINE EDB360_3C       = "edb360_3c_" (CHAR)
DEFINE EDB360_3D       = "edb360_3d_" (CHAR)
DEFINE EDB360_3E       = "edb360_3e_" (CHAR)
DEFINE EDB360_3F       = "edb360_3f_" (CHAR)
DEFINE EDB360_3G       = "edb360_3g_" (CHAR)
DEFINE EDB360_3H       = "edb360_3h_" (CHAR)
DEFINE EDB360_3I       = "edb360_3i_" (CHAR)
DEFINE EDB360_3J       = "edb360_3j_" (CHAR)
DEFINE EDB360_4A       = "edb360_4a_" (CHAR)
DEFINE EDB360_4B       = "edb360_4b_" (CHAR)
DEFINE EDB360_4C       = "edb360_4c_" (CHAR)
DEFINE EDB360_4D       = "edb360_4d_" (CHAR)
DEFINE EDB360_4E       = "edb360_4e_" (CHAR)
DEFINE EDB360_4F       = "edb360_4f_" (CHAR)
DEFINE EDB360_4G       = "edb360_4g_" (CHAR)
DEFINE EDB360_4H       = "edb360_4h_" (CHAR)
DEFINE EDB360_4I       = "edb360_4i_" (CHAR)
DEFINE EDB360_4J       = "edb360_4j_" (CHAR)
DEFINE EDB360_4K       = "edb360_4k_" (CHAR)
DEFINE EDB360_4L       = "edb360_4l_" (CHAR)
DEFINE EDB360_5A       = "edb360_5a_" (CHAR)
DEFINE EDB360_5B       = "edb360_5b_" (CHAR)
DEFINE EDB360_5C       = "edb360_5c_" (CHAR)
DEFINE EDB360_5D       = "edb360_5d_" (CHAR)
DEFINE EDB360_5E       = "edb360_5e_" (CHAR)
DEFINE EDB360_5F       = "edb360_5f_" (CHAR)
DEFINE EDB360_5G       = "edb360_5g_" (CHAR)
DEFINE EDB360_6A       = "edb360_6a_" (CHAR)
DEFINE EDB360_6B       = "edb360_6b_" (CHAR)
DEFINE EDB360_6C       = "edb360_6c_" (CHAR)
DEFINE EDB360_6D       = "edb360_6d_" (CHAR)
DEFINE EDB360_6E       = "edb360_6e_" (CHAR)
DEFINE EDB360_6F       = "edb360_6f_" (CHAR)
DEFINE EDB360_6G       = "edb360_6g_" (CHAR)
DEFINE EDB360_6H       = "edb360_6h_" (CHAR)
DEFINE EDB360_6I       = "edb360_6i_" (CHAR)
DEFINE EDB360_6J       = "edb360_6j_" (CHAR)
DEFINE EDB360_6K       = "edb360_6k_" (CHAR)
DEFINE EDB360_6L       = "edb360_6l_" (CHAR)
DEFINE EDB360_6M       = "edb360_6m_" (CHAR)
DEFINE EDB360_6N       = "edb360_6n_" (CHAR)
DEFINE EDB360_7A       = "edb360_7a_" (CHAR)
DEFINE EDB360_7B       = "edb360_7b_" (CHAR)
DEFINE EDB360_7C       = "edb360_7c_" (CHAR)
DEFINE EDB360_PREFIX   = "edb360" (CHAR)
DEFINE ECR_COLLECTION_KEY = "PRD1219183590" (CHAR)
DEFINE SKIP_SCRIPT     = "sql/edb360_0f_skip_script.sql " (CHAR)
DEFINE EDB360_CON_ID   = "4" (CHAR)
DEFINE EDB360_PDB_NAME = "FRSTPROD" (CHAR)
DEFINE EDB360_DBMOD    = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NUMBER = "1" (CHAR)
DEFINE DATABASE_NAME_SHORT = "prd" (CHAR)
DEFINE HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_NAME_SUFFIX = "" (CHAR)
DEFINE ESP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_HASH       = "742967" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD = "20201106" (CHAR)
DEFINE MAIN_TABLE      = "DBA_ADVISOR_TASK" (CHAR)
DEFINE TITLE           = "STA report" (CHAR)
DEFINE TITLE_NO_SPACES = "sta_report" (CHAR)
DEFINE TITLE_SUFFIX    = "" (CHAR)
DEFINE EDB360_FILE_TIME = "20201106_1122" (CHAR)
DEFINE COMMON_EDB360_PREFIX = "edb360_323688" (CHAR)
DEFINE EDB360_MAIN_REPORT = "00001_edb360_323688_index" (CHAR)
DEFINE EDB360_LOG      = "00002_edb360_323688_log" (CHAR)
DEFINE EDB360_LOG2     = "00003_edb360_323688_log2" (CHAR)
DEFINE EDB360_LOG3     = "00004_edb360_323688_log3" (CHAR)
DEFINE EDB360_TKPROF   = "00005_edb360_323688_tkprof" (CHAR)
DEFINE EDB360_MAIN_FILENAME = "edb360_323688_742967" (CHAR)
DEFINE EDB360_ZIP_FILENAME = "edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_TRACEFILE_IDENTIFIER = "edb360_323688" (CHAR)
DEFINE EDB360_TAR_FILENAME = "00008_edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_MV_HOST_COMMAND = "" (CHAR)
DEFINE DB_VERS_OFE     = "12.1.0.2" (CHAR)
DEFINE SKIP_AWR        = "" (CHAR)
DEFINE SKIP_STATSPACK  = "--skip--" (CHAR)
DEFINE ESP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_MAX_DAYS   = "365" (CHAR)
DEFINE ESCP_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE ESCP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE ESCP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_COLLECTION_YYYYMMDD_HHMI = "20201106_1122" (CHAR)
DEFINE ESCP_COLLECTION_DAYS = "8" (CHAR)
DEFINE ESCP_THIS_DBID  = "2109323688" (CHAR)
DEFINE ESCP_THIS_INST_NUM = "1" (CHAR)
DEFINE ESCP_MIN_SNAP_ID = "4578" (CHAR)
DEFINE MAX_DAYS        = "365" (CHAR)
DEFINE INCLUDE_IC      = "Y" (CHAR)
DEFINE INCLUDE_NETW    = "Y" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD_HHMI = "20201106_1128" (CHAR)
DEFINE COLLECTION_DAYS = "8" (CHAR)
DEFINE SKIP_ON_10G     = "" (CHAR)
DEFINE ECR_SQ_FACT_HINTS = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE ECR_DATE_FORMAT = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE ECR_DBID        = "2109323688" (CHAR)
DEFINE ECR_INSTANCE_NUMBER = "1" (CHAR)
DEFINE ECR_MIN_SNAP_ID = "4578" (CHAR)
DEFINE ECR_COLLECTION_HOST = "aupp-hroradb-f9exx1" (CHAR)
DEFINE USE_ON_10G      = "--" (CHAR)
DEFINE DB_VERSION      = "12.1.0.2.0" (CHAR)
DEFINE SKIP_10G_COLUMN = "" (CHAR)
DEFINE SKIP_10G_SCRIPT = "" (CHAR)
DEFINE SKIP_11G_COLUMN = "" (CHAR)
DEFINE SKIP_11G_SCRIPT = "" (CHAR)
DEFINE SKIP_11R1_COLUMN = "" (CHAR)
DEFINE SKIP_11R1_SCRIPT = "" (CHAR)
DEFINE SKIP_NON_REPO_COLUMN = "" (CHAR)
DEFINE SKIP_NON_REPO_SCRIPT = "" (CHAR)
DEFINE SKIP_12C_COLUMN = " -- skip 12c " (CHAR)
DEFINE SKIP_12C_SCRIPT = " echo skip 12c " (CHAR)
DEFINE SKIP_12R2_COLUMN = "" (CHAR)
DEFINE SKIP_12R2_SCRIPT = "" (CHAR)
DEFINE SKIP_18C_COLUMN = "" (CHAR)
DEFINE SKIP_18C_SCRIPT = "" (CHAR)
DEFINE SKIP_19C_COLUMN = "" (CHAR)
DEFINE SKIP_19C_SCRIPT = "" (CHAR)
DEFINE AVG_CPU_COUNT   =                   16 (NUMBER)
DEFINE SUM_CPU_COUNT   =                   32 (NUMBER)
DEFINE AVG_CORE_COUNT  = "16" (CHAR)
DEFINE AVG_THREAD_COUNT = "16" (CHAR)
DEFINE CPU_LOAD_THRESHOLD =                   32 (NUMBER)
DEFINE HOSTS_COUNT     = "2" (CHAR)
DEFINE CORES_THREADS_HOSTS = "cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE TOOL_SYSDATE    = "20201106171511" (CHAR)
DEFINE BETWEEN_DATES   = ", between 2020-10-06T17:15:11 and 2020-11-06T17:15:11" (CHAR)
DEFINE MINIMUM_SNAP_ID = "3485" (CHAR)
DEFINE MAXIMUM_SNAP_ID = "4974" (CHAR)
DEFINE INST1_PRESENT   = "1" (CHAR)
DEFINE INST2_PRESENT   = "2" (CHAR)
DEFINE INST3_PRESENT   = "" (CHAR)
DEFINE INST4_PRESENT   = "" (CHAR)
DEFINE INST5_PRESENT   = "" (CHAR)
DEFINE INST6_PRESENT   = "" (CHAR)
DEFINE INST7_PRESENT   = "" (CHAR)
DEFINE INST8_PRESENT   = "" (CHAR)
DEFINE IS_SINGLE_INSTANCE = "" (CHAR)
DEFINE SKIP_INST1      = "" (CHAR)
DEFINE SKIP_INST2      = "" (CHAR)
DEFINE SKIP_INST3      = "-- skip inst3" (CHAR)
DEFINE SKIP_INST4      = "-- skip inst4" (CHAR)
DEFINE SKIP_INST5      = "-- skip inst5" (CHAR)
DEFINE SKIP_INST6      = "-- skip inst6" (CHAR)
DEFINE SKIP_INST7      = "-- skip inst7" (CHAR)
DEFINE SKIP_INST8      = "-- skip inst8" (CHAR)
DEFINE CHART_SETUP_DRIVER = "99800_edb360_323688_chart_setup_driver1.sql" (CHAR)
DEFINE EDB360_EADAM_SNAPS = "-666, 4925, 4869, 4821, 4887, 4839, 4791, 3948, 3900, 3852, 3996, 3804, 3756" (CHAR)
DEFINE EBS_RELEASE     = "" (CHAR)
DEFINE EBS_SYSTEM_NAME = "" (CHAR)
DEFINE SIEBEL_SCHEMA   = "" (CHAR)
DEFINE SIEBEL_APP_VER  = "" (CHAR)
DEFINE PSFT_SCHEMA     = "" (CHAR)
DEFINE PSFT_TOOLS_REL  = "" (CHAR)
DEFINE EDB360_SKIP_HTML = "" (CHAR)
DEFINE EDB360_SKIP_XML = " echo skip xml " (CHAR)
DEFINE EDB360_SKIP_TEXT = " echo skip text " (CHAR)
DEFINE EDB360_SKIP_CSV = " echo skip csv " (CHAR)
DEFINE EDB360_SKIP_LINE = "" (CHAR)
DEFINE EDB360_SKIP_PIE = "" (CHAR)
DEFINE EDB360_SKIP_BAR = "" (CHAR)
DEFINE EDB360_SKIP_METADATA = "" (CHAR)
DEFINE EDB360_SKIP_ASH_MEM = " echo skip ash mem " (CHAR)
DEFINE EDB360_SKIP_SQL_MON = " echo skip sql mon " (CHAR)
DEFINE EDB360_SKIP_STAT_MEM = "" (CHAR)
DEFINE EDB360_SKIP_PX_MEM = "" (CHAR)
DEFINE TOP_LEVEL_HINTS = "NO_MERGE" (CHAR)
DEFINE SQ_FACT_HINTS   = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE DS_HINT         = "DYNAMIC_SAMPLING(4)" (CHAR)
DEFINE ASH_HINTS1      = " FULL(h.ash) FULL(h.evt) FULL(h.sn) USE_HASH(h.sn h.ash h.evt) " (CHAR)
DEFINE ASH_HINTS2      = " FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.ash) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE ASH_HINTS3      = " USE_HASH(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn h.INT$DBA_HIST_ACT_SESS_HISTORY.ash h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE DEF_MAX_ROWS    = "50000" (CHAR)
DEFINE MAX_ROWS        = "50000" (CHAR)
DEFINE EXCLUSION_LIST  = "('ANONYMOUS','APEX_030200','APEX_040000','APEX_040200','APEX_SSO','APPQOSSYS','CTXSYS','DBSNMP','DIP','EXFSYS','FLOWS_FILES','MDSYS','OLAPSYS','ORACLE_OCM','ORDDATA','ORDPLUGINS','ORDSYS','OUTLN','OWBSYS')" (CHAR)
DEFINE EXCLUSION_LIST2 = "('SI_INFORMTN_SCHEMA','SQLTXADMIN','SQLTXPLAIN','SYS','SYSMAN','SYSTEM','TRCANLZR','WMSYS','XDB','XS$NULL','PERFSTAT','STDBYPERF','MGDSYS','OJVMSYS')" (CHAR)
DEFINE SKIP_HTML       = "" (CHAR)
DEFINE SKIP_TEXT       = "" (CHAR)
DEFINE SKIP_CSV        = "" (CHAR)
DEFINE SKIP_LCH        = "Y" (CHAR)
DEFINE SKIP_LCH2       = "--skip--" (CHAR)
DEFINE SKIP_PCH        = "Y" (CHAR)
DEFINE SKIP_BCH        = "Y" (CHAR)
DEFINE SKIP_ALL        = "" (CHAR)
DEFINE ABSTRACT        = "" (CHAR)
DEFINE ABSTRACT2       = "" (CHAR)
DEFINE FOOT            = "" (CHAR)
DEFINE ABSTRACT_UOM    = "Memory is accounted as power of two (binary) while storage and network traffic as power of ten (decimal). <br />" (CHAR)
DEFINE CHARTYPE        = "LineChart" (CHAR)
DEFINE STACKED         = "" (CHAR)
DEFINE HAXIS           = "0sjx29v99zfqc 12.1.0.2.0 cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE VAXIS           = "Optimizer cost" (CHAR)
DEFINE VBASELINE       = "" (CHAR)
DEFINE BAR_HEIGHT      = "45%" (CHAR)
DEFINE TIT_01          = "1592253080" (CHAR)
DEFINE TIT_02          = "2380592788" (CHAR)
DEFINE TIT_03          = "157137232" (CHAR)
DEFINE TIT_04          = "1259275079" (CHAR)
DEFINE TIT_05          = "2835568740" (CHAR)
DEFINE TIT_06          = "1370721523" (CHAR)
DEFINE TIT_07          = "2788351063" (CHAR)
DEFINE TIT_08          = "2644118522" (CHAR)
DEFINE TIT_09          = "2031822258" (CHAR)
DEFINE TIT_10          = "1705091248" (CHAR)
DEFINE TIT_11          = "1870894448" (CHAR)
DEFINE TIT_12          = "3910764974" (CHAR)
DEFINE TIT_13          = "2646870572" (CHAR)
DEFINE TIT_14          = "1707006562" (CHAR)
DEFINE TIT_15          = "4066339909" (CHAR)
DEFINE CONT_01         = "-1" (CHAR)
DEFINE CONT_02         =                   -1 (NUMBER)
DEFINE CONT_03         =                   -1 (NUMBER)
DEFINE CONT_04         =                   -1 (NUMBER)
DEFINE CONT_05         =                   -1 (NUMBER)
DEFINE CONT_06         =                   -1 (NUMBER)
DEFINE CONT_07         =                   -1 (NUMBER)
DEFINE CONT_08         =                   -1 (NUMBER)
DEFINE CONT_09         =                   -1 (NUMBER)
DEFINE CONT_10         =                   -1 (NUMBER)
DEFINE CONT_11         =                   -1 (NUMBER)
DEFINE CONT_12         =                   -1 (NUMBER)
DEFINE CONT_13         =                   -1 (NUMBER)
DEFINE CONT_14         =                   -1 (NUMBER)
DEFINE CONT_15         =                   -1 (NUMBER)
DEFINE WAIT_CLASS_01   = "Application" (CHAR)
DEFINE EVENT_NAME_01   = "enq: TM - contention" (CHAR)
DEFINE WAIT_CLASS_02   = "User I/O" (CHAR)
DEFINE EVENT_NAME_02   = "cell single block physical read" (CHAR)
DEFINE WAIT_CLASS_03   = "Network" (CHAR)
DEFINE EVENT_NAME_03   = "SQL*Net more data to client" (CHAR)
DEFINE WAIT_CLASS_04   = "Administrative" (CHAR)
DEFINE EVENT_NAME_04   = "Backup: MML write backup piece" (CHAR)
DEFINE WAIT_CLASS_05   = "Cluster" (CHAR)
DEFINE EVENT_NAME_05   = "gc cr disk read" (CHAR)
DEFINE WAIT_CLASS_06   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_06   = "cursor: pin S wait on X" (CHAR)
DEFINE WAIT_CLASS_07   = "User I/O" (CHAR)
DEFINE EVENT_NAME_07   = "direct path read" (CHAR)
DEFINE WAIT_CLASS_08   = "Other" (CHAR)
DEFINE EVENT_NAME_08   = "rdbms ipc reply" (CHAR)
DEFINE WAIT_CLASS_09   = "Application" (CHAR)
DEFINE EVENT_NAME_09   = "enq: TX - row lock contention" (CHAR)
DEFINE WAIT_CLASS_10   = "User I/O" (CHAR)
DEFINE EVENT_NAME_10   = "cell multiblock read request" (CHAR)
DEFINE WAIT_CLASS_11   = "User I/O" (CHAR)
DEFINE EVENT_NAME_11   = "cell multiblock physical read" (CHAR)
DEFINE WAIT_CLASS_12   = "Cluster" (CHAR)
DEFINE EVENT_NAME_12   = "gc current block 2-way" (CHAR)
DEFINE EXADATA         = "" (CHAR)
DEFINE MAX_COL_NUMBER  = "5" (CHAR)
DEFINE COLUMN_NUMBER   = "5" (CHAR)
DEFINE RECOVERY        = "& recovery" (CHAR)
DEFINE TOTAL_HOURS     = "" (CHAR)
DEFINE EDB360_TIME_STAMP = "2020-11-06T13:52:14" (CHAR)
DEFINE REPORT_SEQUENCE = "205" (CHAR)
DEFINE CURRENT_TIME    = "17:23:02" (CHAR)
DEFINE EXACT_MATCHING_SIGNATURE = 15063275149933877428 (NUMBER)
DEFINE FORCE_MATCHING_SIGNATURE = 15063275149933877428 (NUMBER)
DEFINE WAIT_CLASS_COLORS = "CASE wait_class WHEN ''CPU'' THEN ''34CF27'' WHEN ''Scheduler'' THEN ''9FFA9D'' WHEN ''User I/O'' THEN ''0252D7'' WHEN ''System I/O'' THEN ''1E96DD'' " (CHAR)
DEFINE WAIT_CLASS_COLORS2 = " WHEN ''Concurrency'' THEN ''871C12'' WHEN ''Application'' THEN ''C42A05'' WHEN ''Commit'' THEN ''EA6A05'' WHEN ''Configuration'' THEN ''594611''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3 = " WHEN ''Administrative'' THEN ''75763E''  WHEN ''Network'' THEN ''989779'' WHEN ''Other'' THEN ''F571A0'' " (CHAR)
DEFINE WAIT_CLASS_COLORS4 = " WHEN ''Cluster'' THEN ''CEC3B5'' WHEN ''Queueing'' THEN ''C6BAA5'' END" (CHAR)
DEFINE SERIES_01       = "" (CHAR)
DEFINE SERIES_02       = "" (CHAR)
DEFINE SERIES_03       = "" (CHAR)
DEFINE SERIES_04       = "" (CHAR)
DEFINE SERIES_05       = "" (CHAR)
DEFINE SERIES_06       = "" (CHAR)
DEFINE SERIES_07       = "" (CHAR)
DEFINE SERIES_08       = "" (CHAR)
DEFINE SERIES_09       = "" (CHAR)
DEFINE SERIES_10       = "" (CHAR)
DEFINE SERIES_11       = "" (CHAR)
DEFINE SERIES_12       = "" (CHAR)
DEFINE SERIES_13       = "" (CHAR)
DEFINE SERIES_14       = "" (CHAR)
DEFINE SERIES_15       = "" (CHAR)
DEFINE SKIP_LCHP       = "--skip--" (CHAR)
DEFINE EDB360_UDUMP_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE EDB360_SPID     = "274417" (CHAR)
DEFINE REPORT_DBNAME   = "" (CHAR)
DEFINE SECTION_ID      = "5h" (CHAR)
DEFINE SECTION_NAME    = "SQL Tuning Advisor" (CHAR)
DEFINE PROCESSOR_MODEL = "Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz" (CHAR)
DEFINE HH_MM_SS        = "17:23:01" (CHAR)
DEFINE SPOOL_FILENAME  = "sqld360_323688_0sjx29v99zfqc_5h_204_sta_report" (CHAR)
DEFINE ROW_NUM         = "2980" (CHAR)
DEFINE EDB360_PREV_SQL_ID = "7uwhxftumj625" (CHAR)
DEFINE EDB360_PREV_CHILD_NUMBER = "0" (CHAR)
DEFINE ONE_SPOOL_FILENAME = "01947_sqld360_323688_0sjx29v99zfqc_5h_204_sta_report" (CHAR)
DEFINE EDB360_TUNING_PACK_FOR_SQLMON = "N" (CHAR)
DEFINE SKIP_SQLMON_EXEC = " echo skip sqlmon" (CHAR)
DEFINE EDB360_SQL_TEXT_100 = "SELECT TO_CHAR(ROWNUM) row_num, v0.* FROM /* 4b.455 */ ( WITH pgastat_denorm_1 AS ( SELECT /*+  MATE" (CHAR)
DEFINE STATSPACK_USER  = "perfstat" (CHAR)
DEFINE SP_MINIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SP_MAXIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SKIP_IF_MISSING = " echo skip " (CHAR)
DEFINE TOTAL_BUFFER_GETS =          20276118710 (NUMBER)
DEFINE TOTAL_DISK_READS =            123439198 (NUMBER)
DEFINE REPORT_DATE     = "2020-11-06T11:45:41" (CHAR)
DEFINE DAYS_OF_HISTORY_ACCESSED = "31" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_TIMES = "10" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_DAYS_APART = "5" (CHAR)
DEFINE MED_ELAP_MICROSECS_THRESHOLD = "1e4" (CHAR)
DEFINE MIN_SLOPE_THRESHOLD = "0.1" (CHAR)
DEFINE MAX_NUM_ROWS_X  = "20" (CHAR)
DEFINE SKIP_INST       = "" (CHAR)
DEFINE CORES_OVER_THREADS = "" (CHAR)
DEFINE SUBPOOL_01      = "SQLA" (CHAR)
DEFINE SUBPOOL_02      = "Result Cache" (CHAR)
DEFINE SUBPOOL_03      = "KGLH0" (CHAR)
DEFINE SUBPOOL_04      = "gcs resources" (CHAR)
DEFINE SUBPOOL_05      = "gcs shadows" (CHAR)
DEFINE SUBPOOL_06      = "" (CHAR)
DEFINE SUBPOOL_07      = "" (CHAR)
DEFINE SUBPOOL_08      = "" (CHAR)
DEFINE SUBPOOL_09      = "" (CHAR)
DEFINE SUBPOOL_10      = "" (CHAR)
DEFINE TEXT            = "Y" (CHAR)
DEFINE ACTIVE          = "Y" (CHAR)
DEFINE MAX_REPORTS     = "12" (CHAR)
DEFINE INPUT_LICENSE   = "Y" (CHAR)
DEFINE SQL_ID          = "1wjt2ut7cah6k" (CHAR)
DEFINE DATE_MASK       = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE WAIT_CLASS_13   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_13   = "row cache lock" (CHAR)
DEFINE WAIT_CLASS_14   = "Cluster" (CHAR)
DEFINE EVENT_NAME_14   = "gc cr multi block request" (CHAR)
DEFINE WAIT_CLASS_15   = "Cluster" (CHAR)
DEFINE EVENT_NAME_15   = "gc cr grant 2-way" (CHAR)
DEFINE WAIT_CLASS_16   = "Cluster" (CHAR)
DEFINE EVENT_NAME_16   = "gc current grant 2-way" (CHAR)
DEFINE WAIT_CLASS_17   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_17   = "library cache lock" (CHAR)
DEFINE WAIT_CLASS_18   = "Other" (CHAR)
DEFINE EVENT_NAME_18   = "DFS lock handle" (CHAR)
DEFINE WAIT_CLASS_19   = "User I/O" (CHAR)
DEFINE EVENT_NAME_19   = "cell smart table scan" (CHAR)
DEFINE WAIT_CLASS_20   = "User I/O" (CHAR)
DEFINE EVENT_NAME_20   = "direct path read temp" (CHAR)
DEFINE WAIT_CLASS_21   = "Scheduler" (CHAR)
DEFINE EVENT_NAME_21   = "resmgr:cpu quantum" (CHAR)
DEFINE WAIT_CLASS_22   = "User I/O" (CHAR)
DEFINE EVENT_NAME_22   = "cell single block read request" (CHAR)
DEFINE WAIT_CLASS_23   = "Cluster" (CHAR)
DEFINE EVENT_NAME_23   = "gc cr block busy" (CHAR)
DEFINE WAIT_CLASS_24   = "Other" (CHAR)
DEFINE EVENT_NAME_24   = "gcs drm freeze in enter server mode" (CHAR)
DEFINE ONE_MS_COMP     = "<=" (CHAR)
DEFINE TWO_MS_COMP     = ">" (CHAR)
DEFINE VAXIS1          = "Waits Count" (CHAR)
DEFINE VAXIS2          = "" (CHAR)
DEFINE 7               = "edb360_9a_pre_one.sql" (CHAR)
DEFINE BETWEEN_TIMES   = ", between 2020-10-06T11:22:16 and 2020-11-06T11:22:16" (CHAR)
DEFINE FILTER_PREDICATE = "instance_number = 8" (CHAR)
DEFINE CALL_SQLD360_BITMASK = "110031" (CHAR)
DEFINE CALL_SQLD360_BITMASK_TC = "111031" (CHAR)
DEFINE FILES_PREFIX    = "" (CHAR)
DEFINE SQ_FACT_SQL_SAMPLE_HINTS = " MATERIALIZE NO_MERGE " (CHAR)
DEFINE IS_10G          = "" (CHAR)
DEFINE IS_11R1         = "" (CHAR)
DEFINE IS_11R2         = "" (CHAR)
DEFINE X_MINIMUM_SNAP_ID = "3483" (CHAR)
DEFINE X_MAXIMUM_SNAP_ID = "4973" (CHAR)
DEFINE X_MINIMUM_DATE  = "2020-10-06T16:30:07" (CHAR)
DEFINE X_MAXIMUM_DATE  = "2020-11-06T16:30:43" (CHAR)
DEFINE SIGNATURE       = "9380065298533696050" (CHAR)
DEFINE SIGNATUREF      = "9380065298533696050" (CHAR)
DEFINE X_HOST_NAME     = "aupp-hroradb-f9exx1" (CHAR)
DEFINE X_DB_NAME       = "PRD" (CHAR)
DEFINE X_CONTAINER     = "FRSTPROD" (CHAR)
DEFINE SQL_HANDLE      = "" (CHAR)
DEFINE X_SLICES        = "20" (CHAR)
DEFINE X_DAYS          = "31" (CHAR)
DEFINE TABLES_LIST     = "(('THH_C4C','A_APBL'),('THH_C4C','A_APBLSRVC'),('THH_C4C','A_MEMBDGISBASE'),('THH_C4C','A_USR'),('THH_C4C','MV_PATID_CLINIC_COND_SRVCD'),('THH_C4C','T_DRUGCLM'),('THH_C4C','T_MDCLCLM'),('THH_C4C','T_MDCT'),('THH_C4C','T_SRVC'),('THH_C4C','T_USR'))" (CHAR)
DEFINE TIMESTAMP_MASK  = "YYYY-MM-DD/HH24:MI:SS.FF6" (CHAR)
DEFINE FIELDS_DELIMITER = "<,>" (CHAR)
DEFINE EADAM_CURRENT_TIME = "20201106163916" (CHAR)
DEFINE EDB360_SECS2GO  = "67310" (CHAR)
DEFINE DRIVER_TIME     = "164026" (CHAR)
DEFINE FROM_EDB360     = "--" (CHAR)
DEFINE SKIP_TCB        = "--" (CHAR)
DEFINE SQLD360_FROMEDB360_DAYS = "31" (CHAR)
DEFINE SECS2GO_STARTTIME = "20201106171510" (CHAR)
DEFINE SKIP_SQLD360    = "" (CHAR)
DEFINE SQLD360_CONTAINER = "FRSTPROD" (CHAR)
DEFINE SQLD360_CONF_DAYS = "61" (CHAR)
DEFINE SQLD360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_CSV = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_XML = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TREE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BUBBLE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SCATT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SQLMON = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_ASH_HIST = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_AWRRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_ASHRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_RAWASH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS_H = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_FMATCH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TCB = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_STA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_CBOENV = "N" (CHAR)
DEFINE SQLD360_CONF_TCB_SAMPLE = "0" (CHAR)
DEFINE SQLD360_CONF_TRANSLATE_LOWHIGH = "Y" (CHAR)
DEFINE SQLD360_CONF_FIRST_PART = "10" (CHAR)
DEFINE SQLD360_CONF_LAST_PART = "10" (CHAR)
DEFINE SQLD360_NUM_PLAN_DETAILS = "20" (CHAR)
DEFINE SQLD360_CONF_NUM_TOP_EXECS = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_AWRRPT = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_SQLMON_REP = "12" (CHAR)
DEFINE SQLD360_CONF_AVG_ET_PERCTH = "90" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_DEPT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_ASHBASED = "N" (CHAR)
DEFINE SQLD360_SQLTRACE_LEVEL = "0" (CHAR)
DEFINE SQLD360_CONF_DBID = "" (CHAR)
DEFINE SQLD360_CONF_AWR_TIMESCALE = "ms" (CHAR)
DEFINE SQLD360_CONF_TOOL_PAGE = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank">" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_ICON = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank"><img src="SQLd360_img.jpg" alt="SQLd360" height="33" width="52"></a>" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE SQLD360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE SQLD360_VYYNN   = "v192" (CHAR)
DEFINE SQLD360_VRSN    = "v192 (2019-03-23)" (CHAR)
DEFINE SQLD360_PREFIX  = "sqld360" (CHAR)
DEFINE SQLD360_SQLID   = "0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_DBID    = "2109323688" (CHAR)
DEFINE SQLD360_DBMOD   = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NAME = "PRD1" (CHAR)
DEFINE SQLD360_DB_BLOCK_SIZE = "8192" (CHAR)
DEFINE SQLD360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE SQLD360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE SQLD360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE SQLD360_DATE_FROM = "2020-10-06T17:15:11" (CHAR)
DEFINE SQLD360_DATE_TO = "2020-11-06T17:15:11" (CHAR)
DEFINE SKIP_10G        = "" (CHAR)
DEFINE SKIP_11G        = "" (CHAR)
DEFINE SKIP_11R1       = "" (CHAR)
DEFINE SKIP_11R201     = "" (CHAR)
DEFINE SKIP_11R203     = "" (CHAR)
DEFINE SKIP_12C        = "--" (CHAR)
DEFINE SKIP_12R101     = "" (CHAR)
DEFINE SKIP_12R1       = "--" (CHAR)
DEFINE SKIP_18C        = "" (CHAR)
DEFINE SKIP_19C        = "" (CHAR)
DEFINE SQLD360_FILE_TIME = "20201106_1715" (CHAR)
DEFINE AS_OF_DATE      = ", as of Fri Nov 06 @05:15PM" (CHAR)
DEFINE SQLD360_ASHDISKFILTER =                   10 (NUMBER)
DEFINE SQLD360_ASHSAMPLE =                    1 (NUMBER)
DEFINE SQLD360_ASHTIMEVALUE =                   10 (NUMBER)
DEFINE SQLD360_REMOTE_EXEC = "--" (CHAR)
DEFINE SQLD360_LOCAL_EXEC = "" (CHAR)
DEFINE SQLD360_UDUMP_PATH = "/u02/app/oracle/product/12.1.0/dbhome_3/rdbms/log/" (CHAR)
DEFINE SQLD360_DIAGTRACE_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE SQLD360_SPID    = "274417" (CHAR)
DEFINE SQLD360_SQLTXT  = "SELECT INFO_WITH_MEMBER_ID.*,
    enrollment.ELNS_INSCPRSRGRP ipgGroupId,
    be" (CHAR)
DEFINE SQLD360_IS_INSERT = "N" (CHAR)
DEFINE XPLAN_USER      = "THH_C4C" (CHAR)
DEFINE CURRENT_USER    = "SYS" (CHAR)
DEFINE XPLAN_SQL       = "SELECT INFO_WITH_MEMBER_ID.*,
    enrollment.ELNS_INSCPRSRGRP ipgGroupId,
    benefit.BENP_LWSTLVL_PRODCAT productCategoryId,
    affMember.USR_FRSTNAM affiliatedMemberFirstName,
    affMember.USR_LAS_NAM affiliatedMemberLastName
FROM (
  SELECT INFO.*,
    CASE
    WHEN INFO.memberAffiliationId IS NOT NULL THEN (INFO.memberAffiliationId)
    WHEN INFO.authAffiliationId IS NOT NULL THEN (SELECT UMBS_MEMB FROM T_UM_BASE WHERE UMBS_ID=INFO.authAffiliationId)
    WHEN INFO.careManagementAffiliationId IS NOT NULL THEN (SELECT CMBS_MEMB FROM T_CM_BASEBASE WHERE CMBB_ID=INFO.careManagementAffiliationId)
    WHEN INFO.providerAffiliationId IS NOT NULL THEN (INFO.providerAffiliationId)
    ELSE (NULL)
    END         affiliatedMemberId
  FROM (
  SELECT * FROM (
    SELECT
        T.SETK_ID AS id,
        T.SETK_C4C_ID AS c4cId,
        T.SETK_UNIVID AS universalId,
        taskType.TSKT_RCPTTYP AS categoryId,
        T.SETK_TSK_TYP AS taskTypeId,
        taskType.DDLI_LBL AS taskTypeLabel,
        T.SETK_TSK_NAM AS taskName,
        T.SETK_SUBJ AS subject,
        T.SETK_CRTD AS createDate,
        T.SETK_SENT AS sentDate,
        T.SETK_SRTD AS startedDate,
        T.SETK_TSK_TIMG_STRTDT AS startDate,
        T.SETK_TSK_TIMG_SCLDAT AS startDateSeconds,
        T.SETK_TSK_TIMG_DDLN_DT AS dueDate,
        T.SETK_TSK_TIMG_DDLN_TIM_IN_DY AS dueDateSeconds,
        T.SETK_OWNR AS ownerId,
        own.USR_FRSTNAM AS ownerFirstName,
        own.USR_LAS_NAM AS ownerLastName,
        own.CLASSTYPE AS ownerType,
        T.SETK_OBJ_STT AS status,
        T.SETK_AFFN_MEMB AS memberAffiliationId,
        member.USR_C4C_ID AS memberC4cId,
        member.USR_FRSTNAM AS memberFirstName,
        member.USR_LAS_NAM AS memberLastName,
        T.SETK_AFFN_CM AS careManagementAffiliationId,
        caseOrCm.CMBB_C4C_ID AS caseOrCmC4cId,
        T.SETK_AFFN_UM_EVNT AS authAffiliationId,
        auth.UMBS_C4C_ID AS authAffiliationC4cId,
        T.SETK_AFFN_PVDR AS providerAffiliationId,
        provider.USR_C4C_ID AS providerC4cId,
        T.SETK_TSK_TIMG_SNLTDT AS startNoLaterThanDate,
        T.SETK_CNCLRESN AS cancelReasonId,
        T.SETK_ORIGCRTR AS originalCreatorId,
        origCreator.USR_FRSTNAM AS originalCreatorFirstName,
        origCreator.USR_LAS_NAM AS originalCreatorLastName,
        caseOrCm.CLASSTYPE AS caseOrCmClasstype,
        T.SETK_TSK_DSCN AS description,
        T.SETK_CMPD AS completedDate,
        T.SETK_LAS_ACT_TIM AS lastActionDate,
        mod.USR_FRSTNAM lastModifiedByFirstName,
        mod.USR_LAS_NAM lastModifiedByLastName,
        T.SETK_PRVSOWNR AS previousOwnerId,
        prevOwner.USR_FRSTNAM AS previousOwnerFirstName,
        prevOwner.USR_LAS_NAM AS previousOwnerLastName,
        prevOwner.CLASSTYPE AS previousOwnerType,
        CASE
            WHEN T.SETK_TSK_TIMG_DDLN_DT IS NOT NULL THEN (T.SETK_TSK_TIMG_DDLN_DT)
            WHEN T.SETK_TSK_TIMG_STRTDT IS NOT NULL THEN (T.SETK_TSK_TIMG_STRTDT)
            WHEN T.SETK_TSK_TIMG_SNLTDT IS NOT NULL THEN (T.SETK_TSK_TIMG_SNLTDT)
            ELSE (NULL)
        END         filterDate,
        sender.USR_FRSTNAM fromUserFirstName,
        sender.USR_LAS_NAM fromUserLastName,
        T.SETK_RESCHEDULE_REASON AS rescheduleReason,
        reason.DDLI_LBL AS rescheduleReasonLabel,
        T.SETK_RESCHEDULE_COMMENT AS rescheduleComment
      FROM T_SENTTSK T
      LEFT OUTER JOIN T_USR own ON own.USR_ID=T.SETK_OWNR
      LEFT OUTER JOIN T_USR prevOwner ON prevOwner.USR_ID=T.SETK_PRVSOWNR
      LEFT OUTER JOIN T_USR member ON member.USR_ID=T.SETK_AFFN_MEMB
      LEFT OUTER JOIN T_USR origCreator ON origCreator.USR_ID=T.SETK_ORIGCRTR
      LEFT OUTER JOIN T_DDL_ITEM taskType ON taskType.DDLI_ID=T.SETK_TSK_TYP
      LEFT OUTER JOIN T_DDL_ITEM reason ON reason.DDLI_ID=T.SETK_RESCHEDULE_REASON
      LEFT OUTER JOIN T_CM_BASEBASE caseOrCm ON caseOrCm.CMBB_ID=T.SETK_AFFN_CM
      LEFT OUTER JOIN T_UM_BASE auth ON auth.UMBS_ID=T.SETK_AFFN_UM_EVNT
      LEFT OUTER JOIN T_USR provider ON provider.USR_ID=T.SETK_AFFN_PVDR
      LEFT OUTER JOIN T_USR mod ON mod.USR_ID=T.SETK_LAS_ACT_BY
      LEFT OUTER JOIN T_USR sender ON sender.USR_ID=T.SETK_PRVSSNDR
      WHERE T.SETK_OBJ_STT != :"SYS_B_0" 
 AND T.SETK_OWNR = :b1    AND T.SETK_OBJ_STT IN ( :b2 , :b3 , :b4 , :b5 , :b6 , :b7 , :b8 , :b9 , :b10 ) 
 ORDER BY filterDate) WHERE rownum <= :"SYS_B_1"
 AND  (  ( TRUNC(filterDate) <= TO_DATE(:"SYS_B_2", :"SYS_B_3") )  ) 
  ) INFO
) INFO_WITH_MEMBER_ID 
LEFT OUTER JOIN T_USR affMember ON affMember.USR_ID=INFO_WITH_MEMBER_ID.affiliatedMemberId
LEFT OUTER JOIN V_CURR_ENROLLMENT enrollment ON enrollment.ELNS_MEMB=INFO_WITH_MEMBER_ID.affiliatedMemberId
LEFT OUTER JOIN T_BENSPKG benefit ON benefit.BENP_ID=enrollment.ELNS_BENSPKG
WHERE (INFO_WITH_MEMBER_ID.affiliatedMemberId is null OR is_access_allowed_to_member(:b11 ,INFO_WITH_MEMBER_ID.affiliatedMemberId)=:"SYS_B_4")
" (CHAR)
DEFINE SQLD360_XPLAN_SQLID = "9babjv8yq8ru3" (CHAR)
DEFINE SKIP_FORCE_MATCH = "--" (CHAR)
DEFINE SQLD360_SKIP_HTML = "" (CHAR)
DEFINE SQLD360_SKIP_XML = "--" (CHAR)
DEFINE SQLD360_SKIP_TEXT = "--" (CHAR)
DEFINE SQLD360_SKIP_CSV = "--" (CHAR)
DEFINE SQLD360_SKIP_LINE = "" (CHAR)
DEFINE SQLD360_SKIP_PIE = "" (CHAR)
DEFINE SQLD360_SKIP_BAR = "" (CHAR)
DEFINE SQLD360_SKIP_TREE = "" (CHAR)
DEFINE SQLD360_SKIP_BUBBLE = "" (CHAR)
DEFINE SQLD360_SKIP_SCATT = "" (CHAR)
DEFINE SQLD360_SKIP_AWRRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_ASHRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_SQLMON = "" (CHAR)
DEFINE SQLD360_SKIP_STA = "" (CHAR)
DEFINE SQLD360_SKIP_EADAM = "" (CHAR)
DEFINE SQLD360_SKIP_RAWASH = "" (CHAR)
DEFINE SQLD360_SKIP_STATS_H = "" (CHAR)
DEFINE SQLD360_SKIP_FMATCH = "" (CHAR)
DEFINE SQLD360_SKIP_METADATA = "" (CHAR)
DEFINE SQLD360_SKIP_STATS = "" (CHAR)
DEFINE SQLD360_SKIP_TCB = "--" (CHAR)
DEFINE SQLD360_SKIP_CBOENV = "--" (CHAR)
DEFINE SQLD360_TCB_EXP_DATA = "FALSE" (CHAR)
DEFINE SQLD360_TCB_EXP_SAMPLE =                    0 (NUMBER)
DEFINE SQLD360_SKIP_OBJD = "" (CHAR)
DEFINE SQLD360_SKIP_OBJ_ASHBASED = "--" (CHAR)
DEFINE SQLD360_SKIP_LOWHIGH = "" (CHAR)
DEFINE SQLD360_HAS_PLSQL = "" (CHAR)
DEFINE SQLD360_NO_READ_STATS_H = "" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_D = "1e3" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_L = "ms" (CHAR)
DEFINE COMMON_SQLD360_PREFIX = "sqld360_323688_0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_MAIN_REPORT = "00001_sqld360_323688_0sjx29v99zfqc_index" (CHAR)
DEFINE SQLD360_LOG     = "00002_sqld360_323688_0sjx29v99zfqc_log" (CHAR)
DEFINE SQLD360_TKPROF  = "00003_sqld360_323688_0sjx29v99zfqc_tkprof" (CHAR)
DEFINE SQLD360_MAIN_FILENAME = "sqld360_323688_0sjx29v99zfqc_742967" (CHAR)
DEFINE SQLD360_LOG2    = "00004_sqld360_323688_0sjx29v99zfqc_log2" (CHAR)
DEFINE SQLD360_TRACEFILE_IDENTIFIER = "sqld360_323688_0sjx29v99zfqc" (CHAR)
DEFINE SQLD360_COPYRIGHT = " (c) 2015" (CHAR)
DEFINE NUM_PARTS       = "100" (CHAR)
DEFINE DEFAULT_DIR     = "SQLD360_DIR" (CHAR)
DEFINE SQLMON_DATE_MASK = "YYYYMMDDHH24MISS" (CHAR)
DEFINE SQLMON_TEXT     = "Y" (CHAR)
DEFINE SQLMON_ACTIVE   = "Y" (CHAR)
DEFINE SQLMON_HIST     = "Y" (CHAR)
DEFINE ASH_DATE_MASK   = "YYYYMMDDHH24MISS" (CHAR)
DEFINE ASH_TEXT        = "Y" (CHAR)
DEFINE ASH_HTML        = "Y" (CHAR)
DEFINE ASH_MEM         = "Y" (CHAR)
DEFINE ASH_AWR         = "Y" (CHAR)
DEFINE ASH_MAX_REPORTS = "12" (CHAR)
DEFINE WAIT_CLASS_COLORS_S = "CASE wait_class WHEN ''CPU'' THEN ''color: ''''#34CF27'''''' WHEN ''Scheduler'' THEN ''color: ''''#9FFA9D'''''' WHEN ''User I/O'' THEN ''color: ''''#0252D7'''''' WHEN ''System I/O'' THEN ''color: ''''#1E96DD'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS2_S = " WHEN ''Concurrency'' THEN ''color: ''''#871C12'''''' WHEN ''Application'' THEN ''color: ''''#C42A05'''''' WHEN ''Commit'' THEN ''color: ''''#EA6A05'''''' WHEN ''Configuration'' THEN ''color: ''''#594611''''''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3_S = " WHEN ''Administrative'' THEN ''color: ''''#75763E''''''  WHEN ''Network'' THEN ''color: ''''#989779'''''' WHEN ''Other'' THEN ''color: ''''#F571A0'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS4_S = " WHEN ''Cluster'' THEN ''color: ''''#CEC3B5'''''' WHEN ''Queueing'' THEN ''color: ''''#C6BAA5'''''' END" (CHAR)
DEFINE SKIP_XML        = "" (CHAR)
DEFINE SKIP_TCH        = "Y" (CHAR)
DEFINE SKIP_UCH        = "Y" (CHAR)
DEFINE SKIP_SCH        = "Y" (CHAR)
DEFINE TREECOLOR       = "" (CHAR)
DEFINE BUBBLEMAXVALUE  = "maxValue:86," (CHAR)
DEFINE BUBBLESERIES    = "series: {'CPU': {color: '#34CF27'}, 'I/O': {color: '#0252D7'}, 'Concurrency': {color: '#871C12'}, 'Cluster': {color: '#CEC3B5'}, 'Other': {color: '#C6BAA5'}, 'Multiple': {color: '#CCFFFF'}}," (CHAR)
DEFINE BUBBLESDETAILS  = "" (CHAR)
DEFINE SQL_TEXT        = "" (CHAR)
DEFINE SQLD360_TIME_STAMP = "2020-11-06/17:23:01" (CHAR)
DEFINE NUM_PLANS       = "20" (CHAR)
DEFINE SQLD360_MAIN_REPORT_BCK = "00001_sqld360_323688_0sjx29v99zfqc_index" (CHAR)
DEFINE NUM_BINDS       = "16" (CHAR)
DEFINE NUM_HISTOGRAMS  = "7" (CHAR)
DEFINE COLS_FROM_PART_TABLES = "0" (CHAR)
DEFINE PART_TABLES     = "0" (CHAR)
DEFINE TIT_01_AWR      = "1592253080" (CHAR)
DEFINE TIT_02_AWR      = "2380592788" (CHAR)
DEFINE TIT_03_AWR      = "157137232" (CHAR)
DEFINE TIT_04_AWR      = "1259275079" (CHAR)
DEFINE TIT_05_AWR      = "2835568740" (CHAR)
DEFINE TIT_06_AWR      = "1370721523" (CHAR)
DEFINE TIT_07_AWR      = "2788351063" (CHAR)
DEFINE TIT_08_AWR      = "2644118522" (CHAR)
DEFINE TIT_09_AWR      = "2031822258" (CHAR)
DEFINE TIT_10_AWR      = "1705091248" (CHAR)
DEFINE TIT_11_AWR      = "1870894448" (CHAR)
DEFINE TIT_12_AWR      = "3910764974" (CHAR)
DEFINE TIT_13_AWR      = "2646870572" (CHAR)
DEFINE TIT_14_AWR      = "1707006562" (CHAR)
DEFINE TIT_15_AWR      = "4066339909" (CHAR)
DEFINE PHV_01_AWR      =           1592253080 (NUMBER)
DEFINE PHV_02_AWR      =           2380592788 (NUMBER)
DEFINE PHV_03_AWR      =            157137232 (NUMBER)
DEFINE PHV_04_AWR      =           1259275079 (NUMBER)
DEFINE PHV_05_AWR      =           2835568740 (NUMBER)
DEFINE PHV_06_AWR      =           1370721523 (NUMBER)
DEFINE PHV_07_AWR      =           2788351063 (NUMBER)
DEFINE PHV_08_AWR      =           2644118522 (NUMBER)
DEFINE PHV_09_AWR      =           2031822258 (NUMBER)
DEFINE PHV_10_AWR      =           1705091248 (NUMBER)
DEFINE PHV_11_AWR      =           1870894448 (NUMBER)
DEFINE PHV_12_AWR      =           3910764974 (NUMBER)
DEFINE PHV_13_AWR      =           2646870572 (NUMBER)
DEFINE PHV_14_AWR      =           1707006562 (NUMBER)
DEFINE PHV_15_AWR      =           4066339909 (NUMBER)
DEFINE PHV_01          =           1259275079 (NUMBER)
DEFINE PHV_02          =           3910764974 (NUMBER)
DEFINE PHV_03          =           2646870572 (NUMBER)
DEFINE PHV_04          =           1707006562 (NUMBER)
DEFINE PHV_05          =            312717859 (NUMBER)
DEFINE PHV_06          =           4066339909 (NUMBER)
DEFINE PHV_07          =           2788351063 (NUMBER)
DEFINE PHV_08          =           4160728300 (NUMBER)
DEFINE PHV_09          =            230548702 (NUMBER)
DEFINE PHV_10          =           1870894448 (NUMBER)
DEFINE PHV_11          =           1705091248 (NUMBER)
DEFINE PHV_12          =           1169281721 (NUMBER)
DEFINE PHV_13          =           2835568740 (NUMBER)
DEFINE PHV_14          =           2644118522 (NUMBER)
DEFINE PHV_15          =           2031822258 (NUMBER)
DEFINE 1               = "skip" (CHAR)
DEFINE 2               = "inst8sqld360_9a_pre_one.sql" (CHAR)
DEFINE 3               = "null" (CHAR)

end log
