begin log


DEFINE _DATE           = "2020-11-06/17:11:45" (CHAR)
DEFINE _CONNECT_IDENTIFIER = "PRD1" (CHAR)
DEFINE _USER           = "SYS" (CHAR)
DEFINE _PRIVILEGE      = "AS SYSDBA" (CHAR)
DEFINE _SQLPLUS_RELEASE = "1201000200" (CHAR)
DEFINE _EDITOR         = "ed" (CHAR)
DEFINE _O_VERSION      = "Oracle Database 12c EE Extreme Perf Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, Oracle Label Security,
OLAP, Advanced Analytics and Real Application Testing options" (CHAR)
DEFINE _O_RELEASE      = "1201000200" (CHAR)
DEFINE ASH_VALIDATION  = "" (CHAR)
DEFINE V_DOLLAR        = "V$" (CHAR)
DEFINE MY_SID          = "5432" (CHAR)
DEFINE LICENSE_PACK    = "T" (CHAR)
DEFINE DIAGNOSTICS_PACK = "Y" (CHAR)
DEFINE SKIP_DIAGNOSTICS = "" (CHAR)
DEFINE TUNING_PACK     = "Y" (CHAR)
DEFINE SKIP_TUNING     = "" (CHAR)
DEFINE CUSTOM_CONFIG_FILENAME = "null" (CHAR)
DEFINE EDB360_ESTIMATED_HRS = "1" (CHAR)
DEFINE ASH_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE MY_SPOOL_FILENAME = "awr_ash_pre_check_PRD.txt" (CHAR)
DEFINE ASH_EDB360_DAYS = "31" (CHAR)
DEFINE ASH_FTS_ON_EDB360 = "250" (CHAR)
DEFINE ASH_DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE NUMBER_OF_INSTANCES =                    2 (NUMBER)
DEFINE THIS_DBID       =           2109323688 (NUMBER)
DEFINE ASH_MIN_SNAP_ID = "0" (CHAR)
DEFINE ASH_MAX_SNAP_ID = "0" (CHAR)
DEFINE LAST_PURGE_TIME = "2020-09-18T00:28:18" (CHAR)
DEFINE DAYS_SINCE_PURGE = "49.5" (CHAR)
DEFINE ASH_LAST_ANALYZED = "2020-09-19T06:58:17" (CHAR)
DEFINE ASH_CBO_STATS_AGE_DAYS = "48.2" (CHAR)
DEFINE PERCENT_OF_INSERTS = "" (CHAR)
DEFINE ASH_SIZE_GB     = "2.6 GBs" (CHAR)
DEFINE LAST_DDL_TIME   = "2020-09-18T21:40:39" (CHAR)
DEFINE SEG_LAST_DDL_TIME = "2020-09-18T21:40:39" (CHAR)
DEFINE LAST_DDL_AGE_DAYS = "48.6" (CHAR)
DEFINE ASH_FTS_SECONDS = "122" (CHAR)
DEFINE ASH_DAYS_OF_HISTORY = "92.8" (CHAR)
DEFINE ASH_MED_SAMPLE_DATE = "2020-07-08T03:20:17" (CHAR)
DEFINE ASH_MEDIAN_AGE_DAYS = "121.3" (CHAR)
DEFINE IGNORE_THIS     =                    0 (NUMBER)
DEFINE EDB360_FTS_SECONDS = "1" (CHAR)
DEFINE _RC             = "10" (CHAR)
DEFINE EDB360_SECTIONS = "" (CHAR)
DEFINE SQL_TRACE_LEVEL = "1" (CHAR)
DEFINE EDB360_CONF_DAYS = "31" (CHAR)
DEFINE EDB360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_FROM = "0730" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_TO = "1930" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_FROM = "2" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_TO = "6" (CHAR)
DEFINE EDB360_CONF_MAX_HOURS = "24" (CHAR)
DEFINE EDB360_CHART_WIDTH = "809px" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_INDEX = "N" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_FILE = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_MEM = "N" (CHAR)
DEFINE EDB360_CONF_INCL_SQL_MON = "N" (CHAR)
DEFINE EDB360_CONF_INCL_STAT_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PX_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SEGMENTS = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SOURCE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE EDB360_EADAM_ROW_LIMIT = "10000000" (CHAR)
DEFINE TOOL_REPO_USER  = "" (CHAR)
DEFINE EDB360_OUTPUT_DIRECTORY = "" (CHAR)
DEFINE EDB360_MOVE_DIRECTORY = "" (CHAR)
DEFINE SKIP_ESP_AND_ESCP = "" (CHAR)
DEFINE EDB360_CONFIG_DBID = "" (CHAR)
DEFINE EDB360_HOST_NAME_SEPARATOR = "" (CHAR)
DEFINE EDB360_HOST_NAME_POSITION = "" (CHAR)
DEFINE EDB360_HOST_NAME_OCCURRENCE = "" (CHAR)
DEFINE EDB360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_XML = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_CSV = "N" (CHAR)
DEFINE EDB360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PERFHUB = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_DIFF_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RANGE_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ADDM_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_ANALY_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TKPROF = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PLOT_AWR = "N" (CHAR)
DEFINE EDB360_CONF_SERIES_SELECTION = "N" (CHAR)
DEFINE EDB360_MAX_WORK_DAYS_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_WORK_DAYS_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_HISTORY_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_HISTORY = "1" (CHAR)
DEFINE EDB360_MAX_5WD_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_5WD_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_7D_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_7D   = "1" (CHAR)
DEFINE EDB360_CONF_TOP_SQL = "16" (CHAR)
DEFINE EDB360_CONF_TOP_CUR = "2" (CHAR)
DEFINE EDB360_CONF_TOP_SIG = "2" (CHAR)
DEFINE EDB360_CONF_PLANX_TOP = "16" (CHAR)
DEFINE EDB360_CONF_SQLMON_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLASH_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLHC_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP = "8" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP_TC = "0" (CHAR)
DEFINE TOOL_PREFIX_1   = "dba_hist#" (CHAR)
DEFINE TOOL_PREFIX_2   = "dba#" (CHAR)
DEFINE TOOL_PREFIX_3   = "gv#" (CHAR)
DEFINE TOOL_PREFIX_4   = "v#" (CHAR)
DEFINE EDB360_CONF_TOOL_PAGE = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank">" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_ICON = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank"><img src="database.jpg" alt="eDB360" height="33" width="52" /></a>" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE EDB360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE EDB360_VYYNN    = "v192" (CHAR)
DEFINE EDB360_VRSN     = "v192 (2019-03-23)" (CHAR)
DEFINE EDB360_COPYRIGHT = " (c) 2019" (CHAR)
DEFINE EDB360_BYPASS   = "" (CHAR)
DEFINE AWR_HIST_PREFIX = "DBA_HIST_" (CHAR)
DEFINE AWR_OBJECT_PREFIX = "dba_hist_" (CHAR)
DEFINE DVA_VIEW_PREFIX = "DBA_" (CHAR)
DEFINE DVA_OBJECT_PREFIX = "dba_" (CHAR)
DEFINE GV_VIEW_PREFIX  = "GV$" (CHAR)
DEFINE GV_OBJECT_PREFIX = "gv$" (CHAR)
DEFINE V_VIEW_PREFIX   = "V$" (CHAR)
DEFINE V_OBJECT_PREFIX = "v$" (CHAR)
DEFINE EDB360_DBID     = "2109323688" (CHAR)
DEFINE HISTORY_DAYS    = "31" (CHAR)
DEFINE EDB360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE EDB360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE EDB360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE EDB360_DATE_FROM = "2020-10-06T11:22:16" (CHAR)
DEFINE EDB360_DATE_TO  = "2020-11-06T11:22:16" (CHAR)
DEFINE HIST_WORK_DAYS  = "23" (CHAR)
DEFINE SKIP_EXTRAS     = "" (CHAR)
DEFINE EDB360_0G       = "edb360_0g_" (CHAR)
DEFINE EDB360_1A       = "edb360_1a_" (CHAR)
DEFINE EDB360_1B       = "edb360_1b_" (CHAR)
DEFINE EDB360_1C       = "edb360_1c_" (CHAR)
DEFINE EDB360_1D       = "edb360_1d_" (CHAR)
DEFINE EDB360_1E       = "edb360_1e_" (CHAR)
DEFINE EDB360_1F       = "edb360_1f_" (CHAR)
DEFINE EDB360_1G       = "edb360_1g_" (CHAR)
DEFINE EDB360_2A       = "edb360_2a_" (CHAR)
DEFINE EDB360_2B       = "edb360_2b_" (CHAR)
DEFINE EDB360_2C       = "edb360_2c_" (CHAR)
DEFINE EDB360_2D       = "edb360_2d_" (CHAR)
DEFINE EDB360_2E       = "edb360_2e_" (CHAR)
DEFINE EDB360_3A       = "edb360_3a_" (CHAR)
DEFINE EDB360_3B       = "edb360_3b_" (CHAR)
DEFINE EDB360_3C       = "edb360_3c_" (CHAR)
DEFINE EDB360_3D       = "edb360_3d_" (CHAR)
DEFINE EDB360_3E       = "edb360_3e_" (CHAR)
DEFINE EDB360_3F       = "edb360_3f_" (CHAR)
DEFINE EDB360_3G       = "edb360_3g_" (CHAR)
DEFINE EDB360_3H       = "edb360_3h_" (CHAR)
DEFINE EDB360_3I       = "edb360_3i_" (CHAR)
DEFINE EDB360_3J       = "edb360_3j_" (CHAR)
DEFINE EDB360_4A       = "edb360_4a_" (CHAR)
DEFINE EDB360_4B       = "edb360_4b_" (CHAR)
DEFINE EDB360_4C       = "edb360_4c_" (CHAR)
DEFINE EDB360_4D       = "edb360_4d_" (CHAR)
DEFINE EDB360_4E       = "edb360_4e_" (CHAR)
DEFINE EDB360_4F       = "edb360_4f_" (CHAR)
DEFINE EDB360_4G       = "edb360_4g_" (CHAR)
DEFINE EDB360_4H       = "edb360_4h_" (CHAR)
DEFINE EDB360_4I       = "edb360_4i_" (CHAR)
DEFINE EDB360_4J       = "edb360_4j_" (CHAR)
DEFINE EDB360_4K       = "edb360_4k_" (CHAR)
DEFINE EDB360_4L       = "edb360_4l_" (CHAR)
DEFINE EDB360_5A       = "edb360_5a_" (CHAR)
DEFINE EDB360_5B       = "edb360_5b_" (CHAR)
DEFINE EDB360_5C       = "edb360_5c_" (CHAR)
DEFINE EDB360_5D       = "edb360_5d_" (CHAR)
DEFINE EDB360_5E       = "edb360_5e_" (CHAR)
DEFINE EDB360_5F       = "edb360_5f_" (CHAR)
DEFINE EDB360_5G       = "edb360_5g_" (CHAR)
DEFINE EDB360_6A       = "edb360_6a_" (CHAR)
DEFINE EDB360_6B       = "edb360_6b_" (CHAR)
DEFINE EDB360_6C       = "edb360_6c_" (CHAR)
DEFINE EDB360_6D       = "edb360_6d_" (CHAR)
DEFINE EDB360_6E       = "edb360_6e_" (CHAR)
DEFINE EDB360_6F       = "edb360_6f_" (CHAR)
DEFINE EDB360_6G       = "edb360_6g_" (CHAR)
DEFINE EDB360_6H       = "edb360_6h_" (CHAR)
DEFINE EDB360_6I       = "edb360_6i_" (CHAR)
DEFINE EDB360_6J       = "edb360_6j_" (CHAR)
DEFINE EDB360_6K       = "edb360_6k_" (CHAR)
DEFINE EDB360_6L       = "edb360_6l_" (CHAR)
DEFINE EDB360_6M       = "edb360_6m_" (CHAR)
DEFINE EDB360_6N       = "edb360_6n_" (CHAR)
DEFINE EDB360_7A       = "edb360_7a_" (CHAR)
DEFINE EDB360_7B       = "edb360_7b_" (CHAR)
DEFINE EDB360_7C       = "edb360_7c_" (CHAR)
DEFINE EDB360_PREFIX   = "edb360" (CHAR)
DEFINE ECR_COLLECTION_KEY = "PRD1219183590" (CHAR)
DEFINE SKIP_SCRIPT     = "sql/edb360_0f_skip_script.sql " (CHAR)
DEFINE EDB360_CON_ID   = "4" (CHAR)
DEFINE EDB360_PDB_NAME = "FRSTPROD" (CHAR)
DEFINE EDB360_DBMOD    = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NUMBER = "1" (CHAR)
DEFINE DATABASE_NAME_SHORT = "prd" (CHAR)
DEFINE HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_NAME_SUFFIX = "" (CHAR)
DEFINE ESP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_HASH       = "742967" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD = "20201106" (CHAR)
DEFINE MAIN_TABLE      = "" (CHAR)
DEFINE TITLE           = "" (CHAR)
DEFINE TITLE_NO_SPACES = "" (CHAR)
DEFINE TITLE_SUFFIX    = "" (CHAR)
DEFINE EDB360_FILE_TIME = "20201106_1122" (CHAR)
DEFINE COMMON_EDB360_PREFIX = "edb360_323688" (CHAR)
DEFINE EDB360_MAIN_REPORT = "00001_edb360_323688_index" (CHAR)
DEFINE EDB360_LOG      = "00002_edb360_323688_log" (CHAR)
DEFINE EDB360_LOG2     = "00003_edb360_323688_log2" (CHAR)
DEFINE EDB360_LOG3     = "00004_edb360_323688_log3" (CHAR)
DEFINE EDB360_TKPROF   = "00005_edb360_323688_tkprof" (CHAR)
DEFINE EDB360_MAIN_FILENAME = "edb360_323688_742967" (CHAR)
DEFINE EDB360_ZIP_FILENAME = "edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_TRACEFILE_IDENTIFIER = "edb360_323688" (CHAR)
DEFINE EDB360_TAR_FILENAME = "00008_edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_MV_HOST_COMMAND = "" (CHAR)
DEFINE DB_VERS_OFE     = "12.1.0.2" (CHAR)
DEFINE SKIP_AWR        = "" (CHAR)
DEFINE SKIP_STATSPACK  = "--skip--" (CHAR)
DEFINE ESP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_MAX_DAYS   = "365" (CHAR)
DEFINE ESCP_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE ESCP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE ESCP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_COLLECTION_YYYYMMDD_HHMI = "20201106_1122" (CHAR)
DEFINE ESCP_COLLECTION_DAYS = "8" (CHAR)
DEFINE ESCP_THIS_DBID  = "2109323688" (CHAR)
DEFINE ESCP_THIS_INST_NUM = "1" (CHAR)
DEFINE ESCP_MIN_SNAP_ID = "4578" (CHAR)
DEFINE MAX_DAYS        = "365" (CHAR)
DEFINE INCLUDE_IC      = "Y" (CHAR)
DEFINE INCLUDE_NETW    = "Y" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD_HHMI = "20201106_1128" (CHAR)
DEFINE COLLECTION_DAYS = "8" (CHAR)
DEFINE SKIP_ON_10G     = "" (CHAR)
DEFINE ECR_SQ_FACT_HINTS = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE ECR_DATE_FORMAT = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE ECR_DBID        = "2109323688" (CHAR)
DEFINE ECR_INSTANCE_NUMBER = "1" (CHAR)
DEFINE ECR_MIN_SNAP_ID = "4578" (CHAR)
DEFINE ECR_COLLECTION_HOST = "aupp-hroradb-f9exx1" (CHAR)
DEFINE USE_ON_10G      = "--" (CHAR)
DEFINE DB_VERSION      = "12.1.0.2.0" (CHAR)
DEFINE SKIP_10G_COLUMN = "" (CHAR)
DEFINE SKIP_10G_SCRIPT = "" (CHAR)
DEFINE SKIP_11G_COLUMN = "" (CHAR)
DEFINE SKIP_11G_SCRIPT = "" (CHAR)
DEFINE SKIP_11R1_COLUMN = "" (CHAR)
DEFINE SKIP_11R1_SCRIPT = "" (CHAR)
DEFINE SKIP_NON_REPO_COLUMN = "" (CHAR)
DEFINE SKIP_NON_REPO_SCRIPT = "" (CHAR)
DEFINE SKIP_12C_COLUMN = " -- skip 12c " (CHAR)
DEFINE SKIP_12C_SCRIPT = " echo skip 12c " (CHAR)
DEFINE SKIP_12R2_COLUMN = "" (CHAR)
DEFINE SKIP_12R2_SCRIPT = "" (CHAR)
DEFINE SKIP_18C_COLUMN = "" (CHAR)
DEFINE SKIP_18C_SCRIPT = "" (CHAR)
DEFINE SKIP_19C_COLUMN = "" (CHAR)
DEFINE SKIP_19C_SCRIPT = "" (CHAR)
DEFINE AVG_CPU_COUNT   =                   16 (NUMBER)
DEFINE SUM_CPU_COUNT   =                   32 (NUMBER)
DEFINE AVG_CORE_COUNT  = "16" (CHAR)
DEFINE AVG_THREAD_COUNT = "16" (CHAR)
DEFINE CPU_LOAD_THRESHOLD =                   32 (NUMBER)
DEFINE HOSTS_COUNT     = "2" (CHAR)
DEFINE CORES_THREADS_HOSTS = "cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE TOOL_SYSDATE    = "20201106171144" (CHAR)
DEFINE BETWEEN_DATES   = ", between 2020-10-06T17:11:44 and 2020-11-06T17:11:44" (CHAR)
DEFINE MINIMUM_SNAP_ID = "3485" (CHAR)
DEFINE MAXIMUM_SNAP_ID = "4974" (CHAR)
DEFINE INST1_PRESENT   = "1" (CHAR)
DEFINE INST2_PRESENT   = "2" (CHAR)
DEFINE INST3_PRESENT   = "" (CHAR)
DEFINE INST4_PRESENT   = "" (CHAR)
DEFINE INST5_PRESENT   = "" (CHAR)
DEFINE INST6_PRESENT   = "" (CHAR)
DEFINE INST7_PRESENT   = "" (CHAR)
DEFINE INST8_PRESENT   = "" (CHAR)
DEFINE IS_SINGLE_INSTANCE = "" (CHAR)
DEFINE SKIP_INST1      = "" (CHAR)
DEFINE SKIP_INST2      = "" (CHAR)
DEFINE SKIP_INST3      = "-- skip inst3" (CHAR)
DEFINE SKIP_INST4      = "-- skip inst4" (CHAR)
DEFINE SKIP_INST5      = "-- skip inst5" (CHAR)
DEFINE SKIP_INST6      = "-- skip inst6" (CHAR)
DEFINE SKIP_INST7      = "-- skip inst7" (CHAR)
DEFINE SKIP_INST8      = "-- skip inst8" (CHAR)
DEFINE CHART_SETUP_DRIVER = "99800_edb360_323688_chart_setup_driver1.sql" (CHAR)
DEFINE EDB360_EADAM_SNAPS = "-666, 4925, 4869, 4821, 4887, 4839, 4791, 3948, 3900, 3852, 3996, 3804, 3756" (CHAR)
DEFINE EBS_RELEASE     = "" (CHAR)
DEFINE EBS_SYSTEM_NAME = "" (CHAR)
DEFINE SIEBEL_SCHEMA   = "" (CHAR)
DEFINE SIEBEL_APP_VER  = "" (CHAR)
DEFINE PSFT_SCHEMA     = "" (CHAR)
DEFINE PSFT_TOOLS_REL  = "" (CHAR)
DEFINE EDB360_SKIP_HTML = "" (CHAR)
DEFINE EDB360_SKIP_XML = " echo skip xml " (CHAR)
DEFINE EDB360_SKIP_TEXT = " echo skip text " (CHAR)
DEFINE EDB360_SKIP_CSV = " echo skip csv " (CHAR)
DEFINE EDB360_SKIP_LINE = "" (CHAR)
DEFINE EDB360_SKIP_PIE = "" (CHAR)
DEFINE EDB360_SKIP_BAR = "" (CHAR)
DEFINE EDB360_SKIP_METADATA = "" (CHAR)
DEFINE EDB360_SKIP_ASH_MEM = " echo skip ash mem " (CHAR)
DEFINE EDB360_SKIP_SQL_MON = " echo skip sql mon " (CHAR)
DEFINE EDB360_SKIP_STAT_MEM = "" (CHAR)
DEFINE EDB360_SKIP_PX_MEM = "" (CHAR)
DEFINE TOP_LEVEL_HINTS = "NO_MERGE" (CHAR)
DEFINE SQ_FACT_HINTS   = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE DS_HINT         = "DYNAMIC_SAMPLING(4)" (CHAR)
DEFINE ASH_HINTS1      = " FULL(h.ash) FULL(h.evt) FULL(h.sn) USE_HASH(h.sn h.ash h.evt) " (CHAR)
DEFINE ASH_HINTS2      = " FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.ash) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE ASH_HINTS3      = " USE_HASH(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn h.INT$DBA_HIST_ACT_SESS_HISTORY.ash h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE DEF_MAX_ROWS    = "50000" (CHAR)
DEFINE MAX_ROWS        = "5e4" (CHAR)
DEFINE EXCLUSION_LIST  = "('ANONYMOUS','APEX_030200','APEX_040000','APEX_040200','APEX_SSO','APPQOSSYS','CTXSYS','DBSNMP','DIP','EXFSYS','FLOWS_FILES','MDSYS','OLAPSYS','ORACLE_OCM','ORDDATA','ORDPLUGINS','ORDSYS','OUTLN','OWBSYS')" (CHAR)
DEFINE EXCLUSION_LIST2 = "('SI_INFORMTN_SCHEMA','SQLTXADMIN','SQLTXPLAIN','SYS','SYSMAN','SYSTEM','TRCANLZR','WMSYS','XDB','XS$NULL','PERFSTAT','STDBYPERF','MGDSYS','OJVMSYS')" (CHAR)
DEFINE SKIP_HTML       = "" (CHAR)
DEFINE SKIP_TEXT       = "" (CHAR)
DEFINE SKIP_CSV        = "" (CHAR)
DEFINE SKIP_LCH        = "Y" (CHAR)
DEFINE SKIP_LCH2       = "--skip--" (CHAR)
DEFINE SKIP_PCH        = "Y" (CHAR)
DEFINE SKIP_BCH        = "Y" (CHAR)
DEFINE SKIP_ALL        = "" (CHAR)
DEFINE ABSTRACT        = "" (CHAR)
DEFINE ABSTRACT2       = "" (CHAR)
DEFINE FOOT            = "" (CHAR)
DEFINE ABSTRACT_UOM    = "Memory is accounted as power of two (binary) while storage and network traffic as power of ten (decimal). <br />" (CHAR)
DEFINE CHARTYPE        = "" (CHAR)
DEFINE STACKED         = "" (CHAR)
DEFINE HAXIS           = "17vjd1aast5q7 12.1.0.2.0 cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE VAXIS           = "" (CHAR)
DEFINE VBASELINE       = "" (CHAR)
DEFINE BAR_HEIGHT      = "45%" (CHAR)
DEFINE TIT_01          = "" (CHAR)
DEFINE TIT_02          = "" (CHAR)
DEFINE TIT_03          = "" (CHAR)
DEFINE TIT_04          = "" (CHAR)
DEFINE TIT_05          = "" (CHAR)
DEFINE TIT_06          = "" (CHAR)
DEFINE TIT_07          = "" (CHAR)
DEFINE TIT_08          = "" (CHAR)
DEFINE TIT_09          = "" (CHAR)
DEFINE TIT_10          = "" (CHAR)
DEFINE TIT_11          = "" (CHAR)
DEFINE TIT_12          = "" (CHAR)
DEFINE TIT_13          = "" (CHAR)
DEFINE TIT_14          = "" (CHAR)
DEFINE TIT_15          = "" (CHAR)
DEFINE CONT_01         = "-1" (CHAR)
DEFINE CONT_02         =                   -1 (NUMBER)
DEFINE CONT_03         =                   -1 (NUMBER)
DEFINE CONT_04         =                   -1 (NUMBER)
DEFINE CONT_05         =                   -1 (NUMBER)
DEFINE CONT_06         =                   -1 (NUMBER)
DEFINE CONT_07         =                   -1 (NUMBER)
DEFINE CONT_08         =                   -1 (NUMBER)
DEFINE CONT_09         =                   -1 (NUMBER)
DEFINE CONT_10         =                   -1 (NUMBER)
DEFINE CONT_11         =                   -1 (NUMBER)
DEFINE CONT_12         =                   -1 (NUMBER)
DEFINE CONT_13         =                   -1 (NUMBER)
DEFINE CONT_14         =                   -1 (NUMBER)
DEFINE CONT_15         =                   -1 (NUMBER)
DEFINE WAIT_CLASS_01   = "Application" (CHAR)
DEFINE EVENT_NAME_01   = "enq: TM - contention" (CHAR)
DEFINE WAIT_CLASS_02   = "User I/O" (CHAR)
DEFINE EVENT_NAME_02   = "cell single block physical read" (CHAR)
DEFINE WAIT_CLASS_03   = "Network" (CHAR)
DEFINE EVENT_NAME_03   = "SQL*Net more data to client" (CHAR)
DEFINE WAIT_CLASS_04   = "Administrative" (CHAR)
DEFINE EVENT_NAME_04   = "Backup: MML write backup piece" (CHAR)
DEFINE WAIT_CLASS_05   = "Cluster" (CHAR)
DEFINE EVENT_NAME_05   = "gc cr disk read" (CHAR)
DEFINE WAIT_CLASS_06   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_06   = "cursor: pin S wait on X" (CHAR)
DEFINE WAIT_CLASS_07   = "User I/O" (CHAR)
DEFINE EVENT_NAME_07   = "direct path read" (CHAR)
DEFINE WAIT_CLASS_08   = "Other" (CHAR)
DEFINE EVENT_NAME_08   = "rdbms ipc reply" (CHAR)
DEFINE WAIT_CLASS_09   = "Application" (CHAR)
DEFINE EVENT_NAME_09   = "enq: TX - row lock contention" (CHAR)
DEFINE WAIT_CLASS_10   = "User I/O" (CHAR)
DEFINE EVENT_NAME_10   = "cell multiblock read request" (CHAR)
DEFINE WAIT_CLASS_11   = "User I/O" (CHAR)
DEFINE EVENT_NAME_11   = "cell multiblock physical read" (CHAR)
DEFINE WAIT_CLASS_12   = "Cluster" (CHAR)
DEFINE EVENT_NAME_12   = "gc current block 2-way" (CHAR)
DEFINE EXADATA         = "" (CHAR)
DEFINE MAX_COL_NUMBER  = "1" (CHAR)
DEFINE COLUMN_NUMBER   = "1" (CHAR)
DEFINE RECOVERY        = "& recovery" (CHAR)
DEFINE TOTAL_HOURS     = "" (CHAR)
DEFINE EDB360_TIME_STAMP = "2020-11-06T13:52:14" (CHAR)
DEFINE REPORT_SEQUENCE = "1" (CHAR)
DEFINE CURRENT_TIME    = "17:11:34" (CHAR)
DEFINE EXACT_MATCHING_SIGNATURE =  1782922979743544096 (NUMBER)
DEFINE FORCE_MATCHING_SIGNATURE =  1782922979743544096 (NUMBER)
DEFINE WAIT_CLASS_COLORS = "CASE wait_class WHEN ''CPU'' THEN ''34CF27'' WHEN ''Scheduler'' THEN ''9FFA9D'' WHEN ''User I/O'' THEN ''0252D7'' WHEN ''System I/O'' THEN ''1E96DD'' " (CHAR)
DEFINE WAIT_CLASS_COLORS2 = " WHEN ''Concurrency'' THEN ''871C12'' WHEN ''Application'' THEN ''C42A05'' WHEN ''Commit'' THEN ''EA6A05'' WHEN ''Configuration'' THEN ''594611''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3 = " WHEN ''Administrative'' THEN ''75763E''  WHEN ''Network'' THEN ''989779'' WHEN ''Other'' THEN ''F571A0'' " (CHAR)
DEFINE WAIT_CLASS_COLORS4 = " WHEN ''Cluster'' THEN ''CEC3B5'' WHEN ''Queueing'' THEN ''C6BAA5'' END" (CHAR)
DEFINE SERIES_01       = "" (CHAR)
DEFINE SERIES_02       = "" (CHAR)
DEFINE SERIES_03       = "" (CHAR)
DEFINE SERIES_04       = "" (CHAR)
DEFINE SERIES_05       = "" (CHAR)
DEFINE SERIES_06       = "" (CHAR)
DEFINE SERIES_07       = "" (CHAR)
DEFINE SERIES_08       = "" (CHAR)
DEFINE SERIES_09       = "" (CHAR)
DEFINE SERIES_10       = "" (CHAR)
DEFINE SERIES_11       = "" (CHAR)
DEFINE SERIES_12       = "" (CHAR)
DEFINE SERIES_13       = "" (CHAR)
DEFINE SERIES_14       = "" (CHAR)
DEFINE SERIES_15       = "" (CHAR)
DEFINE SKIP_LCHP       = "--skip--" (CHAR)
DEFINE EDB360_UDUMP_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE EDB360_SPID     = "274417" (CHAR)
DEFINE REPORT_DBNAME   = "" (CHAR)
DEFINE SECTION_ID      = "5h" (CHAR)
DEFINE SECTION_NAME    = "SQL Tuning Advisor" (CHAR)
DEFINE PROCESSOR_MODEL = "Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz" (CHAR)
DEFINE HH_MM_SS        = "17:11:34" (CHAR)
DEFINE SPOOL_FILENAME  = "sqld360_323688_3hwq5m5h3gkaq_5h_204_sta_report" (CHAR)
DEFINE ROW_NUM         = "2980" (CHAR)
DEFINE EDB360_PREV_SQL_ID = "7uwhxftumj625" (CHAR)
DEFINE EDB360_PREV_CHILD_NUMBER = "0" (CHAR)
DEFINE ONE_SPOOL_FILENAME = "02231_sqld360_323688_3hwq5m5h3gkaq_5h_204_sta_report" (CHAR)
DEFINE EDB360_TUNING_PACK_FOR_SQLMON = "N" (CHAR)
DEFINE SKIP_SQLMON_EXEC = " echo skip sqlmon" (CHAR)
DEFINE EDB360_SQL_TEXT_100 = "SELECT TO_CHAR(ROWNUM) row_num, v0.* FROM /* 4b.455 */ ( WITH pgastat_denorm_1 AS ( SELECT /*+  MATE" (CHAR)
DEFINE STATSPACK_USER  = "perfstat" (CHAR)
DEFINE SP_MINIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SP_MAXIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SKIP_IF_MISSING = " echo skip " (CHAR)
DEFINE TOTAL_BUFFER_GETS =          20276118710 (NUMBER)
DEFINE TOTAL_DISK_READS =            123439198 (NUMBER)
DEFINE REPORT_DATE     = "2020-11-06T11:45:41" (CHAR)
DEFINE DAYS_OF_HISTORY_ACCESSED = "31" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_TIMES = "10" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_DAYS_APART = "5" (CHAR)
DEFINE MED_ELAP_MICROSECS_THRESHOLD = "1e4" (CHAR)
DEFINE MIN_SLOPE_THRESHOLD = "0.1" (CHAR)
DEFINE MAX_NUM_ROWS_X  = "20" (CHAR)
DEFINE SKIP_INST       = "" (CHAR)
DEFINE CORES_OVER_THREADS = "" (CHAR)
DEFINE SUBPOOL_01      = "SQLA" (CHAR)
DEFINE SUBPOOL_02      = "Result Cache" (CHAR)
DEFINE SUBPOOL_03      = "KGLH0" (CHAR)
DEFINE SUBPOOL_04      = "gcs resources" (CHAR)
DEFINE SUBPOOL_05      = "gcs shadows" (CHAR)
DEFINE SUBPOOL_06      = "" (CHAR)
DEFINE SUBPOOL_07      = "" (CHAR)
DEFINE SUBPOOL_08      = "" (CHAR)
DEFINE SUBPOOL_09      = "" (CHAR)
DEFINE SUBPOOL_10      = "" (CHAR)
DEFINE TEXT            = "Y" (CHAR)
DEFINE ACTIVE          = "Y" (CHAR)
DEFINE MAX_REPORTS     = "12" (CHAR)
DEFINE INPUT_LICENSE   = "Y" (CHAR)
DEFINE SQL_ID          = "1wjt2ut7cah6k" (CHAR)
DEFINE DATE_MASK       = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE WAIT_CLASS_13   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_13   = "row cache lock" (CHAR)
DEFINE WAIT_CLASS_14   = "Cluster" (CHAR)
DEFINE EVENT_NAME_14   = "gc cr multi block request" (CHAR)
DEFINE WAIT_CLASS_15   = "Cluster" (CHAR)
DEFINE EVENT_NAME_15   = "gc cr grant 2-way" (CHAR)
DEFINE WAIT_CLASS_16   = "Cluster" (CHAR)
DEFINE EVENT_NAME_16   = "gc current grant 2-way" (CHAR)
DEFINE WAIT_CLASS_17   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_17   = "library cache lock" (CHAR)
DEFINE WAIT_CLASS_18   = "Other" (CHAR)
DEFINE EVENT_NAME_18   = "DFS lock handle" (CHAR)
DEFINE WAIT_CLASS_19   = "User I/O" (CHAR)
DEFINE EVENT_NAME_19   = "cell smart table scan" (CHAR)
DEFINE WAIT_CLASS_20   = "User I/O" (CHAR)
DEFINE EVENT_NAME_20   = "direct path read temp" (CHAR)
DEFINE WAIT_CLASS_21   = "Scheduler" (CHAR)
DEFINE EVENT_NAME_21   = "resmgr:cpu quantum" (CHAR)
DEFINE WAIT_CLASS_22   = "User I/O" (CHAR)
DEFINE EVENT_NAME_22   = "cell single block read request" (CHAR)
DEFINE WAIT_CLASS_23   = "Cluster" (CHAR)
DEFINE EVENT_NAME_23   = "gc cr block busy" (CHAR)
DEFINE WAIT_CLASS_24   = "Other" (CHAR)
DEFINE EVENT_NAME_24   = "gcs drm freeze in enter server mode" (CHAR)
DEFINE ONE_MS_COMP     = "<=" (CHAR)
DEFINE TWO_MS_COMP     = ">" (CHAR)
DEFINE VAXIS1          = "Waits Count" (CHAR)
DEFINE VAXIS2          = "" (CHAR)
DEFINE 7               = "edb360_9a_pre_one.sql" (CHAR)
DEFINE BETWEEN_TIMES   = ", between 2020-10-06T11:22:16 and 2020-11-06T11:22:16" (CHAR)
DEFINE FILTER_PREDICATE = "instance_number = 8" (CHAR)
DEFINE CALL_SQLD360_BITMASK = "110031" (CHAR)
DEFINE CALL_SQLD360_BITMASK_TC = "111031" (CHAR)
DEFINE FILES_PREFIX    = "" (CHAR)
DEFINE SQ_FACT_SQL_SAMPLE_HINTS = " MATERIALIZE NO_MERGE " (CHAR)
DEFINE IS_10G          = "" (CHAR)
DEFINE IS_11R1         = "" (CHAR)
DEFINE IS_11R2         = "" (CHAR)
DEFINE X_MINIMUM_SNAP_ID = "3483" (CHAR)
DEFINE X_MAXIMUM_SNAP_ID = "4973" (CHAR)
DEFINE X_MINIMUM_DATE  = "2020-10-06T16:30:07" (CHAR)
DEFINE X_MAXIMUM_DATE  = "2020-11-06T16:30:43" (CHAR)
DEFINE SIGNATURE       = "9380065298533696050" (CHAR)
DEFINE SIGNATUREF      = "9380065298533696050" (CHAR)
DEFINE X_HOST_NAME     = "aupp-hroradb-f9exx1" (CHAR)
DEFINE X_DB_NAME       = "PRD" (CHAR)
DEFINE X_CONTAINER     = "FRSTPROD" (CHAR)
DEFINE SQL_HANDLE      = "" (CHAR)
DEFINE X_SLICES        = "20" (CHAR)
DEFINE X_DAYS          = "31" (CHAR)
DEFINE TABLES_LIST     = "(('THH_C4C','A_APBL'),('THH_C4C','A_APBLSRVC'),('THH_C4C','A_MEMBDGISBASE'),('THH_C4C','A_USR'),('THH_C4C','MV_PATID_CLINIC_COND_SRVCD'),('THH_C4C','T_DRUGCLM'),('THH_C4C','T_MDCLCLM'),('THH_C4C','T_MDCT'),('THH_C4C','T_SRVC'),('THH_C4C','T_USR'))" (CHAR)
DEFINE TIMESTAMP_MASK  = "YYYY-MM-DD/HH24:MI:SS.FF6" (CHAR)
DEFINE FIELDS_DELIMITER = "<,>" (CHAR)
DEFINE EADAM_CURRENT_TIME = "20201106163916" (CHAR)
DEFINE EDB360_SECS2GO  = "67310" (CHAR)
DEFINE DRIVER_TIME     = "164026" (CHAR)
DEFINE FROM_EDB360     = "--" (CHAR)
DEFINE SKIP_TCB        = "--" (CHAR)
DEFINE SQLD360_FROMEDB360_DAYS = "31" (CHAR)
DEFINE SECS2GO_STARTTIME = "20201106171144" (CHAR)
DEFINE SKIP_SQLD360    = "" (CHAR)
DEFINE SQLD360_CONTAINER = "FRSTPROD" (CHAR)
DEFINE SQLD360_CONF_DAYS = "61" (CHAR)
DEFINE SQLD360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_CSV = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_XML = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TREE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BUBBLE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SCATT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SQLMON = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_ASH_HIST = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_AWRRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_ASHRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_RAWASH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS_H = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_FMATCH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TCB = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_STA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_CBOENV = "N" (CHAR)
DEFINE SQLD360_CONF_TCB_SAMPLE = "0" (CHAR)
DEFINE SQLD360_CONF_TRANSLATE_LOWHIGH = "Y" (CHAR)
DEFINE SQLD360_CONF_FIRST_PART = "10" (CHAR)
DEFINE SQLD360_CONF_LAST_PART = "10" (CHAR)
DEFINE SQLD360_NUM_PLAN_DETAILS = "20" (CHAR)
DEFINE SQLD360_CONF_NUM_TOP_EXECS = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_AWRRPT = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_SQLMON_REP = "12" (CHAR)
DEFINE SQLD360_CONF_AVG_ET_PERCTH = "90" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_DEPT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_ASHBASED = "N" (CHAR)
DEFINE SQLD360_SQLTRACE_LEVEL = "0" (CHAR)
DEFINE SQLD360_CONF_DBID = "" (CHAR)
DEFINE SQLD360_CONF_AWR_TIMESCALE = "ms" (CHAR)
DEFINE SQLD360_CONF_TOOL_PAGE = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank">" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_ICON = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank"><img src="SQLd360_img.jpg" alt="SQLd360" height="33" width="52"></a>" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE SQLD360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE SQLD360_VYYNN   = "v192" (CHAR)
DEFINE SQLD360_VRSN    = "v192 (2019-03-23)" (CHAR)
DEFINE SQLD360_PREFIX  = "sqld360" (CHAR)
DEFINE SQLD360_SQLID   = "17vjd1aast5q7" (CHAR)
DEFINE SQLD360_DBID    = "2109323688" (CHAR)
DEFINE SQLD360_DBMOD   = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NAME = "PRD1" (CHAR)
DEFINE SQLD360_DB_BLOCK_SIZE = "8192" (CHAR)
DEFINE SQLD360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE SQLD360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE SQLD360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE SQLD360_DATE_FROM = "2020-10-06T17:11:44" (CHAR)
DEFINE SQLD360_DATE_TO = "2020-11-06T17:11:44" (CHAR)
DEFINE SKIP_10G        = "" (CHAR)
DEFINE SKIP_11G        = "" (CHAR)
DEFINE SKIP_11R1       = "" (CHAR)
DEFINE SKIP_11R201     = "" (CHAR)
DEFINE SKIP_11R203     = "" (CHAR)
DEFINE SKIP_12C        = "--" (CHAR)
DEFINE SKIP_12R101     = "" (CHAR)
DEFINE SKIP_12R1       = "--" (CHAR)
DEFINE SKIP_18C        = "" (CHAR)
DEFINE SKIP_19C        = "" (CHAR)
DEFINE SQLD360_FILE_TIME = "20201106_1711" (CHAR)
DEFINE AS_OF_DATE      = ", as of Fri Nov 06 @05:11PM" (CHAR)
DEFINE SQLD360_ASHDISKFILTER =                   10 (NUMBER)
DEFINE SQLD360_ASHSAMPLE =                    1 (NUMBER)
DEFINE SQLD360_ASHTIMEVALUE =                   10 (NUMBER)
DEFINE SQLD360_REMOTE_EXEC = "--" (CHAR)
DEFINE SQLD360_LOCAL_EXEC = "" (CHAR)
DEFINE SQLD360_UDUMP_PATH = "/u02/app/oracle/product/12.1.0/dbhome_3/rdbms/log/" (CHAR)
DEFINE SQLD360_DIAGTRACE_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE SQLD360_SPID    = "274417" (CHAR)
DEFINE SQLD360_SQLTXT  = "SELECT DISTINCT PF.PERF_USR FROM T_WKFWTSK WF , T_WKFWTSK_STT_CNGE CNG , T_PRMR " (CHAR)
DEFINE SQLD360_IS_INSERT = "N" (CHAR)
DEFINE XPLAN_USER      = "THH_C4C" (CHAR)
DEFINE CURRENT_USER    = "SYS" (CHAR)
DEFINE XPLAN_SQL       = "SELECT DISTINCT PF.PERF_USR FROM T_WKFWTSK WF , T_WKFWTSK_STT_CNGE CNG , T_PRMR " (CHAR)
DEFINE SQLD360_XPLAN_SQLID = "9babjv8yq8ru3" (CHAR)
DEFINE SKIP_FORCE_MATCH = "--" (CHAR)
DEFINE SQLD360_SKIP_HTML = "" (CHAR)
DEFINE SQLD360_SKIP_XML = "--" (CHAR)
DEFINE SQLD360_SKIP_TEXT = "--" (CHAR)
DEFINE SQLD360_SKIP_CSV = "--" (CHAR)
DEFINE SQLD360_SKIP_LINE = "" (CHAR)
DEFINE SQLD360_SKIP_PIE = "" (CHAR)
DEFINE SQLD360_SKIP_BAR = "" (CHAR)
DEFINE SQLD360_SKIP_TREE = "" (CHAR)
DEFINE SQLD360_SKIP_BUBBLE = "" (CHAR)
DEFINE SQLD360_SKIP_SCATT = "" (CHAR)
DEFINE SQLD360_SKIP_AWRRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_ASHRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_SQLMON = "" (CHAR)
DEFINE SQLD360_SKIP_STA = "" (CHAR)
DEFINE SQLD360_SKIP_EADAM = "" (CHAR)
DEFINE SQLD360_SKIP_RAWASH = "" (CHAR)
DEFINE SQLD360_SKIP_STATS_H = "" (CHAR)
DEFINE SQLD360_SKIP_FMATCH = "" (CHAR)
DEFINE SQLD360_SKIP_METADATA = "" (CHAR)
DEFINE SQLD360_SKIP_STATS = "" (CHAR)
DEFINE SQLD360_SKIP_TCB = "--" (CHAR)
DEFINE SQLD360_SKIP_CBOENV = "--" (CHAR)
DEFINE SQLD360_TCB_EXP_DATA = "FALSE" (CHAR)
DEFINE SQLD360_TCB_EXP_SAMPLE =                    0 (NUMBER)
DEFINE SQLD360_SKIP_OBJD = "" (CHAR)
DEFINE SQLD360_SKIP_OBJ_ASHBASED = "--" (CHAR)
DEFINE SQLD360_SKIP_LOWHIGH = "" (CHAR)
DEFINE SQLD360_HAS_PLSQL = "--" (CHAR)
DEFINE SQLD360_NO_READ_STATS_H = "" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_D = "1e3" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_L = "ms" (CHAR)
DEFINE COMMON_SQLD360_PREFIX = "sqld360_323688_17vjd1aast5q7" (CHAR)
DEFINE SQLD360_MAIN_REPORT = "00001_sqld360_323688_17vjd1aast5q7_index" (CHAR)
DEFINE SQLD360_LOG     = "00002_sqld360_323688_17vjd1aast5q7_log" (CHAR)
DEFINE SQLD360_TKPROF  = "00003_sqld360_323688_17vjd1aast5q7_tkprof" (CHAR)
DEFINE SQLD360_MAIN_FILENAME = "sqld360_323688_17vjd1aast5q7_742967" (CHAR)
DEFINE SQLD360_LOG2    = "00004_sqld360_323688_17vjd1aast5q7_log2" (CHAR)
DEFINE SQLD360_TRACEFILE_IDENTIFIER = "sqld360_323688_17vjd1aast5q7" (CHAR)
DEFINE SQLD360_COPYRIGHT = " (c) 2015" (CHAR)
DEFINE NUM_PARTS       = "100" (CHAR)
DEFINE DEFAULT_DIR     = "SQLD360_DIR" (CHAR)
DEFINE SQLMON_DATE_MASK = "YYYYMMDDHH24MISS" (CHAR)
DEFINE SQLMON_TEXT     = "Y" (CHAR)
DEFINE SQLMON_ACTIVE   = "Y" (CHAR)
DEFINE SQLMON_HIST     = "Y" (CHAR)
DEFINE ASH_DATE_MASK   = "YYYYMMDDHH24MISS" (CHAR)
DEFINE ASH_TEXT        = "Y" (CHAR)
DEFINE ASH_HTML        = "Y" (CHAR)
DEFINE ASH_MEM         = "Y" (CHAR)
DEFINE ASH_AWR         = "Y" (CHAR)
DEFINE ASH_MAX_REPORTS = "12" (CHAR)
DEFINE WAIT_CLASS_COLORS_S = "CASE wait_class WHEN ''CPU'' THEN ''color: ''''#34CF27'''''' WHEN ''Scheduler'' THEN ''color: ''''#9FFA9D'''''' WHEN ''User I/O'' THEN ''color: ''''#0252D7'''''' WHEN ''System I/O'' THEN ''color: ''''#1E96DD'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS2_S = " WHEN ''Concurrency'' THEN ''color: ''''#871C12'''''' WHEN ''Application'' THEN ''color: ''''#C42A05'''''' WHEN ''Commit'' THEN ''color: ''''#EA6A05'''''' WHEN ''Configuration'' THEN ''color: ''''#594611''''''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3_S = " WHEN ''Administrative'' THEN ''color: ''''#75763E''''''  WHEN ''Network'' THEN ''color: ''''#989779'''''' WHEN ''Other'' THEN ''color: ''''#F571A0'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS4_S = " WHEN ''Cluster'' THEN ''color: ''''#CEC3B5'''''' WHEN ''Queueing'' THEN ''color: ''''#C6BAA5'''''' END" (CHAR)
DEFINE SKIP_XML        = "" (CHAR)
DEFINE SKIP_TCH        = "Y" (CHAR)
DEFINE SKIP_UCH        = "Y" (CHAR)
DEFINE SKIP_SCH        = "Y" (CHAR)
DEFINE TREECOLOR       = "" (CHAR)
DEFINE BUBBLEMAXVALUE  = "" (CHAR)
DEFINE BUBBLESERIES    = "series: {'CPU': {color: '#34CF27'}, 'I/O': {color: '#0252D7'}, 'Concurrency': {color: '#871C12'}, 'Cluster': {color: '#CEC3B5'}, 'Other': {color: '#C6BAA5'}, 'Multiple': {color: '#CCFFFF'}}," (CHAR)
DEFINE BUBBLESDETAILS  = "" (CHAR)
DEFINE SQL_TEXT        = "" (CHAR)
DEFINE SQLD360_TIME_STAMP = "2020-11-06/17:11:45" (CHAR)
DEFINE NUM_PLANS       = "2" (CHAR)
DEFINE SQLD360_MAIN_REPORT_BCK = "00001_sqld360_323688_3hwq5m5h3gkaq_index" (CHAR)
DEFINE NUM_BINDS       = "134" (CHAR)
DEFINE NUM_HISTOGRAMS  = "68" (CHAR)
DEFINE COLS_FROM_PART_TABLES = "0" (CHAR)
DEFINE PART_TABLES     = "0" (CHAR)
DEFINE TIT_01_AWR      = "1854145950" (CHAR)
DEFINE TIT_02_AWR      = "" (CHAR)
DEFINE TIT_03_AWR      = "" (CHAR)
DEFINE TIT_04_AWR      = "" (CHAR)
DEFINE TIT_05_AWR      = "" (CHAR)
DEFINE TIT_06_AWR      = "" (CHAR)
DEFINE TIT_07_AWR      = "" (CHAR)
DEFINE TIT_08_AWR      = "" (CHAR)
DEFINE TIT_09_AWR      = "" (CHAR)
DEFINE TIT_10_AWR      = "" (CHAR)
DEFINE TIT_11_AWR      = "" (CHAR)
DEFINE TIT_12_AWR      = "" (CHAR)
DEFINE TIT_13_AWR      = "" (CHAR)
DEFINE TIT_14_AWR      = "" (CHAR)
DEFINE TIT_15_AWR      = "" (CHAR)
DEFINE PHV_01_AWR      =           1854145950 (NUMBER)
DEFINE PHV_02_AWR      =                   -1 (NUMBER)
DEFINE PHV_03_AWR      =                   -1 (NUMBER)
DEFINE PHV_04_AWR      =                   -1 (NUMBER)
DEFINE PHV_05_AWR      =                   -1 (NUMBER)
DEFINE PHV_06_AWR      =                   -1 (NUMBER)
DEFINE PHV_07_AWR      =                   -1 (NUMBER)
DEFINE PHV_08_AWR      =                   -1 (NUMBER)
DEFINE PHV_09_AWR      =                   -1 (NUMBER)
DEFINE PHV_10_AWR      =                   -1 (NUMBER)
DEFINE PHV_11_AWR      =                   -1 (NUMBER)
DEFINE PHV_12_AWR      =                   -1 (NUMBER)
DEFINE PHV_13_AWR      =                   -1 (NUMBER)
DEFINE PHV_14_AWR      =                   -1 (NUMBER)
DEFINE PHV_15_AWR      =                   -1 (NUMBER)
DEFINE PHV_01          =           1854145950 (NUMBER)
DEFINE PHV_02          =           2031791219 (NUMBER)
DEFINE PHV_03          =                   -1 (NUMBER)
DEFINE PHV_04          =                   -1 (NUMBER)
DEFINE PHV_05          =                   -1 (NUMBER)
DEFINE PHV_06          =                   -1 (NUMBER)
DEFINE PHV_07          =                   -1 (NUMBER)
DEFINE PHV_08          =                   -1 (NUMBER)
DEFINE PHV_09          =                   -1 (NUMBER)
DEFINE PHV_10          =                   -1 (NUMBER)
DEFINE PHV_11          =                   -1 (NUMBER)
DEFINE PHV_12          =                   -1 (NUMBER)
DEFINE PHV_13          =                   -1 (NUMBER)
DEFINE PHV_14          =                   -1 (NUMBER)
DEFINE PHV_15          =                   -1 (NUMBER)
DEFINE 1               = "17vjd1aast5q7" (CHAR)
DEFINE 2               = "T" (CHAR)
DEFINE 3               = "null" (CHAR)

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:45
Extracting ASH data
9699 rows extracted.
2020-11-06/17:11:46
17:11:46
Done exctrating ASH data

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:46
Extracting table list
2020-11-06/17:11:49
17:11:49
Done extracting table list
17:11:49

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:49 col:1of5 "Database Configuration"
17:11:49 System Under Observation

WITH
rac AS (SELECT /*+ MATERIALIZE NO_MERGE */ COUNT(*) instances, CASE COUNT(*) WHEN 1 THEN 'Single-instance' ELSE COUNT(*)||'-node RAC cluster' END db_type FROM gv$instance),
hrac AS (SELECT /*+ MATERIALIZE NO_MERGE */ CASE 2 WHEN 1 THEN ' (historically Single-instance in AWR)' ELSE ' (historicly 2-node RAC cluster in AWR)' END db_type
           FROM rac WHERE TO_CHAR(RAC.instances)<>2),
mem AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'memory_target'),
sga AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'sga_target'),
pga AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) target FROM gv$system_parameter2 WHERE name = 'pga_aggregate_target'),
db_block AS (SELECT /*+ MATERIALIZE NO_MERGE */ value bytes FROM v$system_parameter2 WHERE name = 'db_block_size'),
db AS (SELECT /*+ MATERIALIZE NO_MERGE */ name, platform_name FROM v$database),
  pdbs AS (SELECT /*+ MATERIALIZE NO_MERGE */ * FROM v$pdbs), -- need 12c flag
inst AS (SELECT /*+ MATERIALIZE NO_MERGE */ host_name, version db_version FROM v$instance),
data AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) bytes, COUNT(*) files, COUNT(DISTINCT ts#) tablespaces FROM v$datafile),
temp AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) bytes FROM v$tempfile),
log AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(bytes) * MAX(members) bytes FROM v$log),
control AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(block_size * file_size_blks) bytes FROM v$controlfile),
 cell AS (SELECT /*+ MATERIALIZE NO_MERGE */ COUNT(DISTINCT cell_name) cnt FROM v$cell_state),
core AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) cnt FROM gv$osstat WHERE stat_name = 'NUM_CPU_CORES'),
cpu AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) cnt FROM gv$osstat WHERE stat_name = 'NUM_CPUS'),
pmem AS (SELECT /*+ MATERIALIZE NO_MERGE */ SUM(value) bytes FROM gv$osstat WHERE stat_name = 'PHYSICAL_MEMORY_BYTES')
SELECT /*+ NO_MERGE */ 'Database name:' system_item, db.name system_value FROM db
 UNION ALL
 SELECT '    pdb:'||name, 'Open Mode:'||open_mode FROM pdbs -- need 12c flag
 UNION ALL
SELECT 'Oracle Database version:', inst.db_version FROM inst
 UNION ALL
SELECT 'Database block size:', TRIM(TO_CHAR(db_block.bytes / POWER(2,10), '90'))||' KB' FROM db_block
 UNION ALL
SELECT 'Database size:', TRIM(TO_CHAR(ROUND((data.bytes + temp.bytes + log.bytes + control.bytes) / POWER(10,12), 3), '999,999,990.000'))||' TB'
  FROM db, data, temp, log, control
 UNION ALL
SELECT 'Datafiles:', data.files||' (on '||data.tablespaces||' tablespaces)' FROM data
 UNION ALL
SELECT 'Instance configuration:', rac.db_type||(select hrac.db_type FROM hrac ) FROM rac
 UNION ALL
SELECT 'Database memory:',
       CASE WHEN mem.target > 0 THEN 'MEMORY'  ||TRIM(TO_CHAR(ROUND(mem.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN sga.target > 0 THEN 'SGA '   ||TRIM(TO_CHAR(ROUND(sga.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN pga.target > 0 THEN 'PGA '   ||TRIM(TO_CHAR(ROUND(pga.target / POWER(2,30), 1), '999,990.0'))||' GB, ' END||
       CASE WHEN mem.target > 0 THEN 'AMM ' ELSE CASE WHEN sga.target > 0 THEN 'ASMM' ELSE 'MANUAL' END END
  FROM mem, sga, pga
 UNION ALL
SELECT 'Hardware:', CASE WHEN cell.cnt > 0 THEN 'Engineered System '||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%5675%' THEN 'X2-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2690%' THEN 'X3-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2697%' THEN 'X4-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%2699%' THEN 'X5-2 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%8870%' THEN 'X3-8 ' END||
        CASE WHEN 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' LIKE '%8895%' THEN 'X4-8 or X5-8 ' END||
        'with '||cell.cnt||' storage servers'
        ELSE 'Unknown' END FROM cell
 UNION ALL
SELECT 'Processor:', 'Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz' FROM DUAL
 UNION ALL
SELECT 'Physical CPUs:', core.cnt||' cores'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, core
 UNION ALL
SELECT 'Oracle CPUs:', cpu.cnt||' CPUs (threads)'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, cpu
 UNION ALL
SELECT 'Physical RAM:', TRIM(TO_CHAR(ROUND(pmem.bytes / POWER(2,30), 1), '999,990.0'))||' GB'||CASE WHEN rac.instances > 0 THEN ', on '||rac.db_type END FROM rac, pmem
 UNION ALL
SELECT 'Operating system:', db.platform_name FROM db

17:11:49 col:1of5.

17:11:49 col:1of5 "00006_sqld360_323688_17vjd1aast5q7_1a_1_system_under_observation.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:49 col:1of5 "Database Configuration"
17:11:49 Identification

SELECT d.dbid,
       d.name dbname,
       d.db_unique_name,
       d.platform_name,
       i.version,
       i.inst_id,
       i.instance_number,
       i.instance_name,
       LOWER(SUBSTR(i.host_name||'.', 1, INSTR(i.host_name||'.', '.') - 1)) host_name,
       LPAD(ORA_HASH(LOWER(SUBSTR(i.host_name||'.', 1, INSTR(i.host_name||'.', '.') - 1)),999999),6,'6') host_hv,
       p.value cpu_count,
       '' ebs_release,
       '' ebs_system_name,
       '' siebel_schema,
       '' siebel_app_ver,
       '' psft_schema,
       '' psft_tools_rel
  FROM v$database d,
       gv$instance i,
       gv$system_parameter2 p
 WHERE p.inst_id = i.inst_id
   AND p.name = 'cpu_count'

17:11:49 col:1of5.

17:11:49 col:1of5 "00007_sqld360_323688_17vjd1aast5q7_1a_2_identification.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:49 col:1of5 "Database Configuration"
17:11:49 Version

SELECT /*+ NO_MERGE */
       *
  FROM v$version

17:11:49 col:1of5.

17:11:49 col:1of5 "00008_sqld360_323688_17vjd1aast5q7_1a_3_version.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:49 col:1of5 "Database Configuration"
17:11:49 Database

SELECT /*+ NO_MERGE */
       *
  FROM v$database

17:11:49 col:1of5.

17:11:50 col:1of5 "00009_sqld360_323688_17vjd1aast5q7_1a_4_database.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:50 col:1of5 "Database Configuration"
17:11:50 Instance

SELECT /*+ NO_MERGE */
       *
  FROM gv$instance
 ORDER BY
       inst_id

17:11:50 col:1of5.

17:11:50 col:1of5 "00010_sqld360_323688_17vjd1aast5q7_1a_5_instance.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:50 col:1of5 "Database Configuration"
17:11:50 Modified Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 WHERE ismodified = 'MODIFIED'
 ORDER BY
       name,
       inst_id,
       ordinal

17:11:50 col:1of5.

17:11:50 col:1of5 "00011_sqld360_323688_17vjd1aast5q7_1a_6_modified_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:50 col:1of5 "Database Configuration"
17:11:50 Non-default Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 WHERE isdefault = 'FALSE'
 ORDER BY
       name,
       inst_id,
       ordinal

17:11:50 col:1of5.

17:11:50 col:1of5 "00012_sqld360_323688_17vjd1aast5q7_1a_7_nondefault_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:50 col:1of5 "Database Configuration"
17:11:50 All Parameters

SELECT /*+ NO_MERGE */
       *
  FROM gv$system_parameter2
 ORDER BY
       name,
       inst_id,
       ordinal

17:11:50 col:1of5.

17:11:50 col:1of5 "00013_sqld360_323688_17vjd1aast5q7_1a_8_all_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:50 col:1of5 "Database Configuration"
17:11:50 Parameter File

SELECT /*+ NO_MERGE */
       *
  FROM v$spparameter
 WHERE isspecified = 'TRUE'
 ORDER BY
       name,
       sid,
       ordinal

17:11:50 col:1of5.

17:11:50 col:1of5 "00014_sqld360_323688_17vjd1aast5q7_1a_9_parameter_file.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Database Configuration"
17:11:51 System Stats

SELECT /*+ NO_MERGE */
       *
  FROM sys.aux_stats$

17:11:51 col:1of5.

17:11:51 col:1of5 "00015_sqld360_323688_17vjd1aast5q7_1a_10_system_stats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Database Configuration"
17:11:51 IO Calibration

SELECT /*+ NO_MERGE */
       *
  FROM dba_rsrc_io_calibrate

17:11:51 col:1of5.

17:11:51 col:1of5 "00016_sqld360_323688_17vjd1aast5q7_1a_11_io_calibration.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Database Configuration"
17:11:51 Non-default Fix Controls

SELECT /*+ NO_MERGE */
       *
  FROM v$system_fix_control
 WHERE is_default = 0
 ORDER BY bugno

17:11:51 col:1of5.

17:11:51 col:1of5 "00017_sqld360_323688_17vjd1aast5q7_1a_12_nondefault_fix_controls.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Database Configuration"
17:11:51 All Fix Controls

SELECT /*+ NO_MERGE */
       *
  FROM v$system_fix_control
 ORDER BY bugno

17:11:51 col:1of5.

17:11:51 col:1of5 "00018_sqld360_323688_17vjd1aast5q7_1a_13_all_fix_controls.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Database Configuration"
17:11:51 Optimizer Processing Rate

SELECT /*+ NO_MERGE */
       *
  FROM v$optimizer_processing_rate
 ORDER BY operation_name

17:11:51 col:1of5.

17:11:51 col:1of5 "00019_sqld360_323688_17vjd1aast5q7_1a_14_optimizer_processing_rate.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "NLS Settings"
17:11:51 Session Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_session_parameters
 ORDER BY parameter

17:11:51 col:1of5.

17:11:51 col:1of5 "00020_sqld360_323688_17vjd1aast5q7_1e_15_session_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "NLS Settings"
17:11:51 Instance Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_instance_parameters
 ORDER BY parameter

17:11:51 col:1of5.

17:11:51 col:1of5 "00021_sqld360_323688_17vjd1aast5q7_1e_16_instance_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "NLS Settings"
17:11:51 Database Parameters

SELECT /*+ NO_MERGE */
       *
  FROM nls_database_parameters
 ORDER BY parameter

17:11:51 col:1of5.

17:11:51 col:1of5 "00022_sqld360_323688_17vjd1aast5q7_1e_17_database_parameters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Observations"
17:11:51 System-wide observations

WITH cbo_parameters AS (SELECT /*+ MATERIALIZE */ inst_id, name, value, isdefault FROM gv$sys_optimizer_env),
     fix_controls   AS (SELECT /*+ MATERIALIZE */ inst_id, bugno, value, is_default FROM gv$system_fix_control),
     instances      AS (SELECT /*+ MATERIALIZE */ inst_id, version FROM gv$instance),
     systemstats    AS (SELECT /*+ MATERIALIZE */ MAX(CASE WHEN pname = 'CPUSPEED' THEN pval1 ELSE NULL END) cpuspeed, -- used to determine if workload ss in place
                                                  MAX(CASE WHEN pname = 'CPUSPEEDN' THEN pval1 ELSE NULL END) cpuspeednw,
                                                  MAX(CASE WHEN pname = 'SREADTIM' THEN pval1 ELSE NULL END) sreadtim,
                                                  MAX(CASE WHEN pname = 'MREADTIM' THEN pval1 ELSE NULL END) mreadtim,
                                                  MAX(CASE WHEN pname = 'MBRC' THEN pval1 ELSE NULL END) mbrc
                          FROM sys.aux_stats$)
SELECT inst_id instance, scope, message
  FROM (SELECT inst_id, 'SYSTEM' scope, 'There are '||num_nondef_fixc||' CBO-related parameters set to non-default value' message
           FROM (SELECT COUNT(*) num_nondef_fixc, inst_id
                   FROM cbo_parameters
                  WHERE isdefault = 'NO'
                  GROUP BY inst_id)
          WHERE num_nondef_fixc > 0
        UNION ALL
        SELECT inst_id, 'PARAMETER', 'Parameter '||name||' is set to non-default value of '||value
          FROM cbo_parameters
         WHERE isdefault = 'NO'
        UNION ALL
        SELECT inst_id, 'SYSTEM', 'There are '||num_nondef_fixc||' fix_controls set to non-default value'
          FROM (SELECT COUNT(*) num_nondef_fixc, inst_id
                  FROM fix_controls
                 WHERE is_default = 0
                 GROUP BY inst_id)
         WHERE num_nondef_fixc > 0
        UNION ALL
        SELECT inst_id, 'FIX_CONTROL', 'Fix control '||bugno||' is set to non-default value of '||value
          FROM fix_controls
         WHERE is_default = 0
        UNION ALL
        SELECT cbo_parameters.inst_id, 'OFE', 'OPTIMIZER_FEATURES_ENABLE set to a value ('||cbo_parameters.value||') different than RDBMS version ('||db_version.version||')'
          FROM cbo_parameters,
               (SELECT inst_id, version
                  FROM instances) db_version
         WHERE cbo_parameters.name = 'optimizer_features_enable'
           AND cbo_parameters.value <> SUBSTR(version,1,INSTR(version,'.',1,4)-1)
           AND cbo_parameters.inst_id = db_version.inst_id
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'SREADTIM is not null ('||sreadtim||') while MREADTIME is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND sreadtim IS NOT NULL
           AND mreadtim IS NULL
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'MREADTIM is not null ('||mreadtim||') while SREADTIME is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND sreadtim IS NULL
           AND mreadtim IS NOT NULL
        UNION ALL
        SELECT NULL, 'SYSTEM_STATS', 'Workload system stats gathered but MBRC is null'
          FROM systemstats
         WHERE cpuspeed IS NOT NULL
           AND mbrc IS NULL
        )
 ORDER BY inst_id, scope, message

17:11:51 col:1of5.

17:11:51 col:1of5 "00023_sqld360_323688_17vjd1aast5q7_1f_18_systemwide_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:51 col:1of5 "Observations"
17:11:51 Cursors and Plans specific observations

WITH vsql           AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, optimizer_env_hash_value FROM gv$sql WHERE sql_id = '17vjd1aast5q7'),
     vsqlplan       AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, id, operation, object_owner, object_name, cost, cardinality, filter_predicates FROM gv$sql_plan WHERE sql_id = '17vjd1aast5q7'),
     dbahistsql     AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, optimizer_env_hash_value FROM dba_hist_sqlstat WHERE sql_id = '17vjd1aast5q7' AND 'Y' = 'Y'),
     dbahistsqlplan AS (SELECT /*+ MATERIALIZE */ DISTINCT plan_hash_value, id, operation, object_owner, object_name, cost, cardinality, filter_predicates FROM dba_hist_sql_plan WHERE sql_id = '17vjd1aast5q7' AND 'Y' = 'Y'),
     indexes        AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, owner, index_name, degree FROM dba_indexes WHERE (table_owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')),
     ashdata        AS (SELECT /*+ INLINE */ cost sql_plan_hash_value,
                               operation sql_plan_operation,
                               options sql_plan_options,
                               object_node event,
                               other_tag wait_class,
                               id sql_plan_line_id,
                               partition_id sql_exec_id,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
                               TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
                               object_instance obj#
                          FROM plan_table
                         WHERE statement_id
                          LIKE 'SQLD360_ASH_DATA%'
                          AND remarks = '17vjd1aast5q7'),
    list_of_plans AS (SELECT plan_hash_value FROM vsql UNION SELECT plan_hash_value FROM dbahistsql UNION SELECT sql_plan_hash_value FROM ashdata)
SELECT scope, message
  FROM (SELECT 'OPTIMIZER_ENV' scope, 'There is/are '||COUNT(DISTINCT optimizer_env_hash_value)||' distinct CBO environments between memory and history for this SQL' message
         FROM (SELECT optimizer_env_hash_value
                 FROM vsql
                UNION ALL
               SELECT optimizer_env_hash_value
                 FROM dbahistsql)
         UNION ALL
        SELECT 'INTERNAL_FUNCTION', 'Filter predicate potentially include implicit data-type conversion (might be a red herring in case of long in-list)'
          FROM (SELECT 1
                  FROM vsqlplan
                 WHERE filter_predicates LIKE '%INTERNAL FUNCTION%'
                   AND ROWNUM < 2
                 UNION ALL
                SELECT 1
                  FROM dbahistsqlplan
                 WHERE filter_predicates LIKE '%INTERNAL FUNCTION%'
                   AND ROWNUM < 2)
         WHERE ROWNUM < 2
         UNION ALL
        SELECT 'COST_OF_0', 'Plan Hash Value '||plan_hash_value||' includes operation with a cost of 0, VERY suspicious'
          FROM (SELECT plan_hash_value
                  FROM vsqlplan
                 WHERE cost = 0
                   AND cardinality >= 1 -- always true, btw
                 UNION
                SELECT plan_hash_value
                  FROM dbahistsqlplan
                 WHERE cost = 0
                   AND cardinality >= 1 -- always true, btw
                )
         UNION ALL
        SELECT DISTINCT 'INDEX_NOT_FOUND', 'Plan Hash Value '||plan_hash_value||' refences an index that was not found anymore, maybe dropped?'
          FROM (SELECT plan_hash_value, object_owner, object_name
                  FROM vsqlplan
                 WHERE operation = 'INDEX'
                 UNION
                SELECT plan_hash_value, object_owner, object_name
                  FROM dbahistsqlplan
                 WHERE operation = 'INDEX'
                ) plans,
               indexes
         WHERE plans.object_owner = indexes.owner(+)
           AND plans.object_name = indexes.index_name(+)
           AND indexes.index_name IS NULL
         UNION ALL
        SELECT 'FULL_SCAN_DOING_SINGLE_READS', 'From the ASH *sampled* data for physical reads, Plan Hash Value '||sql_plan_hash_value||' issued single block reads during full scan operations '||TRUNC(num_single_block_reads/num_samples,3)*100||'% of the times'
          FROM (SELECT sql_plan_hash_value,
                       COUNT(*) num_samples,
                       SUM(CASE WHEN event IN ('db file sequential read', 'cell single block physical read') THEN 1 ELSE 0 END) num_single_block_reads
                  FROM ashdata
                 WHERE sql_plan_operation IN ('TABLE ACCESS','INDEX')
                   AND (sql_plan_options LIKE 'FULL%' OR sql_plan_options LIKE 'STORAGE FULL%')
                   AND wait_class = 'User I/O'
                 GROUP BY sql_plan_hash_value)
         WHERE TRUNC(num_single_block_reads/num_samples,3) >= 0.02 -- 2%
         UNION ALL
        SELECT 'FULL_SCAN_READING_FEW_BLOCKS', 'From the ASH *sampled* data for physical reads, Plan Hash Value '||sql_plan_hash_value||' spends most of its time ('||percent_per_phv_and_p3||'%) reading '||p3||' blocks at a time instead of '||POWER(1024,2)/8192||' during full scans'
          FROM (SELECT sql_plan_hash_value,
                       p3,
                       TRUNC(RATIO_TO_REPORT(COUNT(*)) OVER ()*100,3) percent_per_phv_and_p3,
                       ROW_NUMBER() OVER (PARTITION BY sql_plan_hash_value ORDER BY COUNT(*) DESC) rwn
                  FROM ashdata
                 WHERE sql_plan_operation IN ('TABLE ACCESS','INDEX')
                   AND sql_plan_options LIKE 'FULL%'
                   AND event IN ('db file scattered read', 'direct path read')
                 GROUP BY sql_plan_hash_value, p3)
         WHERE rwn = 1
           AND p3 < (POWER(1024,2)/8192)
         UNION ALL
        SELECT 'SQL_MOSTLY_NOT_ON_CPU', 'From the ASH *sampled* data, Plan Hash Value '||sql_plan_hash_value||' spends '||TRUNC(num_samples_per_class/total_samples_per_phv*100,3)||'% of the time on '||wait_class||'-related wait events instead of CPU (usually preferrable, with exceptions :-)'
          FROM (SELECT sql_plan_hash_value,
                       wait_class,
                       num_samples_per_class,
                       ROW_NUMBER() OVER (PARTITION BY sql_plan_hash_value ORDER BY num_samples_per_class DESC) rwn,
                       SUM(num_samples_per_class) OVER(PARTITION BY sql_plan_hash_value) total_samples_per_phv
                  FROM (SELECT sql_plan_hash_value,
                               wait_class,
                               COUNT(*) num_samples_per_class
                          FROM ashdata
                         GROUP BY sql_plan_hash_value, wait_class))
         WHERE rwn = 1
           AND wait_class <> 'CPU' -- so not on CPU
         UNION ALL
        SELECT 'MULTIPLE_PLANS','This SQL has/had '||COUNT(*)||' distinct execution plan(s)'
               ||', list of PHV is ('||LISTAGG(plan_hash_value, ',') WITHIN GROUP (ORDER BY plan_hash_value)||')'
          FROM list_of_plans
         UNION ALL
        SELECT 'POTENTIAL_PARSE_TIME', 'From the ASH *sampled* data, Plan Hash Value '||sql_plan_hash_value||' spent '||potential_parse_time||'% of the time not executing (SQL_EXEC_ID NULL), which usually is parse time'
          FROM (SELECT sql_plan_hash_value,
                       TRUNC(SUM(CASE WHEN sql_exec_id IS NULL THEN 1 ELSE 0 END)/COUNT(*),3) potential_parse_time
                  FROM ashdata
                 GROUP BY sql_plan_hash_value)
         WHERE potential_parse_time >= 0.1
         UNION ALL
        SELECT 'POTENTIAL_HWM_DESYNC', 'Object#: '||obj#||' block class#: '||p3||' sampled '||COUNT(*)||' times'
          FROM ashdata,
               (SELECT name
                  FROM v$event_name
                 WHERE parameter3 = 'class#'
                    OR (name LIKE '%-way' AND parameter3 IS NULL) --parameter3 not named even though it is populated
               ) e
         WHERE e.name = ashdata.event
           AND p3 IN (8,9,10,11,12)
         GROUP BY obj#, p3
         UNION ALL
        SELECT 'LARGE_PERC_PHV0', 'Large number of ASH samples ('||perc_0||'%) have PHV 0 with a valid SQL_EXEC_ID, very likely unresolved adaptive plan (some info based on ASH could be misleading)'
          FROM (SELECT TRUNC(SUM(CASE WHEN sql_plan_hash_value = 0 AND sql_exec_id IS NOT NULL THEN 1 ELSE 0 END)/COUNT(*),3)*100 perc_0
                  FROM ashdata
                 WHERE 'N' <> 'Y')
         WHERE perc_0 >= 2
        )
 ORDER BY scope, message

17:11:51 col:1of5.

17:11:51 col:1of5 "00024_sqld360_323688_17vjd1aast5q7_1f_19_cursors_and_plans_specific_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:52 col:1of5 "Observations"
17:11:52 Table-level observations

WITH tablespaces AS (SELECT /*+ MATERIALIZE */ tablespace_name, block_size
                       FROM dba_tablespaces),
     tables    AS (SELECT /*+ MATERIALIZE */ owner, table_name, tablespace_name, num_rows, blocks, last_analyzed, degree
                     FROM dba_tables
                    WHERE (owner, table_name) IN (SELECT object_owner, object_name
                                                    FROM plan_table
                                                   WHERE statement_id = 'LIST_OF_TABLES'
                                                     AND remarks = '17vjd1aast5q7')),
     partitions AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, partition_name, num_rows, blocks, last_analyzed
                      FROM dba_tab_partitions
                     WHERE (table_owner, table_name) IN (SELECT object_owner, object_name
                                                           FROM plan_table
                                                          WHERE statement_id = 'LIST_OF_TABLES'
                                                            AND remarks = '17vjd1aast5q7')),
     table_and_part_stats AS (SELECT /*+ MATERIALIZE */ owner, table_name, partition_name, stale_stats, stattype_locked
                                FROM dba_tab_statistics
                               WHERE (owner, table_name) IN (SELECT object_owner, object_name
                                                               FROM plan_table
                                                              WHERE statement_id = 'LIST_OF_TABLES'
                                                                AND remarks = '17vjd1aast5q7')
                                 AND subpartition_name IS NULL),
     indexes    AS (SELECT /*+ MATERIALIZE */ table_owner, table_name, index_name, degree
                      FROM dba_indexes
                     WHERE (table_owner, table_name) IN (SELECT object_owner, object_name
                                                           FROM plan_table
                                                          WHERE statement_id = 'LIST_OF_TABLES'
                                                            AND remarks = '17vjd1aast5q7')),
     ind_cols AS (SELECT col.index_owner, col.index_name, col.table_owner, col.table_name, idx.index_type, idx.uniqueness,
                         MAX(CASE col.column_position WHEN 01 THEN      col.column_name END)||
                         MAX(CASE col.column_position WHEN 02 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 03 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 04 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 05 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 06 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 07 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 08 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 09 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 10 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 11 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 12 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 13 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 14 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 15 THEN ':'||col.column_name END)||
                         MAX(CASE col.column_position WHEN 16 THEN ':'||col.column_name END) indexed_columns
                    FROM dba_ind_columns col,
                         dba_indexes idx
                   WHERE (idx.table_owner, idx.table_name) IN (SELECT object_owner, object_name
                                                                 FROM plan_table
                                                                WHERE statement_id = 'LIST_OF_TABLES'
                                                                  AND remarks = '17vjd1aast5q7')
                     AND idx.owner = col.index_owner
                     AND idx.index_name = col.index_name
                   GROUP BY col.index_owner,col.index_name,col.table_owner,col.table_name,idx.index_type,idx.uniqueness)
     , tab_stats_history AS (SELECT o.owner, o.object_name, h.analyzetime, h.rowcnt
                               FROM sys.wri$_optstat_tab_history h,
                                    dba_objects o
                              WHERE (o.owner, o.object_name) IN (SELECT object_owner, object_name
                                                                   FROM plan_table
                                                                  WHERE statement_id = 'LIST_OF_TABLES'
                                                                    AND remarks = '17vjd1aast5q7')
                                AND o.object_type = 'TABLE'
                                AND o.object_id = h.obj#
                                AND 'Y' = 'Y'
                              UNION ALL
                             SELECT owner, table_name, last_analyzed, num_rows
                               FROM tables
                            )
SELECT scope, owner, table_name, message
  FROM (SELECT 'TABLE_STATS' scope, owner, table_name,  'Table '||table_name||' has statistics more than a month old ('||TRUNC(SYSDATE-last_analyzed)||' days old)' message
          FROM tables
         WHERE last_analyzed < ADD_MONTHS(TRUNC(SYSDATE),-1)
         UNION ALL
        SELECT 'TABLE_STALE_STATS', owner, table_name,  'Table '||table_name||' has stale stats'
          FROM table_and_part_stats
         WHERE stale_stats = 'YES'
           AND partition_name IS NULL
         UNION ALL
        SELECT 'TABLE_LOCKED_STATS', owner, table_name,  'Table '||table_name||' has locked stats'
          FROM table_and_part_stats
         WHERE stattype_locked IN ('ALL','DATA')
           AND partition_name IS NULL
         UNION ALL
        SELECT 'TABLE_MISSING_STATS', owner, table_name,  'Table '||table_name||' has no stats'
          FROM tables
         WHERE num_rows IS NULL
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name,  'Table '||table_name||' has '||num_old_parts||' partition(s) with statistics more than a month old'
          FROM (SELECT COUNT(*) num_old_parts, table_owner, table_name
                  FROM partitions
                 WHERE last_analyzed < ADD_MONTHS(TRUNC(SYSDATE),-1)
                 GROUP BY table_owner, table_name)
         WHERE num_old_parts > 0
         UNION ALL
        SELECT 'PARTITION_STALE_STATS', owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has stale stats'
          FROM table_and_part_stats
         WHERE stale_stats = 'YES'
           AND partition_name IS NOT NULL
         UNION ALL
        SELECT 'PARTITION_LOCKED_STATS', owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has locked stats'
          FROM table_and_part_stats
         WHERE stattype_locked IN ('ALL','DATA')
           AND partition_name IS NOT NULL
         UNION ALL
        SELECT 'PARTITION_MISSING_STATS', table_owner, table_name,  'Table partition '||table_name||'.'||partition_name||' has no stats'
          FROM partitions
         WHERE num_rows IS NULL
         UNION ALL
        SELECT 'TABLE_STATS', owner, table_name,  'Table '||table_name||' stores 0 rows but accounts for more than 0 blocks'
          FROM tables
         WHERE num_rows = 0 and blocks > 0
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name||'.'||partition_name,  'Table partition '||table_name||'.'||partition_name||' stores 0 rows but accounts for more than 0 blocks'
          FROM partitions
         WHERE num_rows = 0 and blocks > 0
         UNION ALL
        SELECT 'TABLE_STATS', owner, table_name,  'Table '||table_name||' seems empty (0 rows and 0 blocks)'
          FROM tables
         WHERE num_rows = 0 and blocks = 0
         UNION ALL
        SELECT 'PARTITION_STATS', table_owner, table_name||'.'||partition_name,  'Table partition '||table_name||'.'||partition_name||' seems empty (0 rows and 0 blocks)'
          FROM partitions
         WHERE num_rows = 0 and blocks = 0
         UNION ALL
        SELECT 'TABLE_DEGREE', owner, table_name,  'Table '||table_name||' has a non-default DEGREE ('||TRIM(degree)||')'
          FROM tables
         WHERE TRIM(degree) <> '1'
         UNION ALL
        SELECT 'TABLE_DEGREE', owner, table_name,  'Table '||table_name||' is smaller than 1G in size ('||TRUNC((tbs.block_size * t.blocks)/POWER(10,9),3)||'G) but has DEGREE different than 1 ('||TRIM(degree)||')'
          FROM tables t, tablespaces tbs
         WHERE t.tablespace_name = tbs.tablespace_name
           AND TRIM(degree) <> '1'
           AND (tbs.block_size * t.blocks)/POWER(10,9) <= 1
         UNION ALL
        SELECT 'INDEX_DEGREE', tables.owner, tables.table_name, 'Table '||tables.table_name||' has '||COUNT(*)||' indexes with DEGREE different than the table itself'
          FROM tables,
               indexes
         WHERE tables.owner = indexes.table_owner
           AND tables.table_name = indexes.table_name
           AND TRIM(tables.degree) <> TRIM(indexes.degree)
         GROUP BY tables.owner, tables.table_name
         HAVING COUNT(*) > 0
         UNION ALL
        SELECT 'REDUNDANT_INDEX', r.table_owner, r.table_name, 'Index '||r.index_name||' ('||r.indexed_columns||') is redundant because of '||i.index_name||' ('||i.indexed_columns||')'
          FROM ind_cols r,
               ind_cols i
         WHERE i.table_owner = r.table_owner
           AND i.table_name = r.table_name
           AND i.index_type = r.index_type
           AND i.index_name != r.index_name
           AND i.indexed_columns LIKE r.indexed_columns||':%'
           AND r.uniqueness = 'NONUNIQUE'
         UNION ALL
         SELECT 'TABLE_STATS_HISTORY', owner, table_name, 'Stats were 0 at some point, starting '||init_zero||' up until stats gathering on '||end_zero
           FROM (SELECT owner, object_name table_name, to_char(init_zero,'YYYY-MM-DD/HH24:MI:SS') init_zero, to_char(end_zero,'YYYY-MM-DD/HH24:MI:SS') end_zero
                   FROM tab_stats_history
                   MATCH_RECOGNIZE (
                     PARTITION BY owner, object_name ORDER BY analyzetime
                     MEASURES FIRST(iszero.analyzetime) init_zero,
                              FIRST(a_nonzero.analyzetime) end_zero
                     --ALL ROWS PER MATCH
                     AFTER MATCH SKIP TO FIRST a_nonzero
                     PATTERN (b_nonzero+ iszero+ a_nonzero+)
                     DEFINE b_nonzero AS rowcnt <> 0,
                            iszero  AS rowcnt = 0,
                            a_nonzero AS rowcnt <> 0
                   )
                )
        )
 ORDER BY owner, table_name, scope DESC

17:11:52 col:1of5.

17:11:52 col:1of5 "00025_sqld360_323688_17vjd1aast5q7_1f_20_tablelevel_observations.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:53 col:2of5 "Identification"
17:11:53 Formatted SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:53 col:2of5 "Identification"
17:11:53 Standalone SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Identification"
17:11:54 Expanded SQL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Identification"
17:11:54 SQL Text

SELECT /*+ NO_MERGE */
       *
  FROM v$sqltext_with_newlines
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY piece

17:11:54 col:2of5.

17:11:54 col:2of5 "00029_sqld360_323688_17vjd1aast5q7_2a_25_sql_text.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Identification"
17:11:54 SQL Text from AWR

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sqltext
 WHERE sql_id = '17vjd1aast5q7'

17:11:54 col:2of5.

17:11:54 col:2of5 "00030_sqld360_323688_17vjd1aast5q7_2a_26_sql_text_from_awr.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Performance Summary

 SELECT /*+ NO_MERGE */
       source, plan_hash_value, force_matching_signature, SUM(executions) execs, SUM(end_of_fetch_count) eof_count, ROUND(SUM(buffer_gets)/DECODE(SUM(executions),0,1,SUM(executions))) avg_buffer_gets,
       ROUND(SUM(elapsed_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_elapsed_time_secs, ROUND(SUM(cpu_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_cpu_time_secs,
       ROUND(SUM(io_time)/1e6/DECODE(SUM(executions),0,1,SUM(executions)),6) avg_io_time_secs, ROUND(SUM(rows_processed)/DECODE(SUM(executions),0,1,SUM(executions)),3) avg_rows_processed,
       ROUND(SUM(rows_processed)/DECODE(SUM(fetches),0,1,SUM(fetches)),3) avg_rows_per_fetch,
       sql_profile,
       sql_plan_baseline, sql_patch,
       ROUND(AVG(cost)) avg_cost, MIN(cost) min_cost, MAX(cost) max_cost,
       MIN(first_load_time) first_load_time, MAX(last_load_time) last_load_time,
       MIN(optimizer_env_hash_value) min_cbo_env, max(optimizer_env_hash_value) max_cbo_env,
       MIN(min_dop) min_req_dop, MAX(max_dop) max_req_dop
  FROM (SELECT 'MEM' source, a.plan_hash_value, a.force_matching_signature, a.sql_profile,
                a.sql_plan_baseline, a.sql_patch,
                executions, fetches, end_of_fetch_count, elapsed_time, cpu_time, rows_processed, buffer_gets, first_load_time, last_load_time, optimizer_cost cost, optimizer_env_hash_value, min_dop, max_dop, user_io_wait_time io_time
          FROM gv$sql a,
               (SELECT plan_hash_value, MIN(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) min_dop,
                       MAX(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) max_dop
                  FROM gv$sql_plan
                 WHERE sql_id = '17vjd1aast5q7'
                   AND other_xml IS NOT NULL
                 GROUP BY plan_hash_value) dop
         WHERE sql_id = '17vjd1aast5q7'
           AND a.plan_hash_value = dop.plan_hash_value(+)
        UNION ALL
        SELECT 'HIST' source, a.plan_hash_value, a.force_matching_signature, a.sql_profile,
               'N/A' sql_plan_baseline, 'N/A' sql_patch,
               executions_delta executions, fetches_delta fetches,  end_of_fetch_count_delta end_of_fetch_count, elapsed_time_delta elapsed_time, cpu_time_delta cpu_time, rows_processed_delta rows_processed,
               buffer_gets_delta buffer_gets, null first_load_time, null last_load_time, optimizer_cost, optimizer_env_hash_value, min_dop, max_dop, iowait_delta
          FROM dba_hist_sqlstat a,
               (SELECT plan_hash_value, MIN(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) min_dop,
                       MAX(TO_NUMBER(extractValue(XMLType(other_xml),'/other_xml/info[@type="dop"]'))) max_dop
                  FROM dba_hist_sql_plan
                 WHERE sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND other_xml IS NOT NULL
                 GROUP BY plan_hash_value) dop
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND snap_id BETWEEN 3485 AND 4974
           AND a.plan_hash_value = dop.plan_hash_value(+))
 GROUP BY source, plan_hash_value, force_matching_signature,
          sql_plan_baseline, sql_patch,
          sql_profile

17:11:54 col:2of5.

17:11:54 col:2of5 "00031_sqld360_323688_17vjd1aast5q7_2b_27_sql_performance_summary.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Statistics from Memory


17:11:54 col:2of5.

17:11:54 col:2of5 "00032_sqld360_323688_17vjd1aast5q7_2b_28_sql_statistics_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Statistics from Memory (SQLSTATS)


17:11:54 col:2of5.

17:11:54 col:2of5 "00033_sqld360_323688_17vjd1aast5q7_2b_29_sql_statistics_from_memory_sqlstats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Plan Statistics from Memory

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_plan_statistics_all
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, plan_hash_value, child_number, id

17:11:54 col:2of5.

17:11:54 col:2of5 "00034_sqld360_323688_17vjd1aast5q7_2b_30_sql_plan_statistics_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Plan Statistics from Memory (SQLSTATS)


17:11:54 col:2of5.

17:11:54 col:2of5 "00035_sqld360_323688_17vjd1aast5q7_2b_31_sql_plan_statistics_from_memory_sqlstats.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Statistics from History

SELECT /*+ NO_MERGE */
       sn.begin_interval_time, sn.end_interval_time,
       s.*
  FROM dba_hist_sqlstat s,
       dba_hist_snapshot sn
 WHERE s.snap_id = sn.snap_id
   AND s.instance_number = sn.instance_number
   AND s.sql_id = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND s.snap_id BETWEEN 3485 AND 4974
 ORDER BY s.snap_id desc, s.instance_number, s.plan_hash_value

17:11:54 col:2of5.

17:11:54 col:2of5 "00036_sqld360_323688_17vjd1aast5q7_2b_32_sql_statistics_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:54 col:2of5 "Performance"
17:11:54 SQL Plan Statistics from History

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sql_plan
 WHERE sql_id = '17vjd1aast5q7'
   AND 'Y' = 'Y'
 ORDER BY plan_hash_value, id

17:11:54 col:2of5.

17:11:54 col:2of5 "00037_sqld360_323688_17vjd1aast5q7_2b_33_sql_plan_statistics_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:55 col:2of5 "Execution Plans"
17:11:55 Plan Details

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Plan Tree for PHV 1553667503 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1553667503
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1553667503)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1553667503
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1553667503
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:11:57 col:2of5.

17:11:57 col:2of5 "00039_sqld360_323688_17vjd1aast5q7_2d_1_plan_tree_for_phv_1553667503_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Plan from Memory for PHV 1553667503
Completed: 17:11:57


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Plan from History for PHV 1553667503
Completed: 17:11:57


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Avg et/exec for recent execs for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:11:57 col:2of5.

17:11:57 col:2of5 "00042_sqld360_323688_17vjd1aast5q7_2d_2_avg_etexec_for_recent_execs_for_phv_1553667503.html"
17:11:57 col:2of5 "00043_sqld360_323688_17vjd1aast5q7_2d_2_avg_etexec_for_recent_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Avg et/exec for historical execs for PHV 1553667503

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:11:57 col:2of5.

17:11:57 col:2of5 "00044_sqld360_323688_17vjd1aast5q7_2d_3_avg_etexec_for_historical_execs_for_phv_1553667503.html"
17:11:57 col:2of5 "00045_sqld360_323688_17vjd1aast5q7_2d_3_avg_etexec_for_historical_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Peak PGA and TEMP usage for recent execs for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:11:57 col:2of5.

17:11:57 col:2of5 "00046_sqld360_323688_17vjd1aast5q7_2d_4_peak_pga_and_temp_usage_for_recent_execs_for_phv_1553667503.html"
17:11:57 col:2of5 "00047_sqld360_323688_17vjd1aast5q7_2d_4_peak_pga_and_temp_usage_for_recent_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:57 col:2of5 "Execution Plans"
17:11:57 Peak PGA and TEMP usage for historical execs for PHV 1553667503

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:11:57 col:2of5.

17:11:57 col:2of5 "00048_sqld360_323688_17vjd1aast5q7_2d_5_peak_pga_and_temp_usage_for_historical_execs_for_phv_1553667503.html"
17:11:58 col:2of5 "00049_sqld360_323688_17vjd1aast5q7_2d_5_peak_pga_and_temp_usage_for_historical_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:58 col:2of5 "Execution Plans"
17:11:58 Peak Read and Write I/O requests for recent execs for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:11:58 col:2of5.

17:11:58 col:2of5 "00050_sqld360_323688_17vjd1aast5q7_2d_6_peak_read_and_write_io_requests_for_recent_execs_for_phv_1553667503.html"
17:11:58 col:2of5 "00051_sqld360_323688_17vjd1aast5q7_2d_6_peak_read_and_write_io_requests_for_recent_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:58 col:2of5 "Execution Plans"
17:11:58 Peak Read and Write I/O requests for historical execs for PHV 1553667503

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:11:58 col:2of5.

17:11:58 col:2of5 "00052_sqld360_323688_17vjd1aast5q7_2d_7_peak_read_and_write_io_requests_for_historical_execs_for_phv_1553667503.html"
17:11:58 col:2of5 "00053_sqld360_323688_17vjd1aast5q7_2d_7_peak_read_and_write_io_requests_for_historical_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:58 col:2of5 "Execution Plans"
17:11:58 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:11:58 col:2of5.

17:11:58 col:2of5 "00054_sqld360_323688_17vjd1aast5q7_2d_8_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1553667503.html"
17:11:58 col:2of5 "00055_sqld360_323688_17vjd1aast5q7_2d_8_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:58 col:2of5 "Execution Plans"
17:11:58 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1553667503

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:11:58 col:2of5.

17:11:58 col:2of5 "00056_sqld360_323688_17vjd1aast5q7_2d_9_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1553667503.html"
17:11:58 col:2of5 "00057_sqld360_323688_17vjd1aast5q7_2d_9_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:58 col:2of5 "Execution Plans"
17:11:58 Top Wait events for PHV 1553667503

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:11:58 col:2of5.

17:11:59 col:2of5 "00058_sqld360_323688_17vjd1aast5q7_2d_10_top_wait_events_for_phv_1553667503.html"
17:11:59 col:2of5 "00059_sqld360_323688_17vjd1aast5q7_2d_10_top_wait_events_for_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:59 col:2of5 "Execution Plans"
17:11:59 Top Objects accessed by PHV 1553667503

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1553667503
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:11:59 col:2of5.

17:11:59 col:2of5 "00060_sqld360_323688_17vjd1aast5q7_2d_11_top_objects_accessed_by_phv_1553667503.html"
17:11:59 col:2of5 "00061_sqld360_323688_17vjd1aast5q7_2d_11_top_objects_accessed_by_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:59 col:2of5 "Execution Plans"
17:11:59 Top Plan Steps for PHV 1553667503

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:11:59 col:2of5.

17:11:59 col:2of5 "00062_sqld360_323688_17vjd1aast5q7_2d_12_top_plan_steps_for_phv_1553667503.html"
17:11:59 col:2of5 "00063_sqld360_323688_17vjd1aast5q7_2d_12_top_plan_steps_for_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:59 col:2of5 "Execution Plans"
17:11:59 Top Step/Event/Obj for PHV 1553667503

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1553667503
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:11:59 col:2of5.

17:11:59 col:2of5 "00064_sqld360_323688_17vjd1aast5q7_2d_13_top_stepeventobj_for_phv_1553667503.html"
17:11:59 col:2of5 "00065_sqld360_323688_17vjd1aast5q7_2d_13_top_stepeventobj_for_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:59 col:2of5 "Execution Plans"
17:11:59 Top 15 Wait events over recent time for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1553667503
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:11:59 col:2of5.

17:11:59 col:2of5 "00066_sqld360_323688_17vjd1aast5q7_2d_14_top_15_wait_events_over_recent_time_for_phv_1553667503.html"
17:11:59 col:2of5 "00067_sqld360_323688_17vjd1aast5q7_2d_14_top_15_wait_events_over_recent_time_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:11:59 col:2of5 "Execution Plans"
17:11:59 Top 15 Wait events over historical time for PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1553667503
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:11:59 col:2of5.

17:11:59 col:2of5 "00068_sqld360_323688_17vjd1aast5q7_2d_15_top_15_wait_events_over_historical_time_for_phv_1553667503.html"
17:11:59 col:2of5 "00069_sqld360_323688_17vjd1aast5q7_2d_15_top_15_wait_events_over_historical_time_for_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:00 col:2of5 "Execution Plans"
17:12:00 Plan Tree with subtree for SQL_EXEC_ID 16777236 of PHV 1553667503

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1553667503)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1553667503
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1553667503
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:00 col:2of5.

17:12:00 col:2of5 "00070_sqld360_323688_17vjd1aast5q7_2d_16_plan_tree_with_subtree_for_sqlexecid_16777236_of_phv_1553667503_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:00 col:2of5 "Execution Plans"
17:12:00 Plan Step IDs timeline for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:00 col:2of5.

17:12:00 col:2of5 "00071_sqld360_323688_17vjd1aast5q7_2d_17_plan_step_ids_timeline_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:01 col:2of5 "00072_sqld360_323688_17vjd1aast5q7_2d_17_plan_step_ids_timeline_for_sqlexecid_16777236_of_phv_1553667503_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:01 col:2of5 "Execution Plans"
17:12:01 Top Step/Event/Obj for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:01 col:2of5.

17:12:01 col:2of5 "00073_sqld360_323688_17vjd1aast5q7_2d_18_top_stepeventobj_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:01 col:2of5 "00074_sqld360_323688_17vjd1aast5q7_2d_18_top_stepeventobj_for_sqlexecid_16777236_of_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:02 col:2of5 "Execution Plans"
17:12:02 Top 15 Wait events timeline SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:02 col:2of5.

17:12:02 col:2of5 "00075_sqld360_323688_17vjd1aast5q7_2d_19_top_15_wait_events_timeline_sqlexecid_16777236_of_phv_1553667503.html"
17:12:02 col:2of5 "00076_sqld360_323688_17vjd1aast5q7_2d_19_top_15_wait_events_timeline_sqlexecid_16777236_of_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:02 col:2of5 "Execution Plans"
17:12:02 DB Time by PX process for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:02 col:2of5.

17:12:02 col:2of5 "00077_sqld360_323688_17vjd1aast5q7_2d_20_db_time_by_px_process_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:03 col:2of5 "00078_sqld360_323688_17vjd1aast5q7_2d_20_db_time_by_px_process_for_sqlexecid_16777236_of_phv_1553667503_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:03 col:2of5 "Execution Plans"
17:12:03 PGA and TEMP usage for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:03 col:2of5.

17:12:03 col:2of5 "00079_sqld360_323688_17vjd1aast5q7_2d_21_pga_and_temp_usage_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:04 col:2of5 "00080_sqld360_323688_17vjd1aast5q7_2d_21_pga_and_temp_usage_for_sqlexecid_16777236_of_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:04 col:2of5 "Execution Plans"
17:12:04 Read and Write I/O requests for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:04 col:2of5.

17:12:04 col:2of5 "00081_sqld360_323688_17vjd1aast5q7_2d_22_read_and_write_io_requests_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:05 col:2of5 "00082_sqld360_323688_17vjd1aast5q7_2d_22_read_and_write_io_requests_for_sqlexecid_16777236_of_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:05 col:2of5 "Execution Plans"
17:12:05 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:05 col:2of5.

17:12:05 col:2of5 "00083_sqld360_323688_17vjd1aast5q7_2d_23_read_write_and_interconnect_io_bytes_for_sqlexecid_16777236_of_phv_1553667503.html"
17:12:05 col:2of5 "00084_sqld360_323688_17vjd1aast5q7_2d_23_read_write_and_interconnect_io_bytes_for_sqlexecid_16777236_of_phv_1553667503_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:06 col:2of5 "Execution Plans"
17:12:06 Raw Data for SQL_EXEC_ID 16777236 of PHV 1553667503

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1553667503
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3125
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2918
AND timestamp BETWEEN TO_DATE('20201027205629', 'YYYYMMDDHH24MISS') AND TO_DATE('20201028173522', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777236) = 16777236
AND NVL(distribution, TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027205623', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:06 col:2of5.

17:12:06 col:2of5 "00085_sqld360_323688_17vjd1aast5q7_2d_24_raw_data_for_sqlexecid_16777236_of_phv_1553667503.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:17 col:2of5 "Execution Plans"
17:12:17 Plan Tree for PHV 3954730776 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =3954730776
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3954730776
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:17 col:2of5.

17:12:17 col:2of5 "00086_sqld360_323688_17vjd1aast5q7_2d_25_plan_tree_for_phv_3954730776_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:17 col:2of5 "Execution Plans"
17:12:17 Plan from Memory for PHV 3954730776
Completed: 17:12:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:17 col:2of5 "Execution Plans"
17:12:17 Plan from History for PHV 3954730776
Completed: 17:12:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:17 col:2of5 "Execution Plans"
17:12:17 Avg et/exec for recent execs for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:12:17 col:2of5.

17:12:17 col:2of5 "00089_sqld360_323688_17vjd1aast5q7_2d_26_avg_etexec_for_recent_execs_for_phv_3954730776.html"
17:12:17 col:2of5 "00090_sqld360_323688_17vjd1aast5q7_2d_26_avg_etexec_for_recent_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:17 col:2of5 "Execution Plans"
17:12:17 Avg et/exec for historical execs for PHV 3954730776

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:17 col:2of5.

17:12:17 col:2of5 "00091_sqld360_323688_17vjd1aast5q7_2d_27_avg_etexec_for_historical_execs_for_phv_3954730776.html"
17:12:18 col:2of5 "00092_sqld360_323688_17vjd1aast5q7_2d_27_avg_etexec_for_historical_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:18 col:2of5 "Execution Plans"
17:12:18 Peak PGA and TEMP usage for recent execs for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:18 col:2of5.

17:12:18 col:2of5 "00093_sqld360_323688_17vjd1aast5q7_2d_28_peak_pga_and_temp_usage_for_recent_execs_for_phv_3954730776.html"
17:12:18 col:2of5 "00094_sqld360_323688_17vjd1aast5q7_2d_28_peak_pga_and_temp_usage_for_recent_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:18 col:2of5 "Execution Plans"
17:12:18 Peak PGA and TEMP usage for historical execs for PHV 3954730776

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:18 col:2of5.

17:12:18 col:2of5 "00095_sqld360_323688_17vjd1aast5q7_2d_29_peak_pga_and_temp_usage_for_historical_execs_for_phv_3954730776.html"
17:12:18 col:2of5 "00096_sqld360_323688_17vjd1aast5q7_2d_29_peak_pga_and_temp_usage_for_historical_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:18 col:2of5 "Execution Plans"
17:12:18 Peak Read and Write I/O requests for recent execs for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:18 col:2of5.

17:12:18 col:2of5 "00097_sqld360_323688_17vjd1aast5q7_2d_30_peak_read_and_write_io_requests_for_recent_execs_for_phv_3954730776.html"
17:12:18 col:2of5 "00098_sqld360_323688_17vjd1aast5q7_2d_30_peak_read_and_write_io_requests_for_recent_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:18 col:2of5 "Execution Plans"
17:12:18 Peak Read and Write I/O requests for historical execs for PHV 3954730776

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:18 col:2of5.

17:12:18 col:2of5 "00099_sqld360_323688_17vjd1aast5q7_2d_31_peak_read_and_write_io_requests_for_historical_execs_for_phv_3954730776.html"
17:12:18 col:2of5 "00100_sqld360_323688_17vjd1aast5q7_2d_31_peak_read_and_write_io_requests_for_historical_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:19 col:2of5.

17:12:19 col:2of5 "00101_sqld360_323688_17vjd1aast5q7_2d_32_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3954730776.html"
17:12:19 col:2of5 "00102_sqld360_323688_17vjd1aast5q7_2d_32_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 3954730776

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:19 col:2of5.

17:12:19 col:2of5 "00103_sqld360_323688_17vjd1aast5q7_2d_33_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3954730776.html"
17:12:19 col:2of5 "00104_sqld360_323688_17vjd1aast5q7_2d_33_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Top Wait events for PHV 3954730776

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:12:19 col:2of5.

17:12:19 col:2of5 "00105_sqld360_323688_17vjd1aast5q7_2d_34_top_wait_events_for_phv_3954730776.html"
17:12:19 col:2of5 "00106_sqld360_323688_17vjd1aast5q7_2d_34_top_wait_events_for_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Top Objects accessed by PHV 3954730776

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  3954730776
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:12:19 col:2of5.

17:12:19 col:2of5 "00107_sqld360_323688_17vjd1aast5q7_2d_35_top_objects_accessed_by_phv_3954730776.html"
17:12:19 col:2of5 "00108_sqld360_323688_17vjd1aast5q7_2d_35_top_objects_accessed_by_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Top Plan Steps for PHV 3954730776

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:12:19 col:2of5.

17:12:19 col:2of5 "00109_sqld360_323688_17vjd1aast5q7_2d_36_top_plan_steps_for_phv_3954730776.html"
17:12:19 col:2of5 "00110_sqld360_323688_17vjd1aast5q7_2d_36_top_plan_steps_for_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:19 col:2of5 "Execution Plans"
17:12:19 Top Step/Event/Obj for PHV 3954730776

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  3954730776
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:19 col:2of5.

17:12:19 col:2of5 "00111_sqld360_323688_17vjd1aast5q7_2d_37_top_stepeventobj_for_phv_3954730776.html"
17:12:19 col:2of5 "00112_sqld360_323688_17vjd1aast5q7_2d_37_top_stepeventobj_for_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:20 col:2of5 "Execution Plans"
17:12:20 Top 15 Wait events over recent time for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3954730776
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:20 col:2of5.

17:12:20 col:2of5 "00113_sqld360_323688_17vjd1aast5q7_2d_38_top_15_wait_events_over_recent_time_for_phv_3954730776.html"
17:12:20 col:2of5 "00114_sqld360_323688_17vjd1aast5q7_2d_38_top_15_wait_events_over_recent_time_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:20 col:2of5 "Execution Plans"
17:12:20 Top 15 Wait events over historical time for PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02direct path read temp" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3954730776
AND object_node IN ('ON CPU','direct path read temp','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:20 col:2of5.

17:12:20 col:2of5 "00115_sqld360_323688_17vjd1aast5q7_2d_39_top_15_wait_events_over_historical_time_for_phv_3954730776.html"
17:12:20 col:2of5 "00116_sqld360_323688_17vjd1aast5q7_2d_39_top_15_wait_events_over_historical_time_for_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:20 col:2of5 "Execution Plans"
17:12:20 Plan Tree with subtree for SQL_EXEC_ID 16777235 of PHV 3954730776

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3954730776
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:20 col:2of5.

17:12:20 col:2of5 "00117_sqld360_323688_17vjd1aast5q7_2d_40_plan_tree_with_subtree_for_sqlexecid_16777235_of_phv_3954730776_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:20 col:2of5 "Execution Plans"
17:12:20 Plan Step IDs timeline for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:20 col:2of5.

17:12:21 col:2of5 "00118_sqld360_323688_17vjd1aast5q7_2d_41_plan_step_ids_timeline_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00119_sqld360_323688_17vjd1aast5q7_2d_41_plan_step_ids_timeline_for_sqlexecid_16777235_of_phv_3954730776_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:21 col:2of5 "Execution Plans"
17:12:21 Top Step/Event/Obj for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:21 col:2of5.

17:12:21 col:2of5 "00120_sqld360_323688_17vjd1aast5q7_2d_42_top_stepeventobj_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00121_sqld360_323688_17vjd1aast5q7_2d_42_top_stepeventobj_for_sqlexecid_16777235_of_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:21 col:2of5 "Execution Plans"
17:12:21 Top 15 Wait events timeline SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02direct path read temp" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','direct path read temp','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:21 col:2of5.

17:12:21 col:2of5 "00122_sqld360_323688_17vjd1aast5q7_2d_43_top_15_wait_events_timeline_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00123_sqld360_323688_17vjd1aast5q7_2d_43_top_15_wait_events_timeline_sqlexecid_16777235_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:21 col:2of5 "Execution Plans"
17:12:21 DB Time by PX process for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:21 col:2of5.

17:12:21 col:2of5 "00124_sqld360_323688_17vjd1aast5q7_2d_44_db_time_by_px_process_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00125_sqld360_323688_17vjd1aast5q7_2d_44_db_time_by_px_process_for_sqlexecid_16777235_of_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:21 col:2of5 "Execution Plans"
17:12:21 PGA and TEMP usage for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:21 col:2of5.

17:12:21 col:2of5 "00126_sqld360_323688_17vjd1aast5q7_2d_45_pga_and_temp_usage_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00127_sqld360_323688_17vjd1aast5q7_2d_45_pga_and_temp_usage_for_sqlexecid_16777235_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:21 col:2of5 "Execution Plans"
17:12:21 Read and Write I/O requests for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:21 col:2of5.

17:12:21 col:2of5 "00128_sqld360_323688_17vjd1aast5q7_2d_46_read_and_write_io_requests_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:21 col:2of5 "00129_sqld360_323688_17vjd1aast5q7_2d_46_read_and_write_io_requests_for_sqlexecid_16777235_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:22 col:2of5 "Execution Plans"
17:12:22 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:22 col:2of5.

17:12:22 col:2of5 "00130_sqld360_323688_17vjd1aast5q7_2d_47_read_write_and_interconnect_io_bytes_for_sqlexecid_16777235_of_phv_3954730776.html"
17:12:22 col:2of5 "00131_sqld360_323688_17vjd1aast5q7_2d_47_read_write_and_interconnect_io_bytes_for_sqlexecid_16777235_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:22 col:2of5 "Execution Plans"
17:12:22 Raw Data for SQL_EXEC_ID 16777235 of PHV 3954730776

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1955
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 27113
AND timestamp BETWEEN TO_DATE('20201027193304', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027205519', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777235) = 16777235
AND NVL(distribution, TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027193254', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:22 col:2of5.

17:12:22 col:2of5 "00132_sqld360_323688_17vjd1aast5q7_2d_48_raw_data_for_sqlexecid_16777235_of_phv_3954730776.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:23 col:2of5 "Execution Plans"
17:12:23 Plan Tree with subtree for SQL_EXEC_ID 33554450 of PHV 3954730776

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =3954730776
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =3954730776
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:23 col:2of5.

17:12:23 col:2of5 "00133_sqld360_323688_17vjd1aast5q7_2d_49_plan_tree_with_subtree_for_sqlexecid_33554450_of_phv_3954730776_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:23 col:2of5 "Execution Plans"
17:12:23 Plan Step IDs timeline for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:23 col:2of5.

17:12:23 col:2of5 "00134_sqld360_323688_17vjd1aast5q7_2d_50_plan_step_ids_timeline_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:23 col:2of5 "00135_sqld360_323688_17vjd1aast5q7_2d_50_plan_step_ids_timeline_for_sqlexecid_33554450_of_phv_3954730776_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:23 col:2of5 "Execution Plans"
17:12:23 Top Step/Event/Obj for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:23 col:2of5.

17:12:23 col:2of5 "00136_sqld360_323688_17vjd1aast5q7_2d_51_top_stepeventobj_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:23 col:2of5 "00137_sqld360_323688_17vjd1aast5q7_2d_51_top_stepeventobj_for_sqlexecid_33554450_of_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:23 col:2of5 "Execution Plans"
17:12:23 Top 15 Wait events timeline SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02direct path read temp" ,
NVL(num_sess_03,0) "e03cell single block physical " ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','direct path read temp','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:23 col:2of5.

17:12:23 col:2of5 "00138_sqld360_323688_17vjd1aast5q7_2d_52_top_15_wait_events_timeline_sqlexecid_33554450_of_phv_3954730776.html"
17:12:23 col:2of5 "00139_sqld360_323688_17vjd1aast5q7_2d_52_top_15_wait_events_timeline_sqlexecid_33554450_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:24 col:2of5 "Execution Plans"
17:12:24 DB Time by PX process for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:24 col:2of5.

17:12:24 col:2of5 "00140_sqld360_323688_17vjd1aast5q7_2d_53_db_time_by_px_process_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:24 col:2of5 "00141_sqld360_323688_17vjd1aast5q7_2d_53_db_time_by_px_process_for_sqlexecid_33554450_of_phv_3954730776_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:24 col:2of5 "Execution Plans"
17:12:24 PGA and TEMP usage for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:24 col:2of5.

17:12:24 col:2of5 "00142_sqld360_323688_17vjd1aast5q7_2d_54_pga_and_temp_usage_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:24 col:2of5 "00143_sqld360_323688_17vjd1aast5q7_2d_54_pga_and_temp_usage_for_sqlexecid_33554450_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:24 col:2of5 "Execution Plans"
17:12:24 Read and Write I/O requests for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:24 col:2of5.

17:12:24 col:2of5 "00144_sqld360_323688_17vjd1aast5q7_2d_55_read_and_write_io_requests_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:24 col:2of5 "00145_sqld360_323688_17vjd1aast5q7_2d_55_read_and_write_io_requests_for_sqlexecid_33554450_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:24 col:2of5 "Execution Plans"
17:12:24 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:24 col:2of5.

17:12:24 col:2of5 "00146_sqld360_323688_17vjd1aast5q7_2d_56_read_write_and_interconnect_io_bytes_for_sqlexecid_33554450_of_phv_3954730776.html"
17:12:24 col:2of5 "00147_sqld360_323688_17vjd1aast5q7_2d_56_read_write_and_interconnect_io_bytes_for_sqlexecid_33554450_of_phv_3954730776_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:24 col:2of5 "Execution Plans"
17:12:24 Raw Data for SQL_EXEC_ID 33554450 of PHV 3954730776

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  3954730776
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5427
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 18401
AND timestamp BETWEEN TO_DATE('20201026193630', 'YYYYMMDDHH24MISS') AND TO_DATE('20201026204558', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554450) = 33554450
AND NVL(distribution, TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')) = TO_DATE('20201026193622', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:24 col:2of5.

17:12:24 col:2of5 "00148_sqld360_323688_17vjd1aast5q7_2d_57_raw_data_for_sqlexecid_33554450_of_phv_3954730776.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:25 col:2of5 "Execution Plans"
17:12:25 Plan Tree for PHV 878120166 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =878120166
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =878120166
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:25 col:2of5.

17:12:25 col:2of5 "00149_sqld360_323688_17vjd1aast5q7_2d_58_plan_tree_for_phv_878120166_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:25 col:2of5 "Execution Plans"
17:12:25 Plan from Memory for PHV 878120166
Completed: 17:12:25


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:25 col:2of5 "Execution Plans"
17:12:25 Plan from History for PHV 878120166
Completed: 17:12:26


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:26 col:2of5 "Execution Plans"
17:12:26 Avg et/exec for recent execs for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:12:26 col:2of5.

17:12:26 col:2of5 "00152_sqld360_323688_17vjd1aast5q7_2d_59_avg_etexec_for_recent_execs_for_phv_878120166.html"
17:12:26 col:2of5 "00153_sqld360_323688_17vjd1aast5q7_2d_59_avg_etexec_for_recent_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:26 col:2of5 "Execution Plans"
17:12:26 Avg et/exec for historical execs for PHV 878120166

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:26 col:2of5.

17:12:26 col:2of5 "00154_sqld360_323688_17vjd1aast5q7_2d_60_avg_etexec_for_historical_execs_for_phv_878120166.html"
17:12:26 col:2of5 "00155_sqld360_323688_17vjd1aast5q7_2d_60_avg_etexec_for_historical_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:26 col:2of5 "Execution Plans"
17:12:26 Peak PGA and TEMP usage for recent execs for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:26 col:2of5.

17:12:26 col:2of5 "00156_sqld360_323688_17vjd1aast5q7_2d_61_peak_pga_and_temp_usage_for_recent_execs_for_phv_878120166.html"
17:12:26 col:2of5 "00157_sqld360_323688_17vjd1aast5q7_2d_61_peak_pga_and_temp_usage_for_recent_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:26 col:2of5 "Execution Plans"
17:12:26 Peak PGA and TEMP usage for historical execs for PHV 878120166

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:26 col:2of5.

17:12:26 col:2of5 "00158_sqld360_323688_17vjd1aast5q7_2d_62_peak_pga_and_temp_usage_for_historical_execs_for_phv_878120166.html"
17:12:26 col:2of5 "00159_sqld360_323688_17vjd1aast5q7_2d_62_peak_pga_and_temp_usage_for_historical_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:26 col:2of5 "Execution Plans"
17:12:26 Peak Read and Write I/O requests for recent execs for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:26 col:2of5.

17:12:26 col:2of5 "00160_sqld360_323688_17vjd1aast5q7_2d_63_peak_read_and_write_io_requests_for_recent_execs_for_phv_878120166.html"
17:12:26 col:2of5 "00161_sqld360_323688_17vjd1aast5q7_2d_63_peak_read_and_write_io_requests_for_recent_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:27 col:2of5 "Execution Plans"
17:12:27 Peak Read and Write I/O requests for historical execs for PHV 878120166

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:27 col:2of5.

17:12:27 col:2of5 "00162_sqld360_323688_17vjd1aast5q7_2d_64_peak_read_and_write_io_requests_for_historical_execs_for_phv_878120166.html"
17:12:27 col:2of5 "00163_sqld360_323688_17vjd1aast5q7_2d_64_peak_read_and_write_io_requests_for_historical_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:27 col:2of5 "Execution Plans"
17:12:27 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:27 col:2of5.

17:12:27 col:2of5 "00164_sqld360_323688_17vjd1aast5q7_2d_65_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_878120166.html"
17:12:27 col:2of5 "00165_sqld360_323688_17vjd1aast5q7_2d_65_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:27 col:2of5 "Execution Plans"
17:12:27 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 878120166

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:27 col:2of5.

17:12:27 col:2of5 "00166_sqld360_323688_17vjd1aast5q7_2d_66_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_878120166.html"
17:12:27 col:2of5 "00167_sqld360_323688_17vjd1aast5q7_2d_66_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:27 col:2of5 "Execution Plans"
17:12:27 Top Wait events for PHV 878120166

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:12:27 col:2of5.

17:12:27 col:2of5 "00168_sqld360_323688_17vjd1aast5q7_2d_67_top_wait_events_for_phv_878120166.html"
17:12:27 col:2of5 "00169_sqld360_323688_17vjd1aast5q7_2d_67_top_wait_events_for_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:27 col:2of5 "Execution Plans"
17:12:27 Top Objects accessed by PHV 878120166

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  878120166
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:12:27 col:2of5.

17:12:27 col:2of5 "00170_sqld360_323688_17vjd1aast5q7_2d_68_top_objects_accessed_by_phv_878120166.html"
17:12:28 col:2of5 "00171_sqld360_323688_17vjd1aast5q7_2d_68_top_objects_accessed_by_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:28 col:2of5 "Execution Plans"
17:12:28 Top Plan Steps for PHV 878120166

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:12:28 col:2of5.

17:12:28 col:2of5 "00172_sqld360_323688_17vjd1aast5q7_2d_69_top_plan_steps_for_phv_878120166.html"
17:12:28 col:2of5 "00173_sqld360_323688_17vjd1aast5q7_2d_69_top_plan_steps_for_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:28 col:2of5 "Execution Plans"
17:12:28 Top Step/Event/Obj for PHV 878120166

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  878120166
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:28 col:2of5.

17:12:28 col:2of5 "00174_sqld360_323688_17vjd1aast5q7_2d_70_top_stepeventobj_for_phv_878120166.html"
17:12:28 col:2of5 "00175_sqld360_323688_17vjd1aast5q7_2d_70_top_stepeventobj_for_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:28 col:2of5 "Execution Plans"
17:12:28 Top 15 Wait events over recent time for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 878120166
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:28 col:2of5.

17:12:28 col:2of5 "00176_sqld360_323688_17vjd1aast5q7_2d_71_top_15_wait_events_over_recent_time_for_phv_878120166.html"
17:12:28 col:2of5 "00177_sqld360_323688_17vjd1aast5q7_2d_71_top_15_wait_events_over_recent_time_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:28 col:2of5 "Execution Plans"
17:12:28 Top 15 Wait events over historical time for PHV 878120166

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02direct path read temp" ,
NVL(aas_03,0) "e03cell single block physical " ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 878120166
AND object_node IN ('ON CPU','direct path read temp','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:28 col:2of5.

17:12:28 col:2of5 "00178_sqld360_323688_17vjd1aast5q7_2d_72_top_15_wait_events_over_historical_time_for_phv_878120166.html"
17:12:28 col:2of5 "00179_sqld360_323688_17vjd1aast5q7_2d_72_top_15_wait_events_over_historical_time_for_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:28 col:2of5 "Execution Plans"
17:12:28 Plan Tree with subtree for SQL_EXEC_ID 33554445 of PHV 878120166

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =878120166
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:28 col:2of5.

17:12:28 col:2of5 "00180_sqld360_323688_17vjd1aast5q7_2d_73_plan_tree_with_subtree_for_sqlexecid_33554445_of_phv_878120166_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:29 col:2of5 "Execution Plans"
17:12:29 Plan Step IDs timeline for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:29 col:2of5.

17:12:29 col:2of5 "00181_sqld360_323688_17vjd1aast5q7_2d_74_plan_step_ids_timeline_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:29 col:2of5 "00182_sqld360_323688_17vjd1aast5q7_2d_74_plan_step_ids_timeline_for_sqlexecid_33554445_of_phv_878120166_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:29 col:2of5 "Execution Plans"
17:12:29 Top Step/Event/Obj for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:29 col:2of5.

17:12:29 col:2of5 "00183_sqld360_323688_17vjd1aast5q7_2d_75_top_stepeventobj_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:29 col:2of5 "00184_sqld360_323688_17vjd1aast5q7_2d_75_top_stepeventobj_for_sqlexecid_33554445_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:29 col:2of5 "Execution Plans"
17:12:29 Top 15 Wait events timeline SQL_EXEC_ID 33554445 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02direct path read temp" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','direct path read temp','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:29 col:2of5.

17:12:29 col:2of5 "00185_sqld360_323688_17vjd1aast5q7_2d_76_top_15_wait_events_timeline_sqlexecid_33554445_of_phv_878120166.html"
17:12:29 col:2of5 "00186_sqld360_323688_17vjd1aast5q7_2d_76_top_15_wait_events_timeline_sqlexecid_33554445_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:29 col:2of5 "Execution Plans"
17:12:29 DB Time by PX process for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:29 col:2of5.

17:12:29 col:2of5 "00187_sqld360_323688_17vjd1aast5q7_2d_77_db_time_by_px_process_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:29 col:2of5 "00188_sqld360_323688_17vjd1aast5q7_2d_77_db_time_by_px_process_for_sqlexecid_33554445_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:30 col:2of5 "Execution Plans"
17:12:30 PGA and TEMP usage for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:30 col:2of5.

17:12:30 col:2of5 "00189_sqld360_323688_17vjd1aast5q7_2d_78_pga_and_temp_usage_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:30 col:2of5 "00190_sqld360_323688_17vjd1aast5q7_2d_78_pga_and_temp_usage_for_sqlexecid_33554445_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:30 col:2of5 "Execution Plans"
17:12:30 Read and Write I/O requests for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:30 col:2of5.

17:12:30 col:2of5 "00191_sqld360_323688_17vjd1aast5q7_2d_79_read_and_write_io_requests_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:30 col:2of5 "00192_sqld360_323688_17vjd1aast5q7_2d_79_read_and_write_io_requests_for_sqlexecid_33554445_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:30 col:2of5 "Execution Plans"
17:12:30 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:30 col:2of5.

17:12:30 col:2of5 "00193_sqld360_323688_17vjd1aast5q7_2d_80_read_write_and_interconnect_io_bytes_for_sqlexecid_33554445_of_phv_878120166.html"
17:12:30 col:2of5 "00194_sqld360_323688_17vjd1aast5q7_2d_80_read_write_and_interconnect_io_bytes_for_sqlexecid_33554445_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:30 col:2of5 "Execution Plans"
17:12:30 Raw Data for SQL_EXEC_ID 33554445 of PHV 878120166

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5821
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 54123
AND timestamp BETWEEN TO_DATE('20201024193606', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024203231', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554445) = 33554445
AND NVL(distribution, TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024193559', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:30 col:2of5.

17:12:30 col:2of5 "00195_sqld360_323688_17vjd1aast5q7_2d_81_raw_data_for_sqlexecid_33554445_of_phv_878120166.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:31 col:2of5 "Execution Plans"
17:12:31 Plan Tree with subtree for SQL_EXEC_ID 33554451 of PHV 878120166

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =878120166
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:31 col:2of5.

17:12:31 col:2of5 "00196_sqld360_323688_17vjd1aast5q7_2d_82_plan_tree_with_subtree_for_sqlexecid_33554451_of_phv_878120166_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:31 col:2of5 "Execution Plans"
17:12:31 Plan Step IDs timeline for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:31 col:2of5.

17:12:31 col:2of5 "00197_sqld360_323688_17vjd1aast5q7_2d_83_plan_step_ids_timeline_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:31 col:2of5 "00198_sqld360_323688_17vjd1aast5q7_2d_83_plan_step_ids_timeline_for_sqlexecid_33554451_of_phv_878120166_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:31 col:2of5 "Execution Plans"
17:12:31 Top Step/Event/Obj for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:31 col:2of5.

17:12:31 col:2of5 "00199_sqld360_323688_17vjd1aast5q7_2d_84_top_stepeventobj_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:31 col:2of5 "00200_sqld360_323688_17vjd1aast5q7_2d_84_top_stepeventobj_for_sqlexecid_33554451_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 Top 15 Wait events timeline SQL_EXEC_ID 33554451 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02direct path read temp" ,
NVL(num_sess_03,0) "e03cell single block physical " ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','direct path read temp','cell single block physical read','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:32 col:2of5.

17:12:32 col:2of5 "00201_sqld360_323688_17vjd1aast5q7_2d_85_top_15_wait_events_timeline_sqlexecid_33554451_of_phv_878120166.html"
17:12:32 col:2of5 "00202_sqld360_323688_17vjd1aast5q7_2d_85_top_15_wait_events_timeline_sqlexecid_33554451_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 DB Time by PX process for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:32 col:2of5.

17:12:32 col:2of5 "00203_sqld360_323688_17vjd1aast5q7_2d_86_db_time_by_px_process_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:32 col:2of5 "00204_sqld360_323688_17vjd1aast5q7_2d_86_db_time_by_px_process_for_sqlexecid_33554451_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 PGA and TEMP usage for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:32 col:2of5.

17:12:32 col:2of5 "00205_sqld360_323688_17vjd1aast5q7_2d_87_pga_and_temp_usage_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:32 col:2of5 "00206_sqld360_323688_17vjd1aast5q7_2d_87_pga_and_temp_usage_for_sqlexecid_33554451_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 Read and Write I/O requests for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:32 col:2of5.

17:12:32 col:2of5 "00207_sqld360_323688_17vjd1aast5q7_2d_88_read_and_write_io_requests_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:32 col:2of5 "00208_sqld360_323688_17vjd1aast5q7_2d_88_read_and_write_io_requests_for_sqlexecid_33554451_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:32 col:2of5.

17:12:32 col:2of5 "00209_sqld360_323688_17vjd1aast5q7_2d_89_read_write_and_interconnect_io_bytes_for_sqlexecid_33554451_of_phv_878120166.html"
17:12:32 col:2of5 "00210_sqld360_323688_17vjd1aast5q7_2d_89_read_write_and_interconnect_io_bytes_for_sqlexecid_33554451_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:32 col:2of5 "Execution Plans"
17:12:32 Raw Data for SQL_EXEC_ID 33554451 of PHV 878120166

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 416
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58937
AND timestamp BETWEEN TO_DATE('20201006182943', 'YYYYMMDDHH24MISS') AND TO_DATE('20201006192549', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554451) = 33554451
AND NVL(distribution, TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')) = TO_DATE('20201006182939', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:32 col:2of5.

17:12:32 col:2of5 "00211_sqld360_323688_17vjd1aast5q7_2d_90_raw_data_for_sqlexecid_33554451_of_phv_878120166.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:33 col:2of5 "Execution Plans"
17:12:33 Plan Tree with subtree for SQL_EXEC_ID 33554437 of PHV 878120166

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =878120166
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =878120166
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:33 col:2of5.

17:12:33 col:2of5 "00212_sqld360_323688_17vjd1aast5q7_2d_91_plan_tree_with_subtree_for_sqlexecid_33554437_of_phv_878120166_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 Plan Step IDs timeline for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:34 col:2of5.

17:12:34 col:2of5 "00213_sqld360_323688_17vjd1aast5q7_2d_92_plan_step_ids_timeline_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00214_sqld360_323688_17vjd1aast5q7_2d_92_plan_step_ids_timeline_for_sqlexecid_33554437_of_phv_878120166_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 Top Step/Event/Obj for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:34 col:2of5.

17:12:34 col:2of5 "00215_sqld360_323688_17vjd1aast5q7_2d_93_top_stepeventobj_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00216_sqld360_323688_17vjd1aast5q7_2d_93_top_stepeventobj_for_sqlexecid_33554437_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 Top 15 Wait events timeline SQL_EXEC_ID 33554437 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02direct path read temp" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'direct path read temp' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','direct path read temp','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:34 col:2of5.

17:12:34 col:2of5 "00217_sqld360_323688_17vjd1aast5q7_2d_94_top_15_wait_events_timeline_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00218_sqld360_323688_17vjd1aast5q7_2d_94_top_15_wait_events_timeline_sqlexecid_33554437_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 DB Time by PX process for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:34 col:2of5.

17:12:34 col:2of5 "00219_sqld360_323688_17vjd1aast5q7_2d_95_db_time_by_px_process_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00220_sqld360_323688_17vjd1aast5q7_2d_95_db_time_by_px_process_for_sqlexecid_33554437_of_phv_878120166_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 PGA and TEMP usage for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:34 col:2of5.

17:12:34 col:2of5 "00221_sqld360_323688_17vjd1aast5q7_2d_96_pga_and_temp_usage_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00222_sqld360_323688_17vjd1aast5q7_2d_96_pga_and_temp_usage_for_sqlexecid_33554437_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:34 col:2of5 "Execution Plans"
17:12:34 Read and Write I/O requests for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:34 col:2of5.

17:12:34 col:2of5 "00223_sqld360_323688_17vjd1aast5q7_2d_97_read_and_write_io_requests_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:34 col:2of5 "00224_sqld360_323688_17vjd1aast5q7_2d_97_read_and_write_io_requests_for_sqlexecid_33554437_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:35 col:2of5 "Execution Plans"
17:12:35 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:35 col:2of5.

17:12:35 col:2of5 "00225_sqld360_323688_17vjd1aast5q7_2d_98_read_write_and_interconnect_io_bytes_for_sqlexecid_33554437_of_phv_878120166.html"
17:12:35 col:2of5 "00226_sqld360_323688_17vjd1aast5q7_2d_98_read_write_and_interconnect_io_bytes_for_sqlexecid_33554437_of_phv_878120166_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:35 col:2of5 "Execution Plans"
17:12:35 Raw Data for SQL_EXEC_ID 33554437 of PHV 878120166

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  878120166
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5822
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 44346
AND timestamp BETWEEN TO_DATE('20201019193556', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019203010', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554437) = 33554437
AND NVL(distribution, TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019193547', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:35 col:2of5.

17:12:35 col:2of5 "00227_sqld360_323688_17vjd1aast5q7_2d_99_raw_data_for_sqlexecid_33554437_of_phv_878120166.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:35 col:2of5 "Execution Plans"
17:12:35 Plan Tree for PHV 585197806 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =585197806
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =585197806
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:35 col:2of5.

17:12:36 col:2of5 "00228_sqld360_323688_17vjd1aast5q7_2d_100_plan_tree_for_phv_585197806_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:36 col:2of5 "Execution Plans"
17:12:36 Plan from Memory for PHV 585197806
Completed: 17:12:36


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:36 col:2of5 "Execution Plans"
17:12:36 Plan from History for PHV 585197806
Completed: 17:12:36


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:36 col:2of5 "Execution Plans"
17:12:36 Avg et/exec for recent execs for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:12:36 col:2of5.

17:12:36 col:2of5 "00231_sqld360_323688_17vjd1aast5q7_2d_101_avg_etexec_for_recent_execs_for_phv_585197806.html"
17:12:36 col:2of5 "00232_sqld360_323688_17vjd1aast5q7_2d_101_avg_etexec_for_recent_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:36 col:2of5 "Execution Plans"
17:12:36 Avg et/exec for historical execs for PHV 585197806

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:36 col:2of5.

17:12:36 col:2of5 "00233_sqld360_323688_17vjd1aast5q7_2d_102_avg_etexec_for_historical_execs_for_phv_585197806.html"
17:12:36 col:2of5 "00234_sqld360_323688_17vjd1aast5q7_2d_102_avg_etexec_for_historical_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:36 col:2of5 "Execution Plans"
17:12:36 Peak PGA and TEMP usage for recent execs for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:36 col:2of5.

17:12:36 col:2of5 "00235_sqld360_323688_17vjd1aast5q7_2d_103_peak_pga_and_temp_usage_for_recent_execs_for_phv_585197806.html"
17:12:37 col:2of5 "00236_sqld360_323688_17vjd1aast5q7_2d_103_peak_pga_and_temp_usage_for_recent_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:37 col:2of5 "Execution Plans"
17:12:37 Peak PGA and TEMP usage for historical execs for PHV 585197806

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:37 col:2of5.

17:12:37 col:2of5 "00237_sqld360_323688_17vjd1aast5q7_2d_104_peak_pga_and_temp_usage_for_historical_execs_for_phv_585197806.html"
17:12:37 col:2of5 "00238_sqld360_323688_17vjd1aast5q7_2d_104_peak_pga_and_temp_usage_for_historical_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:37 col:2of5 "Execution Plans"
17:12:37 Peak Read and Write I/O requests for recent execs for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:37 col:2of5.

17:12:37 col:2of5 "00239_sqld360_323688_17vjd1aast5q7_2d_105_peak_read_and_write_io_requests_for_recent_execs_for_phv_585197806.html"
17:12:37 col:2of5 "00240_sqld360_323688_17vjd1aast5q7_2d_105_peak_read_and_write_io_requests_for_recent_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:37 col:2of5 "Execution Plans"
17:12:37 Peak Read and Write I/O requests for historical execs for PHV 585197806

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:37 col:2of5.

17:12:37 col:2of5 "00241_sqld360_323688_17vjd1aast5q7_2d_106_peak_read_and_write_io_requests_for_historical_execs_for_phv_585197806.html"
17:12:37 col:2of5 "00242_sqld360_323688_17vjd1aast5q7_2d_106_peak_read_and_write_io_requests_for_historical_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:37 col:2of5 "Execution Plans"
17:12:37 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:37 col:2of5.

17:12:37 col:2of5 "00243_sqld360_323688_17vjd1aast5q7_2d_107_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_585197806.html"
17:12:37 col:2of5 "00244_sqld360_323688_17vjd1aast5q7_2d_107_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:37 col:2of5 "Execution Plans"
17:12:37 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 585197806

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:37 col:2of5.

17:12:37 col:2of5 "00245_sqld360_323688_17vjd1aast5q7_2d_108_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_585197806.html"
17:12:38 col:2of5 "00246_sqld360_323688_17vjd1aast5q7_2d_108_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top Wait events for PHV 585197806

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:12:38 col:2of5.

17:12:38 col:2of5 "00247_sqld360_323688_17vjd1aast5q7_2d_109_top_wait_events_for_phv_585197806.html"
17:12:38 col:2of5 "00248_sqld360_323688_17vjd1aast5q7_2d_109_top_wait_events_for_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top Objects accessed by PHV 585197806

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  585197806
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:12:38 col:2of5.

17:12:38 col:2of5 "00249_sqld360_323688_17vjd1aast5q7_2d_110_top_objects_accessed_by_phv_585197806.html"
17:12:38 col:2of5 "00250_sqld360_323688_17vjd1aast5q7_2d_110_top_objects_accessed_by_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top Plan Steps for PHV 585197806

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:12:38 col:2of5.

17:12:38 col:2of5 "00251_sqld360_323688_17vjd1aast5q7_2d_111_top_plan_steps_for_phv_585197806.html"
17:12:38 col:2of5 "00252_sqld360_323688_17vjd1aast5q7_2d_111_top_plan_steps_for_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top Step/Event/Obj for PHV 585197806

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  585197806
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:38 col:2of5.

17:12:38 col:2of5 "00253_sqld360_323688_17vjd1aast5q7_2d_112_top_stepeventobj_for_phv_585197806.html"
17:12:38 col:2of5 "00254_sqld360_323688_17vjd1aast5q7_2d_112_top_stepeventobj_for_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top 15 Wait events over recent time for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 585197806
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:38 col:2of5.

17:12:38 col:2of5 "00255_sqld360_323688_17vjd1aast5q7_2d_113_top_15_wait_events_over_recent_time_for_phv_585197806.html"
17:12:38 col:2of5 "00256_sqld360_323688_17vjd1aast5q7_2d_113_top_15_wait_events_over_recent_time_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:38 col:2of5 "Execution Plans"
17:12:38 Top 15 Wait events over historical time for PHV 585197806

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell list of blocks physica" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell list of blocks physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 585197806
AND object_node IN ('ON CPU','cell list of blocks physical read','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:38 col:2of5.

17:12:39 col:2of5 "00257_sqld360_323688_17vjd1aast5q7_2d_114_top_15_wait_events_over_historical_time_for_phv_585197806.html"
17:12:39 col:2of5 "00258_sqld360_323688_17vjd1aast5q7_2d_114_top_15_wait_events_over_historical_time_for_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:39 col:2of5 "Execution Plans"
17:12:39 Plan Tree with subtree for SQL_EXEC_ID 16777220 of PHV 585197806

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =585197806
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:39 col:2of5.

17:12:39 col:2of5 "00259_sqld360_323688_17vjd1aast5q7_2d_115_plan_tree_with_subtree_for_sqlexecid_16777220_of_phv_585197806_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:39 col:2of5 "Execution Plans"
17:12:39 Plan Step IDs timeline for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:39 col:2of5.

17:12:39 col:2of5 "00260_sqld360_323688_17vjd1aast5q7_2d_116_plan_step_ids_timeline_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:39 col:2of5 "00261_sqld360_323688_17vjd1aast5q7_2d_116_plan_step_ids_timeline_for_sqlexecid_16777220_of_phv_585197806_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:39 col:2of5 "Execution Plans"
17:12:39 Top Step/Event/Obj for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:39 col:2of5.

17:12:39 col:2of5 "00262_sqld360_323688_17vjd1aast5q7_2d_117_top_stepeventobj_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00263_sqld360_323688_17vjd1aast5q7_2d_117_top_stepeventobj_for_sqlexecid_16777220_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 Top 15 Wait events timeline SQL_EXEC_ID 16777220 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:40 col:2of5.

17:12:40 col:2of5 "00264_sqld360_323688_17vjd1aast5q7_2d_118_top_15_wait_events_timeline_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00265_sqld360_323688_17vjd1aast5q7_2d_118_top_15_wait_events_timeline_sqlexecid_16777220_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 DB Time by PX process for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:40 col:2of5.

17:12:40 col:2of5 "00266_sqld360_323688_17vjd1aast5q7_2d_119_db_time_by_px_process_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00267_sqld360_323688_17vjd1aast5q7_2d_119_db_time_by_px_process_for_sqlexecid_16777220_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 PGA and TEMP usage for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:40 col:2of5.

17:12:40 col:2of5 "00268_sqld360_323688_17vjd1aast5q7_2d_120_pga_and_temp_usage_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00269_sqld360_323688_17vjd1aast5q7_2d_120_pga_and_temp_usage_for_sqlexecid_16777220_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 Read and Write I/O requests for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:40 col:2of5.

17:12:40 col:2of5 "00270_sqld360_323688_17vjd1aast5q7_2d_121_read_and_write_io_requests_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00271_sqld360_323688_17vjd1aast5q7_2d_121_read_and_write_io_requests_for_sqlexecid_16777220_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:40 col:2of5.

17:12:40 col:2of5 "00272_sqld360_323688_17vjd1aast5q7_2d_122_read_write_and_interconnect_io_bytes_for_sqlexecid_16777220_of_phv_585197806.html"
17:12:40 col:2of5 "00273_sqld360_323688_17vjd1aast5q7_2d_122_read_write_and_interconnect_io_bytes_for_sqlexecid_16777220_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:40 col:2of5 "Execution Plans"
17:12:40 Raw Data for SQL_EXEC_ID 16777220 of PHV 585197806

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 418
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 51156
AND timestamp BETWEEN TO_DATE('20201013183432', 'YYYYMMDDHH24MISS') AND TO_DATE('20201013183753', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777220) = 16777220
AND NVL(distribution, TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')) = TO_DATE('20201013183429', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:40 col:2of5.

17:12:40 col:2of5 "00274_sqld360_323688_17vjd1aast5q7_2d_123_raw_data_for_sqlexecid_16777220_of_phv_585197806.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:41 col:2of5 "Execution Plans"
17:12:41 Plan Tree with subtree for SQL_EXEC_ID 16777245 of PHV 585197806

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =585197806
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:41 col:2of5.

17:12:41 col:2of5 "00275_sqld360_323688_17vjd1aast5q7_2d_124_plan_tree_with_subtree_for_sqlexecid_16777245_of_phv_585197806_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:41 col:2of5 "Execution Plans"
17:12:41 Plan Step IDs timeline for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:41 col:2of5.

17:12:41 col:2of5 "00276_sqld360_323688_17vjd1aast5q7_2d_125_plan_step_ids_timeline_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:41 col:2of5 "00277_sqld360_323688_17vjd1aast5q7_2d_125_plan_step_ids_timeline_for_sqlexecid_16777245_of_phv_585197806_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:41 col:2of5 "Execution Plans"
17:12:41 Top Step/Event/Obj for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:41 col:2of5.

17:12:41 col:2of5 "00278_sqld360_323688_17vjd1aast5q7_2d_126_top_stepeventobj_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:41 col:2of5 "00279_sqld360_323688_17vjd1aast5q7_2d_126_top_stepeventobj_for_sqlexecid_16777245_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:41 col:2of5 "Execution Plans"
17:12:41 Top 15 Wait events timeline SQL_EXEC_ID 16777245 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:41 col:2of5.

17:12:41 col:2of5 "00280_sqld360_323688_17vjd1aast5q7_2d_127_top_15_wait_events_timeline_sqlexecid_16777245_of_phv_585197806.html"
17:12:42 col:2of5 "00281_sqld360_323688_17vjd1aast5q7_2d_127_top_15_wait_events_timeline_sqlexecid_16777245_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:42 col:2of5 "Execution Plans"
17:12:42 DB Time by PX process for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:42 col:2of5.

17:12:42 col:2of5 "00282_sqld360_323688_17vjd1aast5q7_2d_128_db_time_by_px_process_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:42 col:2of5 "00283_sqld360_323688_17vjd1aast5q7_2d_128_db_time_by_px_process_for_sqlexecid_16777245_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:42 col:2of5 "Execution Plans"
17:12:42 PGA and TEMP usage for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:42 col:2of5.

17:12:42 col:2of5 "00284_sqld360_323688_17vjd1aast5q7_2d_129_pga_and_temp_usage_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:42 col:2of5 "00285_sqld360_323688_17vjd1aast5q7_2d_129_pga_and_temp_usage_for_sqlexecid_16777245_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:42 col:2of5 "Execution Plans"
17:12:42 Read and Write I/O requests for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:42 col:2of5.

17:12:42 col:2of5 "00286_sqld360_323688_17vjd1aast5q7_2d_130_read_and_write_io_requests_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:42 col:2of5 "00287_sqld360_323688_17vjd1aast5q7_2d_130_read_and_write_io_requests_for_sqlexecid_16777245_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:42 col:2of5 "Execution Plans"
17:12:42 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:42 col:2of5.

17:12:42 col:2of5 "00288_sqld360_323688_17vjd1aast5q7_2d_131_read_write_and_interconnect_io_bytes_for_sqlexecid_16777245_of_phv_585197806.html"
17:12:42 col:2of5 "00289_sqld360_323688_17vjd1aast5q7_2d_131_read_write_and_interconnect_io_bytes_for_sqlexecid_16777245_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:42 col:2of5 "Execution Plans"
17:12:42 Raw Data for SQL_EXEC_ID 16777245 of PHV 585197806

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2710
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 46966
AND timestamp BETWEEN TO_DATE('20201031174426', 'YYYYMMDDHH24MISS') AND TO_DATE('20201031174656', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777245) = 16777245
AND NVL(distribution, TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')) = TO_DATE('20201031174418', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:42 col:2of5.

17:12:42 col:2of5 "00290_sqld360_323688_17vjd1aast5q7_2d_132_raw_data_for_sqlexecid_16777245_of_phv_585197806.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:43 col:2of5 "Execution Plans"
17:12:43 Plan Tree with subtree for SQL_EXEC_ID 16777234 of PHV 585197806

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =585197806
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =585197806
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:43 col:2of5.

17:12:43 col:2of5 "00291_sqld360_323688_17vjd1aast5q7_2d_133_plan_tree_with_subtree_for_sqlexecid_16777234_of_phv_585197806_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:43 col:2of5 "Execution Plans"
17:12:43 Plan Step IDs timeline for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:43 col:2of5.

17:12:43 col:2of5 "00292_sqld360_323688_17vjd1aast5q7_2d_134_plan_step_ids_timeline_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:43 col:2of5 "00293_sqld360_323688_17vjd1aast5q7_2d_134_plan_step_ids_timeline_for_sqlexecid_16777234_of_phv_585197806_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:43 col:2of5 "Execution Plans"
17:12:43 Top Step/Event/Obj for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:43 col:2of5.

17:12:43 col:2of5 "00294_sqld360_323688_17vjd1aast5q7_2d_135_top_stepeventobj_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:43 col:2of5 "00295_sqld360_323688_17vjd1aast5q7_2d_135_top_stepeventobj_for_sqlexecid_16777234_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:43 col:2of5 "Execution Plans"
17:12:43 Top 15 Wait events timeline SQL_EXEC_ID 16777234 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:43 col:2of5.

17:12:43 col:2of5 "00296_sqld360_323688_17vjd1aast5q7_2d_136_top_15_wait_events_timeline_sqlexecid_16777234_of_phv_585197806.html"
17:12:43 col:2of5 "00297_sqld360_323688_17vjd1aast5q7_2d_136_top_15_wait_events_timeline_sqlexecid_16777234_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:43 col:2of5 "Execution Plans"
17:12:43 DB Time by PX process for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:43 col:2of5.

17:12:43 col:2of5 "00298_sqld360_323688_17vjd1aast5q7_2d_137_db_time_by_px_process_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:44 col:2of5 "00299_sqld360_323688_17vjd1aast5q7_2d_137_db_time_by_px_process_for_sqlexecid_16777234_of_phv_585197806_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:44 col:2of5 "Execution Plans"
17:12:44 PGA and TEMP usage for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:44 col:2of5.

17:12:44 col:2of5 "00300_sqld360_323688_17vjd1aast5q7_2d_138_pga_and_temp_usage_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:44 col:2of5 "00301_sqld360_323688_17vjd1aast5q7_2d_138_pga_and_temp_usage_for_sqlexecid_16777234_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:44 col:2of5 "Execution Plans"
17:12:44 Read and Write I/O requests for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:44 col:2of5.

17:12:44 col:2of5 "00302_sqld360_323688_17vjd1aast5q7_2d_139_read_and_write_io_requests_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:44 col:2of5 "00303_sqld360_323688_17vjd1aast5q7_2d_139_read_and_write_io_requests_for_sqlexecid_16777234_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:44 col:2of5 "Execution Plans"
17:12:44 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:44 col:2of5.

17:12:44 col:2of5 "00304_sqld360_323688_17vjd1aast5q7_2d_140_read_write_and_interconnect_io_bytes_for_sqlexecid_16777234_of_phv_585197806.html"
17:12:44 col:2of5 "00305_sqld360_323688_17vjd1aast5q7_2d_140_read_write_and_interconnect_io_bytes_for_sqlexecid_16777234_of_phv_585197806_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:44 col:2of5 "Execution Plans"
17:12:44 Raw Data for SQL_EXEC_ID 16777234 of PHV 585197806

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  585197806
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4655
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 5348
AND timestamp BETWEEN TO_DATE('20201027192552', 'YYYYMMDDHH24MISS') AND TO_DATE('20201027192823', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777234) = 16777234
AND NVL(distribution, TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')) = TO_DATE('20201027192551', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:44 col:2of5.

17:12:44 col:2of5 "00306_sqld360_323688_17vjd1aast5q7_2d_141_raw_data_for_sqlexecid_16777234_of_phv_585197806.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:44 col:2of5 "Execution Plans"
17:12:44 Plan Tree for PHV 2283497611 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2283497611
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2283497611
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:44 col:2of5.

17:12:44 col:2of5 "00307_sqld360_323688_17vjd1aast5q7_2d_142_plan_tree_for_phv_2283497611_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:45 col:2of5 "Execution Plans"
17:12:45 Plan from Memory for PHV 2283497611
Completed: 17:12:45


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:45 col:2of5 "Execution Plans"
17:12:45 Plan from History for PHV 2283497611
Completed: 17:12:45


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:45 col:2of5 "Execution Plans"
17:12:45 Avg et/exec for recent execs for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:12:45 col:2of5.

17:12:45 col:2of5 "00310_sqld360_323688_17vjd1aast5q7_2d_143_avg_etexec_for_recent_execs_for_phv_2283497611.html"
17:12:45 col:2of5 "00311_sqld360_323688_17vjd1aast5q7_2d_143_avg_etexec_for_recent_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:45 col:2of5 "Execution Plans"
17:12:45 Avg et/exec for historical execs for PHV 2283497611

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:45 col:2of5.

17:12:45 col:2of5 "00312_sqld360_323688_17vjd1aast5q7_2d_144_avg_etexec_for_historical_execs_for_phv_2283497611.html"
17:12:45 col:2of5 "00313_sqld360_323688_17vjd1aast5q7_2d_144_avg_etexec_for_historical_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:45 col:2of5 "Execution Plans"
17:12:45 Peak PGA and TEMP usage for recent execs for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:45 col:2of5.

17:12:45 col:2of5 "00314_sqld360_323688_17vjd1aast5q7_2d_145_peak_pga_and_temp_usage_for_recent_execs_for_phv_2283497611.html"
17:12:46 col:2of5 "00315_sqld360_323688_17vjd1aast5q7_2d_145_peak_pga_and_temp_usage_for_recent_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:46 col:2of5 "Execution Plans"
17:12:46 Peak PGA and TEMP usage for historical execs for PHV 2283497611

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:46 col:2of5.

17:12:46 col:2of5 "00316_sqld360_323688_17vjd1aast5q7_2d_146_peak_pga_and_temp_usage_for_historical_execs_for_phv_2283497611.html"
17:12:46 col:2of5 "00317_sqld360_323688_17vjd1aast5q7_2d_146_peak_pga_and_temp_usage_for_historical_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:46 col:2of5 "Execution Plans"
17:12:46 Peak Read and Write I/O requests for recent execs for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:46 col:2of5.

17:12:46 col:2of5 "00318_sqld360_323688_17vjd1aast5q7_2d_147_peak_read_and_write_io_requests_for_recent_execs_for_phv_2283497611.html"
17:12:46 col:2of5 "00319_sqld360_323688_17vjd1aast5q7_2d_147_peak_read_and_write_io_requests_for_recent_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:46 col:2of5 "Execution Plans"
17:12:46 Peak Read and Write I/O requests for historical execs for PHV 2283497611

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:46 col:2of5.

17:12:46 col:2of5 "00320_sqld360_323688_17vjd1aast5q7_2d_148_peak_read_and_write_io_requests_for_historical_execs_for_phv_2283497611.html"
17:12:46 col:2of5 "00321_sqld360_323688_17vjd1aast5q7_2d_148_peak_read_and_write_io_requests_for_historical_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:46 col:2of5 "Execution Plans"
17:12:46 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:46 col:2of5.

17:12:46 col:2of5 "00322_sqld360_323688_17vjd1aast5q7_2d_149_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2283497611.html"
17:12:46 col:2of5 "00323_sqld360_323688_17vjd1aast5q7_2d_149_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:46 col:2of5 "Execution Plans"
17:12:46 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2283497611

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:46 col:2of5.

17:12:47 col:2of5 "00324_sqld360_323688_17vjd1aast5q7_2d_150_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2283497611.html"
17:12:47 col:2of5 "00325_sqld360_323688_17vjd1aast5q7_2d_150_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:47 col:2of5 "Execution Plans"
17:12:47 Top Wait events for PHV 2283497611

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:12:47 col:2of5.

17:12:47 col:2of5 "00326_sqld360_323688_17vjd1aast5q7_2d_151_top_wait_events_for_phv_2283497611.html"
17:12:47 col:2of5 "00327_sqld360_323688_17vjd1aast5q7_2d_151_top_wait_events_for_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:47 col:2of5 "Execution Plans"
17:12:47 Top Objects accessed by PHV 2283497611

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2283497611
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:12:47 col:2of5.

17:12:47 col:2of5 "00328_sqld360_323688_17vjd1aast5q7_2d_152_top_objects_accessed_by_phv_2283497611.html"
17:12:47 col:2of5 "00329_sqld360_323688_17vjd1aast5q7_2d_152_top_objects_accessed_by_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:47 col:2of5 "Execution Plans"
17:12:47 Top Plan Steps for PHV 2283497611

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:12:47 col:2of5.

17:12:47 col:2of5 "00330_sqld360_323688_17vjd1aast5q7_2d_153_top_plan_steps_for_phv_2283497611.html"
17:12:47 col:2of5 "00331_sqld360_323688_17vjd1aast5q7_2d_153_top_plan_steps_for_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:47 col:2of5 "Execution Plans"
17:12:47 Top Step/Event/Obj for PHV 2283497611

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2283497611
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:47 col:2of5.

17:12:47 col:2of5 "00332_sqld360_323688_17vjd1aast5q7_2d_154_top_stepeventobj_for_phv_2283497611.html"
17:12:47 col:2of5 "00333_sqld360_323688_17vjd1aast5q7_2d_154_top_stepeventobj_for_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:48 col:2of5 "Execution Plans"
17:12:48 Top 15 Wait events over recent time for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2283497611
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:48 col:2of5.

17:12:48 col:2of5 "00334_sqld360_323688_17vjd1aast5q7_2d_155_top_15_wait_events_over_recent_time_for_phv_2283497611.html"
17:12:48 col:2of5 "00335_sqld360_323688_17vjd1aast5q7_2d_155_top_15_wait_events_over_recent_time_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:48 col:2of5 "Execution Plans"
17:12:48 Top 15 Wait events over historical time for PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell single block physical " ,
NVL(aas_03,0) "e03gc current block 2-way" ,
NVL(aas_04,0) "e04gc cr grant 2-way" ,
NVL(aas_05,0) "e05resmgr:cpu quantum" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr grant 2-way' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = 'resmgr:cpu quantum' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2283497611
AND object_node IN ('ON CPU','cell single block physical read','gc current block 2-way','gc cr grant 2-way','resmgr:cpu quantum','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:48 col:2of5.

17:12:48 col:2of5 "00336_sqld360_323688_17vjd1aast5q7_2d_156_top_15_wait_events_over_historical_time_for_phv_2283497611.html"
17:12:48 col:2of5 "00337_sqld360_323688_17vjd1aast5q7_2d_156_top_15_wait_events_over_historical_time_for_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:48 col:2of5 "Execution Plans"
17:12:48 Plan Tree with subtree for SQL_EXEC_ID 16777229 of PHV 2283497611

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2283497611
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:48 col:2of5.

17:12:48 col:2of5 "00338_sqld360_323688_17vjd1aast5q7_2d_157_plan_tree_with_subtree_for_sqlexecid_16777229_of_phv_2283497611_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:48 col:2of5 "Execution Plans"
17:12:48 Plan Step IDs timeline for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:48 col:2of5.

17:12:49 col:2of5 "00339_sqld360_323688_17vjd1aast5q7_2d_158_plan_step_ids_timeline_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00340_sqld360_323688_17vjd1aast5q7_2d_158_plan_step_ids_timeline_for_sqlexecid_16777229_of_phv_2283497611_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:49 col:2of5 "Execution Plans"
17:12:49 Top Step/Event/Obj for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:49 col:2of5.

17:12:49 col:2of5 "00341_sqld360_323688_17vjd1aast5q7_2d_159_top_stepeventobj_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00342_sqld360_323688_17vjd1aast5q7_2d_159_top_stepeventobj_for_sqlexecid_16777229_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:49 col:2of5 "Execution Plans"
17:12:49 Top 15 Wait events timeline SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02cell single block physical " ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','cell single block physical read','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:49 col:2of5.

17:12:49 col:2of5 "00343_sqld360_323688_17vjd1aast5q7_2d_160_top_15_wait_events_timeline_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00344_sqld360_323688_17vjd1aast5q7_2d_160_top_15_wait_events_timeline_sqlexecid_16777229_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:49 col:2of5 "Execution Plans"
17:12:49 DB Time by PX process for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:49 col:2of5.

17:12:49 col:2of5 "00345_sqld360_323688_17vjd1aast5q7_2d_161_db_time_by_px_process_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00346_sqld360_323688_17vjd1aast5q7_2d_161_db_time_by_px_process_for_sqlexecid_16777229_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:49 col:2of5 "Execution Plans"
17:12:49 PGA and TEMP usage for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:49 col:2of5.

17:12:49 col:2of5 "00347_sqld360_323688_17vjd1aast5q7_2d_162_pga_and_temp_usage_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00348_sqld360_323688_17vjd1aast5q7_2d_162_pga_and_temp_usage_for_sqlexecid_16777229_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:49 col:2of5 "Execution Plans"
17:12:49 Read and Write I/O requests for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:49 col:2of5.

17:12:49 col:2of5 "00349_sqld360_323688_17vjd1aast5q7_2d_163_read_and_write_io_requests_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:49 col:2of5 "00350_sqld360_323688_17vjd1aast5q7_2d_163_read_and_write_io_requests_for_sqlexecid_16777229_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:50 col:2of5 "Execution Plans"
17:12:50 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:50 col:2of5.

17:12:50 col:2of5 "00351_sqld360_323688_17vjd1aast5q7_2d_164_read_write_and_interconnect_io_bytes_for_sqlexecid_16777229_of_phv_2283497611.html"
17:12:50 col:2of5 "00352_sqld360_323688_17vjd1aast5q7_2d_164_read_write_and_interconnect_io_bytes_for_sqlexecid_16777229_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:50 col:2of5 "Execution Plans"
17:12:50 Raw Data for SQL_EXEC_ID 16777229 of PHV 2283497611

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 4658
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 16924
AND timestamp BETWEEN TO_DATE('20201024192218', 'YYYYMMDDHH24MISS') AND TO_DATE('20201024192259', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777229) = 16777229
AND NVL(distribution, TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')) = TO_DATE('20201024192215', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:50 col:2of5.

17:12:50 col:2of5 "00353_sqld360_323688_17vjd1aast5q7_2d_165_raw_data_for_sqlexecid_16777229_of_phv_2283497611.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:50 col:2of5 "Execution Plans"
17:12:50 Plan Tree with subtree for SQL_EXEC_ID 33554432 of PHV 2283497611

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2283497611
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:50 col:2of5.

17:12:50 col:2of5 "00354_sqld360_323688_17vjd1aast5q7_2d_166_plan_tree_with_subtree_for_sqlexecid_33554432_of_phv_2283497611_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:50 col:2of5 "Execution Plans"
17:12:50 Plan Step IDs timeline for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:50 col:2of5.

17:12:51 col:2of5 "00355_sqld360_323688_17vjd1aast5q7_2d_167_plan_step_ids_timeline_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00356_sqld360_323688_17vjd1aast5q7_2d_167_plan_step_ids_timeline_for_sqlexecid_33554432_of_phv_2283497611_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 Top Step/Event/Obj for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:51 col:2of5.

17:12:51 col:2of5 "00357_sqld360_323688_17vjd1aast5q7_2d_168_top_stepeventobj_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00358_sqld360_323688_17vjd1aast5q7_2d_168_top_stepeventobj_for_sqlexecid_33554432_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 Top 15 Wait events timeline SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03resmgr:cpu quantum" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = 'resmgr:cpu quantum' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','resmgr:cpu quantum','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:51 col:2of5.

17:12:51 col:2of5 "00359_sqld360_323688_17vjd1aast5q7_2d_169_top_15_wait_events_timeline_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00360_sqld360_323688_17vjd1aast5q7_2d_169_top_15_wait_events_timeline_sqlexecid_33554432_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 DB Time by PX process for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:51 col:2of5.

17:12:51 col:2of5 "00361_sqld360_323688_17vjd1aast5q7_2d_170_db_time_by_px_process_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00362_sqld360_323688_17vjd1aast5q7_2d_170_db_time_by_px_process_for_sqlexecid_33554432_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 PGA and TEMP usage for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:51 col:2of5.

17:12:51 col:2of5 "00363_sqld360_323688_17vjd1aast5q7_2d_171_pga_and_temp_usage_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00364_sqld360_323688_17vjd1aast5q7_2d_171_pga_and_temp_usage_for_sqlexecid_33554432_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 Read and Write I/O requests for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:51 col:2of5.

17:12:51 col:2of5 "00365_sqld360_323688_17vjd1aast5q7_2d_172_read_and_write_io_requests_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:51 col:2of5 "00366_sqld360_323688_17vjd1aast5q7_2d_172_read_and_write_io_requests_for_sqlexecid_33554432_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:51 col:2of5 "Execution Plans"
17:12:51 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:51 col:2of5.

17:12:51 col:2of5 "00367_sqld360_323688_17vjd1aast5q7_2d_173_read_write_and_interconnect_io_bytes_for_sqlexecid_33554432_of_phv_2283497611.html"
17:12:52 col:2of5 "00368_sqld360_323688_17vjd1aast5q7_2d_173_read_write_and_interconnect_io_bytes_for_sqlexecid_33554432_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:52 col:2of5 "Execution Plans"
17:12:52 Raw Data for SQL_EXEC_ID 33554432 of PHV 2283497611

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 401
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 15257
AND timestamp BETWEEN TO_DATE('20201101192516', 'YYYYMMDDHH24MISS') AND TO_DATE('20201101192556', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554432) = 33554432
AND NVL(distribution, TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')) = TO_DATE('20201101192515', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:52 col:2of5.

17:12:52 col:2of5 "00369_sqld360_323688_17vjd1aast5q7_2d_174_raw_data_for_sqlexecid_33554432_of_phv_2283497611.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:52 col:2of5 "Execution Plans"
17:12:52 Plan Tree with subtree for SQL_EXEC_ID 33554434 of PHV 2283497611

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2283497611
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2283497611
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:52 col:2of5.

17:12:52 col:2of5 "00370_sqld360_323688_17vjd1aast5q7_2d_175_plan_tree_with_subtree_for_sqlexecid_33554434_of_phv_2283497611_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:52 col:2of5 "Execution Plans"
17:12:52 Plan Step IDs timeline for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:52 col:2of5.

17:12:52 col:2of5 "00371_sqld360_323688_17vjd1aast5q7_2d_176_plan_step_ids_timeline_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:52 col:2of5 "00372_sqld360_323688_17vjd1aast5q7_2d_176_plan_step_ids_timeline_for_sqlexecid_33554434_of_phv_2283497611_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 Top Step/Event/Obj for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:53 col:2of5.

17:12:53 col:2of5 "00373_sqld360_323688_17vjd1aast5q7_2d_177_top_stepeventobj_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00374_sqld360_323688_17vjd1aast5q7_2d_177_top_stepeventobj_for_sqlexecid_33554434_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 Top 15 Wait events timeline SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:53 col:2of5.

17:12:53 col:2of5 "00375_sqld360_323688_17vjd1aast5q7_2d_178_top_15_wait_events_timeline_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00376_sqld360_323688_17vjd1aast5q7_2d_178_top_15_wait_events_timeline_sqlexecid_33554434_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 DB Time by PX process for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:53 col:2of5.

17:12:53 col:2of5 "00377_sqld360_323688_17vjd1aast5q7_2d_179_db_time_by_px_process_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00378_sqld360_323688_17vjd1aast5q7_2d_179_db_time_by_px_process_for_sqlexecid_33554434_of_phv_2283497611_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 PGA and TEMP usage for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:53 col:2of5.

17:12:53 col:2of5 "00379_sqld360_323688_17vjd1aast5q7_2d_180_pga_and_temp_usage_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00380_sqld360_323688_17vjd1aast5q7_2d_180_pga_and_temp_usage_for_sqlexecid_33554434_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 Read and Write I/O requests for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:53 col:2of5.

17:12:53 col:2of5 "00381_sqld360_323688_17vjd1aast5q7_2d_181_read_and_write_io_requests_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00382_sqld360_323688_17vjd1aast5q7_2d_181_read_and_write_io_requests_for_sqlexecid_33554434_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:53 col:2of5.

17:12:53 col:2of5 "00383_sqld360_323688_17vjd1aast5q7_2d_182_read_write_and_interconnect_io_bytes_for_sqlexecid_33554434_of_phv_2283497611.html"
17:12:53 col:2of5 "00384_sqld360_323688_17vjd1aast5q7_2d_182_read_write_and_interconnect_io_bytes_for_sqlexecid_33554434_of_phv_2283497611_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:53 col:2of5 "Execution Plans"
17:12:53 Raw Data for SQL_EXEC_ID 33554434 of PHV 2283497611

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2283497611
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 1176
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 8485
AND timestamp BETWEEN TO_DATE('20201019192222', 'YYYYMMDDHH24MISS') AND TO_DATE('20201019192252', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554434) = 33554434
AND NVL(distribution, TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')) = TO_DATE('20201019192214', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:53 col:2of5.

17:12:54 col:2of5 "00385_sqld360_323688_17vjd1aast5q7_2d_183_raw_data_for_sqlexecid_33554434_of_phv_2283497611.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:54 col:2of5 "Execution Plans"
17:12:54 Plan Tree for PHV 1631436210 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =1631436210
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1631436210
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:54 col:2of5.

17:12:54 col:2of5 "00386_sqld360_323688_17vjd1aast5q7_2d_184_plan_tree_for_phv_1631436210_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:54 col:2of5 "Execution Plans"
17:12:54 Plan from Memory for PHV 1631436210
Completed: 17:12:54


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:54 col:2of5 "Execution Plans"
17:12:54 Plan from History for PHV 1631436210
Completed: 17:12:54


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:54 col:2of5 "Execution Plans"
17:12:54 Avg et/exec for recent execs for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:12:54 col:2of5.

17:12:54 col:2of5 "00389_sqld360_323688_17vjd1aast5q7_2d_185_avg_etexec_for_recent_execs_for_phv_1631436210.html"
17:12:54 col:2of5 "00390_sqld360_323688_17vjd1aast5q7_2d_185_avg_etexec_for_recent_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:55 col:2of5 "Execution Plans"
17:12:55 Avg et/exec for historical execs for PHV 1631436210

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:55 col:2of5.

17:12:55 col:2of5 "00391_sqld360_323688_17vjd1aast5q7_2d_186_avg_etexec_for_historical_execs_for_phv_1631436210.html"
17:12:55 col:2of5 "00392_sqld360_323688_17vjd1aast5q7_2d_186_avg_etexec_for_historical_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:55 col:2of5 "Execution Plans"
17:12:55 Peak PGA and TEMP usage for recent execs for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:55 col:2of5.

17:12:55 col:2of5 "00393_sqld360_323688_17vjd1aast5q7_2d_187_peak_pga_and_temp_usage_for_recent_execs_for_phv_1631436210.html"
17:12:55 col:2of5 "00394_sqld360_323688_17vjd1aast5q7_2d_187_peak_pga_and_temp_usage_for_recent_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:55 col:2of5 "Execution Plans"
17:12:55 Peak PGA and TEMP usage for historical execs for PHV 1631436210

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:55 col:2of5.

17:12:55 col:2of5 "00395_sqld360_323688_17vjd1aast5q7_2d_188_peak_pga_and_temp_usage_for_historical_execs_for_phv_1631436210.html"
17:12:55 col:2of5 "00396_sqld360_323688_17vjd1aast5q7_2d_188_peak_pga_and_temp_usage_for_historical_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:55 col:2of5 "Execution Plans"
17:12:55 Peak Read and Write I/O requests for recent execs for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:55 col:2of5.

17:12:55 col:2of5 "00397_sqld360_323688_17vjd1aast5q7_2d_189_peak_read_and_write_io_requests_for_recent_execs_for_phv_1631436210.html"
17:12:55 col:2of5 "00398_sqld360_323688_17vjd1aast5q7_2d_189_peak_read_and_write_io_requests_for_recent_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:55 col:2of5 "Execution Plans"
17:12:55 Peak Read and Write I/O requests for historical execs for PHV 1631436210

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:55 col:2of5.

17:12:55 col:2of5 "00399_sqld360_323688_17vjd1aast5q7_2d_190_peak_read_and_write_io_requests_for_historical_execs_for_phv_1631436210.html"
17:12:56 col:2of5 "00400_sqld360_323688_17vjd1aast5q7_2d_190_peak_read_and_write_io_requests_for_historical_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:56 col:2of5 "Execution Plans"
17:12:56 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:12:56 col:2of5.

17:12:56 col:2of5 "00401_sqld360_323688_17vjd1aast5q7_2d_191_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1631436210.html"
17:12:56 col:2of5 "00402_sqld360_323688_17vjd1aast5q7_2d_191_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:56 col:2of5 "Execution Plans"
17:12:56 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 1631436210

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:12:56 col:2of5.

17:12:56 col:2of5 "00403_sqld360_323688_17vjd1aast5q7_2d_192_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1631436210.html"
17:12:56 col:2of5 "00404_sqld360_323688_17vjd1aast5q7_2d_192_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:56 col:2of5 "Execution Plans"
17:12:56 Top Wait events for PHV 1631436210

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:12:56 col:2of5.

17:12:56 col:2of5 "00405_sqld360_323688_17vjd1aast5q7_2d_193_top_wait_events_for_phv_1631436210.html"
17:12:56 col:2of5 "00406_sqld360_323688_17vjd1aast5q7_2d_193_top_wait_events_for_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:56 col:2of5 "Execution Plans"
17:12:56 Top Objects accessed by PHV 1631436210

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  1631436210
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:12:56 col:2of5.

17:12:56 col:2of5 "00407_sqld360_323688_17vjd1aast5q7_2d_194_top_objects_accessed_by_phv_1631436210.html"
17:12:56 col:2of5 "00408_sqld360_323688_17vjd1aast5q7_2d_194_top_objects_accessed_by_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:56 col:2of5 "Execution Plans"
17:12:56 Top Plan Steps for PHV 1631436210

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:12:56 col:2of5.

17:12:57 col:2of5 "00409_sqld360_323688_17vjd1aast5q7_2d_195_top_plan_steps_for_phv_1631436210.html"
17:12:57 col:2of5 "00410_sqld360_323688_17vjd1aast5q7_2d_195_top_plan_steps_for_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:57 col:2of5 "Execution Plans"
17:12:57 Top Step/Event/Obj for PHV 1631436210

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  1631436210
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:57 col:2of5.

17:12:57 col:2of5 "00411_sqld360_323688_17vjd1aast5q7_2d_196_top_stepeventobj_for_phv_1631436210.html"
17:12:57 col:2of5 "00412_sqld360_323688_17vjd1aast5q7_2d_196_top_stepeventobj_for_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:57 col:2of5 "Execution Plans"
17:12:57 Top 15 Wait events over recent time for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1631436210
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:57 col:2of5.

17:12:57 col:2of5 "00413_sqld360_323688_17vjd1aast5q7_2d_197_top_15_wait_events_over_recent_time_for_phv_1631436210.html"
17:12:57 col:2of5 "00414_sqld360_323688_17vjd1aast5q7_2d_197_top_15_wait_events_over_recent_time_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:57 col:2of5 "Execution Plans"
17:12:57 Top 15 Wait events over historical time for PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02cell single block physical " ,
NVL(aas_03,0) "e03gc current block 2-way" ,
NVL(aas_04,0) "e04gc cr multi block request" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = 'gc cr multi block request' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1631436210
AND object_node IN ('ON CPU','cell single block physical read','gc current block 2-way','gc cr multi block request','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:12:57 col:2of5.

17:12:57 col:2of5 "00415_sqld360_323688_17vjd1aast5q7_2d_198_top_15_wait_events_over_historical_time_for_phv_1631436210.html"
17:12:57 col:2of5 "00416_sqld360_323688_17vjd1aast5q7_2d_198_top_15_wait_events_over_historical_time_for_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:57 col:2of5 "Execution Plans"
17:12:57 Plan Tree with subtree for SQL_EXEC_ID 16777239 of PHV 1631436210

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1631436210
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:57 col:2of5.

17:12:57 col:2of5 "00417_sqld360_323688_17vjd1aast5q7_2d_199_plan_tree_with_subtree_for_sqlexecid_16777239_of_phv_1631436210_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:58 col:2of5 "Execution Plans"
17:12:58 Plan Step IDs timeline for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:12:58 col:2of5.

17:12:58 col:2of5 "00418_sqld360_323688_17vjd1aast5q7_2d_200_plan_step_ids_timeline_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:58 col:2of5 "00419_sqld360_323688_17vjd1aast5q7_2d_200_plan_step_ids_timeline_for_sqlexecid_16777239_of_phv_1631436210_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:58 col:2of5 "Execution Plans"
17:12:58 Top Step/Event/Obj for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:12:58 col:2of5.

17:12:58 col:2of5 "00420_sqld360_323688_17vjd1aast5q7_2d_201_top_stepeventobj_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:58 col:2of5 "00421_sqld360_323688_17vjd1aast5q7_2d_201_top_stepeventobj_for_sqlexecid_16777239_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:58 col:2of5 "Execution Plans"
17:12:58 Top 15 Wait events timeline SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:12:58 col:2of5.

17:12:58 col:2of5 "00422_sqld360_323688_17vjd1aast5q7_2d_202_top_15_wait_events_timeline_sqlexecid_16777239_of_phv_1631436210.html"
17:12:58 col:2of5 "00423_sqld360_323688_17vjd1aast5q7_2d_202_top_15_wait_events_timeline_sqlexecid_16777239_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:58 col:2of5 "Execution Plans"
17:12:58 DB Time by PX process for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:12:58 col:2of5.

17:12:58 col:2of5 "00424_sqld360_323688_17vjd1aast5q7_2d_203_db_time_by_px_process_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:58 col:2of5 "00425_sqld360_323688_17vjd1aast5q7_2d_203_db_time_by_px_process_for_sqlexecid_16777239_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:58 col:2of5 "Execution Plans"
17:12:58 PGA and TEMP usage for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:58 col:2of5.

17:12:59 col:2of5 "00426_sqld360_323688_17vjd1aast5q7_2d_204_pga_and_temp_usage_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:59 col:2of5 "00427_sqld360_323688_17vjd1aast5q7_2d_204_pga_and_temp_usage_for_sqlexecid_16777239_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:59 col:2of5 "Execution Plans"
17:12:59 Read and Write I/O requests for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:59 col:2of5.

17:12:59 col:2of5 "00428_sqld360_323688_17vjd1aast5q7_2d_205_read_and_write_io_requests_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:59 col:2of5 "00429_sqld360_323688_17vjd1aast5q7_2d_205_read_and_write_io_requests_for_sqlexecid_16777239_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:59 col:2of5 "Execution Plans"
17:12:59 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:12:59 col:2of5.

17:12:59 col:2of5 "00430_sqld360_323688_17vjd1aast5q7_2d_206_read_write_and_interconnect_io_bytes_for_sqlexecid_16777239_of_phv_1631436210.html"
17:12:59 col:2of5 "00431_sqld360_323688_17vjd1aast5q7_2d_206_read_write_and_interconnect_io_bytes_for_sqlexecid_16777239_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:59 col:2of5 "Execution Plans"
17:12:59 Raw Data for SQL_EXEC_ID 16777239 of PHV 1631436210

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3893
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 2075
AND timestamp BETWEEN TO_DATE('20201029192618', 'YYYYMMDDHH24MISS') AND TO_DATE('20201029192658', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777239) = 16777239
AND NVL(distribution, TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')) = TO_DATE('20201029192613', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:12:59 col:2of5.

17:12:59 col:2of5 "00432_sqld360_323688_17vjd1aast5q7_2d_207_raw_data_for_sqlexecid_16777239_of_phv_1631436210.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:12:59 col:2of5 "Execution Plans"
17:12:59 Plan Tree with subtree for SQL_EXEC_ID 16777222 of PHV 1631436210

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1631436210
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:12:59 col:2of5.

17:12:59 col:2of5 "00433_sqld360_323688_17vjd1aast5q7_2d_208_plan_tree_with_subtree_for_sqlexecid_16777222_of_phv_1631436210_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:00 col:2of5 "Execution Plans"
17:13:00 Plan Step IDs timeline for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:13:00 col:2of5.

17:13:00 col:2of5 "00434_sqld360_323688_17vjd1aast5q7_2d_209_plan_step_ids_timeline_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:00 col:2of5 "00435_sqld360_323688_17vjd1aast5q7_2d_209_plan_step_ids_timeline_for_sqlexecid_16777222_of_phv_1631436210_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:00 col:2of5 "Execution Plans"
17:13:00 Top Step/Event/Obj for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:00 col:2of5.

17:13:00 col:2of5 "00436_sqld360_323688_17vjd1aast5q7_2d_210_top_stepeventobj_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:00 col:2of5 "00437_sqld360_323688_17vjd1aast5q7_2d_210_top_stepeventobj_for_sqlexecid_16777222_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:00 col:2of5 "Execution Plans"
17:13:00 Top 15 Wait events timeline SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:13:00 col:2of5.

17:13:00 col:2of5 "00438_sqld360_323688_17vjd1aast5q7_2d_211_top_15_wait_events_timeline_sqlexecid_16777222_of_phv_1631436210.html"
17:13:00 col:2of5 "00439_sqld360_323688_17vjd1aast5q7_2d_211_top_15_wait_events_timeline_sqlexecid_16777222_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:00 col:2of5 "Execution Plans"
17:13:00 DB Time by PX process for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:13:00 col:2of5.

17:13:00 col:2of5 "00440_sqld360_323688_17vjd1aast5q7_2d_212_db_time_by_px_process_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:00 col:2of5 "00441_sqld360_323688_17vjd1aast5q7_2d_212_db_time_by_px_process_for_sqlexecid_16777222_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:01 col:2of5 "Execution Plans"
17:13:01 PGA and TEMP usage for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:01 col:2of5.

17:13:01 col:2of5 "00442_sqld360_323688_17vjd1aast5q7_2d_213_pga_and_temp_usage_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:01 col:2of5 "00443_sqld360_323688_17vjd1aast5q7_2d_213_pga_and_temp_usage_for_sqlexecid_16777222_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:01 col:2of5 "Execution Plans"
17:13:01 Read and Write I/O requests for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:01 col:2of5.

17:13:01 col:2of5 "00444_sqld360_323688_17vjd1aast5q7_2d_214_read_and_write_io_requests_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:01 col:2of5 "00445_sqld360_323688_17vjd1aast5q7_2d_214_read_and_write_io_requests_for_sqlexecid_16777222_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:01 col:2of5 "Execution Plans"
17:13:01 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:01 col:2of5.

17:13:01 col:2of5 "00446_sqld360_323688_17vjd1aast5q7_2d_215_read_write_and_interconnect_io_bytes_for_sqlexecid_16777222_of_phv_1631436210.html"
17:13:01 col:2of5 "00447_sqld360_323688_17vjd1aast5q7_2d_215_read_write_and_interconnect_io_bytes_for_sqlexecid_16777222_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:01 col:2of5 "Execution Plans"
17:13:01 Raw Data for SQL_EXEC_ID 16777222 of PHV 1631436210

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3111
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 58167
AND timestamp BETWEEN TO_DATE('20201021192543', 'YYYYMMDDHH24MISS') AND TO_DATE('20201021192613', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777222) = 16777222
AND NVL(distribution, TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')) = TO_DATE('20201021192538', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:13:01 col:2of5.

17:13:01 col:2of5 "00448_sqld360_323688_17vjd1aast5q7_2d_216_raw_data_for_sqlexecid_16777222_of_phv_1631436210.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:01 col:2of5 "Execution Plans"
17:13:01 Plan Tree with subtree for SQL_EXEC_ID 33554442 of PHV 1631436210

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =1631436210
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =1631436210
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:01 col:2of5.

17:13:01 col:2of5 "00449_sqld360_323688_17vjd1aast5q7_2d_217_plan_tree_with_subtree_for_sqlexecid_33554442_of_phv_1631436210_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:02 col:2of5 "Execution Plans"
17:13:02 Plan Step IDs timeline for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:13:02 col:2of5.

17:13:02 col:2of5 "00450_sqld360_323688_17vjd1aast5q7_2d_218_plan_step_ids_timeline_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:02 col:2of5 "00451_sqld360_323688_17vjd1aast5q7_2d_218_plan_step_ids_timeline_for_sqlexecid_33554442_of_phv_1631436210_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:02 col:2of5 "Execution Plans"
17:13:02 Top Step/Event/Obj for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:02 col:2of5.

17:13:02 col:2of5 "00452_sqld360_323688_17vjd1aast5q7_2d_219_top_stepeventobj_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:02 col:2of5 "00453_sqld360_323688_17vjd1aast5q7_2d_219_top_stepeventobj_for_sqlexecid_33554442_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:02 col:2of5 "Execution Plans"
17:13:02 Top 15 Wait events timeline SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02gc current block 2-way" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = 'gc current block 2-way' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','gc current block 2-way','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:13:02 col:2of5.

17:13:02 col:2of5 "00454_sqld360_323688_17vjd1aast5q7_2d_220_top_15_wait_events_timeline_sqlexecid_33554442_of_phv_1631436210.html"
17:13:02 col:2of5 "00455_sqld360_323688_17vjd1aast5q7_2d_220_top_15_wait_events_timeline_sqlexecid_33554442_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:02 col:2of5 "Execution Plans"
17:13:02 DB Time by PX process for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:13:02 col:2of5.

17:13:02 col:2of5 "00456_sqld360_323688_17vjd1aast5q7_2d_221_db_time_by_px_process_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:02 col:2of5 "00457_sqld360_323688_17vjd1aast5q7_2d_221_db_time_by_px_process_for_sqlexecid_33554442_of_phv_1631436210_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:02 col:2of5 "Execution Plans"
17:13:02 PGA and TEMP usage for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:02 col:2of5.

17:13:02 col:2of5 "00458_sqld360_323688_17vjd1aast5q7_2d_222_pga_and_temp_usage_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:03 col:2of5 "00459_sqld360_323688_17vjd1aast5q7_2d_222_pga_and_temp_usage_for_sqlexecid_33554442_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:03 col:2of5 "Execution Plans"
17:13:03 Read and Write I/O requests for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:03 col:2of5.

17:13:03 col:2of5 "00460_sqld360_323688_17vjd1aast5q7_2d_223_read_and_write_io_requests_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:03 col:2of5 "00461_sqld360_323688_17vjd1aast5q7_2d_223_read_and_write_io_requests_for_sqlexecid_33554442_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:03 col:2of5 "Execution Plans"
17:13:03 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:03 col:2of5.

17:13:03 col:2of5 "00462_sqld360_323688_17vjd1aast5q7_2d_224_read_write_and_interconnect_io_bytes_for_sqlexecid_33554442_of_phv_1631436210.html"
17:13:03 col:2of5 "00463_sqld360_323688_17vjd1aast5q7_2d_224_read_write_and_interconnect_io_bytes_for_sqlexecid_33554442_of_phv_1631436210_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:03 col:2of5 "Execution Plans"
17:13:03 Raw Data for SQL_EXEC_ID 33554442 of PHV 1631436210

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  1631436210
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 2
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 3866
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17994
AND timestamp BETWEEN TO_DATE('20201023192522', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023192542', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 33554442) = 33554442
AND NVL(distribution, TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023192522', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:13:03 col:2of5.

17:13:03 col:2of5 "00464_sqld360_323688_17vjd1aast5q7_2d_225_raw_data_for_sqlexecid_33554442_of_phv_1631436210.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:03 col:2of5 "Execution Plans"
17:13:03 Plan Tree for PHV 2157031554 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2157031554
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2157031554
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:03 col:2of5.

17:13:03 col:2of5 "00465_sqld360_323688_17vjd1aast5q7_2d_226_plan_tree_for_phv_2157031554_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:04 col:2of5 "Execution Plans"
17:13:04 Plan from Memory for PHV 2157031554
Completed: 17:13:04


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:04 col:2of5 "Execution Plans"
17:13:04 Plan from History for PHV 2157031554
Completed: 17:13:04


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:04 col:2of5 "Execution Plans"
17:13:04 Avg et/exec for recent execs for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:13:04 col:2of5.

17:13:04 col:2of5 "00468_sqld360_323688_17vjd1aast5q7_2d_227_avg_etexec_for_recent_execs_for_phv_2157031554.html"
17:13:04 col:2of5 "00469_sqld360_323688_17vjd1aast5q7_2d_227_avg_etexec_for_recent_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:04 col:2of5 "Execution Plans"
17:13:04 Avg et/exec for historical execs for PHV 2157031554

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:04 col:2of5.

17:13:04 col:2of5 "00470_sqld360_323688_17vjd1aast5q7_2d_228_avg_etexec_for_historical_execs_for_phv_2157031554.html"
17:13:04 col:2of5 "00471_sqld360_323688_17vjd1aast5q7_2d_228_avg_etexec_for_historical_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:04 col:2of5 "Execution Plans"
17:13:04 Peak PGA and TEMP usage for recent execs for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:04 col:2of5.

17:13:04 col:2of5 "00472_sqld360_323688_17vjd1aast5q7_2d_229_peak_pga_and_temp_usage_for_recent_execs_for_phv_2157031554.html"
17:13:04 col:2of5 "00473_sqld360_323688_17vjd1aast5q7_2d_229_peak_pga_and_temp_usage_for_recent_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:05 col:2of5 "Execution Plans"
17:13:05 Peak PGA and TEMP usage for historical execs for PHV 2157031554

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:05 col:2of5.

17:13:05 col:2of5 "00474_sqld360_323688_17vjd1aast5q7_2d_230_peak_pga_and_temp_usage_for_historical_execs_for_phv_2157031554.html"
17:13:05 col:2of5 "00475_sqld360_323688_17vjd1aast5q7_2d_230_peak_pga_and_temp_usage_for_historical_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:05 col:2of5 "Execution Plans"
17:13:05 Peak Read and Write I/O requests for recent execs for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:05 col:2of5.

17:13:05 col:2of5 "00476_sqld360_323688_17vjd1aast5q7_2d_231_peak_read_and_write_io_requests_for_recent_execs_for_phv_2157031554.html"
17:13:05 col:2of5 "00477_sqld360_323688_17vjd1aast5q7_2d_231_peak_read_and_write_io_requests_for_recent_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:05 col:2of5 "Execution Plans"
17:13:05 Peak Read and Write I/O requests for historical execs for PHV 2157031554

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:05 col:2of5.

17:13:05 col:2of5 "00478_sqld360_323688_17vjd1aast5q7_2d_232_peak_read_and_write_io_requests_for_historical_execs_for_phv_2157031554.html"
17:13:05 col:2of5 "00479_sqld360_323688_17vjd1aast5q7_2d_232_peak_read_and_write_io_requests_for_historical_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:05 col:2of5 "Execution Plans"
17:13:05 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:05 col:2of5.

17:13:05 col:2of5 "00480_sqld360_323688_17vjd1aast5q7_2d_233_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2157031554.html"
17:13:05 col:2of5 "00481_sqld360_323688_17vjd1aast5q7_2d_233_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:05 col:2of5 "Execution Plans"
17:13:05 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2157031554

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:05 col:2of5.

17:13:05 col:2of5 "00482_sqld360_323688_17vjd1aast5q7_2d_234_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2157031554.html"
17:13:06 col:2of5 "00483_sqld360_323688_17vjd1aast5q7_2d_234_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:06 col:2of5 "Execution Plans"
17:13:06 Top Wait events for PHV 2157031554

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:13:06 col:2of5.

17:13:06 col:2of5 "00484_sqld360_323688_17vjd1aast5q7_2d_235_top_wait_events_for_phv_2157031554.html"
17:13:06 col:2of5 "00485_sqld360_323688_17vjd1aast5q7_2d_235_top_wait_events_for_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:06 col:2of5 "Execution Plans"
17:13:06 Top Objects accessed by PHV 2157031554

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2157031554
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:13:06 col:2of5.

17:13:06 col:2of5 "00486_sqld360_323688_17vjd1aast5q7_2d_236_top_objects_accessed_by_phv_2157031554.html"
17:13:06 col:2of5 "00487_sqld360_323688_17vjd1aast5q7_2d_236_top_objects_accessed_by_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:06 col:2of5 "Execution Plans"
17:13:06 Top Plan Steps for PHV 2157031554

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:13:06 col:2of5.

17:13:06 col:2of5 "00488_sqld360_323688_17vjd1aast5q7_2d_237_top_plan_steps_for_phv_2157031554.html"
17:13:06 col:2of5 "00489_sqld360_323688_17vjd1aast5q7_2d_237_top_plan_steps_for_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:06 col:2of5 "Execution Plans"
17:13:06 Top Step/Event/Obj for PHV 2157031554

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2157031554
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:06 col:2of5.

17:13:06 col:2of5 "00490_sqld360_323688_17vjd1aast5q7_2d_238_top_stepeventobj_for_phv_2157031554.html"
17:13:06 col:2of5 "00491_sqld360_323688_17vjd1aast5q7_2d_238_top_stepeventobj_for_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:06 col:2of5 "Execution Plans"
17:13:06 Top 15 Wait events over recent time for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2157031554
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:13:06 col:2of5.

17:13:06 col:2of5 "00492_sqld360_323688_17vjd1aast5q7_2d_239_top_15_wait_events_over_recent_time_for_phv_2157031554.html"
17:13:07 col:2of5 "00493_sqld360_323688_17vjd1aast5q7_2d_239_top_15_wait_events_over_recent_time_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:07 col:2of5 "Execution Plans"
17:13:07 Top 15 Wait events over historical time for PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01cell single block physical " ,
NVL(aas_02,0) "e02ON CPU" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2157031554
AND object_node IN ('cell single block physical read','ON CPU','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:13:07 col:2of5.

17:13:07 col:2of5 "00494_sqld360_323688_17vjd1aast5q7_2d_240_top_15_wait_events_over_historical_time_for_phv_2157031554.html"
17:13:07 col:2of5 "00495_sqld360_323688_17vjd1aast5q7_2d_240_top_15_wait_events_over_historical_time_for_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:07 col:2of5 "Execution Plans"
17:13:07 Plan Tree with subtree for SQL_EXEC_ID 16777225 of PHV 2157031554

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2157031554
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:07 col:2of5.

17:13:07 col:2of5 "00496_sqld360_323688_17vjd1aast5q7_2d_241_plan_tree_with_subtree_for_sqlexecid_16777225_of_phv_2157031554_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:07 col:2of5 "Execution Plans"
17:13:07 Plan Step IDs timeline for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:13:07 col:2of5.

17:13:07 col:2of5 "00497_sqld360_323688_17vjd1aast5q7_2d_242_plan_step_ids_timeline_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:07 col:2of5 "00498_sqld360_323688_17vjd1aast5q7_2d_242_plan_step_ids_timeline_for_sqlexecid_16777225_of_phv_2157031554_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 Top Step/Event/Obj for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:08 col:2of5.

17:13:08 col:2of5 "00499_sqld360_323688_17vjd1aast5q7_2d_243_top_stepeventobj_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:08 col:2of5 "00500_sqld360_323688_17vjd1aast5q7_2d_243_top_stepeventobj_for_sqlexecid_16777225_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 Top 15 Wait events timeline SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:13:08 col:2of5.

17:13:08 col:2of5 "00501_sqld360_323688_17vjd1aast5q7_2d_244_top_15_wait_events_timeline_sqlexecid_16777225_of_phv_2157031554.html"
17:13:08 col:2of5 "00502_sqld360_323688_17vjd1aast5q7_2d_244_top_15_wait_events_timeline_sqlexecid_16777225_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 DB Time by PX process for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:13:08 col:2of5.

17:13:08 col:2of5 "00503_sqld360_323688_17vjd1aast5q7_2d_245_db_time_by_px_process_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:08 col:2of5 "00504_sqld360_323688_17vjd1aast5q7_2d_245_db_time_by_px_process_for_sqlexecid_16777225_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 PGA and TEMP usage for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:08 col:2of5.

17:13:08 col:2of5 "00505_sqld360_323688_17vjd1aast5q7_2d_246_pga_and_temp_usage_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:08 col:2of5 "00506_sqld360_323688_17vjd1aast5q7_2d_246_pga_and_temp_usage_for_sqlexecid_16777225_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 Read and Write I/O requests for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:08 col:2of5.

17:13:08 col:2of5 "00507_sqld360_323688_17vjd1aast5q7_2d_247_read_and_write_io_requests_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:08 col:2of5 "00508_sqld360_323688_17vjd1aast5q7_2d_247_read_and_write_io_requests_for_sqlexecid_16777225_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:08 col:2of5 "Execution Plans"
17:13:08 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:08 col:2of5.

17:13:09 col:2of5 "00509_sqld360_323688_17vjd1aast5q7_2d_248_read_write_and_interconnect_io_bytes_for_sqlexecid_16777225_of_phv_2157031554.html"
17:13:09 col:2of5 "00510_sqld360_323688_17vjd1aast5q7_2d_248_read_write_and_interconnect_io_bytes_for_sqlexecid_16777225_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:09 col:2of5 "Execution Plans"
17:13:09 Raw Data for SQL_EXEC_ID 16777225 of PHV 2157031554

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 797
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 26796
AND timestamp BETWEEN TO_DATE('20201022193256', 'YYYYMMDDHH24MISS') AND TO_DATE('20201022193306', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777225) = 16777225
AND NVL(distribution, TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')) = TO_DATE('20201022193255', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:13:09 col:2of5.

17:13:09 col:2of5 "00511_sqld360_323688_17vjd1aast5q7_2d_249_raw_data_for_sqlexecid_16777225_of_phv_2157031554.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:09 col:2of5 "Execution Plans"
17:13:09 Plan Tree with subtree for SQL_EXEC_ID 16777228 of PHV 2157031554

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2157031554
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:09 col:2of5.

17:13:09 col:2of5 "00512_sqld360_323688_17vjd1aast5q7_2d_250_plan_tree_with_subtree_for_sqlexecid_16777228_of_phv_2157031554_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:09 col:2of5 "Execution Plans"
17:13:09 Plan Step IDs timeline for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:13:09 col:2of5.

17:13:09 col:2of5 "00513_sqld360_323688_17vjd1aast5q7_2d_251_plan_step_ids_timeline_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00514_sqld360_323688_17vjd1aast5q7_2d_251_plan_step_ids_timeline_for_sqlexecid_16777228_of_phv_2157031554_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 Top Step/Event/Obj for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:10 col:2of5.

17:13:10 col:2of5 "00515_sqld360_323688_17vjd1aast5q7_2d_252_top_stepeventobj_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00516_sqld360_323688_17vjd1aast5q7_2d_252_top_stepeventobj_for_sqlexecid_16777228_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 Top 15 Wait events timeline SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01cell single block physical " ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'cell single block physical read' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND object_node IN ('cell single block physical read','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:13:10 col:2of5.

17:13:10 col:2of5 "00517_sqld360_323688_17vjd1aast5q7_2d_253_top_15_wait_events_timeline_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00518_sqld360_323688_17vjd1aast5q7_2d_253_top_15_wait_events_timeline_sqlexecid_16777228_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 DB Time by PX process for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:13:10 col:2of5.

17:13:10 col:2of5 "00519_sqld360_323688_17vjd1aast5q7_2d_254_db_time_by_px_process_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00520_sqld360_323688_17vjd1aast5q7_2d_254_db_time_by_px_process_for_sqlexecid_16777228_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 PGA and TEMP usage for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:10 col:2of5.

17:13:10 col:2of5 "00521_sqld360_323688_17vjd1aast5q7_2d_255_pga_and_temp_usage_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00522_sqld360_323688_17vjd1aast5q7_2d_255_pga_and_temp_usage_for_sqlexecid_16777228_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 Read and Write I/O requests for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:10 col:2of5.

17:13:10 col:2of5 "00523_sqld360_323688_17vjd1aast5q7_2d_256_read_and_write_io_requests_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:10 col:2of5 "00524_sqld360_323688_17vjd1aast5q7_2d_256_read_and_write_io_requests_for_sqlexecid_16777228_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:10 col:2of5 "Execution Plans"
17:13:10 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:10 col:2of5.

17:13:11 col:2of5 "00525_sqld360_323688_17vjd1aast5q7_2d_257_read_write_and_interconnect_io_bytes_for_sqlexecid_16777228_of_phv_2157031554.html"
17:13:11 col:2of5 "00526_sqld360_323688_17vjd1aast5q7_2d_257_read_write_and_interconnect_io_bytes_for_sqlexecid_16777228_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:11 col:2of5 "Execution Plans"
17:13:11 Raw Data for SQL_EXEC_ID 16777228 of PHV 2157031554

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 5802
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 11946
AND timestamp BETWEEN TO_DATE('20201023193613', 'YYYYMMDDHH24MISS') AND TO_DATE('20201023193613', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777228) = 16777228
AND NVL(distribution, TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')) = TO_DATE('20201023193611', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:13:11 col:2of5.

17:13:11 col:2of5 "00527_sqld360_323688_17vjd1aast5q7_2d_258_raw_data_for_sqlexecid_16777228_of_phv_2157031554.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:11 col:2of5 "Execution Plans"
17:13:11 Plan Tree with subtree for SQL_EXEC_ID 16777243 of PHV 2157031554

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2157031554
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2157031554
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:11 col:2of5.

17:13:11 col:2of5 "00528_sqld360_323688_17vjd1aast5q7_2d_259_plan_tree_with_subtree_for_sqlexecid_16777243_of_phv_2157031554_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:11 col:2of5 "Execution Plans"
17:13:11 Plan Step IDs timeline for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
null,
plan_line_id,
CASE WHEN rtr_category > .5 THEN category ELSE 'Multiple' END,
num_samples
FROM (SELECT end_time, plan_line_id, category, num_samples, rtr_category, ROW_NUMBER() OVER (PARTITION BY end_time, plan_line_id ORDER BY rtr_category DESC) rn_category
FROM (SELECT end_time, plan_line_id, category, SUM(num_samples) OVER (PARTITION BY end_time, plan_line_id) num_samples, RATIO_TO_REPORT(num_samples) OVER (PARTITION BY end_time, plan_line_id) rtr_category
FROM (SELECT timestamp end_time, NVL(id,0) plan_line_id,
CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END category,
COUNT(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp, NVL(id,0), CASE WHEN other_tag = 'CPU' THEN 'CPU' WHEN other_tag LIKE '%I/O' THEN 'I/O' WHEN other_tag = 'Concurrency' THEN 'Concurrency' WHEN other_tag = 'Cluster' THEN 'Cluster' ELSE 'Other' END)
)
)
WHERE rn_category = 1
ORDER BY end_time

17:13:11 col:2of5.

17:13:11 col:2of5 "00529_sqld360_323688_17vjd1aast5q7_2d_260_plan_step_ids_timeline_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00530_sqld360_323688_17vjd1aast5q7_2d_260_plan_step_ids_timeline_for_sqlexecid_16777243_of_phv_2157031554_bubble_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 Top Step/Event/Obj for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) =  17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:12 col:2of5.

17:13:12 col:2of5 "00531_sqld360_323688_17vjd1aast5q7_2d_261_top_stepeventobj_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00532_sqld360_323688_17vjd1aast5q7_2d_261_top_stepeventobj_for_sqlexecid_16777243_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 Top 15 Wait events timeline SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
NVL(num_sess_01,0) "e01ON CPU" ,
NVL(num_sess_02,0) "e02" ,
NVL(num_sess_03,0) "e03" ,
NVL(num_sess_04,0) "e04" ,
NVL(num_sess_05,0) "e05" ,
NVL(num_sess_06,0) "e06" ,
NVL(num_sess_07,0) "e07" ,
NVL(num_sess_08,0) "e08" ,
NVL(num_sess_09,0) "e09" ,
NVL(num_sess_10,0) "e10" ,
NVL(num_sess_11,0) "e11" ,
NVL(num_sess_12,0) "e12" ,
NVL(num_sess_13,0) "e13" ,
NVL(num_sess_14,0) "e14" ,
NVL(num_sess_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN num_sess ELSE NULL END) num_sess_01,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_02,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_03,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_04,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_05,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_06,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_07,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_08,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_09,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_10,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_11,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_12,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_13,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_14,
MAX(CASE WHEN cpu_or_event  = '' THEN num_sess ELSE NULL END) num_sess_15
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY sample_time)
ORDER BY 3

17:13:12 col:2of5.

17:13:12 col:2of5 "00533_sqld360_323688_17vjd1aast5q7_2d_262_top_15_wait_events_timeline_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00534_sqld360_323688_17vjd1aast5q7_2d_262_top_15_wait_events_timeline_sqlexecid_16777243_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 DB Time by PX process for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT data.qcpx_process,
data.num_samples,
NULL style,
data.qcpx_process||' - '||data.num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(data.num_samples) OVER (),2)||'%)' tooltip
FROM (SELECT NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost  qcpx_process,
count(*) num_samples
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY NVL2(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)), 'PX Proc - ', 'QC - ')||position||'.'||cpu_cost||'.'||io_cost
ORDER BY 2 DESC) data
ORDER BY 2 DESC

17:13:12 col:2of5.

17:13:12 col:2of5 "00535_sqld360_323688_17vjd1aast5q7_2d_263_db_time_by_px_process_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00536_sqld360_323688_17vjd1aast5q7_2d_263_db_time_by_px_process_for_sqlexecid_16777243_of_phv_2157031554_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 PGA and TEMP usage for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
pga_allocated,
temp_space_allocated,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:12 col:2of5.

17:13:12 col:2of5 "00537_sqld360_323688_17vjd1aast5q7_2d_264_pga_and_temp_usage_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00538_sqld360_323688_17vjd1aast5q7_2d_264_pga_and_temp_usage_for_sqlexecid_16777243_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 Read and Write I/O requests for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_requests,
write_io_requests,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:12 col:2of5.

17:13:12 col:2of5 "00539_sqld360_323688_17vjd1aast5q7_2d_265_read_and_write_io_requests_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:12 col:2of5 "00540_sqld360_323688_17vjd1aast5q7_2d_265_read_and_write_io_requests_for_sqlexecid_16777243_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:12 col:2of5 "Execution Plans"
17:13:12 Read, Write and Interconnect I/O bytes for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI:SS') end_time,
read_io_bytes,
write_io_bytes,
interconnect_io_bytes,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND remarks = '17vjd1aast5q7'
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
GROUP BY timestamp)
ORDER BY 3

17:13:12 col:2of5.

17:13:12 col:2of5 "00541_sqld360_323688_17vjd1aast5q7_2d_266_read_write_and_interconnect_io_bytes_for_sqlexecid_16777243_of_phv_2157031554.html"
17:13:13 col:2of5 "00542_sqld360_323688_17vjd1aast5q7_2d_266_read_write_and_interconnect_io_bytes_for_sqlexecid_16777243_of_phv_2157031554_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:13 col:2of5 "Execution Plans"
17:13:13 Raw Data for SQL_EXEC_ID 16777243 of PHV 2157031554

SELECT /*+ NO_MERGE */
statement_id     source,
search_columns   dbid,
cardinality      snap_id,
position         instance_number,
parent_id        sample_id,
TO_CHAR(timestamp, 'YYYY-MM-DD/HH24:MI:SS')        sample_time,
partition_id     sql_exec_id,
TO_CHAR(TO_DATE(distribution,'YYYYMMDDHH24MISS'), 'YYYY-MM-DD/HH24:MI:SS')  sql_exec_start,
cpu_cost         session_id,
io_cost          session_serial#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))            user_id,
remarks          sql_id,
cost             plan_hash_value,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,19)+1)) sql_full_plan_hash_value,
id               sql_plan_line_id,
operation        sql_plan_operation,
options          sql_plan_options,
object_node      cpu_or_event,
other_tag        wait_class,
TO_NUMBER(SUBSTR(partition_start,1,INSTR(partition_start,',',1,1)-1)) seq#,
SUBSTR(partition_start,INSTR(partition_start,',',1,1)+1,INSTR(partition_start,',',1,2)-INSTR(partition_start,',',1,1)-1) p1text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,2)+1,INSTR(partition_start,',',1,3)-INSTR(partition_start,',',1,2)-1)) p1,
SUBSTR(partition_start,INSTR(partition_start,',',1,3)+1,INSTR(partition_start,',',1,4)-INSTR(partition_start,',',1,3)-1) p2text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,4)+1,INSTR(partition_start,',',1,5)-INSTR(partition_start,',',1,4)-1)) p2,
SUBSTR(partition_start,INSTR(partition_start,',',1,5)+1,INSTR(partition_start,',',1,6)-INSTR(partition_start,',',1,5)-1) p3text,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,6)+1,INSTR(partition_start,',',1,7)-INSTR(partition_start,',',1,6)-1)) p3,
object_instance  current_obj#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,7)+1,INSTR(partition_start,',',1,8)-INSTR(partition_start,',',1,7)-1)) current_file#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,8)+1,INSTR(partition_start,',',1,9)-INSTR(partition_start,',',1,8)-1)) current_block#,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,9)+1,INSTR(partition_start,',',1,10)-INSTR(partition_start,',',1,9)-1)) current_row#,
SUBSTR(partition_stop,1,INSTR(partition_stop,',',1,1)-1) in_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,1)+1,INSTR(partition_stop,',',1,2)-INSTR(partition_stop,',',1,1)-1) in_hard_parse,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,2)+1,INSTR(partition_stop,',',1,3)-INSTR(partition_stop,',',1,2)-1) in_sql_execution,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)) qc_instance_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)) qc_session_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)) qc_session_serial#,
SUBSTR(partition_stop,INSTR(partition_stop,',',1,6)+1,INSTR(partition_stop,',',1,7)-INSTR(partition_stop,',',1,6)-1) blocking_session_status,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,7)+1,INSTR(partition_stop,',',1,8)-INSTR(partition_stop,',',1,7)-1)) blocking_session,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,8)+1,INSTR(partition_stop,',',1,9)-INSTR(partition_stop,',',1,8)-1)) blocking_session_serial#,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,9)+1,INSTR(partition_stop,',',1,10)-INSTR(partition_stop,',',1,9)-1)) blocking_inst_id,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) px_flags,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1)) pga_allocated,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1)) temp_space_allocated,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,10)+1,INSTR(partition_start,',',1,11)-INSTR(partition_start,',',1,10)-1)) tm_delta_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,11)+1,INSTR(partition_start,',',1,12)-INSTR(partition_start,',',1,11)-1)) tm_delta_cpu_time,
TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,12)+1,INSTR(partition_start,',',1,13)-INSTR(partition_start,',',1,12)-1)) tm_delta_db_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1)) delta_time,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)) delta_read_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)) delta_write_io_requests,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)) delta_read_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)) delta_write_io_bytes,
TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)) delta_interconnect_io_bytes
FROM plan_table
WHERE remarks = '17vjd1aast5q7'
AND statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes =  2157031554
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) = 1
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) = 2329
AND NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) = 17216
AND timestamp BETWEEN TO_DATE('20201030192559', 'YYYYMMDDHH24MISS') AND TO_DATE('20201030192559', 'YYYYMMDDHH24MISS')
AND NVL(partition_id, 16777243) = 16777243
AND NVL(distribution, TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')) = TO_DATE('20201030192558', 'YYYYMMDDHH24MISS')
AND 'Y' = 'Y'
ORDER BY sample_time,instance_number

17:13:13 col:2of5.

17:13:13 col:2of5 "00543_sqld360_323688_17vjd1aast5q7_2d_267_raw_data_for_sqlexecid_16777243_of_phv_2157031554.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:13 col:2of5 "Execution Plans"
17:13:13 Plan Tree for PHV 2447725225 with subtree

WITH ashdata AS (-- count the number of samples in ASH for each step
-- goal is to compute RATIO_TO_REPORT
SELECT NVL(id,0) id,
COUNT(*) num_samples,
ROUND(100*NVL(RATIO_TO_REPORT(COUNT(*)) OVER (),0),2) perc_impact
FROM plan_table
WHERE statement_id LIKE 'SQLD360_ASH_DATA%'
AND /*cost*/ bytes =2447725225
AND remarks = '17vjd1aast5q7'
GROUP BY NVL(id,0)),
orig_plan AS (-- extract the plan steps "as is", just replace to single quote in the filter predicates
-- precedence is given to plan from memory since it has filters
-- using RANK since there could be more than one entry but with different predicate ordering
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name, access_predicates, filter_predicates, other_xml
FROM (SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(SUBSTR(access_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) access_predicates,
REPLACE(SUBSTR(filter_predicates,1,1500), CHR(39) , CHR(92)||CHR(39)) filter_predicates,
other_xml,
RANK() OVER (ORDER BY inst_id, child_number) rnk
FROM gv$sql_plan_statistics_all
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2447725225)
WHERE rnk = 1
UNION ALL
SELECT sql_id, plan_hash_value, id, parent_id, operation, options, object_name,
REPLACE(access_predicates, CHR(39), CHR(92)||CHR(39)) access_predicates,
REPLACE(filter_predicates, CHR(39), CHR(92)||CHR(39)) filter_predicates,
other_xml
FROM dba_hist_sql_plan
WHERE sql_id = '17vjd1aast5q7'
AND plan_hash_value =2447725225
AND NOT EXISTS (SELECT 1
FROM gv$sql_plan_statistics_all
WHERE plan_hash_value =2447725225
AND sql_id = '17vjd1aast5q7'
AND 'Y' = 'Y')),
skip_steps AS (-- extract the display_map for the plan, to identify why steps are "skipped" because of adaptive
SELECT sql_id, plan_hash_value, EXTRACTVALUE(VALUE(b),'/row/@op') stepid, EXTRACTVALUE(VALUE(b),'/row/@skp') skp, EXTRACTVALUE(VALUE(b),'/row/@dep') dep
FROM orig_plan a,
TABLE(XMLSEQUENCE(EXTRACT(XMLTYPE(a.other_xml),'/*/display_map/row'))) b
WHERE sql_id = '17vjd1aast5q7'
AND other_xml IS NOT NULL),
adapt_plan_no_parent AS (-- generate adaptive_id (aka step_id) once the adaptive steps are excluded
SELECT a.sql_id, a.plan_hash_value, a.id, a.parent_id, b.dep,
(ROW_NUMBER() OVER (ORDER BY a.id))-1 adapt_id, a.operation, a.options, a.object_name, a.access_predicates, a.filter_predicates, b.skp
FROM orig_plan a,
skip_steps b
WHERE a.id = b.stepid(+)
AND (b.skp = 0 OR b.skp IS NULL)),
full_adaptive_plan AS (-- generate the parent adaptive step id
SELECT id, adapt_id, NVL(adapt_parent_id, parent_id) parent_id, operation, options, object_name, access_predicates, filter_predicates
FROM (SELECT dep, adapt_id, id, (SELECT MAX(adapt_id) FROM adapt_plan_no_parent b WHERE a.dep-1 = NVL(b.dep,0) AND b.adapt_id < a.adapt_id ) adapt_parent_id,
parent_id, a.operation operation, a.options, a.object_name, a.access_predicates, a.filter_predicates
FROM adapt_plan_no_parent a)),
plan_with_ash AS (SELECT full_adaptive_plan.*, NVL(ashdata.num_samples,0) num_samples, NVL(ashdata.perc_impact,0) perc_impact
FROM full_adaptive_plan,
ashdata
WHERE ashdata.id(+) = full_adaptive_plan.id),
plan_with_rec_impact AS (-- compute recursive impact (substree impact)
SELECT a.*, (SELECT sum(b.perc_impact)
FROM plan_with_ash b
START WITH b.adapt_id = a.adapt_id
CONNECT BY prior b.adapt_id = b.parent_id) sum_perc_impact
FROM plan_with_ash a)
SELECT '{v: '''||adapt_id||''',f: '''||adapt_id||' - '||operation||' '||options||NVL2(object_name,'<br>',' ')||object_name||'''}' id,
parent_id,
SUBSTR('Step ID: '||adapt_id||' (ASH Step ID: '||id||')\nASH Samples: '||num_samples||' ('||perc_impact||'%)'||
'\nSubstree Impact '||sum_perc_impact||'%'||
NVL2(access_predicates,'\n\nAccess Predicates: '||access_predicates,'')||NVL2(filter_predicates,'\n\nFilter Predicates: '||filter_predicates,''),1,4000) message,
adapt_id id3
FROM plan_with_rec_impact
ORDER BY id3

17:13:13 col:2of5.

17:13:13 col:2of5 "00544_sqld360_323688_17vjd1aast5q7_2d_268_plan_tree_for_phv_2447725225_with_subtree_org_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:13 col:2of5 "Execution Plans"
17:13:13 Plan from Memory for PHV 2447725225
Completed: 17:13:13


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:13 col:2of5 "Execution Plans"
17:13:13 Plan from History for PHV 2447725225
Completed: 17:13:13


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:13 col:2of5 "Execution Plans"
17:13:13 Avg et/exec for recent execs for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
avg_et,
avg_cpu_time,
avg_db_time,
min_et,
max_et,
AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT start_time,
TRUNC(AVG(et),2) avg_et,
TRUNC(AVG(cpu_time),2) avg_cpu_time,
TRUNC(AVG(db_time),2) avg_db_time,
TRUNC(MIN(et),2) min_et,
TRUNC(MAX(et),2) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
1+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
COUNT(*) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
ORDER BY 3

17:13:13 col:2of5.

17:13:13 col:2of5 "00547_sqld360_323688_17vjd1aast5q7_2d_269_avg_etexec_for_recent_execs_for_phv_2447725225.html"
17:13:13 col:2of5 "00548_sqld360_323688_17vjd1aast5q7_2d_269_avg_etexec_for_recent_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:14 col:2of5 "Execution Plans"
17:13:14 Avg et/exec for historical execs for PHV 2447725225

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(avg_et,0) avg_et,
NVL(avg_cpu_time,0) avg_cpu_time,
NVL(avg_db_time,0) avg_db_time,
NVL(min_et,0) min_et,
NVL(max_et,0) max_et,
NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(avg_et),2) avg_et,
TRUNC(MAX(avg_cpu_time),2) avg_cpu_time,
TRUNC(MAX(avg_db_time),2) avg_db_time,
TRUNC(MAX(min_et),2) min_et,
TRUNC(MAX(max_et),2) max_et
FROM (SELECT start_time,
MIN(start_snap_id) snap_id,
AVG(et) avg_et,
AVG(cpu_time) avg_cpu_time,
AVG(db_time) avg_db_time,
MIN(et) min_et,
MAX(et) max_et
FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
MIN(cardinality) start_snap_id,
10+86400*(MAX(timestamp)-MIN(timestamp)) et,
SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
SUM(                  10) db_time
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND partition_id IS NOT NULL
AND /*cost*/ bytes = 2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
NVL(partition_id,0)||'-'||NVL(distribution,'x'))
GROUP BY start_time)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:14 col:2of5.

17:13:14 col:2of5 "00549_sqld360_323688_17vjd1aast5q7_2d_270_avg_etexec_for_historical_execs_for_phv_2447725225.html"
17:13:14 col:2of5 "00550_sqld360_323688_17vjd1aast5q7_2d_270_avg_etexec_for_historical_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:14 col:2of5 "Execution Plans"
17:13:14 Peak PGA and TEMP usage for recent execs for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_min,0) pga_allocated_min,
NVL(temp_space_allocated_min,0) temp_space_allocated_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
MAX(pga_allocated) pga_allocated_min,
MAX(temp_space_allocated) temp_space_allocated_min
FROM (SELECT timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:14 col:2of5.

17:13:14 col:2of5 "00551_sqld360_323688_17vjd1aast5q7_2d_271_peak_pga_and_temp_usage_for_recent_execs_for_phv_2447725225.html"
17:13:14 col:2of5 "00552_sqld360_323688_17vjd1aast5q7_2d_271_peak_pga_and_temp_usage_for_recent_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:14 col:2of5 "Execution Plans"
17:13:14 Peak PGA and TEMP usage for historical execs for PHV 2447725225

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(pga_allocated_hour,0) pga_allocated_hour,
NVL(temp_space_allocated_hour,0) temp_space_allocated_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
MAX(pga_allocated) pga_allocated_hour,
MAX(temp_space_allocated) temp_space_allocated_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,11)+1,INSTR(partition_stop,',',1,12)-INSTR(partition_stop,',',1,11)-1))) pga_allocated,
SUM(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,12)+1,INSTR(partition_stop,',',1,13)-INSTR(partition_stop,',',1,12)-1))) temp_space_allocated
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:14 col:2of5.

17:13:14 col:2of5 "00553_sqld360_323688_17vjd1aast5q7_2d_272_peak_pga_and_temp_usage_for_historical_execs_for_phv_2447725225.html"
17:13:14 col:2of5 "00554_sqld360_323688_17vjd1aast5q7_2d_272_peak_pga_and_temp_usage_for_historical_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:14 col:2of5 "Execution Plans"
17:13:14 Peak Read and Write I/O requests for recent execs for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_min,0)  read_io_requests_min,
NVL(write_io_requests_min,0)  write_io_requests_min,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_requests),2) read_io_requests_min,
TRUNC(MAX(write_io_requests),2) write_io_requests_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:14 col:2of5.

17:13:14 col:2of5 "00555_sqld360_323688_17vjd1aast5q7_2d_273_peak_read_and_write_io_requests_for_recent_execs_for_phv_2447725225.html"
17:13:14 col:2of5 "00556_sqld360_323688_17vjd1aast5q7_2d_273_peak_read_and_write_io_requests_for_recent_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:14 col:2of5 "Execution Plans"
17:13:14 Peak Read and Write I/O requests for historical execs for PHV 2447725225

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_requests_hour,0) read_io_requests_hour,
NVL(write_io_requests_hour,0) write_io_requests_hour,
0 dummy_03,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_requests),2) read_io_requests_hour,
TRUNC(MAX(write_io_requests),2) write_io_requests_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,14)+1,INSTR(partition_stop,',',1,15)-INSTR(partition_stop,',',1,14)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_requests,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,15)+1,INSTR(partition_stop,',',1,16)-INSTR(partition_stop,',',1,15)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_requests
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:14 col:2of5.

17:13:15 col:2of5 "00557_sqld360_323688_17vjd1aast5q7_2d_274_peak_read_and_write_io_requests_for_historical_execs_for_phv_2447725225.html"
17:13:15 col:2of5 "00558_sqld360_323688_17vjd1aast5q7_2d_274_peak_read_and_write_io_requests_for_historical_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:15 col:2of5 "Execution Plans"
17:13:15 Peak Read, Write and Interconnect I/O bytes for recent execs for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
read_io_bytes_min,
write_io_bytes_min,
interconnect_io_bytes_min,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT TRUNC(end_time,'mi') end_time,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_min,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_min,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_min
FROM (SELECT timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND partition_id IS NOT NULL
AND 'Y' = 'Y'
GROUP BY timestamp)
GROUP BY TRUNC(end_time,'mi'))
ORDER BY 3

17:13:15 col:2of5.

17:13:15 col:2of5 "00559_sqld360_323688_17vjd1aast5q7_2d_275_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2447725225.html"
17:13:15 col:2of5 "00560_sqld360_323688_17vjd1aast5q7_2d_275_peak_read_write_and_interconnect_io_bytes_for_recent_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:15 col:2of5 "Execution Plans"
17:13:15 Peak Read, Write and Interconnect I/O bytes for historical execs for PHV 2447725225

SELECT b.snap_id snap_id,
TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(read_io_bytes_hour,0) read_io_requests_hour,
NVL(write_io_bytes_hour,0) write_io_bytes_hour,
NVL(interconnect_io_bytes_hour,0) interconnect_io_bytes_hour,
0 dummy_04,
0 dummy_05,
0 dummy_06,
0 dummy_07,
0 dummy_08,
0 dummy_09,
0 dummy_10,
0 dummy_11,
0 dummy_12,
0 dummy_13,
0 dummy_14,
0 dummy_15
FROM (SELECT snap_id,
TRUNC(MAX(read_io_bytes),2) read_io_bytes_hour,
TRUNC(MAX(write_io_bytes),2) write_io_bytes_hour,
TRUNC(MAX(interconnect_io_bytes),2) interconnect_io_bytes_hour
FROM (SELECT cardinality snap_id,
timestamp end_time,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,16)+1,INSTR(partition_stop,',',1,17)-INSTR(partition_stop,',',1,16)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) read_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,17)+1,INSTR(partition_stop,',',1,18)-INSTR(partition_stop,',',1,17)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) write_io_bytes,
SUM(NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,18)+1,INSTR(partition_stop,',',1,19)-INSTR(partition_stop,',',1,18)-1)),0)/
ROUND(GREATEST(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,13)+1,INSTR(partition_stop,',',1,14)-INSTR(partition_stop,',',1,13)-1))/1e6,1))) interconnect_io_bytes
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND /*cost*/ bytes = 2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
GROUP BY cardinality, timestamp)
GROUP BY snap_id) ash,
(SELECT snap_id, begin_interval_time, end_interval_time
FROM (SELECT snap_id, begin_interval_time, end_interval_time,
ROW_NUMBER() OVER (PARTITION BY snap_id ORDER BY instance_number) rn
FROM dba_hist_snapshot)
WHERE rn = 1) b
WHERE ash.snap_id(+) = b.snap_id
AND b.snap_id BETWEEN 3485 AND 4974
ORDER BY 3

17:13:15 col:2of5.

17:13:15 col:2of5 "00561_sqld360_323688_17vjd1aast5q7_2d_276_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2447725225.html"
17:13:15 col:2of5 "00562_sqld360_323688_17vjd1aast5q7_2d_276_peak_read_write_and_interconnect_io_bytes_for_historical_execs_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:15 col:2of5 "Execution Plans"
17:13:15 Top Wait events for PHV 2447725225

SELECT cpu_or_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
cpu_or_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT object_node cpu_or_event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY object_node, other_tag
ORDER BY 3 DESC)
ORDER BY 2 DESC

17:13:15 col:2of5.

17:13:15 col:2of5 "00563_sqld360_323688_17vjd1aast5q7_2d_277_top_wait_events_for_phv_2447725225.html"
17:13:15 col:2of5 "00564_sqld360_323688_17vjd1aast5q7_2d_277_top_wait_events_for_phv_2447725225_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:15 col:2of5 "Execution Plans"
17:13:15 Top Objects accessed by PHV 2447725225

SELECT data_object,
num_samples,
NULL style,
data_object||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.obj#||
CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END data_object,
num_samples
FROM (SELECT a.object_instance obj#,
count(*) num_samples
FROM plan_table a
WHERE /*cost*/ a.bytes =  2447725225
AND a.remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
AND a.other_tag IN ('Application','Cluster', 'Concurrency', 'User I/O', 'System I/O')
GROUP BY a.object_instance
ORDER BY 2 DESC) data)
ORDER BY 2 DESC

17:13:15 col:2of5.

17:13:15 col:2of5 "00565_sqld360_323688_17vjd1aast5q7_2d_278_top_objects_accessed_by_phv_2447725225.html"
17:13:16 col:2of5 "00566_sqld360_323688_17vjd1aast5q7_2d_278_top_objects_accessed_by_phv_2447725225_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:16 col:2of5 "Execution Plans"
17:13:16 Top Plan Steps for PHV 2447725225

SELECT operation,
num_samples,
NULL style,
operation||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT id||' - '||operation||' '||options operation,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
AND 'Y' = 'Y'
GROUP BY id||' - '||operation||' '||options
ORDER BY 2 DESC)
ORDER BY 2 DESC

17:13:16 col:2of5.

17:13:16 col:2of5 "00567_sqld360_323688_17vjd1aast5q7_2d_279_top_plan_steps_for_phv_2447725225.html"
17:13:16 col:2of5 "00568_sqld360_323688_17vjd1aast5q7_2d_279_top_plan_steps_for_phv_2447725225_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:16 col:2of5 "Execution Plans"
17:13:16 Top Step/Event/Obj for PHV 2447725225

SELECT step_event,
num_samples,
CASE wait_class WHEN 'CPU' THEN '34CF27' WHEN 'Scheduler' THEN '9FFA9D' WHEN 'User I/O' THEN '0252D7' WHEN 'System I/O' THEN '1E96DD'  WHEN 'Concurrency' THEN '871C12' WHEN 'Application' THEN 'C42A05' WHEN 'Commit' THEN 'EA6A05' WHEN 'Configuration' THEN '594611'   WHEN 'Administrative' THEN '75763E'  WHEN 'Network' THEN '989779' WHEN 'Other' THEN 'F571A0'  WHEN 'Cluster' THEN 'CEC3B5' WHEN 'Queueing' THEN 'C6BAA5' END style,
step_event||' - '||num_samples||' Samples ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
FROM (SELECT data.step||' '||CASE WHEN data.obj# = 0 THEN 'UNDO'
ELSE (SELECT TRIM('.' FROM ' '||o.owner||'.'||o.object_name||'.'||o.subobject_name) FROM dba_objects o WHERE o.object_id = data.obj# AND ROWNUM = 1)
END||' / '||data.event  step_event,
data.num_samples, data.wait_class
FROM (SELECT id||' - '||operation||' '||options step, object_instance obj#, object_node event, other_tag wait_class,
count(*) num_samples
FROM plan_table
WHERE /*cost*/ bytes =  2447725225
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND statement_id LIKE 'SQLD360_ASH_DATA%'
GROUP BY id||' - '||operation||' '||options, object_instance, object_node, other_tag
ORDER BY 5 DESC) data)
ORDER BY 2 DESC

17:13:16 col:2of5.

17:13:16 col:2of5 "00569_sqld360_323688_17vjd1aast5q7_2d_280_top_stepeventobj_for_phv_2447725225.html"
17:13:16 col:2of5 "00570_sqld360_323688_17vjd1aast5q7_2d_280_top_stepeventobj_for_phv_2447725225_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:16 col:2of5 "Execution Plans"
17:13:16 Top 15 Wait events over recent time for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'mi') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)/60,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2447725225
AND object_node IN ('','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'mi'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:13:16 col:2of5.

17:13:16 col:2of5 "00571_sqld360_323688_17vjd1aast5q7_2d_281_top_15_wait_events_over_recent_time_for_phv_2447725225.html"
17:13:16 col:2of5 "00572_sqld360_323688_17vjd1aast5q7_2d_281_top_15_wait_events_over_recent_time_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:16 col:2of5 "Execution Plans"
17:13:16 Top 15 Wait events over historical time for PHV 2447725225

SELECT 0 snap_id,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') begin_time,
TO_CHAR(sample_time, 'YYYY-MM-DD HH24:MI') end_time,
NVL(aas_01,0) "e01ON CPU" ,
NVL(aas_02,0) "e02" ,
NVL(aas_03,0) "e03" ,
NVL(aas_04,0) "e04" ,
NVL(aas_05,0) "e05" ,
NVL(aas_06,0) "e06" ,
NVL(aas_07,0) "e07" ,
NVL(aas_08,0) "e08" ,
NVL(aas_09,0) "e09" ,
NVL(aas_10,0) "e10" ,
NVL(aas_11,0) "e11" ,
NVL(aas_12,0) "e12" ,
NVL(aas_13,0) "e13" ,
NVL(aas_14,0) "e14" ,
NVL(aas_15,0) "e15"
FROM (SELECT sample_time,
MAX(CASE WHEN cpu_or_event  = 'ON CPU' THEN aas ELSE NULL END) aas_01,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_02,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_03,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_04,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_05,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_06,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_07,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_08,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_09,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_10,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_11,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_12,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_13,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_14,
MAX(CASE WHEN cpu_or_event  = '' THEN aas ELSE NULL END) aas_15
FROM (SELECT TRUNC(sample_time, 'hh24') sample_time,
cpu_or_event,
ROUND(SUM(num_sess)*                  10/3600,3) aas
FROM (SELECT timestamp sample_time,
object_node cpu_or_event,
count(*) num_sess
FROM plan_table
WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
AND remarks = '17vjd1aast5q7'
AND 'Y' = 'Y'
AND /*cost*/ bytes = 2447725225
AND object_node IN ('ON CPU','','','','','',
'','','','','','',
'','','')
GROUP BY timestamp, object_node)
GROUP BY TRUNC(sample_time, 'hh24'), cpu_or_event)
GROUP BY sample_time)
ORDER BY 3

17:13:16 col:2of5.

17:13:16 col:2of5 "00573_sqld360_323688_17vjd1aast5q7_2d_282_top_15_wait_events_over_historical_time_for_phv_2447725225.html"
17:13:16 col:2of5 "00574_sqld360_323688_17vjd1aast5q7_2d_282_top_15_wait_events_over_historical_time_for_phv_2447725225_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:16 col:2of5 "Execution Plans"
17:13:16 Plans from Memory
Completed: 17:13:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:17 col:2of5 "Execution Plans"
17:13:17 Plans from History
Completed: 17:13:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:17 col:2of5 "Execution Plans"
17:13:17 Plan from Plan Table
Completed: 17:13:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:17 col:2of5 "Execution Plans"
17:13:17 Plans from Baseline
Completed: 17:13:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:17 col:2of5 "Execution Plans"
17:13:17 Plans from SQL Tuning Sets
Completed: 17:13:17


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:17 col:2of5 "Plan Control"
17:13:17 SQL Profiles


17:13:17 col:2of5.

17:13:17 col:2of5 "00580_sqld360_323688_17vjd1aast5q7_2e_40_sql_profiles.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:18 col:2of5 "Plan Control"
17:13:18 SQL Profile Data

SELECT /*+ NO_MERGE */
       *
  FROM dbmshsxp_sql_profile_attr
 WHERE profile_name IN (SELECT name
                          FROM dba_sql_profiles
                         WHERE signature IN (  1782922979743544096 ,  1782922979743544096 ))
   AND 'Y' = 'Y'
 ORDER BY profile_name

17:13:18 col:2of5.

17:13:18 col:2of5 "00581_sqld360_323688_17vjd1aast5q7_2e_41_sql_profile_data.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:18 col:2of5 "Plan Control"
17:13:18 SQL Plan Baselines


17:13:18 col:2of5.

17:13:18 col:2of5 "00582_sqld360_323688_17vjd1aast5q7_2e_42_sql_plan_baselines.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:18 col:2of5 "Plan Control"
17:13:18 SQL Patches


17:13:18 col:2of5.

17:13:18 col:2of5 "00583_sqld360_323688_17vjd1aast5q7_2e_43_sql_patches.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:18 col:2of5 "Plan Control"
17:13:18 SQL Plan Directives

SELECT /*+ NO_MERGE */
       *
  FROM (SELECT d.dir_id directive_id,
               d.type,
               d.enabled,
               (CASE WHEN d.internal_state = 'HAS_STATS' OR d.redundant = 'YES' THEN 'SUPERSEDED'
                     WHEN d.internal_state IN ('NEW', 'MISSING_STATS', 'PERMANENT') THEN 'USABLE'
                     ELSE 'UNKNOWN'
                 END) state,
               d.auto_drop,
               f.reason,
               d.created,
               d.last_modified,
               d.last_used,
               d.internal_state,
               d.redundant
          FROM sys."_BASE_OPT_DIRECTIVE" d,
               sys."_BASE_OPT_FINDING" f
          WHERE d.f_id = f.f_id)
 WHERE directive_id IN (SELECT directive_id
                          FROM dba_sql_plan_dir_objects
                         WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7'))
 ORDER BY directive_id

17:13:18 col:2of5.

17:13:18 col:2of5 "00584_sqld360_323688_17vjd1aast5q7_2e_44_sql_plan_directives.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:25 col:2of5 "Plan Control"
17:13:25 SQL Plan Directives Objects

WITH dir_id AS (SELECT directive_id
                  FROM dba_sql_plan_dir_objects
                 WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7'))
SELECT /*+ NO_MERGE */ *
  FROM dba_sql_plan_dir_objects
 WHERE directive_id IN (SELECT directive_id FROM dir_id)
 ORDER BY owner, object_name, directive_id

17:13:25 col:2of5.

17:13:25 col:2of5 "00585_sqld360_323688_17vjd1aast5q7_2e_45_sql_plan_directives_objects.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:38 col:2of5 "Plan Control"
17:13:38 SQL ReOptimization Hints

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_reoptimization_hints
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, child_number, hint_id

17:13:38 col:2of5.

17:13:38 col:2of5 "00586_sqld360_323688_17vjd1aast5q7_2e_46_sql_reoptimization_hints.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:38 col:2of5 "Plan Control"
17:13:38 Mapped SQL

SELECT /*+ NO_MERGE */
       *
  FROM gv$mapped_sql
 WHERE mapped_sql_id = '17vjd1aast5q7' OR sql_id = '17vjd1aast5q7'
 ORDER BY inst_id

17:13:38 col:2of5.

17:13:38 col:2of5 "00587_sqld360_323688_17vjd1aast5q7_2e_47_mapped_sql.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:38 col:2of5 "SQL Monitor"
17:13:38 SQL Monitor


17:13:38 col:2of5.

17:13:38 col:2of5 "00588_sqld360_323688_17vjd1aast5q7_2f_48_sql_monitor.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:38 col:2of5 "SQL Monitor"
17:13:38 SQL Plan Monitor

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_plan_monitor
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, sid, sql_exec_id desc, sql_exec_start desc, plan_line_id

17:13:38 col:2of5.

17:13:38 col:2of5 "00589_sqld360_323688_17vjd1aast5q7_2f_49_sql_plan_monitor.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Binds Summary from Memory

SELECT /*+ NO_MERGE */
       inst_id, child_number, name, position, datatype_string, MIN(value_string) min_value, MAX(value_string) max_value, COUNT(DISTINCT value_string) distinct_combinations
  FROM gv$sql_bind_capture
 WHERE sql_id = '17vjd1aast5q7'
 GROUP BY inst_id, child_number, name, position, datatype_string
 ORDER BY inst_id, child_number, name, position, datatype_string

17:13:39 col:2of5.

17:13:39 col:2of5 "00590_sqld360_323688_17vjd1aast5q7_2g_50_binds_summary_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Binds List from Memory

SELECT /*+ NO_MERGE */
       sbc.*,
       s.plan_hash_value
  FROM gv$sql_bind_capture sbc,
       gv$sql s
 WHERE sbc.sql_id = '17vjd1aast5q7'
   AND sbc.inst_id = s.inst_id
   AND sbc.child_number = s.child_number
   AND sbc.sql_id = s.sql_id
 ORDER BY sbc.inst_id, sbc.child_number, sbc.position

17:13:39 col:2of5.

17:13:39 col:2of5 "00591_sqld360_323688_17vjd1aast5q7_2g_51_binds_list_from_memory.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Binds Summary from History

SELECT /*+ NO_MERGE */
       instance_number, name, position, datatype_string, MIN(value_string) min_value, MAX(value_string) max_value, COUNT(DISTINCT value_string) distinct_combinations
  FROM dba_hist_sqlbind
 WHERE sql_id = '17vjd1aast5q7'
   AND snap_id BETWEEN 3485 AND 4974
   AND 'Y' = 'Y'
 GROUP BY instance_number, name, position, datatype_string
 ORDER BY instance_number, name, position, datatype_string

17:13:39 col:2of5.

17:13:39 col:2of5 "00592_sqld360_323688_17vjd1aast5q7_2g_52_binds_summary_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Binds List from History

SELECT /*+ NO_MERGE */
       *
  FROM dba_hist_sqlbind
 WHERE sql_id = '17vjd1aast5q7'
   AND snap_id BETWEEN 3485 AND 4974
   AND 'Y' = 'Y'
 ORDER BY snap_id desc, instance_number, position

17:13:39 col:2of5.

17:13:39 col:2of5 "00593_sqld360_323688_17vjd1aast5q7_2g_53_binds_list_from_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Captured Binds Details

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:39 col:2of5 "Binds"
17:13:39 Top 15 bind :B1 values used

SELECT value_string,
num_captures,
null,
'Value: '||value_string||' - Number of times captured: '||num_captures||' ('||TRUNC(100*RATIO_TO_REPORT(num_captures) OVER (),2)||'% of total)' tooltip
FROM (SELECT value_string,
COUNT(*) num_captures
FROM (SELECT value_string
FROM gv$sql_bind_capture
WHERE name = ':B1'
AND datatype_string = 'NESTED TABLE'
AND sql_id = '17vjd1aast5q7'
AND last_captured IS NOT NULL
UNION
SELECT value_string
FROM dba_hist_sqlbind
WHERE name = ':B1'
AND datatype_string = 'NESTED TABLE'
AND sql_id = '17vjd1aast5q7'
AND last_captured IS NOT NULL
AND snap_id BETWEEN 3485 AND 4974
AND 'Y' = 'Y')
GROUP BY value_string
ORDER BY 2 DESC)
WHERE rownum <= 15

17:13:39 col:2of5.

17:13:39 col:2of5 "00595_sqld360_323688_17vjd1aast5q7_2g_54_top_15_bind_b1_values_used.html"
17:13:39 col:2of5 "00596_sqld360_323688_17vjd1aast5q7_2g_54_top_15_bind_b1_values_used_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:40 col:2of5 "Binds"
17:13:40 Binds with unstable datatype

SELECT name, position, COUNT(DISTINCT datatype_string) DISTINCT_DATATYPE, MIN(datatype_string) MIN_DATATYPE, MAX(datatype_string) MAX_DATATYPE
  FROM (SELECT name, position, datatype_string
          FROM gv$sql_bind_capture
         WHERE sql_id = '17vjd1aast5q7'
         UNION
         SELECT name, position, datatype_string
           FROM dba_hist_sqlbind
          WHERE sql_id = '17vjd1aast5q7'
            AND snap_id BETWEEN 3485 AND 4974
            AND 'Y' = 'Y' )
 GROUP BY name, position
 HAVING COUNT(*) > 1

17:13:40 col:2of5.

17:13:40 col:2of5 "00597_sqld360_323688_17vjd1aast5q7_2g_55_binds_with_unstable_datatype.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:40 col:2of5 "Cursor Sharing"
17:13:40 Non-sharing reasons summary
SELECT COUNT(*) cursors, inst_id, reason_not_shared FROM gv$sql_shared_cursor UNPIVOT (value FOR reason_not_shared IN
( BIND_LENGTH_UPGRADEABLE
, USE_FEEDBACK_STATS
, UNBOUND_CURSOR
, SQL_TYPE_MISMATCH
, OPTIMIZER_MISMATCH
, OUTLINE_MISMATCH
, STATS_ROW_MISMATCH
, LITERAL_MISMATCH
, FORCE_HARD_PARSE
, EXPLAIN_PLAN_CURSOR
, BUFFERED_DML_MISMATCH
, PDML_ENV_MISMATCH
, INST_DRTLD_MISMATCH
, SLAVE_QC_MISMATCH
, TYPECHECK_MISMATCH
, AUTH_CHECK_MISMATCH
, BIND_MISMATCH
, DESCRIBE_MISMATCH
, LANGUAGE_MISMATCH
, TRANSLATION_MISMATCH
, BIND_EQUIV_FAILURE
, INSUFF_PRIVS
, INSUFF_PRIVS_REM
, REMOTE_TRANS_MISMATCH
, LOGMINER_SESSION_MISMATCH
, INCOMP_LTRL_MISMATCH
, OVERLAP_TIME_MISMATCH
, EDITION_MISMATCH
, MV_QUERY_GEN_MISMATCH
, USER_BIND_PEEK_MISMATCH
, TYPCHK_DEP_MISMATCH
, NO_TRIGGER_MISMATCH
, FLASHBACK_CURSOR
, ANYDATA_TRANSFORMATION
, PDDL_ENV_MISMATCH
, TOP_LEVEL_RPI_CURSOR
, DIFFERENT_LONG_LENGTH
, LOGICAL_STANDBY_APPLY
, DIFF_CALL_DURN
, BIND_UACS_DIFF
, PLSQL_CMP_SWITCHS_DIFF
, CURSOR_PARTS_MISMATCH
, STB_OBJECT_MISMATCH
, CROSSEDITION_TRIGGER_MISMATCH
, PQ_SLAVE_MISMATCH
, TOP_LEVEL_DDL_MISMATCH
, MULTI_PX_MISMATCH
, BIND_PEEKED_PQ_MISMATCH
, MV_REWRITE_MISMATCH
, ROLL_INVALID_MISMATCH
, OPTIMIZER_MODE_MISMATCH
, PX_MISMATCH
, MV_STALEOBJ_MISMATCH
, FLASHBACK_TABLE_MISMATCH
, LITREP_COMP_MISMATCH
, PLSQL_DEBUG
, LOAD_OPTIMIZER_STATS
, ACL_MISMATCH
, FLASHBACK_ARCHIVE_MISMATCH
, LOCK_USER_SCHEMA_FAILED
, REMOTE_MAPPING_MISMATCH
, LOAD_RUNTIME_HEAP_FAILED
, HASH_MATCH_FAILED
, PURGED_CURSOR )) WHERE value = 'Y' AND sql_id = '17vjd1aast5q7' GROUP BY inst_id,reason_not_shared ORDER BY inst_id, cursors DESC, reason_not_shared

17:13:40 col:2of5.

17:13:40 col:2of5 "00598_sqld360_323688_17vjd1aast5q7_2h_56_nonsharing_reasons_summary.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:40 col:2of5 "Cursor Sharing"
17:13:40 Non-sharing reasons details

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_shared_cursor
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, child_number

17:13:40 col:2of5.

17:13:41 col:2of5 "00599_sqld360_323688_17vjd1aast5q7_2h_57_nonsharing_reasons_details.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:41 col:2of5 "Cursor Sharing"
17:13:41 ACS Histogram

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_histogram
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, child_number, bucket_id

17:13:41 col:2of5.

17:13:41 col:2of5 "00600_sqld360_323688_17vjd1aast5q7_2h_58_acs_histogram.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:41 col:2of5 "Cursor Sharing"
17:13:41 ACS Statistics

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_statistics
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, child_number

17:13:41 col:2of5.

17:13:41 col:2of5 "00601_sqld360_323688_17vjd1aast5q7_2h_59_acs_statistics.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:41 col:2of5 "Cursor Sharing"
17:13:41 ACS Selectivity

SELECT /*+ NO_MERGE */
       *
  FROM gv$sql_cs_selectivity
 WHERE sql_id = '17vjd1aast5q7'
 ORDER BY inst_id, child_number, range_id, predicate

17:13:41 col:2of5.

17:13:41 col:2of5 "00602_sqld360_323688_17vjd1aast5q7_2h_60_acs_selectivity.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:41 col:3of5 "Objects"
17:13:41 Tables

SELECT /*+ NO_MERGE */
       *
  FROM dba_tables
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, table_name

17:13:41 col:3of5.

17:13:41 col:3of5 "00603_sqld360_323688_17vjd1aast5q7_3a_61_tables.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:41 col:3of5 "Objects"
17:13:41 Indexes

SELECT /*+ NO_MERGE */
       *
  FROM dba_indexes
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, index_name

17:13:41 col:3of5.

17:13:41 col:3of5 "00604_sqld360_323688_17vjd1aast5q7_3a_62_indexes.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:42 col:3of5 "Objects"
17:13:42 Index Columns

SELECT /*+ NO_MERGE */
       *
  FROM dba_ind_columns
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, index_name, column_position

17:13:42 col:3of5.

17:13:42 col:3of5 "00605_sqld360_323688_17vjd1aast5q7_3a_63_index_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:42 col:3of5 "Objects"
17:13:42 Columns

SELECT /*+ NO_MERGE */
       a.*
      ,CASE WHEN data_type = 'NUMBER' THEN TO_CHAR(utl_raw.cast_TO_NUMBER(low_value))
        WHEN data_type IN ('VARCHAR2', 'CHAR') THEN SUBSTR(to_char(utl_raw.cast_to_varchar2(low_value)),1,32)
        WHEN data_type IN ('NVARCHAR2','NCHAR') THEN SUBSTR(to_char(utl_raw.cast_to_nvarchar2(low_value)),1,32)
        WHEN data_type = 'BINARY_DOUBLE' THEN TO_CHAR(utl_raw.cast_to_binary_double(low_value))
        WHEN data_type = 'BINARY_FLOAT' THEN TO_CHAR(utl_raw.cast_to_binary_float(low_value))
        WHEN data_type = 'DATE' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(low_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(low_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,13,2),'XX')-1,'00')))
        WHEN data_type LIKE 'TIMESTAMP%' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(low_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(low_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(low_value,13,2),'XX')-1,'00'))||'.'||
                    TO_NUMBER(SUBSTR(low_value,15,8),'XXXXXXXX'))
       END low_value_translated,
       CASE WHEN data_type = 'NUMBER' THEN TO_CHAR(utl_raw.cast_TO_NUMBER(high_value))
        WHEN data_type IN ('VARCHAR2', 'CHAR') THEN SUBSTR(to_char(utl_raw.cast_to_varchar2(high_value)),1,32)
        WHEN data_type IN ('NVARCHAR2','NCHAR') THEN SUBSTR(to_char(utl_raw.cast_to_nvarchar2(high_value)),1,32)
        WHEN data_type = 'BINARY_DOUBLE' THEN TO_CHAR(utl_raw.cast_to_binary_double(high_value))
        WHEN data_type = 'BINARY_FLOAT' THEN TO_CHAR(utl_raw.cast_to_binary_float(high_value))
        WHEN data_type = 'DATE' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(high_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(high_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,13,2),'XX')-1,'00')))
        WHEN data_type LIKE 'TIMESTAMP%' THEN rtrim(
                    LTRIM(TO_CHAR(100*(TO_NUMBER(SUBSTR(high_value,1,2) ,'XX')-100) + (TO_NUMBER(SUBSTR(high_value,3,2) ,'XX')-100),'0000'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,5,2) ,'XX')  ,'00'))||'-'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,7,2) ,'XX')  ,'00'))||'/'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,9,2) ,'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,11,2),'XX')-1,'00'))||':'||
                    LTRIM(TO_CHAR(     TO_NUMBER(SUBSTR(high_value,13,2),'XX')-1,'00'))||'.'||
                    TO_NUMBER(SUBSTR(high_value,15,8),'XXXXXXXX'))
        END high_value_translated
  FROM dba_tab_cols a,
       dba_tables c  -- this is to filter out views
 WHERE (a.owner, a.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND a.owner = c.owner
   AND a.table_name = c.table_name
 ORDER BY a.owner, a.table_name, a.column_id

17:13:42 col:3of5.

17:13:42 col:3of5 "00606_sqld360_323688_17vjd1aast5q7_3a_64_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:44 col:3of5 "Objects"
17:13:44 Columns Usage

SELECT o.object_name, c.column_name, cu.*
  FROM sys.col_usage$ cu,
       dba_objects o,
       dba_tab_cols c
 WHERE cu.obj# = o.object_id
   AND o.owner = c.owner
   AND o.object_name = c.table_name
   AND cu.intcol# = c.column_id
   AND o.object_type = 'TABLE'
   AND (o.owner, o.object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY o.object_name, cu.intcol#

17:13:44 col:3of5.

17:13:44 col:3of5 "00607_sqld360_323688_17vjd1aast5q7_3a_65_columns_usage.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:46 col:3of5 "Objects"
17:13:46 Column Stats Extensions

SELECT *
  FROM dba_stat_extensions
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, table_name

17:13:46 col:3of5.

17:13:46 col:3of5 "00608_sqld360_323688_17vjd1aast5q7_3a_66_column_stats_extensions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:47 col:3of5 "Objects"
17:13:47 Histograms

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:47 col:3of5 "Objects"
17:13:47 Top-Frequency histogram on Column T_PRMR.PERF_USR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2449788 * 2449788) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2449788,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2449788 * 2449788)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2449788 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_PRMR'
AND a.column_name = 'PERF_USR'
ORDER BY a.endpoint_number

17:13:47 col:3of5.

17:13:47 col:3of5 "00610_sqld360_323688_17vjd1aast5q7_3a_67_topfrequency_histogram_on_column_tprmrperfusr.html"
17:13:47 col:3of5 "00611_sqld360_323688_17vjd1aast5q7_3a_67_topfrequency_histogram_on_column_tprmrperfusr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:47 col:3of5 "Objects"
17:13:47 Frequency histogram on Column T_USR.CLASSTYPE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 * 1986002) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 * 1986002)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986002 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'CLASSTYPE'
ORDER BY a.endpoint_number

17:13:47 col:3of5.

17:13:48 col:3of5 "00612_sqld360_323688_17vjd1aast5q7_3a_68_frequency_histogram_on_column_tusrclasstype.html"
17:13:48 col:3of5 "00613_sqld360_323688_17vjd1aast5q7_3a_68_frequency_histogram_on_column_tusrclasstype_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:48 col:3of5 "Objects"
17:13:48 Height Balanced histogram on Column T_USR.USR_C4C_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_C4C_ID'
ORDER BY a.endpoint_number

17:13:48 col:3of5.

17:13:48 col:3of5 "00614_sqld360_323688_17vjd1aast5q7_3a_69_height_balanced_histogram_on_column_tusrusrc4cid.html"
17:13:48 col:3of5 "00615_sqld360_323688_17vjd1aast5q7_3a_69_height_balanced_histogram_on_column_tusrusrc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:48 col:3of5 "Objects"
17:13:48 Frequency histogram on Column T_USR.USR_LAS_ACT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT'
ORDER BY a.endpoint_number

17:13:48 col:3of5.

17:13:48 col:3of5 "00616_sqld360_323688_17vjd1aast5q7_3a_70_frequency_histogram_on_column_tusrusrlasact.html"
17:13:48 col:3of5 "00617_sqld360_323688_17vjd1aast5q7_3a_70_frequency_histogram_on_column_tusrusrlasact_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:48 col:3of5 "Objects"
17:13:48 Height Balanced histogram on Column T_USR.USR_LAS_ACT_TIM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT_TIM'
ORDER BY a.endpoint_number

17:13:48 col:3of5.

17:13:48 col:3of5 "00618_sqld360_323688_17vjd1aast5q7_3a_71_height_balanced_histogram_on_column_tusrusrlasacttim.html"
17:13:48 col:3of5 "00619_sqld360_323688_17vjd1aast5q7_3a_71_height_balanced_histogram_on_column_tusrusrlasacttim_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:48 col:3of5 "Objects"
17:13:48 Frequency histogram on Column T_USR.USR_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_OBJ_STT'
ORDER BY a.endpoint_number

17:13:48 col:3of5.

17:13:48 col:3of5 "00620_sqld360_323688_17vjd1aast5q7_3a_72_frequency_histogram_on_column_tusrusrobjstt.html"
17:13:49 col:3of5 "00621_sqld360_323688_17vjd1aast5q7_3a_72_frequency_histogram_on_column_tusrusrobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:49 col:3of5 "Objects"
17:13:49 Frequency histogram on Column T_USR.USR_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:13:49 col:3of5.

17:13:49 col:3of5 "00622_sqld360_323688_17vjd1aast5q7_3a_73_frequency_histogram_on_column_tusrusrlasactby.html"
17:13:49 col:3of5 "00623_sqld360_323688_17vjd1aast5q7_3a_73_frequency_histogram_on_column_tusrusrlasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:49 col:3of5 "Objects"
17:13:49 Height Balanced histogram on Column T_USR.USR_UNIVID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1981511) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1981511)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_UNIVID'
ORDER BY a.endpoint_number

17:13:49 col:3of5.

17:13:49 col:3of5 "00624_sqld360_323688_17vjd1aast5q7_3a_74_height_balanced_histogram_on_column_tusrusrunivid.html"
17:13:49 col:3of5 "00625_sqld360_323688_17vjd1aast5q7_3a_74_height_balanced_histogram_on_column_tusrusrunivid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:49 col:3of5 "Objects"
17:13:49 Height Balanced histogram on Column T_USR.USR_FRSTNAM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_FRSTNAM'
ORDER BY a.endpoint_number

17:13:49 col:3of5.

17:13:49 col:3of5 "00626_sqld360_323688_17vjd1aast5q7_3a_75_height_balanced_histogram_on_column_tusrusrfrstnam.html"
17:13:49 col:3of5 "00627_sqld360_323688_17vjd1aast5q7_3a_75_height_balanced_histogram_on_column_tusrusrfrstnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:49 col:3of5 "Objects"
17:13:49 Height Balanced histogram on Column T_USR.USR_LAS_NAM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_LAS_NAM'
ORDER BY a.endpoint_number

17:13:49 col:3of5.

17:13:50 col:3of5 "00628_sqld360_323688_17vjd1aast5q7_3a_76_height_balanced_histogram_on_column_tusrusrlasnam.html"
17:13:50 col:3of5 "00629_sqld360_323688_17vjd1aast5q7_3a_76_height_balanced_histogram_on_column_tusrusrlasnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:50 col:3of5 "Objects"
17:13:50 Height Balanced histogram on Column T_USR.USR_DT_OF_BRTH

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1077282) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'DATE' = 'DATE' or 'DATE' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'DATE' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1077282)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_DT_OF_BRTH'
ORDER BY a.endpoint_number

17:13:50 col:3of5.

17:13:50 col:3of5 "00630_sqld360_323688_17vjd1aast5q7_3a_77_height_balanced_histogram_on_column_tusrusrdtofbrth.html"
17:13:50 col:3of5 "00631_sqld360_323688_17vjd1aast5q7_3a_77_height_balanced_histogram_on_column_tusrusrdtofbrth_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:50 col:3of5 "Objects"
17:13:50 Frequency histogram on Column T_USR.USR_GNDRCODE

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 * 1097041) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 * 1097041)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1097041 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_GNDRCODE'
ORDER BY a.endpoint_number

17:13:50 col:3of5.

17:13:50 col:3of5 "00632_sqld360_323688_17vjd1aast5q7_3a_78_frequency_histogram_on_column_tusrusrgndrcode.html"
17:13:50 col:3of5 "00633_sqld360_323688_17vjd1aast5q7_3a_78_frequency_histogram_on_column_tusrusrgndrcode_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:50 col:3of5 "Objects"
17:13:50 Height Balanced histogram on Column T_USR.USR_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_ID'
ORDER BY a.endpoint_number

17:13:50 col:3of5.

17:13:50 col:3of5 "00634_sqld360_323688_17vjd1aast5q7_3a_79_height_balanced_histogram_on_column_tusrusrid.html"
17:13:50 col:3of5 "00635_sqld360_323688_17vjd1aast5q7_3a_79_height_balanced_histogram_on_column_tusrusrid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:51 col:3of5 "Objects"
17:13:51 Frequency histogram on Column T_USR.PRV_IS_ADM

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 * 1985667) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 * 1985667)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1985667 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_IS_ADM'
ORDER BY a.endpoint_number

17:13:51 col:3of5.

17:13:51 col:3of5 "00636_sqld360_323688_17vjd1aast5q7_3a_80_frequency_histogram_on_column_tusrprvisadm.html"
17:13:51 col:3of5 "00637_sqld360_323688_17vjd1aast5q7_3a_80_frequency_histogram_on_column_tusrprvisadm_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:51 col:3of5 "Objects"
17:13:51 Frequency histogram on Column T_USR.MBUR_ELBL

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 * 985202) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 * 985202)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985202 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_ELBL'
ORDER BY a.endpoint_number

17:13:51 col:3of5.

17:13:51 col:3of5 "00638_sqld360_323688_17vjd1aast5q7_3a_81_frequency_histogram_on_column_tusrmburelbl.html"
17:13:51 col:3of5 "00639_sqld360_323688_17vjd1aast5q7_3a_81_frequency_histogram_on_column_tusrmburelbl_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:51 col:3of5 "Objects"
17:13:51 Frequency histogram on Column T_USR.MBUR_PMRYINSR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 * 985215) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 * 985215)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 985215 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_PMRYINSR'
ORDER BY a.endpoint_number

17:13:51 col:3of5.

17:13:51 col:3of5 "00640_sqld360_323688_17vjd1aast5q7_3a_82_frequency_histogram_on_column_tusrmburpmryinsr.html"
17:13:51 col:3of5 "00641_sqld360_323688_17vjd1aast5q7_3a_82_frequency_histogram_on_column_tusrmburpmryinsr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:51 col:3of5 "Objects"
17:13:51 Height Balanced histogram on Column T_USR.MBUR_INSCID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_INSCID'
ORDER BY a.endpoint_number

17:13:51 col:3of5.

17:13:51 col:3of5 "00642_sqld360_323688_17vjd1aast5q7_3a_83_height_balanced_histogram_on_column_tusrmburinscid.html"
17:13:51 col:3of5 "00643_sqld360_323688_17vjd1aast5q7_3a_83_height_balanced_histogram_on_column_tusrmburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:52 col:3of5 "Objects"
17:13:52 Frequency histogram on Column T_USR.MBUR_CNFTCNCT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 * 980211) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 * 980211)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 980211 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_CNFTCNCT'
ORDER BY a.endpoint_number

17:13:52 col:3of5.

17:13:52 col:3of5 "00644_sqld360_323688_17vjd1aast5q7_3a_84_frequency_histogram_on_column_tusrmburcnftcnct.html"
17:13:52 col:3of5 "00645_sqld360_323688_17vjd1aast5q7_3a_84_frequency_histogram_on_column_tusrmburcnftcnct_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:52 col:3of5 "Objects"
17:13:52 Frequency histogram on Column T_USR.PAYR_WKLDLMITBY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 * 782) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 * 782)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 782 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_WKLDLMITBY'
ORDER BY a.endpoint_number

17:13:52 col:3of5.

17:13:52 col:3of5 "00646_sqld360_323688_17vjd1aast5q7_3a_85_frequency_histogram_on_column_tusrpayrwkldlmitby.html"
17:13:52 col:3of5 "00647_sqld360_323688_17vjd1aast5q7_3a_85_frequency_histogram_on_column_tusrpayrwkldlmitby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:52 col:3of5 "Objects"
17:13:52 Height Balanced histogram on Column T_USR.PAYR_ID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 785) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 785)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_ID'
ORDER BY a.endpoint_number

17:13:52 col:3of5.

17:13:52 col:3of5 "00648_sqld360_323688_17vjd1aast5q7_3a_86_height_balanced_histogram_on_column_tusrpayrid.html"
17:13:52 col:3of5 "00649_sqld360_323688_17vjd1aast5q7_3a_86_height_balanced_histogram_on_column_tusrpayrid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:52 col:3of5 "Objects"
17:13:52 Frequency histogram on Column T_USR.PRV_PVDRTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 * 209963) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 * 209963)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209963 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_PVDRTYP'
ORDER BY a.endpoint_number

17:13:52 col:3of5.

17:13:52 col:3of5 "00650_sqld360_323688_17vjd1aast5q7_3a_87_frequency_histogram_on_column_tusrprvpvdrtyp.html"
17:13:52 col:3of5 "00651_sqld360_323688_17vjd1aast5q7_3a_87_frequency_histogram_on_column_tusrprvpvdrtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:53 col:3of5 "Objects"
17:13:53 Frequency histogram on Column T_USR.USR_ECTY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 * 654489) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 * 654489)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 654489 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_ECTY'
ORDER BY a.endpoint_number

17:13:53 col:3of5.

17:13:53 col:3of5 "00652_sqld360_323688_17vjd1aast5q7_3a_88_frequency_histogram_on_column_tusrusrecty.html"
17:13:53 col:3of5 "00653_sqld360_323688_17vjd1aast5q7_3a_88_frequency_histogram_on_column_tusrusrecty_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:53 col:3of5 "Objects"
17:13:53 Frequency histogram on Column T_USR.USR_NAM_SFIX

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 * 87833) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 * 87833)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 87833 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_NAM_SFIX'
ORDER BY a.endpoint_number

17:13:53 col:3of5.

17:13:53 col:3of5 "00654_sqld360_323688_17vjd1aast5q7_3a_89_frequency_histogram_on_column_tusrusrnamsfix.html"
17:13:53 col:3of5 "00655_sqld360_323688_17vjd1aast5q7_3a_89_frequency_histogram_on_column_tusrusrnamsfix_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:53 col:3of5 "Objects"
17:13:53 Frequency histogram on Column T_USR.USR_NAM_PRFX

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 * 629770) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 * 629770)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 629770 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_NAM_PRFX'
ORDER BY a.endpoint_number

17:13:53 col:3of5.

17:13:53 col:3of5 "00656_sqld360_323688_17vjd1aast5q7_3a_90_frequency_histogram_on_column_tusrusrnamprfx.html"
17:13:53 col:3of5 "00657_sqld360_323688_17vjd1aast5q7_3a_90_frequency_histogram_on_column_tusrusrnamprfx_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:53 col:3of5 "Objects"
17:13:53 Frequency histogram on Column T_USR.MBUR_RLSPTO_SBCR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 * 983812) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 * 983812)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 983812 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'MBUR_RLSPTO_SBCR'
ORDER BY a.endpoint_number

17:13:53 col:3of5.

17:13:53 col:3of5 "00658_sqld360_323688_17vjd1aast5q7_3a_91_frequency_histogram_on_column_tusrmburrlsptosbcr.html"
17:13:53 col:3of5 "00659_sqld360_323688_17vjd1aast5q7_3a_91_frequency_histogram_on_column_tusrmburrlsptosbcr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:54 col:3of5 "Objects"
17:13:54 Height Balanced histogram on Column T_USR.USR_MRGEMSTR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 419) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 419)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_MRGEMSTR'
ORDER BY a.endpoint_number

17:13:54 col:3of5.

17:13:54 col:3of5 "00660_sqld360_323688_17vjd1aast5q7_3a_92_height_balanced_histogram_on_column_tusrusrmrgemstr.html"
17:13:54 col:3of5 "00661_sqld360_323688_17vjd1aast5q7_3a_92_height_balanced_histogram_on_column_tusrusrmrgemstr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:54 col:3of5 "Objects"
17:13:54 Frequency histogram on Column T_USR.PAYR_BCK1

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 * 155) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 * 155)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 155 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK1'
ORDER BY a.endpoint_number

17:13:54 col:3of5.

17:13:54 col:3of5 "00662_sqld360_323688_17vjd1aast5q7_3a_93_frequency_histogram_on_column_tusrpayrbck1.html"
17:13:54 col:3of5 "00663_sqld360_323688_17vjd1aast5q7_3a_93_frequency_histogram_on_column_tusrpayrbck1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:54 col:3of5 "Objects"
17:13:54 Frequency histogram on Column T_USR.PAYR_SVSR

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 * 380)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 380 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_SVSR'
ORDER BY a.endpoint_number

17:13:54 col:3of5.

17:13:54 col:3of5 "00664_sqld360_323688_17vjd1aast5q7_3a_94_frequency_histogram_on_column_tusrpayrsvsr.html"
17:13:54 col:3of5 "00665_sqld360_323688_17vjd1aast5q7_3a_94_frequency_histogram_on_column_tusrpayrsvsr_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:54 col:3of5 "Objects"
17:13:54 Frequency histogram on Column T_USR.PAYR_BCK2

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 * 15) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 * 15)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 15 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK2'
ORDER BY a.endpoint_number

17:13:54 col:3of5.

17:13:54 col:3of5 "00666_sqld360_323688_17vjd1aast5q7_3a_95_frequency_histogram_on_column_tusrpayrbck2.html"
17:13:54 col:3of5 "00667_sqld360_323688_17vjd1aast5q7_3a_95_frequency_histogram_on_column_tusrpayrbck2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:54 col:3of5 "Objects"
17:13:54 Frequency histogram on Column T_USR.PAYR_BCK3

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 * 4) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 * 4)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 4 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PAYR_BCK3'
ORDER BY a.endpoint_number

17:13:54 col:3of5.

17:13:55 col:3of5 "00668_sqld360_323688_17vjd1aast5q7_3a_96_frequency_histogram_on_column_tusrpayrbck3.html"
17:13:55 col:3of5 "00669_sqld360_323688_17vjd1aast5q7_3a_96_frequency_histogram_on_column_tusrpayrbck3_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:55 col:3of5 "Objects"
17:13:55 Frequency histogram on Column T_USR.PRV_SPLRTYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 * 209942) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 * 209942)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 209942 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'PRV_SPLRTYP'
ORDER BY a.endpoint_number

17:13:55 col:3of5.

17:13:55 col:3of5 "00670_sqld360_323688_17vjd1aast5q7_3a_97_frequency_histogram_on_column_tusrprvsplrtyp.html"
17:13:55 col:3of5 "00671_sqld360_323688_17vjd1aast5q7_3a_97_frequency_histogram_on_column_tusrprvsplrtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:55 col:3of5 "Objects"
17:13:55 Height Balanced histogram on Column T_USR.USR_IPGROUPID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193841) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193841)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_IPGROUPID'
ORDER BY a.endpoint_number

17:13:55 col:3of5.

17:13:55 col:3of5 "00672_sqld360_323688_17vjd1aast5q7_3a_98_height_balanced_histogram_on_column_tusrusripgroupid.html"
17:13:55 col:3of5 "00673_sqld360_323688_17vjd1aast5q7_3a_98_height_balanced_histogram_on_column_tusrusripgroupid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:55 col:3of5 "Objects"
17:13:55 Height Balanced histogram on Column T_USR.USR_PRODUCTCATEGORYID

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193576) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 193576)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'USR_PRODUCTCATEGORYID'
ORDER BY a.endpoint_number

17:13:55 col:3of5.

17:13:55 col:3of5 "00674_sqld360_323688_17vjd1aast5q7_3a_99_height_balanced_histogram_on_column_tusrusrproductcategoryid.html"
17:13:55 col:3of5 "00675_sqld360_323688_17vjd1aast5q7_3a_99_height_balanced_histogram_on_column_tusrusrproductcategoryid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:55 col:3of5 "Objects"
17:13:55 Height Balanced histogram on Column T_USR.(UPPER("PRV_PLN_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 209961) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 209961)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00130$'
ORDER BY a.endpoint_number

17:13:55 col:3of5.

17:13:55 col:3of5 "00676_sqld360_323688_17vjd1aast5q7_3a_100_height_balanced_histogram_on_column_tusrupperprvplnid.html"
17:13:56 col:3of5 "00677_sqld360_323688_17vjd1aast5q7_3a_100_height_balanced_histogram_on_column_tusrupperprvplnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:56 col:3of5 "Objects"
17:13:56 Height Balanced histogram on Column T_USR.(UPPER("PRV_UPN_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 177258) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 177258)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00131$'
ORDER BY a.endpoint_number

17:13:56 col:3of5.

17:13:56 col:3of5 "00678_sqld360_323688_17vjd1aast5q7_3a_101_height_balanced_histogram_on_column_tusrupperprvupnid.html"
17:13:56 col:3of5 "00679_sqld360_323688_17vjd1aast5q7_3a_101_height_balanced_histogram_on_column_tusrupperprvupnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:56 col:3of5 "Objects"
17:13:56 Height Balanced histogram on Column T_USR.(UPPER("USR_LAS_NAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983678)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00132$'
ORDER BY a.endpoint_number

17:13:56 col:3of5.

17:13:56 col:3of5 "00680_sqld360_323688_17vjd1aast5q7_3a_102_height_balanced_histogram_on_column_tusrupperusrlasnam.html"
17:13:56 col:3of5 "00681_sqld360_323688_17vjd1aast5q7_3a_102_height_balanced_histogram_on_column_tusrupperusrlasnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:56 col:3of5 "Objects"
17:13:56 Height Balanced histogram on Column T_USR.(UPPER("USR_MDLENAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 790191) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 790191)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00138$'
ORDER BY a.endpoint_number

17:13:56 col:3of5.

17:13:56 col:3of5 "00682_sqld360_323688_17vjd1aast5q7_3a_103_height_balanced_histogram_on_column_tusrupperusrmdlenam.html"
17:13:56 col:3of5 "00683_sqld360_323688_17vjd1aast5q7_3a_103_height_balanced_histogram_on_column_tusrupperusrmdlenam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:57 col:3of5 "Objects"
17:13:57 Height Balanced histogram on Column T_USR.(UPPER("USR_C4C_ID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1983161)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00139$'
ORDER BY a.endpoint_number

17:13:57 col:3of5.

17:13:57 col:3of5 "00684_sqld360_323688_17vjd1aast5q7_3a_104_height_balanced_histogram_on_column_tusrupperusrc4cid.html"
17:13:57 col:3of5 "00685_sqld360_323688_17vjd1aast5q7_3a_104_height_balanced_histogram_on_column_tusrupperusrc4cid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:57 col:3of5 "Objects"
17:13:57 Frequency histogram on Column T_USR.(CASE "USR_OBJ_STT" WHEN 2 THEN 0 ELSE CASE  WHEN "USR_MRGEMSTR" IS NULL THEN 1 ELSE 0 END  END )

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 * 1986147)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 1986147 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00140$'
ORDER BY a.endpoint_number

17:13:57 col:3of5.

17:13:57 col:3of5 "00686_sqld360_323688_17vjd1aast5q7_3a_105_frequency_histogram_on_column_tusrcase_usrobjstt_when_2_then_0_else_case_when_usrmrgemstr_is_null_then_1_else_0_end_end_.html"
17:13:57 col:3of5 "00687_sqld360_323688_17vjd1aast5q7_3a_105_frequency_histogram_on_column_tusrcase_usrobjstt_when_2_then_0_else_case_when_usrmrgemstr_is_null_then_1_else_0_end_end__bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:57 col:3of5 "Objects"
17:13:57 Frequency histogram on Column T_USR.(UPPER("MBUR_MEDICAID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 * 11) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 * 11)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 11 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00159$'
ORDER BY a.endpoint_number

17:13:57 col:3of5.

17:13:57 col:3of5 "00688_sqld360_323688_17vjd1aast5q7_3a_106_frequency_histogram_on_column_tusruppermburmedicaid.html"
17:13:57 col:3of5 "00689_sqld360_323688_17vjd1aast5q7_3a_106_frequency_histogram_on_column_tusruppermburmedicaid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:57 col:3of5 "Objects"
17:13:57 Height Balanced histogram on Column T_USR.(UPPER("MBUR_HICNID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 391) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 391)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00161$'
ORDER BY a.endpoint_number

17:13:57 col:3of5.

17:13:57 col:3of5 "00690_sqld360_323688_17vjd1aast5q7_3a_107_height_balanced_histogram_on_column_tusruppermburhicnid.html"
17:13:58 col:3of5 "00691_sqld360_323688_17vjd1aast5q7_3a_107_height_balanced_histogram_on_column_tusruppermburhicnid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:58 col:3of5 "Objects"
17:13:58 Height Balanced histogram on Column T_USR.(UPPER("MBUR_INSCID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00148$'
ORDER BY a.endpoint_number

17:13:58 col:3of5.

17:13:58 col:3of5 "00692_sqld360_323688_17vjd1aast5q7_3a_108_height_balanced_histogram_on_column_tusruppermburinscid.html"
17:13:58 col:3of5 "00693_sqld360_323688_17vjd1aast5q7_3a_108_height_balanced_histogram_on_column_tusruppermburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:58 col:3of5 "Objects"
17:13:58 Frequency histogram on Column T_USR.(UPPER("PAYR_EMPEID"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 * 34) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 * 34)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 34 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00150$'
ORDER BY a.endpoint_number

17:13:58 col:3of5.

17:13:58 col:3of5 "00694_sqld360_323688_17vjd1aast5q7_3a_109_frequency_histogram_on_column_tusrupperpayrempeid.html"
17:13:58 col:3of5 "00695_sqld360_323688_17vjd1aast5q7_3a_109_frequency_histogram_on_column_tusrupperpayrempeid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:58 col:3of5 "Objects"
17:13:58 Height Balanced histogram on Column T_USR.(UPPER("USR_FRSTNAM"))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 1875787)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00151$'
ORDER BY a.endpoint_number

17:13:58 col:3of5.

17:13:58 col:3of5 "00696_sqld360_323688_17vjd1aast5q7_3a_110_height_balanced_histogram_on_column_tusrupperusrfrstnam.html"
17:13:58 col:3of5 "00697_sqld360_323688_17vjd1aast5q7_3a_110_height_balanced_histogram_on_column_tusrupperusrfrstnam_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:58 col:3of5 "Objects"
17:13:58 Height Balanced histogram on Column T_USR.(UPPER("THH_C4C"."REVERSE_STR"("MBUR_INSCID")))

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'VARCHAR2' = 'DATE' or 'VARCHAR2' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'VARCHAR2' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 * 985194)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 254 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_USR'
AND a.column_name = 'SYS_NC00155$'
ORDER BY a.endpoint_number

17:13:58 col:3of5.

17:13:59 col:3of5 "00698_sqld360_323688_17vjd1aast5q7_3a_111_height_balanced_histogram_on_column_tusrupperthhc4creversestrmburinscid.html"
17:13:59 col:3of5 "00699_sqld360_323688_17vjd1aast5q7_3a_111_height_balanced_histogram_on_column_tusrupperthhc4creversestrmburinscid_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:59 col:3of5 "Objects"
17:13:59 Frequency histogram on Column T_WKFWTSK.WTSK_OBJ_STT

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'WTSK_OBJ_STT'
ORDER BY a.endpoint_number

17:13:59 col:3of5.

17:13:59 col:3of5 "00700_sqld360_323688_17vjd1aast5q7_3a_112_frequency_histogram_on_column_twkfwtskwtskobjstt.html"
17:13:59 col:3of5 "00701_sqld360_323688_17vjd1aast5q7_3a_112_frequency_histogram_on_column_twkfwtskwtskobjstt_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:59 col:3of5 "Objects"
17:13:59 Frequency histogram on Column T_WKFWTSK.WTSK_LAS_ACT_BY

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'WTSK_LAS_ACT_BY'
ORDER BY a.endpoint_number

17:13:59 col:3of5.

17:13:59 col:3of5 "00702_sqld360_323688_17vjd1aast5q7_3a_113_frequency_histogram_on_column_twkfwtskwtsklasactby.html"
17:13:59 col:3of5 "00703_sqld360_323688_17vjd1aast5q7_3a_113_frequency_histogram_on_column_twkfwtskwtsklasactby_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:59 col:3of5 "Objects"
17:13:59 Frequency histogram on Column T_WKFWTSK.WTSK_WKFWTSK_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'WTSK_WKFWTSK_TYP'
ORDER BY a.endpoint_number

17:13:59 col:3of5.

17:13:59 col:3of5 "00704_sqld360_323688_17vjd1aast5q7_3a_114_frequency_histogram_on_column_twkfwtskwtskwkfwtsktyp.html"
17:13:59 col:3of5 "00705_sqld360_323688_17vjd1aast5q7_3a_114_frequency_histogram_on_column_twkfwtskwtskwkfwtsktyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:59 col:3of5 "Objects"
17:13:59 Frequency histogram on Column T_WKFWTSK.WTSK_RFRDOBJ_TYP

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'WTSK_RFRDOBJ_TYP'
ORDER BY a.endpoint_number

17:13:59 col:3of5.

17:13:59 col:3of5 "00706_sqld360_323688_17vjd1aast5q7_3a_115_frequency_histogram_on_column_twkfwtskwtskrfrdobjtyp.html"
17:13:59 col:3of5 "00707_sqld360_323688_17vjd1aast5q7_3a_115_frequency_histogram_on_column_twkfwtskwtskrfrdobjtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:13:59 col:3of5 "Objects"
17:13:59 Frequency histogram on Column T_WKFWTSK.("WTSK_WKFWTSK_TYP","WTSK_RFRDOBJ_TYP")

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'SYS_STS44#WQANV0T_SKJCHK7$CTXZ'
ORDER BY a.endpoint_number

17:13:59 col:3of5.

17:13:59 col:3of5 "00708_sqld360_323688_17vjd1aast5q7_3a_116_frequency_histogram_on_column_twkfwtskwtskwkfwtsktypwtskrfrdobjtyp.html"
17:14:00 col:3of5 "00709_sqld360_323688_17vjd1aast5q7_3a_116_frequency_histogram_on_column_twkfwtskwtskwkfwtsktypwtskrfrdobjtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:00 col:3of5 "Objects"
17:14:00 Frequency histogram on Column T_WKFWTSK.("WTSK_OBJ_STT","WTSK_WKFWTSK_TYP","WTSK_RFRDOBJ_TYP")

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'SYS_STSWXAJ7KXA#ZW6BV#EJG$V82B'
ORDER BY a.endpoint_number

17:14:00 col:3of5.

17:14:00 col:3of5 "00710_sqld360_323688_17vjd1aast5q7_3a_117_frequency_histogram_on_column_twkfwtskwtskobjsttwtskwkfwtsktypwtskrfrdobjtyp.html"
17:14:00 col:3of5 "00711_sqld360_323688_17vjd1aast5q7_3a_117_frequency_histogram_on_column_twkfwtskwtskobjsttwtskwkfwtsktypwtskrfrdobjtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:00 col:3of5 "Objects"
17:14:00 Frequency histogram on Column T_WKFWTSK.("WTSK_OBJ_STT","WTSK_RFRDOBJ_TYP")

SELECT /*+ NO_MERGE */
CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END approximate_value,
round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304) rows_per_bucket,
trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304,6) selectivity,
'ApproxValue: '||CASE WHEN endpoint_actual_value IS NOT NULL THEN REPLACE(endpoint_actual_value, '''', '')
WHEN endpoint_actual_value IS NULL THEN
CASE WHEN 'NUMBER' = 'DATE' or 'NUMBER' LIKE 'TIMESTAMP%' THEN
TO_CHAR(TO_DATE(TO_CHAR(TRUNC(endpoint_value)), 'J') + (endpoint_value - TRUNC(endpoint_value)),'SYYYY/MM/DD HH24:MI:SS')
WHEN 'NUMBER' IN ('NUMBER', 'FLOAT', 'BINARY_FLOAT') THEN
TO_CHAR(endpoint_value)
ELSE
UTL_RAW.CAST_TO_VARCHAR2(SUBSTR(LPAD(TO_CHAR(endpoint_value,'fmxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'),30,'0'),1,12))
END
END||' NumRows: '||round((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 * 2301304)||' Sel: '||trunc((a.endpoint_number - lag(a.endpoint_number,1,0) over (order by a.endpoint_number)) / 2301304 , 6) chart_text
FROM dba_tab_histograms a
WHERE a.owner = 'THH_C4C'
AND a.table_name = 'T_WKFWTSK'
AND a.column_name = 'SYS_STSPU#KS7#8_N#_L806ZZX3SY1'
ORDER BY a.endpoint_number

17:14:00 col:3of5.

17:14:00 col:3of5 "00712_sqld360_323688_17vjd1aast5q7_3a_118_frequency_histogram_on_column_twkfwtskwtskobjsttwtskrfrdobjtyp.html"
17:14:00 col:3of5 "00713_sqld360_323688_17vjd1aast5q7_3a_118_frequency_histogram_on_column_twkfwtskwtskobjsttwtskrfrdobjtyp_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:00 col:3of5 "Objects"
17:14:00 Histograms on long strings

SELECT /*+ NO_MERGE */
       owner, table_name, column_name, data_type, data_length, num_buckets, avg_col_len, char_length
  FROM dba_tab_cols
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND num_buckets <= 253
   AND histogram <> 'NONE'
   --AND char_length > 32
   --AND data_length > 32
   AND char_length > 64
   AND data_length > 64
   AND avg_col_len > 6
 ORDER BY owner, table_name, column_id

17:14:00 col:3of5.

17:14:00 col:3of5 "00714_sqld360_323688_17vjd1aast5q7_3a_119_histograms_on_long_strings.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:00 col:3of5 "Objects"
17:14:00 Constraints

SELECT /*+ NO_MERGE */
       *
  FROM dba_constraints
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, table_name, constraint_type

17:14:00 col:3of5.

17:14:00 col:3of5 "00715_sqld360_323688_17vjd1aast5q7_3a_69_constraints.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:03 col:3of5 "Objects"
17:14:03 Views

SELECT /*+ NO_MERGE */
       *
  FROM dba_views
 WHERE (owner, view_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, view_name

17:14:03 col:3of5.

17:14:03 col:3of5 "00716_sqld360_323688_17vjd1aast5q7_3a_70_views.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:07 col:3of5 "Objects"
17:14:07 LOBs

SELECT /*+ NO_MERGE */
       *
  FROM dba_lobs
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, table_name

17:14:07 col:3of5.

17:14:07 col:3of5 "00717_sqld360_323688_17vjd1aast5q7_3a_71_lobs.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:07 col:3of5 "Objects"
17:14:07 Materialized Views

SELECT /*+ NO_MERGE */
       *
  FROM dba_mviews
 WHERE (owner, mview_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, mview_name

17:14:07 col:3of5.

17:14:07 col:3of5 "00718_sqld360_323688_17vjd1aast5q7_3a_72_materialized_views.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:07 col:3of5 "Objects"
17:14:07 Clusters

SELECT /*+ NO_MERGE */
       *
  FROM dba_clusters
 WHERE cluster_name IN (select cluster_name
                          from dba_tables
                         where (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
                           and cluster_name is not null)
 ORDER BY owner, cluster_name

17:14:07 col:3of5.

17:14:07 col:3of5 "00719_sqld360_323688_17vjd1aast5q7_3a_73_clusters.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:07 col:3of5 "Objects"
17:14:07 Partition Key Columns

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_key_columns
 WHERE (owner, name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, name, column_position

17:14:07 col:3of5.

17:14:07 col:3of5 "00720_sqld360_323688_17vjd1aast5q7_3a_74_partition_key_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:08 col:3of5 "Objects"
17:14:08 Unindexed Partition Key Columns

with k as (
select 	k.*, 'Partition' part_level
from 	dba_part_key_columns k
union all
select 	k.*, 'Subpartition'
from 	dba_subpart_key_columns k
)
SELECT  /*+ NO_MERGE */
	i.table_owner, i.table_name
, 	i.owner index_owner
, 	i.index_name
, 	i.index_type
,	'Partition' part_level
,	p.locality
,	p.partitioning_type
,	p.partition_count
, 	k.column_position part_column_position
,	k.column_name part_column_name
,	(	SELECT  LISTAGG(NVL(ie.extension,ic.column_name),',') WITHIN GROUP (ORDER BY ic.column_position)
		FROM	dba_ind_columns ic
			LEFT OUTER JOIN dba_stat_extensions ie
			ON ie.owner = ic.table_owner
			AND ie.table_name = ic.table_name
			AND ie.extension_name = ic.column_name
		where	i.owner = ic.index_owner
		and 	i.index_name = ic.index_name
		and	i.table_owner = ic.table_owner
		and	i.table_name = ic.table_name
	) column_list
from	dba_indexes i
,	dba_part_indexes p
,	k
where	i.index_type NOT IN('LOB')
AND     k.owner = i.owner
and	k.name = i.index_name
and 	k.object_type = 'INDEX'
and	i.partitioned = 'YES'
and	p.owner = i.owner
and	p.index_name = i.index_name
and	p.table_name = i.table_name
and     (i.table_owner, i.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
and not exists (
	select 'x'
	from 	dba_ind_columns ic
	where	i.owner = ic.index_owner
	and 	i.index_name = ic.index_name
	and	i.table_owner = ic.table_owner
	and	i.table_name = ic.table_name
	and	ic.column_name = k.column_name)
order by 1,2,3,4,5,6

17:14:08 col:3of5.

17:14:08 col:3of5 "00721_sqld360_323688_17vjd1aast5q7_3a_75_unindexed_partition_key_columns.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:08 col:3of5 "Objects"
17:14:08 Table Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_tables
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, table_name

17:14:08 col:3of5.

17:14:08 col:3of5 "00722_sqld360_323688_17vjd1aast5q7_3a_76_table_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:08 col:3of5 "Objects"
17:14:08 Table Partitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_partitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, partition_position

17:14:08 col:3of5.

17:14:08 col:3of5 "00723_sqld360_323688_17vjd1aast5q7_3a_77_table_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:08 col:3of5 "Objects"
17:14:08 Index Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_indexes
 WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY owner, index_name

17:14:08 col:3of5.

17:14:08 col:3of5 "00724_sqld360_323688_17vjd1aast5q7_3a_78_index_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:08 col:3of5 "Objects"
17:14:08 Index Partitions

SELECT /*+ NO_MERGE */
       a.*
  FROM dba_ind_partitions a,
       dba_indexes b
 WHERE (b.table_owner, b.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND a.index_owner = b.owner
   AND a.index_name = b.index_name
 ORDER BY a.index_owner, a.index_name, a.partition_position

17:14:08 col:3of5.

17:14:09 col:3of5 "00725_sqld360_323688_17vjd1aast5q7_3a_79_index_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:09 col:3of5 "Objects"
17:14:09 LOB Partition Info

SELECT /*+ NO_MERGE */
       *
  FROM dba_part_lobs
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, column_name

17:14:09 col:3of5.

17:14:09 col:3of5 "00726_sqld360_323688_17vjd1aast5q7_3a_80_lob_partition_info.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:09 col:3of5 "Objects"
17:14:09 LOB Partitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_lob_partitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, partition_position

17:14:09 col:3of5.

17:14:09 col:3of5 "00727_sqld360_323688_17vjd1aast5q7_3a_81_lob_partitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:10 col:3of5 "Objects"
17:14:10 Partitions Columns

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:10 col:3of5 "Objects"
17:14:10 Table Subpartitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_subpartitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, subpartition_position

17:14:10 col:3of5.

17:14:10 col:3of5 "00729_sqld360_323688_17vjd1aast5q7_3a_82_table_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:10 col:3of5 "Objects"
17:14:10 Index Subpartitions

SELECT /*+ NO_MERGE */
       a.*
  FROM dba_ind_subpartitions a,
       dba_indexes b
 WHERE (b.table_owner, b.table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND a.index_owner = b.owner
   AND a.index_name = b.index_name
 ORDER BY a.index_owner, a.index_name, a.subpartition_position

17:14:10 col:3of5.

17:14:10 col:3of5 "00730_sqld360_323688_17vjd1aast5q7_3a_84_index_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:11 col:3of5 "Objects"
17:14:11 LOB Subpartitions

SELECT /*+ NO_MERGE */
       *
  FROM dba_lob_subpartitions
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, subpartition_position

17:14:11 col:3of5.

17:14:11 col:3of5 "00731_sqld360_323688_17vjd1aast5q7_3a_85_lob_subpartitions.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:11 col:3of5 "Objects"
17:14:11 Table Modifications

SELECT /*+ NO_MERGE */
       *
  FROM dba_tab_modifications
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, partition_name, subpartition_name

17:14:11 col:3of5.

17:14:11 col:3of5 "00732_sqld360_323688_17vjd1aast5q7_3a_86_table_modifications.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:11 col:3of5 "Objects"
17:14:11 Table Stats Preferences

SELECT /*+ NO_MERGE */
       o.owner, o.object_name, pref.*
  FROM sys.optstat_user_prefs$ pref,
       dba_objects o
 WHERE pref.obj# = o.object_id
   AND o.object_type = 'TABLE'
   AND (o.owner, o.object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY o.owner, o.object_name, pref.pname

17:14:11 col:3of5.

17:14:11 col:3of5 "00733_sqld360_323688_17vjd1aast5q7_3a_87_table_stats_preferences.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:11 col:3of5 "Objects"
17:14:11 Triggers

SELECT /*+ NO_MERGE */
       *
  FROM dba_triggers
 WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                       FROM plan_table
                                      WHERE statement_id = 'LIST_OF_TABLES'
                                        AND remarks = '17vjd1aast5q7')
 ORDER BY table_owner, table_name, trigger_name

17:14:11 col:3of5.

17:14:11 col:3of5 "00734_sqld360_323688_17vjd1aast5q7_3a_88_triggers.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:12 col:3of5 "Objects"
17:14:12 Policies

SELECT /*+ NO_MERGE */
       *
  FROM dba_policies
 WHERE (object_owner, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                         FROM plan_table
                                        WHERE statement_id = 'LIST_OF_TABLES'
                                          AND remarks = '17vjd1aast5q7')
 ORDER BY object_owner, object_name, policy_group, policy_name

17:14:12 col:3of5.

17:14:12 col:3of5 "00735_sqld360_323688_17vjd1aast5q7_3a_89_policies.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:12 col:3of5 "Objects"
17:14:12 Audit Policies

SELECT /*+ NO_MERGE */
       *
  FROM dba_audit_policies
 WHERE (object_schema, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                          FROM plan_table
                                         WHERE statement_id = 'LIST_OF_TABLES'
                                           AND remarks = '17vjd1aast5q7')
 ORDER BY object_schema, object_name, policy_owner, policy_name

17:14:12 col:3of5.

17:14:12 col:3of5 "00736_sqld360_323688_17vjd1aast5q7_3a_90_audit_policies.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:12 col:3of5 "Objects"
17:14:12 Segments

SELECT /*+ NO_MERGE */ *
  FROM dba_segments
 WHERE (owner, segment_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                   FROM plan_table
                                  WHERE statement_id = 'LIST_OF_TABLES'
                                    AND remarks = '17vjd1aast5q7'
                                  UNION ALL
                                 SELECT owner, index_name
                                   FROM dba_indexes
                                  WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                        FROM plan_table
                                                                       WHERE statement_id = 'LIST_OF_TABLES'
                                                                         AND remarks = '17vjd1aast5q7')
                                  UNION ALL
                                 SELECT owner, segment_name
                                   FROM dba_lobs
                                  WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                  FROM plan_table
                                                                 WHERE statement_id = 'LIST_OF_TABLES'
                                                                   AND remarks = '17vjd1aast5q7')
                                 )
 ORDER BY owner, segment_name, segment_type DESC

17:14:12 col:3of5.

17:14:12 col:3of5 "00737_sqld360_323688_17vjd1aast5q7_3a_91_segments.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:13 col:3of5 "Objects"
17:14:13 Objects

SELECT /*+ NO_MERGE */ *
  FROM dba_objects
 WHERE (owner, object_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                   FROM plan_table
                                  WHERE statement_id = 'LIST_OF_TABLES'
                                    AND remarks = '17vjd1aast5q7'
                                  UNION ALL
                                 SELECT owner, index_name
                                   FROM dba_indexes
                                  WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                        FROM plan_table
                                                                       WHERE statement_id = 'LIST_OF_TABLES'
                                                                         AND remarks = '17vjd1aast5q7')
                                  UNION ALL
                                 SELECT owner, segment_name
                                   FROM dba_lobs
                                  WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                  FROM plan_table
                                                                 WHERE statement_id = 'LIST_OF_TABLES'
                                                                   AND remarks = '17vjd1aast5q7')
                                 )
 ORDER BY owner, object_name, object_type DESC

17:14:13 col:3of5.

17:14:13 col:3of5 "00738_sqld360_323688_17vjd1aast5q7_3a_92_objects.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:14 col:3of5 "Objects"
17:14:14 Tablespaces

SELECT /*+ NO_MERGE */ *
  FROM dba_tablespaces
 WHERE tablespace_name IN (SELECT /*+ UNNEST */ tablespace_name
                             FROM dba_segments
                            WHERE (owner, segment_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                              FROM plan_table
                                                             WHERE statement_id = 'LIST_OF_TABLES'
                                                               AND remarks = '17vjd1aast5q7'
                                                             UNION ALL
                                                            SELECT owner, index_name
                                                              FROM dba_indexes
                                                             WHERE (table_owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                                                   FROM plan_table
                                                                                                  WHERE statement_id = 'LIST_OF_TABLES'
                                                                                                    AND remarks = '17vjd1aast5q7')
                                                             UNION ALL
                                                            SELECT owner, segment_name
                                                              FROM dba_lobs
                                                             WHERE (owner, table_name) IN (SELECT /*+ UNNEST */ object_owner, object_name
                                                                                             FROM plan_table
                                                                                            WHERE statement_id = 'LIST_OF_TABLES'
                                                                                              AND remarks = '17vjd1aast5q7')
                                                            )
                           )
 ORDER BY tablespace_name

17:14:14 col:3of5.

17:14:14 col:3of5 "00739_sqld360_323688_17vjd1aast5q7_3a_93_tablespaces.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:15 col:3of5 "Statistics History"
17:14:15 System Statistics History

SELECT /*+ NO_MERGE */
       h.*
  FROM sys.wri$_optstat_aux_history h
 ORDER BY h.savtime desc, sname

17:14:15 col:3of5.

17:14:15 col:3of5 "00740_sqld360_323688_17vjd1aast5q7_3c_94_system_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:15 col:3of5 "Statistics History"
17:14:15 Tables Statistics History

SELECT /*+ NO_MERGE */
       o.owner owner,
       o.object_name table_name,
       TRUNC((h.rowcnt - LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 rowcnt_change_perc,
       TRUNC((h.blkcnt - LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blkcnt_change_perc,
       h.*
  FROM sys.wri$_optstat_tab_history h,
       dba_objects o
 WHERE (o.owner, o.object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND o.object_type = 'TABLE'
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY o.owner, o.object_name, h.savtime desc

17:14:15 col:3of5.

17:14:15 col:3of5 "00741_sqld360_323688_17vjd1aast5q7_3c_95_tables_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:15 col:3of5 "Statistics History"
17:14:15 Indexes Statistics History

SELECT /*+ NO_MERGE */
       i.owner,
       i.table_name,
       i.index_name,
       TRUNC((h.blevel - LAG(h.blevel,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blevel,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blevel_change_perc,
       TRUNC((h.leafcnt - LAG(h.leafcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.leafcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 leafcnt_change_perc,
       TRUNC((h.clufac - LAG(h.clufac,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.clufac,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 clufac_change_perc,
       h.*
  FROM sys.wri$_optstat_ind_history h,
       dba_objects o,
       dba_indexes i
 WHERE (i.table_owner, i.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND i.index_name = o.object_name
   AND i.owner = o.owner
   AND o.object_type = 'INDEX'
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY i.table_owner, i.table_name, i.index_name, h.savtime desc

17:14:15 col:3of5.

17:14:15 col:3of5 "00742_sqld360_323688_17vjd1aast5q7_3c_96_indexes_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:17 col:3of5 "Statistics History"
17:14:17 Columns Statistics History

SELECT /*+ NO_MERGE */
       c.owner,
       c.table_name,
       c.column_name,
       TRUNC((h.null_cnt - LAG(h.null_cnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name ORDER BY h.savtime)) / NULLIF(LAG(h.null_cnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name  ORDER BY h.savtime),0),2)*100 nullcnt_change_perc,
       TRUNC((h.distcnt - LAG(h.distcnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name ORDER BY h.savtime)) / NULLIF(LAG(h.distcnt,1,NULL) OVER (PARTITION BY h.obj#, c.column_name  ORDER BY h.savtime),0),2)*100 distcnt_change_perc,
       CASE WHEN h.flags > 64 THEN 'YES' ELSE 'NO' END had_histogram,
       h.*
  FROM sys.wri$_optstat_histhead_history h,
       dba_objects o,
       dba_tab_cols c
 WHERE (c.owner, c.table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
   AND c.table_name = o.object_name
   AND c.owner = o.owner
   AND o.object_type = 'TABLE'
   AND o.object_id = h.obj#
   AND c.column_id = h.intcol#
   AND 'Y' = 'Y'
 ORDER BY c.owner, c.table_name, c.column_id, h.savtime desc

17:14:17 col:3of5.

17:14:17 col:3of5 "00743_sqld360_323688_17vjd1aast5q7_3c_97_columns_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:19 col:3of5 "Statistics History"
17:14:19 Partitions Statistics History

SELECT /*+ NO_MERGE */
        p.table_owner,
        p.table_name,
        p.partition_name,
        p.partition_position,
        TRUNC((h.rowcnt - LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.rowcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 rowcnt_change_perc,
        TRUNC((h.blkcnt - LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime)) / NULLIF(LAG(h.blkcnt,1,NULL) OVER (PARTITION BY h.obj# ORDER BY h.savtime),0),2)*100 blkcnt_change_perc,
        h.*
  FROM (SELECT table_owner, table_name, partition_name, partition_position,
               ROW_NUMBER() OVER (ORDER BY partition_position) rn, COUNT(*) OVER () num_part
          FROM dba_tab_partitions
         WHERE (table_owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
       ) p,
       dba_objects o,
       sys.wri$_optstat_tab_history h
 WHERE (p.rn <= 10 OR p.rn >= num_part-10)
   AND o.object_type = 'TABLE PARTITION'
   AND p.table_owner = o.owner
   AND p.table_name = o.object_name
   AND p.partition_name = o.subobject_name
   AND o.object_id = h.obj#
   AND 'Y' = 'Y'
 ORDER BY p.table_owner, p.table_name, p.partition_name, p.partition_position DESC, h.savtime desc

17:14:19 col:3of5.

17:14:19 col:3of5 "00744_sqld360_323688_17vjd1aast5q7_3c_98_partitions_statistics_history.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "In-Memory"
17:14:20 In-Memory Area

SELECT /*+ NO_MERGE */
       *
  FROM gv$inmemory_area
 ORDER BY inst_id, pool

17:14:20 col:3of5.

17:14:20 col:3of5 "00745_sqld360_323688_17vjd1aast5q7_3d_99_inmemory_area.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "In-Memory"
17:14:20 In-Memory Segments

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_segments
 WHERE (owner, segment_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY inst_id, owner, segment_name, partition_name, segment_type

17:14:20 col:3of5.

17:14:20 col:3of5 "00746_sqld360_323688_17vjd1aast5q7_3d_100_inmemory_segments.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "In-Memory"
17:14:20 In-Memory Header

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_header
 WHERE objd IN (SELECT object_id
                 FROM dba_objects
                WHERE (owner, object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7'))
 ORDER BY objd, inst_id

17:14:20 col:3of5.

17:14:20 col:3of5 "00747_sqld360_323688_17vjd1aast5q7_3d_101_inmemory_header.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "In-Memory"
17:14:20 In-Memory Column Level

SELECT /*+ NO_MERGE */
       *
  FROM gv$im_column_level
 WHERE (owner, table_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY inst_id, owner, table_name, segment_column_id

17:14:20 col:3of5.

17:14:20 col:3of5 "00748_sqld360_323688_17vjd1aast5q7_3d_102_inmemory_column_level.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "Big Table Caching"
17:14:20 BT Scan Cache

SELECT /*+ NO_MERGE */
       *
  FROM gv$bt_scan_cache
 ORDER BY inst_id

17:14:20 col:3of5.

17:14:20 col:3of5 "00749_sqld360_323688_17vjd1aast5q7_3e_103_bt_scan_cache.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "Big Table Caching"
17:14:20 BT Scan Objects Temps

SELECT /*+ NO_MERGE */
       o.owner, o.object_name, o.subobject_name,
       bsc.*
  FROM gv$bt_scan_obj_temps bsc,
       dba_objects o
 WHERE bsc.dataobj# = o.data_object_id
   AND (o.owner, o.object_name) IN (SELECT object_owner, object_name FROM plan_table WHERE statement_id = 'LIST_OF_TABLES' AND remarks = '17vjd1aast5q7')
 ORDER BY bsc.inst_id, o.owner, o.object_name, o.subobject_name

17:14:20 col:3of5.

17:14:20 col:3of5 "00750_sqld360_323688_17vjd1aast5q7_3e_104_bt_scan_objects_temps.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:20 col:3of5 "Metadata"
17:14:20 Metadata script
Completed: 17:14:28

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:28 col:4of5 "System Impact"
17:14:28 SQL Execute Time for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = a.instance_number
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:28 col:4of5.

17:14:28 col:4of5 "00752_sqld360_323688_17vjd1aast5q7_4a_106_sql_execute_time_for_cluster.html"
17:14:28 col:4of5 "00753_sqld360_323688_17vjd1aast5q7_4a_106_sql_execute_time_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:29 col:4of5 "System Impact"
17:14:29 SQL Execute Time for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = 1
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:29 col:4of5.

17:14:29 col:4of5 "00754_sqld360_323688_17vjd1aast5q7_4a_107_sql_execute_time_for_instance_1.html"
17:14:29 col:4of5 "00755_sqld360_323688_17vjd1aast5q7_4a_107_sql_execute_time_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:29 col:4of5 "System Impact"
17:14:29 SQL Execute Time for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.sql_val,0))/1000000 sql_elapsed,
       SUM(a.system_val)/1000000 system_elapsed,
       TRUNC((SUM(NVL(b.sql_val,0))/SUM(a.system_val))*100,3) sql_impact_percentage,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, value-LAG(value,1) OVER (PARTITION BY instance_number ORDER BY snap_id ) system_val
          FROM dba_hist_sys_time_model
         WHERE stat_name LIKE 'sql execute%') a,
       (SELECT snap_id, instance_number, SUM(elapsed_time_delta) sql_val
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7'
         GROUP BY snap_id, instance_number) b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) c
 WHERE c.snap_id = b.snap_id(+)
   AND c.instance_number = b.instance_number(+)
   AND a.instance_number = 2
   AND a.snap_id(+) = c.snap_id
   AND 'Y' = 'Y'
   AND a.instance_number(+) = c.instance_number
   AND a.system_val(+) > 0 -- skip the first snapshot where we can''t compute DELTA
                        -- and those where the value would be negative (restart in between)
 GROUP BY
       TO_CHAR(c.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(c.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:29 col:4of5.

17:14:29 col:4of5 "00756_sqld360_323688_17vjd1aast5q7_4a_108_sql_execute_time_for_instance_2.html"
17:14:29 col:4of5 "00757_sqld360_323688_17vjd1aast5q7_4a_108_sql_execute_time_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:29 col:4of5 "System Impact"
17:14:29 Peak Demand for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  position
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:14:29 col:4of5.

17:14:29 col:4of5 "00758_sqld360_323688_17vjd1aast5q7_4a_109_peak_demand_for_recent_executions_for_cluster.html"
17:14:29 col:4of5 "00759_sqld360_323688_17vjd1aast5q7_4a_109_peak_demand_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:29 col:4of5 "System Impact"
17:14:29 Peak Demand for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  1
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:14:29 col:4of5.

17:14:29 col:4of5 "00760_sqld360_323688_17vjd1aast5q7_4a_110_peak_demand_for_recent_executions_for_instance_1.html"
17:14:30 col:4of5 "00761_sqld360_323688_17vjd1aast5q7_4a_110_peak_demand_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:30 col:4of5 "System Impact"
17:14:30 Peak Demand for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(end_time, 'YYYY-MM-DD HH24:MI') end_time,
       num_sessions_min,
       num_sessions_oncpu_min,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT TRUNC(end_time,'mi') end_time,
               MAX(num_sessions) num_sessions_min,
               MAX(num_sessions_oncpu) num_sessions_oncpu_min
          FROM (SELECT timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  2
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY timestamp)
         GROUP BY TRUNC(end_time,'mi'))
 ORDER BY 3

17:14:30 col:4of5.

17:14:30 col:4of5 "00762_sqld360_323688_17vjd1aast5q7_4a_111_peak_demand_for_recent_executions_for_instance_2.html"
17:14:30 col:4of5 "00763_sqld360_323688_17vjd1aast5q7_4a_111_peak_demand_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:30 col:4of5 "System Impact"
17:14:30 Peak Demand for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  position
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:30 col:4of5.

17:14:30 col:4of5 "00764_sqld360_323688_17vjd1aast5q7_4a_112_peak_demand_for_historical_executions_for_cluster.html"
17:14:30 col:4of5 "00765_sqld360_323688_17vjd1aast5q7_4a_112_peak_demand_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:30 col:4of5 "System Impact"
17:14:30 Peak Demand for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  1
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:30 col:4of5.

17:14:30 col:4of5 "00766_sqld360_323688_17vjd1aast5q7_4a_113_peak_demand_for_historical_executions_for_instance_1.html"
17:14:30 col:4of5 "00767_sqld360_323688_17vjd1aast5q7_4a_113_peak_demand_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:31 col:4of5 "System Impact"
17:14:31 Peak Demand for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(num_sessions_hour,0) num_sessions_hour,
       NVL(num_sessions_oncpu_hour,0) num_sessions_oncpu_hour,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(num_sessions) num_sessions_hour,
               MAX(num_sessions_oncpu) num_sessions_oncpu_hour
          FROM (SELECT cardinality snap_id,
                       timestamp end_time,
                       COUNT(position||'-'||cpu_cost||'-'||io_cost) num_sessions,
                       COUNT(CASE WHEN object_node = 'ON CPU' THEN position||'-'||cpu_cost||'-'||io_cost ELSE NULL END) num_sessions_oncpu
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                   AND position =  2
                   AND remarks = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                 GROUP BY cardinality, timestamp)
         GROUP BY snap_id) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:31 col:4of5.

17:14:31 col:4of5 "00768_sqld360_323688_17vjd1aast5q7_4a_114_peak_demand_for_historical_executions_for_instance_2.html"
17:14:31 col:4of5 "00769_sqld360_323688_17vjd1aast5q7_4a_114_peak_demand_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:31 col:4of5 "System Impact"
17:14:31 Distinct number of sessions executing for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  position
           AND remarks = '17vjd1aast5q7'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:31 col:4of5.

17:14:31 col:4of5 "00770_sqld360_323688_17vjd1aast5q7_4a_115_distinct_number_of_sessions_executing_for_cluster.html"
17:14:31 col:4of5 "00771_sqld360_323688_17vjd1aast5q7_4a_115_distinct_number_of_sessions_executing_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:32 col:4of5 "System Impact"
17:14:32 Distinct number of sessions executing for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  1
           AND remarks = '17vjd1aast5q7'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:32 col:4of5.

17:14:32 col:4of5 "00772_sqld360_323688_17vjd1aast5q7_4a_116_distinct_number_of_sessions_executing_for_instance_1.html"
17:14:32 col:4of5 "00773_sqld360_323688_17vjd1aast5q7_4a_116_distinct_number_of_sessions_executing_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:32 col:4of5 "System Impact"
17:14:32 Distinct number of sessions executing for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(unique_sessions,0) unique_sessions,
       0 dummy_02,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT cardinality snap_id,
               COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) unique_sessions
          FROM plan_table
         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  2
           AND remarks = '17vjd1aast5q7'
           AND 'Y' = 'Y'
         GROUP BY cardinality) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:32 col:4of5.

17:14:32 col:4of5 "00774_sqld360_323688_17vjd1aast5q7_4a_117_distinct_number_of_sessions_executing_for_instance_2.html"
17:14:32 col:4of5 "00775_sqld360_323688_17vjd1aast5q7_4a_117_distinct_number_of_sessions_executing_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:32 col:4of5 "System Impact"
17:14:32 Total Buffer Gets for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:32 col:4of5.

17:14:32 col:4of5 "00776_sqld360_323688_17vjd1aast5q7_4a_118_total_buffer_gets_for_cluster.html"
17:14:33 col:4of5 "00777_sqld360_323688_17vjd1aast5q7_4a_118_total_buffer_gets_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:33 col:4of5 "System Impact"
17:14:33 Total Buffer Gets for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:33 col:4of5.

17:14:33 col:4of5 "00778_sqld360_323688_17vjd1aast5q7_4a_119_total_buffer_gets_for_instance_1.html"
17:14:33 col:4of5 "00779_sqld360_323688_17vjd1aast5q7_4a_119_total_buffer_gets_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:33 col:4of5 "System Impact"
17:14:33 Total Buffer Gets for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.buffer_gets_delta),0) buffer_gets,
       NVL(SUM(b.disk_reads_delta),0) physical_reads,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, buffer_gets_delta, disk_reads_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:33 col:4of5.

17:14:33 col:4of5 "00780_sqld360_323688_17vjd1aast5q7_4a_120_total_buffer_gets_for_instance_2.html"
17:14:33 col:4of5 "00781_sqld360_323688_17vjd1aast5q7_4a_120_total_buffer_gets_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:33 col:4of5 "System Impact"
17:14:33 Total Rows Processed per for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:33 col:4of5.

17:14:33 col:4of5 "00782_sqld360_323688_17vjd1aast5q7_4a_121_total_rows_processed_per_for_cluster.html"
17:14:33 col:4of5 "00783_sqld360_323688_17vjd1aast5q7_4a_121_total_rows_processed_per_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:34 col:4of5 "System Impact"
17:14:34 Total Rows Processed per for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:34 col:4of5.

17:14:34 col:4of5 "00784_sqld360_323688_17vjd1aast5q7_4a_122_total_rows_processed_per_for_instance_1.html"
17:14:34 col:4of5 "00785_sqld360_323688_17vjd1aast5q7_4a_122_total_rows_processed_per_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:34 col:4of5 "System Impact"
17:14:34 Total Rows Processed per for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.rows_processed_delta),0) rows_processed,
       NVL(SUM(b.fetches_delta),0) fetch_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, rows_processed_delta, fetches_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:34 col:4of5.

17:14:34 col:4of5 "00786_sqld360_323688_17vjd1aast5q7_4a_123_total_rows_processed_per_for_instance_2.html"
17:14:34 col:4of5 "00787_sqld360_323688_17vjd1aast5q7_4a_123_total_rows_processed_per_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:34 col:4of5 "System Impact"
17:14:34 Total number of Executions for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:34 col:4of5.

17:14:34 col:4of5 "00788_sqld360_323688_17vjd1aast5q7_4a_124_total_number_of_executions_for_cluster.html"
17:14:34 col:4of5 "00789_sqld360_323688_17vjd1aast5q7_4a_124_total_number_of_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:34 col:4of5 "System Impact"
17:14:34 Total number of Executions for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:34 col:4of5.

17:14:34 col:4of5 "00790_sqld360_323688_17vjd1aast5q7_4a_125_total_number_of_executions_for_instance_1.html"
17:14:35 col:4of5 "00791_sqld360_323688_17vjd1aast5q7_4a_125_total_number_of_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:35 col:4of5 "System Impact"
17:14:35 Total number of Executions for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(SUM(b.executions_delta),0) executions_delta,
       NVL(SUM(b.parse_calls_delta),0) parse_calls,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, executions_delta, parse_calls_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:35 col:4of5.

17:14:35 col:4of5 "00792_sqld360_323688_17vjd1aast5q7_4a_126_total_number_of_executions_for_instance_2.html"
17:14:35 col:4of5 "00793_sqld360_323688_17vjd1aast5q7_4a_126_total_number_of_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:35 col:4of5 "System Impact"
17:14:35 Version Count and Sharable Memory for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:35 col:4of5.

17:14:35 col:4of5 "00794_sqld360_323688_17vjd1aast5q7_4a_127_version_count_and_sharable_memory_for_cluster.html"
17:14:35 col:4of5 "00795_sqld360_323688_17vjd1aast5q7_4a_127_version_count_and_sharable_memory_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:35 col:4of5 "System Impact"
17:14:35 Version Count and Sharable Memory for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:35 col:4of5.

17:14:35 col:4of5 "00796_sqld360_323688_17vjd1aast5q7_4a_128_version_count_and_sharable_memory_for_instance_1.html"
17:14:35 col:4of5 "00797_sqld360_323688_17vjd1aast5q7_4a_128_version_count_and_sharable_memory_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:36 col:4of5 "System Impact"
17:14:36 Version Count and Sharable Memory for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       SUM(NVL(b.version_count,0)) version_count,
       SUM(NVL(b.sharable_mem,0)) sharable_mem,
       0 dummy_03,
       0 dummy_04,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number, version_count, sharable_mem
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:36 col:4of5.

17:14:36 col:4of5 "00798_sqld360_323688_17vjd1aast5q7_4a_129_version_count_and_sharable_memory_for_instance_2.html"
17:14:36 col:4of5 "00799_sqld360_323688_17vjd1aast5q7_4a_129_version_count_and_sharable_memory_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:36 col:4of5 "Execution metrics"
17:14:36 SQL Execute Time by Wait Class for Cluster

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = a.instance_number
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:36 col:4of5.

17:14:36 col:4of5 "00800_sqld360_323688_17vjd1aast5q7_4b_130_sql_execute_time_by_wait_class_for_cluster.html"
17:14:36 col:4of5 "00801_sqld360_323688_17vjd1aast5q7_4b_130_sql_execute_time_by_wait_class_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:36 col:4of5 "Execution metrics"
17:14:36 SQL Execute Time by Wait Class for Instance 1

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 1
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:36 col:4of5.

17:14:36 col:4of5 "00802_sqld360_323688_17vjd1aast5q7_4b_131_sql_execute_time_by_wait_class_for_instance_1.html"
17:14:36 col:4of5 "00803_sqld360_323688_17vjd1aast5q7_4b_131_sql_execute_time_by_wait_class_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:36 col:4of5 "Execution metrics"
17:14:36 SQL Execute Time by Wait Class for Instance 2

SELECT MIN(a.snap_id) snap_id,
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       ROUND(SUM(NVL(b.elapsed_time_delta,0))/1e6,6) elapsed_time,
       ROUND(SUM(NVL(b.cpu_time_delta,0))/1e6,6) cpu_time,
       ROUND(SUM(NVL(b.iowait_delta,0))/1e6,6) io_time,
       ROUND(SUM(NVL(b.clwait_delta,0))/1e6,6) cluster_time,
       ROUND(SUM(NVL(b.apwait_delta,0))/1e6,6) application_time,
       ROUND(SUM(NVL(b.ccwait_delta,0))/1e6,6) concurrency_time,
       ROUND((SUM(NVL(b.elapsed_time_delta,0)) -
         (SUM(NVL(b.cpu_time_delta,0)) +
          SUM(NVL(b.iowait_delta,0))   +
          SUM(NVL(b.clwait_delta,0))   +
          SUM(NVL(b.apwait_delta,0))   +
          SUM(NVL(b.ccwait_delta,0)))
       ) / 1e6,6) unaccounted_time,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id, instance_number,
               elapsed_time_delta, cpu_time_delta, iowait_delta, clwait_delta, apwait_delta, ccwait_delta
          FROM dba_hist_sqlstat
         WHERE sql_id = '17vjd1aast5q7') b,
       (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
          FROM dba_hist_snapshot
         WHERE snap_id BETWEEN 3485 AND 4974) a
 WHERE a.snap_id = b.snap_id(+)
   AND a.instance_number = b.instance_number(+)
   AND 'Y' = 'Y'
   AND a.instance_number = 2
 GROUP BY
       TO_CHAR(a.begin_interval_time, 'YYYY-MM-DD HH24:MI'),
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')
 ORDER BY
       TO_CHAR(a.end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:36 col:4of5.

17:14:36 col:4of5 "00804_sqld360_323688_17vjd1aast5q7_4b_132_sql_execute_time_by_wait_class_for_instance_2.html"
17:14:37 col:4of5 "00805_sqld360_323688_17vjd1aast5q7_4b_132_sql_execute_time_by_wait_class_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:37 col:4of5 "Execution metrics"
17:14:37 Elapsed Time per recent executions for Cluster

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  position
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:37 col:4of5.

17:14:37 col:4of5 "00806_sqld360_323688_17vjd1aast5q7_4b_133_elapsed_time_per_recent_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:37 col:4of5 "Execution metrics"
17:14:37 Elapsed Time per recent executions for Instance 1

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  1
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:37 col:4of5.

17:14:37 col:4of5 "00807_sqld360_323688_17vjd1aast5q7_4b_134_elapsed_time_per_recent_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:37 col:4of5 "Execution metrics"
17:14:37 Elapsed Time per recent executions for Instance 2

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(1+86400*(MAX(timestamp)-MIN(timestamp)),COUNT(*)) elapsed_time,
                          1+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
       SUM(                   1) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
   AND position =  2
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:37 col:4of5.

17:14:37 col:4of5 "00808_sqld360_323688_17vjd1aast5q7_4b_135_elapsed_time_per_recent_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:37 col:4of5 "Execution metrics"
17:14:37 Elapsed Time per historical executions for Cluster

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  position
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:37 col:4of5.

17:14:37 col:4of5 "00809_sqld360_323688_17vjd1aast5q7_4b_136_elapsed_time_per_historical_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:37 col:4of5 "Execution metrics"
17:14:37 Elapsed Time per historical executions for Instance 1

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  1
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:37 col:4of5.

17:14:37 col:4of5 "00810_sqld360_323688_17vjd1aast5q7_4b_137_elapsed_time_per_historical_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:38 col:4of5 "Execution metrics"
17:14:38 Elapsed Time per historical executions for Instance 2

SELECT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position) instance_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost) session_id,
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost) session_serial#,
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1)) user_id,
       partition_id sql_exec_id,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS') sql_exec_start,
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS')  start_time,
       TO_CHAR(MAX(timestamp), 'YYYY-MM-DD HH24:MI:SS')  end_time,
       bytes plan_hash_value,
       --LEAST(10+86400*(MAX(timestamp)-MIN(timestamp)),SUM(10)) elapsed_time,
                         10+86400*(MAX(timestamp)-MIN(timestamp)) elapsed_time,
       SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
       SUM(                  10) db_time,
       COUNT(DISTINCT position||'-'||cpu_cost||'-'||io_cost) num_processes_ash,
       MAX(TRUNC(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,10)+1,INSTR(partition_stop,',',1,11)-INSTR(partition_stop,',',1,10)-1)) / 2097152)) max_px_degree_ash,
       MAX(px_servers_requested) px_servers_requested_sqlmon,
       MAX(px_servers_allocated) px_servers_allocated_sqlmon
  FROM plan_table a,
       (SELECT inst_id,
               sid,
               session_serial#,
               sql_exec_id,
               sql_exec_start,
               px_servers_requested,
               px_servers_allocated
          FROM gv$sql_monitor
         WHERE sql_id = '17vjd1aast5q7'
           AND 'Y' = 'Y'
           AND px_qcsid IS NULL) b
 WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
   AND position =  2
   AND remarks = '17vjd1aast5q7'
   AND 'Y' = 'Y'
   AND b.sql_exec_id(+) = a.partition_id
   AND b.inst_id(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)
   AND b.sid(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)
   AND b.session_serial#(+) = NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)
   AND b.sql_exec_start(+) = TO_DATE(distribution, 'YYYYMMDDHH24MISS')
 GROUP BY partition_id,
       bytes,
       TO_CHAR(TO_DATE(distribution, 'YYYYMMDDHH24MISS'), 'YYYY-MM-DD HH24:MI:SS'),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost),
       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost),
       TO_NUMBER(SUBSTR(partition_start,INSTR(partition_start,',',1,13)+1))
 ORDER BY
       TO_CHAR(MIN(timestamp), 'YYYY-MM-DD HH24:MI:SS'),
       partition_id

17:14:38 col:4of5.

17:14:38 col:4of5 "00811_sqld360_323688_17vjd1aast5q7_4b_138_elapsed_time_per_historical_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:38 col:4of5 "Execution metrics"
17:14:38 Avg Buffer Gets/Execution for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = a.instance_number
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:38 col:4of5.

17:14:38 col:4of5 "00812_sqld360_323688_17vjd1aast5q7_4b_139_avg_buffer_getsexecution_for_cluster.html"
17:14:38 col:4of5 "00813_sqld360_323688_17vjd1aast5q7_4b_139_avg_buffer_getsexecution_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:38 col:4of5 "Execution metrics"
17:14:38 Avg Buffer Gets/Execution for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = 1
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:38 col:4of5.

17:14:38 col:4of5 "00814_sqld360_323688_17vjd1aast5q7_4b_140_avg_buffer_getsexecution_for_instance_1.html"
17:14:38 col:4of5 "00815_sqld360_323688_17vjd1aast5q7_4b_140_avg_buffer_getsexecution_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:38 col:4of5 "Execution metrics"
17:14:38 Avg Buffer Gets/Execution for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(buffer_gets_tot, 0) buffer_gets_tot,
       NVL(AVG(buffer_gets_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_tot,
       NVL(buffer_gets_del, 0) buffer_gets_del,
       NVL(AVG(buffer_gets_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) buffer_gets_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.buffer_gets_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) buffer_gets_tot,
               TRUNC(SUM(b.buffer_gets_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) buffer_gets_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, buffer_gets_total, executions_total, buffer_gets_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
          WHERE a.snap_id = b.snap_id(+)
            AND a.instance_number = b.instance_number(+)
            AND 'Y' = 'Y'
            AND a.instance_number = 2
          GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:38 col:4of5.

17:14:38 col:4of5 "00816_sqld360_323688_17vjd1aast5q7_4b_141_avg_buffer_getsexecution_for_instance_2.html"
17:14:39 col:4of5 "00817_sqld360_323688_17vjd1aast5q7_4b_141_avg_buffer_getsexecution_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:39 col:4of5 "Execution metrics"
17:14:39 Avg Rows Processed/Execution for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:39 col:4of5.

17:14:39 col:4of5 "00818_sqld360_323688_17vjd1aast5q7_4b_142_avg_rows_processedexecution_for_cluster.html"
17:14:39 col:4of5 "00819_sqld360_323688_17vjd1aast5q7_4b_142_avg_rows_processedexecution_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:39 col:4of5 "Execution metrics"
17:14:39 Avg Rows Processed/Execution for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:39 col:4of5.

17:14:39 col:4of5 "00820_sqld360_323688_17vjd1aast5q7_4b_143_avg_rows_processedexecution_for_instance_1.html"
17:14:39 col:4of5 "00821_sqld360_323688_17vjd1aast5q7_4b_143_avg_rows_processedexecution_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:39 col:4of5 "Execution metrics"
17:14:39 Avg Rows Processed/Execution for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(rows_processed_tot,0) rows_processed_tot,
       NVL(AVG(rows_processed_tot) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_tot,
       NVL(rows_processed_del,0) rows_processed_del,
       NVL(AVG(rows_processed_del) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW), 0) rows_processed_trend_del,
       0 dummy_05,
       0 dummy_06,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               TRUNC(SUM(b.rows_processed_total)/SUM(NVL(NULLIF(executions_total,0),1)),3) rows_processed_tot,
               TRUNC(SUM(b.rows_processed_delta)/SUM(NVL(NULLIF(executions_delta,0),1)),3) rows_processed_del
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number, rows_processed_total, executions_total, rows_processed_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:39 col:4of5.

17:14:39 col:4of5 "00822_sqld360_323688_17vjd1aast5q7_4b_144_avg_rows_processedexecution_for_instance_2.html"
17:14:39 col:4of5 "00823_sqld360_323688_17vjd1aast5q7_4b_144_avg_rows_processedexecution_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:40 col:4of5 "Execution metrics"
17:14:40 Avg Elapsed Time/Execution (total) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:40 col:4of5.

17:14:40 col:4of5 "00824_sqld360_323688_17vjd1aast5q7_4b_145_avg_elapsed_timeexecution_total_for_cluster.html"
17:14:40 col:4of5 "00825_sqld360_323688_17vjd1aast5q7_4b_145_avg_elapsed_timeexecution_total_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:40 col:4of5 "Execution metrics"
17:14:40 Avg Elapsed Time/Execution (total) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:40 col:4of5.

17:14:40 col:4of5 "00826_sqld360_323688_17vjd1aast5q7_4b_146_avg_elapsed_timeexecution_total_for_instance_1.html"
17:14:40 col:4of5 "00827_sqld360_323688_17vjd1aast5q7_4b_146_avg_elapsed_timeexecution_total_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:40 col:4of5 "Execution metrics"
17:14:40 Avg Elapsed Time/Execution (total) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_total)    /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_total)      /SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_total, cpu_time_total,
                       iowait_total, clwait_total, apwait_total, ccwait_total, executions_total
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:40 col:4of5.

17:14:40 col:4of5 "00828_sqld360_323688_17vjd1aast5q7_4b_147_avg_elapsed_timeexecution_total_for_instance_2.html"
17:14:40 col:4of5 "00829_sqld360_323688_17vjd1aast5q7_4b_147_avg_elapsed_timeexecution_total_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:40 col:4of5 "Execution metrics"
17:14:40 Avg Elapsed Time/Execution (delta) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:40 col:4of5.

17:14:41 col:4of5 "00830_sqld360_323688_17vjd1aast5q7_4b_148_avg_elapsed_timeexecution_delta_for_cluster.html"
17:14:41 col:4of5 "00831_sqld360_323688_17vjd1aast5q7_4b_148_avg_elapsed_timeexecution_delta_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:41 col:4of5 "Execution metrics"
17:14:41 Avg Elapsed Time/Execution (delta) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:41 col:4of5.

17:14:41 col:4of5 "00832_sqld360_323688_17vjd1aast5q7_4b_149_avg_elapsed_timeexecution_delta_for_instance_1.html"
17:14:41 col:4of5 "00833_sqld360_323688_17vjd1aast5q7_4b_149_avg_elapsed_timeexecution_delta_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:41 col:4of5 "Execution metrics"
17:14:41 Avg Elapsed Time/Execution (delta) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(elapsed_time,0) elapsed_time,
       NVL(cpu_time,0) cpu_time,
       NVL(iowait,0) iowait,
       NVL(clwait,0) clwait,
       NVL(apwait,0) apwait,
       NVL(ccwait,0) ccwait,
       NVL(AVG(elapsed_time) OVER (ORDER BY snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) elapsed_time_trend,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) elapsed_time,
               ROUND(SUM(cpu_time_delta)    /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) cpu_time,
               ROUND(SUM(iowait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) iowait,
               ROUND(SUM(clwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) clwait,
               ROUND(SUM(apwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) apwait,
               ROUND(SUM(ccwait_delta)      /SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) ccwait
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:41 col:4of5.

17:14:41 col:4of5 "00834_sqld360_323688_17vjd1aast5q7_4b_150_avg_elapsed_timeexecution_delta_for_instance_2.html"
17:14:41 col:4of5 "00835_sqld360_323688_17vjd1aast5q7_4b_150_avg_elapsed_timeexecution_delta_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:41 col:4of5 "Execution metrics"
17:14:41 Avg Elapsed Time/Execution (moving 1d) for Cluster

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = a.instance_number
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:41 col:4of5.

17:14:42 col:4of5 "00836_sqld360_323688_17vjd1aast5q7_4b_151_avg_elapsed_timeexecution_moving_1d_for_cluster.html"
17:14:42 col:4of5 "00837_sqld360_323688_17vjd1aast5q7_4b_151_avg_elapsed_timeexecution_moving_1d_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:42 col:4of5 "Execution metrics"
17:14:42 Avg Elapsed Time/Execution (moving 1d) for Instance 1

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 1
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:42 col:4of5.

17:14:42 col:4of5 "00838_sqld360_323688_17vjd1aast5q7_4b_152_avg_elapsed_timeexecution_moving_1d_for_instance_1.html"
17:14:42 col:4of5 "00839_sqld360_323688_17vjd1aast5q7_4b_152_avg_elapsed_timeexecution_moving_1d_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:42 col:4of5 "Execution metrics"
17:14:42 Avg Elapsed Time/Execution (moving 1d) for Instance 2

SELECT snap_id snap_id,
       TO_CHAR(begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(elapsed_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) elapsed_time,
       NVL(ROUND(SUM(cpu_time_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) cpu_time,
       NVL(ROUND(SUM(iowait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) iowait,
       NVL(ROUND(SUM(clwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) clwait,
       NVL(ROUND(SUM(apwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) apwait,
       NVL(ROUND(SUM(ccwait_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
            /NVL(NULLIF(SUM(execs_per_snap) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) ccwait,
       0 dummy_07,
       0 dummy_08,
       0 dummy_09,
       0 dummy_10,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT a.snap_id,
               MIN(begin_interval_time) begin_interval_time,
               MIN(end_interval_time) end_interval_time,
               SUM(elapsed_time_delta) elapsed_time_per_snap,
               SUM(cpu_time_delta) cpu_time_per_snap,
               SUM(iowait_delta) iowait_per_snap,
               SUM(clwait_delta) clwait_per_snap,
               SUM(apwait_delta) apwait_per_snap,
               SUM(ccwait_delta) ccwait_per_snap,
               SUM(executions_delta) execs_per_snap
          FROM (SELECT snap_id, instance_number, begin_interval_time, end_interval_time
                  FROM dba_hist_snapshot
                 WHERE snap_id BETWEEN 3485 AND 4974) a,
               (SELECT snap_id, instance_number,  elapsed_time_delta, cpu_time_delta,
                       iowait_delta, clwait_delta, apwait_delta, ccwait_delta, executions_delta
                  FROM dba_hist_sqlstat
                 WHERE sql_id = '17vjd1aast5q7') b
         WHERE a.snap_id = b.snap_id(+)
           AND a.instance_number = b.instance_number(+)
           AND 'Y' = 'Y'
           AND a.instance_number = 2
         GROUP BY a.snap_id)
 ORDER BY
       TO_CHAR(end_interval_time, 'YYYY-MM-DD HH24:MI')

17:14:42 col:4of5.

17:14:42 col:4of5 "00840_sqld360_323688_17vjd1aast5q7_4b_153_avg_elapsed_timeexecution_moving_1d_for_instance_2.html"
17:14:42 col:4of5 "00841_sqld360_323688_17vjd1aast5q7_4b_153_avg_elapsed_timeexecution_moving_1d_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:42 col:4of5 "Execution metrics"
17:14:42 Avg and Median Elapsed Time/Execution for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  position
                   AND remarks = '17vjd1aast5q7'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:14:42 col:4of5.

17:14:42 col:4of5 "00842_sqld360_323688_17vjd1aast5q7_4b_154_avg_and_median_elapsed_timeexecution_for_recent_executions_for_cluster.html"
17:14:42 col:4of5 "00843_sqld360_323688_17vjd1aast5q7_4b_154_avg_and_median_elapsed_timeexecution_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:43 col:4of5 "Execution metrics"
17:14:43 Avg and Median Elapsed Time/Execution for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  1
                   AND remarks = '17vjd1aast5q7'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:14:43 col:4of5.

17:14:43 col:4of5 "00844_sqld360_323688_17vjd1aast5q7_4b_155_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_1.html"
17:14:43 col:4of5 "00845_sqld360_323688_17vjd1aast5q7_4b_155_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:43 col:4of5 "Execution metrics"
17:14:43 Avg and Median Elapsed Time/Execution for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       avg_et,
       med_et,
       percth_et,
       avg_cpu_time,
       med_cpu_time,
       percth_cpu_time,
       avg_db_time,
       med_db_time,
       percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY start_time ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT start_time,
               TRUNC(AVG(et),3) avg_et,
               TRUNC(MEDIAN(et),3) med_et,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
               TRUNC(AVG(cpu_time),3) avg_cpu_time,
               TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
               TRUNC(AVG(db_time),3) avg_db_time,
               TRUNC(MEDIAN(db_time),3) med_db_time,
               TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
          FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                       NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                        NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                        NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                                          1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                       SUM(CASE WHEN object_node = 'ON CPU' THEN                    1 ELSE 0 END) cpu_time,
                       SUM(                   1) db_time
                  FROM plan_table
                 WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                   AND position =  2
                   AND remarks = '17vjd1aast5q7'
                   AND partition_id IS NOT NULL
                   AND 'Y' = 'Y'
                 GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                          NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                           NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                           NVL(partition_id,0)||'-'||NVL(distribution,'x'))
          GROUP BY start_time)
 ORDER BY 3

17:14:43 col:4of5.

17:14:43 col:4of5 "00846_sqld360_323688_17vjd1aast5q7_4b_156_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_2.html"
17:14:43 col:4of5 "00847_sqld360_323688_17vjd1aast5q7_4b_156_avg_and_median_elapsed_timeexecution_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:43 col:4of5 "Execution metrics"
17:14:43 Avg and Median Elapsed Time/Execution for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  position
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:43 col:4of5.

17:14:43 col:4of5 "00848_sqld360_323688_17vjd1aast5q7_4b_157_avg_and_median_elapsed_timeexecution_for_historical_executions_for_cluster.html"
17:14:43 col:4of5 "00849_sqld360_323688_17vjd1aast5q7_4b_157_avg_and_median_elapsed_timeexecution_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:43 col:4of5 "Execution metrics"
17:14:43 Avg and Median Elapsed Time/Execution for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  1
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:43 col:4of5.

17:14:43 col:4of5 "00850_sqld360_323688_17vjd1aast5q7_4b_158_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_1.html"
17:14:44 col:4of5 "00851_sqld360_323688_17vjd1aast5q7_4b_158_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:44 col:4of5 "Execution metrics"
17:14:44 Avg and Median Elapsed Time/Execution for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(avg_et,0) avg_et,
       NVL(med_et,0) med_et,
       NVL(percth_et,0) percth_et,
       NVL(avg_cpu_time,0) avg_cpu_time,
       NVL(med_cpu_time,0) med_cpu_time,
       NVL(percth_cpu_time,0) percth_cpu_time,
       NVL(avg_db_time,0) avg_db_time,
       NVL(med_db_time,0) med_db_time,
       NVL(percth_db_time,0) percth_db_time,
       NVL(AVG(avg_et) OVER (ORDER BY b.snap_id ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW),0) avg_et_trend,
       0 dummy_11,
       0 dummy_12,
       0 dummy_13,
       0 dummy_14,
       0 dummy_15
  FROM (SELECT snap_id,
               MAX(avg_et) avg_et,
               MAX(med_et) med_et,
               MAX(percth_et) percth_et,
               MAX(avg_cpu_time) avg_cpu_time,
               MAX(med_cpu_time) med_cpu_time,
               MAX(percth_cpu_time) percth_cpu_time,
               MAX(avg_db_time) avg_db_time,
               MAX(med_db_time) med_db_time,
               MAX(percth_db_time) percth_db_time
          FROM (SELECT start_time,
                       MIN(start_snap_id) snap_id,
                       TRUNC(AVG(et),3) avg_et,
                       TRUNC(MEDIAN(et),3) med_et,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY et),3) percth_et,
                       TRUNC(AVG(cpu_time),3) avg_cpu_time,
                       TRUNC(MEDIAN(cpu_time),3) med_cpu_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY cpu_time),3) percth_cpu_time,
                       TRUNC(AVG(db_time),3) avg_db_time,
                       TRUNC(MEDIAN(db_time),3) med_db_time,
                       TRUNC(PERCENTILE_DISC(0.90) WITHIN GROUP (ORDER BY db_time),3) percth_db_time
                  FROM (SELECT TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI') start_time,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec,
                               MIN(cardinality) start_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               SUM(CASE WHEN object_node = 'ON CPU' THEN                   10 ELSE 0 END) cpu_time,
                               SUM(                  10) db_time
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND partition_id IS NOT NULL
                           AND position =  2
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                         GROUP BY TO_DATE(SUBSTR(distribution,1,12),'YYYYMMDDHH24MI'),
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time)
         GROUP BY snap_id) ash,
      dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:44 col:4of5.

17:14:44 col:4of5 "00852_sqld360_323688_17vjd1aast5q7_4b_159_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_2.html"
17:14:44 col:4of5 "00853_sqld360_323688_17vjd1aast5q7_4b_159_avg_and_median_elapsed_timeexecution_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:44 col:4of5 "Execution metrics"
17:14:44 Streak of non-executing SQL for recent executions for Cluster

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  position
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:44 col:4of5.

17:14:45 col:4of5 "00854_sqld360_323688_17vjd1aast5q7_4b_160_streak_of_nonexecuting_sql_for_recent_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics"
17:14:45 Streak of non-executing SQL for recent executions for Instance 1

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  1
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:45 col:4of5.

17:14:45 col:4of5 "00855_sqld360_323688_17vjd1aast5q7_4b_161_streak_of_nonexecuting_sql_for_recent_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics"
17:14:45 Streak of non-executing SQL for recent executions for Instance 2

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample > 1 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND 'Y' = 'Y'
                           AND position =  2
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:45 col:4of5.

17:14:45 col:4of5 "00856_sqld360_323688_17vjd1aast5q7_4b_162_streak_of_nonexecuting_sql_for_recent_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics"
17:14:45 Streak of non-executing SQL for historical executions for Cluster

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  position
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:45 col:4of5.

17:14:45 col:4of5 "00857_sqld360_323688_17vjd1aast5q7_4b_163_streak_of_nonexecuting_sql_for_historical_executions_for_cluster.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics"
17:14:45 Streak of non-executing SQL for historical executions for Instance 1

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  1
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:45 col:4of5.

17:14:45 col:4of5 "00858_sqld360_323688_17vjd1aast5q7_4b_164_streak_of_nonexecuting_sql_for_historical_executions_for_instance_1.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics"
17:14:45 Streak of non-executing SQL for historical executions for Instance 2

SELECT inst_id, session_id, session_serial#, COUNT(DISTINCT event) num_events, MIN(event) min_event, MAX(event) max_event, MIN(sample_time) streak_start, MAX(sample_time) streak_end, COUNT(*) streak_num_samples
  FROM (SELECT inst_id, session_id, session_serial#, sample_time, event, nvl(start_of_streak,
               MAX(start_of_streak) OVER (PARTITION BY inst_id, session_id, session_serial# ORDER BY sample_time ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING)) start_of_streak
          FROM (SELECT inst_id, session_id, session_serial#, sample_time, event,
                       CASE WHEN diff_in_sample IS NULL OR diff_in_sample >                   10 THEN sample_time ELSE NULL END start_of_streak
                  FROM (SELECT position inst_id, cpu_cost session_id, io_cost session_serial#, timestamp sample_time, object_node event,
                               TRUNC((timestamp-LAG(timestamp) OVER (PARTITION BY position, cpu_cost, io_cost ORDER BY timestamp))*86400) diff_in_sample
                          FROM plan_table
                         WHERE remarks = '17vjd1aast5q7'
                           AND statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND 'Y' = 'Y'
                           AND position =  2
                           AND partition_id IS NULL)))
 GROUP BY inst_id, session_id, session_serial#, start_of_streak
 HAVING COUNT(*) > 1
 ORDER BY start_of_streak, inst_id, session_id, session_serial#

17:14:45 col:4of5.

17:14:45 col:4of5 "00859_sqld360_323688_17vjd1aast5q7_4b_165_streak_of_nonexecuting_sql_for_historical_executions_for_instance_2.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics per PHV"
17:14:45 Total number of Executions per PHV for Cluster

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:14:45 col:4of5.

17:14:45 col:4of5 "00860_sqld360_323688_17vjd1aast5q7_4c_166_total_number_of_executions_per_phv_for_cluster.html"
17:14:45 col:4of5 "00861_sqld360_323688_17vjd1aast5q7_4c_166_total_number_of_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:45 col:4of5 "Execution metrics per PHV"
17:14:45 Total number of Executions per PHV for Instance 1

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:14:45 col:4of5.

17:14:46 col:4of5 "00862_sqld360_323688_17vjd1aast5q7_4c_167_total_number_of_executions_per_phv_for_instance_1.html"
17:14:46 col:4of5 "00863_sqld360_323688_17vjd1aast5q7_4c_167_total_number_of_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:46 col:4of5 "Execution metrics per PHV"
17:14:46 Total number of Executions per PHV for Instance 2

SELECT phv,
       num_execs,
       NULL style,
       phv||' - Number of execs: '||num_execs||' ('||TRUNC(100*RATIO_TO_REPORT(num_execs) OVER (),2)||'%)' tooltip
  FROM (SELECT bytes phv,
               COUNT(DISTINCT NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                              NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                              NVL(partition_id,0)||'-'||NVL(distribution,'x')
                    ) num_execs
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id LIKE 'SQLD360_ASH_DATA%'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_execs DESC

17:14:46 col:4of5.

17:14:46 col:4of5 "00864_sqld360_323688_17vjd1aast5q7_4c_168_total_number_of_executions_per_phv_for_instance_2.html"
17:14:46 col:4of5 "00865_sqld360_323688_17vjd1aast5q7_4c_168_total_number_of_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:46 col:4of5 "Execution metrics per PHV"
17:14:46 Number of execution per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:46 col:4of5.

17:14:46 col:4of5 "00866_sqld360_323688_17vjd1aast5q7_4c_169_number_of_execution_per_phv_from_awr_for_cluster.html"
17:14:46 col:4of5 "00867_sqld360_323688_17vjd1aast5q7_4c_169_number_of_execution_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:46 col:4of5 "Execution metrics per PHV"
17:14:46 Number of execution per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:46 col:4of5.

17:14:46 col:4of5 "00868_sqld360_323688_17vjd1aast5q7_4c_170_number_of_execution_per_phv_from_awr_for_instance_1.html"
17:14:47 col:4of5 "00869_sqld360_323688_17vjd1aast5q7_4c_170_number_of_execution_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:47 col:4of5 "Execution metrics per PHV"
17:14:47 Number of execution per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN execs ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN execs ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN execs ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN execs ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN execs ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN execs ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN execs ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN execs ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(executions_delta) execs
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:47 col:4of5.

17:14:47 col:4of5 "00870_sqld360_323688_17vjd1aast5q7_4c_171_number_of_execution_per_phv_from_awr_for_instance_2.html"
17:14:47 col:4of5 "00871_sqld360_323688_17vjd1aast5q7_4c_171_number_of_execution_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:47 col:4of5 "Execution metrics per PHV"
17:14:47 Total Elapsed Time for recent executions per PHV for Cluster

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:47 col:4of5.

17:14:47 col:4of5 "00872_sqld360_323688_17vjd1aast5q7_4c_172_total_elapsed_time_for_recent_executions_per_phv_for_cluster.html"
17:14:47 col:4of5 "00873_sqld360_323688_17vjd1aast5q7_4c_172_total_elapsed_time_for_recent_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time for recent executions per PHV for Instance 1

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:48 col:4of5.

17:14:48 col:4of5 "00874_sqld360_323688_17vjd1aast5q7_4c_173_total_elapsed_time_for_recent_executions_per_phv_for_instance_1.html"
17:14:48 col:4of5 "00875_sqld360_323688_17vjd1aast5q7_4c_173_total_elapsed_time_for_recent_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time for recent executions per PHV for Instance 2

SELECT phv,
       num_samples,
       NULL style,
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
       phv||' - 1s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
  FROM (SELECT bytes phv,
               COUNT(*) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_MEM'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:48 col:4of5.

17:14:48 col:4of5 "00876_sqld360_323688_17vjd1aast5q7_4c_174_total_elapsed_time_for_recent_executions_per_phv_for_instance_2.html"
17:14:48 col:4of5 "00877_sqld360_323688_17vjd1aast5q7_4c_174_total_elapsed_time_for_recent_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time for historical executions per PHV for Cluster

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  position
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:48 col:4of5.

17:14:48 col:4of5 "00878_sqld360_323688_17vjd1aast5q7_4c_175_total_elapsed_time_for_historical_executions_per_phv_for_cluster.html"
17:14:48 col:4of5 "00879_sqld360_323688_17vjd1aast5q7_4c_175_total_elapsed_time_for_historical_executions_per_phv_for_cluster_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time for historical executions per PHV for Instance 1

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  1
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:48 col:4of5.

17:14:48 col:4of5 "00880_sqld360_323688_17vjd1aast5q7_4c_176_total_elapsed_time_for_historical_executions_per_phv_for_instance_1.html"
17:14:48 col:4of5 "00881_sqld360_323688_17vjd1aast5q7_4c_176_total_elapsed_time_for_historical_executions_per_phv_for_instance_1_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time for historical executions per PHV for Instance 2

SELECT phv,
       num_samples,
       NULL style,
       phv||' - 10s-samples: '||num_samples||' ('||TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2)||'% of DB Time)' tooltip
       --TRUNC(100*RATIO_TO_REPORT(num_samples) OVER (),2) percent,
  FROM (SELECT bytes phv,
               SUM(                  10) num_samples
          FROM plan_table
         WHERE remarks = '17vjd1aast5q7'
           AND statement_id = 'SQLD360_ASH_DATA_HIST'
           AND position =  2
           AND 'Y' = 'Y'
         GROUP BY bytes)
 ORDER BY num_samples DESC

17:14:48 col:4of5.

17:14:48 col:4of5 "00882_sqld360_323688_17vjd1aast5q7_4c_177_total_elapsed_time_for_historical_executions_per_phv_for_instance_2.html"
17:14:48 col:4of5 "00883_sqld360_323688_17vjd1aast5q7_4c_177_total_elapsed_time_for_historical_executions_per_phv_for_instance_2_bar_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:48 col:4of5 "Execution metrics per PHV"
17:14:48 Total Elapsed Time per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:48 col:4of5.

17:14:48 col:4of5 "00884_sqld360_323688_17vjd1aast5q7_4c_178_total_elapsed_time_per_phv_from_awr_for_cluster.html"
17:14:49 col:4of5 "00885_sqld360_323688_17vjd1aast5q7_4c_178_total_elapsed_time_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:49 col:4of5 "Execution metrics per PHV"
17:14:49 Total Elapsed Time per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:49 col:4of5.

17:14:49 col:4of5 "00886_sqld360_323688_17vjd1aast5q7_4c_179_total_elapsed_time_per_phv_from_awr_for_instance_1.html"
17:14:49 col:4of5 "00887_sqld360_323688_17vjd1aast5q7_4c_179_total_elapsed_time_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:49 col:4of5 "Execution metrics per PHV"
17:14:49 Total Elapsed Time per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/1e6,6) elapsed_time
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:49 col:4of5.

17:14:49 col:4of5 "00888_sqld360_323688_17vjd1aast5q7_4c_180_total_elapsed_time_per_phv_from_awr_for_instance_2.html"
17:14:50 col:4of5 "00889_sqld360_323688_17vjd1aast5q7_4c_180_total_elapsed_time_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:50 col:4of5 "Execution metrics per PHV"
17:14:50 Avg Elapsed Time/Execution per PHV for recent executions for Cluster

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_  ,
       NVL(phv2 ,0) phv2_  ,
       NVL(phv3 ,0) phv3_  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  position
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (                  -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:14:50 col:4of5.

17:14:50 col:4of5 "00890_sqld360_323688_17vjd1aast5q7_4c_181_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_cluster.html"
17:14:50 col:4of5 "00891_sqld360_323688_17vjd1aast5q7_4c_181_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:50 col:4of5 "Execution metrics per PHV"
17:14:50 Avg Elapsed Time/Execution per PHV for recent executions for Instance 1

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_  ,
       NVL(phv2 ,0) phv2_  ,
       NVL(phv3 ,0) phv3_  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  1
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (                  -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:14:50 col:4of5.

17:14:50 col:4of5 "00892_sqld360_323688_17vjd1aast5q7_4c_182_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_1.html"
17:14:50 col:4of5 "00893_sqld360_323688_17vjd1aast5q7_4c_182_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:50 col:4of5 "Execution metrics per PHV"
17:14:50 Avg Elapsed Time/Execution per PHV for recent executions for Instance 2

SELECT 0 snap_id,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') begin_time,
       TO_CHAR(start_time, 'YYYY-MM-DD HH24:MI') end_time,
       NVL(phv1 ,0) phv1_  ,
       NVL(phv2 ,0) phv2_  ,
       NVL(phv3 ,0) phv3_  ,
       NVL(phv4 ,0) phv4_  ,
       NVL(phv5 ,0) phv5_  ,
       NVL(phv6 ,0) phv6_  ,
       NVL(phv7 ,0) phv7_  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24MI') start_time,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,12) start_time,
                               bytes phv,
                                                  1+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_MEM'
                           AND position =  2
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND bytes IN (                  -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,12), bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24MI'))
 ORDER BY 3

17:14:50 col:4of5.

17:14:50 col:4of5 "00894_sqld360_323688_17vjd1aast5q7_4c_183_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_2.html"
17:14:50 col:4of5 "00895_sqld360_323688_17vjd1aast5q7_4c_183_avg_elapsed_timeexecution_per_phv_for_recent_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:50 col:4of5 "Execution metrics per PHV"
17:14:50 Avg Elapsed Time/Execution per PHV for historical executions for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_1631436210  ,
       NVL(phv3 ,0) phv3_2283497611  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  position
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          2157031554,          1631436210,          2283497611,           585197806,           878120166,          3954730776,
                                                  1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:50 col:4of5.

17:14:50 col:4of5 "00896_sqld360_323688_17vjd1aast5q7_4c_184_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_cluster.html"
17:14:51 col:4of5 "00897_sqld360_323688_17vjd1aast5q7_4c_184_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:51 col:4of5 "Execution metrics per PHV"
17:14:51 Avg Elapsed Time/Execution per PHV for historical executions for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_1631436210  ,
       NVL(phv3 ,0) phv3_2283497611  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  1
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          2157031554,          1631436210,          2283497611,           585197806,           878120166,          3954730776,
                                                  1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:51 col:4of5.

17:14:51 col:4of5 "00898_sqld360_323688_17vjd1aast5q7_4c_185_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_1.html"
17:14:51 col:4of5 "00899_sqld360_323688_17vjd1aast5q7_4c_185_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:52 col:4of5 "Execution metrics per PHV"
17:14:52 Avg Elapsed Time/Execution per PHV for historical executions for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_1631436210  ,
       NVL(phv3 ,0) phv3_2283497611  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT TO_DATE(start_time,'YYYYMMDDHH24') start_time,
               MIN(starting_snap_id) snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT start_time,
                       phv,
                       starting_snap_id,
                       AVG(et) avg_et_per_exec
                  FROM (SELECT SUBSTR(distribution,1,10) start_time,
                               /*cost*/ bytes phv,
                               MIN(cardinality) starting_snap_id,
                                                 10+86400*(MAX(timestamp)-MIN(timestamp)) et,
                               NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                NVL(partition_id,0)||'-'||NVL(distribution,'x') uniq_exec
                          FROM plan_table
                         WHERE statement_id = 'SQLD360_ASH_DATA_HIST'
                           AND position =  2
                           AND remarks = '17vjd1aast5q7'
                           AND 'Y' = 'Y'
                           AND partition_id IS NOT NULL
                           AND distribution IS NOT NULL
                           AND /*cost*/ bytes IN (          2157031554,          1631436210,          2283497611,           585197806,           878120166,          3954730776,
                                                  1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                          -1,                  -1,                  -1)
                         GROUP BY SUBSTR(distribution,1,10), /*cost*/ bytes,
                                  NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,3)+1,INSTR(partition_stop,',',1,4)-INSTR(partition_stop,',',1,3)-1)),position)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,4)+1,INSTR(partition_stop,',',1,5)-INSTR(partition_stop,',',1,4)-1)),cpu_cost)||'-'||
                                   NVL(TO_NUMBER(SUBSTR(partition_stop,INSTR(partition_stop,',',1,5)+1,INSTR(partition_stop,',',1,6)-INSTR(partition_stop,',',1,5)-1)),io_cost)||'-'||
                                   NVL(partition_id,0)||'-'||NVL(distribution,'x'))
                 GROUP BY start_time, phv, starting_snap_id)
         GROUP BY TO_DATE(start_time,'YYYYMMDDHH24')) ash,
       dba_hist_snapshot b
 WHERE ash.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:52 col:4of5.

17:14:52 col:4of5 "00900_sqld360_323688_17vjd1aast5q7_4c_186_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_2.html"
17:14:52 col:4of5 "00901_sqld360_323688_17vjd1aast5q7_4c_186_avg_elapsed_timeexecution_per_phv_for_historical_executions_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:52 col:4of5 "Execution metrics per PHV"
17:14:52 Avg Elapsed Time/Execution per PHV (total) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:52 col:4of5.

17:14:52 col:4of5 "00902_sqld360_323688_17vjd1aast5q7_4c_187_avg_elapsed_timeexecution_per_phv_total_from_awr_for_cluster.html"
17:14:52 col:4of5 "00903_sqld360_323688_17vjd1aast5q7_4c_187_avg_elapsed_timeexecution_per_phv_total_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:52 col:4of5 "Execution metrics per PHV"
17:14:52 Avg Elapsed Time/Execution per PHV (total) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:52 col:4of5.

17:14:53 col:4of5 "00904_sqld360_323688_17vjd1aast5q7_4c_188_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_1.html"
17:14:53 col:4of5 "00905_sqld360_323688_17vjd1aast5q7_4c_188_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:53 col:4of5 "Execution metrics per PHV"
17:14:53 Avg Elapsed Time/Execution per PHV (total) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_total)/SUM(NVL(NULLIF(executions_total,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:53 col:4of5.

17:14:53 col:4of5 "00906_sqld360_323688_17vjd1aast5q7_4c_189_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_2.html"
17:14:53 col:4of5 "00907_sqld360_323688_17vjd1aast5q7_4c_189_avg_elapsed_timeexecution_per_phv_total_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:53 col:4of5 "Execution metrics per PHV"
17:14:53 Avg Elapsed Time/Execution per PHV (delta) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:53 col:4of5.

17:14:54 col:4of5 "00908_sqld360_323688_17vjd1aast5q7_4c_190_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_cluster.html"
17:14:54 col:4of5 "00909_sqld360_323688_17vjd1aast5q7_4c_190_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:54 col:4of5 "Execution metrics per PHV"
17:14:54 Avg Elapsed Time/Execution per PHV (delta) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:54 col:4of5.

17:14:54 col:4of5 "00910_sqld360_323688_17vjd1aast5q7_4c_191_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_1.html"
17:14:54 col:4of5 "00911_sqld360_323688_17vjd1aast5q7_4c_191_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:54 col:4of5 "Execution metrics per PHV"
17:14:54 Avg Elapsed Time/Execution per PHV (delta) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_et_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_et_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_et_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_et_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_et_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_et_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_et_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_et_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       ROUND(SUM(elapsed_time_delta)/SUM(NVL(NULLIF(executions_delta,0),1))/1e3,6) avg_et_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:54 col:4of5.

17:14:54 col:4of5 "00912_sqld360_323688_17vjd1aast5q7_4c_192_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_2.html"
17:14:55 col:4of5 "00913_sqld360_323688_17vjd1aast5q7_4c_192_avg_elapsed_timeexecution_per_phv_delta_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:55 col:4of5 "Execution metrics per PHV"
17:14:55 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_2157031554  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2283497611  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_1631436210  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_585197806  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_878120166  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_3954730776  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_1553667503  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_ ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_ ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_ ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_ ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_ ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           2157031554 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2283497611 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =           1631436210 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =            585197806 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =            878120166 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           3954730776 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           1553667503 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:55 col:4of5.

17:14:55 col:4of5 "00914_sqld360_323688_17vjd1aast5q7_4c_193_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_cluster.html"
17:14:55 col:4of5 "00915_sqld360_323688_17vjd1aast5q7_4c_193_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:55 col:4of5 "Execution metrics per PHV"
17:14:55 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_2157031554  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2283497611  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_1631436210  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_585197806  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_878120166  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_3954730776  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_1553667503  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_ ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_ ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_ ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_ ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_ ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           2157031554 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2283497611 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =           1631436210 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =            585197806 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =            878120166 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           3954730776 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           1553667503 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:55 col:4of5.

17:14:55 col:4of5 "00916_sqld360_323688_17vjd1aast5q7_4c_194_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_1.html"
17:14:56 col:4of5 "00917_sqld360_323688_17vjd1aast5q7_4c_194_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:56 col:4of5 "Execution metrics per PHV"
17:14:56 Avg Elapsed Time/Execution per PHV (moving 1d) from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(ROUND(SUM(etps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps1 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv1_2157031554  ,
       NVL(ROUND(SUM(etps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps2 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv2_2283497611  ,
       NVL(ROUND(SUM(etps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps3 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv3_1631436210  ,
       NVL(ROUND(SUM(etps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps4 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv4_585197806  ,
       NVL(ROUND(SUM(etps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps5 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv5_878120166  ,
       NVL(ROUND(SUM(etps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps6 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv6_3954730776  ,
       NVL(ROUND(SUM(etps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps7 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv7_1553667503  ,
       NVL(ROUND(SUM(etps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps8 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv8_  ,
       NVL(ROUND(SUM(etps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps9 ) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv9_  ,
       NVL(ROUND(SUM(etps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps10) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv10_ ,
       NVL(ROUND(SUM(etps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps11) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv11_ ,
       NVL(ROUND(SUM(etps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps12) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv12_ ,
       NVL(ROUND(SUM(etps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps13) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv13_ ,
       NVL(ROUND(SUM(etps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps14) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv14_ ,
       NVL(ROUND(SUM(etps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW)
         /NVL(NULLIF(SUM(eps15) OVER (ORDER BY end_interval_time RANGE BETWEEN NUMTODSINTERVAL(1,'DAY') PRECEDING AND CURRENT ROW),0),1)/1e3,6),0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN elapsed_time_per_snap ELSE NULL END) etps1,
               MAX(CASE WHEN phv =           2283497611 THEN elapsed_time_per_snap ELSE NULL END) etps2,
               MAX(CASE WHEN phv =           1631436210 THEN elapsed_time_per_snap ELSE NULL END) etps3,
               MAX(CASE WHEN phv =            585197806 THEN elapsed_time_per_snap ELSE NULL END) etps4,
               MAX(CASE WHEN phv =            878120166 THEN elapsed_time_per_snap ELSE NULL END) etps5,
               MAX(CASE WHEN phv =           3954730776 THEN elapsed_time_per_snap ELSE NULL END) etps6,
               MAX(CASE WHEN phv =           1553667503 THEN elapsed_time_per_snap ELSE NULL END) etps7,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps8,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps9,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps10,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps11,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps12,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps13,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps14,
               MAX(CASE WHEN phv =                   -1 THEN elapsed_time_per_snap ELSE NULL END) etps15,
               MAX(CASE WHEN phv =           2157031554 THEN execs_per_snap ELSE NULL END) eps1,
               MAX(CASE WHEN phv =           2283497611 THEN execs_per_snap ELSE NULL END) eps2,
               MAX(CASE WHEN phv =           1631436210 THEN execs_per_snap ELSE NULL END) eps3,
               MAX(CASE WHEN phv =            585197806 THEN execs_per_snap ELSE NULL END) eps4,
               MAX(CASE WHEN phv =            878120166 THEN execs_per_snap ELSE NULL END) eps5,
               MAX(CASE WHEN phv =           3954730776 THEN execs_per_snap ELSE NULL END) eps6,
               MAX(CASE WHEN phv =           1553667503 THEN execs_per_snap ELSE NULL END) eps7,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps8,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps9,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps10,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps11,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps12,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps13,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps14,
               MAX(CASE WHEN phv =                   -1 THEN execs_per_snap ELSE NULL END) eps15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       SUM(elapsed_time_delta) elapsed_time_per_snap,
                       SUM(executions_delta) execs_per_snap
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:56 col:4of5.

17:14:56 col:4of5 "00918_sqld360_323688_17vjd1aast5q7_4c_195_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_2.html"
17:14:56 col:4of5 "00919_sqld360_323688_17vjd1aast5q7_4c_195_avg_elapsed_timeexecution_per_phv_moving_1d_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:56 col:4of5 "Execution metrics per PHV"
17:14:56 Avg Buffer Gets/Row/Execution per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:56 col:4of5.

17:14:56 col:4of5 "00920_sqld360_323688_17vjd1aast5q7_4c_196_avg_buffer_getsrowexecution_per_phv_from_awr_for_cluster.html"
17:14:57 col:4of5 "00921_sqld360_323688_17vjd1aast5q7_4c_196_avg_buffer_getsrowexecution_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:57 col:4of5 "Execution metrics per PHV"
17:14:57 Avg Buffer Gets/Row/Execution per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:57 col:4of5.

17:14:57 col:4of5 "00922_sqld360_323688_17vjd1aast5q7_4c_197_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_1.html"
17:14:57 col:4of5 "00923_sqld360_323688_17vjd1aast5q7_4c_197_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:57 col:4of5 "Execution metrics per PHV"
17:14:57 Avg Buffer Gets/Row/Execution per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN avg_gets_per_row_per_exec ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN avg_gets_per_row_per_exec ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN avg_gets_per_row_per_exec ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN avg_gets_per_row_per_exec ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN avg_gets_per_row_per_exec ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN avg_gets_per_row_per_exec ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN avg_gets_per_row_per_exec ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN avg_gets_per_row_per_exec ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       --TRUNC(SUM(buffer_gets_total)/SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1)),3) avg_gets_per_row_per_exec
                       TRUNC(SUM(buffer_gets_total) / SUM(NVL(NULLIF(executions_total,0),1)) / (SUM(NVL(NULLIF(rows_processed_total,0),1))/SUM(NVL(NULLIF(executions_total,0),1))),3) avg_gets_per_row_per_exec
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:57 col:4of5.

17:14:57 col:4of5 "00924_sqld360_323688_17vjd1aast5q7_4c_198_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_2.html"
17:14:58 col:4of5 "00925_sqld360_323688_17vjd1aast5q7_4c_198_avg_buffer_getsrowexecution_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:58 col:4of5 "Execution metrics per PHV"
17:14:58 Execution Plan Cost per PHV from AWR for Cluster

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = instance_number
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:58 col:4of5.

17:14:58 col:4of5 "00926_sqld360_323688_17vjd1aast5q7_4c_199_execution_plan_cost_per_phv_from_awr_for_cluster.html"
17:14:58 col:4of5 "00927_sqld360_323688_17vjd1aast5q7_4c_199_execution_plan_cost_per_phv_from_awr_for_cluster_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:58 col:4of5 "Execution metrics per PHV"
17:14:58 Execution Plan Cost per PHV from AWR for Instance 1

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 1
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:58 col:4of5.

17:14:58 col:4of5 "00928_sqld360_323688_17vjd1aast5q7_4c_200_execution_plan_cost_per_phv_from_awr_for_instance_1.html"
17:14:58 col:4of5 "00929_sqld360_323688_17vjd1aast5q7_4c_200_execution_plan_cost_per_phv_from_awr_for_instance_1_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:59 col:4of5 "Execution metrics per PHV"
17:14:59 Execution Plan Cost per PHV from AWR for Instance 2

SELECT b.snap_id snap_id,
       TO_CHAR(b.begin_interval_time, 'YYYY-MM-DD HH24:MI')  begin_time,
       TO_CHAR(b.end_interval_time, 'YYYY-MM-DD HH24:MI')  end_time,
       NVL(phv1 ,0) phv1_2157031554  ,
       NVL(phv2 ,0) phv2_2283497611  ,
       NVL(phv3 ,0) phv3_1631436210  ,
       NVL(phv4 ,0) phv4_585197806  ,
       NVL(phv5 ,0) phv5_878120166  ,
       NVL(phv6 ,0) phv6_3954730776  ,
       NVL(phv7 ,0) phv7_1553667503  ,
       NVL(phv8 ,0) phv8_  ,
       NVL(phv9 ,0) phv9_  ,
       NVL(phv10,0) phv10_ ,
       NVL(phv11,0) phv11_ ,
       NVL(phv12,0) phv12_ ,
       NVL(phv13,0) phv13_ ,
       NVL(phv14,0) phv14_ ,
       NVL(phv15,0) phv15_
  FROM (SELECT snap_id,
               MAX(CASE WHEN phv =           2157031554 THEN optimizer_cost ELSE NULL END) phv1,
               MAX(CASE WHEN phv =           2283497611 THEN optimizer_cost ELSE NULL END) phv2,
               MAX(CASE WHEN phv =           1631436210 THEN optimizer_cost ELSE NULL END) phv3,
               MAX(CASE WHEN phv =            585197806 THEN optimizer_cost ELSE NULL END) phv4,
               MAX(CASE WHEN phv =            878120166 THEN optimizer_cost ELSE NULL END) phv5,
               MAX(CASE WHEN phv =           3954730776 THEN optimizer_cost ELSE NULL END) phv6,
               MAX(CASE WHEN phv =           1553667503 THEN optimizer_cost ELSE NULL END) phv7,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv8,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv9,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv10,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv11,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv12,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv13,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv14,
               MAX(CASE WHEN phv =                   -1 THEN optimizer_cost ELSE NULL END) phv15
          FROM (SELECT snap_id,
                       plan_hash_value phv,
                       MEDIAN(optimizer_cost) optimizer_cost
                  FROM dba_hist_sqlstat
                 WHERE snap_id BETWEEN 3485 AND 4974
                   AND sql_id = '17vjd1aast5q7'
                   AND 'Y' = 'Y'
                   AND instance_number = 2
                   AND plan_hash_value IN (          2157031554,          2283497611,          1631436210,           585197806,           878120166,          3954730776,
                                                     1553667503,                  -1,                  -1,                  -1,                  -1,                  -1,
                                                             -1,                  -1,                  -1)
                 GROUP BY snap_id, plan_hash_value)
          GROUP BY snap_id) awr,
         dba_hist_snapshot b
 WHERE awr.snap_id(+) = b.snap_id
   AND b.snap_id BETWEEN 3485 AND 4974
 ORDER BY 3

17:14:59 col:4of5.

17:14:59 col:4of5 "00930_sqld360_323688_17vjd1aast5q7_4c_201_execution_plan_cost_per_phv_from_awr_for_instance_2.html"
17:14:59 col:4of5 "00931_sqld360_323688_17vjd1aast5q7_4c_201_execution_plan_cost_per_phv_from_awr_for_instance_2_line_chart.html"

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:59 col:5of5 "10053 Trace"
17:14:59 10053 Trace
BEGIN
*
ERROR at line 1:
ORA-20002: statement with sql_id=17vjd1aast5q7 child_number=0 not found.
ORA-06512: at "SYS.DBMS_SQLDIAG", line 1429
ORA-06512: at line 2




SP2-0310: unable to open file "sql/--sqld360_5g_remote_10053.sql"
203
Completed: 17:14:59

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:14:59 col:5of5 "SQL Monitor Reports"
17:14:59 SQL Monitor Reports
Completed: 17:15:01


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:01 col:5of5 "DDL"
17:15:01 Clean DDL

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:08 col:5of5 "Stats"
17:15:08 Set Stats

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

17:15:10 col:5of5 "SQL Tuning Advisor"
17:15:10 STA report
Completed: 17:15:10

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

DEFINE _DATE           = "2020-11-06/17:15:10" (CHAR)
DEFINE _CONNECT_IDENTIFIER = "PRD1" (CHAR)
DEFINE _USER           = "SYS" (CHAR)
DEFINE _PRIVILEGE      = "AS SYSDBA" (CHAR)
DEFINE _SQLPLUS_RELEASE = "1201000200" (CHAR)
DEFINE _EDITOR         = "ed" (CHAR)
DEFINE _O_VERSION      = "Oracle Database 12c EE Extreme Perf Release 12.1.0.2.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, Oracle Label Security,
OLAP, Advanced Analytics and Real Application Testing options" (CHAR)
DEFINE _O_RELEASE      = "1201000200" (CHAR)
DEFINE ASH_VALIDATION  = "" (CHAR)
DEFINE V_DOLLAR        = "V$" (CHAR)
DEFINE MY_SID          = "5432" (CHAR)
DEFINE LICENSE_PACK    = "T" (CHAR)
DEFINE DIAGNOSTICS_PACK = "Y" (CHAR)
DEFINE SKIP_DIAGNOSTICS = "" (CHAR)
DEFINE TUNING_PACK     = "Y" (CHAR)
DEFINE SKIP_TUNING     = "" (CHAR)
DEFINE CUSTOM_CONFIG_FILENAME = "null" (CHAR)
DEFINE EDB360_ESTIMATED_HRS = "1" (CHAR)
DEFINE ASH_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE MY_SPOOL_FILENAME = "awr_ash_pre_check_PRD.txt" (CHAR)
DEFINE ASH_EDB360_DAYS = "31" (CHAR)
DEFINE ASH_FTS_ON_EDB360 = "250" (CHAR)
DEFINE ASH_DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE NUMBER_OF_INSTANCES =                    2 (NUMBER)
DEFINE THIS_DBID       =           2109323688 (NUMBER)
DEFINE ASH_MIN_SNAP_ID = "0" (CHAR)
DEFINE ASH_MAX_SNAP_ID = "0" (CHAR)
DEFINE LAST_PURGE_TIME = "2020-09-18T00:28:18" (CHAR)
DEFINE DAYS_SINCE_PURGE = "49.5" (CHAR)
DEFINE ASH_LAST_ANALYZED = "2020-09-19T06:58:17" (CHAR)
DEFINE ASH_CBO_STATS_AGE_DAYS = "48.2" (CHAR)
DEFINE PERCENT_OF_INSERTS = "" (CHAR)
DEFINE ASH_SIZE_GB     = "2.6 GBs" (CHAR)
DEFINE LAST_DDL_TIME   = "2020-09-18T21:40:39" (CHAR)
DEFINE SEG_LAST_DDL_TIME = "2020-09-18T21:40:39" (CHAR)
DEFINE LAST_DDL_AGE_DAYS = "48.6" (CHAR)
DEFINE ASH_FTS_SECONDS = "122" (CHAR)
DEFINE ASH_DAYS_OF_HISTORY = "92.8" (CHAR)
DEFINE ASH_MED_SAMPLE_DATE = "2020-07-08T03:20:17" (CHAR)
DEFINE ASH_MEDIAN_AGE_DAYS = "121.3" (CHAR)
DEFINE IGNORE_THIS     =                    0 (NUMBER)
DEFINE EDB360_FTS_SECONDS = "1" (CHAR)
DEFINE _RC             = "10" (CHAR)
DEFINE EDB360_SECTIONS = "" (CHAR)
DEFINE SQL_TRACE_LEVEL = "1" (CHAR)
DEFINE EDB360_CONF_DAYS = "31" (CHAR)
DEFINE EDB360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_FROM = "0730" (CHAR)
DEFINE EDB360_CONF_WORK_TIME_TO = "1930" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_FROM = "2" (CHAR)
DEFINE EDB360_CONF_WORK_DAY_TO = "6" (CHAR)
DEFINE EDB360_CONF_MAX_HOURS = "24" (CHAR)
DEFINE EDB360_CHART_WIDTH = "809px" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_INDEX = "N" (CHAR)
DEFINE EDB360_CONF_INCL_DBNAME_FILE = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_MEM = "N" (CHAR)
DEFINE EDB360_CONF_INCL_SQL_MON = "N" (CHAR)
DEFINE EDB360_CONF_INCL_STAT_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PX_MEM = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SEGMENTS = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_SOURCE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE EDB360_EADAM_ROW_LIMIT = "10000000" (CHAR)
DEFINE TOOL_REPO_USER  = "" (CHAR)
DEFINE EDB360_OUTPUT_DIRECTORY = "" (CHAR)
DEFINE EDB360_MOVE_DIRECTORY = "" (CHAR)
DEFINE SKIP_ESP_AND_ESCP = "" (CHAR)
DEFINE EDB360_CONFIG_DBID = "" (CHAR)
DEFINE EDB360_HOST_NAME_SEPARATOR = "" (CHAR)
DEFINE EDB360_HOST_NAME_POSITION = "" (CHAR)
DEFINE EDB360_HOST_NAME_OCCURRENCE = "" (CHAR)
DEFINE EDB360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_XML = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_CSV = "N" (CHAR)
DEFINE EDB360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PERFHUB = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_DIFF_RPT = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_AWR_RANGE_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ADDM_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_ASH_ANALY_RPT = "N" (CHAR)
DEFINE EDB360_CONF_INCL_TKPROF = "Y" (CHAR)
DEFINE EDB360_CONF_INCL_PLOT_AWR = "N" (CHAR)
DEFINE EDB360_CONF_SERIES_SELECTION = "N" (CHAR)
DEFINE EDB360_MAX_WORK_DAYS_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_WORK_DAYS_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_HISTORY_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_HISTORY = "1" (CHAR)
DEFINE EDB360_MAX_5WD_PEAKS = "3" (CHAR)
DEFINE EDB360_MIN_5WD_PEAKS = "1" (CHAR)
DEFINE EDB360_MAX_7D_PEAKS = "3" (CHAR)
DEFINE EDB360_MED_7D   = "1" (CHAR)
DEFINE EDB360_CONF_TOP_SQL = "16" (CHAR)
DEFINE EDB360_CONF_TOP_CUR = "2" (CHAR)
DEFINE EDB360_CONF_TOP_SIG = "2" (CHAR)
DEFINE EDB360_CONF_PLANX_TOP = "16" (CHAR)
DEFINE EDB360_CONF_SQLMON_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLASH_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLHC_TOP = "0" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP = "8" (CHAR)
DEFINE EDB360_CONF_SQLD360_TOP_TC = "0" (CHAR)
DEFINE TOOL_PREFIX_1   = "dba_hist#" (CHAR)
DEFINE TOOL_PREFIX_2   = "dba#" (CHAR)
DEFINE TOOL_PREFIX_3   = "gv#" (CHAR)
DEFINE TOOL_PREFIX_4   = "v#" (CHAR)
DEFINE EDB360_CONF_TOOL_PAGE = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank">" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_ICON = "<a href="http://carlos-sierra.net/edb360-an-oracle-database-360-degree-view/" target="_blank"><img src="database.jpg" alt="eDB360" height="33" width="52" /></a>" (CHAR)
DEFINE EDB360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE EDB360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE EDB360_VYYNN    = "v192" (CHAR)
DEFINE EDB360_VRSN     = "v192 (2019-03-23)" (CHAR)
DEFINE EDB360_COPYRIGHT = " (c) 2019" (CHAR)
DEFINE EDB360_BYPASS   = "" (CHAR)
DEFINE AWR_HIST_PREFIX = "DBA_HIST_" (CHAR)
DEFINE AWR_OBJECT_PREFIX = "dba_hist_" (CHAR)
DEFINE DVA_VIEW_PREFIX = "DBA_" (CHAR)
DEFINE DVA_OBJECT_PREFIX = "dba_" (CHAR)
DEFINE GV_VIEW_PREFIX  = "GV$" (CHAR)
DEFINE GV_OBJECT_PREFIX = "gv$" (CHAR)
DEFINE V_VIEW_PREFIX   = "V$" (CHAR)
DEFINE V_OBJECT_PREFIX = "v$" (CHAR)
DEFINE EDB360_DBID     = "2109323688" (CHAR)
DEFINE HISTORY_DAYS    = "31" (CHAR)
DEFINE EDB360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE EDB360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE EDB360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE EDB360_DATE_FROM = "2020-10-06T11:22:16" (CHAR)
DEFINE EDB360_DATE_TO  = "2020-11-06T11:22:16" (CHAR)
DEFINE HIST_WORK_DAYS  = "23" (CHAR)
DEFINE SKIP_EXTRAS     = "" (CHAR)
DEFINE EDB360_0G       = "edb360_0g_" (CHAR)
DEFINE EDB360_1A       = "edb360_1a_" (CHAR)
DEFINE EDB360_1B       = "edb360_1b_" (CHAR)
DEFINE EDB360_1C       = "edb360_1c_" (CHAR)
DEFINE EDB360_1D       = "edb360_1d_" (CHAR)
DEFINE EDB360_1E       = "edb360_1e_" (CHAR)
DEFINE EDB360_1F       = "edb360_1f_" (CHAR)
DEFINE EDB360_1G       = "edb360_1g_" (CHAR)
DEFINE EDB360_2A       = "edb360_2a_" (CHAR)
DEFINE EDB360_2B       = "edb360_2b_" (CHAR)
DEFINE EDB360_2C       = "edb360_2c_" (CHAR)
DEFINE EDB360_2D       = "edb360_2d_" (CHAR)
DEFINE EDB360_2E       = "edb360_2e_" (CHAR)
DEFINE EDB360_3A       = "edb360_3a_" (CHAR)
DEFINE EDB360_3B       = "edb360_3b_" (CHAR)
DEFINE EDB360_3C       = "edb360_3c_" (CHAR)
DEFINE EDB360_3D       = "edb360_3d_" (CHAR)
DEFINE EDB360_3E       = "edb360_3e_" (CHAR)
DEFINE EDB360_3F       = "edb360_3f_" (CHAR)
DEFINE EDB360_3G       = "edb360_3g_" (CHAR)
DEFINE EDB360_3H       = "edb360_3h_" (CHAR)
DEFINE EDB360_3I       = "edb360_3i_" (CHAR)
DEFINE EDB360_3J       = "edb360_3j_" (CHAR)
DEFINE EDB360_4A       = "edb360_4a_" (CHAR)
DEFINE EDB360_4B       = "edb360_4b_" (CHAR)
DEFINE EDB360_4C       = "edb360_4c_" (CHAR)
DEFINE EDB360_4D       = "edb360_4d_" (CHAR)
DEFINE EDB360_4E       = "edb360_4e_" (CHAR)
DEFINE EDB360_4F       = "edb360_4f_" (CHAR)
DEFINE EDB360_4G       = "edb360_4g_" (CHAR)
DEFINE EDB360_4H       = "edb360_4h_" (CHAR)
DEFINE EDB360_4I       = "edb360_4i_" (CHAR)
DEFINE EDB360_4J       = "edb360_4j_" (CHAR)
DEFINE EDB360_4K       = "edb360_4k_" (CHAR)
DEFINE EDB360_4L       = "edb360_4l_" (CHAR)
DEFINE EDB360_5A       = "edb360_5a_" (CHAR)
DEFINE EDB360_5B       = "edb360_5b_" (CHAR)
DEFINE EDB360_5C       = "edb360_5c_" (CHAR)
DEFINE EDB360_5D       = "edb360_5d_" (CHAR)
DEFINE EDB360_5E       = "edb360_5e_" (CHAR)
DEFINE EDB360_5F       = "edb360_5f_" (CHAR)
DEFINE EDB360_5G       = "edb360_5g_" (CHAR)
DEFINE EDB360_6A       = "edb360_6a_" (CHAR)
DEFINE EDB360_6B       = "edb360_6b_" (CHAR)
DEFINE EDB360_6C       = "edb360_6c_" (CHAR)
DEFINE EDB360_6D       = "edb360_6d_" (CHAR)
DEFINE EDB360_6E       = "edb360_6e_" (CHAR)
DEFINE EDB360_6F       = "edb360_6f_" (CHAR)
DEFINE EDB360_6G       = "edb360_6g_" (CHAR)
DEFINE EDB360_6H       = "edb360_6h_" (CHAR)
DEFINE EDB360_6I       = "edb360_6i_" (CHAR)
DEFINE EDB360_6J       = "edb360_6j_" (CHAR)
DEFINE EDB360_6K       = "edb360_6k_" (CHAR)
DEFINE EDB360_6L       = "edb360_6l_" (CHAR)
DEFINE EDB360_6M       = "edb360_6m_" (CHAR)
DEFINE EDB360_6N       = "edb360_6n_" (CHAR)
DEFINE EDB360_7A       = "edb360_7a_" (CHAR)
DEFINE EDB360_7B       = "edb360_7b_" (CHAR)
DEFINE EDB360_7C       = "edb360_7c_" (CHAR)
DEFINE EDB360_PREFIX   = "edb360" (CHAR)
DEFINE ECR_COLLECTION_KEY = "PRD1219183590" (CHAR)
DEFINE SKIP_SCRIPT     = "sql/edb360_0f_skip_script.sql " (CHAR)
DEFINE EDB360_CON_ID   = "4" (CHAR)
DEFINE EDB360_PDB_NAME = "FRSTPROD" (CHAR)
DEFINE EDB360_DBMOD    = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NUMBER = "1" (CHAR)
DEFINE DATABASE_NAME_SHORT = "prd" (CHAR)
DEFINE HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_NAME_SUFFIX = "" (CHAR)
DEFINE ESP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE HOST_HASH       = "742967" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD = "20201106" (CHAR)
DEFINE MAIN_TABLE      = "DBA_ADVISOR_TASK" (CHAR)
DEFINE TITLE           = "STA report" (CHAR)
DEFINE TITLE_NO_SPACES = "sta_report" (CHAR)
DEFINE TITLE_SUFFIX    = "" (CHAR)
DEFINE EDB360_FILE_TIME = "20201106_1122" (CHAR)
DEFINE COMMON_EDB360_PREFIX = "edb360_323688" (CHAR)
DEFINE EDB360_MAIN_REPORT = "00001_edb360_323688_index" (CHAR)
DEFINE EDB360_LOG      = "00002_edb360_323688_log" (CHAR)
DEFINE EDB360_LOG2     = "00003_edb360_323688_log2" (CHAR)
DEFINE EDB360_LOG3     = "00004_edb360_323688_log3" (CHAR)
DEFINE EDB360_TKPROF   = "00005_edb360_323688_tkprof" (CHAR)
DEFINE EDB360_MAIN_FILENAME = "edb360_323688_742967" (CHAR)
DEFINE EDB360_ZIP_FILENAME = "edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_TRACEFILE_IDENTIFIER = "edb360_323688" (CHAR)
DEFINE EDB360_TAR_FILENAME = "00008_edb360_323688_742967_20201106_1122" (CHAR)
DEFINE EDB360_MV_HOST_COMMAND = "" (CHAR)
DEFINE DB_VERS_OFE     = "12.1.0.2" (CHAR)
DEFINE SKIP_AWR        = "" (CHAR)
DEFINE SKIP_STATSPACK  = "--skip--" (CHAR)
DEFINE ESP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_MAX_DAYS   = "365" (CHAR)
DEFINE ESCP_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE ESCP_HOST_NAME_SHORT = "aupp-hroradb-f9exx1" (CHAR)
DEFINE ESCP_DBNAME_SHORT = "prd" (CHAR)
DEFINE ESCP_COLLECTION_YYYYMMDD_HHMI = "20201106_1122" (CHAR)
DEFINE ESCP_COLLECTION_DAYS = "8" (CHAR)
DEFINE ESCP_THIS_DBID  = "2109323688" (CHAR)
DEFINE ESCP_THIS_INST_NUM = "1" (CHAR)
DEFINE ESCP_MIN_SNAP_ID = "4578" (CHAR)
DEFINE MAX_DAYS        = "365" (CHAR)
DEFINE INCLUDE_IC      = "Y" (CHAR)
DEFINE INCLUDE_NETW    = "Y" (CHAR)
DEFINE ESP_COLLECTION_YYYYMMDD_HHMI = "20201106_1128" (CHAR)
DEFINE COLLECTION_DAYS = "8" (CHAR)
DEFINE SKIP_ON_10G     = "" (CHAR)
DEFINE ECR_SQ_FACT_HINTS = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE ECR_DATE_FORMAT = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE ECR_DBID        = "2109323688" (CHAR)
DEFINE ECR_INSTANCE_NUMBER = "1" (CHAR)
DEFINE ECR_MIN_SNAP_ID = "4578" (CHAR)
DEFINE ECR_COLLECTION_HOST = "aupp-hroradb-f9exx1" (CHAR)
DEFINE USE_ON_10G      = "--" (CHAR)
DEFINE DB_VERSION      = "12.1.0.2.0" (CHAR)
DEFINE SKIP_10G_COLUMN = "" (CHAR)
DEFINE SKIP_10G_SCRIPT = "" (CHAR)
DEFINE SKIP_11G_COLUMN = "" (CHAR)
DEFINE SKIP_11G_SCRIPT = "" (CHAR)
DEFINE SKIP_11R1_COLUMN = "" (CHAR)
DEFINE SKIP_11R1_SCRIPT = "" (CHAR)
DEFINE SKIP_NON_REPO_COLUMN = "" (CHAR)
DEFINE SKIP_NON_REPO_SCRIPT = "" (CHAR)
DEFINE SKIP_12C_COLUMN = " -- skip 12c " (CHAR)
DEFINE SKIP_12C_SCRIPT = " echo skip 12c " (CHAR)
DEFINE SKIP_12R2_COLUMN = "" (CHAR)
DEFINE SKIP_12R2_SCRIPT = "" (CHAR)
DEFINE SKIP_18C_COLUMN = "" (CHAR)
DEFINE SKIP_18C_SCRIPT = "" (CHAR)
DEFINE SKIP_19C_COLUMN = "" (CHAR)
DEFINE SKIP_19C_SCRIPT = "" (CHAR)
DEFINE AVG_CPU_COUNT   =                   16 (NUMBER)
DEFINE SUM_CPU_COUNT   =                   32 (NUMBER)
DEFINE AVG_CORE_COUNT  = "16" (CHAR)
DEFINE AVG_THREAD_COUNT = "16" (CHAR)
DEFINE CPU_LOAD_THRESHOLD =                   32 (NUMBER)
DEFINE HOSTS_COUNT     = "2" (CHAR)
DEFINE CORES_THREADS_HOSTS = "cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE DATABASE_BLOCK_SIZE = "8192" (CHAR)
DEFINE TOOL_SYSDATE    = "20201106171144" (CHAR)
DEFINE BETWEEN_DATES   = ", between 2020-10-06T17:11:44 and 2020-11-06T17:11:44" (CHAR)
DEFINE MINIMUM_SNAP_ID = "3485" (CHAR)
DEFINE MAXIMUM_SNAP_ID = "4974" (CHAR)
DEFINE INST1_PRESENT   = "1" (CHAR)
DEFINE INST2_PRESENT   = "2" (CHAR)
DEFINE INST3_PRESENT   = "" (CHAR)
DEFINE INST4_PRESENT   = "" (CHAR)
DEFINE INST5_PRESENT   = "" (CHAR)
DEFINE INST6_PRESENT   = "" (CHAR)
DEFINE INST7_PRESENT   = "" (CHAR)
DEFINE INST8_PRESENT   = "" (CHAR)
DEFINE IS_SINGLE_INSTANCE = "" (CHAR)
DEFINE SKIP_INST1      = "" (CHAR)
DEFINE SKIP_INST2      = "" (CHAR)
DEFINE SKIP_INST3      = "-- skip inst3" (CHAR)
DEFINE SKIP_INST4      = "-- skip inst4" (CHAR)
DEFINE SKIP_INST5      = "-- skip inst5" (CHAR)
DEFINE SKIP_INST6      = "-- skip inst6" (CHAR)
DEFINE SKIP_INST7      = "-- skip inst7" (CHAR)
DEFINE SKIP_INST8      = "-- skip inst8" (CHAR)
DEFINE CHART_SETUP_DRIVER = "99800_edb360_323688_chart_setup_driver1.sql" (CHAR)
DEFINE EDB360_EADAM_SNAPS = "-666, 4925, 4869, 4821, 4887, 4839, 4791, 3948, 3900, 3852, 3996, 3804, 3756" (CHAR)
DEFINE EBS_RELEASE     = "" (CHAR)
DEFINE EBS_SYSTEM_NAME = "" (CHAR)
DEFINE SIEBEL_SCHEMA   = "" (CHAR)
DEFINE SIEBEL_APP_VER  = "" (CHAR)
DEFINE PSFT_SCHEMA     = "" (CHAR)
DEFINE PSFT_TOOLS_REL  = "" (CHAR)
DEFINE EDB360_SKIP_HTML = "" (CHAR)
DEFINE EDB360_SKIP_XML = " echo skip xml " (CHAR)
DEFINE EDB360_SKIP_TEXT = " echo skip text " (CHAR)
DEFINE EDB360_SKIP_CSV = " echo skip csv " (CHAR)
DEFINE EDB360_SKIP_LINE = "" (CHAR)
DEFINE EDB360_SKIP_PIE = "" (CHAR)
DEFINE EDB360_SKIP_BAR = "" (CHAR)
DEFINE EDB360_SKIP_METADATA = "" (CHAR)
DEFINE EDB360_SKIP_ASH_MEM = " echo skip ash mem " (CHAR)
DEFINE EDB360_SKIP_SQL_MON = " echo skip sql mon " (CHAR)
DEFINE EDB360_SKIP_STAT_MEM = "" (CHAR)
DEFINE EDB360_SKIP_PX_MEM = "" (CHAR)
DEFINE TOP_LEVEL_HINTS = "NO_MERGE" (CHAR)
DEFINE SQ_FACT_HINTS   = "MATERIALIZE NO_MERGE" (CHAR)
DEFINE DS_HINT         = "DYNAMIC_SAMPLING(4)" (CHAR)
DEFINE ASH_HINTS1      = " FULL(h.ash) FULL(h.evt) FULL(h.sn) USE_HASH(h.sn h.ash h.evt) " (CHAR)
DEFINE ASH_HINTS2      = " FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.ash) FULL(h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE ASH_HINTS3      = " USE_HASH(h.INT$DBA_HIST_ACT_SESS_HISTORY.sn h.INT$DBA_HIST_ACT_SESS_HISTORY.ash h.INT$DBA_HIST_ACT_SESS_HISTORY.evt) " (CHAR)
DEFINE DEF_MAX_ROWS    = "50000" (CHAR)
DEFINE MAX_ROWS        = "50000" (CHAR)
DEFINE EXCLUSION_LIST  = "('ANONYMOUS','APEX_030200','APEX_040000','APEX_040200','APEX_SSO','APPQOSSYS','CTXSYS','DBSNMP','DIP','EXFSYS','FLOWS_FILES','MDSYS','OLAPSYS','ORACLE_OCM','ORDDATA','ORDPLUGINS','ORDSYS','OUTLN','OWBSYS')" (CHAR)
DEFINE EXCLUSION_LIST2 = "('SI_INFORMTN_SCHEMA','SQLTXADMIN','SQLTXPLAIN','SYS','SYSMAN','SYSTEM','TRCANLZR','WMSYS','XDB','XS$NULL','PERFSTAT','STDBYPERF','MGDSYS','OJVMSYS')" (CHAR)
DEFINE SKIP_HTML       = "" (CHAR)
DEFINE SKIP_TEXT       = "" (CHAR)
DEFINE SKIP_CSV        = "" (CHAR)
DEFINE SKIP_LCH        = "Y" (CHAR)
DEFINE SKIP_LCH2       = "--skip--" (CHAR)
DEFINE SKIP_PCH        = "Y" (CHAR)
DEFINE SKIP_BCH        = "Y" (CHAR)
DEFINE SKIP_ALL        = "" (CHAR)
DEFINE ABSTRACT        = "" (CHAR)
DEFINE ABSTRACT2       = "" (CHAR)
DEFINE FOOT            = "" (CHAR)
DEFINE ABSTRACT_UOM    = "Memory is accounted as power of two (binary) while storage and network traffic as power of ten (decimal). <br />" (CHAR)
DEFINE CHARTYPE        = "LineChart" (CHAR)
DEFINE STACKED         = "" (CHAR)
DEFINE HAXIS           = "17vjd1aast5q7 12.1.0.2.0 cores:16(avg) threads:16(avg) hosts:2(avg)" (CHAR)
DEFINE VAXIS           = "Optimizer cost" (CHAR)
DEFINE VBASELINE       = "" (CHAR)
DEFINE BAR_HEIGHT      = "45%" (CHAR)
DEFINE TIT_01          = "2157031554" (CHAR)
DEFINE TIT_02          = "2283497611" (CHAR)
DEFINE TIT_03          = "1631436210" (CHAR)
DEFINE TIT_04          = "585197806" (CHAR)
DEFINE TIT_05          = "878120166" (CHAR)
DEFINE TIT_06          = "3954730776" (CHAR)
DEFINE TIT_07          = "1553667503" (CHAR)
DEFINE TIT_08          = "" (CHAR)
DEFINE TIT_09          = "" (CHAR)
DEFINE TIT_10          = "" (CHAR)
DEFINE TIT_11          = "" (CHAR)
DEFINE TIT_12          = "" (CHAR)
DEFINE TIT_13          = "" (CHAR)
DEFINE TIT_14          = "" (CHAR)
DEFINE TIT_15          = "" (CHAR)
DEFINE CONT_01         = "-1" (CHAR)
DEFINE CONT_02         =                   -1 (NUMBER)
DEFINE CONT_03         =                   -1 (NUMBER)
DEFINE CONT_04         =                   -1 (NUMBER)
DEFINE CONT_05         =                   -1 (NUMBER)
DEFINE CONT_06         =                   -1 (NUMBER)
DEFINE CONT_07         =                   -1 (NUMBER)
DEFINE CONT_08         =                   -1 (NUMBER)
DEFINE CONT_09         =                   -1 (NUMBER)
DEFINE CONT_10         =                   -1 (NUMBER)
DEFINE CONT_11         =                   -1 (NUMBER)
DEFINE CONT_12         =                   -1 (NUMBER)
DEFINE CONT_13         =                   -1 (NUMBER)
DEFINE CONT_14         =                   -1 (NUMBER)
DEFINE CONT_15         =                   -1 (NUMBER)
DEFINE WAIT_CLASS_01   = "Application" (CHAR)
DEFINE EVENT_NAME_01   = "enq: TM - contention" (CHAR)
DEFINE WAIT_CLASS_02   = "User I/O" (CHAR)
DEFINE EVENT_NAME_02   = "cell single block physical read" (CHAR)
DEFINE WAIT_CLASS_03   = "Network" (CHAR)
DEFINE EVENT_NAME_03   = "SQL*Net more data to client" (CHAR)
DEFINE WAIT_CLASS_04   = "Administrative" (CHAR)
DEFINE EVENT_NAME_04   = "Backup: MML write backup piece" (CHAR)
DEFINE WAIT_CLASS_05   = "Cluster" (CHAR)
DEFINE EVENT_NAME_05   = "gc cr disk read" (CHAR)
DEFINE WAIT_CLASS_06   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_06   = "cursor: pin S wait on X" (CHAR)
DEFINE WAIT_CLASS_07   = "User I/O" (CHAR)
DEFINE EVENT_NAME_07   = "direct path read" (CHAR)
DEFINE WAIT_CLASS_08   = "Other" (CHAR)
DEFINE EVENT_NAME_08   = "rdbms ipc reply" (CHAR)
DEFINE WAIT_CLASS_09   = "Application" (CHAR)
DEFINE EVENT_NAME_09   = "enq: TX - row lock contention" (CHAR)
DEFINE WAIT_CLASS_10   = "User I/O" (CHAR)
DEFINE EVENT_NAME_10   = "cell multiblock read request" (CHAR)
DEFINE WAIT_CLASS_11   = "User I/O" (CHAR)
DEFINE EVENT_NAME_11   = "cell multiblock physical read" (CHAR)
DEFINE WAIT_CLASS_12   = "Cluster" (CHAR)
DEFINE EVENT_NAME_12   = "gc current block 2-way" (CHAR)
DEFINE EXADATA         = "" (CHAR)
DEFINE MAX_COL_NUMBER  = "5" (CHAR)
DEFINE COLUMN_NUMBER   = "5" (CHAR)
DEFINE RECOVERY        = "& recovery" (CHAR)
DEFINE TOTAL_HOURS     = "" (CHAR)
DEFINE EDB360_TIME_STAMP = "2020-11-06T13:52:14" (CHAR)
DEFINE REPORT_SEQUENCE = "205" (CHAR)
DEFINE CURRENT_TIME    = "17:15:10" (CHAR)
DEFINE EXACT_MATCHING_SIGNATURE =  1782922979743544096 (NUMBER)
DEFINE FORCE_MATCHING_SIGNATURE =  1782922979743544096 (NUMBER)
DEFINE WAIT_CLASS_COLORS = "CASE wait_class WHEN ''CPU'' THEN ''34CF27'' WHEN ''Scheduler'' THEN ''9FFA9D'' WHEN ''User I/O'' THEN ''0252D7'' WHEN ''System I/O'' THEN ''1E96DD'' " (CHAR)
DEFINE WAIT_CLASS_COLORS2 = " WHEN ''Concurrency'' THEN ''871C12'' WHEN ''Application'' THEN ''C42A05'' WHEN ''Commit'' THEN ''EA6A05'' WHEN ''Configuration'' THEN ''594611''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3 = " WHEN ''Administrative'' THEN ''75763E''  WHEN ''Network'' THEN ''989779'' WHEN ''Other'' THEN ''F571A0'' " (CHAR)
DEFINE WAIT_CLASS_COLORS4 = " WHEN ''Cluster'' THEN ''CEC3B5'' WHEN ''Queueing'' THEN ''C6BAA5'' END" (CHAR)
DEFINE SERIES_01       = "" (CHAR)
DEFINE SERIES_02       = "" (CHAR)
DEFINE SERIES_03       = "" (CHAR)
DEFINE SERIES_04       = "" (CHAR)
DEFINE SERIES_05       = "" (CHAR)
DEFINE SERIES_06       = "" (CHAR)
DEFINE SERIES_07       = "" (CHAR)
DEFINE SERIES_08       = "" (CHAR)
DEFINE SERIES_09       = "" (CHAR)
DEFINE SERIES_10       = "" (CHAR)
DEFINE SERIES_11       = "" (CHAR)
DEFINE SERIES_12       = "" (CHAR)
DEFINE SERIES_13       = "" (CHAR)
DEFINE SERIES_14       = "" (CHAR)
DEFINE SERIES_15       = "" (CHAR)
DEFINE SKIP_LCHP       = "--skip--" (CHAR)
DEFINE EDB360_UDUMP_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE EDB360_SPID     = "274417" (CHAR)
DEFINE REPORT_DBNAME   = "" (CHAR)
DEFINE SECTION_ID      = "5h" (CHAR)
DEFINE SECTION_NAME    = "SQL Tuning Advisor" (CHAR)
DEFINE PROCESSOR_MODEL = "Intel(R) Xeon(R) Platinum 8270CL CPU @ 2.70GHz" (CHAR)
DEFINE HH_MM_SS        = "17:15:10" (CHAR)
DEFINE SPOOL_FILENAME  = "sqld360_323688_17vjd1aast5q7_5h_204_sta_report" (CHAR)
DEFINE ROW_NUM         = "2980" (CHAR)
DEFINE EDB360_PREV_SQL_ID = "7uwhxftumj625" (CHAR)
DEFINE EDB360_PREV_CHILD_NUMBER = "0" (CHAR)
DEFINE ONE_SPOOL_FILENAME = "00936_sqld360_323688_17vjd1aast5q7_5h_204_sta_report" (CHAR)
DEFINE EDB360_TUNING_PACK_FOR_SQLMON = "N" (CHAR)
DEFINE SKIP_SQLMON_EXEC = " echo skip sqlmon" (CHAR)
DEFINE EDB360_SQL_TEXT_100 = "SELECT TO_CHAR(ROWNUM) row_num, v0.* FROM /* 4b.455 */ ( WITH pgastat_denorm_1 AS ( SELECT /*+  MATE" (CHAR)
DEFINE STATSPACK_USER  = "perfstat" (CHAR)
DEFINE SP_MINIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SP_MAXIMUM_SNAP_ID = "-1" (CHAR)
DEFINE SKIP_IF_MISSING = " echo skip " (CHAR)
DEFINE TOTAL_BUFFER_GETS =          20276118710 (NUMBER)
DEFINE TOTAL_DISK_READS =            123439198 (NUMBER)
DEFINE REPORT_DATE     = "2020-11-06T11:45:41" (CHAR)
DEFINE DAYS_OF_HISTORY_ACCESSED = "31" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_TIMES = "10" (CHAR)
DEFINE CAPTURED_AT_LEAST_X_DAYS_APART = "5" (CHAR)
DEFINE MED_ELAP_MICROSECS_THRESHOLD = "1e4" (CHAR)
DEFINE MIN_SLOPE_THRESHOLD = "0.1" (CHAR)
DEFINE MAX_NUM_ROWS_X  = "20" (CHAR)
DEFINE SKIP_INST       = "" (CHAR)
DEFINE CORES_OVER_THREADS = "" (CHAR)
DEFINE SUBPOOL_01      = "SQLA" (CHAR)
DEFINE SUBPOOL_02      = "Result Cache" (CHAR)
DEFINE SUBPOOL_03      = "KGLH0" (CHAR)
DEFINE SUBPOOL_04      = "gcs resources" (CHAR)
DEFINE SUBPOOL_05      = "gcs shadows" (CHAR)
DEFINE SUBPOOL_06      = "" (CHAR)
DEFINE SUBPOOL_07      = "" (CHAR)
DEFINE SUBPOOL_08      = "" (CHAR)
DEFINE SUBPOOL_09      = "" (CHAR)
DEFINE SUBPOOL_10      = "" (CHAR)
DEFINE TEXT            = "Y" (CHAR)
DEFINE ACTIVE          = "Y" (CHAR)
DEFINE MAX_REPORTS     = "12" (CHAR)
DEFINE INPUT_LICENSE   = "Y" (CHAR)
DEFINE SQL_ID          = "1wjt2ut7cah6k" (CHAR)
DEFINE DATE_MASK       = "YYYY-MM-DD/HH24:MI:SS" (CHAR)
DEFINE WAIT_CLASS_13   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_13   = "row cache lock" (CHAR)
DEFINE WAIT_CLASS_14   = "Cluster" (CHAR)
DEFINE EVENT_NAME_14   = "gc cr multi block request" (CHAR)
DEFINE WAIT_CLASS_15   = "Cluster" (CHAR)
DEFINE EVENT_NAME_15   = "gc cr grant 2-way" (CHAR)
DEFINE WAIT_CLASS_16   = "Cluster" (CHAR)
DEFINE EVENT_NAME_16   = "gc current grant 2-way" (CHAR)
DEFINE WAIT_CLASS_17   = "Concurrency" (CHAR)
DEFINE EVENT_NAME_17   = "library cache lock" (CHAR)
DEFINE WAIT_CLASS_18   = "Other" (CHAR)
DEFINE EVENT_NAME_18   = "DFS lock handle" (CHAR)
DEFINE WAIT_CLASS_19   = "User I/O" (CHAR)
DEFINE EVENT_NAME_19   = "cell smart table scan" (CHAR)
DEFINE WAIT_CLASS_20   = "User I/O" (CHAR)
DEFINE EVENT_NAME_20   = "direct path read temp" (CHAR)
DEFINE WAIT_CLASS_21   = "Scheduler" (CHAR)
DEFINE EVENT_NAME_21   = "resmgr:cpu quantum" (CHAR)
DEFINE WAIT_CLASS_22   = "User I/O" (CHAR)
DEFINE EVENT_NAME_22   = "cell single block read request" (CHAR)
DEFINE WAIT_CLASS_23   = "Cluster" (CHAR)
DEFINE EVENT_NAME_23   = "gc cr block busy" (CHAR)
DEFINE WAIT_CLASS_24   = "Other" (CHAR)
DEFINE EVENT_NAME_24   = "gcs drm freeze in enter server mode" (CHAR)
DEFINE ONE_MS_COMP     = "<=" (CHAR)
DEFINE TWO_MS_COMP     = ">" (CHAR)
DEFINE VAXIS1          = "Waits Count" (CHAR)
DEFINE VAXIS2          = "" (CHAR)
DEFINE 7               = "edb360_9a_pre_one.sql" (CHAR)
DEFINE BETWEEN_TIMES   = ", between 2020-10-06T11:22:16 and 2020-11-06T11:22:16" (CHAR)
DEFINE FILTER_PREDICATE = "instance_number = 8" (CHAR)
DEFINE CALL_SQLD360_BITMASK = "110031" (CHAR)
DEFINE CALL_SQLD360_BITMASK_TC = "111031" (CHAR)
DEFINE FILES_PREFIX    = "" (CHAR)
DEFINE SQ_FACT_SQL_SAMPLE_HINTS = " MATERIALIZE NO_MERGE " (CHAR)
DEFINE IS_10G          = "" (CHAR)
DEFINE IS_11R1         = "" (CHAR)
DEFINE IS_11R2         = "" (CHAR)
DEFINE X_MINIMUM_SNAP_ID = "3483" (CHAR)
DEFINE X_MAXIMUM_SNAP_ID = "4973" (CHAR)
DEFINE X_MINIMUM_DATE  = "2020-10-06T16:30:07" (CHAR)
DEFINE X_MAXIMUM_DATE  = "2020-11-06T16:30:43" (CHAR)
DEFINE SIGNATURE       = "9380065298533696050" (CHAR)
DEFINE SIGNATUREF      = "9380065298533696050" (CHAR)
DEFINE X_HOST_NAME     = "aupp-hroradb-f9exx1" (CHAR)
DEFINE X_DB_NAME       = "PRD" (CHAR)
DEFINE X_CONTAINER     = "FRSTPROD" (CHAR)
DEFINE SQL_HANDLE      = "" (CHAR)
DEFINE X_SLICES        = "20" (CHAR)
DEFINE X_DAYS          = "31" (CHAR)
DEFINE TABLES_LIST     = "(('THH_C4C','A_APBL'),('THH_C4C','A_APBLSRVC'),('THH_C4C','A_MEMBDGISBASE'),('THH_C4C','A_USR'),('THH_C4C','MV_PATID_CLINIC_COND_SRVCD'),('THH_C4C','T_DRUGCLM'),('THH_C4C','T_MDCLCLM'),('THH_C4C','T_MDCT'),('THH_C4C','T_SRVC'),('THH_C4C','T_USR'))" (CHAR)
DEFINE TIMESTAMP_MASK  = "YYYY-MM-DD/HH24:MI:SS.FF6" (CHAR)
DEFINE FIELDS_DELIMITER = "<,>" (CHAR)
DEFINE EADAM_CURRENT_TIME = "20201106163916" (CHAR)
DEFINE EDB360_SECS2GO  = "67310" (CHAR)
DEFINE DRIVER_TIME     = "164026" (CHAR)
DEFINE FROM_EDB360     = "--" (CHAR)
DEFINE SKIP_TCB        = "--" (CHAR)
DEFINE SQLD360_FROMEDB360_DAYS = "31" (CHAR)
DEFINE SECS2GO_STARTTIME = "20201106171144" (CHAR)
DEFINE SKIP_SQLD360    = "" (CHAR)
DEFINE SQLD360_CONTAINER = "FRSTPROD" (CHAR)
DEFINE SQLD360_CONF_DAYS = "61" (CHAR)
DEFINE SQLD360_CONF_DATE_FROM = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_DATE_TO = "YYYY-MM-DD" (CHAR)
DEFINE SQLD360_CONF_INCL_HTML = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TEXT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_CSV = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_XML = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_LINE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_PIE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BAR = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TREE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_BUBBLE = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SCATT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_SQLMON = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_ASH_HIST = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_AWRRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_ASHRPT = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_EADAM = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_RAWASH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS_H = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_FMATCH = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_METADATA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_STATS = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_TCB = "N" (CHAR)
DEFINE SQLD360_CONF_INCL_STA = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_CBOENV = "N" (CHAR)
DEFINE SQLD360_CONF_TCB_SAMPLE = "0" (CHAR)
DEFINE SQLD360_CONF_TRANSLATE_LOWHIGH = "Y" (CHAR)
DEFINE SQLD360_CONF_FIRST_PART = "10" (CHAR)
DEFINE SQLD360_CONF_LAST_PART = "10" (CHAR)
DEFINE SQLD360_NUM_PLAN_DETAILS = "20" (CHAR)
DEFINE SQLD360_CONF_NUM_TOP_EXECS = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_AWRRPT = "3" (CHAR)
DEFINE SQLD360_CONF_NUM_SQLMON_REP = "12" (CHAR)
DEFINE SQLD360_CONF_AVG_ET_PERCTH = "90" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_DEPT = "Y" (CHAR)
DEFINE SQLD360_CONF_INCL_OBJ_ASHBASED = "N" (CHAR)
DEFINE SQLD360_SQLTRACE_LEVEL = "0" (CHAR)
DEFINE SQLD360_CONF_DBID = "" (CHAR)
DEFINE SQLD360_CONF_AWR_TIMESCALE = "ms" (CHAR)
DEFINE SQLD360_CONF_TOOL_PAGE = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank">" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_ICON = "<a href="http://mauro-pagano.com/2015/02/16/sqld360-sql-diagnostics-collection-made-faster/" target="_blank"><img src="SQLd360_img.jpg" alt="SQLd360" height="33" width="52"></a>" (CHAR)
DEFINE SQLD360_CONF_ALL_PAGES_LOGO = "" (CHAR)
DEFINE SQLD360_CONF_GOOGLE_CHARTS = "<script type="text/javascript" src="https://www.google.com/jsapi"></script>" (CHAR)
DEFINE SQLD360_VYYNN   = "v192" (CHAR)
DEFINE SQLD360_VRSN    = "v192 (2019-03-23)" (CHAR)
DEFINE SQLD360_PREFIX  = "sqld360" (CHAR)
DEFINE SQLD360_SQLID   = "17vjd1aast5q7" (CHAR)
DEFINE SQLD360_DBID    = "2109323688" (CHAR)
DEFINE SQLD360_DBMOD   = "323688" (CHAR)
DEFINE CONNECT_INSTANCE_NAME = "PRD1" (CHAR)
DEFINE SQLD360_DB_BLOCK_SIZE = "8192" (CHAR)
DEFINE SQLD360_DATE_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS" (CHAR)
DEFINE SQLD360_TIMESTAMP_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FF" (CHAR)
DEFINE SQLD360_TIMESTAMP_TZ_FORMAT = "YYYY-MM-DD"T"HH24:MI:SS.FFTZH:TZM" (CHAR)
DEFINE SQLD360_DATE_FROM = "2020-10-06T17:11:44" (CHAR)
DEFINE SQLD360_DATE_TO = "2020-11-06T17:11:44" (CHAR)
DEFINE SKIP_10G        = "" (CHAR)
DEFINE SKIP_11G        = "" (CHAR)
DEFINE SKIP_11R1       = "" (CHAR)
DEFINE SKIP_11R201     = "" (CHAR)
DEFINE SKIP_11R203     = "" (CHAR)
DEFINE SKIP_12C        = "--" (CHAR)
DEFINE SKIP_12R101     = "" (CHAR)
DEFINE SKIP_12R1       = "--" (CHAR)
DEFINE SKIP_18C        = "" (CHAR)
DEFINE SKIP_19C        = "" (CHAR)
DEFINE SQLD360_FILE_TIME = "20201106_1711" (CHAR)
DEFINE AS_OF_DATE      = ", as of Fri Nov 06 @05:11PM" (CHAR)
DEFINE SQLD360_ASHDISKFILTER =                   10 (NUMBER)
DEFINE SQLD360_ASHSAMPLE =                    1 (NUMBER)
DEFINE SQLD360_ASHTIMEVALUE =                   10 (NUMBER)
DEFINE SQLD360_REMOTE_EXEC = "--" (CHAR)
DEFINE SQLD360_LOCAL_EXEC = "" (CHAR)
DEFINE SQLD360_UDUMP_PATH = "/u02/app/oracle/product/12.1.0/dbhome_3/rdbms/log/" (CHAR)
DEFINE SQLD360_DIAGTRACE_PATH = "/u02/app/oracle/diag/rdbms/prd_iad3vt/PRD1/trace/" (CHAR)
DEFINE SQLD360_SPID    = "274417" (CHAR)
DEFINE SQLD360_SQLTXT  = "SELECT DISTINCT PF.PERF_USR FROM T_WKFWTSK WF , T_WKFWTSK_STT_CNGE CNG , T_PRMR " (CHAR)
DEFINE SQLD360_IS_INSERT = "N" (CHAR)
DEFINE XPLAN_USER      = "THH_C4C" (CHAR)
DEFINE CURRENT_USER    = "SYS" (CHAR)
DEFINE XPLAN_SQL       = "SELECT DISTINCT PF.PERF_USR FROM T_WKFWTSK WF , T_WKFWTSK_STT_CNGE CNG , T_PRMR PF, T_USR U WHERE WF.WTSK_OBJ_STT IN (SELECT COLUMN_VALUE FROM TABLE(CAST (:B1 AS NUMBER_TT))) AND WF.WTSK_TNFR IS NULL AND WF.WTSK_CURRSTT = CNG.WTSC_ID AND CNG.WTSC_ID = PF.PERF_STT AND U.USR_ID = PF.PERF_USR AND U.USR_ID = U.PAYR_ID" (CHAR)
DEFINE SQLD360_XPLAN_SQLID = "9babjv8yq8ru3" (CHAR)
DEFINE SKIP_FORCE_MATCH = "--" (CHAR)
DEFINE SQLD360_SKIP_HTML = "" (CHAR)
DEFINE SQLD360_SKIP_XML = "--" (CHAR)
DEFINE SQLD360_SKIP_TEXT = "--" (CHAR)
DEFINE SQLD360_SKIP_CSV = "--" (CHAR)
DEFINE SQLD360_SKIP_LINE = "" (CHAR)
DEFINE SQLD360_SKIP_PIE = "" (CHAR)
DEFINE SQLD360_SKIP_BAR = "" (CHAR)
DEFINE SQLD360_SKIP_TREE = "" (CHAR)
DEFINE SQLD360_SKIP_BUBBLE = "" (CHAR)
DEFINE SQLD360_SKIP_SCATT = "" (CHAR)
DEFINE SQLD360_SKIP_AWRRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_ASHRPT = "--" (CHAR)
DEFINE SQLD360_SKIP_SQLMON = "" (CHAR)
DEFINE SQLD360_SKIP_STA = "" (CHAR)
DEFINE SQLD360_SKIP_EADAM = "" (CHAR)
DEFINE SQLD360_SKIP_RAWASH = "" (CHAR)
DEFINE SQLD360_SKIP_STATS_H = "" (CHAR)
DEFINE SQLD360_SKIP_FMATCH = "" (CHAR)
DEFINE SQLD360_SKIP_METADATA = "" (CHAR)
DEFINE SQLD360_SKIP_STATS = "" (CHAR)
DEFINE SQLD360_SKIP_TCB = "--" (CHAR)
DEFINE SQLD360_SKIP_CBOENV = "--" (CHAR)
DEFINE SQLD360_TCB_EXP_DATA = "FALSE" (CHAR)
DEFINE SQLD360_TCB_EXP_SAMPLE =                    0 (NUMBER)
DEFINE SQLD360_SKIP_OBJD = "" (CHAR)
DEFINE SQLD360_SKIP_OBJ_ASHBASED = "--" (CHAR)
DEFINE SQLD360_SKIP_LOWHIGH = "" (CHAR)
DEFINE SQLD360_HAS_PLSQL = "--" (CHAR)
DEFINE SQLD360_NO_READ_STATS_H = "" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_D = "1e3" (CHAR)
DEFINE SQLD360_AWR_TIMESCALE_L = "ms" (CHAR)
DEFINE COMMON_SQLD360_PREFIX = "sqld360_323688_17vjd1aast5q7" (CHAR)
DEFINE SQLD360_MAIN_REPORT = "00001_sqld360_323688_17vjd1aast5q7_index" (CHAR)
DEFINE SQLD360_LOG     = "00002_sqld360_323688_17vjd1aast5q7_log" (CHAR)
DEFINE SQLD360_TKPROF  = "00003_sqld360_323688_17vjd1aast5q7_tkprof" (CHAR)
DEFINE SQLD360_MAIN_FILENAME = "sqld360_323688_17vjd1aast5q7_742967" (CHAR)
DEFINE SQLD360_LOG2    = "00004_sqld360_323688_17vjd1aast5q7_log2" (CHAR)
DEFINE SQLD360_TRACEFILE_IDENTIFIER = "sqld360_323688_17vjd1aast5q7" (CHAR)
DEFINE SQLD360_COPYRIGHT = " (c) 2015" (CHAR)
DEFINE NUM_PARTS       = "100" (CHAR)
DEFINE DEFAULT_DIR     = "SQLD360_DIR" (CHAR)
DEFINE SQLMON_DATE_MASK = "YYYYMMDDHH24MISS" (CHAR)
DEFINE SQLMON_TEXT     = "Y" (CHAR)
DEFINE SQLMON_ACTIVE   = "Y" (CHAR)
DEFINE SQLMON_HIST     = "Y" (CHAR)
DEFINE ASH_DATE_MASK   = "YYYYMMDDHH24MISS" (CHAR)
DEFINE ASH_TEXT        = "Y" (CHAR)
DEFINE ASH_HTML        = "Y" (CHAR)
DEFINE ASH_MEM         = "Y" (CHAR)
DEFINE ASH_AWR         = "Y" (CHAR)
DEFINE ASH_MAX_REPORTS = "12" (CHAR)
DEFINE WAIT_CLASS_COLORS_S = "CASE wait_class WHEN ''CPU'' THEN ''color: ''''#34CF27'''''' WHEN ''Scheduler'' THEN ''color: ''''#9FFA9D'''''' WHEN ''User I/O'' THEN ''color: ''''#0252D7'''''' WHEN ''System I/O'' THEN ''color: ''''#1E96DD'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS2_S = " WHEN ''Concurrency'' THEN ''color: ''''#871C12'''''' WHEN ''Application'' THEN ''color: ''''#C42A05'''''' WHEN ''Commit'' THEN ''color: ''''#EA6A05'''''' WHEN ''Configuration'' THEN ''color: ''''#594611''''''  " (CHAR)
DEFINE WAIT_CLASS_COLORS3_S = " WHEN ''Administrative'' THEN ''color: ''''#75763E''''''  WHEN ''Network'' THEN ''color: ''''#989779'''''' WHEN ''Other'' THEN ''color: ''''#F571A0'''''' " (CHAR)
DEFINE WAIT_CLASS_COLORS4_S = " WHEN ''Cluster'' THEN ''color: ''''#CEC3B5'''''' WHEN ''Queueing'' THEN ''color: ''''#C6BAA5'''''' END" (CHAR)
DEFINE SKIP_XML        = "" (CHAR)
DEFINE SKIP_TCH        = "Y" (CHAR)
DEFINE SKIP_UCH        = "Y" (CHAR)
DEFINE SKIP_SCH        = "Y" (CHAR)
DEFINE TREECOLOR       = "" (CHAR)
DEFINE BUBBLEMAXVALUE  = "" (CHAR)
DEFINE BUBBLESERIES    = "series: {'CPU': {color: '#34CF27'}, 'I/O': {color: '#0252D7'}, 'Concurrency': {color: '#871C12'}, 'Cluster': {color: '#CEC3B5'}, 'Other': {color: '#C6BAA5'}, 'Multiple': {color: '#CCFFFF'}}," (CHAR)
DEFINE BUBBLESDETAILS  = "" (CHAR)
DEFINE SQL_TEXT        = "" (CHAR)
DEFINE SQLD360_TIME_STAMP = "2020-11-06/17:15:10" (CHAR)
DEFINE NUM_PLANS       = "8" (CHAR)
DEFINE SQLD360_MAIN_REPORT_BCK = "00001_sqld360_323688_17vjd1aast5q7_index" (CHAR)
DEFINE NUM_BINDS       = "1" (CHAR)
DEFINE NUM_HISTOGRAMS  = "3" (CHAR)
DEFINE COLS_FROM_PART_TABLES = "0" (CHAR)
DEFINE PART_TABLES     = "0" (CHAR)
DEFINE TIT_01_AWR      = "2157031554" (CHAR)
DEFINE TIT_02_AWR      = "2283497611" (CHAR)
DEFINE TIT_03_AWR      = "1631436210" (CHAR)
DEFINE TIT_04_AWR      = "585197806" (CHAR)
DEFINE TIT_05_AWR      = "878120166" (CHAR)
DEFINE TIT_06_AWR      = "3954730776" (CHAR)
DEFINE TIT_07_AWR      = "1553667503" (CHAR)
DEFINE TIT_08_AWR      = "" (CHAR)
DEFINE TIT_09_AWR      = "" (CHAR)
DEFINE TIT_10_AWR      = "" (CHAR)
DEFINE TIT_11_AWR      = "" (CHAR)
DEFINE TIT_12_AWR      = "" (CHAR)
DEFINE TIT_13_AWR      = "" (CHAR)
DEFINE TIT_14_AWR      = "" (CHAR)
DEFINE TIT_15_AWR      = "" (CHAR)
DEFINE PHV_01_AWR      =           2157031554 (NUMBER)
DEFINE PHV_02_AWR      =           2283497611 (NUMBER)
DEFINE PHV_03_AWR      =           1631436210 (NUMBER)
DEFINE PHV_04_AWR      =            585197806 (NUMBER)
DEFINE PHV_05_AWR      =            878120166 (NUMBER)
DEFINE PHV_06_AWR      =           3954730776 (NUMBER)
DEFINE PHV_07_AWR      =           1553667503 (NUMBER)
DEFINE PHV_08_AWR      =                   -1 (NUMBER)
DEFINE PHV_09_AWR      =                   -1 (NUMBER)
DEFINE PHV_10_AWR      =                   -1 (NUMBER)
DEFINE PHV_11_AWR      =                   -1 (NUMBER)
DEFINE PHV_12_AWR      =                   -1 (NUMBER)
DEFINE PHV_13_AWR      =                   -1 (NUMBER)
DEFINE PHV_14_AWR      =                   -1 (NUMBER)
DEFINE PHV_15_AWR      =                   -1 (NUMBER)
DEFINE PHV_01          =           2157031554 (NUMBER)
DEFINE PHV_02          =           1631436210 (NUMBER)
DEFINE PHV_03          =           2283497611 (NUMBER)
DEFINE PHV_04          =            585197806 (NUMBER)
DEFINE PHV_05          =            878120166 (NUMBER)
DEFINE PHV_06          =           3954730776 (NUMBER)
DEFINE PHV_07          =           1553667503 (NUMBER)
DEFINE PHV_08          =                   -1 (NUMBER)
DEFINE PHV_09          =                   -1 (NUMBER)
DEFINE PHV_10          =                   -1 (NUMBER)
DEFINE PHV_11          =                   -1 (NUMBER)
DEFINE PHV_12          =                   -1 (NUMBER)
DEFINE PHV_13          =                   -1 (NUMBER)
DEFINE PHV_14          =                   -1 (NUMBER)
DEFINE PHV_15          =                   -1 (NUMBER)
DEFINE 1               = "skip" (CHAR)
DEFINE 2               = "inst8sqld360_9a_pre_one.sql" (CHAR)
DEFINE 3               = "null" (CHAR)

end log
